var U7e=Object.defineProperty;var z7e=(e,t,n)=>t in e?U7e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var V7e=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Of=(e,t,n)=>z7e(e,typeof t!="symbol"?t+"":t,n);var wan=V7e((Mun,Mae)=>{function H7e(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var aa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function q7e(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var NU={exports:{}},Mk={},DU={exports:{}},Cr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var due;function W7e(){if(due)return Cr;due=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),l=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),f=Symbol.iterator;function d(j){return j===null||typeof j!="object"?null:(j=f&&j[f]||j["@@iterator"],typeof j=="function"?j:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,m={};function y(j,G,V){this.props=j,this.context=G,this.refs=m,this.updater=V||h}y.prototype.isReactComponent={},y.prototype.setState=function(j,G){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,G,"setState")},y.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function v(){}v.prototype=y.prototype;function b(j,G,V){this.props=j,this.context=G,this.refs=m,this.updater=V||h}var w=b.prototype=new v;w.constructor=b,p(w,y.prototype),w.isPureReactComponent=!0;var E=Array.isArray,T=Object.prototype.hasOwnProperty,A={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function R(j,G,V){var Y,ee={},ae=null,_e=null;if(G!=null)for(Y in G.ref!==void 0&&(_e=G.ref),G.key!==void 0&&(ae=""+G.key),G)T.call(G,Y)&&!I.hasOwnProperty(Y)&&(ee[Y]=G[Y]);var pe=arguments.length-2;if(pe===1)ee.children=V;else if(1<pe){for(var Te=Array(pe),Le=0;Le<pe;Le++)Te[Le]=arguments[Le+2];ee.children=Te}if(j&&j.defaultProps)for(Y in pe=j.defaultProps,pe)ee[Y]===void 0&&(ee[Y]=pe[Y]);return{$$typeof:e,type:j,key:ae,ref:_e,props:ee,_owner:A.current}}function D(j,G){return{$$typeof:e,type:j.type,key:G,ref:j.ref,props:j.props,_owner:j._owner}}function M(j){return typeof j=="object"&&j!==null&&j.$$typeof===e}function $(j){var G={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(V){return G[V]})}var U=/\/+/g;function F(j,G){return typeof j=="object"&&j!==null&&j.key!=null?$(""+j.key):G.toString(36)}function H(j,G,V,Y,ee){var ae=typeof j;(ae==="undefined"||ae==="boolean")&&(j=null);var _e=!1;if(j===null)_e=!0;else switch(ae){case"string":case"number":_e=!0;break;case"object":switch(j.$$typeof){case e:case t:_e=!0}}if(_e)return _e=j,ee=ee(_e),j=Y===""?"."+F(_e,0):Y,E(ee)?(V="",j!=null&&(V=j.replace(U,"$&/")+"/"),H(ee,G,V,"",function(Le){return Le})):ee!=null&&(M(ee)&&(ee=D(ee,V+(!ee.key||_e&&_e.key===ee.key?"":(""+ee.key).replace(U,"$&/")+"/")+j)),G.push(ee)),1;if(_e=0,Y=Y===""?".":Y+":",E(j))for(var pe=0;pe<j.length;pe++){ae=j[pe];var Te=Y+F(ae,pe);_e+=H(ae,G,V,Te,ee)}else if(Te=d(j),typeof Te=="function")for(j=Te.call(j),pe=0;!(ae=j.next()).done;)ae=ae.value,Te=Y+F(ae,pe++),_e+=H(ae,G,V,Te,ee);else if(ae==="object")throw G=String(j),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return _e}function Q(j,G,V){if(j==null)return j;var Y=[],ee=0;return H(j,Y,"","",function(ae){return G.call(V,ae,ee++)}),Y}function J(j){if(j._status===-1){var G=j._result;G=G(),G.then(function(V){(j._status===0||j._status===-1)&&(j._status=1,j._result=V)},function(V){(j._status===0||j._status===-1)&&(j._status=2,j._result=V)}),j._status===-1&&(j._status=0,j._result=G)}if(j._status===1)return j._result.default;throw j._result}var ne={current:null},Z={transition:null},ie={ReactCurrentDispatcher:ne,ReactCurrentBatchConfig:Z,ReactCurrentOwner:A};function q(){throw Error("act(...) is not supported in production builds of React.")}return Cr.Children={map:Q,forEach:function(j,G,V){Q(j,function(){G.apply(this,arguments)},V)},count:function(j){var G=0;return Q(j,function(){G++}),G},toArray:function(j){return Q(j,function(G){return G})||[]},only:function(j){if(!M(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},Cr.Component=y,Cr.Fragment=n,Cr.Profiler=i,Cr.PureComponent=b,Cr.StrictMode=r,Cr.Suspense=u,Cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ie,Cr.act=q,Cr.cloneElement=function(j,G,V){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var Y=p({},j.props),ee=j.key,ae=j.ref,_e=j._owner;if(G!=null){if(G.ref!==void 0&&(ae=G.ref,_e=A.current),G.key!==void 0&&(ee=""+G.key),j.type&&j.type.defaultProps)var pe=j.type.defaultProps;for(Te in G)T.call(G,Te)&&!I.hasOwnProperty(Te)&&(Y[Te]=G[Te]===void 0&&pe!==void 0?pe[Te]:G[Te])}var Te=arguments.length-2;if(Te===1)Y.children=V;else if(1<Te){pe=Array(Te);for(var Le=0;Le<Te;Le++)pe[Le]=arguments[Le+2];Y.children=pe}return{$$typeof:e,type:j.type,key:ee,ref:ae,props:Y,_owner:_e}},Cr.createContext=function(j){return j={$$typeof:o,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:s,_context:j},j.Consumer=j},Cr.createElement=R,Cr.createFactory=function(j){var G=R.bind(null,j);return G.type=j,G},Cr.createRef=function(){return{current:null}},Cr.forwardRef=function(j){return{$$typeof:a,render:j}},Cr.isValidElement=M,Cr.lazy=function(j){return{$$typeof:c,_payload:{_status:-1,_result:j},_init:J}},Cr.memo=function(j,G){return{$$typeof:l,type:j,compare:G===void 0?null:G}},Cr.startTransition=function(j){var G=Z.transition;Z.transition={};try{j()}finally{Z.transition=G}},Cr.unstable_act=q,Cr.useCallback=function(j,G){return ne.current.useCallback(j,G)},Cr.useContext=function(j){return ne.current.useContext(j)},Cr.useDebugValue=function(){},Cr.useDeferredValue=function(j){return ne.current.useDeferredValue(j)},Cr.useEffect=function(j,G){return ne.current.useEffect(j,G)},Cr.useId=function(){return ne.current.useId()},Cr.useImperativeHandle=function(j,G,V){return ne.current.useImperativeHandle(j,G,V)},Cr.useInsertionEffect=function(j,G){return ne.current.useInsertionEffect(j,G)},Cr.useLayoutEffect=function(j,G){return ne.current.useLayoutEffect(j,G)},Cr.useMemo=function(j,G){return ne.current.useMemo(j,G)},Cr.useReducer=function(j,G,V){return ne.current.useReducer(j,G,V)},Cr.useRef=function(j){return ne.current.useRef(j)},Cr.useState=function(j){return ne.current.useState(j)},Cr.useSyncExternalStore=function(j,G,V){return ne.current.useSyncExternalStore(j,G,V)},Cr.useTransition=function(){return ne.current.useTransition()},Cr.version="18.3.1",Cr}var hue;function $8(){return hue||(hue=1,DU.exports=W7e()),DU.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pue;function G7e(){if(pue)return Mk;pue=1;var e=$8(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,u,l){var c,f={},d=null,h=null;l!==void 0&&(d=""+l),u.key!==void 0&&(d=""+u.key),u.ref!==void 0&&(h=u.ref);for(c in u)r.call(u,c)&&!s.hasOwnProperty(c)&&(f[c]=u[c]);if(a&&a.defaultProps)for(c in u=a.defaultProps,u)f[c]===void 0&&(f[c]=u[c]);return{$$typeof:t,type:a,key:d,ref:h,props:f,_owner:i.current}}return Mk.Fragment=n,Mk.jsx=o,Mk.jsxs=o,Mk}var mue;function Y7e(){return mue||(mue=1,NU.exports=G7e()),NU.exports}var S=Y7e(),O=$8();const li=hh(O),K7e=H7e({__proto__:null,default:li},[O]);var T4={},PU={exports:{}},Ac={},OU={exports:{}},MU={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gue;function X7e(){return gue||(gue=1,function(e){function t(Z,ie){var q=Z.length;Z.push(ie);e:for(;0<q;){var j=q-1>>>1,G=Z[j];if(0<i(G,ie))Z[j]=ie,Z[q]=G,q=j;else break e}}function n(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var ie=Z[0],q=Z.pop();if(q!==ie){Z[0]=q;e:for(var j=0,G=Z.length,V=G>>>1;j<V;){var Y=2*(j+1)-1,ee=Z[Y],ae=Y+1,_e=Z[ae];if(0>i(ee,q))ae<G&&0>i(_e,ee)?(Z[j]=_e,Z[ae]=q,j=ae):(Z[j]=ee,Z[Y]=q,j=Y);else if(ae<G&&0>i(_e,q))Z[j]=_e,Z[ae]=q,j=ae;else break e}}return ie}function i(Z,ie){var q=Z.sortIndex-ie.sortIndex;return q!==0?q:Z.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(Z){for(var ie=n(l);ie!==null;){if(ie.callback===null)r(l);else if(ie.startTime<=Z)r(l),ie.sortIndex=ie.expirationTime,t(u,ie);else break;ie=n(l)}}function E(Z){if(m=!1,w(Z),!p)if(n(u)!==null)p=!0,J(T);else{var ie=n(l);ie!==null&&ne(E,ie.startTime-Z)}}function T(Z,ie){p=!1,m&&(m=!1,v(R),R=-1),h=!0;var q=d;try{for(w(ie),f=n(u);f!==null&&(!(f.expirationTime>ie)||Z&&!$());){var j=f.callback;if(typeof j=="function"){f.callback=null,d=f.priorityLevel;var G=j(f.expirationTime<=ie);ie=e.unstable_now(),typeof G=="function"?f.callback=G:f===n(u)&&r(u),w(ie)}else r(u);f=n(u)}if(f!==null)var V=!0;else{var Y=n(l);Y!==null&&ne(E,Y.startTime-ie),V=!1}return V}finally{f=null,d=q,h=!1}}var A=!1,I=null,R=-1,D=5,M=-1;function $(){return!(e.unstable_now()-M<D)}function U(){if(I!==null){var Z=e.unstable_now();M=Z;var ie=!0;try{ie=I(!0,Z)}finally{ie?F():(A=!1,I=null)}}else A=!1}var F;if(typeof b=="function")F=function(){b(U)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,Q=H.port2;H.port1.onmessage=U,F=function(){Q.postMessage(null)}}else F=function(){y(U,0)};function J(Z){I=Z,A||(A=!0,F())}function ne(Z,ie){R=y(function(){Z(e.unstable_now())},ie)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Z){Z.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,J(T))},e.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<Z?Math.floor(1e3/Z):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(Z){switch(d){case 1:case 2:case 3:var ie=3;break;default:ie=d}var q=d;d=ie;try{return Z()}finally{d=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Z,ie){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var q=d;d=Z;try{return ie()}finally{d=q}},e.unstable_scheduleCallback=function(Z,ie,q){var j=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?j+q:j):q=j,Z){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=q+G,Z={id:c++,callback:ie,priorityLevel:Z,startTime:q,expirationTime:G,sortIndex:-1},q>j?(Z.sortIndex=q,t(l,Z),n(u)===null&&Z===n(l)&&(m?(v(R),R=-1):m=!0,ne(E,q-j))):(Z.sortIndex=G,t(u,Z),p||h||(p=!0,J(T))),Z},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(Z){var ie=d;return function(){var q=d;d=ie;try{return Z.apply(this,arguments)}finally{d=q}}}}(MU)),MU}var yue;function Q7e(){return yue||(yue=1,OU.exports=X7e()),OU.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vue;function J7e(){if(vue)return Ac;vue=1;var e=$8(),t=Q7e();function n(g){for(var x="https://reactjs.org/docs/error-decoder.html?invariant="+g,k=1;k<arguments.length;k++)x+="&args[]="+encodeURIComponent(arguments[k]);return"Minified React error #"+g+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(g,x){o(g,x),o(g+"Capture",x)}function o(g,x){for(i[g]=x,g=0;g<x.length;g++)r.add(x[g])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,l=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},f={};function d(g){return u.call(f,g)?!0:u.call(c,g)?!1:l.test(g)?f[g]=!0:(c[g]=!0,!1)}function h(g,x,k,P){if(k!==null&&k.type===0)return!1;switch(typeof x){case"function":case"symbol":return!0;case"boolean":return P?!1:k!==null?!k.acceptsBooleans:(g=g.toLowerCase().slice(0,5),g!=="data-"&&g!=="aria-");default:return!1}}function p(g,x,k,P){if(x===null||typeof x>"u"||h(g,x,k,P))return!0;if(P)return!1;if(k!==null)switch(k.type){case 3:return!x;case 4:return x===!1;case 5:return isNaN(x);case 6:return isNaN(x)||1>x}return!1}function m(g,x,k,P,z,K,se){this.acceptsBooleans=x===2||x===3||x===4,this.attributeName=P,this.attributeNamespace=z,this.mustUseProperty=k,this.propertyName=g,this.type=x,this.sanitizeURL=K,this.removeEmptyString=se}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(g){y[g]=new m(g,0,!1,g,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(g){var x=g[0];y[x]=new m(x,1,!1,g[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(g){y[g]=new m(g,2,!1,g.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(g){y[g]=new m(g,2,!1,g,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(g){y[g]=new m(g,3,!1,g.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(g){y[g]=new m(g,3,!0,g,null,!1,!1)}),["capture","download"].forEach(function(g){y[g]=new m(g,4,!1,g,null,!1,!1)}),["cols","rows","size","span"].forEach(function(g){y[g]=new m(g,6,!1,g,null,!1,!1)}),["rowSpan","start"].forEach(function(g){y[g]=new m(g,5,!1,g.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function b(g){return g[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(g){var x=g.replace(v,b);y[x]=new m(x,1,!1,g,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(g){var x=g.replace(v,b);y[x]=new m(x,1,!1,g,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(g){var x=g.replace(v,b);y[x]=new m(x,1,!1,g,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(g){y[g]=new m(g,1,!1,g.toLowerCase(),null,!1,!1)}),y.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(g){y[g]=new m(g,1,!1,g.toLowerCase(),null,!0,!0)});function w(g,x,k,P){var z=y.hasOwnProperty(x)?y[x]:null;(z!==null?z.type!==0:P||!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(p(x,k,z,P)&&(k=null),P||z===null?d(x)&&(k===null?g.removeAttribute(x):g.setAttribute(x,""+k)):z.mustUseProperty?g[z.propertyName]=k===null?z.type===3?!1:"":k:(x=z.attributeName,P=z.attributeNamespace,k===null?g.removeAttribute(x):(z=z.type,k=z===3||z===4&&k===!0?"":""+k,P?g.setAttributeNS(P,x,k):g.setAttribute(x,k))))}var E=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T=Symbol.for("react.element"),A=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),$=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),ne=Symbol.for("react.offscreen"),Z=Symbol.iterator;function ie(g){return g===null||typeof g!="object"?null:(g=Z&&g[Z]||g["@@iterator"],typeof g=="function"?g:null)}var q=Object.assign,j;function G(g){if(j===void 0)try{throw Error()}catch(k){var x=k.stack.trim().match(/\n( *(at )?)/);j=x&&x[1]||""}return`
`+j+g}var V=!1;function Y(g,x){if(!g||V)return"";V=!0;var k=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(x)if(x=function(){throw Error()},Object.defineProperty(x.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(x,[])}catch(Xe){var P=Xe}Reflect.construct(g,[],x)}else{try{x.call()}catch(Xe){P=Xe}g.call(x.prototype)}else{try{throw Error()}catch(Xe){P=Xe}g()}}catch(Xe){if(Xe&&P&&typeof Xe.stack=="string"){for(var z=Xe.stack.split(`
`),K=P.stack.split(`
`),se=z.length-1,be=K.length-1;1<=se&&0<=be&&z[se]!==K[be];)be--;for(;1<=se&&0<=be;se--,be--)if(z[se]!==K[be]){if(se!==1||be!==1)do if(se--,be--,0>be||z[se]!==K[be]){var Ce=`
`+z[se].replace(" at new "," at ");return g.displayName&&Ce.includes("<anonymous>")&&(Ce=Ce.replace("<anonymous>",g.displayName)),Ce}while(1<=se&&0<=be);break}}}finally{V=!1,Error.prepareStackTrace=k}return(g=g?g.displayName||g.name:"")?G(g):""}function ee(g){switch(g.tag){case 5:return G(g.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return g=Y(g.type,!1),g;case 11:return g=Y(g.type.render,!1),g;case 1:return g=Y(g.type,!0),g;default:return""}}function ae(g){if(g==null)return null;if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g;switch(g){case I:return"Fragment";case A:return"Portal";case D:return"Profiler";case R:return"StrictMode";case F:return"Suspense";case H:return"SuspenseList"}if(typeof g=="object")switch(g.$$typeof){case $:return(g.displayName||"Context")+".Consumer";case M:return(g._context.displayName||"Context")+".Provider";case U:var x=g.render;return g=g.displayName,g||(g=x.displayName||x.name||"",g=g!==""?"ForwardRef("+g+")":"ForwardRef"),g;case Q:return x=g.displayName||null,x!==null?x:ae(g.type)||"Memo";case J:x=g._payload,g=g._init;try{return ae(g(x))}catch{}}return null}function _e(g){var x=g.type;switch(g.tag){case 24:return"Cache";case 9:return(x.displayName||"Context")+".Consumer";case 10:return(x._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return g=x.render,g=g.displayName||g.name||"",x.displayName||(g!==""?"ForwardRef("+g+")":"ForwardRef");case 7:return"Fragment";case 5:return x;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ae(x);case 8:return x===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x}return null}function pe(g){switch(typeof g){case"boolean":case"number":case"string":case"undefined":return g;case"object":return g;default:return""}}function Te(g){var x=g.type;return(g=g.nodeName)&&g.toLowerCase()==="input"&&(x==="checkbox"||x==="radio")}function Le(g){var x=Te(g)?"checked":"value",k=Object.getOwnPropertyDescriptor(g.constructor.prototype,x),P=""+g[x];if(!g.hasOwnProperty(x)&&typeof k<"u"&&typeof k.get=="function"&&typeof k.set=="function"){var z=k.get,K=k.set;return Object.defineProperty(g,x,{configurable:!0,get:function(){return z.call(this)},set:function(se){P=""+se,K.call(this,se)}}),Object.defineProperty(g,x,{enumerable:k.enumerable}),{getValue:function(){return P},setValue:function(se){P=""+se},stopTracking:function(){g._valueTracker=null,delete g[x]}}}}function ye(g){g._valueTracker||(g._valueTracker=Le(g))}function he(g){if(!g)return!1;var x=g._valueTracker;if(!x)return!0;var k=x.getValue(),P="";return g&&(P=Te(g)?g.checked?"true":"false":g.value),g=P,g!==k?(x.setValue(g),!0):!1}function $e(g){if(g=g||(typeof document<"u"?document:void 0),typeof g>"u")return null;try{return g.activeElement||g.body}catch{return g.body}}function Ne(g,x){var k=x.checked;return q({},x,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:k??g._wrapperState.initialChecked})}function tt(g,x){var k=x.defaultValue==null?"":x.defaultValue,P=x.checked!=null?x.checked:x.defaultChecked;k=pe(x.value!=null?x.value:k),g._wrapperState={initialChecked:P,initialValue:k,controlled:x.type==="checkbox"||x.type==="radio"?x.checked!=null:x.value!=null}}function it(g,x){x=x.checked,x!=null&&w(g,"checked",x,!1)}function Me(g,x){it(g,x);var k=pe(x.value),P=x.type;if(k!=null)P==="number"?(k===0&&g.value===""||g.value!=k)&&(g.value=""+k):g.value!==""+k&&(g.value=""+k);else if(P==="submit"||P==="reset"){g.removeAttribute("value");return}x.hasOwnProperty("value")?at(g,x.type,k):x.hasOwnProperty("defaultValue")&&at(g,x.type,pe(x.defaultValue)),x.checked==null&&x.defaultChecked!=null&&(g.defaultChecked=!!x.defaultChecked)}function Ge(g,x,k){if(x.hasOwnProperty("value")||x.hasOwnProperty("defaultValue")){var P=x.type;if(!(P!=="submit"&&P!=="reset"||x.value!==void 0&&x.value!==null))return;x=""+g._wrapperState.initialValue,k||x===g.value||(g.value=x),g.defaultValue=x}k=g.name,k!==""&&(g.name=""),g.defaultChecked=!!g._wrapperState.initialChecked,k!==""&&(g.name=k)}function at(g,x,k){(x!=="number"||$e(g.ownerDocument)!==g)&&(k==null?g.defaultValue=""+g._wrapperState.initialValue:g.defaultValue!==""+k&&(g.defaultValue=""+k))}var yt=Array.isArray;function Tt(g,x,k,P){if(g=g.options,x){x={};for(var z=0;z<k.length;z++)x["$"+k[z]]=!0;for(k=0;k<g.length;k++)z=x.hasOwnProperty("$"+g[k].value),g[k].selected!==z&&(g[k].selected=z),z&&P&&(g[k].defaultSelected=!0)}else{for(k=""+pe(k),x=null,z=0;z<g.length;z++){if(g[z].value===k){g[z].selected=!0,P&&(g[z].defaultSelected=!0);return}x!==null||g[z].disabled||(x=g[z])}x!==null&&(x.selected=!0)}}function Ot(g,x){if(x.dangerouslySetInnerHTML!=null)throw Error(n(91));return q({},x,{value:void 0,defaultValue:void 0,children:""+g._wrapperState.initialValue})}function qe(g,x){var k=x.value;if(k==null){if(k=x.children,x=x.defaultValue,k!=null){if(x!=null)throw Error(n(92));if(yt(k)){if(1<k.length)throw Error(n(93));k=k[0]}x=k}x==null&&(x=""),k=x}g._wrapperState={initialValue:pe(k)}}function ft(g,x){var k=pe(x.value),P=pe(x.defaultValue);k!=null&&(k=""+k,k!==g.value&&(g.value=k),x.defaultValue==null&&g.defaultValue!==k&&(g.defaultValue=k)),P!=null&&(g.defaultValue=""+P)}function wt(g){var x=g.textContent;x===g._wrapperState.initialValue&&x!==""&&x!==null&&(g.value=x)}function ke(g){switch(g){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Oe(g,x){return g==null||g==="http://www.w3.org/1999/xhtml"?ke(x):g==="http://www.w3.org/2000/svg"&&x==="foreignObject"?"http://www.w3.org/1999/xhtml":g}var dt,Lt=function(g){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(x,k,P,z){MSApp.execUnsafeLocalFunction(function(){return g(x,k,P,z)})}:g}(function(g,x){if(g.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in g)g.innerHTML=x;else{for(dt=dt||document.createElement("div"),dt.innerHTML="<svg>"+x.valueOf().toString()+"</svg>",x=dt.firstChild;g.firstChild;)g.removeChild(g.firstChild);for(;x.firstChild;)g.appendChild(x.firstChild)}});function Ft(g,x){if(x){var k=g.firstChild;if(k&&k===g.lastChild&&k.nodeType===3){k.nodeValue=x;return}}g.textContent=x}var dn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Dn=["Webkit","ms","Moz","O"];Object.keys(dn).forEach(function(g){Dn.forEach(function(x){x=x+g.charAt(0).toUpperCase()+g.substring(1),dn[x]=dn[g]})});function Tr(g,x,k){return x==null||typeof x=="boolean"||x===""?"":k||typeof x!="number"||x===0||dn.hasOwnProperty(g)&&dn[g]?(""+x).trim():x+"px"}function Ri(g,x){g=g.style;for(var k in x)if(x.hasOwnProperty(k)){var P=k.indexOf("--")===0,z=Tr(k,x[k],P);k==="float"&&(k="cssFloat"),P?g.setProperty(k,z):g[k]=z}}var Un=q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tr(g,x){if(x){if(Un[g]&&(x.children!=null||x.dangerouslySetInnerHTML!=null))throw Error(n(137,g));if(x.dangerouslySetInnerHTML!=null){if(x.children!=null)throw Error(n(60));if(typeof x.dangerouslySetInnerHTML!="object"||!("__html"in x.dangerouslySetInnerHTML))throw Error(n(61))}if(x.style!=null&&typeof x.style!="object")throw Error(n(62))}}function Si(g,x){if(g.indexOf("-")===-1)return typeof x.is=="string";switch(g){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sr=null;function Po(g){return g=g.target||g.srcElement||window,g.correspondingUseElement&&(g=g.correspondingUseElement),g.nodeType===3?g.parentNode:g}var Qi=null,Ni=null,Ji=null;function Xr(g){if(g=xa(g)){if(typeof Qi!="function")throw Error(n(280));var x=g.stateNode;x&&(x=TT(x),Qi(g.stateNode,g.type,x))}}function Oo(g){Ni?Ji?Ji.push(g):Ji=[g]:Ni=g}function ic(){if(Ni){var g=Ni,x=Ji;if(Ji=Ni=null,Xr(g),x)for(g=0;g<x.length;g++)Xr(x[g])}}function ga(g,x){return g(x)}function Iu(){}var Qr=!1;function Bi(g,x,k){if(Qr)return g(x,k);Qr=!0;try{return ga(g,x,k)}finally{Qr=!1,(Ni!==null||Ji!==null)&&(Iu(),ic())}}function si(g,x){var k=g.stateNode;if(k===null)return null;var P=TT(k);if(P===null)return null;k=P[x];e:switch(x){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(P=!P.disabled)||(g=g.type,P=!(g==="button"||g==="input"||g==="select"||g==="textarea")),g=!P;break e;default:g=!1}if(g)return null;if(k&&typeof k!="function")throw Error(n(231,x,typeof k));return k}var Hs=!1;if(a)try{var Fr={};Object.defineProperty(Fr,"passive",{get:function(){Hs=!0}}),window.addEventListener("test",Fr,Fr),window.removeEventListener("test",Fr,Fr)}catch{Hs=!1}function Zi(g,x,k,P,z,K,se,be,Ce){var Xe=Array.prototype.slice.call(arguments,3);try{x.apply(k,Xe)}catch(St){this.onError(St)}}var Mo=!1,co=null,Ko=!1,vl=null,kh={onError:function(g){Mo=!0,co=g}};function Pr(g,x,k,P,z,K,se,be,Ce){Mo=!1,co=null,Zi.apply(kh,arguments)}function sc(g,x,k,P,z,K,se,be,Ce){if(Pr.apply(this,arguments),Mo){if(Mo){var Xe=co;Mo=!1,co=null}else throw Error(n(198));Ko||(Ko=!0,vl=Xe)}}function ps(g){var x=g,k=g;if(g.alternate)for(;x.return;)x=x.return;else{g=x;do x=g,x.flags&4098&&(k=x.return),g=x.return;while(g)}return x.tag===3?k:null}function Wa(g){if(g.tag===13){var x=g.memoizedState;if(x===null&&(g=g.alternate,g!==null&&(x=g.memoizedState)),x!==null)return x.dehydrated}return null}function Xo(g){if(ps(g)!==g)throw Error(n(188))}function fm(g){var x=g.alternate;if(!x){if(x=ps(g),x===null)throw Error(n(188));return x!==g?null:g}for(var k=g,P=x;;){var z=k.return;if(z===null)break;var K=z.alternate;if(K===null){if(P=z.return,P!==null){k=P;continue}break}if(z.child===K.child){for(K=z.child;K;){if(K===k)return Xo(z),g;if(K===P)return Xo(z),x;K=K.sibling}throw Error(n(188))}if(k.return!==P.return)k=z,P=K;else{for(var se=!1,be=z.child;be;){if(be===k){se=!0,k=z,P=K;break}if(be===P){se=!0,P=z,k=K;break}be=be.sibling}if(!se){for(be=K.child;be;){if(be===k){se=!0,k=K,P=z;break}if(be===P){se=!0,P=K,k=z;break}be=be.sibling}if(!se)throw Error(n(189))}}if(k.alternate!==P)throw Error(n(190))}if(k.tag!==3)throw Error(n(188));return k.stateNode.current===k?g:x}function Rh(g){return g=fm(g),g!==null?yd(g):null}function yd(g){if(g.tag===5||g.tag===6)return g;for(g=g.child;g!==null;){var x=yd(g);if(x!==null)return x;g=g.sibling}return null}var vd=t.unstable_scheduleCallback,df=t.unstable_cancelCallback,hf=t.unstable_shouldYield,pf=t.unstable_requestPaint,fr=t.unstable_now,Nh=t.unstable_getCurrentPriorityLevel,fo=t.unstable_ImmediatePriority,bl=t.unstable_UserBlockingPriority,qs=t.unstable_NormalPriority,oc=t.unstable_LowPriority,Dh=t.unstable_IdlePriority,ac=null,ho=null;function dm(g){if(ho&&typeof ho.onCommitFiberRoot=="function")try{ho.onCommitFiberRoot(ac,g,void 0,(g.current.flags&128)===128)}catch{}}var po=Math.clz32?Math.clz32:ge,ue=Math.log,Se=Math.LN2;function ge(g){return g>>>=0,g===0?32:31-(ue(g)/Se|0)|0}var De=64,Be=4194304;function Re(g){switch(g&-g){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return g&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return g}}function rt(g,x){var k=g.pendingLanes;if(k===0)return 0;var P=0,z=g.suspendedLanes,K=g.pingedLanes,se=k&268435455;if(se!==0){var be=se&~z;be!==0?P=Re(be):(K&=se,K!==0&&(P=Re(K)))}else se=k&~z,se!==0?P=Re(se):K!==0&&(P=Re(K));if(P===0)return 0;if(x!==0&&x!==P&&!(x&z)&&(z=P&-P,K=x&-x,z>=K||z===16&&(K&4194240)!==0))return x;if(P&4&&(P|=k&16),x=g.entangledLanes,x!==0)for(g=g.entanglements,x&=P;0<x;)k=31-po(x),z=1<<k,P|=g[k],x&=~z;return P}function bt(g,x){switch(g){case 1:case 2:case 4:return x+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Et(g,x){for(var k=g.suspendedLanes,P=g.pingedLanes,z=g.expirationTimes,K=g.pendingLanes;0<K;){var se=31-po(K),be=1<<se,Ce=z[se];Ce===-1?(!(be&k)||be&P)&&(z[se]=bt(be,x)):Ce<=x&&(g.expiredLanes|=be),K&=~be}}function xt(g){return g=g.pendingLanes&-1073741825,g!==0?g:g&1073741824?1073741824:0}function Nt(){var g=De;return De<<=1,!(De&4194240)&&(De=64),g}function qt(g){for(var x=[],k=0;31>k;k++)x.push(g);return x}function In(g,x,k){g.pendingLanes|=x,x!==536870912&&(g.suspendedLanes=0,g.pingedLanes=0),g=g.eventTimes,x=31-po(x),g[x]=k}function un(g,x){var k=g.pendingLanes&~x;g.pendingLanes=x,g.suspendedLanes=0,g.pingedLanes=0,g.expiredLanes&=x,g.mutableReadLanes&=x,g.entangledLanes&=x,x=g.entanglements;var P=g.eventTimes;for(g=g.expirationTimes;0<k;){var z=31-po(k),K=1<<z;x[z]=0,P[z]=-1,g[z]=-1,k&=~K}}function nr(g,x){var k=g.entangledLanes|=x;for(g=g.entanglements;k;){var P=31-po(k),z=1<<P;z&x|g[P]&x&&(g[P]|=x),k&=~z}}var ln=0;function br(g){return g&=-g,1<g?4<g?g&268435455?16:536870912:4:1}var Ws,Ga,uc,Ph,mf,Oh=!1,Lo=[],ms=null,$o=null,Ya=null,gf=new Map,Ka=new Map,ku=[],j1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lc(g,x){switch(g){case"focusin":case"focusout":ms=null;break;case"dragenter":case"dragleave":$o=null;break;case"mouseover":case"mouseout":Ya=null;break;case"pointerover":case"pointerout":gf.delete(x.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ka.delete(x.pointerId)}}function Es(g,x,k,P,z,K){return g===null||g.nativeEvent!==K?(g={blockedOn:x,domEventName:k,eventSystemFlags:P,nativeEvent:K,targetContainers:[z]},x!==null&&(x=xa(x),x!==null&&Ga(x)),g):(g.eventSystemFlags|=P,x=g.targetContainers,z!==null&&x.indexOf(z)===-1&&x.push(z),g)}function jx(g,x,k,P,z){switch(x){case"focusin":return ms=Es(ms,g,x,k,P,z),!0;case"dragenter":return $o=Es($o,g,x,k,P,z),!0;case"mouseover":return Ya=Es(Ya,g,x,k,P,z),!0;case"pointerover":var K=z.pointerId;return gf.set(K,Es(gf.get(K)||null,g,x,k,P,z)),!0;case"gotpointercapture":return K=z.pointerId,Ka.set(K,Es(Ka.get(K)||null,g,x,k,P,z)),!0}return!1}function xg(g){var x=Td(g.target);if(x!==null){var k=ps(x);if(k!==null){if(x=k.tag,x===13){if(x=Wa(k),x!==null){g.blockedOn=x,mf(g.priority,function(){uc(k)});return}}else if(x===3&&k.stateNode.current.memoizedState.isDehydrated){g.blockedOn=k.tag===3?k.stateNode.containerInfo:null;return}}}g.blockedOn=null}function yf(g){if(g.blockedOn!==null)return!1;for(var x=g.targetContainers;0<x.length;){var k=kr(g.domEventName,g.eventSystemFlags,x[0],g.nativeEvent);if(k===null){k=g.nativeEvent;var P=new k.constructor(k.type,k);Sr=P,k.target.dispatchEvent(P),Sr=null}else return x=xa(k),x!==null&&Ga(x),g.blockedOn=k,!1;x.shift()}return!0}function bd(g,x,k){yf(g)&&k.delete(x)}function U1(){Oh=!1,ms!==null&&yf(ms)&&(ms=null),$o!==null&&yf($o)&&($o=null),Ya!==null&&yf(Ya)&&(Ya=null),gf.forEach(bd),Ka.forEach(bd)}function xr(g,x){g.blockedOn===x&&(g.blockedOn=null,Oh||(Oh=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,U1)))}function dr(g){function x(z){return xr(z,g)}if(0<Lo.length){xr(Lo[0],g);for(var k=1;k<Lo.length;k++){var P=Lo[k];P.blockedOn===g&&(P.blockedOn=null)}}for(ms!==null&&xr(ms,g),$o!==null&&xr($o,g),Ya!==null&&xr(Ya,g),gf.forEach(x),Ka.forEach(x),k=0;k<ku.length;k++)P=ku[k],P.blockedOn===g&&(P.blockedOn=null);for(;0<ku.length&&(k=ku[0],k.blockedOn===null);)xg(k),k.blockedOn===null&&ku.shift()}var vf=E.ReactCurrentBatchConfig,ve=!0;function Ae(g,x,k,P){var z=ln,K=vf.transition;vf.transition=null;try{ln=1,tn(g,x,k,P)}finally{ln=z,vf.transition=K}}function Qe(g,x,k,P){var z=ln,K=vf.transition;vf.transition=null;try{ln=4,tn(g,x,k,P)}finally{ln=z,vf.transition=K}}function tn(g,x,k,P){if(ve){var z=kr(g,x,k,P);if(z===null)FI(g,x,P,rr,k),lc(g,P);else if(jx(z,g,x,k,P))P.stopPropagation();else if(lc(g,P),x&4&&-1<j1.indexOf(g)){for(;z!==null;){var K=xa(z);if(K!==null&&Ws(K),K=kr(g,x,k,P),K===null&&FI(g,x,P,rr,k),K===z)break;z=K}z!==null&&P.stopPropagation()}else FI(g,x,P,null,k)}}var rr=null;function kr(g,x,k,P){if(rr=null,g=Po(P),g=Td(g),g!==null)if(x=ps(g),x===null)g=null;else if(k=x.tag,k===13){if(g=Wa(x),g!==null)return g;g=null}else if(k===3){if(x.stateNode.current.memoizedState.isDehydrated)return x.tag===3?x.stateNode.containerInfo:null;g=null}else x!==g&&(g=null);return rr=g,null}function ci(g){switch(g){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Nh()){case fo:return 1;case bl:return 4;case qs:case oc:return 16;case Dh:return 536870912;default:return 16}default:return 16}}var cn=null,Br=null,Jr=null;function Gs(){if(Jr)return Jr;var g,x=Br,k=x.length,P,z="value"in cn?cn.value:cn.textContent,K=z.length;for(g=0;g<k&&x[g]===z[g];g++);var se=k-g;for(P=1;P<=se&&x[k-P]===z[K-P];P++);return Jr=z.slice(g,1<P?1-P:void 0)}function Ru(g){var x=g.keyCode;return"charCode"in g?(g=g.charCode,g===0&&x===13&&(g=13)):g=x,g===10&&(g=13),32<=g||g===13?g:0}function es(){return!0}function xd(){return!1}function Ls(g){function x(k,P,z,K,se){this._reactName=k,this._targetInst=z,this.type=P,this.nativeEvent=K,this.target=se,this.currentTarget=null;for(var be in g)g.hasOwnProperty(be)&&(k=g[be],this[be]=k?k(K):K[be]);return this.isDefaultPrevented=(K.defaultPrevented!=null?K.defaultPrevented:K.returnValue===!1)?es:xd,this.isPropagationStopped=xd,this}return q(x.prototype,{preventDefault:function(){this.defaultPrevented=!0;var k=this.nativeEvent;k&&(k.preventDefault?k.preventDefault():typeof k.returnValue!="unknown"&&(k.returnValue=!1),this.isDefaultPrevented=es)},stopPropagation:function(){var k=this.nativeEvent;k&&(k.stopPropagation?k.stopPropagation():typeof k.cancelBubble!="unknown"&&(k.cancelBubble=!0),this.isPropagationStopped=es)},persist:function(){},isPersistent:es}),x}var cc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(g){return g.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_g=Ls(cc),bf=q({},cc,{view:0,detail:0}),uT=Ls(bf),Fo,Mh,mo,wg=q({},bf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_d,button:0,buttons:0,relatedTarget:function(g){return g.relatedTarget===void 0?g.fromElement===g.srcElement?g.toElement:g.fromElement:g.relatedTarget},movementX:function(g){return"movementX"in g?g.movementX:(g!==mo&&(mo&&g.type==="mousemove"?(Fo=g.screenX-mo.screenX,Mh=g.screenY-mo.screenY):Mh=Fo=0,mo=g),Fo)},movementY:function(g){return"movementY"in g?g.movementY:Mh}}),Eg=Ls(wg),fc=q({},wg,{dataTransfer:0}),Tg=Ls(fc),hm=q({},bf,{relatedTarget:0}),_i=Ls(hm),xf=q({},cc,{animationName:0,elapsedTime:0,pseudoElement:0}),_f=Ls(xf),lT=q({},cc,{clipboardData:function(g){return"clipboardData"in g?g.clipboardData:window.clipboardData}}),z1=Ls(lT),cT=q({},cc,{data:0}),Ux=Ls(cT),V1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ya={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lh(g){var x=this.nativeEvent;return x.getModifierState?x.getModifierState(g):(g=Sg[g])?!!x[g]:!1}function _d(){return Lh}var N=q({},bf,{key:function(g){if(g.key){var x=V1[g.key]||g.key;if(x!=="Unidentified")return x}return g.type==="keypress"?(g=Ru(g),g===13?"Enter":String.fromCharCode(g)):g.type==="keydown"||g.type==="keyup"?ya[g.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_d,charCode:function(g){return g.type==="keypress"?Ru(g):0},keyCode:function(g){return g.type==="keydown"||g.type==="keyup"?g.keyCode:0},which:function(g){return g.type==="keypress"?Ru(g):g.type==="keydown"||g.type==="keyup"?g.keyCode:0}}),W=Ls(N),te=q({},wg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ce=Ls(te),ze=q({},bf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_d}),Ze=Ls(ze),Ut=q({},cc,{propertyName:0,elapsedTime:0,pseudoElement:0}),oi=Ls(Ut),go=q({},wg,{deltaX:function(g){return"deltaX"in g?g.deltaX:"wheelDeltaX"in g?-g.wheelDeltaX:0},deltaY:function(g){return"deltaY"in g?g.deltaY:"wheelDeltaY"in g?-g.wheelDeltaY:"wheelDelta"in g?-g.wheelDelta:0},deltaZ:0,deltaMode:0}),Rr=Ls(go),fi=[9,13,27,32],Ts=a&&"CompositionEvent"in window,va=null;a&&"documentMode"in document&&(va=document.documentMode);var Nu=a&&"TextEvent"in window&&!va,pm=a&&(!Ts||va&&8<va&&11>=va),H1=" ",wO=!1;function EO(g,x){switch(g){case"keyup":return fi.indexOf(x.keyCode)!==-1;case"keydown":return x.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function TO(g){return g=g.detail,typeof g=="object"&&"data"in g?g.data:null}var q1=!1;function W1(g,x){switch(g){case"compositionend":return TO(x);case"keypress":return x.which!==32?null:(wO=!0,H1);case"textInput":return g=x.data,g===H1&&wO?null:g;default:return null}}function G7(g,x){if(q1)return g==="compositionend"||!Ts&&EO(g,x)?(g=Gs(),Jr=Br=cn=null,q1=!1,g):null;switch(g){case"paste":return null;case"keypress":if(!(x.ctrlKey||x.altKey||x.metaKey)||x.ctrlKey&&x.altKey){if(x.char&&1<x.char.length)return x.char;if(x.which)return String.fromCharCode(x.which)}return null;case"compositionend":return pm&&x.locale!=="ko"?null:x.data;default:return null}}var Y7={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fT(g){var x=g&&g.nodeName&&g.nodeName.toLowerCase();return x==="input"?!!Y7[g.type]:x==="textarea"}function OI(g,x,k,P){Oo(P),x=xT(x,"onChange"),0<x.length&&(k=new _g("onChange","change",null,k,P),g.push({event:k,listeners:x}))}var dc=null,mm=null;function K7(g){NO(g,0)}function dT(g){var x=ir(g);if(he(x))return g}function X7(g,x){if(g==="change")return x}var Cg=!1;if(a){var xl;if(a){var hT="oninput"in document;if(!hT){var SO=document.createElement("div");SO.setAttribute("oninput","return;"),hT=typeof SO.oninput=="function"}xl=hT}else xl=!1;Cg=xl&&(!document.documentMode||9<document.documentMode)}function CO(){dc&&(dc.detachEvent("onpropertychange",AO),mm=dc=null)}function AO(g){if(g.propertyName==="value"&&dT(mm)){var x=[];OI(x,mm,g,Po(g)),Bi(K7,x)}}function Q7(g,x,k){g==="focusin"?(CO(),dc=x,mm=k,dc.attachEvent("onpropertychange",AO)):g==="focusout"&&CO()}function J7(g){if(g==="selectionchange"||g==="keyup"||g==="keydown")return dT(mm)}function G1(g,x){if(g==="click")return dT(x)}function Fe(g,x){if(g==="input"||g==="change")return dT(x)}function st(g,x){return g===x&&(g!==0||1/g===1/x)||g!==g&&x!==x}var Ye=typeof Object.is=="function"?Object.is:st;function Kt(g,x){if(Ye(g,x))return!0;if(typeof g!="object"||g===null||typeof x!="object"||x===null)return!1;var k=Object.keys(g),P=Object.keys(x);if(k.length!==P.length)return!1;for(P=0;P<k.length;P++){var z=k[P];if(!u.call(x,z)||!Ye(g[z],x[z]))return!1}return!0}function zn(g){for(;g&&g.firstChild;)g=g.firstChild;return g}function Zr(g,x){var k=zn(g);g=0;for(var P;k;){if(k.nodeType===3){if(P=g+k.textContent.length,g<=x&&P>=x)return{node:k,offset:x-g};g=P}e:{for(;k;){if(k.nextSibling){k=k.nextSibling;break e}k=k.parentNode}k=void 0}k=zn(k)}}function Ys(g,x){return g&&x?g===x?!0:g&&g.nodeType===3?!1:x&&x.nodeType===3?Ys(g,x.parentNode):"contains"in g?g.contains(x):g.compareDocumentPosition?!!(g.compareDocumentPosition(x)&16):!1:!1}function Ci(){for(var g=window,x=$e();x instanceof g.HTMLIFrameElement;){try{var k=typeof x.contentWindow.location.href=="string"}catch{k=!1}if(k)g=x.contentWindow;else break;x=$e(g.document)}return x}function zx(g){var x=g&&g.nodeName&&g.nodeName.toLowerCase();return x&&(x==="input"&&(g.type==="text"||g.type==="search"||g.type==="tel"||g.type==="url"||g.type==="password")||x==="textarea"||g.contentEditable==="true")}function Z7(g){var x=Ci(),k=g.focusedElem,P=g.selectionRange;if(x!==k&&k&&k.ownerDocument&&Ys(k.ownerDocument.documentElement,k)){if(P!==null&&zx(k)){if(x=P.start,g=P.end,g===void 0&&(g=x),"selectionStart"in k)k.selectionStart=x,k.selectionEnd=Math.min(g,k.value.length);else if(g=(x=k.ownerDocument||document)&&x.defaultView||window,g.getSelection){g=g.getSelection();var z=k.textContent.length,K=Math.min(P.start,z);P=P.end===void 0?K:Math.min(P.end,z),!g.extend&&K>P&&(z=P,P=K,K=z),z=Zr(k,K);var se=Zr(k,P);z&&se&&(g.rangeCount!==1||g.anchorNode!==z.node||g.anchorOffset!==z.offset||g.focusNode!==se.node||g.focusOffset!==se.offset)&&(x=x.createRange(),x.setStart(z.node,z.offset),g.removeAllRanges(),K>P?(g.addRange(x),g.extend(se.node,se.offset)):(x.setEnd(se.node,se.offset),g.addRange(x)))}}for(x=[],g=k;g=g.parentNode;)g.nodeType===1&&x.push({element:g,left:g.scrollLeft,top:g.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<x.length;k++)g=x[k],g.element.scrollLeft=g.left,g.element.scrollTop=g.top}}var hc=a&&"documentMode"in document&&11>=document.documentMode,$h=null,MI=null,wd=null,Y1=!1;function Vx(g,x,k){var P=k.window===k?k.document:k.nodeType===9?k:k.ownerDocument;Y1||$h==null||$h!==$e(P)||(P=$h,"selectionStart"in P&&zx(P)?P={start:P.selectionStart,end:P.selectionEnd}:(P=(P.ownerDocument&&P.ownerDocument.defaultView||window).getSelection(),P={anchorNode:P.anchorNode,anchorOffset:P.anchorOffset,focusNode:P.focusNode,focusOffset:P.focusOffset}),wd&&Kt(wd,P)||(wd=P,P=xT(MI,"onSelect"),0<P.length&&(x=new _g("onSelect","select",null,x,k),g.push({event:x,listeners:P}),x.target=$h)))}function ei(g,x){var k={};return k[g.toLowerCase()]=x.toLowerCase(),k["Webkit"+g]="webkit"+x,k["Moz"+g]="moz"+x,k}var K1={animationend:ei("Animation","AnimationEnd"),animationiteration:ei("Animation","AnimationIteration"),animationstart:ei("Animation","AnimationStart"),transitionend:ei("Transition","TransitionEnd")},pT={},Hx={};a&&(Hx=document.createElement("div").style,"AnimationEvent"in window||(delete K1.animationend.animation,delete K1.animationiteration.animation,delete K1.animationstart.animation),"TransitionEvent"in window||delete K1.transitionend.transition);function mT(g){if(pT[g])return pT[g];if(!K1[g])return g;var x=K1[g],k;for(k in x)if(x.hasOwnProperty(k)&&k in Hx)return pT[g]=x[k];return g}var IO=mT("animationend"),kO=mT("animationiteration"),qx=mT("animationstart"),Fh=mT("transitionend"),Wx=new Map,LI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wf(g,x){Wx.set(g,x),s(x,[g])}for(var gT=0;gT<LI.length;gT++){var yT=LI[gT],vT=yT.toLowerCase(),RO=yT[0].toUpperCase()+yT.slice(1);wf(vT,"on"+RO)}wf(IO,"onAnimationEnd"),wf(kO,"onAnimationIteration"),wf(qx,"onAnimationStart"),wf("dblclick","onDoubleClick"),wf("focusin","onFocus"),wf("focusout","onBlur"),wf(Fh,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ag=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bh));function Gx(g,x,k){var P=g.type||"unknown-event";g.currentTarget=k,sc(P,x,void 0,g),g.currentTarget=null}function NO(g,x){x=(x&4)!==0;for(var k=0;k<g.length;k++){var P=g[k],z=P.event;P=P.listeners;e:{var K=void 0;if(x)for(var se=P.length-1;0<=se;se--){var be=P[se],Ce=be.instance,Xe=be.currentTarget;if(be=be.listener,Ce!==K&&z.isPropagationStopped())break e;Gx(z,be,Xe),K=Ce}else for(se=0;se<P.length;se++){if(be=P[se],Ce=be.instance,Xe=be.currentTarget,be=be.listener,Ce!==K&&z.isPropagationStopped())break e;Gx(z,be,Xe),K=Ce}}}if(Ko)throw g=vl,Ko=!1,vl=null,g}function ts(g,x){var k=x[ET];k===void 0&&(k=x[ET]=new Set);var P=g+"__bubble";k.has(P)||(bT(x,g,2,!1),k.add(P))}function $I(g,x,k){var P=0;x&&(P|=4),bT(k,g,P,x)}var Ig="_reactListening"+Math.random().toString(36).slice(2);function gm(g){if(!g[Ig]){g[Ig]=!0,r.forEach(function(k){k!=="selectionchange"&&(Ag.has(k)||$I(k,!1,g),$I(k,!0,g))});var x=g.nodeType===9?g:g.ownerDocument;x===null||x[Ig]||(x[Ig]=!0,$I("selectionchange",!1,x))}}function bT(g,x,k,P){switch(ci(x)){case 1:var z=Ae;break;case 4:z=Qe;break;default:z=tn}k=z.bind(null,x,k,g),z=void 0,!Hs||x!=="touchstart"&&x!=="touchmove"&&x!=="wheel"||(z=!0),P?z!==void 0?g.addEventListener(x,k,{capture:!0,passive:z}):g.addEventListener(x,k,!0):z!==void 0?g.addEventListener(x,k,{passive:z}):g.addEventListener(x,k,!1)}function FI(g,x,k,P,z){var K=P;if(!(x&1)&&!(x&2)&&P!==null)e:for(;;){if(P===null)return;var se=P.tag;if(se===3||se===4){var be=P.stateNode.containerInfo;if(be===z||be.nodeType===8&&be.parentNode===z)break;if(se===4)for(se=P.return;se!==null;){var Ce=se.tag;if((Ce===3||Ce===4)&&(Ce=se.stateNode.containerInfo,Ce===z||Ce.nodeType===8&&Ce.parentNode===z))return;se=se.return}for(;be!==null;){if(se=Td(be),se===null)return;if(Ce=se.tag,Ce===5||Ce===6){P=K=se;continue e}be=be.parentNode}}P=P.return}Bi(function(){var Xe=K,St=Po(k),kt=[];e:{var _t=Wx.get(g);if(_t!==void 0){var Xt=_g,rn=g;switch(g){case"keypress":if(Ru(k)===0)break e;case"keydown":case"keyup":Xt=W;break;case"focusin":rn="focus",Xt=_i;break;case"focusout":rn="blur",Xt=_i;break;case"beforeblur":case"afterblur":Xt=_i;break;case"click":if(k.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Xt=Eg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Xt=Tg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Xt=Ze;break;case IO:case kO:case qx:Xt=_f;break;case Fh:Xt=oi;break;case"scroll":Xt=uT;break;case"wheel":Xt=Rr;break;case"copy":case"cut":case"paste":Xt=z1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Xt=ce}var sn=(x&4)!==0,Cs=!sn&&g==="scroll",Ve=sn?_t!==null?_t+"Capture":null:_t;sn=[];for(var Pe=Xe,We;Pe!==null;){We=Pe;var Mt=We.stateNode;if(We.tag===5&&Mt!==null&&(We=Mt,Ve!==null&&(Mt=si(Pe,Ve),Mt!=null&&sn.push(X1(Pe,Mt,We)))),Cs)break;Pe=Pe.return}0<sn.length&&(_t=new Xt(_t,rn,null,k,St),kt.push({event:_t,listeners:sn}))}}if(!(x&7)){e:{if(_t=g==="mouseover"||g==="pointerover",Xt=g==="mouseout"||g==="pointerout",_t&&k!==Sr&&(rn=k.relatedTarget||k.fromElement)&&(Td(rn)||rn[_l]))break e;if((Xt||_t)&&(_t=St.window===St?St:(_t=St.ownerDocument)?_t.defaultView||_t.parentWindow:window,Xt?(rn=k.relatedTarget||k.toElement,Xt=Xe,rn=rn?Td(rn):null,rn!==null&&(Cs=ps(rn),rn!==Cs||rn.tag!==5&&rn.tag!==6)&&(rn=null)):(Xt=null,rn=Xe),Xt!==rn)){if(sn=Eg,Mt="onMouseLeave",Ve="onMouseEnter",Pe="mouse",(g==="pointerout"||g==="pointerover")&&(sn=ce,Mt="onPointerLeave",Ve="onPointerEnter",Pe="pointer"),Cs=Xt==null?_t:ir(Xt),We=rn==null?_t:ir(rn),_t=new sn(Mt,Pe+"leave",Xt,k,St),_t.target=Cs,_t.relatedTarget=We,Mt=null,Td(St)===Xe&&(sn=new sn(Ve,Pe+"enter",rn,k,St),sn.target=We,sn.relatedTarget=Cs,Mt=sn),Cs=Mt,Xt&&rn)t:{for(sn=Xt,Ve=rn,Pe=0,We=sn;We;We=Q1(We))Pe++;for(We=0,Mt=Ve;Mt;Mt=Q1(Mt))We++;for(;0<Pe-We;)sn=Q1(sn),Pe--;for(;0<We-Pe;)Ve=Q1(Ve),We--;for(;Pe--;){if(sn===Ve||Ve!==null&&sn===Ve.alternate)break t;sn=Q1(sn),Ve=Q1(Ve)}sn=null}else sn=null;Xt!==null&&Ks(kt,_t,Xt,sn,!1),rn!==null&&Cs!==null&&Ks(kt,Cs,rn,sn,!0)}}e:{if(_t=Xe?ir(Xe):window,Xt=_t.nodeName&&_t.nodeName.toLowerCase(),Xt==="select"||Xt==="input"&&_t.type==="file")var on=X7;else if(fT(_t))if(Cg)on=Fe;else{on=J7;var _n=Q7}else(Xt=_t.nodeName)&&Xt.toLowerCase()==="input"&&(_t.type==="checkbox"||_t.type==="radio")&&(on=G1);if(on&&(on=on(g,Xe))){OI(kt,on,k,St);break e}_n&&_n(g,_t,Xe),g==="focusout"&&(_n=_t._wrapperState)&&_n.controlled&&_t.type==="number"&&at(_t,"number",_t.value)}switch(_n=Xe?ir(Xe):window,g){case"focusin":(fT(_n)||_n.contentEditable==="true")&&($h=_n,MI=Xe,wd=null);break;case"focusout":wd=MI=$h=null;break;case"mousedown":Y1=!0;break;case"contextmenu":case"mouseup":case"dragend":Y1=!1,Vx(kt,k,St);break;case"selectionchange":if(hc)break;case"keydown":case"keyup":Vx(kt,k,St)}var wn;if(Ts)e:{switch(g){case"compositionstart":var kn="onCompositionStart";break e;case"compositionend":kn="onCompositionEnd";break e;case"compositionupdate":kn="onCompositionUpdate";break e}kn=void 0}else q1?EO(g,k)&&(kn="onCompositionEnd"):g==="keydown"&&k.keyCode===229&&(kn="onCompositionStart");kn&&(pm&&k.locale!=="ko"&&(q1||kn!=="onCompositionStart"?kn==="onCompositionEnd"&&q1&&(wn=Gs()):(cn=St,Br="value"in cn?cn.value:cn.textContent,q1=!0)),_n=xT(Xe,kn),0<_n.length&&(kn=new Ux(kn,g,null,k,St),kt.push({event:kn,listeners:_n}),wn?kn.data=wn:(wn=TO(k),wn!==null&&(kn.data=wn)))),(wn=Nu?W1(g,k):G7(g,k))&&(Xe=xT(Xe,"onBeforeInput"),0<Xe.length&&(St=new Ux("onBeforeInput","beforeinput",null,k,St),kt.push({event:St,listeners:Xe}),St.data=wn))}NO(kt,x)})}function X1(g,x,k){return{instance:g,listener:x,currentTarget:k}}function xT(g,x){for(var k=x+"Capture",P=[];g!==null;){var z=g,K=z.stateNode;z.tag===5&&K!==null&&(z=K,K=si(g,k),K!=null&&P.unshift(X1(g,K,z)),K=si(g,x),K!=null&&P.push(X1(g,K,z))),g=g.return}return P}function Q1(g){if(g===null)return null;do g=g.return;while(g&&g.tag!==5);return g||null}function Ks(g,x,k,P,z){for(var K=x._reactName,se=[];k!==null&&k!==P;){var be=k,Ce=be.alternate,Xe=be.stateNode;if(Ce!==null&&Ce===P)break;be.tag===5&&Xe!==null&&(be=Xe,z?(Ce=si(k,K),Ce!=null&&se.unshift(X1(k,Ce,be))):z||(Ce=si(k,K),Ce!=null&&se.push(X1(k,Ce,be)))),k=k.return}se.length!==0&&g.push({event:x,listeners:se})}var ba=/\r\n?/g,eU=/\u0000|\uFFFD/g;function DO(g){return(typeof g=="string"?g:""+g).replace(ba,`
`).replace(eU,"")}function Yx(g,x,k){if(x=DO(x),DO(g)!==x&&k)throw Error(n(425))}function _T(){}var Kx=null,kg=null;function Xx(g,x){return g==="textarea"||g==="noscript"||typeof x.children=="string"||typeof x.children=="number"||typeof x.dangerouslySetInnerHTML=="object"&&x.dangerouslySetInnerHTML!==null&&x.dangerouslySetInnerHTML.__html!=null}var ym=typeof setTimeout=="function"?setTimeout:void 0,Qx=typeof clearTimeout=="function"?clearTimeout:void 0,J1=typeof Promise=="function"?Promise:void 0,wT=typeof queueMicrotask=="function"?queueMicrotask:typeof J1<"u"?function(g){return J1.resolve(null).then(g).catch(Z1)}:ym;function Z1(g){setTimeout(function(){throw g})}function BI(g,x){var k=x,P=0;do{var z=k.nextSibling;if(g.removeChild(k),z&&z.nodeType===8)if(k=z.data,k==="/$"){if(P===0){g.removeChild(z),dr(x);return}P--}else k!=="$"&&k!=="$?"&&k!=="$!"||P++;k=z}while(k);dr(x)}function vm(g){for(;g!=null;g=g.nextSibling){var x=g.nodeType;if(x===1||x===3)break;if(x===8){if(x=g.data,x==="$"||x==="$!"||x==="$?")break;if(x==="/$")return null}}return g}function PO(g){g=g.previousSibling;for(var x=0;g;){if(g.nodeType===8){var k=g.data;if(k==="$"||k==="$!"||k==="$?"){if(x===0)return g;x--}else k==="/$"&&x++}g=g.previousSibling}return null}var ev=Math.random().toString(36).slice(2),Ed="__reactFiber$"+ev,bm="__reactProps$"+ev,_l="__reactContainer$"+ev,ET="__reactEvents$"+ev,oe="__reactListeners$"+ev,tv="__reactHandles$"+ev;function Td(g){var x=g[Ed];if(x)return x;for(var k=g.parentNode;k;){if(x=k[_l]||k[Ed]){if(k=x.alternate,x.child!==null||k!==null&&k.child!==null)for(g=PO(g);g!==null;){if(k=g[Ed])return k;g=PO(g)}return x}g=k,k=g.parentNode}return null}function xa(g){return g=g[Ed]||g[_l],!g||g.tag!==5&&g.tag!==6&&g.tag!==13&&g.tag!==3?null:g}function ir(g){if(g.tag===5||g.tag===6)return g.stateNode;throw Error(n(33))}function TT(g){return g[bm]||null}var jI=[],nv=-1;function Du(g){return{current:g}}function ns(g){0>nv||(g.current=jI[nv],jI[nv]=null,nv--)}function ji(g,x){nv++,jI[nv]=g.current,g.current=x}var xm={},_a=Du(xm),Pu=Du(!1),Xa=xm;function rv(g,x){var k=g.type.contextTypes;if(!k)return xm;var P=g.stateNode;if(P&&P.__reactInternalMemoizedUnmaskedChildContext===x)return P.__reactInternalMemoizedMaskedChildContext;var z={},K;for(K in k)z[K]=x[K];return P&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=x,g.__reactInternalMemoizedMaskedChildContext=z),z}function Ou(g){return g=g.childContextTypes,g!=null}function ST(){ns(Pu),ns(_a)}function OO(g,x,k){if(_a.current!==xm)throw Error(n(168));ji(_a,x),ji(Pu,k)}function MO(g,x,k){var P=g.stateNode;if(x=x.childContextTypes,typeof P.getChildContext!="function")return k;P=P.getChildContext();for(var z in P)if(!(z in x))throw Error(n(108,_e(g)||"Unknown",z));return q({},k,P)}function pc(g){return g=(g=g.stateNode)&&g.__reactInternalMemoizedMergedChildContext||xm,Xa=_a.current,ji(_a,g),ji(Pu,Pu.current),!0}function LO(g,x,k){var P=g.stateNode;if(!P)throw Error(n(169));k?(g=MO(g,x,Xa),P.__reactInternalMemoizedMergedChildContext=g,ns(Pu),ns(_a),ji(_a,g)):ns(Pu),ji(Pu,k)}var jh=null,CT=!1,UI=!1;function $O(g){jh===null?jh=[g]:jh.push(g)}function Rg(g){CT=!0,$O(g)}function _m(){if(!UI&&jh!==null){UI=!0;var g=0,x=ln;try{var k=jh;for(ln=1;g<k.length;g++){var P=k[g];do P=P(!0);while(P!==null)}jh=null,CT=!1}catch(z){throw jh!==null&&(jh=jh.slice(g+1)),vd(fo,_m),z}finally{ln=x,UI=!1}}return null}var iv=[],wa=0,AT=null,IT=0,mc=[],gc=0,Ng=null,Sd=1,Cd="";function Dg(g,x){iv[wa++]=IT,iv[wa++]=AT,AT=g,IT=x}function FO(g,x,k){mc[gc++]=Sd,mc[gc++]=Cd,mc[gc++]=Ng,Ng=g;var P=Sd;g=Cd;var z=32-po(P)-1;P&=~(1<<z),k+=1;var K=32-po(x)+z;if(30<K){var se=z-z%5;K=(P&(1<<se)-1).toString(32),P>>=se,z-=se,Sd=1<<32-po(x)+z|k<<z|P,Cd=K+g}else Sd=1<<K|k<<z|P,Cd=g}function Jx(g){g.return!==null&&(Dg(g,1),FO(g,1,0))}function Pg(g){for(;g===AT;)AT=iv[--wa],iv[wa]=null,IT=iv[--wa],iv[wa]=null;for(;g===Ng;)Ng=mc[--gc],mc[gc]=null,Cd=mc[--gc],mc[gc]=null,Sd=mc[--gc],mc[gc]=null}var Ea=null,wl=null,rs=!1,Ef=null;function Ad(g,x){var k=Ec(5,null,null,0);k.elementType="DELETED",k.stateNode=x,k.return=g,x=g.deletions,x===null?(g.deletions=[k],g.flags|=16):x.push(k)}function kT(g,x){switch(g.tag){case 5:var k=g.type;return x=x.nodeType!==1||k.toLowerCase()!==x.nodeName.toLowerCase()?null:x,x!==null?(g.stateNode=x,Ea=g,wl=vm(x.firstChild),!0):!1;case 6:return x=g.pendingProps===""||x.nodeType!==3?null:x,x!==null?(g.stateNode=x,Ea=g,wl=null,!0):!1;case 13:return x=x.nodeType!==8?null:x,x!==null?(k=Ng!==null?{id:Sd,overflow:Cd}:null,g.memoizedState={dehydrated:x,treeContext:k,retryLane:1073741824},k=Ec(18,null,null,0),k.stateNode=x,k.return=g,g.child=k,Ea=g,wl=null,!0):!1;default:return!1}}function Uh(g){return(g.mode&1)!==0&&(g.flags&128)===0}function Mu(g){if(rs){var x=wl;if(x){var k=x;if(!kT(g,x)){if(Uh(g))throw Error(n(418));x=vm(k.nextSibling);var P=Ea;x&&kT(g,x)?Ad(P,k):(g.flags=g.flags&-4097|2,rs=!1,Ea=g)}}else{if(Uh(g))throw Error(n(418));g.flags=g.flags&-4097|2,rs=!1,Ea=g}}}function BO(g){for(g=g.return;g!==null&&g.tag!==5&&g.tag!==3&&g.tag!==13;)g=g.return;Ea=g}function Zx(g){if(g!==Ea)return!1;if(!rs)return BO(g),rs=!0,!1;var x;if((x=g.tag!==3)&&!(x=g.tag!==5)&&(x=g.type,x=x!=="head"&&x!=="body"&&!Xx(g.type,g.memoizedProps)),x&&(x=wl)){if(Uh(g))throw zI(),Error(n(418));for(;x;)Ad(g,x),x=vm(x.nextSibling)}if(BO(g),g.tag===13){if(g=g.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(n(317));e:{for(g=g.nextSibling,x=0;g;){if(g.nodeType===8){var k=g.data;if(k==="/$"){if(x===0){wl=vm(g.nextSibling);break e}x--}else k!=="$"&&k!=="$!"&&k!=="$?"||x++}g=g.nextSibling}wl=null}}else wl=Ea?vm(g.stateNode.nextSibling):null;return!0}function zI(){for(var g=wl;g;)g=vm(g.nextSibling)}function Id(){wl=Ea=null,rs=!1}function kd(g){Ef===null?Ef=[g]:Ef.push(g)}var jO=E.ReactCurrentBatchConfig;function e_(g,x,k){if(g=k.ref,g!==null&&typeof g!="function"&&typeof g!="object"){if(k._owner){if(k=k._owner,k){if(k.tag!==1)throw Error(n(309));var P=k.stateNode}if(!P)throw Error(n(147,g));var z=P,K=""+g;return x!==null&&x.ref!==null&&typeof x.ref=="function"&&x.ref._stringRef===K?x.ref:(x=function(se){var be=z.refs;se===null?delete be[K]:be[K]=se},x._stringRef=K,x)}if(typeof g!="string")throw Error(n(284));if(!k._owner)throw Error(n(290,g))}return g}function Og(g,x){throw g=Object.prototype.toString.call(x),Error(n(31,g==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":g))}function UO(g){var x=g._init;return x(g._payload)}function VI(g){function x(Ve,Pe){if(g){var We=Ve.deletions;We===null?(Ve.deletions=[Pe],Ve.flags|=16):We.push(Pe)}}function k(Ve,Pe){if(!g)return null;for(;Pe!==null;)x(Ve,Pe),Pe=Pe.sibling;return null}function P(Ve,Pe){for(Ve=new Map;Pe!==null;)Pe.key!==null?Ve.set(Pe.key,Pe):Ve.set(Pe.index,Pe),Pe=Pe.sibling;return Ve}function z(Ve,Pe){return Ve=Rf(Ve,Pe),Ve.index=0,Ve.sibling=null,Ve}function K(Ve,Pe,We){return Ve.index=We,g?(We=Ve.alternate,We!==null?(We=We.index,We<Pe?(Ve.flags|=2,Pe):We):(Ve.flags|=2,Pe)):(Ve.flags|=1048576,Pe)}function se(Ve){return g&&Ve.alternate===null&&(Ve.flags|=2),Ve}function be(Ve,Pe,We,Mt){return Pe===null||Pe.tag!==6?(Pe=kk(We,Ve.mode,Mt),Pe.return=Ve,Pe):(Pe=z(Pe,We),Pe.return=Ve,Pe)}function Ce(Ve,Pe,We,Mt){var on=We.type;return on===I?St(Ve,Pe,We.props.children,Mt,We.key):Pe!==null&&(Pe.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===J&&UO(on)===Pe.type)?(Mt=z(Pe,We.props),Mt.ref=e_(Ve,Pe,We),Mt.return=Ve,Mt):(Mt=cS(We.type,We.key,We.props,null,Ve.mode,Mt),Mt.ref=e_(Ve,Pe,We),Mt.return=Ve,Mt)}function Xe(Ve,Pe,We,Mt){return Pe===null||Pe.tag!==4||Pe.stateNode.containerInfo!==We.containerInfo||Pe.stateNode.implementation!==We.implementation?(Pe=Rk(We,Ve.mode,Mt),Pe.return=Ve,Pe):(Pe=z(Pe,We.children||[]),Pe.return=Ve,Pe)}function St(Ve,Pe,We,Mt,on){return Pe===null||Pe.tag!==7?(Pe=qg(We,Ve.mode,Mt,on),Pe.return=Ve,Pe):(Pe=z(Pe,We),Pe.return=Ve,Pe)}function kt(Ve,Pe,We){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number")return Pe=kk(""+Pe,Ve.mode,We),Pe.return=Ve,Pe;if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case T:return We=cS(Pe.type,Pe.key,Pe.props,null,Ve.mode,We),We.ref=e_(Ve,null,Pe),We.return=Ve,We;case A:return Pe=Rk(Pe,Ve.mode,We),Pe.return=Ve,Pe;case J:var Mt=Pe._init;return kt(Ve,Mt(Pe._payload),We)}if(yt(Pe)||ie(Pe))return Pe=qg(Pe,Ve.mode,We,null),Pe.return=Ve,Pe;Og(Ve,Pe)}return null}function _t(Ve,Pe,We,Mt){var on=Pe!==null?Pe.key:null;if(typeof We=="string"&&We!==""||typeof We=="number")return on!==null?null:be(Ve,Pe,""+We,Mt);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case T:return We.key===on?Ce(Ve,Pe,We,Mt):null;case A:return We.key===on?Xe(Ve,Pe,We,Mt):null;case J:return on=We._init,_t(Ve,Pe,on(We._payload),Mt)}if(yt(We)||ie(We))return on!==null?null:St(Ve,Pe,We,Mt,null);Og(Ve,We)}return null}function Xt(Ve,Pe,We,Mt,on){if(typeof Mt=="string"&&Mt!==""||typeof Mt=="number")return Ve=Ve.get(We)||null,be(Pe,Ve,""+Mt,on);if(typeof Mt=="object"&&Mt!==null){switch(Mt.$$typeof){case T:return Ve=Ve.get(Mt.key===null?We:Mt.key)||null,Ce(Pe,Ve,Mt,on);case A:return Ve=Ve.get(Mt.key===null?We:Mt.key)||null,Xe(Pe,Ve,Mt,on);case J:var _n=Mt._init;return Xt(Ve,Pe,We,_n(Mt._payload),on)}if(yt(Mt)||ie(Mt))return Ve=Ve.get(We)||null,St(Pe,Ve,Mt,on,null);Og(Pe,Mt)}return null}function rn(Ve,Pe,We,Mt){for(var on=null,_n=null,wn=Pe,kn=Pe=0,bo=null;wn!==null&&kn<We.length;kn++){wn.index>kn?(bo=wn,wn=null):bo=wn.sibling;var ti=_t(Ve,wn,We[kn],Mt);if(ti===null){wn===null&&(wn=bo);break}g&&wn&&ti.alternate===null&&x(Ve,wn),Pe=K(ti,Pe,kn),_n===null?on=ti:_n.sibling=ti,_n=ti,wn=bo}if(kn===We.length)return k(Ve,wn),rs&&Dg(Ve,kn),on;if(wn===null){for(;kn<We.length;kn++)wn=kt(Ve,We[kn],Mt),wn!==null&&(Pe=K(wn,Pe,kn),_n===null?on=wn:_n.sibling=wn,_n=wn);return rs&&Dg(Ve,kn),on}for(wn=P(Ve,wn);kn<We.length;kn++)bo=Xt(wn,Ve,kn,We[kn],Mt),bo!==null&&(g&&bo.alternate!==null&&wn.delete(bo.key===null?kn:bo.key),Pe=K(bo,Pe,kn),_n===null?on=bo:_n.sibling=bo,_n=bo);return g&&wn.forEach(function(Pm){return x(Ve,Pm)}),rs&&Dg(Ve,kn),on}function sn(Ve,Pe,We,Mt){var on=ie(We);if(typeof on!="function")throw Error(n(150));if(We=on.call(We),We==null)throw Error(n(151));for(var _n=on=null,wn=Pe,kn=Pe=0,bo=null,ti=We.next();wn!==null&&!ti.done;kn++,ti=We.next()){wn.index>kn?(bo=wn,wn=null):bo=wn.sibling;var Pm=_t(Ve,wn,ti.value,Mt);if(Pm===null){wn===null&&(wn=bo);break}g&&wn&&Pm.alternate===null&&x(Ve,wn),Pe=K(Pm,Pe,kn),_n===null?on=Pm:_n.sibling=Pm,_n=Pm,wn=bo}if(ti.done)return k(Ve,wn),rs&&Dg(Ve,kn),on;if(wn===null){for(;!ti.done;kn++,ti=We.next())ti=kt(Ve,ti.value,Mt),ti!==null&&(Pe=K(ti,Pe,kn),_n===null?on=ti:_n.sibling=ti,_n=ti);return rs&&Dg(Ve,kn),on}for(wn=P(Ve,wn);!ti.done;kn++,ti=We.next())ti=Xt(wn,Ve,kn,ti.value,Mt),ti!==null&&(g&&ti.alternate!==null&&wn.delete(ti.key===null?kn:ti.key),Pe=K(ti,Pe,kn),_n===null?on=ti:_n.sibling=ti,_n=ti);return g&&wn.forEach(function(bU){return x(Ve,bU)}),rs&&Dg(Ve,kn),on}function Cs(Ve,Pe,We,Mt){if(typeof We=="object"&&We!==null&&We.type===I&&We.key===null&&(We=We.props.children),typeof We=="object"&&We!==null){switch(We.$$typeof){case T:e:{for(var on=We.key,_n=Pe;_n!==null;){if(_n.key===on){if(on=We.type,on===I){if(_n.tag===7){k(Ve,_n.sibling),Pe=z(_n,We.props.children),Pe.return=Ve,Ve=Pe;break e}}else if(_n.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===J&&UO(on)===_n.type){k(Ve,_n.sibling),Pe=z(_n,We.props),Pe.ref=e_(Ve,_n,We),Pe.return=Ve,Ve=Pe;break e}k(Ve,_n);break}else x(Ve,_n);_n=_n.sibling}We.type===I?(Pe=qg(We.props.children,Ve.mode,Mt,We.key),Pe.return=Ve,Ve=Pe):(Mt=cS(We.type,We.key,We.props,null,Ve.mode,Mt),Mt.ref=e_(Ve,Pe,We),Mt.return=Ve,Ve=Mt)}return se(Ve);case A:e:{for(_n=We.key;Pe!==null;){if(Pe.key===_n)if(Pe.tag===4&&Pe.stateNode.containerInfo===We.containerInfo&&Pe.stateNode.implementation===We.implementation){k(Ve,Pe.sibling),Pe=z(Pe,We.children||[]),Pe.return=Ve,Ve=Pe;break e}else{k(Ve,Pe);break}else x(Ve,Pe);Pe=Pe.sibling}Pe=Rk(We,Ve.mode,Mt),Pe.return=Ve,Ve=Pe}return se(Ve);case J:return _n=We._init,Cs(Ve,Pe,_n(We._payload),Mt)}if(yt(We))return rn(Ve,Pe,We,Mt);if(ie(We))return sn(Ve,Pe,We,Mt);Og(Ve,We)}return typeof We=="string"&&We!==""||typeof We=="number"?(We=""+We,Pe!==null&&Pe.tag===6?(k(Ve,Pe.sibling),Pe=z(Pe,We),Pe.return=Ve,Ve=Pe):(k(Ve,Pe),Pe=kk(We,Ve.mode,Mt),Pe.return=Ve,Ve=Pe),se(Ve)):k(Ve,Pe)}return Cs}var Ss=VI(!0),RT=VI(!1),t_=Du(null),El=null,wm=null,sv=null;function zh(){sv=wm=El=null}function NT(g){var x=t_.current;ns(t_),g._currentValue=x}function Qo(g,x,k){for(;g!==null;){var P=g.alternate;if((g.childLanes&x)!==x?(g.childLanes|=x,P!==null&&(P.childLanes|=x)):P!==null&&(P.childLanes&x)!==x&&(P.childLanes|=x),g===k)break;g=g.return}}function Em(g,x){El=g,sv=wm=null,g=g.dependencies,g!==null&&g.firstContext!==null&&(g.lanes&x&&(Ja=!0),g.firstContext=null)}function yc(g){var x=g._currentValue;if(sv!==g)if(g={context:g,memoizedValue:x,next:null},wm===null){if(El===null)throw Error(n(308));wm=g,El.dependencies={lanes:0,firstContext:g}}else wm=wm.next=g;return x}var Mg=null;function HI(g){Mg===null?Mg=[g]:Mg.push(g)}function DT(g,x,k,P){var z=x.interleaved;return z===null?(k.next=k,HI(x)):(k.next=z.next,z.next=k),x.interleaved=k,Vh(g,P)}function Vh(g,x){g.lanes|=x;var k=g.alternate;for(k!==null&&(k.lanes|=x),k=g,g=g.return;g!==null;)g.childLanes|=x,k=g.alternate,k!==null&&(k.childLanes|=x),k=g,g=g.return;return k.tag===3?k.stateNode:null}var vc=!1;function PT(g){g.updateQueue={baseState:g.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zO(g,x){g=g.updateQueue,x.updateQueue===g&&(x.updateQueue={baseState:g.baseState,firstBaseUpdate:g.firstBaseUpdate,lastBaseUpdate:g.lastBaseUpdate,shared:g.shared,effects:g.effects})}function Hh(g,x){return{eventTime:g,lane:x,tag:0,payload:null,callback:null,next:null}}function bc(g,x,k){var P=g.updateQueue;if(P===null)return null;if(P=P.shared,jr&2){var z=P.pending;return z===null?x.next=x:(x.next=z.next,z.next=x),P.pending=x,Vh(g,k)}return z=P.interleaved,z===null?(x.next=x,HI(P)):(x.next=z.next,z.next=x),P.interleaved=x,Vh(g,k)}function OT(g,x,k){if(x=x.updateQueue,x!==null&&(x=x.shared,(k&4194240)!==0)){var P=x.lanes;P&=g.pendingLanes,k|=P,x.lanes=k,nr(g,k)}}function VO(g,x){var k=g.updateQueue,P=g.alternate;if(P!==null&&(P=P.updateQueue,k===P)){var z=null,K=null;if(k=k.firstBaseUpdate,k!==null){do{var se={eventTime:k.eventTime,lane:k.lane,tag:k.tag,payload:k.payload,callback:k.callback,next:null};K===null?z=K=se:K=K.next=se,k=k.next}while(k!==null);K===null?z=K=x:K=K.next=x}else z=K=x;k={baseState:P.baseState,firstBaseUpdate:z,lastBaseUpdate:K,shared:P.shared,effects:P.effects},g.updateQueue=k;return}g=k.lastBaseUpdate,g===null?k.firstBaseUpdate=x:g.next=x,k.lastBaseUpdate=x}function ov(g,x,k,P){var z=g.updateQueue;vc=!1;var K=z.firstBaseUpdate,se=z.lastBaseUpdate,be=z.shared.pending;if(be!==null){z.shared.pending=null;var Ce=be,Xe=Ce.next;Ce.next=null,se===null?K=Xe:se.next=Xe,se=Ce;var St=g.alternate;St!==null&&(St=St.updateQueue,be=St.lastBaseUpdate,be!==se&&(be===null?St.firstBaseUpdate=Xe:be.next=Xe,St.lastBaseUpdate=Ce))}if(K!==null){var kt=z.baseState;se=0,St=Xe=Ce=null,be=K;do{var _t=be.lane,Xt=be.eventTime;if((P&_t)===_t){St!==null&&(St=St.next={eventTime:Xt,lane:0,tag:be.tag,payload:be.payload,callback:be.callback,next:null});e:{var rn=g,sn=be;switch(_t=x,Xt=k,sn.tag){case 1:if(rn=sn.payload,typeof rn=="function"){kt=rn.call(Xt,kt,_t);break e}kt=rn;break e;case 3:rn.flags=rn.flags&-65537|128;case 0:if(rn=sn.payload,_t=typeof rn=="function"?rn.call(Xt,kt,_t):rn,_t==null)break e;kt=q({},kt,_t);break e;case 2:vc=!0}}be.callback!==null&&be.lane!==0&&(g.flags|=64,_t=z.effects,_t===null?z.effects=[be]:_t.push(be))}else Xt={eventTime:Xt,lane:_t,tag:be.tag,payload:be.payload,callback:be.callback,next:null},St===null?(Xe=St=Xt,Ce=kt):St=St.next=Xt,se|=_t;if(be=be.next,be===null){if(be=z.shared.pending,be===null)break;_t=be,be=_t.next,_t.next=null,z.lastBaseUpdate=_t,z.shared.pending=null}}while(!0);if(St===null&&(Ce=kt),z.baseState=Ce,z.firstBaseUpdate=Xe,z.lastBaseUpdate=St,x=z.shared.interleaved,x!==null){z=x;do se|=z.lane,z=z.next;while(z!==x)}else K===null&&(z.shared.lanes=0);Im|=se,g.lanes=se,g.memoizedState=kt}}function qI(g,x,k){if(g=x.effects,x.effects=null,g!==null)for(x=0;x<g.length;x++){var P=g[x],z=P.callback;if(z!==null){if(P.callback=null,P=k,typeof z!="function")throw Error(n(191,z));z.call(P)}}}var n_={},Rd=Du(n_),r_=Du(n_),av=Du(n_);function qh(g){if(g===n_)throw Error(n(174));return g}function WI(g,x){switch(ji(av,x),ji(r_,g),ji(Rd,n_),g=x.nodeType,g){case 9:case 11:x=(x=x.documentElement)?x.namespaceURI:Oe(null,"");break;default:g=g===8?x.parentNode:x,x=g.namespaceURI||null,g=g.tagName,x=Oe(x,g)}ns(Rd),ji(Rd,x)}function Tm(){ns(Rd),ns(r_),ns(av)}function GI(g){qh(av.current);var x=qh(Rd.current),k=Oe(x,g.type);x!==k&&(ji(r_,g),ji(Rd,k))}function MT(g){r_.current===g&&(ns(Rd),ns(r_))}var os=Du(0);function Lg(g){for(var x=g;x!==null;){if(x.tag===13){var k=x.memoizedState;if(k!==null&&(k=k.dehydrated,k===null||k.data==="$?"||k.data==="$!"))return x}else if(x.tag===19&&x.memoizedProps.revealOrder!==void 0){if(x.flags&128)return x}else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===g)break;for(;x.sibling===null;){if(x.return===null||x.return===g)return null;x=x.return}x.sibling.return=x.return,x=x.sibling}return null}var YI=[];function LT(){for(var g=0;g<YI.length;g++)YI[g]._workInProgressVersionPrimary=null;YI.length=0}var i_=E.ReactCurrentDispatcher,KI=E.ReactCurrentBatchConfig,Sm=0,gs=null,$s=null,yo=null,uv=!1,s_=!1,$g=0,hr=0;function Ta(){throw Error(n(321))}function XI(g,x){if(x===null)return!1;for(var k=0;k<x.length&&k<g.length;k++)if(!Ye(g[k],x[k]))return!1;return!0}function Fg(g,x,k,P,z,K){if(Sm=K,gs=x,x.memoizedState=null,x.updateQueue=null,x.lanes=0,i_.current=g===null||g.memoizedState===null?nU:VT,g=k(P,z),s_){K=0;do{if(s_=!1,$g=0,25<=K)throw Error(n(301));K+=1,yo=$s=null,x.updateQueue=null,i_.current=dv,g=k(P,z)}while(s_)}if(i_.current=zT,x=$s!==null&&$s.next!==null,Sm=0,yo=$s=gs=null,uv=!1,x)throw Error(n(300));return g}function $T(){var g=$g!==0;return $g=0,g}function Nd(){var g={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yo===null?gs.memoizedState=yo=g:yo=yo.next=g,yo}function xc(){if($s===null){var g=gs.alternate;g=g!==null?g.memoizedState:null}else g=$s.next;var x=yo===null?gs.memoizedState:yo.next;if(x!==null)yo=x,$s=g;else{if(g===null)throw Error(n(310));$s=g,g={memoizedState:$s.memoizedState,baseState:$s.baseState,baseQueue:$s.baseQueue,queue:$s.queue,next:null},yo===null?gs.memoizedState=yo=g:yo=yo.next=g}return yo}function Sa(g,x){return typeof x=="function"?x(g):x}function QI(g){var x=xc(),k=x.queue;if(k===null)throw Error(n(311));k.lastRenderedReducer=g;var P=$s,z=P.baseQueue,K=k.pending;if(K!==null){if(z!==null){var se=z.next;z.next=K.next,K.next=se}P.baseQueue=z=K,k.pending=null}if(z!==null){K=z.next,P=P.baseState;var be=se=null,Ce=null,Xe=K;do{var St=Xe.lane;if((Sm&St)===St)Ce!==null&&(Ce=Ce.next={lane:0,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null}),P=Xe.hasEagerState?Xe.eagerState:g(P,Xe.action);else{var kt={lane:St,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null};Ce===null?(be=Ce=kt,se=P):Ce=Ce.next=kt,gs.lanes|=St,Im|=St}Xe=Xe.next}while(Xe!==null&&Xe!==K);Ce===null?se=P:Ce.next=be,Ye(P,x.memoizedState)||(Ja=!0),x.memoizedState=P,x.baseState=se,x.baseQueue=Ce,k.lastRenderedState=P}if(g=k.interleaved,g!==null){z=g;do K=z.lane,gs.lanes|=K,Im|=K,z=z.next;while(z!==g)}else z===null&&(k.lanes=0);return[x.memoizedState,k.dispatch]}function lv(g){var x=xc(),k=x.queue;if(k===null)throw Error(n(311));k.lastRenderedReducer=g;var P=k.dispatch,z=k.pending,K=x.memoizedState;if(z!==null){k.pending=null;var se=z=z.next;do K=g(K,se.action),se=se.next;while(se!==z);Ye(K,x.memoizedState)||(Ja=!0),x.memoizedState=K,x.baseQueue===null&&(x.baseState=K),k.lastRenderedState=K}return[K,P]}function FT(){}function JI(g,x){var k=gs,P=xc(),z=x(),K=!Ye(P.memoizedState,z);if(K&&(P.memoizedState=z,Ja=!0),P=P.queue,Dd(Wh.bind(null,k,P,g),[g]),P.getSnapshot!==x||K||yo!==null&&yo.memoizedState.tag&1){if(k.flags|=2048,cv(9,Lu.bind(null,k,P,z,x),void 0,null),jo===null)throw Error(n(349));Sm&30||ZI(k,x,z)}return z}function ZI(g,x,k){g.flags|=16384,g={getSnapshot:x,value:k},x=gs.updateQueue,x===null?(x={lastEffect:null,stores:null},gs.updateQueue=x,x.stores=[g]):(k=x.stores,k===null?x.stores=[g]:k.push(g))}function Lu(g,x,k,P){x.value=k,x.getSnapshot=P,BT(x)&&ek(g)}function Wh(g,x,k){return k(function(){BT(x)&&ek(g)})}function BT(g){var x=g.getSnapshot;g=g.value;try{var k=x();return!Ye(g,k)}catch{return!0}}function ek(g){var x=Vh(g,1);x!==null&&kf(x,g,1,-1)}function o_(g){var x=Nd();return typeof g=="function"&&(g=g()),x.memoizedState=x.baseState=g,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:g},x.queue=g,g=g.dispatch=KO.bind(null,gs,g),[x.memoizedState,g]}function cv(g,x,k,P){return g={tag:g,create:x,destroy:k,deps:P,next:null},x=gs.updateQueue,x===null?(x={lastEffect:null,stores:null},gs.updateQueue=x,x.lastEffect=g.next=g):(k=x.lastEffect,k===null?x.lastEffect=g.next=g:(P=k.next,k.next=g,g.next=P,x.lastEffect=g)),g}function jT(){return xc().memoizedState}function a_(g,x,k,P){var z=Nd();gs.flags|=g,z.memoizedState=cv(1|x,k,void 0,P===void 0?null:P)}function fv(g,x,k,P){var z=xc();P=P===void 0?null:P;var K=void 0;if($s!==null){var se=$s.memoizedState;if(K=se.destroy,P!==null&&XI(P,se.deps)){z.memoizedState=cv(x,k,K,P);return}}gs.flags|=g,z.memoizedState=cv(1|x,k,K,P)}function UT(g,x){return a_(8390656,8,g,x)}function Dd(g,x){return fv(2048,8,g,x)}function HO(g,x){return fv(4,2,g,x)}function Gh(g,x){return fv(4,4,g,x)}function tk(g,x){if(typeof x=="function")return g=g(),x(g),function(){x(null)};if(x!=null)return g=g(),x.current=g,function(){x.current=null}}function nk(g,x,k){return k=k!=null?k.concat([g]):null,fv(4,4,tk.bind(null,x,g),k)}function u_(){}function qO(g,x){var k=xc();x=x===void 0?null:x;var P=k.memoizedState;return P!==null&&x!==null&&XI(x,P[1])?P[0]:(k.memoizedState=[g,x],g)}function WO(g,x){var k=xc();x=x===void 0?null:x;var P=k.memoizedState;return P!==null&&x!==null&&XI(x,P[1])?P[0]:(g=g(),k.memoizedState=[g,x],g)}function GO(g,x,k){return Sm&21?(Ye(k,x)||(k=Nt(),gs.lanes|=k,Im|=k,g.baseState=!0),x):(g.baseState&&(g.baseState=!1,Ja=!0),g.memoizedState=k)}function YO(g,x){var k=ln;ln=k!==0&&4>k?k:4,g(!0);var P=KI.transition;KI.transition={};try{g(!1),x()}finally{ln=k,KI.transition=P}}function rk(){return xc().memoizedState}function tU(g,x,k){var P=Nm(g);if(k={lane:P,action:k,hasEagerState:!1,eagerState:null,next:null},ik(g))Qa(x,k);else if(k=DT(g,x,k,P),k!==null){var z=tu();kf(k,g,P,z),Tf(k,x,P)}}function KO(g,x,k){var P=Nm(g),z={lane:P,action:k,hasEagerState:!1,eagerState:null,next:null};if(ik(g))Qa(x,z);else{var K=g.alternate;if(g.lanes===0&&(K===null||K.lanes===0)&&(K=x.lastRenderedReducer,K!==null))try{var se=x.lastRenderedState,be=K(se,k);if(z.hasEagerState=!0,z.eagerState=be,Ye(be,se)){var Ce=x.interleaved;Ce===null?(z.next=z,HI(x)):(z.next=Ce.next,Ce.next=z),x.interleaved=z;return}}catch{}finally{}k=DT(g,x,z,P),k!==null&&(z=tu(),kf(k,g,P,z),Tf(k,x,P))}}function ik(g){var x=g.alternate;return g===gs||x!==null&&x===gs}function Qa(g,x){s_=uv=!0;var k=g.pending;k===null?x.next=x:(x.next=k.next,k.next=x),g.pending=x}function Tf(g,x,k){if(k&4194240){var P=x.lanes;P&=g.pendingLanes,k|=P,x.lanes=k,nr(g,k)}}var zT={readContext:yc,useCallback:Ta,useContext:Ta,useEffect:Ta,useImperativeHandle:Ta,useInsertionEffect:Ta,useLayoutEffect:Ta,useMemo:Ta,useReducer:Ta,useRef:Ta,useState:Ta,useDebugValue:Ta,useDeferredValue:Ta,useTransition:Ta,useMutableSource:Ta,useSyncExternalStore:Ta,useId:Ta,unstable_isNewReconciler:!1},nU={readContext:yc,useCallback:function(g,x){return Nd().memoizedState=[g,x===void 0?null:x],g},useContext:yc,useEffect:UT,useImperativeHandle:function(g,x,k){return k=k!=null?k.concat([g]):null,a_(4194308,4,tk.bind(null,x,g),k)},useLayoutEffect:function(g,x){return a_(4194308,4,g,x)},useInsertionEffect:function(g,x){return a_(4,2,g,x)},useMemo:function(g,x){var k=Nd();return x=x===void 0?null:x,g=g(),k.memoizedState=[g,x],g},useReducer:function(g,x,k){var P=Nd();return x=k!==void 0?k(x):x,P.memoizedState=P.baseState=x,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:g,lastRenderedState:x},P.queue=g,g=g.dispatch=tU.bind(null,gs,g),[P.memoizedState,g]},useRef:function(g){var x=Nd();return g={current:g},x.memoizedState=g},useState:o_,useDebugValue:u_,useDeferredValue:function(g){return Nd().memoizedState=g},useTransition:function(){var g=o_(!1),x=g[0];return g=YO.bind(null,g[1]),Nd().memoizedState=g,[x,g]},useMutableSource:function(){},useSyncExternalStore:function(g,x,k){var P=gs,z=Nd();if(rs){if(k===void 0)throw Error(n(407));k=k()}else{if(k=x(),jo===null)throw Error(n(349));Sm&30||ZI(P,x,k)}z.memoizedState=k;var K={value:k,getSnapshot:x};return z.queue=K,UT(Wh.bind(null,P,K,g),[g]),P.flags|=2048,cv(9,Lu.bind(null,P,K,k,x),void 0,null),k},useId:function(){var g=Nd(),x=jo.identifierPrefix;if(rs){var k=Cd,P=Sd;k=(P&~(1<<32-po(P)-1)).toString(32)+k,x=":"+x+"R"+k,k=$g++,0<k&&(x+="H"+k.toString(32)),x+=":"}else k=hr++,x=":"+x+"r"+k.toString(32)+":";return g.memoizedState=x},unstable_isNewReconciler:!1},VT={readContext:yc,useCallback:qO,useContext:yc,useEffect:Dd,useImperativeHandle:nk,useInsertionEffect:HO,useLayoutEffect:Gh,useMemo:WO,useReducer:QI,useRef:jT,useState:function(){return QI(Sa)},useDebugValue:u_,useDeferredValue:function(g){var x=xc();return GO(x,$s.memoizedState,g)},useTransition:function(){var g=QI(Sa)[0],x=xc().memoizedState;return[g,x]},useMutableSource:FT,useSyncExternalStore:JI,useId:rk,unstable_isNewReconciler:!1},dv={readContext:yc,useCallback:qO,useContext:yc,useEffect:Dd,useImperativeHandle:nk,useInsertionEffect:HO,useLayoutEffect:Gh,useMemo:WO,useReducer:lv,useRef:jT,useState:function(){return lv(Sa)},useDebugValue:u_,useDeferredValue:function(g){var x=xc();return $s===null?x.memoizedState=g:GO(x,$s.memoizedState,g)},useTransition:function(){var g=lv(Sa)[0],x=xc().memoizedState;return[g,x]},useMutableSource:FT,useSyncExternalStore:JI,useId:rk,unstable_isNewReconciler:!1};function _c(g,x){if(g&&g.defaultProps){x=q({},x),g=g.defaultProps;for(var k in g)x[k]===void 0&&(x[k]=g[k]);return x}return x}function HT(g,x,k,P){x=g.memoizedState,k=k(P,x),k=k==null?x:q({},x,k),g.memoizedState=k,g.lanes===0&&(g.updateQueue.baseState=k)}var qT={isMounted:function(g){return(g=g._reactInternals)?ps(g)===g:!1},enqueueSetState:function(g,x,k){g=g._reactInternals;var P=tu(),z=Nm(g),K=Hh(P,z);K.payload=x,k!=null&&(K.callback=k),x=bc(g,K,z),x!==null&&(kf(x,g,z,P),OT(x,g,z))},enqueueReplaceState:function(g,x,k){g=g._reactInternals;var P=tu(),z=Nm(g),K=Hh(P,z);K.tag=1,K.payload=x,k!=null&&(K.callback=k),x=bc(g,K,z),x!==null&&(kf(x,g,z,P),OT(x,g,z))},enqueueForceUpdate:function(g,x){g=g._reactInternals;var k=tu(),P=Nm(g),z=Hh(k,P);z.tag=2,x!=null&&(z.callback=x),x=bc(g,z,P),x!==null&&(kf(x,g,P,k),OT(x,g,P))}};function sk(g,x,k,P,z,K,se){return g=g.stateNode,typeof g.shouldComponentUpdate=="function"?g.shouldComponentUpdate(P,K,se):x.prototype&&x.prototype.isPureReactComponent?!Kt(k,P)||!Kt(z,K):!0}function Bg(g,x,k){var P=!1,z=xm,K=x.contextType;return typeof K=="object"&&K!==null?K=yc(K):(z=Ou(x)?Xa:_a.current,P=x.contextTypes,K=(P=P!=null)?rv(g,z):xm),x=new x(k,K),g.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=qT,g.stateNode=x,x._reactInternals=g,P&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=z,g.__reactInternalMemoizedMaskedChildContext=K),x}function hv(g,x,k,P){g=x.state,typeof x.componentWillReceiveProps=="function"&&x.componentWillReceiveProps(k,P),typeof x.UNSAFE_componentWillReceiveProps=="function"&&x.UNSAFE_componentWillReceiveProps(k,P),x.state!==g&&qT.enqueueReplaceState(x,x.state,null)}function ok(g,x,k,P){var z=g.stateNode;z.props=k,z.state=g.memoizedState,z.refs={},PT(g);var K=x.contextType;typeof K=="object"&&K!==null?z.context=yc(K):(K=Ou(x)?Xa:_a.current,z.context=rv(g,K)),z.state=g.memoizedState,K=x.getDerivedStateFromProps,typeof K=="function"&&(HT(g,x,K,k),z.state=g.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof z.getSnapshotBeforeUpdate=="function"||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(x=z.state,typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount(),x!==z.state&&qT.enqueueReplaceState(z,z.state,null),ov(g,k,z,P),z.state=g.memoizedState),typeof z.componentDidMount=="function"&&(g.flags|=4194308)}function jg(g,x){try{var k="",P=x;do k+=ee(P),P=P.return;while(P);var z=k}catch(K){z=`
Error generating stack: `+K.message+`
`+K.stack}return{value:g,source:x,stack:z,digest:null}}function WT(g,x,k){return{value:g,source:null,stack:k??null,digest:x??null}}function pv(g,x){try{console.error(x.value)}catch(k){setTimeout(function(){throw k})}}var XO=typeof WeakMap=="function"?WeakMap:Map;function l_(g,x,k){k=Hh(-1,k),k.tag=3,k.payload={element:null};var P=x.value;return k.callback=function(){rS||(rS=!0,wk=P),pv(g,x)},k}function GT(g,x,k){k=Hh(-1,k),k.tag=3;var P=g.type.getDerivedStateFromError;if(typeof P=="function"){var z=x.value;k.payload=function(){return P(z)},k.callback=function(){pv(g,x)}}var K=g.stateNode;return K!==null&&typeof K.componentDidCatch=="function"&&(k.callback=function(){pv(g,x),typeof P!="function"&&(km===null?km=new Set([this]):km.add(this));var se=x.stack;this.componentDidCatch(x.value,{componentStack:se!==null?se:""})}),k}function c_(g,x,k){var P=g.pingCache;if(P===null){P=g.pingCache=new XO;var z=new Set;P.set(x,z)}else z=P.get(x),z===void 0&&(z=new Set,P.set(x,z));z.has(k)||(z.add(k),g=cU.bind(null,g,x,k),x.then(g,g))}function QO(g){do{var x;if((x=g.tag===13)&&(x=g.memoizedState,x=x!==null?x.dehydrated!==null:!0),x)return g;g=g.return}while(g!==null);return null}function ak(g,x,k,P,z){return g.mode&1?(g.flags|=65536,g.lanes=z,g):(g===x?g.flags|=65536:(g.flags|=128,k.flags|=131072,k.flags&=-52805,k.tag===1&&(k.alternate===null?k.tag=17:(x=Hh(-1,1),x.tag=2,bc(k,x,1))),k.lanes|=1),g)}var YT=E.ReactCurrentOwner,Ja=!1;function Jo(g,x,k,P){x.child=g===null?RT(x,null,k,P):Ss(x,g.child,k,P)}function JO(g,x,k,P,z){k=k.render;var K=x.ref;return Em(x,z),P=Fg(g,x,k,P,K,z),k=$T(),g!==null&&!Ja?(x.updateQueue=g.updateQueue,x.flags&=-2053,g.lanes&=~z,Sf(g,x,z)):(rs&&k&&Jx(x),x.flags|=1,Jo(g,x,P,z),x.child)}function uk(g,x,k,P,z){if(g===null){var K=k.type;return typeof K=="function"&&!lS(K)&&K.defaultProps===void 0&&k.compare===null&&k.defaultProps===void 0?(x.tag=15,x.type=K,Pd(g,x,K,P,z)):(g=cS(k.type,null,P,x,x.mode,z),g.ref=x.ref,g.return=x,x.child=g)}if(K=g.child,!(g.lanes&z)){var se=K.memoizedProps;if(k=k.compare,k=k!==null?k:Kt,k(se,P)&&g.ref===x.ref)return Sf(g,x,z)}return x.flags|=1,g=Rf(K,P),g.ref=x.ref,g.return=x,x.child=g}function Pd(g,x,k,P,z){if(g!==null){var K=g.memoizedProps;if(Kt(K,P)&&g.ref===x.ref)if(Ja=!1,x.pendingProps=P=K,(g.lanes&z)!==0)g.flags&131072&&(Ja=!0);else return x.lanes=g.lanes,Sf(g,x,z)}return fk(g,x,k,P,z)}function lk(g,x,k){var P=x.pendingProps,z=P.children,K=g!==null?g.memoizedState:null;if(P.mode==="hidden")if(!(x.mode&1))x.memoizedState={baseLanes:0,cachePool:null,transitions:null},ji(vv,Sl),Sl|=k;else{if(!(k&1073741824))return g=K!==null?K.baseLanes|k:k,x.lanes=x.childLanes=1073741824,x.memoizedState={baseLanes:g,cachePool:null,transitions:null},x.updateQueue=null,ji(vv,Sl),Sl|=g,null;x.memoizedState={baseLanes:0,cachePool:null,transitions:null},P=K!==null?K.baseLanes:k,ji(vv,Sl),Sl|=P}else K!==null?(P=K.baseLanes|k,x.memoizedState=null):P=k,ji(vv,Sl),Sl|=P;return Jo(g,x,z,k),x.child}function ck(g,x){var k=x.ref;(g===null&&k!==null||g!==null&&g.ref!==k)&&(x.flags|=512,x.flags|=2097152)}function fk(g,x,k,P,z){var K=Ou(k)?Xa:_a.current;return K=rv(x,K),Em(x,z),k=Fg(g,x,k,P,K,z),P=$T(),g!==null&&!Ja?(x.updateQueue=g.updateQueue,x.flags&=-2053,g.lanes&=~z,Sf(g,x,z)):(rs&&P&&Jx(x),x.flags|=1,Jo(g,x,k,z),x.child)}function dk(g,x,k,P,z){if(Ou(k)){var K=!0;pc(x)}else K=!1;if(Em(x,z),x.stateNode===null)XT(g,x),Bg(x,k,P),ok(x,k,P,z),P=!0;else if(g===null){var se=x.stateNode,be=x.memoizedProps;se.props=be;var Ce=se.context,Xe=k.contextType;typeof Xe=="object"&&Xe!==null?Xe=yc(Xe):(Xe=Ou(k)?Xa:_a.current,Xe=rv(x,Xe));var St=k.getDerivedStateFromProps,kt=typeof St=="function"||typeof se.getSnapshotBeforeUpdate=="function";kt||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(be!==P||Ce!==Xe)&&hv(x,se,P,Xe),vc=!1;var _t=x.memoizedState;se.state=_t,ov(x,P,se,z),Ce=x.memoizedState,be!==P||_t!==Ce||Pu.current||vc?(typeof St=="function"&&(HT(x,k,St,P),Ce=x.memoizedState),(be=vc||sk(x,k,be,P,_t,Ce,Xe))?(kt||typeof se.UNSAFE_componentWillMount!="function"&&typeof se.componentWillMount!="function"||(typeof se.componentWillMount=="function"&&se.componentWillMount(),typeof se.UNSAFE_componentWillMount=="function"&&se.UNSAFE_componentWillMount()),typeof se.componentDidMount=="function"&&(x.flags|=4194308)):(typeof se.componentDidMount=="function"&&(x.flags|=4194308),x.memoizedProps=P,x.memoizedState=Ce),se.props=P,se.state=Ce,se.context=Xe,P=be):(typeof se.componentDidMount=="function"&&(x.flags|=4194308),P=!1)}else{se=x.stateNode,zO(g,x),be=x.memoizedProps,Xe=x.type===x.elementType?be:_c(x.type,be),se.props=Xe,kt=x.pendingProps,_t=se.context,Ce=k.contextType,typeof Ce=="object"&&Ce!==null?Ce=yc(Ce):(Ce=Ou(k)?Xa:_a.current,Ce=rv(x,Ce));var Xt=k.getDerivedStateFromProps;(St=typeof Xt=="function"||typeof se.getSnapshotBeforeUpdate=="function")||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(be!==kt||_t!==Ce)&&hv(x,se,P,Ce),vc=!1,_t=x.memoizedState,se.state=_t,ov(x,P,se,z);var rn=x.memoizedState;be!==kt||_t!==rn||Pu.current||vc?(typeof Xt=="function"&&(HT(x,k,Xt,P),rn=x.memoizedState),(Xe=vc||sk(x,k,Xe,P,_t,rn,Ce)||!1)?(St||typeof se.UNSAFE_componentWillUpdate!="function"&&typeof se.componentWillUpdate!="function"||(typeof se.componentWillUpdate=="function"&&se.componentWillUpdate(P,rn,Ce),typeof se.UNSAFE_componentWillUpdate=="function"&&se.UNSAFE_componentWillUpdate(P,rn,Ce)),typeof se.componentDidUpdate=="function"&&(x.flags|=4),typeof se.getSnapshotBeforeUpdate=="function"&&(x.flags|=1024)):(typeof se.componentDidUpdate!="function"||be===g.memoizedProps&&_t===g.memoizedState||(x.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||be===g.memoizedProps&&_t===g.memoizedState||(x.flags|=1024),x.memoizedProps=P,x.memoizedState=rn),se.props=P,se.state=rn,se.context=Ce,P=Xe):(typeof se.componentDidUpdate!="function"||be===g.memoizedProps&&_t===g.memoizedState||(x.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||be===g.memoizedProps&&_t===g.memoizedState||(x.flags|=1024),P=!1)}return hk(g,x,k,P,K,z)}function hk(g,x,k,P,z,K){ck(g,x);var se=(x.flags&128)!==0;if(!P&&!se)return z&&LO(x,k,!1),Sf(g,x,K);P=x.stateNode,YT.current=x;var be=se&&typeof k.getDerivedStateFromError!="function"?null:P.render();return x.flags|=1,g!==null&&se?(x.child=Ss(x,g.child,null,K),x.child=Ss(x,null,be,K)):Jo(g,x,be,K),x.memoizedState=P.state,z&&LO(x,k,!0),x.child}function ZO(g){var x=g.stateNode;x.pendingContext?OO(g,x.pendingContext,x.pendingContext!==x.context):x.context&&OO(g,x.context,!1),WI(g,x.containerInfo)}function Od(g,x,k,P,z){return Id(),kd(z),x.flags|=256,Jo(g,x,k,P),x.child}var f_={dehydrated:null,treeContext:null,retryLane:0};function d_(g){return{baseLanes:g,cachePool:null,transitions:null}}function KT(g,x,k){var P=x.pendingProps,z=os.current,K=!1,se=(x.flags&128)!==0,be;if((be=se)||(be=g!==null&&g.memoizedState===null?!1:(z&2)!==0),be?(K=!0,x.flags&=-129):(g===null||g.memoizedState!==null)&&(z|=1),ji(os,z&1),g===null)return Mu(x),g=x.memoizedState,g!==null&&(g=g.dehydrated,g!==null)?(x.mode&1?g.data==="$!"?x.lanes=8:x.lanes=1073741824:x.lanes=1,null):(se=P.children,g=P.fallback,K?(P=x.mode,K=x.child,se={mode:"hidden",children:se},!(P&1)&&K!==null?(K.childLanes=0,K.pendingProps=se):K=fS(se,P,0,null),g=qg(g,P,k,null),K.return=x,g.return=x,K.sibling=g,x.child=K,x.child.memoizedState=d_(k),x.memoizedState=f_,g):mv(x,se));if(z=g.memoizedState,z!==null&&(be=z.dehydrated,be!==null))return Sn(g,x,se,P,be,z,k);if(K){K=P.fallback,se=x.mode,z=g.child,be=z.sibling;var Ce={mode:"hidden",children:P.children};return!(se&1)&&x.child!==z?(P=x.child,P.childLanes=0,P.pendingProps=Ce,x.deletions=null):(P=Rf(z,Ce),P.subtreeFlags=z.subtreeFlags&14680064),be!==null?K=Rf(be,K):(K=qg(K,se,k,null),K.flags|=2),K.return=x,P.return=x,P.sibling=K,x.child=P,P=K,K=x.child,se=g.child.memoizedState,se=se===null?d_(k):{baseLanes:se.baseLanes|k,cachePool:null,transitions:se.transitions},K.memoizedState=se,K.childLanes=g.childLanes&~k,x.memoizedState=f_,P}return K=g.child,g=K.sibling,P=Rf(K,{mode:"visible",children:P.children}),!(x.mode&1)&&(P.lanes=k),P.return=x,P.sibling=null,g!==null&&(k=x.deletions,k===null?(x.deletions=[g],x.flags|=16):k.push(g)),x.child=P,x.memoizedState=null,P}function mv(g,x){return x=fS({mode:"visible",children:x},g.mode,0,null),x.return=g,g.child=x}function Yh(g,x,k,P){return P!==null&&kd(P),Ss(x,g.child,null,k),g=mv(x,x.pendingProps.children),g.flags|=2,x.memoizedState=null,g}function Sn(g,x,k,P,z,K,se){if(k)return x.flags&256?(x.flags&=-257,P=WT(Error(n(422))),Yh(g,x,se,P)):x.memoizedState!==null?(x.child=g.child,x.flags|=128,null):(K=P.fallback,z=x.mode,P=fS({mode:"visible",children:P.children},z,0,null),K=qg(K,z,se,null),K.flags|=2,P.return=x,K.return=x,P.sibling=K,x.child=P,x.mode&1&&Ss(x,g.child,null,se),x.child.memoizedState=d_(se),x.memoizedState=f_,K);if(!(x.mode&1))return Yh(g,x,se,null);if(z.data==="$!"){if(P=z.nextSibling&&z.nextSibling.dataset,P)var be=P.dgst;return P=be,K=Error(n(419)),P=WT(K,P,void 0),Yh(g,x,se,P)}if(be=(se&g.childLanes)!==0,Ja||be){if(P=jo,P!==null){switch(se&-se){case 4:z=2;break;case 16:z=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:z=32;break;case 536870912:z=268435456;break;default:z=0}z=z&(P.suspendedLanes|se)?0:z,z!==0&&z!==K.retryLane&&(K.retryLane=z,Vh(g,z),kf(P,g,z,-1))}return Ik(),P=WT(Error(n(421))),Yh(g,x,se,P)}return z.data==="$?"?(x.flags|=128,x.child=g.child,x=fU.bind(null,g),z._reactRetry=x,null):(g=K.treeContext,wl=vm(z.nextSibling),Ea=x,rs=!0,Ef=null,g!==null&&(mc[gc++]=Sd,mc[gc++]=Cd,mc[gc++]=Ng,Sd=g.id,Cd=g.overflow,Ng=x),x=mv(x,P.children),x.flags|=4096,x)}function h_(g,x,k){g.lanes|=x;var P=g.alternate;P!==null&&(P.lanes|=x),Qo(g.return,x,k)}function p_(g,x,k,P,z){var K=g.memoizedState;K===null?g.memoizedState={isBackwards:x,rendering:null,renderingStartTime:0,last:P,tail:k,tailMode:z}:(K.isBackwards=x,K.rendering=null,K.renderingStartTime=0,K.last=P,K.tail=k,K.tailMode=z)}function Cm(g,x,k){var P=x.pendingProps,z=P.revealOrder,K=P.tail;if(Jo(g,x,P.children,k),P=os.current,P&2)P=P&1|2,x.flags|=128;else{if(g!==null&&g.flags&128)e:for(g=x.child;g!==null;){if(g.tag===13)g.memoizedState!==null&&h_(g,k,x);else if(g.tag===19)h_(g,k,x);else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===x)break e;for(;g.sibling===null;){if(g.return===null||g.return===x)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}P&=1}if(ji(os,P),!(x.mode&1))x.memoizedState=null;else switch(z){case"forwards":for(k=x.child,z=null;k!==null;)g=k.alternate,g!==null&&Lg(g)===null&&(z=k),k=k.sibling;k=z,k===null?(z=x.child,x.child=null):(z=k.sibling,k.sibling=null),p_(x,!1,z,k,K);break;case"backwards":for(k=null,z=x.child,x.child=null;z!==null;){if(g=z.alternate,g!==null&&Lg(g)===null){x.child=z;break}g=z.sibling,z.sibling=k,k=z,z=g}p_(x,!0,k,null,K);break;case"together":p_(x,!1,null,null,void 0);break;default:x.memoizedState=null}return x.child}function XT(g,x){!(x.mode&1)&&g!==null&&(g.alternate=null,x.alternate=null,x.flags|=2)}function Sf(g,x,k){if(g!==null&&(x.dependencies=g.dependencies),Im|=x.lanes,!(k&x.childLanes))return null;if(g!==null&&x.child!==g.child)throw Error(n(153));if(x.child!==null){for(g=x.child,k=Rf(g,g.pendingProps),x.child=k,k.return=x;g.sibling!==null;)g=g.sibling,k=k.sibling=Rf(g,g.pendingProps),k.return=x;k.sibling=null}return x.child}function e4(g,x,k){switch(x.tag){case 3:ZO(x),Id();break;case 5:GI(x);break;case 1:Ou(x.type)&&pc(x);break;case 4:WI(x,x.stateNode.containerInfo);break;case 10:var P=x.type._context,z=x.memoizedProps.value;ji(t_,P._currentValue),P._currentValue=z;break;case 13:if(P=x.memoizedState,P!==null)return P.dehydrated!==null?(ji(os,os.current&1),x.flags|=128,null):k&x.child.childLanes?KT(g,x,k):(ji(os,os.current&1),g=Sf(g,x,k),g!==null?g.sibling:null);ji(os,os.current&1);break;case 19:if(P=(k&x.childLanes)!==0,g.flags&128){if(P)return Cm(g,x,k);x.flags|=128}if(z=x.memoizedState,z!==null&&(z.rendering=null,z.tail=null,z.lastEffect=null),ji(os,os.current),P)break;return null;case 22:case 23:return x.lanes=0,lk(g,x,k)}return Sf(g,x,k)}var Zo,pk,t4,mk;Zo=function(g,x){for(var k=x.child;k!==null;){if(k.tag===5||k.tag===6)g.appendChild(k.stateNode);else if(k.tag!==4&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===x)break;for(;k.sibling===null;){if(k.return===null||k.return===x)return;k=k.return}k.sibling.return=k.return,k=k.sibling}},pk=function(){},t4=function(g,x,k,P){var z=g.memoizedProps;if(z!==P){g=x.stateNode,qh(Rd.current);var K=null;switch(k){case"input":z=Ne(g,z),P=Ne(g,P),K=[];break;case"select":z=q({},z,{value:void 0}),P=q({},P,{value:void 0}),K=[];break;case"textarea":z=Ot(g,z),P=Ot(g,P),K=[];break;default:typeof z.onClick!="function"&&typeof P.onClick=="function"&&(g.onclick=_T)}tr(k,P);var se;k=null;for(Xe in z)if(!P.hasOwnProperty(Xe)&&z.hasOwnProperty(Xe)&&z[Xe]!=null)if(Xe==="style"){var be=z[Xe];for(se in be)be.hasOwnProperty(se)&&(k||(k={}),k[se]="")}else Xe!=="dangerouslySetInnerHTML"&&Xe!=="children"&&Xe!=="suppressContentEditableWarning"&&Xe!=="suppressHydrationWarning"&&Xe!=="autoFocus"&&(i.hasOwnProperty(Xe)?K||(K=[]):(K=K||[]).push(Xe,null));for(Xe in P){var Ce=P[Xe];if(be=z!=null?z[Xe]:void 0,P.hasOwnProperty(Xe)&&Ce!==be&&(Ce!=null||be!=null))if(Xe==="style")if(be){for(se in be)!be.hasOwnProperty(se)||Ce&&Ce.hasOwnProperty(se)||(k||(k={}),k[se]="");for(se in Ce)Ce.hasOwnProperty(se)&&be[se]!==Ce[se]&&(k||(k={}),k[se]=Ce[se])}else k||(K||(K=[]),K.push(Xe,k)),k=Ce;else Xe==="dangerouslySetInnerHTML"?(Ce=Ce?Ce.__html:void 0,be=be?be.__html:void 0,Ce!=null&&be!==Ce&&(K=K||[]).push(Xe,Ce)):Xe==="children"?typeof Ce!="string"&&typeof Ce!="number"||(K=K||[]).push(Xe,""+Ce):Xe!=="suppressContentEditableWarning"&&Xe!=="suppressHydrationWarning"&&(i.hasOwnProperty(Xe)?(Ce!=null&&Xe==="onScroll"&&ts("scroll",g),K||be===Ce||(K=[])):(K=K||[]).push(Xe,Ce))}k&&(K=K||[]).push("style",k);var Xe=K;(x.updateQueue=Xe)&&(x.flags|=4)}},mk=function(g,x,k,P){k!==P&&(x.flags|=4)};function m_(g,x){if(!rs)switch(g.tailMode){case"hidden":x=g.tail;for(var k=null;x!==null;)x.alternate!==null&&(k=x),x=x.sibling;k===null?g.tail=null:k.sibling=null;break;case"collapsed":k=g.tail;for(var P=null;k!==null;)k.alternate!==null&&(P=k),k=k.sibling;P===null?x||g.tail===null?g.tail=null:g.tail.sibling=null:P.sibling=null}}function ea(g){var x=g.alternate!==null&&g.alternate.child===g.child,k=0,P=0;if(x)for(var z=g.child;z!==null;)k|=z.lanes|z.childLanes,P|=z.subtreeFlags&14680064,P|=z.flags&14680064,z.return=g,z=z.sibling;else for(z=g.child;z!==null;)k|=z.lanes|z.childLanes,P|=z.subtreeFlags,P|=z.flags,z.return=g,z=z.sibling;return g.subtreeFlags|=P,g.childLanes=k,x}function rU(g,x,k){var P=x.pendingProps;switch(Pg(x),x.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ea(x),null;case 1:return Ou(x.type)&&ST(),ea(x),null;case 3:return P=x.stateNode,Tm(),ns(Pu),ns(_a),LT(),P.pendingContext&&(P.context=P.pendingContext,P.pendingContext=null),(g===null||g.child===null)&&(Zx(x)?x.flags|=4:g===null||g.memoizedState.isDehydrated&&!(x.flags&256)||(x.flags|=1024,Ef!==null&&(Sk(Ef),Ef=null))),pk(g,x),ea(x),null;case 5:MT(x);var z=qh(av.current);if(k=x.type,g!==null&&x.stateNode!=null)t4(g,x,k,P,z),g.ref!==x.ref&&(x.flags|=512,x.flags|=2097152);else{if(!P){if(x.stateNode===null)throw Error(n(166));return ea(x),null}if(g=qh(Rd.current),Zx(x)){P=x.stateNode,k=x.type;var K=x.memoizedProps;switch(P[Ed]=x,P[bm]=K,g=(x.mode&1)!==0,k){case"dialog":ts("cancel",P),ts("close",P);break;case"iframe":case"object":case"embed":ts("load",P);break;case"video":case"audio":for(z=0;z<Bh.length;z++)ts(Bh[z],P);break;case"source":ts("error",P);break;case"img":case"image":case"link":ts("error",P),ts("load",P);break;case"details":ts("toggle",P);break;case"input":tt(P,K),ts("invalid",P);break;case"select":P._wrapperState={wasMultiple:!!K.multiple},ts("invalid",P);break;case"textarea":qe(P,K),ts("invalid",P)}tr(k,K),z=null;for(var se in K)if(K.hasOwnProperty(se)){var be=K[se];se==="children"?typeof be=="string"?P.textContent!==be&&(K.suppressHydrationWarning!==!0&&Yx(P.textContent,be,g),z=["children",be]):typeof be=="number"&&P.textContent!==""+be&&(K.suppressHydrationWarning!==!0&&Yx(P.textContent,be,g),z=["children",""+be]):i.hasOwnProperty(se)&&be!=null&&se==="onScroll"&&ts("scroll",P)}switch(k){case"input":ye(P),Ge(P,K,!0);break;case"textarea":ye(P),wt(P);break;case"select":case"option":break;default:typeof K.onClick=="function"&&(P.onclick=_T)}P=z,x.updateQueue=P,P!==null&&(x.flags|=4)}else{se=z.nodeType===9?z:z.ownerDocument,g==="http://www.w3.org/1999/xhtml"&&(g=ke(k)),g==="http://www.w3.org/1999/xhtml"?k==="script"?(g=se.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild)):typeof P.is=="string"?g=se.createElement(k,{is:P.is}):(g=se.createElement(k),k==="select"&&(se=g,P.multiple?se.multiple=!0:P.size&&(se.size=P.size))):g=se.createElementNS(g,k),g[Ed]=x,g[bm]=P,Zo(g,x,!1,!1),x.stateNode=g;e:{switch(se=Si(k,P),k){case"dialog":ts("cancel",g),ts("close",g),z=P;break;case"iframe":case"object":case"embed":ts("load",g),z=P;break;case"video":case"audio":for(z=0;z<Bh.length;z++)ts(Bh[z],g);z=P;break;case"source":ts("error",g),z=P;break;case"img":case"image":case"link":ts("error",g),ts("load",g),z=P;break;case"details":ts("toggle",g),z=P;break;case"input":tt(g,P),z=Ne(g,P),ts("invalid",g);break;case"option":z=P;break;case"select":g._wrapperState={wasMultiple:!!P.multiple},z=q({},P,{value:void 0}),ts("invalid",g);break;case"textarea":qe(g,P),z=Ot(g,P),ts("invalid",g);break;default:z=P}tr(k,z),be=z;for(K in be)if(be.hasOwnProperty(K)){var Ce=be[K];K==="style"?Ri(g,Ce):K==="dangerouslySetInnerHTML"?(Ce=Ce?Ce.__html:void 0,Ce!=null&&Lt(g,Ce)):K==="children"?typeof Ce=="string"?(k!=="textarea"||Ce!=="")&&Ft(g,Ce):typeof Ce=="number"&&Ft(g,""+Ce):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(i.hasOwnProperty(K)?Ce!=null&&K==="onScroll"&&ts("scroll",g):Ce!=null&&w(g,K,Ce,se))}switch(k){case"input":ye(g),Ge(g,P,!1);break;case"textarea":ye(g),wt(g);break;case"option":P.value!=null&&g.setAttribute("value",""+pe(P.value));break;case"select":g.multiple=!!P.multiple,K=P.value,K!=null?Tt(g,!!P.multiple,K,!1):P.defaultValue!=null&&Tt(g,!!P.multiple,P.defaultValue,!0);break;default:typeof z.onClick=="function"&&(g.onclick=_T)}switch(k){case"button":case"input":case"select":case"textarea":P=!!P.autoFocus;break e;case"img":P=!0;break e;default:P=!1}}P&&(x.flags|=4)}x.ref!==null&&(x.flags|=512,x.flags|=2097152)}return ea(x),null;case 6:if(g&&x.stateNode!=null)mk(g,x,g.memoizedProps,P);else{if(typeof P!="string"&&x.stateNode===null)throw Error(n(166));if(k=qh(av.current),qh(Rd.current),Zx(x)){if(P=x.stateNode,k=x.memoizedProps,P[Ed]=x,(K=P.nodeValue!==k)&&(g=Ea,g!==null))switch(g.tag){case 3:Yx(P.nodeValue,k,(g.mode&1)!==0);break;case 5:g.memoizedProps.suppressHydrationWarning!==!0&&Yx(P.nodeValue,k,(g.mode&1)!==0)}K&&(x.flags|=4)}else P=(k.nodeType===9?k:k.ownerDocument).createTextNode(P),P[Ed]=x,x.stateNode=P}return ea(x),null;case 13:if(ns(os),P=x.memoizedState,g===null||g.memoizedState!==null&&g.memoizedState.dehydrated!==null){if(rs&&wl!==null&&x.mode&1&&!(x.flags&128))zI(),Id(),x.flags|=98560,K=!1;else if(K=Zx(x),P!==null&&P.dehydrated!==null){if(g===null){if(!K)throw Error(n(318));if(K=x.memoizedState,K=K!==null?K.dehydrated:null,!K)throw Error(n(317));K[Ed]=x}else Id(),!(x.flags&128)&&(x.memoizedState=null),x.flags|=4;ea(x),K=!1}else Ef!==null&&(Sk(Ef),Ef=null),K=!0;if(!K)return x.flags&65536?x:null}return x.flags&128?(x.lanes=k,x):(P=P!==null,P!==(g!==null&&g.memoizedState!==null)&&P&&(x.child.flags|=8192,x.mode&1&&(g===null||os.current&1?vo===0&&(vo=3):Ik())),x.updateQueue!==null&&(x.flags|=4),ea(x),null);case 4:return Tm(),pk(g,x),g===null&&gm(x.stateNode.containerInfo),ea(x),null;case 10:return NT(x.type._context),ea(x),null;case 17:return Ou(x.type)&&ST(),ea(x),null;case 19:if(ns(os),K=x.memoizedState,K===null)return ea(x),null;if(P=(x.flags&128)!==0,se=K.rendering,se===null)if(P)m_(K,!1);else{if(vo!==0||g!==null&&g.flags&128)for(g=x.child;g!==null;){if(se=Lg(g),se!==null){for(x.flags|=128,m_(K,!1),P=se.updateQueue,P!==null&&(x.updateQueue=P,x.flags|=4),x.subtreeFlags=0,P=k,k=x.child;k!==null;)K=k,g=P,K.flags&=14680066,se=K.alternate,se===null?(K.childLanes=0,K.lanes=g,K.child=null,K.subtreeFlags=0,K.memoizedProps=null,K.memoizedState=null,K.updateQueue=null,K.dependencies=null,K.stateNode=null):(K.childLanes=se.childLanes,K.lanes=se.lanes,K.child=se.child,K.subtreeFlags=0,K.deletions=null,K.memoizedProps=se.memoizedProps,K.memoizedState=se.memoizedState,K.updateQueue=se.updateQueue,K.type=se.type,g=se.dependencies,K.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),k=k.sibling;return ji(os,os.current&1|2),x.child}g=g.sibling}K.tail!==null&&fr()>Ug&&(x.flags|=128,P=!0,m_(K,!1),x.lanes=4194304)}else{if(!P)if(g=Lg(se),g!==null){if(x.flags|=128,P=!0,k=g.updateQueue,k!==null&&(x.updateQueue=k,x.flags|=4),m_(K,!0),K.tail===null&&K.tailMode==="hidden"&&!se.alternate&&!rs)return ea(x),null}else 2*fr()-K.renderingStartTime>Ug&&k!==1073741824&&(x.flags|=128,P=!0,m_(K,!1),x.lanes=4194304);K.isBackwards?(se.sibling=x.child,x.child=se):(k=K.last,k!==null?k.sibling=se:x.child=se,K.last=se)}return K.tail!==null?(x=K.tail,K.rendering=x,K.tail=x.sibling,K.renderingStartTime=fr(),x.sibling=null,k=os.current,ji(os,P?k&1|2:k&1),x):(ea(x),null);case 22:case 23:return Ak(),P=x.memoizedState!==null,g!==null&&g.memoizedState!==null!==P&&(x.flags|=8192),P&&x.mode&1?Sl&1073741824&&(ea(x),x.subtreeFlags&6&&(x.flags|=8192)):ea(x),null;case 24:return null;case 25:return null}throw Error(n(156,x.tag))}function iU(g,x){switch(Pg(x),x.tag){case 1:return Ou(x.type)&&ST(),g=x.flags,g&65536?(x.flags=g&-65537|128,x):null;case 3:return Tm(),ns(Pu),ns(_a),LT(),g=x.flags,g&65536&&!(g&128)?(x.flags=g&-65537|128,x):null;case 5:return MT(x),null;case 13:if(ns(os),g=x.memoizedState,g!==null&&g.dehydrated!==null){if(x.alternate===null)throw Error(n(340));Id()}return g=x.flags,g&65536?(x.flags=g&-65537|128,x):null;case 19:return ns(os),null;case 4:return Tm(),null;case 10:return NT(x.type._context),null;case 22:case 23:return Ak(),null;case 24:return null;default:return null}}var QT=!1,as=!1,Za=typeof WeakSet=="function"?WeakSet:Set,en=null;function gv(g,x){var k=g.ref;if(k!==null)if(typeof k=="function")try{k(null)}catch(P){ys(g,x,P)}else k.current=null}function g_(g,x,k){try{k()}catch(P){ys(g,x,P)}}var n4=!1;function sU(g,x){if(Kx=ve,g=Ci(),zx(g)){if("selectionStart"in g)var k={start:g.selectionStart,end:g.selectionEnd};else e:{k=(k=g.ownerDocument)&&k.defaultView||window;var P=k.getSelection&&k.getSelection();if(P&&P.rangeCount!==0){k=P.anchorNode;var z=P.anchorOffset,K=P.focusNode;P=P.focusOffset;try{k.nodeType,K.nodeType}catch{k=null;break e}var se=0,be=-1,Ce=-1,Xe=0,St=0,kt=g,_t=null;t:for(;;){for(var Xt;kt!==k||z!==0&&kt.nodeType!==3||(be=se+z),kt!==K||P!==0&&kt.nodeType!==3||(Ce=se+P),kt.nodeType===3&&(se+=kt.nodeValue.length),(Xt=kt.firstChild)!==null;)_t=kt,kt=Xt;for(;;){if(kt===g)break t;if(_t===k&&++Xe===z&&(be=se),_t===K&&++St===P&&(Ce=se),(Xt=kt.nextSibling)!==null)break;kt=_t,_t=kt.parentNode}kt=Xt}k=be===-1||Ce===-1?null:{start:be,end:Ce}}else k=null}k=k||{start:0,end:0}}else k=null;for(kg={focusedElem:g,selectionRange:k},ve=!1,en=x;en!==null;)if(x=en,g=x.child,(x.subtreeFlags&1028)!==0&&g!==null)g.return=x,en=g;else for(;en!==null;){x=en;try{var rn=x.alternate;if(x.flags&1024)switch(x.tag){case 0:case 11:case 15:break;case 1:if(rn!==null){var sn=rn.memoizedProps,Cs=rn.memoizedState,Ve=x.stateNode,Pe=Ve.getSnapshotBeforeUpdate(x.elementType===x.type?sn:_c(x.type,sn),Cs);Ve.__reactInternalSnapshotBeforeUpdate=Pe}break;case 3:var We=x.stateNode.containerInfo;We.nodeType===1?We.textContent="":We.nodeType===9&&We.documentElement&&We.removeChild(We.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Mt){ys(x,x.return,Mt)}if(g=x.sibling,g!==null){g.return=x.return,en=g;break}en=x.return}return rn=n4,n4=!1,rn}function Kh(g,x,k){var P=x.updateQueue;if(P=P!==null?P.lastEffect:null,P!==null){var z=P=P.next;do{if((z.tag&g)===g){var K=z.destroy;z.destroy=void 0,K!==void 0&&g_(x,k,K)}z=z.next}while(z!==P)}}function y_(g,x){if(x=x.updateQueue,x=x!==null?x.lastEffect:null,x!==null){var k=x=x.next;do{if((k.tag&g)===g){var P=k.create;k.destroy=P()}k=k.next}while(k!==x)}}function JT(g){var x=g.ref;if(x!==null){var k=g.stateNode;switch(g.tag){case 5:g=k;break;default:g=k}typeof x=="function"?x(g):x.current=g}}function r4(g){var x=g.alternate;x!==null&&(g.alternate=null,r4(x)),g.child=null,g.deletions=null,g.sibling=null,g.tag===5&&(x=g.stateNode,x!==null&&(delete x[Ed],delete x[bm],delete x[ET],delete x[oe],delete x[tv])),g.stateNode=null,g.return=null,g.dependencies=null,g.memoizedProps=null,g.memoizedState=null,g.pendingProps=null,g.stateNode=null,g.updateQueue=null}function i4(g){return g.tag===5||g.tag===3||g.tag===4}function s4(g){e:for(;;){for(;g.sibling===null;){if(g.return===null||i4(g.return))return null;g=g.return}for(g.sibling.return=g.return,g=g.sibling;g.tag!==5&&g.tag!==6&&g.tag!==18;){if(g.flags&2||g.child===null||g.tag===4)continue e;g.child.return=g,g=g.child}if(!(g.flags&2))return g.stateNode}}function gk(g,x,k){var P=g.tag;if(P===5||P===6)g=g.stateNode,x?k.nodeType===8?k.parentNode.insertBefore(g,x):k.insertBefore(g,x):(k.nodeType===8?(x=k.parentNode,x.insertBefore(g,k)):(x=k,x.appendChild(g)),k=k._reactRootContainer,k!=null||x.onclick!==null||(x.onclick=_T));else if(P!==4&&(g=g.child,g!==null))for(gk(g,x,k),g=g.sibling;g!==null;)gk(g,x,k),g=g.sibling}function ZT(g,x,k){var P=g.tag;if(P===5||P===6)g=g.stateNode,x?k.insertBefore(g,x):k.appendChild(g);else if(P!==4&&(g=g.child,g!==null))for(ZT(g,x,k),g=g.sibling;g!==null;)ZT(g,x,k),g=g.sibling}var Bo=null,Cf=!1;function Md(g,x,k){for(k=k.child;k!==null;)yk(g,x,k),k=k.sibling}function yk(g,x,k){if(ho&&typeof ho.onCommitFiberUnmount=="function")try{ho.onCommitFiberUnmount(ac,k)}catch{}switch(k.tag){case 5:as||gv(k,x);case 6:var P=Bo,z=Cf;Bo=null,Md(g,x,k),Bo=P,Cf=z,Bo!==null&&(Cf?(g=Bo,k=k.stateNode,g.nodeType===8?g.parentNode.removeChild(k):g.removeChild(k)):Bo.removeChild(k.stateNode));break;case 18:Bo!==null&&(Cf?(g=Bo,k=k.stateNode,g.nodeType===8?BI(g.parentNode,k):g.nodeType===1&&BI(g,k),dr(g)):BI(Bo,k.stateNode));break;case 4:P=Bo,z=Cf,Bo=k.stateNode.containerInfo,Cf=!0,Md(g,x,k),Bo=P,Cf=z;break;case 0:case 11:case 14:case 15:if(!as&&(P=k.updateQueue,P!==null&&(P=P.lastEffect,P!==null))){z=P=P.next;do{var K=z,se=K.destroy;K=K.tag,se!==void 0&&(K&2||K&4)&&g_(k,x,se),z=z.next}while(z!==P)}Md(g,x,k);break;case 1:if(!as&&(gv(k,x),P=k.stateNode,typeof P.componentWillUnmount=="function"))try{P.props=k.memoizedProps,P.state=k.memoizedState,P.componentWillUnmount()}catch(be){ys(k,x,be)}Md(g,x,k);break;case 21:Md(g,x,k);break;case 22:k.mode&1?(as=(P=as)||k.memoizedState!==null,Md(g,x,k),as=P):Md(g,x,k);break;default:Md(g,x,k)}}function yv(g){var x=g.updateQueue;if(x!==null){g.updateQueue=null;var k=g.stateNode;k===null&&(k=g.stateNode=new Za),x.forEach(function(P){var z=dU.bind(null,g,P);k.has(P)||(k.add(P),P.then(z,z))})}}function Tl(g,x){var k=x.deletions;if(k!==null)for(var P=0;P<k.length;P++){var z=k[P];try{var K=g,se=x,be=se;e:for(;be!==null;){switch(be.tag){case 5:Bo=be.stateNode,Cf=!1;break e;case 3:Bo=be.stateNode.containerInfo,Cf=!0;break e;case 4:Bo=be.stateNode.containerInfo,Cf=!0;break e}be=be.return}if(Bo===null)throw Error(n(160));yk(K,se,z),Bo=null,Cf=!1;var Ce=z.alternate;Ce!==null&&(Ce.return=null),z.return=null}catch(Xe){ys(z,x,Xe)}}if(x.subtreeFlags&12854)for(x=x.child;x!==null;)vk(x,g),x=x.sibling}function vk(g,x){var k=g.alternate,P=g.flags;switch(g.tag){case 0:case 11:case 14:case 15:if(Tl(x,g),Af(g),P&4){try{Kh(3,g,g.return),y_(3,g)}catch(sn){ys(g,g.return,sn)}try{Kh(5,g,g.return)}catch(sn){ys(g,g.return,sn)}}break;case 1:Tl(x,g),Af(g),P&512&&k!==null&&gv(k,k.return);break;case 5:if(Tl(x,g),Af(g),P&512&&k!==null&&gv(k,k.return),g.flags&32){var z=g.stateNode;try{Ft(z,"")}catch(sn){ys(g,g.return,sn)}}if(P&4&&(z=g.stateNode,z!=null)){var K=g.memoizedProps,se=k!==null?k.memoizedProps:K,be=g.type,Ce=g.updateQueue;if(g.updateQueue=null,Ce!==null)try{be==="input"&&K.type==="radio"&&K.name!=null&&it(z,K),Si(be,se);var Xe=Si(be,K);for(se=0;se<Ce.length;se+=2){var St=Ce[se],kt=Ce[se+1];St==="style"?Ri(z,kt):St==="dangerouslySetInnerHTML"?Lt(z,kt):St==="children"?Ft(z,kt):w(z,St,kt,Xe)}switch(be){case"input":Me(z,K);break;case"textarea":ft(z,K);break;case"select":var _t=z._wrapperState.wasMultiple;z._wrapperState.wasMultiple=!!K.multiple;var Xt=K.value;Xt!=null?Tt(z,!!K.multiple,Xt,!1):_t!==!!K.multiple&&(K.defaultValue!=null?Tt(z,!!K.multiple,K.defaultValue,!0):Tt(z,!!K.multiple,K.multiple?[]:"",!1))}z[bm]=K}catch(sn){ys(g,g.return,sn)}}break;case 6:if(Tl(x,g),Af(g),P&4){if(g.stateNode===null)throw Error(n(162));z=g.stateNode,K=g.memoizedProps;try{z.nodeValue=K}catch(sn){ys(g,g.return,sn)}}break;case 3:if(Tl(x,g),Af(g),P&4&&k!==null&&k.memoizedState.isDehydrated)try{dr(x.containerInfo)}catch(sn){ys(g,g.return,sn)}break;case 4:Tl(x,g),Af(g);break;case 13:Tl(x,g),Af(g),z=g.child,z.flags&8192&&(K=z.memoizedState!==null,z.stateNode.isHidden=K,!K||z.alternate!==null&&z.alternate.memoizedState!==null||(_k=fr())),P&4&&yv(g);break;case 22:if(St=k!==null&&k.memoizedState!==null,g.mode&1?(as=(Xe=as)||St,Tl(x,g),as=Xe):Tl(x,g),Af(g),P&8192){if(Xe=g.memoizedState!==null,(g.stateNode.isHidden=Xe)&&!St&&g.mode&1)for(en=g,St=g.child;St!==null;){for(kt=en=St;en!==null;){switch(_t=en,Xt=_t.child,_t.tag){case 0:case 11:case 14:case 15:Kh(4,_t,_t.return);break;case 1:gv(_t,_t.return);var rn=_t.stateNode;if(typeof rn.componentWillUnmount=="function"){P=_t,k=_t.return;try{x=P,rn.props=x.memoizedProps,rn.state=x.memoizedState,rn.componentWillUnmount()}catch(sn){ys(P,k,sn)}}break;case 5:gv(_t,_t.return);break;case 22:if(_t.memoizedState!==null){Am(kt);continue}}Xt!==null?(Xt.return=_t,en=Xt):Am(kt)}St=St.sibling}e:for(St=null,kt=g;;){if(kt.tag===5){if(St===null){St=kt;try{z=kt.stateNode,Xe?(K=z.style,typeof K.setProperty=="function"?K.setProperty("display","none","important"):K.display="none"):(be=kt.stateNode,Ce=kt.memoizedProps.style,se=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null,be.style.display=Tr("display",se))}catch(sn){ys(g,g.return,sn)}}}else if(kt.tag===6){if(St===null)try{kt.stateNode.nodeValue=Xe?"":kt.memoizedProps}catch(sn){ys(g,g.return,sn)}}else if((kt.tag!==22&&kt.tag!==23||kt.memoizedState===null||kt===g)&&kt.child!==null){kt.child.return=kt,kt=kt.child;continue}if(kt===g)break e;for(;kt.sibling===null;){if(kt.return===null||kt.return===g)break e;St===kt&&(St=null),kt=kt.return}St===kt&&(St=null),kt.sibling.return=kt.return,kt=kt.sibling}}break;case 19:Tl(x,g),Af(g),P&4&&yv(g);break;case 21:break;default:Tl(x,g),Af(g)}}function Af(g){var x=g.flags;if(x&2){try{e:{for(var k=g.return;k!==null;){if(i4(k)){var P=k;break e}k=k.return}throw Error(n(160))}switch(P.tag){case 5:var z=P.stateNode;P.flags&32&&(Ft(z,""),P.flags&=-33);var K=s4(g);ZT(g,K,z);break;case 3:case 4:var se=P.stateNode.containerInfo,be=s4(g);gk(g,be,se);break;default:throw Error(n(161))}}catch(Ce){ys(g,g.return,Ce)}g.flags&=-3}x&4096&&(g.flags&=-4097)}function eS(g,x,k){en=g,bk(g)}function bk(g,x,k){for(var P=(g.mode&1)!==0;en!==null;){var z=en,K=z.child;if(z.tag===22&&P){var se=z.memoizedState!==null||QT;if(!se){var be=z.alternate,Ce=be!==null&&be.memoizedState!==null||as;be=QT;var Xe=as;if(QT=se,(as=Ce)&&!Xe)for(en=z;en!==null;)se=en,Ce=se.child,se.tag===22&&se.memoizedState!==null?o4(z):Ce!==null?(Ce.return=se,en=Ce):o4(z);for(;K!==null;)en=K,bk(K),K=K.sibling;en=z,QT=be,as=Xe}If(g)}else z.subtreeFlags&8772&&K!==null?(K.return=z,en=K):If(g)}}function If(g){for(;en!==null;){var x=en;if(x.flags&8772){var k=x.alternate;try{if(x.flags&8772)switch(x.tag){case 0:case 11:case 15:as||y_(5,x);break;case 1:var P=x.stateNode;if(x.flags&4&&!as)if(k===null)P.componentDidMount();else{var z=x.elementType===x.type?k.memoizedProps:_c(x.type,k.memoizedProps);P.componentDidUpdate(z,k.memoizedState,P.__reactInternalSnapshotBeforeUpdate)}var K=x.updateQueue;K!==null&&qI(x,K,P);break;case 3:var se=x.updateQueue;if(se!==null){if(k=null,x.child!==null)switch(x.child.tag){case 5:k=x.child.stateNode;break;case 1:k=x.child.stateNode}qI(x,se,k)}break;case 5:var be=x.stateNode;if(k===null&&x.flags&4){k=be;var Ce=x.memoizedProps;switch(x.type){case"button":case"input":case"select":case"textarea":Ce.autoFocus&&k.focus();break;case"img":Ce.src&&(k.src=Ce.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(x.memoizedState===null){var Xe=x.alternate;if(Xe!==null){var St=Xe.memoizedState;if(St!==null){var kt=St.dehydrated;kt!==null&&dr(kt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}as||x.flags&512&&JT(x)}catch(_t){ys(x,x.return,_t)}}if(x===g){en=null;break}if(k=x.sibling,k!==null){k.return=x.return,en=k;break}en=x.return}}function Am(g){for(;en!==null;){var x=en;if(x===g){en=null;break}var k=x.sibling;if(k!==null){k.return=x.return,en=k;break}en=x.return}}function o4(g){for(;en!==null;){var x=en;try{switch(x.tag){case 0:case 11:case 15:var k=x.return;try{y_(4,x)}catch(Ce){ys(x,k,Ce)}break;case 1:var P=x.stateNode;if(typeof P.componentDidMount=="function"){var z=x.return;try{P.componentDidMount()}catch(Ce){ys(x,z,Ce)}}var K=x.return;try{JT(x)}catch(Ce){ys(x,K,Ce)}break;case 5:var se=x.return;try{JT(x)}catch(Ce){ys(x,se,Ce)}}}catch(Ce){ys(x,x.return,Ce)}if(x===g){en=null;break}var be=x.sibling;if(be!==null){be.return=x.return,en=be;break}en=x.return}}var a4=Math.ceil,tS=E.ReactCurrentDispatcher,xk=E.ReactCurrentOwner,wc=E.ReactCurrentBatchConfig,jr=0,jo=null,Xs=null,ta=0,Sl=0,vv=Du(0),vo=0,v_=null,Im=0,b_=0,nS=0,x_=null,$u=null,_k=0,Ug=1/0,Xh=null,rS=!1,wk=null,km=null,iS=!1,Rm=null,eu=0,__=0,Ek=null,sS=-1,w_=0;function tu(){return jr&6?fr():sS!==-1?sS:sS=fr()}function Nm(g){return g.mode&1?jr&2&&ta!==0?ta&-ta:jO.transition!==null?(w_===0&&(w_=Nt()),w_):(g=ln,g!==0||(g=window.event,g=g===void 0?16:ci(g.type)),g):1}function kf(g,x,k,P){if(50<__)throw __=0,Ek=null,Error(n(185));In(g,k,P),(!(jr&2)||g!==jo)&&(g===jo&&(!(jr&2)&&(b_|=k),vo===4&&Dm(g,ta)),Fu(g,P),k===1&&jr===0&&!(x.mode&1)&&(Ug=fr()+500,CT&&_m()))}function Fu(g,x){var k=g.callbackNode;Et(g,x);var P=rt(g,g===jo?ta:0);if(P===0)k!==null&&df(k),g.callbackNode=null,g.callbackPriority=0;else if(x=P&-P,g.callbackPriority!==x){if(k!=null&&df(k),x===1)g.tag===0?Rg(u4.bind(null,g)):$O(u4.bind(null,g)),wT(function(){!(jr&6)&&_m()}),k=null;else{switch(br(P)){case 1:k=fo;break;case 4:k=bl;break;case 16:k=qs;break;case 536870912:k=Dh;break;default:k=qs}k=m4(k,oS.bind(null,g))}g.callbackPriority=x,g.callbackNode=k}}function oS(g,x){if(sS=-1,w_=0,jr&6)throw Error(n(327));var k=g.callbackNode;if(bv()&&g.callbackNode!==k)return null;var P=rt(g,g===jo?ta:0);if(P===0)return null;if(P&30||P&g.expiredLanes||x)x=aS(g,P);else{x=P;var z=jr;jr|=2;var K=c4();(jo!==g||ta!==x)&&(Xh=null,Ug=fr()+500,Vg(g,x));do try{uU();break}catch(be){l4(g,be)}while(!0);zh(),tS.current=K,jr=z,Xs!==null?x=0:(jo=null,ta=0,x=vo)}if(x!==0){if(x===2&&(z=xt(g),z!==0&&(P=z,x=Tk(g,z))),x===1)throw k=v_,Vg(g,0),Dm(g,P),Fu(g,fr()),k;if(x===6)Dm(g,P);else{if(z=g.current.alternate,!(P&30)&&!oU(z)&&(x=aS(g,P),x===2&&(K=xt(g),K!==0&&(P=K,x=Tk(g,K))),x===1))throw k=v_,Vg(g,0),Dm(g,P),Fu(g,fr()),k;switch(g.finishedWork=z,g.finishedLanes=P,x){case 0:case 1:throw Error(n(345));case 2:Hg(g,$u,Xh);break;case 3:if(Dm(g,P),(P&130023424)===P&&(x=_k+500-fr(),10<x)){if(rt(g,0)!==0)break;if(z=g.suspendedLanes,(z&P)!==P){tu(),g.pingedLanes|=g.suspendedLanes&z;break}g.timeoutHandle=ym(Hg.bind(null,g,$u,Xh),x);break}Hg(g,$u,Xh);break;case 4:if(Dm(g,P),(P&4194240)===P)break;for(x=g.eventTimes,z=-1;0<P;){var se=31-po(P);K=1<<se,se=x[se],se>z&&(z=se),P&=~K}if(P=z,P=fr()-P,P=(120>P?120:480>P?480:1080>P?1080:1920>P?1920:3e3>P?3e3:4320>P?4320:1960*a4(P/1960))-P,10<P){g.timeoutHandle=ym(Hg.bind(null,g,$u,Xh),P);break}Hg(g,$u,Xh);break;case 5:Hg(g,$u,Xh);break;default:throw Error(n(329))}}}return Fu(g,fr()),g.callbackNode===k?oS.bind(null,g):null}function Tk(g,x){var k=x_;return g.current.memoizedState.isDehydrated&&(Vg(g,x).flags|=256),g=aS(g,x),g!==2&&(x=$u,$u=k,x!==null&&Sk(x)),g}function Sk(g){$u===null?$u=g:$u.push.apply($u,g)}function oU(g){for(var x=g;;){if(x.flags&16384){var k=x.updateQueue;if(k!==null&&(k=k.stores,k!==null))for(var P=0;P<k.length;P++){var z=k[P],K=z.getSnapshot;z=z.value;try{if(!Ye(K(),z))return!1}catch{return!1}}}if(k=x.child,x.subtreeFlags&16384&&k!==null)k.return=x,x=k;else{if(x===g)break;for(;x.sibling===null;){if(x.return===null||x.return===g)return!0;x=x.return}x.sibling.return=x.return,x=x.sibling}}return!0}function Dm(g,x){for(x&=~nS,x&=~b_,g.suspendedLanes|=x,g.pingedLanes&=~x,g=g.expirationTimes;0<x;){var k=31-po(x),P=1<<k;g[k]=-1,x&=~P}}function u4(g){if(jr&6)throw Error(n(327));bv();var x=rt(g,0);if(!(x&1))return Fu(g,fr()),null;var k=aS(g,x);if(g.tag!==0&&k===2){var P=xt(g);P!==0&&(x=P,k=Tk(g,P))}if(k===1)throw k=v_,Vg(g,0),Dm(g,x),Fu(g,fr()),k;if(k===6)throw Error(n(345));return g.finishedWork=g.current.alternate,g.finishedLanes=x,Hg(g,$u,Xh),Fu(g,fr()),null}function Ck(g,x){var k=jr;jr|=1;try{return g(x)}finally{jr=k,jr===0&&(Ug=fr()+500,CT&&_m())}}function zg(g){Rm!==null&&Rm.tag===0&&!(jr&6)&&bv();var x=jr;jr|=1;var k=wc.transition,P=ln;try{if(wc.transition=null,ln=1,g)return g()}finally{ln=P,wc.transition=k,jr=x,!(jr&6)&&_m()}}function Ak(){Sl=vv.current,ns(vv)}function Vg(g,x){g.finishedWork=null,g.finishedLanes=0;var k=g.timeoutHandle;if(k!==-1&&(g.timeoutHandle=-1,Qx(k)),Xs!==null)for(k=Xs.return;k!==null;){var P=k;switch(Pg(P),P.tag){case 1:P=P.type.childContextTypes,P!=null&&ST();break;case 3:Tm(),ns(Pu),ns(_a),LT();break;case 5:MT(P);break;case 4:Tm();break;case 13:ns(os);break;case 19:ns(os);break;case 10:NT(P.type._context);break;case 22:case 23:Ak()}k=k.return}if(jo=g,Xs=g=Rf(g.current,null),ta=Sl=x,vo=0,v_=null,nS=b_=Im=0,$u=x_=null,Mg!==null){for(x=0;x<Mg.length;x++)if(k=Mg[x],P=k.interleaved,P!==null){k.interleaved=null;var z=P.next,K=k.pending;if(K!==null){var se=K.next;K.next=z,P.next=se}k.pending=P}Mg=null}return g}function l4(g,x){do{var k=Xs;try{if(zh(),i_.current=zT,uv){for(var P=gs.memoizedState;P!==null;){var z=P.queue;z!==null&&(z.pending=null),P=P.next}uv=!1}if(Sm=0,yo=$s=gs=null,s_=!1,$g=0,xk.current=null,k===null||k.return===null){vo=1,v_=x,Xs=null;break}e:{var K=g,se=k.return,be=k,Ce=x;if(x=ta,be.flags|=32768,Ce!==null&&typeof Ce=="object"&&typeof Ce.then=="function"){var Xe=Ce,St=be,kt=St.tag;if(!(St.mode&1)&&(kt===0||kt===11||kt===15)){var _t=St.alternate;_t?(St.updateQueue=_t.updateQueue,St.memoizedState=_t.memoizedState,St.lanes=_t.lanes):(St.updateQueue=null,St.memoizedState=null)}var Xt=QO(se);if(Xt!==null){Xt.flags&=-257,ak(Xt,se,be,K,x),Xt.mode&1&&c_(K,Xe,x),x=Xt,Ce=Xe;var rn=x.updateQueue;if(rn===null){var sn=new Set;sn.add(Ce),x.updateQueue=sn}else rn.add(Ce);break e}else{if(!(x&1)){c_(K,Xe,x),Ik();break e}Ce=Error(n(426))}}else if(rs&&be.mode&1){var Cs=QO(se);if(Cs!==null){!(Cs.flags&65536)&&(Cs.flags|=256),ak(Cs,se,be,K,x),kd(jg(Ce,be));break e}}K=Ce=jg(Ce,be),vo!==4&&(vo=2),x_===null?x_=[K]:x_.push(K),K=se;do{switch(K.tag){case 3:K.flags|=65536,x&=-x,K.lanes|=x;var Ve=l_(K,Ce,x);VO(K,Ve);break e;case 1:be=Ce;var Pe=K.type,We=K.stateNode;if(!(K.flags&128)&&(typeof Pe.getDerivedStateFromError=="function"||We!==null&&typeof We.componentDidCatch=="function"&&(km===null||!km.has(We)))){K.flags|=65536,x&=-x,K.lanes|=x;var Mt=GT(K,be,x);VO(K,Mt);break e}}K=K.return}while(K!==null)}d4(k)}catch(on){x=on,Xs===k&&k!==null&&(Xs=k=k.return);continue}break}while(!0)}function c4(){var g=tS.current;return tS.current=zT,g===null?zT:g}function Ik(){(vo===0||vo===3||vo===2)&&(vo=4),jo===null||!(Im&268435455)&&!(b_&268435455)||Dm(jo,ta)}function aS(g,x){var k=jr;jr|=2;var P=c4();(jo!==g||ta!==x)&&(Xh=null,Vg(g,x));do try{aU();break}catch(z){l4(g,z)}while(!0);if(zh(),jr=k,tS.current=P,Xs!==null)throw Error(n(261));return jo=null,ta=0,vo}function aU(){for(;Xs!==null;)f4(Xs)}function uU(){for(;Xs!==null&&!hf();)f4(Xs)}function f4(g){var x=p4(g.alternate,g,Sl);g.memoizedProps=g.pendingProps,x===null?d4(g):Xs=x,xk.current=null}function d4(g){var x=g;do{var k=x.alternate;if(g=x.return,x.flags&32768){if(k=iU(k,x),k!==null){k.flags&=32767,Xs=k;return}if(g!==null)g.flags|=32768,g.subtreeFlags=0,g.deletions=null;else{vo=6,Xs=null;return}}else if(k=rU(k,x,Sl),k!==null){Xs=k;return}if(x=x.sibling,x!==null){Xs=x;return}Xs=x=g}while(x!==null);vo===0&&(vo=5)}function Hg(g,x,k){var P=ln,z=wc.transition;try{wc.transition=null,ln=1,lU(g,x,k,P)}finally{wc.transition=z,ln=P}return null}function lU(g,x,k,P){do bv();while(Rm!==null);if(jr&6)throw Error(n(327));k=g.finishedWork;var z=g.finishedLanes;if(k===null)return null;if(g.finishedWork=null,g.finishedLanes=0,k===g.current)throw Error(n(177));g.callbackNode=null,g.callbackPriority=0;var K=k.lanes|k.childLanes;if(un(g,K),g===jo&&(Xs=jo=null,ta=0),!(k.subtreeFlags&2064)&&!(k.flags&2064)||iS||(iS=!0,m4(qs,function(){return bv(),null})),K=(k.flags&15990)!==0,k.subtreeFlags&15990||K){K=wc.transition,wc.transition=null;var se=ln;ln=1;var be=jr;jr|=4,xk.current=null,sU(g,k),vk(k,g),Z7(kg),ve=!!Kx,kg=Kx=null,g.current=k,eS(k),pf(),jr=be,ln=se,wc.transition=K}else g.current=k;if(iS&&(iS=!1,Rm=g,eu=z),K=g.pendingLanes,K===0&&(km=null),dm(k.stateNode),Fu(g,fr()),x!==null)for(P=g.onRecoverableError,k=0;k<x.length;k++)z=x[k],P(z.value,{componentStack:z.stack,digest:z.digest});if(rS)throw rS=!1,g=wk,wk=null,g;return eu&1&&g.tag!==0&&bv(),K=g.pendingLanes,K&1?g===Ek?__++:(__=0,Ek=g):__=0,_m(),null}function bv(){if(Rm!==null){var g=br(eu),x=wc.transition,k=ln;try{if(wc.transition=null,ln=16>g?16:g,Rm===null)var P=!1;else{if(g=Rm,Rm=null,eu=0,jr&6)throw Error(n(331));var z=jr;for(jr|=4,en=g.current;en!==null;){var K=en,se=K.child;if(en.flags&16){var be=K.deletions;if(be!==null){for(var Ce=0;Ce<be.length;Ce++){var Xe=be[Ce];for(en=Xe;en!==null;){var St=en;switch(St.tag){case 0:case 11:case 15:Kh(8,St,K)}var kt=St.child;if(kt!==null)kt.return=St,en=kt;else for(;en!==null;){St=en;var _t=St.sibling,Xt=St.return;if(r4(St),St===Xe){en=null;break}if(_t!==null){_t.return=Xt,en=_t;break}en=Xt}}}var rn=K.alternate;if(rn!==null){var sn=rn.child;if(sn!==null){rn.child=null;do{var Cs=sn.sibling;sn.sibling=null,sn=Cs}while(sn!==null)}}en=K}}if(K.subtreeFlags&2064&&se!==null)se.return=K,en=se;else e:for(;en!==null;){if(K=en,K.flags&2048)switch(K.tag){case 0:case 11:case 15:Kh(9,K,K.return)}var Ve=K.sibling;if(Ve!==null){Ve.return=K.return,en=Ve;break e}en=K.return}}var Pe=g.current;for(en=Pe;en!==null;){se=en;var We=se.child;if(se.subtreeFlags&2064&&We!==null)We.return=se,en=We;else e:for(se=Pe;en!==null;){if(be=en,be.flags&2048)try{switch(be.tag){case 0:case 11:case 15:y_(9,be)}}catch(on){ys(be,be.return,on)}if(be===se){en=null;break e}var Mt=be.sibling;if(Mt!==null){Mt.return=be.return,en=Mt;break e}en=be.return}}if(jr=z,_m(),ho&&typeof ho.onPostCommitFiberRoot=="function")try{ho.onPostCommitFiberRoot(ac,g)}catch{}P=!0}return P}finally{ln=k,wc.transition=x}}return!1}function uS(g,x,k){x=jg(k,x),x=l_(g,x,1),g=bc(g,x,1),x=tu(),g!==null&&(In(g,1,x),Fu(g,x))}function ys(g,x,k){if(g.tag===3)uS(g,g,k);else for(;x!==null;){if(x.tag===3){uS(x,g,k);break}else if(x.tag===1){var P=x.stateNode;if(typeof x.type.getDerivedStateFromError=="function"||typeof P.componentDidCatch=="function"&&(km===null||!km.has(P))){g=jg(k,g),g=GT(x,g,1),x=bc(x,g,1),g=tu(),x!==null&&(In(x,1,g),Fu(x,g));break}}x=x.return}}function cU(g,x,k){var P=g.pingCache;P!==null&&P.delete(x),x=tu(),g.pingedLanes|=g.suspendedLanes&k,jo===g&&(ta&k)===k&&(vo===4||vo===3&&(ta&130023424)===ta&&500>fr()-_k?Vg(g,0):nS|=k),Fu(g,x)}function h4(g,x){x===0&&(g.mode&1?(x=Be,Be<<=1,!(Be&130023424)&&(Be=4194304)):x=1);var k=tu();g=Vh(g,x),g!==null&&(In(g,x,k),Fu(g,k))}function fU(g){var x=g.memoizedState,k=0;x!==null&&(k=x.retryLane),h4(g,k)}function dU(g,x){var k=0;switch(g.tag){case 13:var P=g.stateNode,z=g.memoizedState;z!==null&&(k=z.retryLane);break;case 19:P=g.stateNode;break;default:throw Error(n(314))}P!==null&&P.delete(x),h4(g,k)}var p4;p4=function(g,x,k){if(g!==null)if(g.memoizedProps!==x.pendingProps||Pu.current)Ja=!0;else{if(!(g.lanes&k)&&!(x.flags&128))return Ja=!1,e4(g,x,k);Ja=!!(g.flags&131072)}else Ja=!1,rs&&x.flags&1048576&&FO(x,IT,x.index);switch(x.lanes=0,x.tag){case 2:var P=x.type;XT(g,x),g=x.pendingProps;var z=rv(x,_a.current);Em(x,k),z=Fg(null,x,P,g,z,k);var K=$T();return x.flags|=1,typeof z=="object"&&z!==null&&typeof z.render=="function"&&z.$$typeof===void 0?(x.tag=1,x.memoizedState=null,x.updateQueue=null,Ou(P)?(K=!0,pc(x)):K=!1,x.memoizedState=z.state!==null&&z.state!==void 0?z.state:null,PT(x),z.updater=qT,x.stateNode=z,z._reactInternals=x,ok(x,P,g,k),x=hk(null,x,P,!0,K,k)):(x.tag=0,rs&&K&&Jx(x),Jo(null,x,z,k),x=x.child),x;case 16:P=x.elementType;e:{switch(XT(g,x),g=x.pendingProps,z=P._init,P=z(P._payload),x.type=P,z=x.tag=pU(P),g=_c(P,g),z){case 0:x=fk(null,x,P,g,k);break e;case 1:x=dk(null,x,P,g,k);break e;case 11:x=JO(null,x,P,g,k);break e;case 14:x=uk(null,x,P,_c(P.type,g),k);break e}throw Error(n(306,P,""))}return x;case 0:return P=x.type,z=x.pendingProps,z=x.elementType===P?z:_c(P,z),fk(g,x,P,z,k);case 1:return P=x.type,z=x.pendingProps,z=x.elementType===P?z:_c(P,z),dk(g,x,P,z,k);case 3:e:{if(ZO(x),g===null)throw Error(n(387));P=x.pendingProps,K=x.memoizedState,z=K.element,zO(g,x),ov(x,P,null,k);var se=x.memoizedState;if(P=se.element,K.isDehydrated)if(K={element:P,isDehydrated:!1,cache:se.cache,pendingSuspenseBoundaries:se.pendingSuspenseBoundaries,transitions:se.transitions},x.updateQueue.baseState=K,x.memoizedState=K,x.flags&256){z=jg(Error(n(423)),x),x=Od(g,x,P,k,z);break e}else if(P!==z){z=jg(Error(n(424)),x),x=Od(g,x,P,k,z);break e}else for(wl=vm(x.stateNode.containerInfo.firstChild),Ea=x,rs=!0,Ef=null,k=RT(x,null,P,k),x.child=k;k;)k.flags=k.flags&-3|4096,k=k.sibling;else{if(Id(),P===z){x=Sf(g,x,k);break e}Jo(g,x,P,k)}x=x.child}return x;case 5:return GI(x),g===null&&Mu(x),P=x.type,z=x.pendingProps,K=g!==null?g.memoizedProps:null,se=z.children,Xx(P,z)?se=null:K!==null&&Xx(P,K)&&(x.flags|=32),ck(g,x),Jo(g,x,se,k),x.child;case 6:return g===null&&Mu(x),null;case 13:return KT(g,x,k);case 4:return WI(x,x.stateNode.containerInfo),P=x.pendingProps,g===null?x.child=Ss(x,null,P,k):Jo(g,x,P,k),x.child;case 11:return P=x.type,z=x.pendingProps,z=x.elementType===P?z:_c(P,z),JO(g,x,P,z,k);case 7:return Jo(g,x,x.pendingProps,k),x.child;case 8:return Jo(g,x,x.pendingProps.children,k),x.child;case 12:return Jo(g,x,x.pendingProps.children,k),x.child;case 10:e:{if(P=x.type._context,z=x.pendingProps,K=x.memoizedProps,se=z.value,ji(t_,P._currentValue),P._currentValue=se,K!==null)if(Ye(K.value,se)){if(K.children===z.children&&!Pu.current){x=Sf(g,x,k);break e}}else for(K=x.child,K!==null&&(K.return=x);K!==null;){var be=K.dependencies;if(be!==null){se=K.child;for(var Ce=be.firstContext;Ce!==null;){if(Ce.context===P){if(K.tag===1){Ce=Hh(-1,k&-k),Ce.tag=2;var Xe=K.updateQueue;if(Xe!==null){Xe=Xe.shared;var St=Xe.pending;St===null?Ce.next=Ce:(Ce.next=St.next,St.next=Ce),Xe.pending=Ce}}K.lanes|=k,Ce=K.alternate,Ce!==null&&(Ce.lanes|=k),Qo(K.return,k,x),be.lanes|=k;break}Ce=Ce.next}}else if(K.tag===10)se=K.type===x.type?null:K.child;else if(K.tag===18){if(se=K.return,se===null)throw Error(n(341));se.lanes|=k,be=se.alternate,be!==null&&(be.lanes|=k),Qo(se,k,x),se=K.sibling}else se=K.child;if(se!==null)se.return=K;else for(se=K;se!==null;){if(se===x){se=null;break}if(K=se.sibling,K!==null){K.return=se.return,se=K;break}se=se.return}K=se}Jo(g,x,z.children,k),x=x.child}return x;case 9:return z=x.type,P=x.pendingProps.children,Em(x,k),z=yc(z),P=P(z),x.flags|=1,Jo(g,x,P,k),x.child;case 14:return P=x.type,z=_c(P,x.pendingProps),z=_c(P.type,z),uk(g,x,P,z,k);case 15:return Pd(g,x,x.type,x.pendingProps,k);case 17:return P=x.type,z=x.pendingProps,z=x.elementType===P?z:_c(P,z),XT(g,x),x.tag=1,Ou(P)?(g=!0,pc(x)):g=!1,Em(x,k),Bg(x,P,z),ok(x,P,z,k),hk(null,x,P,!0,g,k);case 19:return Cm(g,x,k);case 22:return lk(g,x,k)}throw Error(n(156,x.tag))};function m4(g,x){return vd(g,x)}function hU(g,x,k,P){this.tag=g,this.key=k,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=x,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=P,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ec(g,x,k,P){return new hU(g,x,k,P)}function lS(g){return g=g.prototype,!(!g||!g.isReactComponent)}function pU(g){if(typeof g=="function")return lS(g)?1:0;if(g!=null){if(g=g.$$typeof,g===U)return 11;if(g===Q)return 14}return 2}function Rf(g,x){var k=g.alternate;return k===null?(k=Ec(g.tag,x,g.key,g.mode),k.elementType=g.elementType,k.type=g.type,k.stateNode=g.stateNode,k.alternate=g,g.alternate=k):(k.pendingProps=x,k.type=g.type,k.flags=0,k.subtreeFlags=0,k.deletions=null),k.flags=g.flags&14680064,k.childLanes=g.childLanes,k.lanes=g.lanes,k.child=g.child,k.memoizedProps=g.memoizedProps,k.memoizedState=g.memoizedState,k.updateQueue=g.updateQueue,x=g.dependencies,k.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext},k.sibling=g.sibling,k.index=g.index,k.ref=g.ref,k}function cS(g,x,k,P,z,K){var se=2;if(P=g,typeof g=="function")lS(g)&&(se=1);else if(typeof g=="string")se=5;else e:switch(g){case I:return qg(k.children,z,K,x);case R:se=8,z|=8;break;case D:return g=Ec(12,k,x,z|2),g.elementType=D,g.lanes=K,g;case F:return g=Ec(13,k,x,z),g.elementType=F,g.lanes=K,g;case H:return g=Ec(19,k,x,z),g.elementType=H,g.lanes=K,g;case ne:return fS(k,z,K,x);default:if(typeof g=="object"&&g!==null)switch(g.$$typeof){case M:se=10;break e;case $:se=9;break e;case U:se=11;break e;case Q:se=14;break e;case J:se=16,P=null;break e}throw Error(n(130,g==null?g:typeof g,""))}return x=Ec(se,k,x,z),x.elementType=g,x.type=P,x.lanes=K,x}function qg(g,x,k,P){return g=Ec(7,g,P,x),g.lanes=k,g}function fS(g,x,k,P){return g=Ec(22,g,P,x),g.elementType=ne,g.lanes=k,g.stateNode={isHidden:!1},g}function kk(g,x,k){return g=Ec(6,g,null,x),g.lanes=k,g}function Rk(g,x,k){return x=Ec(4,g.children!==null?g.children:[],g.key,x),x.lanes=k,x.stateNode={containerInfo:g.containerInfo,pendingChildren:null,implementation:g.implementation},x}function mU(g,x,k,P,z){this.tag=x,this.containerInfo=g,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qt(0),this.expirationTimes=qt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qt(0),this.identifierPrefix=P,this.onRecoverableError=z,this.mutableSourceEagerHydrationData=null}function Nk(g,x,k,P,z,K,se,be,Ce){return g=new mU(g,x,k,be,Ce),x===1?(x=1,K===!0&&(x|=8)):x=0,K=Ec(3,null,null,x),g.current=K,K.stateNode=g,K.memoizedState={element:P,isDehydrated:k,cache:null,transitions:null,pendingSuspenseBoundaries:null},PT(K),g}function gU(g,x,k){var P=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:A,key:P==null?null:""+P,children:g,containerInfo:x,implementation:k}}function g4(g){if(!g)return xm;g=g._reactInternals;e:{if(ps(g)!==g||g.tag!==1)throw Error(n(170));var x=g;do{switch(x.tag){case 3:x=x.stateNode.context;break e;case 1:if(Ou(x.type)){x=x.stateNode.__reactInternalMemoizedMergedChildContext;break e}}x=x.return}while(x!==null);throw Error(n(171))}if(g.tag===1){var k=g.type;if(Ou(k))return MO(g,k,x)}return x}function y4(g,x,k,P,z,K,se,be,Ce){return g=Nk(k,P,!0,g,z,K,se,be,Ce),g.context=g4(null),k=g.current,P=tu(),z=Nm(k),K=Hh(P,z),K.callback=x??null,bc(k,K,z),g.current.lanes=z,In(g,z,P),Fu(g,P),g}function dS(g,x,k,P){var z=x.current,K=tu(),se=Nm(z);return k=g4(k),x.context===null?x.context=k:x.pendingContext=k,x=Hh(K,se),x.payload={element:g},P=P===void 0?null:P,P!==null&&(x.callback=P),g=bc(z,x,se),g!==null&&(kf(g,z,se,K),OT(g,z,se)),se}function hS(g){if(g=g.current,!g.child)return null;switch(g.child.tag){case 5:return g.child.stateNode;default:return g.child.stateNode}}function v4(g,x){if(g=g.memoizedState,g!==null&&g.dehydrated!==null){var k=g.retryLane;g.retryLane=k!==0&&k<x?k:x}}function Dk(g,x){v4(g,x),(g=g.alternate)&&v4(g,x)}var b4=typeof reportError=="function"?reportError:function(g){console.error(g)};function Pk(g){this._internalRoot=g}E_.prototype.render=Pk.prototype.render=function(g){var x=this._internalRoot;if(x===null)throw Error(n(409));dS(g,x,null,null)},E_.prototype.unmount=Pk.prototype.unmount=function(){var g=this._internalRoot;if(g!==null){this._internalRoot=null;var x=g.containerInfo;zg(function(){dS(null,g,null,null)}),x[_l]=null}};function E_(g){this._internalRoot=g}E_.prototype.unstable_scheduleHydration=function(g){if(g){var x=Ph();g={blockedOn:null,target:g,priority:x};for(var k=0;k<ku.length&&x!==0&&x<ku[k].priority;k++);ku.splice(k,0,g),k===0&&xg(g)}};function pS(g){return!(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)}function mS(g){return!(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11&&(g.nodeType!==8||g.nodeValue!==" react-mount-point-unstable "))}function x4(){}function yU(g,x,k,P,z){if(z){if(typeof P=="function"){var K=P;P=function(){var Xe=hS(se);K.call(Xe)}}var se=y4(x,P,g,0,null,!1,!1,"",x4);return g._reactRootContainer=se,g[_l]=se.current,gm(g.nodeType===8?g.parentNode:g),zg(),se}for(;z=g.lastChild;)g.removeChild(z);if(typeof P=="function"){var be=P;P=function(){var Xe=hS(Ce);be.call(Xe)}}var Ce=Nk(g,0,!1,null,null,!1,!1,"",x4);return g._reactRootContainer=Ce,g[_l]=Ce.current,gm(g.nodeType===8?g.parentNode:g),zg(function(){dS(x,Ce,k,P)}),Ce}function gS(g,x,k,P,z){var K=k._reactRootContainer;if(K){var se=K;if(typeof z=="function"){var be=z;z=function(){var Ce=hS(se);be.call(Ce)}}dS(x,se,g,z)}else se=yU(k,x,g,z,P);return hS(se)}Ws=function(g){switch(g.tag){case 3:var x=g.stateNode;if(x.current.memoizedState.isDehydrated){var k=Re(x.pendingLanes);k!==0&&(nr(x,k|1),Fu(x,fr()),!(jr&6)&&(Ug=fr()+500,_m()))}break;case 13:zg(function(){var P=Vh(g,1);if(P!==null){var z=tu();kf(P,g,1,z)}}),Dk(g,1)}},Ga=function(g){if(g.tag===13){var x=Vh(g,134217728);if(x!==null){var k=tu();kf(x,g,134217728,k)}Dk(g,134217728)}},uc=function(g){if(g.tag===13){var x=Nm(g),k=Vh(g,x);if(k!==null){var P=tu();kf(k,g,x,P)}Dk(g,x)}},Ph=function(){return ln},mf=function(g,x){var k=ln;try{return ln=g,x()}finally{ln=k}},Qi=function(g,x,k){switch(x){case"input":if(Me(g,k),x=k.name,k.type==="radio"&&x!=null){for(k=g;k.parentNode;)k=k.parentNode;for(k=k.querySelectorAll("input[name="+JSON.stringify(""+x)+'][type="radio"]'),x=0;x<k.length;x++){var P=k[x];if(P!==g&&P.form===g.form){var z=TT(P);if(!z)throw Error(n(90));he(P),Me(P,z)}}}break;case"textarea":ft(g,k);break;case"select":x=k.value,x!=null&&Tt(g,!!k.multiple,x,!1)}},ga=Ck,Iu=zg;var yS={usingClientEntryPoint:!1,Events:[xa,ir,TT,Oo,ic,Ck]},T_={findFiberByHostInstance:Td,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vU={bundleType:T_.bundleType,version:T_.version,rendererPackageName:T_.rendererPackageName,rendererConfig:T_.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(g){return g=Rh(g),g===null?null:g.stateNode},findFiberByHostInstance:T_.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vS=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vS.isDisabled&&vS.supportsFiber)try{ac=vS.inject(vU),ho=vS}catch{}}return Ac.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yS,Ac.createPortal=function(g,x){var k=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pS(x))throw Error(n(200));return gU(g,x,null,k)},Ac.createRoot=function(g,x){if(!pS(g))throw Error(n(299));var k=!1,P="",z=b4;return x!=null&&(x.unstable_strictMode===!0&&(k=!0),x.identifierPrefix!==void 0&&(P=x.identifierPrefix),x.onRecoverableError!==void 0&&(z=x.onRecoverableError)),x=Nk(g,1,!1,null,null,k,!1,P,z),g[_l]=x.current,gm(g.nodeType===8?g.parentNode:g),new Pk(x)},Ac.findDOMNode=function(g){if(g==null)return null;if(g.nodeType===1)return g;var x=g._reactInternals;if(x===void 0)throw typeof g.render=="function"?Error(n(188)):(g=Object.keys(g).join(","),Error(n(268,g)));return g=Rh(x),g=g===null?null:g.stateNode,g},Ac.flushSync=function(g){return zg(g)},Ac.hydrate=function(g,x,k){if(!mS(x))throw Error(n(200));return gS(null,g,x,!0,k)},Ac.hydrateRoot=function(g,x,k){if(!pS(g))throw Error(n(405));var P=k!=null&&k.hydratedSources||null,z=!1,K="",se=b4;if(k!=null&&(k.unstable_strictMode===!0&&(z=!0),k.identifierPrefix!==void 0&&(K=k.identifierPrefix),k.onRecoverableError!==void 0&&(se=k.onRecoverableError)),x=y4(x,null,g,1,k??null,z,!1,K,se),g[_l]=x.current,gm(g),P)for(g=0;g<P.length;g++)k=P[g],z=k._getVersion,z=z(k._source),x.mutableSourceEagerHydrationData==null?x.mutableSourceEagerHydrationData=[k,z]:x.mutableSourceEagerHydrationData.push(k,z);return new E_(x)},Ac.render=function(g,x,k){if(!mS(x))throw Error(n(200));return gS(null,g,x,!1,k)},Ac.unmountComponentAtNode=function(g){if(!mS(g))throw Error(n(40));return g._reactRootContainer?(zg(function(){gS(null,null,g,!1,function(){g._reactRootContainer=null,g[_l]=null})}),!0):!1},Ac.unstable_batchedUpdates=Ck,Ac.unstable_renderSubtreeIntoContainer=function(g,x,k,P){if(!mS(k))throw Error(n(200));if(g==null||g._reactInternals===void 0)throw Error(n(38));return gS(g,x,k,!1,P)},Ac.version="18.3.1-next-f1338f8080-20240426",Ac}var bue;function $xe(){if(bue)return PU.exports;bue=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),PU.exports=J7e(),PU.exports}var xue;function Z7e(){if(xue)return T4;xue=1;var e=$xe();return T4.createRoot=e.createRoot,T4.hydrateRoot=e.hydrateRoot,T4}var eUe=Z7e();const tUe=hh(eUe);var Qm=function(){return Qm=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Qm.apply(this,arguments)};function RP(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function hy(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function _ue(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function nUe(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Hr(e){return this instanceof Hr?(this.v=e,this):new Hr(e)}function lw(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,f)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(y,v){s.push([h,m,y,v])>1||u(h,m)})},p&&(i[h]=p(i[h])))}function u(h,p){try{l(r[h](p))}catch(m){d(s[0][3],m)}}function l(h){h.value instanceof Hr?Promise.resolve(h.value.v).then(c,f):d(s[0][2],h)}function c(h){u("next",h)}function f(h){u("throw",h)}function d(h,p){h(p),s.shift(),s.length&&u(s[0][0],s[0][1])}}function LU(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Hr(e[i](o)),done:!1}:s?s(o):o}:s}}function wN(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof _ue=="function"?_ue(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var BM="right-scroll-bar-position",jM="width-before-scroll-bar",rUe="with-scroll-bars-hidden",iUe="--removed-body-scroll-bar-size";function $U(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function sUe(e,t){var n=O.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var oUe=typeof window<"u"?O.useLayoutEffect:O.useEffect,wue=new WeakMap;function aUe(e,t){var n=sUe(null,function(r){return e.forEach(function(i){return $U(i,r)})});return oUe(function(){var r=wue.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||$U(a,null)}),s.forEach(function(a){i.has(a)||$U(a,o)})}wue.set(n,e)},[e]),n}function uUe(e){return e}function lUe(e,t){t===void 0&&(t=uUe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function cUe(e){e===void 0&&(e={});var t=lUe(null);return t.options=Qm({async:!0,ssr:!1},e),t}var Fxe=function(e){var t=e.sideCar,n=RP(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return O.createElement(r,Qm({},n))};Fxe.isSideCarExport=!0;function fUe(e,t){return e.useMedium(t),Fxe}var Bxe=cUe(),FU=function(){},F8=O.forwardRef(function(e,t){var n=O.useRef(null),r=O.useState({onScrollCapture:FU,onWheelCapture:FU,onTouchMoveCapture:FU}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,y=e.as,v=y===void 0?"div":y,b=e.gapMode,w=RP(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=d,T=aUe([n,t]),A=Qm(Qm({},w),i);return O.createElement(O.Fragment,null,c&&O.createElement(E,{sideCar:Bxe,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:b}),o?O.cloneElement(O.Children.only(a),Qm(Qm({},A),{ref:T})):O.createElement(v,Qm({},A,{className:u,ref:T}),a))});F8.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};F8.classNames={fullWidth:jM,zeroRight:BM};var jxe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function dUe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=jxe();return t&&e.setAttribute("nonce",t),e}function hUe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function pUe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var mUe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=dUe())&&(hUe(t,n),pUe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},gUe=function(){var e=mUe();return function(t,n){O.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},yUe=function(){var e=gUe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},vUe={left:0,top:0,right:0,gap:0},BU=function(e){return parseInt(e||"",10)||0},bUe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[BU(n),BU(r),BU(i)]},xUe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return vUe;var t=bUe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},_Ue=yUe(),S2="data-scroll-locked",wUe=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(rUe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(S2,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(BM,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(jM,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(BM," .").concat(BM,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(jM," .").concat(jM,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(S2,`] {
    `).concat(iUe,": ").concat(a,`px;
  }
`)},Eue=function(){var e=parseInt(document.body.getAttribute(S2)||"0",10);return isFinite(e)?e:0},EUe=function(){O.useEffect(function(){return document.body.setAttribute(S2,(Eue()+1).toString()),function(){var e=Eue()-1;e<=0?document.body.removeAttribute(S2):document.body.setAttribute(S2,e.toString())}},[])},TUe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;EUe();var s=O.useMemo(function(){return xUe(i)},[i]);return O.createElement(_Ue,{styles:wUe(s,!t,i,n?"":"!important")})};function SUe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=jxe();return t&&e.setAttribute("nonce",t),e}function CUe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function AUe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var IUe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=SUe())&&(CUe(t,n),AUe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},kUe=function(){var e=IUe();return function(t,n){O.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},RUe=function(){var e=kUe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},Lq=!1;if(typeof window<"u")try{var S4=Object.defineProperty({},"passive",{get:function(){return Lq=!0,!0}});window.addEventListener("test",S4,S4),window.removeEventListener("test",S4,S4)}catch{Lq=!1}var _S=Lq?{passive:!1}:!1,NUe=function(e){return e.tagName==="TEXTAREA"},Uxe=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!NUe(e)&&n[t]==="visible")},DUe=function(e){return Uxe(e,"overflowY")},PUe=function(e){return Uxe(e,"overflowX")},Tue=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=zxe(e,r);if(i){var s=Vxe(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},OUe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},MUe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},zxe=function(e,t){return e==="v"?DUe(t):PUe(t)},Vxe=function(e,t){return e==="v"?OUe(t):MUe(t)},LUe=function(e,t){return e==="h"&&t==="rtl"?-1:1},$Ue=function(e,t,n,r,i){var s=LUe(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,f=0,d=0;do{var h=Vxe(e,a),p=h[0],m=h[1],y=h[2],v=m-y-s*p;(p||v)&&zxe(e,a)&&(f+=v,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&Math.abs(f)<1||!c&&Math.abs(d)<1)&&(l=!0),l},C4=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Sue=function(e){return[e.deltaX,e.deltaY]},Cue=function(e){return e&&"current"in e?e.current:e},FUe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},BUe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},jUe=0,wS=[];function UUe(e){var t=O.useRef([]),n=O.useRef([0,0]),r=O.useRef(),i=O.useState(jUe++)[0],s=O.useState(RUe)[0],o=O.useRef(e);O.useEffect(function(){o.current=e},[e]),O.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=nUe([e.lockRef.current],(e.shards||[]).map(Cue),!0).filter(Boolean);return m.forEach(function(y){return y.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=O.useCallback(function(m,y){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var v=C4(m),b=n.current,w="deltaX"in m?m.deltaX:b[0]-v[0],E="deltaY"in m?m.deltaY:b[1]-v[1],T,A=m.target,I=Math.abs(w)>Math.abs(E)?"h":"v";if("touches"in m&&I==="h"&&A.type==="range")return!1;var R=Tue(I,A);if(!R)return!0;if(R?T=I:(T=I==="v"?"h":"v",R=Tue(I,A)),!R)return!1;if(!r.current&&"changedTouches"in m&&(w||E)&&(r.current=T),!T)return!0;var D=r.current||T;return $Ue(D,y,m,D==="h"?w:E)},[]),u=O.useCallback(function(m){var y=m;if(!(!wS.length||wS[wS.length-1]!==s)){var v="deltaY"in y?Sue(y):C4(y),b=t.current.filter(function(T){return T.name===y.type&&(T.target===y.target||y.target===T.shadowParent)&&FUe(T.delta,v)})[0];if(b&&b.should){y.cancelable&&y.preventDefault();return}if(!b){var w=(o.current.shards||[]).map(Cue).filter(Boolean).filter(function(T){return T.contains(y.target)}),E=w.length>0?a(y,w[0]):!o.current.noIsolation;E&&y.cancelable&&y.preventDefault()}}},[]),l=O.useCallback(function(m,y,v,b){var w={name:m,delta:y,target:v,should:b,shadowParent:zUe(v)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(E){return E!==w})},1)},[]),c=O.useCallback(function(m){n.current=C4(m),r.current=void 0},[]),f=O.useCallback(function(m){l(m.type,Sue(m),m.target,a(m,e.lockRef.current))},[]),d=O.useCallback(function(m){l(m.type,C4(m),m.target,a(m,e.lockRef.current))},[]);O.useEffect(function(){return wS.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,_S),document.addEventListener("touchmove",u,_S),document.addEventListener("touchstart",c,_S),function(){wS=wS.filter(function(m){return m!==s}),document.removeEventListener("wheel",u,_S),document.removeEventListener("touchmove",u,_S),document.removeEventListener("touchstart",c,_S)}},[]);var h=e.removeScrollBar,p=e.inert;return O.createElement(O.Fragment,null,p?O.createElement(s,{styles:BUe(i)}):null,h?O.createElement(TUe,{gapMode:e.gapMode}):null)}function zUe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const VUe=fUe(Bxe,UUe);var tC=O.forwardRef(function(e,t){return O.createElement(F8,Qm({},e,{ref:t,sideCar:VUe}))});tC.classNames=F8.classNames;function ss(e){return Object.keys(e)}function jU(e){return e&&typeof e=="object"&&!Array.isArray(e)}function RX(e,t){const n={...e},r=t;return jU(e)&&jU(t)&&Object.keys(t).forEach(i=>{jU(r[i])&&i in e?n[i]=RX(n[i],r[i]):n[i]=r[i]}),n}function HUe(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function qUe(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function oD(e){const t=qUe(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function UU(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function Hxe(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?UU(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?UU(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?UU(s):s}}return r}return n}const Ke=Hxe("rem",{shouldScale:!0}),k$=Hxe("em");function ox(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function qxe(e){if(typeof e=="number")return!0;if(typeof e=="string"){if(e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!=="")return!0;const t=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return e.trim().split(/\s+/).every(r=>t.test(r))}return!1}function ax(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==O.Fragment:!1}function Su(e){const t=O.createContext(null);return[({children:i,value:s})=>S.jsx(t.Provider,{value:s,children:i}),()=>{const i=O.useContext(t);if(i===null)throw new Error(e);return i}]}function ux(e=null){const t=O.createContext(e);return[({children:i,value:s})=>S.jsx(t.Provider,{value:s,children:i}),()=>O.useContext(t)]}function R$(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function N$(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function WUe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function GUe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function YUe(e,t,n){return N$(e,n)===N$(t,n)}function NX({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=N$(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>YUe(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=GUe(l,u,r),f=WUe(l,u,r),d=s==="rtl"?f:c,h=s==="rtl"?c:f;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const KUe={app:100,modal:200,popover:300,overlay:400,max:9999};function uf(e){return KUe[e]}const $q=()=>{};function XUe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||$q:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function Kn(e,t="size",n=!0){if(e!==void 0)return qxe(e)?n?Ke(e):e:`var(--${t}-${e})`}function qo(e){return Kn(e,"mantine-spacing")}function Ti(e){return e===void 0?"var(--mantine-radius-default)":Kn(e,"mantine-radius")}function Ba(e){return Kn(e,"mantine-font-size")}function Wxe(e){return Kn(e,"mantine-line-height",!1)}function DX(e){if(e)return Kn(e,"mantine-shadow",!1)}function c0(e,t){return n=>{e==null||e(n),t==null||t(n)}}function PX(e,t){return e in t?oD(t[e]):oD(e)}function aD(e,t){const n=e.map(r=>({value:r,px:PX(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function bp(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function QUe(e,t,n){var r;return n?Array.from(((r=N$(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function JUe(){const[e,t]=O.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function Jm(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function C2(e="mantine-"){return`${e}${Math.random().toString(36).slice(2,11)}`}function jv(e){const t=O.useRef(e);return O.useEffect(()=>{t.current=e}),O.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}const ZUe=()=>{};function B8(e,t){const n=typeof t=="number"?t:t.delay,r=typeof t=="number"?!1:t.flushOnUnmount,i=jv(e),s=O.useRef(0),o=Object.assign(O.useCallback((...a)=>{window.clearTimeout(s.current);const u=()=>{s.current!==0&&(s.current=0,i(...a))};o.flush=u,s.current=window.setTimeout(u,n)},[i,n]),{flush:ZUe});return O.useEffect(()=>()=>{window.clearTimeout(s.current),r&&o.flush()},[o,r]),o}const Aue=["mousedown","touchstart"];function eze(e,t,n){const r=O.useRef(null);return O.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||Aue).forEach(s=>document.addEventListener(s,i)),()=>{(t||Aue).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function tze(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function nze(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function rze(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=O.useState(n?t:nze(e)),s=O.useRef(null);return O.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),tze(s.current,o=>i(o.matches))},[e]),r}const wE=typeof document<"u"?O.useLayoutEffect:O.useEffect;function D0(e,t){const n=O.useRef(!1);O.useEffect(()=>()=>{n.current=!1},[]),O.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function Gxe({opened:e,shouldReturnFocus:t=!0}){const n=O.useRef(null),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return D0(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}const ize=/input|select|textarea|button|object/,Yxe="a, input, select, textarea, button, object, [tabindex]";function sze(e){return e.style.display==="none"}function oze(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(sze(n))return!1;n=n.parentNode}return!0}function Kxe(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function Fq(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(Kxe(e));return(ize.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&oze(e)}function Xxe(e){const t=Kxe(e);return(Number.isNaN(t)||t>=0)&&Fq(e)}function aze(e){return Array.from(e.querySelectorAll(Yxe)).filter(Xxe)}function uze(e,t){const n=aze(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function lze(e=!0){const t=O.useRef(null),n=i=>{let s=i.querySelector("[data-autofocus]");if(!s){const o=Array.from(i.querySelectorAll(Yxe));s=o.find(Xxe)||o.find(Fq)||null,!s&&Fq(i)&&(s=i)}s&&s.focus({preventScroll:!0})},r=O.useCallback(i=>{e&&i!==null&&t.current!==i&&(i?(setTimeout(()=>{i.getRootNode()&&n(i)}),t.current=i):t.current=null)},[e]);return O.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>n(t.current));const i=s=>{s.key==="Tab"&&t.current&&uze(t.current,s)};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[e]),r}const cze=e=>(e+1)%1e6;function fze(){const[,e]=O.useReducer(cze,0);return e}const dze=li.useId||(()=>{});function hze(){const e=dze();return e?`mantine-${e.replace(/:/g,"")}`:""}function pl(e){const t=hze(),[n,r]=O.useState(t);return wE(()=>{r(C2())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function Qxe(e,t,n){O.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function D$(e,t){if(typeof e=="function")return e(t);typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function Jxe(...e){const t=new Map;return n=>{if(e.forEach(r=>{const i=D$(r,n);i&&t.set(r,i)}),t.size>0)return()=>{e.forEach(r=>{const i=t.get(r);i?i():D$(r,null)}),t.clear()}}}function Ro(...e){return O.useCallback(Jxe(...e),e)}function Zxe(e,t,n="ltr"){const r=O.useRef(null),i=O.useRef(!1),s=O.useRef(!1),o=O.useRef(0),[a,u]=O.useState(!1);return O.useEffect(()=>{i.current=!0},[]),O.useEffect(()=>{var b,w;const l=({x:E,y:T})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const A=r.current.getBoundingClientRect();if(A.width&&A.height){const I=Jm((E-A.left)/A.width,0,1);e({x:n==="ltr"?I:1-I,y:Jm((T-A.top)/A.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",v),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",v),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=E=>{d(),E.preventDefault(),m(E)},m=E=>l({x:E.clientX,y:E.clientY}),y=E=>{E.cancelable&&E.preventDefault(),d(),v(E)},v=E=>{E.cancelable&&E.preventDefault(),l({x:E.changedTouches[0].clientX,y:E.changedTouches[0].clientY})};return(b=r.current)==null||b.addEventListener("mousedown",p),(w=r.current)==null||w.addEventListener("touchstart",y,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",y))}},[n,e]),{ref:r,active:a}}function Wo({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=O.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function j8(e,t){return rze("(prefers-reduced-motion: reduce)",e,t)}const pze={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function Ny(e){const t=O.useRef(0),n=O.useRef(null),[r,i]=O.useState(pze),s=O.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return O.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function mze(e){const[t,{width:n,height:r}]=Ny(e);return{ref:t,width:n,height:r}}function gze(e){const t=e.toLowerCase().split("+").map(s=>s.trim()),n={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift"),plus:t.includes("[plus]")},r=["alt","ctrl","meta","shift","mod"],i=t.find(s=>!r.includes(s));return{...n,key:i==="[plus]"?"+":i}}function yze(e,t){const{alt:n,ctrl:r,meta:i,mod:s,shift:o,key:a}=e,{altKey:u,ctrlKey:l,metaKey:c,shiftKey:f,key:d}=t;if(n!==u)return!1;if(s){if(!l&&!c)return!1}else if(r!==l||i!==c)return!1;return o!==f?!1:!!(a&&(d.toLowerCase()===a.toLowerCase()||t.code.replace("Key","").toLowerCase()===a.toLowerCase()))}function vze(e){return t=>yze(gze(e),t)}function bze(e){return t=>{const n="nativeEvent"in t?t.nativeEvent:t;e.forEach(([r,i,s={preventDefault:!0}])=>{vze(r)(n)&&(s.preventDefault&&t.preventDefault(),i(n))})}}function OX(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=O.useState(e),o=O.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=O.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=O.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function xze(e,t,n={autoInvoke:!1}){const r=O.useRef(null),i=O.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),s=O.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return O.useEffect(()=>(n.autoInvoke&&i(),s),[s,i]),{start:i,clear:s}}function _ze(e){const t=O.useRef(void 0);return O.useEffect(()=>{t.current=e},[e]),t.current}function wze(e,t,n){const r=O.useRef(null),i=O.useRef(null);return O.useEffect(()=>{const s=typeof n=="function"?n():n;return(s||i.current)&&(r.current=new MutationObserver(e),r.current.observe(s||i.current,t)),()=>{var o;(o=r.current)==null||o.disconnect()}},[e,t]),i}function Eze(){const[e,t]=O.useState(!1);return O.useEffect(()=>t(!0),[]),e}function Tze(e,t){const n=jv(e),r=O.useRef(null),i=O.useRef(null),s=O.useRef(!0),o=O.useRef(t),a=O.useRef(-1),u=()=>window.clearTimeout(a.current),l=O.useCallback((...d)=>{n(...d),r.current=d,i.current=d,s.current=!1},[n]),c=O.useCallback(()=>{r.current&&r.current!==i.current?(l(...r.current),a.current=window.setTimeout(c,o.current)):s.current=!0},[l]),f=O.useCallback((...d)=>{s.current?(l(...d),a.current=window.setTimeout(c,o.current)):r.current=d},[l,c]);return O.useEffect(()=>{o.current=t},[t]),[f,u]}function Sze(e,t){const[n,r]=O.useState(e),[i,s]=Tze(r,t);return O.useEffect(()=>s,[]),[n,i]}function Cze(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function Aze(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});wE(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>Cze(`${e}:${String(r)}`,i[0])}return[t,n]}var Ize={};function e_e(){return typeof process<"u"&&Ize?"production":"development"}function Bq(e,t){return t.length===0?e:t.reduce((n,r)=>Math.abs(r-e)<Math.abs(n-e)?r:n)}function U8(e){var n;const t=li.version;return typeof li.version!="string"||t.startsWith("18.")?e==null?void 0:e.ref:(n=e==null?void 0:e.props)==null?void 0:n.ref}function t_e(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=t_e(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Co(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=t_e(e))&&(r&&(r+=" "),r+=t);return r}const kze={};function Rze(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=Co(t[r],i):t[r]=i})}),t}function z8({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||kze);return Rze(s)}function P$({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const n_e=O.createContext(null);function lx(){const e=O.useContext(n_e);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function Nze(){return lx().cssVariablesResolver}function Dze(){return lx().classNamesPrefix}function MX(){return lx().getStyleNonce}function Pze(){return lx().withStaticClasses}function Oze(){return lx().headless}function Mze(){var e;return(e=lx().stylesTransform)==null?void 0:e.sx}function Lze(){var e;return(e=lx().stylesTransform)==null?void 0:e.styles}function $ze(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function Fze(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function Bze(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function jze(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:o||1}}function LX(e){return $ze(e)?Fze(e):e.startsWith("rgb")?Bze(e):e.startsWith("hsl")?jze(e):{r:0,g:0,b:0,a:1}}function A4(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=LX(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function uD(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function zU(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function Uze(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function zze(e){if(e.startsWith("oklch("))return(Uze(e)||0)/100;const{r:t,g:n,b:r}=LX(e),i=t/255,s=n/255,o=r/255,a=zU(i),u=zU(s),l=zU(o);return .2126*a+.7152*u+.0722*l}function Lk(e,t=.179){return e.startsWith("var(")?!1:zze(e)>t}function tg({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:Lk(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:Lk(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:Lk(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][uD(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:Lk(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:Lk(e,t.luminanceThreshold),shade:s,variable:void 0}}function Hi(e,t){const n=tg({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function jq(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=Hi(n.from,t),i=Hi(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function Um(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=LX(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const ES=Um,Vze=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=tg({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${Ke(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${Ke(1)} solid transparent`}:{background:e,hover:A4(e,.1),color:a,border:`${Ke(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Ke(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:Um(a,.1),hover:Um(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ke(1)} solid transparent`}}return{background:Um(e,.1),hover:Um(e,.12),color:e,border:`${Ke(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${Ke(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:Um(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Ke(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:Um(e,.05),color:e,border:`${Ke(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Ke(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:Um(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ke(1)} solid transparent`}}return{background:"transparent",hover:Um(e,.12),color:e,border:`${Ke(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${Ke(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ke(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${Ke(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:A4(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${Ke(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:A4(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Ke(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:A4(t.white,.01),color:e,border:`${Ke(1)} solid transparent`}:n==="gradient"?{background:jq(r,t),hover:jq(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Ke(1)} solid var(--mantine-color-default-border)`}:{}},Hze={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},Iue="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",$X={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:Hze,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:Vze,autoContrast:!1,luminanceThreshold:.3,fontFamily:Iue,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:Iue,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Ke(34),lineHeight:"1.3"},h2:{fontSize:Ke(26),lineHeight:"1.35"},h3:{fontSize:Ke(22),lineHeight:"1.4"},h4:{fontSize:Ke(18),lineHeight:"1.45"},h5:{fontSize:Ke(16),lineHeight:"1.5"},h6:{fontSize:Ke(14),lineHeight:"1.5"}}},fontSizes:{xs:Ke(12),sm:Ke(14),md:Ke(16),lg:Ke(18),xl:Ke(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Ke(2),sm:Ke(4),md:Ke(8),lg:Ke(16),xl:Ke(32)},spacing:{xs:Ke(10),sm:Ke(12),md:Ke(16),lg:Ke(20),xl:Ke(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Ke(1)} ${Ke(3)} rgba(0, 0, 0, 0.05), 0 ${Ke(1)} ${Ke(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Ke(1)} ${Ke(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ke(10)} ${Ke(15)} ${Ke(-5)}, rgba(0, 0, 0, 0.04) 0 ${Ke(7)} ${Ke(7)} ${Ke(-5)}`,md:`0 ${Ke(1)} ${Ke(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ke(20)} ${Ke(25)} ${Ke(-5)}, rgba(0, 0, 0, 0.04) 0 ${Ke(10)} ${Ke(10)} ${Ke(-5)}`,lg:`0 ${Ke(1)} ${Ke(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ke(28)} ${Ke(23)} ${Ke(-7)}, rgba(0, 0, 0, 0.04) 0 ${Ke(12)} ${Ke(12)} ${Ke(-7)}`,xl:`0 ${Ke(1)} ${Ke(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ke(36)} ${Ke(28)} ${Ke(-7)}, rgba(0, 0, 0, 0.04) 0 ${Ke(17)} ${Ke(17)} ${Ke(-7)}`},other:{},components:{}};function kue(e){return e==="auto"||e==="dark"||e==="light"}function qze({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return kue(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&kue(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const Wze="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",Rue="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function VU(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function Nue(e){if(!(e.primaryColor in e.colors))throw new Error(Wze);if(typeof e.primaryShade=="object"&&(!VU(e.primaryShade.dark)||!VU(e.primaryShade.light)))throw new Error(Rue);if(typeof e.primaryShade=="number"&&!VU(e.primaryShade))throw new Error(Rue)}function Gze(e,t){var r;if(!t)return Nue(e),e;const n=RX(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),Nue(n),n}const FX=O.createContext(null),Yze=()=>O.useContext(FX)||$X;function No(){const e=O.useContext(FX);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function r_e({theme:e,children:t,inherit:n=!0}){const r=Yze(),i=O.useMemo(()=>Gze(n?r:$X,e),[e,r,n]);return S.jsx(FX.Provider,{value:i,children:t})}r_e.displayName="@mantine/core/MantineThemeProvider";function Kze(){const e=No(),t=MX(),n=ss(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=oD(e.breakpoints[i]),a=s?`${o-.1}px`:k$(o-.1),u=s?`${o}px`:k$(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return S.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function HU(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function $k(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function Xze(e,t){const n=HU(e.variables),r=n?$k(t,n):"",i=HU(e.dark),s=HU(e.light),o=i?$k(t===":host"?`${t}([data-mantine-color-scheme="dark"])`:`${t}[data-mantine-color-scheme="dark"]`,i):"",a=s?$k(t===":host"?`${t}([data-mantine-color-scheme="light"])`:`${t}[data-mantine-color-scheme="light"]`,s):"";return`${r}${o}${a}`}function cx({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&tg({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function Due(e,t){return cx({color:e.colors[e.primaryColor][uD(e,t)],theme:e,autoContrast:null})}function I4({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=uD(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:ES(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:ES(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:ES(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=uD(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:ES(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:ES(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:ES(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function Qze(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function TS(e,t,n){ss(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const i_e=e=>{const t=uD(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:Ke(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":Due(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":Due(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};TS(r.variables,e.breakpoints,"breakpoint"),TS(r.variables,e.spacing,"spacing"),TS(r.variables,e.fontSizes,"font-size"),TS(r.variables,e.lineHeights,"line-height"),TS(r.variables,e.shadows,"shadow"),TS(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),ss(e.colors).forEach(s=>{const o=e.colors[s];if(Qze(o)){Object.assign(r.light,I4({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,I4({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,I4({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,I4({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return ss(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function Jze({theme:e,generator:t}){const n=i_e(e),r=t==null?void 0:t(e);return r?RX(n,r):n}const qU=i_e($X);function Zze(e){const t={variables:{},light:{},dark:{}};return ss(e.variables).forEach(n=>{qU.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),ss(e.light).forEach(n=>{qU.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),ss(e.dark).forEach(n=>{qU.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function eVe(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function s_e({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=No(),r=MX(),i=Nze(),s=Jze({theme:n,generator:i}),o=e===":root"&&t,a=o?Zze(s):s,u=Xze(a,e);return u?S.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":eVe(e)}`}}):null}s_e.displayName="@mantine/CssVariables";function tVe(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function SS(e,t){var i;const n=typeof window<"u"&&"matchMedia"in window&&window.matchMedia("(prefers-color-scheme: dark)").matches,r=e!=="auto"?e:n?"dark":"light";(i=t())==null||i.setAttribute("data-mantine-color-scheme",r)}function nVe({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=O.useRef(null),[s,o]=O.useState(()=>e.get(t)),a=r||s,u=O.useCallback(c=>{r||(SS(c,n),o(c),e.set(c))},[e.set,a,r]),l=O.useCallback(()=>{o(t),SS(t,n),e.clear()},[e.clear,t]);return O.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),wE(()=>{SS(e.get(t),n)},[]),O.useEffect(()=>{var f;if(r)return SS(r,n),()=>{};r===void 0&&SS(s,n),typeof window<"u"&&"matchMedia"in window&&(i.current=window.matchMedia("(prefers-color-scheme: dark)"));const c=d=>{s==="auto"&&SS(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function rVe({respectReducedMotion:e,getRootElement:t}){wE(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}tVe();function o_e({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=qze(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:y,clearColorScheme:v}=nVe({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return rVe({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),S.jsx(n_e.Provider,{value:{colorScheme:m,setColorScheme:y,clearColorScheme:v,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:S.jsxs(r_e,{theme:e,children:[o&&S.jsx(s_e,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&S.jsx(Kze,{}),t]})})}o_e.displayName="@mantine/core/MantineProvider";function EE({classNames:e,styles:t,props:n,stylesCtx:r}){const i=No();return{resolvedClassNames:z8({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:P$({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const iVe={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function sVe({theme:e,options:t,unstyled:n}){return Co((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||iVe[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function oVe({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return z8({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function Pue({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return z8({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function aVe({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function uVe({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function lVe({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function cVe({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=z8({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function fVe({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function dVe({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return Co(sVe({theme:e,options:t,unstyled:a||h}),cVe({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),fVe({options:t,classes:o,selector:r,unstyled:a}),Pue({selector:r,stylesCtx:f,theme:e,classNames:s,props:c}),Pue({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),oVe({selector:r,stylesCtx:f,options:t,props:c,theme:e}),aVe({rootSelector:l,selector:r,className:u}),uVe({selector:r,classes:o,unstyled:a||h}),d&&!h&&lVe({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function hVe({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return P$({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function Uq({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...Uq({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function pVe(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...ox(n[r])}}),t),{})}function mVe({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=pVe([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function gVe({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&hVe({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!d&&P$({theme:e,styles:a,props:i,stylesCtx:s})[n],...!d&&P$({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...mVe({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...o===n?Uq({style:u,theme:e}):null,...Uq({style:r==null?void 0:r.style,theme:e})}}function yVe({props:e,stylesCtx:t,themeName:n}){var o;const r=No(),i=(o=Lze())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function Zt({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=No(),h=Dze(),p=Pze(),m=Oze(),y=(Array.isArray(e)?e:[e]).filter(w=>w),{withStylesTransform:v,getTransformedStyles:b}=yVe({props:n,stylesCtx:r,themeName:y});return(w,E)=>({className:dVe({theme:d,options:E,themeName:y,selector:w,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:b([E==null?void 0:E.styles,l])}),style:gVe({theme:d,themeName:y,selector:w,options:E,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:f,headless:m,withStylesTransform:v})})}function hA(e,t){return typeof e=="boolean"?e:t.autoContrast}function Je(e,t,n){var o;const r=No(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...ox(n)}}function WU(e){return ss(e).reduce((t,n)=>e[n]!==void 0?`${t}${HUe(n)}:${e[n]};`:t,"").trim()}function vVe({selector:e,styles:t,media:n,container:r}){const i=t?WU(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${WU(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${WU(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function TE(e){const t=MX();return S.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:vVe(e)}})}function SE(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:y,pe:v,ps:b,bd:w,bg:E,c:T,opacity:A,ff:I,fz:R,fw:D,lts:M,ta:$,lh:U,fs:F,tt:H,td:Q,w:J,miw:ne,maw:Z,h:ie,mih:q,mah:j,bgsz:G,bgp:V,bgr:Y,bga:ee,pos:ae,top:_e,left:pe,bottom:Te,right:Le,inset:ye,display:he,flex:$e,hiddenFrom:Ne,visibleFrom:tt,lightHidden:it,darkHidden:Me,sx:Ge,...at}=e;return{styleProps:ox({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:y,pe:v,ps:b,bd:w,bg:E,c:T,opacity:A,ff:I,fz:R,fw:D,lts:M,ta:$,lh:U,fs:F,tt:H,td:Q,w:J,miw:ne,maw:Z,h:ie,mih:q,mah:j,bgsz:G,bgp:V,bgr:Y,bga:ee,pos:ae,top:_e,left:pe,bottom:Te,right:Le,inset:ye,display:he,flex:$e,hiddenFrom:Ne,visibleFrom:tt,lightHidden:it,darkHidden:Me,sx:Ge}),rest:at}}const bVe={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function BX(e,t){const n=tg({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function xVe(e,t){const n=tg({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:BX(e,t)}function _Ve(e,t){if(typeof e=="number")return Ke(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${Ke(n)}`;return r&&(s+=` ${r}`),i.length>0&&(s+=` ${BX(i.join(" "),t)}`),s.trim()}return e}const Oue={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function wVe(e){return typeof e=="string"&&e in Oue?Oue[e]:e}const EVe=["h1","h2","h3","h4","h5","h6"];function TVe(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&EVe.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?Ke(e):e}function SVe(e){return e}const CVe=["h1","h2","h3","h4","h5","h6"];function AVe(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&CVe.includes(e)?`var(--mantine-${e}-line-height)`:e}function IVe(e){return typeof e=="number"?Ke(e):e}function kVe(e,t){if(typeof e=="number")return Ke(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return Ke(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const GU={color:BX,textColor:xVe,fontSize:TVe,spacing:kVe,identity:SVe,size:IVe,lineHeight:AVe,fontFamily:wVe,border:_Ve};function Mue(e){return e.replace("(min-width: ","").replace("em)","")}function RVe({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(Mue(i))-Number(Mue(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function NVe(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function DVe(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function PVe(e){return typeof e=="object"&&e!==null?ss(e).filter(t=>t!=="base"):[]}function OVe(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function a_e({styleProps:e,data:t,theme:n}){return RVe(ss(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=DVe(e[i]);if(!NVe(e[i]))return o.forEach(l=>{r.inlineStyles[l]=GU[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=PVe(e[i]);return o.forEach(l=>{a&&(r.styles[l]=GU[s.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:GU[s.type](OVe(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function NP(){return`__m__-${O.useId().replace(/:/g,"")}`}function jX(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...jX(r,t)}),{}):typeof e=="function"?e(t):e??{}}function u_e(e){return e.startsWith("data-")?e:`data-${e}`}function MVe(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[u_e(n)]=e[n]),t},{})}function l_e(e){return e?typeof e=="string"?{[u_e(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...l_e(n)}),{}):MVe(e):null}function zq(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...zq(r,t)}),{}):typeof e=="function"?e(t):e??{}}function LVe({theme:e,style:t,vars:n,styleProps:r}){const i=zq(t,e),s=zq(n,e);return{...i,...s,...r}}const c_e=O.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var R;const m=No(),y=e||"div",{styleProps:v,rest:b}=SE(h),w=Mze(),E=(R=w==null?void 0:w())==null?void 0:R(v.sx),T=NP(),A=a_e({styleProps:v,theme:m,data:bVe}),I={ref:p,style:LVe({theme:m,style:t,vars:n,styleProps:A.inlineStyles}),className:Co(r,E,{[T]:A.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":qxe(o)?void 0:o||void 0,size:d,...l_e(s),...b};return S.jsxs(S.Fragment,{children:[A.hasResponsiveStyles&&S.jsx(TE,{selector:`.${T}`,styles:A.styles,media:A.media}),typeof f=="function"?f(I):S.jsx(y,{...I})]})});c_e.displayName="@mantine/core/Box";const je=c_e;function f_e(e){return e}function $Ve(e){const t=e;return n=>{const r=O.forwardRef((i,s)=>S.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r}}function At(e){const t=O.forwardRef(e);return t.extend=f_e,t.withProps=n=>{const r=O.forwardRef((i,s)=>S.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t}function Yo(e){const t=O.forwardRef(e);return t.withProps=n=>{const r=O.forwardRef((i,s)=>S.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t.extend=f_e,t}const FVe=O.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function y1(){return O.useContext(FVe)}var V8=$xe();const PR=hh(V8);function BVe(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function YU(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const Fk=typeof window<"u"&&window.requestAnimationFrame;function jVe({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=O.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,u]=O.useState(r?{}:o),l=p=>{V8.flushSync(()=>u(p))},c=p=>{l(m=>({...m,...p}))};function f(p){const m=e||BVe(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}D0(()=>{typeof Fk=="function"&&Fk(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),Fk(()=>{const p=YU(i);c({...f(p),height:p})})}:()=>{const p=YU(i);c({...f(p),willChange:"height",height:p}),Fk(()=>c({height:s,overflow:"hidden"}))})},[r]);const d=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=YU(i);m===a.height?l({}):c({height:m}),n()}else a.height===s&&(l(o),n())};function h({style:p={},refKey:m="ref",...y}={}){const v=y[m];return{"aria-hidden":!r,...y,[m]:Jxe(i,v),onTransitionEnd:d,style:{boxSizing:"border-box",...p,...a}}}return h}const UVe={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},H8=At((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:u,...l}=Je("Collapse",UVe,e),c=No(),f=j8(),h=(c.respectReducedMotion?f:!1)?0:i,p=jVe({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?S.jsx(je,{...l,children:n}):null:S.jsx(je,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${s}`:"none",...jX(o,c)},ref:t,...l}),children:n})});H8.displayName="@mantine/core/Collapse";const[zVe,ph]=Su("ScrollArea.Root component was not found in tree");function nC(e,t){const n=jv(t);wE(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const VVe=O.forwardRef((e,t)=>{const{style:n,...r}=e,i=ph(),[s,o]=O.useState(0),[a,u]=O.useState(0),l=!!(s&&a);return nC(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),nC(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?S.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),HVe=O.forwardRef((e,t)=>{const n=ph(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?S.jsx(VVe,{...e,ref:t}):null}),qVe={scrollHideDelay:1e3,type:"hover"},d_e=O.forwardRef((e,t)=>{const n=Je("ScrollAreaRoot",qVe,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=O.useState(null),[l,c]=O.useState(null),[f,d]=O.useState(null),[h,p]=O.useState(null),[m,y]=O.useState(null),[v,b]=O.useState(0),[w,E]=O.useState(0),[T,A]=O.useState(!1),[I,R]=O.useState(!1),D=Ro(t,M=>u(M));return S.jsx(zVe,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:T,onScrollbarXEnabledChange:A,scrollbarY:m,onScrollbarYChange:y,scrollbarYEnabled:I,onScrollbarYEnabledChange:R,onCornerWidthChange:b,onCornerHeightChange:E},children:S.jsx(je,{...o,ref:D,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${v}px`,"--sa-corner-height":s!=="xy"?"0px":`${w}px`}})})});d_e.displayName="@mantine/core/ScrollAreaRoot";function h_e(e,t){const n=e/t;return Number.isNaN(n)?0:n}function q8(e){const t=h_e(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function p_e(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function WVe(e,[t,n]){return Math.min(n,Math.max(t,e))}function Lue(e,t,n="ltr"){const r=q8(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=WVe(e,u);return p_e([0,o],[0,a])(l)}function GVe(e,t,n,r="ltr"){const i=q8(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return p_e([u,l],f)(e)}function m_e(e,t){return e>0&&e<t}function Yv(e){return e?parseInt(e,10):0}function kw(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[YVe,g_e]=Su("ScrollAreaScrollbar was not found in tree"),y_e=O.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=ph(),[h,p]=O.useState(null),m=Ro(t,R=>p(R)),y=O.useRef(null),v=O.useRef(""),{viewport:b}=d,w=n.content-n.viewport,E=jv(l),T=jv(a),A=B8(c,10),I=R=>{if(y.current){const D=R.clientX-y.current.left,M=R.clientY-y.current.top;u({x:D,y:M})}};return O.useEffect(()=>{const R=D=>{const M=D.target;(h==null?void 0:h.contains(M))&&E(D,w)};return document.addEventListener("wheel",R,{passive:!1}),()=>document.removeEventListener("wheel",R,{passive:!1})},[b,h,w,E]),O.useEffect(T,[n,T]),nC(h,A),nC(d.content,A),S.jsx(YVe,{value:{scrollbar:h,hasThumb:r,onThumbChange:jv(i),onThumbPointerUp:jv(s),onThumbPositionChange:T,onThumbPointerDown:jv(o)},children:S.jsx("div",{...f,ref:m,"data-mantine-scrollbar":!0,style:{position:"absolute",...f.style},onPointerDown:kw(e.onPointerDown,R=>{R.preventDefault(),R.button===0&&(R.target.setPointerCapture(R.pointerId),y.current=h.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",I(R))}),onPointerMove:kw(e.onPointerMove,I),onPointerUp:kw(e.onPointerUp,R=>{R.preventDefault();const D=R.target;D.hasPointerCapture(R.pointerId)&&D.releasePointerCapture(R.pointerId),document.body.style.webkitUserSelect=v.current,y.current=null})})})}),v_e=O.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=ph(),[a,u]=O.useState(),l=O.useRef(null),c=Ro(t,l,o.onScrollbarXChange);return O.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),S.jsx(y_e,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${q8(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),m_e(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:Yv(a.paddingLeft),paddingEnd:Yv(a.paddingRight)}})}})});v_e.displayName="@mantine/core/ScrollAreaScrollbarX";const b_e=O.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=ph(),[a,u]=O.useState(),l=O.useRef(null),c=Ro(t,l,o.onScrollbarYChange);return O.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),S.jsx(y_e,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${q8(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),m_e(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:Yv(a.paddingTop),paddingEnd:Yv(a.paddingBottom)}})}})});b_e.displayName="@mantine/core/ScrollAreaScrollbarY";const W8=O.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=y1(),s=ph(),o=O.useRef(null),a=O.useRef(0),[u,l]=O.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=h_e(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>GVe(h,a.current,u,p);return n==="horizontal"?S.jsx(v_e,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=Lue(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,i))}}):n==="vertical"?S.jsx(b_e,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=Lue(h,u);u.scrollbar.size===0?o.current.style.setProperty("--thumb-opacity","0"):o.current.style.setProperty("--thumb-opacity","1"),o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null});W8.displayName="@mantine/core/ScrollAreaScrollbarVisible";const UX=O.forwardRef((e,t)=>{const n=ph(),{forceMount:r,...i}=e,[s,o]=O.useState(!1),a=e.orientation==="horizontal",u=B8(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return nC(n.viewport,u),nC(n.content,u),r||s?S.jsx(W8,{"data-state":s?"visible":"hidden",...i,ref:t}):null});UX.displayName="@mantine/core/ScrollAreaScrollbarAuto";const x_e=O.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=ph(),[s,o]=O.useState(!1);return O.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?S.jsx(UX,{"data-state":s?"visible":"hidden",...r,ref:t}):null});x_e.displayName="@mantine/core/ScrollAreaScrollbarHover";const KVe=O.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=ph(),s=e.orientation==="horizontal",[o,a]=O.useState("hidden"),u=B8(()=>a("idle"),100);return O.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),O.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u]),n||o!=="hidden"?S.jsx(W8,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:kw(e.onPointerEnter,()=>a("interacting")),onPointerLeave:kw(e.onPointerLeave,()=>a("idle"))}):null}),Vq=O.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=ph(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return O.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?S.jsx(x_e,{...r,ref:t,forceMount:n}):i.type==="scroll"?S.jsx(KVe,{...r,ref:t,forceMount:n}):i.type==="auto"?S.jsx(UX,{...r,ref:t,forceMount:n}):i.type==="always"?S.jsx(W8,{...r,ref:t}):null});Vq.displayName="@mantine/core/ScrollAreaScrollbar";function XVe(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const __e=O.forwardRef((e,t)=>{const{style:n,...r}=e,i=ph(),s=g_e(),{onThumbPositionChange:o}=s,a=Ro(t,c=>s.onThumbChange(c)),u=O.useRef(void 0),l=B8(()=>{u.current&&(u.current(),u.current=void 0)},100);return O.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=XVe(c,o);u.current=d,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,o]),S.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:kw(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:kw(e.onPointerUp,s.onThumbPointerUp)})});__e.displayName="@mantine/core/ScrollAreaThumb";const Hq=O.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=g_e();return n||i.hasThumb?S.jsx(__e,{ref:t,...r}):null});Hq.displayName="@mantine/core/ScrollAreaThumb";const w_e=O.forwardRef(({children:e,style:t,...n},r)=>{const i=ph(),s=Ro(r,i.onViewportChange);return S.jsx(je,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:S.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});w_e.displayName="@mantine/core/ScrollAreaViewport";var zX={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const E_e={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},QVe=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":Ke(t)}}),Wy=At((e,t)=>{const n=Je("ScrollArea",E_e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:y,scrollbars:v,onBottomReached:b,onTopReached:w,...E}=n,[T,A]=O.useState(!1),I=Zt({name:"ScrollArea",props:n,classes:zX,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:QVe});return S.jsxs(d_e,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:v,...I("root"),...E,children:[S.jsx(w_e,{...d,...I("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":y===!0?"xy":y||void 0,"data-scrollbars":v||void 0,onScroll:R=>{var U;(U=d==null?void 0:d.onScroll)==null||U.call(d,R),p==null||p({x:R.currentTarget.scrollLeft,y:R.currentTarget.scrollTop});const{scrollTop:D,scrollHeight:M,clientHeight:$}=R.currentTarget;D-(M-$)>=0&&(b==null||b()),D===0&&(w==null||w())},children:m}),(v==="xy"||v==="x")&&S.jsx(Vq,{...I("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),children:S.jsx(Hq,{...I("thumb")})}),(v==="xy"||v==="y")&&S.jsx(Vq,{...I("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),children:S.jsx(Hq,{...I("thumb")})}),S.jsx(HVe,{...I("corner"),"data-hovered":T||void 0,"data-hidden":c==="never"||void 0})]})});Wy.displayName="@mantine/core/ScrollArea";const VX=At((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:m,style:y,vars:v,onBottomReached:b,onTopReached:w,...E}=Je("ScrollAreaAutosize",E_e,e);return S.jsx(je,{...E,ref:t,style:[{display:"flex",overflow:"auto"},y],children:S.jsx(je,{style:{display:"flex",flexDirection:"column",flex:1},children:S.jsx(Wy,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:v,scrollbars:m,onBottomReached:b,onTopReached:w,children:n})})})});Wy.classes=zX;VX.displayName="@mantine/core/ScrollAreaAutosize";VX.classes=zX;Wy.Autosize=VX;var T_e={root:"m_87cf2631"};const JVe={__staticSelector:"UnstyledButton"},id=Yo((e,t)=>{const n=Je("UnstyledButton",JVe,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,f=Zt({name:s,props:n,classes:T_e,className:r,style:l,classNames:a,styles:u,unstyled:o});return S.jsx(je,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});id.classes=T_e;id.displayName="@mantine/core/UnstyledButton";var S_e={root:"m_515a97f8"};const ZVe={},HX=At((e,t)=>{const n=Je("VisuallyHidden",ZVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=Zt({name:"VisuallyHidden",classes:S_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return S.jsx(je,{component:"span",ref:t,...c("root"),...l})});HX.classes=S_e;HX.displayName="@mantine/core/VisuallyHidden";var C_e={root:"m_1b7284a3"};const eHe={},tHe=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:Ti(t),"--paper-shadow":DX(n)}}),pA=Yo((e,t)=>{const n=Je("Paper",eHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,m=Zt({name:"Paper",props:n,classes:C_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:tHe});return S.jsx(je,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:d,...p})});pA.classes=C_e;pA.displayName="@mantine/core/Paper";function G8(){return typeof window<"u"}function A_e(e){return I_e(e)?(e.nodeName||"").toLowerCase():"#document"}function mA(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function nHe(e){var t;return(t=(I_e(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function I_e(e){return G8()?e instanceof Node||e instanceof mA(e).Node:!1}function Fc(e){return G8()?e instanceof Element||e instanceof mA(e).Element:!1}function qX(e){return G8()?e instanceof HTMLElement||e instanceof mA(e).HTMLElement:!1}function qq(e){return!G8()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof mA(e).ShadowRoot}function rHe(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function $ue(e){return["html","body","#document"].includes(A_e(e))}function iHe(e){return mA(e).getComputedStyle(e)}function sHe(e){if(A_e(e)==="html")return e;const t=e.assignedSlot||e.parentNode||qq(e)&&e.host||nHe(e);return qq(t)?t.host:t}function Fue(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function lD(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&qq(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function k_e(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function R_e(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function oHe(e){return lHe()?!1:!Bue()&&e.width===0&&e.height===0||Bue()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function aHe(){return/apple/i.test(navigator.vendor)}function Bue(){const e=/android/i;return e.test(k_e())||e.test(R_e())}function uHe(){return k_e().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function lHe(){return R_e().includes("jsdom/")}function Wq(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function cHe(e){return"nativeEvent"in e}function fHe(e){return e.matches("html,body")}function cw(e){return(e==null?void 0:e.ownerDocument)||document}function KU(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function QS(e){return"composedPath"in e?e.composedPath()[0]:e.target}const dHe="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function hHe(e){return qX(e)&&e.matches(dHe)}const Wf=Math.min,Qu=Math.max,O$=Math.round,k4=Math.floor,_b=e=>({x:e,y:e}),pHe={left:"right",right:"left",bottom:"top",top:"bottom"},mHe={start:"end",end:"start"};function Gq(e,t,n){return Qu(e,Wf(t,n))}function Gy(e,t){return typeof e=="function"?e(t):e}function Op(e){return e.split("-")[0]}function gA(e){return e.split("-")[1]}function WX(e){return e==="x"?"y":"x"}function GX(e){return e==="y"?"height":"width"}function CE(e){return["top","bottom"].includes(Op(e))?"y":"x"}function YX(e){return WX(CE(e))}function gHe(e,t,n){n===void 0&&(n=!1);const r=gA(e),i=YX(e),s=GX(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=M$(o)),[o,M$(o)]}function yHe(e){const t=M$(e);return[Yq(e),t,Yq(t)]}function Yq(e){return e.replace(/start|end/g,t=>mHe[t])}function vHe(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function bHe(e,t,n,r){const i=gA(e);let s=vHe(Op(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(Yq)))),s}function M$(e){return e.replace(/left|right|bottom|top/g,t=>pHe[t])}function xHe(e){return{top:0,right:0,bottom:0,left:0,...e}}function KX(e){return typeof e!="number"?xHe(e):{top:e,right:e,bottom:e,left:e}}function rC(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function jue(e,t,n){let{reference:r,floating:i}=e;const s=CE(t),o=YX(t),a=GX(o),u=Op(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(gA(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const _He=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=jue(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:y,fn:v}=a[m],{x:b,y:w,data:E,reset:T}=await v({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=b??c,f=w??f,h={...h,[y]:{...h[y],...E}},T&&p<=50&&(p++,typeof T=="object"&&(T.placement&&(d=T.placement),T.rects&&(l=T.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):T.rects),{x:c,y:f}=jue(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function XX(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=Gy(t,e),p=KX(h),y=a[d?f==="floating"?"reference":"floating":f],v=rC(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(y)))==null||n?y:y.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),b=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),E=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},T=rC(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:w,strategy:u}):b);return{top:(v.top-T.top+p.top)/E.y,bottom:(T.bottom-v.bottom+p.bottom)/E.y,left:(v.left-T.left+p.left)/E.x,right:(T.right-v.right+p.right)/E.x}}const wHe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=Gy(e,t)||{};if(l==null)return{};const f=KX(c),d={x:n,y:r},h=YX(i),p=GX(h),m=await o.getDimensions(l),y=h==="y",v=y?"top":"left",b=y?"bottom":"right",w=y?"clientHeight":"clientWidth",E=s.reference[p]+s.reference[h]-d[h]-s.floating[p],T=d[h]-s.reference[h],A=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let I=A?A[w]:0;(!I||!await(o.isElement==null?void 0:o.isElement(A)))&&(I=a.floating[w]||s.floating[p]);const R=E/2-T/2,D=I/2-m[p]/2-1,M=Wf(f[v],D),$=Wf(f[b],D),U=M,F=I-m[p]-$,H=I/2-m[p]/2+R,Q=Gq(U,H,F),J=!u.arrow&&gA(i)!=null&&H!==Q&&s.reference[p]/2-(H<U?M:$)-m[p]/2<0,ne=J?H<U?H-U:H-F:0;return{[h]:d[h]+ne,data:{[h]:Q,centerOffset:H-Q-ne,...J&&{alignmentOffset:ne}},reset:J}}}),EHe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...y}=Gy(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const v=Op(i),b=Op(a)===a,w=await(u.isRTL==null?void 0:u.isRTL(l.floating)),E=d||(b||!m?[M$(a)]:yHe(a));!d&&p!=="none"&&E.push(...bHe(a,m,p,w));const T=[a,...E],A=await XX(t,y),I=[];let R=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&I.push(A[v]),f){const U=gHe(i,o,w);I.push(A[U[0]],A[U[1]])}if(R=[...R,{placement:i,overflows:I}],!I.every(U=>U<=0)){var D,M;const U=(((D=s.flip)==null?void 0:D.index)||0)+1,F=T[U];if(F)return{data:{index:U,overflows:R},reset:{placement:F}};let H=(M=R.filter(Q=>Q.overflows[0]<=0).sort((Q,J)=>Q.overflows[1]-J.overflows[1])[0])==null?void 0:M.placement;if(!H)switch(h){case"bestFit":{var $;const Q=($=R.map(J=>[J.placement,J.overflows.filter(ne=>ne>0).reduce((ne,Z)=>ne+Z,0)]).sort((J,ne)=>J[1]-ne[1])[0])==null?void 0:$[0];Q&&(H=Q);break}case"initialPlacement":H=a;break}if(i!==H)return{reset:{placement:H}}}return{}}}};function N_e(e){const t=Wf(...e.map(s=>s.left)),n=Wf(...e.map(s=>s.top)),r=Qu(...e.map(s=>s.right)),i=Qu(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function THe(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>rC(N_e(i)))}const SHe=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=Gy(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=THe(c),d=rC(N_e(c)),h=KX(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(y=>u>y.left-h.left&&u<y.right+h.right&&l>y.top-h.top&&l<y.bottom+h.bottom)||d;if(f.length>=2){if(CE(n)==="y"){const M=f[0],$=f[f.length-1],U=Op(n)==="top",F=M.top,H=$.bottom,Q=U?M.left:$.left,J=U?M.right:$.right,ne=J-Q,Z=H-F;return{top:F,bottom:H,left:Q,right:J,width:ne,height:Z,x:Q,y:F}}const y=Op(n)==="left",v=Qu(...f.map(M=>M.right)),b=Wf(...f.map(M=>M.left)),w=f.filter(M=>y?M.left===b:M.right===v),E=w[0].top,T=w[w.length-1].bottom,A=b,I=v,R=I-A,D=T-E;return{top:E,bottom:T,left:A,right:I,width:R,height:D,x:A,y:E}}return d}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function CHe(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Op(n),a=gA(n),u=CE(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=Gy(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const AHe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await CHe(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},IHe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:y=>{let{x:v,y:b}=y;return{x:v,y:b}}},...u}=Gy(e,t),l={x:n,y:r},c=await XX(t,u),f=CE(Op(i)),d=WX(f);let h=l[d],p=l[f];if(s){const y=d==="y"?"top":"left",v=d==="y"?"bottom":"right",b=h+c[y],w=h-c[v];h=Gq(b,h,w)}if(o){const y=f==="y"?"top":"left",v=f==="y"?"bottom":"right",b=p+c[y],w=p-c[v];p=Gq(b,p,w)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},kHe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=Gy(e,t),c={x:n,y:r},f=CE(i),d=WX(f);let h=c[d],p=c[f];const m=Gy(a,t),y=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const w=d==="y"?"height":"width",E=s.reference[d]-s.floating[w]+y.mainAxis,T=s.reference[d]+s.reference[w]-y.mainAxis;h<E?h=E:h>T&&(h=T)}if(l){var v,b;const w=d==="y"?"width":"height",E=["top","left"].includes(Op(i)),T=s.reference[f]-s.floating[w]+(E&&((v=o.offset)==null?void 0:v[f])||0)+(E?0:y.crossAxis),A=s.reference[f]+s.reference[w]+(E?0:((b=o.offset)==null?void 0:b[f])||0)-(E?y.crossAxis:0);p<T?p=T:p>A&&(p=A)}return{[d]:h,[f]:p}}}},RHe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=Gy(e,t),u=await XX(t,a),l=Op(n),c=gA(n),f=CE(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const y=h-u.top-u.bottom,v=d-u.left-u.right,b=Wf(h-u[p],y),w=Wf(d-u[m],v),E=!t.middlewareData.shift;let T=b,A=w;if(f?A=c||E?Wf(w,v):v:T=c||E?Wf(b,y):y,E&&!c){const R=Qu(u.left,0),D=Qu(u.right,0),M=Qu(u.top,0),$=Qu(u.bottom,0);f?A=d-2*(R!==0||D!==0?R+D:Qu(u.left,u.right)):T=h-2*(M!==0||$!==0?M+$:Qu(u.top,u.bottom))}await o({...t,availableWidth:A,availableHeight:T});const I=await i.getDimensions(s.floating);return d!==I.width||h!==I.height?{reset:{rects:!0}}:{}}}};function yA(e){return D_e(e)?(e.nodeName||"").toLowerCase():"#document"}function Jf(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function v1(e){var t;return(t=(D_e(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function D_e(e){return e instanceof Node||e instanceof Jf(e).Node}function P0(e){return e instanceof Element||e instanceof Jf(e).Element}function O0(e){return e instanceof HTMLElement||e instanceof Jf(e).HTMLElement}function Uue(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Jf(e).ShadowRoot}function DP(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Mp(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function NHe(e){return["table","td","th"].includes(yA(e))}function QX(e){const t=JX(),n=Mp(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function DHe(e){let t=wb(e);for(;O0(t)&&!iC(t);){if(QX(t))return t;t=wb(t)}return null}function JX(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function iC(e){return["html","body","#document"].includes(yA(e))}function Mp(e){return Jf(e).getComputedStyle(e)}function Y8(e){return P0(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function wb(e){if(yA(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Uue(e)&&e.host||v1(e);return Uue(t)?t.host:t}function P_e(e){const t=wb(e);return iC(t)?e.ownerDocument?e.ownerDocument.body:e.body:O0(t)&&DP(t)?t:P_e(t)}function Dy(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=P_e(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=Jf(i);return s?t.concat(o,o.visualViewport||[],DP(i)?i:[],o.frameElement&&n?Dy(o.frameElement):[]):t.concat(i,Dy(i,[],n))}function O_e(e){const t=Mp(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=O0(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=O$(n)!==s||O$(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function ZX(e){return P0(e)?e:e.contextElement}function A2(e){const t=ZX(e);if(!O0(t))return _b(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=O_e(t);let o=(s?O$(n.width):n.width)/r,a=(s?O$(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const PHe=_b(0);function M_e(e){const t=Jf(e);return!JX()||!t.visualViewport?PHe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function OHe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Jf(e)?!1:t}function zw(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=ZX(e);let o=_b(1);t&&(r?P0(r)&&(o=A2(r)):o=A2(e));const a=OHe(s,n,r)?M_e(s):_b(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=Jf(s),h=r&&P0(r)?Jf(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const y=A2(m),v=m.getBoundingClientRect(),b=Mp(m),w=v.left+(m.clientLeft+parseFloat(b.paddingLeft))*y.x,E=v.top+(m.clientTop+parseFloat(b.paddingTop))*y.y;u*=y.x,l*=y.y,c*=y.x,f*=y.y,u+=w,l+=E,p=Jf(m),m=p.frameElement}}return rC({width:c,height:f,x:u,y:l})}const MHe=[":popover-open",":modal"];function eQ(e){return MHe.some(t=>{try{return e.matches(t)}catch{return!1}})}function LHe(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=v1(r),a=t?eQ(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=_b(1);const c=_b(0),f=O0(r);if((f||!f&&!s)&&((yA(r)!=="body"||DP(o))&&(u=Y8(r)),O0(r))){const d=zw(r);l=A2(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function $He(e){return Array.from(e.getClientRects())}function L_e(e){return zw(v1(e)).left+Y8(e).scrollLeft}function FHe(e){const t=v1(e),n=Y8(e),r=e.ownerDocument.body,i=Qu(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Qu(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+L_e(e);const a=-n.scrollTop;return Mp(r).direction==="rtl"&&(o+=Qu(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function BHe(e,t){const n=Jf(e),r=v1(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=JX();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function jHe(e,t){const n=zw(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=O0(e)?A2(e):_b(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function zue(e,t,n){let r;if(t==="viewport")r=BHe(e,n);else if(t==="document")r=FHe(v1(e));else if(P0(t))r=jHe(t,n);else{const i=M_e(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return rC(r)}function $_e(e,t){const n=wb(e);return n===t||!P0(n)||iC(n)?!1:Mp(n).position==="fixed"||$_e(n,t)}function UHe(e,t){const n=t.get(e);if(n)return n;let r=Dy(e,[],!1).filter(a=>P0(a)&&yA(a)!=="body"),i=null;const s=Mp(e).position==="fixed";let o=s?wb(e):e;for(;P0(o)&&!iC(o);){const a=Mp(o),u=QX(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||DP(o)&&!u&&$_e(e,o))?r=r.filter(c=>c!==o):i=a,o=wb(o)}return t.set(e,r),r}function zHe(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?eQ(t)?[]:UHe(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=zue(t,c,i);return l.top=Qu(f.top,l.top),l.right=Wf(f.right,l.right),l.bottom=Wf(f.bottom,l.bottom),l.left=Qu(f.left,l.left),l},zue(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function VHe(e){const{width:t,height:n}=O_e(e);return{width:t,height:n}}function HHe(e,t,n){const r=O0(t),i=v1(t),s=n==="fixed",o=zw(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=_b(0);if(r||!r&&!s)if((yA(t)!=="body"||DP(i))&&(a=Y8(t)),r){const f=zw(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=L_e(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function XU(e){return Mp(e).position==="static"}function Vue(e,t){return!O0(e)||Mp(e).position==="fixed"?null:t?t(e):e.offsetParent}function F_e(e,t){const n=Jf(e);if(eQ(e))return n;if(!O0(e)){let i=wb(e);for(;i&&!iC(i);){if(P0(i)&&!XU(i))return i;i=wb(i)}return n}let r=Vue(e,t);for(;r&&NHe(r)&&XU(r);)r=Vue(r,t);return r&&iC(r)&&XU(r)&&!QX(r)?n:r||DHe(e)||n}const qHe=async function(e){const t=this.getOffsetParent||F_e,n=this.getDimensions,r=await n(e.floating);return{reference:HHe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function WHe(e){return Mp(e).direction==="rtl"}const GHe={convertOffsetParentRelativeRectToViewportRelativeRect:LHe,getDocumentElement:v1,getClippingRect:zHe,getOffsetParent:F_e,getElementRects:qHe,getClientRects:$He,getDimensions:VHe,getScale:A2,isElement:P0,isRTL:WHe};function YHe(e,t){let n=null,r;const i=v1(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=k4(c),p=k4(i.clientWidth-(l+f)),m=k4(i.clientHeight-(c+d)),y=k4(l),b={rootMargin:-h+"px "+-p+"px "+-m+"px "+-y+"px",threshold:Qu(0,Wf(1,u))||1};let w=!0;function E(T){const A=T[0].intersectionRatio;if(A!==u){if(!w)return o();A?o(!1,A):r=setTimeout(()=>{o(!1,1e-7)},1e3)}w=!1}try{n=new IntersectionObserver(E,{...b,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,b)}n.observe(e)}return o(!0),s}function KHe(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=ZX(e),c=i||s?[...l?Dy(l):[],...Dy(t)]:[];c.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const f=l&&a?YHe(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(v=>{let[b]=v;b&&b.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var w;(w=h)==null||w.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?zw(e):null;u&&y();function y(){const v=zw(e);m&&(v.x!==m.x||v.y!==m.y||v.width!==m.width||v.height!==m.height)&&n(),m=v,p=requestAnimationFrame(y)}return n(),()=>{var v;c.forEach(b=>{i&&b.removeEventListener("scroll",n),s&&b.removeEventListener("resize",n)}),f==null||f(),(v=h)==null||v.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const XHe=AHe,QHe=IHe,JHe=EHe,ZHe=RHe,Hue=wHe,eqe=SHe,tqe=kHe,nqe=(e,t,n)=>{const r=new Map,i={platform:GHe,...n},s={...i.platform,_c:r};return _He(e,t,{...i,platform:s})};var UM=typeof document<"u"?O.useLayoutEffect:O.useEffect;function L$(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!L$(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!L$(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function B_e(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function que(e,t){const n=B_e(e);return Math.round(t*n)/n}function QU(e){const t=O.useRef(e);return UM(()=>{t.current=e}),t}function rqe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=O.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=O.useState(r);L$(d,r)||h(r);const[p,m]=O.useState(null),[y,v]=O.useState(null),b=O.useCallback(Z=>{Z!==A.current&&(A.current=Z,m(Z))},[]),w=O.useCallback(Z=>{Z!==I.current&&(I.current=Z,v(Z))},[]),E=s||p,T=o||y,A=O.useRef(null),I=O.useRef(null),R=O.useRef(c),D=u!=null,M=QU(u),$=QU(i),U=QU(l),F=O.useCallback(()=>{if(!A.current||!I.current)return;const Z={placement:t,strategy:n,middleware:d};$.current&&(Z.platform=$.current),nqe(A.current,I.current,Z).then(ie=>{const q={...ie,isPositioned:U.current!==!1};H.current&&!L$(R.current,q)&&(R.current=q,V8.flushSync(()=>{f(q)}))})},[d,t,n,$,U]);UM(()=>{l===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,f(Z=>({...Z,isPositioned:!1})))},[l]);const H=O.useRef(!1);UM(()=>(H.current=!0,()=>{H.current=!1}),[]),UM(()=>{if(E&&(A.current=E),T&&(I.current=T),E&&T){if(M.current)return M.current(E,T,F);F()}},[E,T,F,M,D]);const Q=O.useMemo(()=>({reference:A,floating:I,setReference:b,setFloating:w}),[b,w]),J=O.useMemo(()=>({reference:E,floating:T}),[E,T]),ne=O.useMemo(()=>{const Z={position:n,left:0,top:0};if(!J.floating)return Z;const ie=que(J.floating,c.x),q=que(J.floating,c.y);return a?{...Z,transform:"translate("+ie+"px, "+q+"px)",...B_e(J.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ie,top:q}},[n,a,J.floating,c.x,c.y]);return O.useMemo(()=>({...c,update:F,refs:Q,elements:J,floatingStyles:ne}),[c,F,Q,J,ne])}const iqe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Hue({element:r.current,padding:i}).fn(n):{}:r?Hue({element:r,padding:i}).fn(n):{}}}},j_e=(e,t)=>({...XHe(e),options:[e,t]}),tQ=(e,t)=>({...QHe(e),options:[e,t]}),Wue=(e,t)=>({...tqe(e),options:[e,t]}),$$=(e,t)=>({...JHe(e),options:[e,t]}),sqe=(e,t)=>({...ZHe(e),options:[e,t]}),EN=(e,t)=>({...eqe(e),options:[e,t]}),U_e=(e,t)=>({...iqe(e),options:[e,t]}),z_e={...K7e},oqe=z_e.useInsertionEffect,aqe=oqe||(e=>e());function py(e){const t=O.useRef(()=>{});return aqe(()=>{t.current=e}),O.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var y0=typeof document<"u"?O.useLayoutEffect:O.useEffect;let Gue=!1,uqe=0;const Yue=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+uqe++;function lqe(){const[e,t]=O.useState(()=>Gue?Yue():void 0);return y0(()=>{e==null&&t(Yue())},[]),O.useEffect(()=>{Gue=!0},[]),e}const cqe=z_e.useId,V_e=cqe||lqe;function fqe(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const dqe=O.createContext(null),hqe=O.createContext(null),nQ=()=>{var e;return((e=O.useContext(dqe))==null?void 0:e.id)||null},rQ=()=>O.useContext(hqe);function iQ(e){return"data-floating-ui-"+e}function JU(e){const t=O.useRef(e);return y0(()=>{t.current=e}),t}const Kue=iQ("safe-polygon");function zM(e,t,n){return n&&!Wq(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function pqe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:o}=e,{enabled:a=!0,delay:u=0,handleClose:l=null,mouseOnly:c=!1,restMs:f=0,move:d=!0}=t,h=rQ(),p=nQ(),m=JU(l),y=JU(u),v=JU(n),b=O.useRef(),w=O.useRef(-1),E=O.useRef(),T=O.useRef(-1),A=O.useRef(!0),I=O.useRef(!1),R=O.useRef(()=>{}),D=O.useRef(!1),M=O.useCallback(()=>{var ne;const Z=(ne=i.current.openEvent)==null?void 0:ne.type;return(Z==null?void 0:Z.includes("mouse"))&&Z!=="mousedown"},[i]);O.useEffect(()=>{if(!a)return;function ne(Z){let{open:ie}=Z;ie||(clearTimeout(w.current),clearTimeout(T.current),A.current=!0,D.current=!1)}return s.on("openchange",ne),()=>{s.off("openchange",ne)}},[a,s]),O.useEffect(()=>{if(!a||!m.current||!n)return;function ne(ie){M()&&r(!1,ie,"hover")}const Z=cw(o.floating).documentElement;return Z.addEventListener("mouseleave",ne),()=>{Z.removeEventListener("mouseleave",ne)}},[o.floating,n,r,a,m,M]);const $=O.useCallback(function(ne,Z,ie){Z===void 0&&(Z=!0),ie===void 0&&(ie="hover");const q=zM(y.current,"close",b.current);q&&!E.current?(clearTimeout(w.current),w.current=window.setTimeout(()=>r(!1,ne,ie),q)):Z&&(clearTimeout(w.current),r(!1,ne,ie))},[y,r]),U=py(()=>{R.current(),E.current=void 0}),F=py(()=>{if(I.current){const ne=cw(o.floating).body;ne.style.pointerEvents="",ne.removeAttribute(Kue),I.current=!1}}),H=py(()=>i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1);O.useEffect(()=>{if(!a)return;function ne(j){if(clearTimeout(w.current),A.current=!1,c&&!Wq(b.current)||f>0&&!zM(y.current,"open"))return;const G=zM(y.current,"open",b.current);G?w.current=window.setTimeout(()=>{v.current||r(!0,j,"hover")},G):n||r(!0,j,"hover")}function Z(j){if(H())return;R.current();const G=cw(o.floating);if(clearTimeout(T.current),D.current=!1,m.current&&i.current.floatingContext){n||clearTimeout(w.current),E.current=m.current({...i.current.floatingContext,tree:h,x:j.clientX,y:j.clientY,onClose(){F(),U(),H()||$(j,!0,"safe-polygon")}});const Y=E.current;G.addEventListener("mousemove",Y),R.current=()=>{G.removeEventListener("mousemove",Y)};return}(b.current==="touch"?!lD(o.floating,j.relatedTarget):!0)&&$(j)}function ie(j){H()||i.current.floatingContext&&(m.current==null||m.current({...i.current.floatingContext,tree:h,x:j.clientX,y:j.clientY,onClose(){F(),U(),H()||$(j)}})(j))}if(Fc(o.domReference)){var q;const j=o.domReference;return n&&j.addEventListener("mouseleave",ie),(q=o.floating)==null||q.addEventListener("mouseleave",ie),d&&j.addEventListener("mousemove",ne,{once:!0}),j.addEventListener("mouseenter",ne),j.addEventListener("mouseleave",Z),()=>{var G;n&&j.removeEventListener("mouseleave",ie),(G=o.floating)==null||G.removeEventListener("mouseleave",ie),d&&j.removeEventListener("mousemove",ne),j.removeEventListener("mouseenter",ne),j.removeEventListener("mouseleave",Z)}}},[o,a,e,c,f,d,$,U,F,r,n,v,h,y,m,i,H]),y0(()=>{var ne;if(a&&n&&(ne=m.current)!=null&&ne.__options.blockPointerEvents&&M()){I.current=!0;const ie=o.floating;if(Fc(o.domReference)&&ie){var Z;const q=cw(o.floating).body;q.setAttribute(Kue,"");const j=o.domReference,G=h==null||(Z=h.nodesRef.current.find(V=>V.id===p))==null||(Z=Z.context)==null?void 0:Z.elements.floating;return G&&(G.style.pointerEvents=""),q.style.pointerEvents="none",j.style.pointerEvents="auto",ie.style.pointerEvents="auto",()=>{q.style.pointerEvents="",j.style.pointerEvents="",ie.style.pointerEvents=""}}}},[a,n,p,o,h,m,M]),y0(()=>{n||(b.current=void 0,D.current=!1,U(),F())},[n,U,F]),O.useEffect(()=>()=>{U(),clearTimeout(w.current),clearTimeout(T.current),F()},[a,o.domReference,U,F]);const Q=O.useMemo(()=>{function ne(Z){b.current=Z.pointerType}return{onPointerDown:ne,onPointerEnter:ne,onMouseMove(Z){const{nativeEvent:ie}=Z;function q(){!A.current&&!v.current&&r(!0,ie,"hover")}c&&!Wq(b.current)||n||f===0||D.current&&Z.movementX**2+Z.movementY**2<2||(clearTimeout(T.current),b.current==="touch"?q():(D.current=!0,T.current=window.setTimeout(q,f)))}}},[c,r,n,v,f]),J=O.useMemo(()=>({onMouseEnter(){clearTimeout(w.current)},onMouseLeave(ne){H()||$(ne.nativeEvent,!1)}}),[$,H]);return O.useMemo(()=>a?{reference:Q,floating:J}:{},[a,Q,J])}const Kq=()=>{},H_e=O.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:Kq,setState:Kq,isInstantPhase:!1}),q_e=()=>O.useContext(H_e);function mqe(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=O.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=O.useRef(null),a=O.useCallback(u=>{s({currentId:u})},[]);return y0(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),O.createElement(H_e.Provider,{value:O.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function gqe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s,enabled:o=!0}=t,a=s??i,u=q_e(),{currentId:l,setCurrentId:c,initialDelay:f,setState:d,timeoutMs:h}=u;return y0(()=>{o&&l&&(d({delay:{open:1,close:zM(f,"close")}}),l!==a&&r(!1))},[o,a,r,d,l,f]),y0(()=>{function p(){r(!1),d({delay:f,currentId:null})}if(o&&l&&!n&&l===a){if(h){const m=window.setTimeout(p,h);return()=>{clearTimeout(m)}}p()}},[o,n,d,l,a,r,f,h]),y0(()=>{o&&(c===Kq||!n||c(a))},[o,n,c,a]),u}function ZU(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const yqe="data-floating-ui-focusable",vqe={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},bqe={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Xue=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function xqe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:i,dataRef:s}=e,{enabled:o=!0,escapeKey:a=!0,outsidePress:u=!0,outsidePressEvent:l="pointerdown",referencePress:c=!1,referencePressEvent:f="pointerdown",ancestorScroll:d=!1,bubbles:h,capture:p}=t,m=rQ(),y=py(typeof u=="function"?u:()=>!1),v=typeof u=="function"?y:u,b=O.useRef(!1),w=O.useRef(!1),{escapeKey:E,outsidePress:T}=Xue(h),{escapeKey:A,outsidePress:I}=Xue(p),R=O.useRef(!1),D=py(Q=>{var J;if(!n||!o||!a||Q.key!=="Escape"||R.current)return;const ne=(J=s.current.floatingContext)==null?void 0:J.nodeId,Z=m?ZU(m.nodesRef.current,ne):[];if(!E&&(Q.stopPropagation(),Z.length>0)){let ie=!0;if(Z.forEach(q=>{var j;if((j=q.context)!=null&&j.open&&!q.context.dataRef.current.__escapeKeyBubbles){ie=!1;return}}),!ie)return}r(!1,cHe(Q)?Q.nativeEvent:Q,"escape-key")}),M=py(Q=>{var J;const ne=()=>{var Z;D(Q),(Z=QS(Q))==null||Z.removeEventListener("keydown",ne)};(J=QS(Q))==null||J.addEventListener("keydown",ne)}),$=py(Q=>{var J;const ne=b.current;b.current=!1;const Z=w.current;if(w.current=!1,l==="click"&&Z||ne||typeof v=="function"&&!v(Q))return;const ie=QS(Q),q="["+iQ("inert")+"]",j=cw(i.floating).querySelectorAll(q);let G=Fc(ie)?ie:null;for(;G&&!$ue(G);){const ae=sHe(G);if($ue(ae)||!Fc(ae))break;G=ae}if(j.length&&Fc(ie)&&!fHe(ie)&&!lD(ie,i.floating)&&Array.from(j).every(ae=>!lD(G,ae)))return;if(qX(ie)&&H){const ae=ie.clientWidth>0&&ie.scrollWidth>ie.clientWidth,_e=ie.clientHeight>0&&ie.scrollHeight>ie.clientHeight;let pe=_e&&Q.offsetX>ie.clientWidth;if(_e&&iHe(ie).direction==="rtl"&&(pe=Q.offsetX<=ie.offsetWidth-ie.clientWidth),pe||ae&&Q.offsetY>ie.clientHeight)return}const V=(J=s.current.floatingContext)==null?void 0:J.nodeId,Y=m&&ZU(m.nodesRef.current,V).some(ae=>{var _e;return KU(Q,(_e=ae.context)==null?void 0:_e.elements.floating)});if(KU(Q,i.floating)||KU(Q,i.domReference)||Y)return;const ee=m?ZU(m.nodesRef.current,V):[];if(ee.length>0){let ae=!0;if(ee.forEach(_e=>{var pe;if((pe=_e.context)!=null&&pe.open&&!_e.context.dataRef.current.__outsidePressBubbles){ae=!1;return}}),!ae)return}r(!1,Q,"outside-press")}),U=py(Q=>{var J;const ne=()=>{var Z;$(Q),(Z=QS(Q))==null||Z.removeEventListener(l,ne)};(J=QS(Q))==null||J.addEventListener(l,ne)});O.useEffect(()=>{if(!n||!o)return;s.current.__escapeKeyBubbles=E,s.current.__outsidePressBubbles=T;let Q=-1;function J(j){r(!1,j,"ancestor-scroll")}function ne(){window.clearTimeout(Q),R.current=!0}function Z(){Q=window.setTimeout(()=>{R.current=!1},rHe()?5:0)}const ie=cw(i.floating);a&&(ie.addEventListener("keydown",A?M:D,A),ie.addEventListener("compositionstart",ne),ie.addEventListener("compositionend",Z)),v&&ie.addEventListener(l,I?U:$,I);let q=[];return d&&(Fc(i.domReference)&&(q=Dy(i.domReference)),Fc(i.floating)&&(q=q.concat(Dy(i.floating))),!Fc(i.reference)&&i.reference&&i.reference.contextElement&&(q=q.concat(Dy(i.reference.contextElement)))),q=q.filter(j=>{var G;return j!==((G=ie.defaultView)==null?void 0:G.visualViewport)}),q.forEach(j=>{j.addEventListener("scroll",J,{passive:!0})}),()=>{a&&(ie.removeEventListener("keydown",A?M:D,A),ie.removeEventListener("compositionstart",ne),ie.removeEventListener("compositionend",Z)),v&&ie.removeEventListener(l,I?U:$,I),q.forEach(j=>{j.removeEventListener("scroll",J)}),window.clearTimeout(Q)}},[s,i,a,v,l,n,r,d,o,E,T,D,A,M,$,I,U]),O.useEffect(()=>{b.current=!1},[v,l]);const F=O.useMemo(()=>({onKeyDown:D,[vqe[f]]:Q=>{c&&r(!1,Q.nativeEvent,"reference-press")}}),[D,r,c,f]),H=O.useMemo(()=>({onKeyDown:D,onMouseDown(){w.current=!0},onMouseUp(){w.current=!0},[bqe[l]]:()=>{b.current=!0}}),[D,l]);return O.useMemo(()=>o?{reference:F,floating:H}:{},[o,F,H])}function _qe(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=V_e(),s=O.useRef({}),[o]=O.useState(()=>fqe()),a=nQ()!=null,[u,l]=O.useState(r.reference),c=py((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),f=O.useMemo(()=>({setPositionReference:l}),[]),d=O.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return O.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:d,events:o,floatingId:i,refs:f}),[t,c,d,o,i,f])}function sQ(e){e===void 0&&(e={});const{nodeId:t}=e,n=_qe({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=O.useState(null),[a,u]=O.useState(null),c=(i==null?void 0:i.domReference)||s,f=O.useRef(null),d=rQ();y0(()=>{c&&(f.current=c)},[c]);const h=rqe({...e,elements:{...i,...a&&{reference:a}}}),p=O.useCallback(w=>{const E=Fc(w)?{getBoundingClientRect:()=>w.getBoundingClientRect(),contextElement:w}:w;u(E),h.refs.setReference(E)},[h.refs]),m=O.useCallback(w=>{(Fc(w)||w===null)&&(f.current=w,o(w)),(Fc(h.refs.reference.current)||h.refs.reference.current===null||w!==null&&!Fc(w))&&h.refs.setReference(w)},[h.refs]),y=O.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),v=O.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),b=O.useMemo(()=>({...h,...r,refs:y,elements:v,nodeId:t}),[h,y,v,t,r]);return y0(()=>{r.dataRef.current.floatingContext=b;const w=d==null?void 0:d.nodesRef.current.find(E=>E.id===t);w&&(w.context=b)}),O.useMemo(()=>({...h,context:b,refs:y,elements:v}),[h,y,v,b])}function wqe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:o}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=O.useRef(!1),c=O.useRef(),f=O.useRef(!0);O.useEffect(()=>{if(!a)return;const h=mA(o.domReference);function p(){!n&&qX(o.domReference)&&o.domReference===Fue(cw(o.domReference))&&(l.current=!0)}function m(){f.current=!0}return h.addEventListener("blur",p),h.addEventListener("keydown",m,!0),()=>{h.removeEventListener("blur",p),h.removeEventListener("keydown",m,!0)}},[o.domReference,n,a]),O.useEffect(()=>{if(!a)return;function h(p){let{reason:m}=p;(m==="reference-press"||m==="escape-key")&&(l.current=!0)}return i.on("openchange",h),()=>{i.off("openchange",h)}},[i,a]),O.useEffect(()=>()=>{clearTimeout(c.current)},[]);const d=O.useMemo(()=>({onPointerDown(h){oHe(h.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(h){if(l.current)return;const p=QS(h.nativeEvent);if(u&&Fc(p))try{if(aHe()&&uHe())throw Error();if(!p.matches(":focus-visible"))return}catch{if(!f.current&&!hHe(p))return}r(!0,h.nativeEvent,"focus")},onBlur(h){l.current=!1;const p=h.relatedTarget,m=h.nativeEvent,y=Fc(p)&&p.hasAttribute(iQ("focus-guard"))&&p.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var v;const b=Fue(o.domReference?o.domReference.ownerDocument:document);!p&&b===o.domReference||lD((v=s.current.floatingContext)==null?void 0:v.refs.floating.current,b)||lD(o.domReference,b)||y||r(!1,m,"focus")})}}),[s,o.domReference,r,u]);return O.useMemo(()=>a?{reference:d}:{},[a,d])}const Que="active",Jue="selected";function ez(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[Que]:o,[Jue]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1,[yqe]:""},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[Que,Jue].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(l))==null?void 0:d.map(y=>y(...p)).find(y=>y!==void 0)}}}else o[l]=c}),o),{})}}function Eqe(e){e===void 0&&(e=[]);const t=e.map(a=>a==null?void 0:a.reference),n=e.map(a=>a==null?void 0:a.floating),r=e.map(a=>a==null?void 0:a.item),i=O.useCallback(a=>ez(a,e,"reference"),t),s=O.useCallback(a=>ez(a,e,"floating"),n),o=O.useCallback(a=>ez(a,e,"item"),r);return O.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:o}),[i,s,o])}const Tqe=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function Sqe(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=Tqe.get(o))!=null?n:o,u=V_e(),c=nQ()!=null,f=O.useMemo(()=>a==="tooltip"||o==="label"?{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},[a,i,c,r,u,o]),d=O.useMemo(()=>{const p={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?p:{...p,...a==="menu"&&{"aria-labelledby":u}}},[a,i,u,o]),h=O.useCallback(p=>{let{active:m,selected:y}=p;const v={role:"option",...m&&{id:i+"-option"}};switch(o){case"select":return{...v,"aria-selected":m&&y};case"combobox":return{...v,...m&&{"aria-selected":!0}}}return{}},[i,o]);return O.useMemo(()=>s?{reference:f,floating:d,item:h}:{},[s,f,d,h])}function W_e(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function Zue(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function ele(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const Cqe={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function Aqe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:t,height:t,transform:"rotate(45deg)",position:"absolute",[Cqe[u]]:r},f=-t/2;return u==="left"?{...c,...Zue(l,o,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:u==="right"?{...c,...Zue(l,o,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:u==="top"?{...c,...ele(l,s,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:u==="bottom"?{...c,...ele(l,s,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const oQ=O.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:f}=y1();return s?S.jsx("div",{...l,ref:c,style:{...u,...Aqe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:o,arrowY:a})}}):null});oQ.displayName="@mantine/core/FloatingArrow";var G_e={root:"m_9814e45f"};const Iqe={zIndex:uf("modal")},kqe=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&Um(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${Ke(i)})`:void 0,"--overlay-radius":s===void 0?void 0:Ti(s),"--overlay-z-index":o==null?void 0:o.toString()}}),sC=Yo((e,t)=>{const n=Je("Overlay",Iqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:m,color:y,backgroundOpacity:v,mod:b,...w}=n,E=Zt({name:"Overlay",props:n,classes:G_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:kqe});return S.jsx(je,{ref:t,...E("root"),mod:[{center:c,fixed:l},b],...w,children:f})});sC.classes=G_e;sC.displayName="@mantine/core/Overlay";function Rqe(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const Nqe={},Y_e=O.forwardRef((e,t)=>{const{children:n,target:r,...i}=Je("Portal",Nqe,e),[s,o]=O.useState(!1),a=O.useRef(null);return wE(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:Rqe(i),D$(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:V8.createPortal(S.jsx(S.Fragment,{children:n}),a.current)});Y_e.displayName="@mantine/core/Portal";function fx({withinPortal:e=!0,children:t,...n}){return e?S.jsx(Y_e,{...n,children:t}):S.jsx(S.Fragment,{children:t})}fx.displayName="@mantine/core/OptionalPortal";const Bk=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${e==="bottom"?10:-10}px)`},transitionProperty:"transform, opacity"}),R4={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...Bk("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...Bk("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...Bk("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...Bk("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...Bk("top"),common:{transformOrigin:"top right"}}},tle={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function Dqe({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in R4?{transitionProperty:R4[e].transitionProperty,...i,...R4[e].common,...R4[e][tle[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[tle[t]]}}function Pqe({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a,enterDelay:u,exitDelay:l}){const c=No(),f=j8(),d=c.respectReducedMotion?f:!1,[h,p]=O.useState(d?0:e),[m,y]=O.useState(r?"entered":"exited"),v=O.useRef(-1),b=O.useRef(-1),w=O.useRef(-1),E=A=>{const I=A?i:s,R=A?o:a;window.clearTimeout(v.current);const D=d?0:A?e:t;p(D),D===0?(typeof I=="function"&&I(),typeof R=="function"&&R(),y(A?"entered":"exited")):w.current=requestAnimationFrame(()=>{PR.flushSync(()=>{y(A?"pre-entering":"pre-exiting")}),w.current=requestAnimationFrame(()=>{typeof I=="function"&&I(),y(A?"entering":"exiting"),v.current=window.setTimeout(()=>{typeof R=="function"&&R(),y(A?"entered":"exited")},D)})})},T=A=>{if(window.clearTimeout(b.current),typeof(A?u:l)!="number"){E(A);return}b.current=window.setTimeout(()=>{E(A)},A?u:l)};return D0(()=>{T(r)},[r]),O.useEffect(()=>()=>{window.clearTimeout(v.current),cancelAnimationFrame(w.current)},[]),{transitionDuration:h,transitionStatus:m,transitionTimingFunction:n||"ease"}}function ng({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c,enterDelay:f,exitDelay:d}){const{transitionDuration:h,transitionStatus:p,transitionTimingFunction:m}=Pqe({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c,enterDelay:f,exitDelay:d});return h===0?i?S.jsx(S.Fragment,{children:s({})}):e?s({display:"none"}):null:p==="exited"?e?s({display:"none"}):null:S.jsx(S.Fragment,{children:s(Dqe({transition:t,duration:h,state:p,timingFunction:m}))})}ng.displayName="@mantine/core/Transition";const[Oqe,K_e]=Su("Popover component was not found in the tree");function K8({children:e,active:t=!0,refProp:n="ref",innerRef:r}){const i=lze(t),s=Ro(i,r);return ax(e)?O.cloneElement(e,{[n]:s}):e}function X_e(e){return S.jsx(HX,{tabIndex:-1,"data-autofocus":!0,...e})}K8.displayName="@mantine/core/FocusTrap";X_e.displayName="@mantine/core/FocusTrapInitialFocus";K8.InitialFocus=X_e;var Q_e={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const Mqe={},aQ=At((e,t)=>{var y,v,b,w;const n=Je("PopoverDropdown",Mqe,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=K_e(),h=Gxe({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=Ro(t,d.floating);return d.disabled?null:S.jsx(fx,{...d.portalProps,withinPortal:d.withinPortal,children:S.jsx(ng,{mounted:d.opened,...d.transitionProps,transition:((y=d.transitionProps)==null?void 0:y.transition)||"fade",duration:((v=d.transitionProps)==null?void 0:v.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((b=d.transitionProps)==null?void 0:b.exitDuration)=="number"?d.transitionProps.exitDuration:(w=d.transitionProps)==null?void 0:w.duration,children:E=>S.jsx(K8,{active:d.trapFocus&&d.opened,innerRef:m,children:S.jsxs(je,{...p,...f,variant:u,onKeyDownCapture:XUe(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,"data-fixed":d.floatingStrategy==="fixed"||void 0,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...E,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:Ke(d.width)},d.resolvedStyles.dropdown,c==null?void 0:c.dropdown,i]}),children:[o,S.jsx(oQ,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});aQ.classes=Q_e;aQ.displayName="@mantine/core/PopoverDropdown";const Lqe={refProp:"ref",popupType:"dialog"},J_e=At((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=Je("PopoverTarget",Lqe,e);if(!ax(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=K_e(),u=Ro(a.reference,U8(n),t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return O.cloneElement(n,{...o,...l,...a.targetProps,className:Co(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});J_e.displayName="@mantine/core/PopoverTarget";function Z_e({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=O.useState(0);O.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current&&e)return KHe(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),D0(()=>{t.update()},r),D0(()=>{s(o=>o+1)},[e])}function $qe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function Fqe(e,t){const n=$qe(e.middlewares),r=[j_e(e.offset)];return n.shift&&r.push(tQ(typeof n.shift=="boolean"?{limiter:Wue(),padding:5}:{limiter:Wue(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?$$():$$(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?EN():EN(n.inline)),r.push(U_e({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(sqe({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o,...a}){var c;const l=((c=t().refs.floating.current)==null?void 0:c.style)??{};n.size&&(typeof n.size=="object"&&n.size.apply?n.size.apply({rects:i,availableWidth:s,availableHeight:o,...a}):Object.assign(l,{maxWidth:`${s}px`,maxHeight:`${o}px`})),e.width==="target"&&Object.assign(l,{width:`${i.reference.width}px`})}})),r}function Bqe(e){const[t,n]=Wo({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=O.useRef(t),i=()=>{t&&n(!1)},s=()=>n(!t),o=sQ({strategy:e.strategy,placement:e.position,middleware:Fqe(e,()=>o)});return Z_e({opened:t,position:e.position,positionDependencies:e.positionDependencies||[],floating:o}),D0(()=>{var a;(a=e.onPositionChange)==null||a.call(e,o.placement)},[o.placement]),D0(()=>{var a,u;t!==r.current&&(t?(u=e.onOpen)==null||u.call(e):(a=e.onClose)==null||a.call(e)),r.current=t},[t,e.onClose,e.onOpen]),{floating:o,controlled:typeof e.opened=="boolean",opened:t,onClose:i,onToggle:s}}const jqe={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:uf("popover"),__staticSelector:"Popover",width:"max-content"},Uqe=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:Ti(t),"--popover-shadow":DX(n)}});function vu(e){var ft,wt,ke,Oe,dt,Lt;const t=Je("Popover",jqe,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,onExitTransitionEnd:l,onEnterTransitionEnd:c,width:f,middlewares:d,withArrow:h,arrowSize:p,arrowOffset:m,arrowRadius:y,arrowPosition:v,unstyled:b,classNames:w,styles:E,closeOnClickOutside:T,withinPortal:A,portalProps:I,closeOnEscape:R,clickOutsideEvents:D,trapFocus:M,onClose:$,onOpen:U,onChange:F,zIndex:H,radius:Q,shadow:J,id:ne,defaultOpened:Z,__staticSelector:ie,withRoles:q,disabled:j,returnFocus:G,variant:V,keepMounted:Y,vars:ee,floatingStrategy:ae,withOverlay:_e,overlayProps:pe,...Te}=t,Le=Zt({name:ie,props:t,classes:Q_e,classNames:w,styles:E,unstyled:b,rootSelector:"dropdown",vars:ee,varsResolver:Uqe}),{resolvedStyles:ye}=EE({classNames:w,styles:E,props:t}),he=O.useRef(null),[$e,Ne]=O.useState(null),[tt,it]=O.useState(null),{dir:Me}=y1(),Ge=pl(ne),at=Bqe({middlewares:d,width:f,position:W_e(Me,r),offset:typeof i=="number"?i+(h?p/2:0):i,arrowRef:he,arrowOffset:m,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:Z,onChange:F,onOpen:U,onClose:$,strategy:ae});eze(()=>T&&at.onClose(),D,[$e,tt]);const yt=O.useCallback(Ft=>{Ne(Ft),at.floating.refs.setReference(Ft)},[at.floating.refs.setReference]),Tt=O.useCallback(Ft=>{it(Ft),at.floating.refs.setFloating(Ft)},[at.floating.refs.setFloating]),Ot=O.useCallback(()=>{var Ft;(Ft=u==null?void 0:u.onExited)==null||Ft.call(u),l==null||l()},[u==null?void 0:u.onExited,l]),qe=O.useCallback(()=>{var Ft;(Ft=u==null?void 0:u.onEntered)==null||Ft.call(u),c==null||c()},[u==null?void 0:u.onEntered,c]);return S.jsxs(Oqe,{value:{returnFocus:G,disabled:j,controlled:at.controlled,reference:yt,floating:Tt,x:at.floating.x,y:at.floating.y,arrowX:(ke=(wt=(ft=at.floating)==null?void 0:ft.middlewareData)==null?void 0:wt.arrow)==null?void 0:ke.x,arrowY:(Lt=(dt=(Oe=at.floating)==null?void 0:Oe.middlewareData)==null?void 0:dt.arrow)==null?void 0:Lt.y,opened:at.opened,arrowRef:he,transitionProps:{...u,onExited:Ot,onEntered:qe},width:f,withArrow:h,arrowSize:p,arrowOffset:m,arrowRadius:y,arrowPosition:v,placement:at.floating.placement,trapFocus:M,withinPortal:A,portalProps:I,zIndex:H,radius:Q,shadow:J,closeOnEscape:R,onClose:at.onClose,onToggle:at.onToggle,getTargetId:()=>`${Ge}-target`,getDropdownId:()=>`${Ge}-dropdown`,withRoles:q,targetProps:Te,__staticSelector:ie,classNames:w,styles:E,unstyled:b,variant:V,keepMounted:Y,getStyles:Le,resolvedStyles:ye,floatingStrategy:ae},children:[n,_e&&S.jsx(ng,{transition:"fade",mounted:at.opened,duration:(u==null?void 0:u.duration)||250,exitDuration:(u==null?void 0:u.exitDuration)||250,children:Ft=>S.jsx(fx,{withinPortal:A,children:S.jsx(sC,{...pe,...Le("overlay",{className:pe==null?void 0:pe.className,style:[Ft,pe==null?void 0:pe.style]})})})})]})}vu.Target=J_e;vu.Dropdown=aQ;vu.displayName="@mantine/core/Popover";vu.extend=e=>e;var xp={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const ewe=O.forwardRef(({className:e,...t},n)=>S.jsxs(je,{component:"span",className:Co(xp.barsLoader,e),...t,ref:n,children:[S.jsx("span",{className:xp.bar}),S.jsx("span",{className:xp.bar}),S.jsx("span",{className:xp.bar})]}));ewe.displayName="@mantine/core/Bars";const twe=O.forwardRef(({className:e,...t},n)=>S.jsxs(je,{component:"span",className:Co(xp.dotsLoader,e),...t,ref:n,children:[S.jsx("span",{className:xp.dot}),S.jsx("span",{className:xp.dot}),S.jsx("span",{className:xp.dot})]}));twe.displayName="@mantine/core/Dots";const nwe=O.forwardRef(({className:e,...t},n)=>S.jsx(je,{component:"span",className:Co(xp.ovalLoader,e),...t,ref:n}));nwe.displayName="@mantine/core/Oval";const rwe={bars:ewe,oval:nwe,dots:twe},zqe={loaders:rwe,type:"oval"},Vqe=(e,{size:t,color:n})=>({root:{"--loader-size":Kn(t,"loader-size"),"--loader-color":n?Hi(n,e):void 0}}),mh=At((e,t)=>{const n=Je("Loader",zqe,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...m}=n,y=Zt({name:"Loader",props:n,classes:xp,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:o,varsResolver:Vqe});return p?S.jsx(je,{...y("root"),ref:t,...m,children:p}):S.jsx(je,{...y("root"),ref:t,component:d[s],variant:h,size:r,...m})});mh.defaultLoaders=rwe;mh.classes=xp;mh.displayName="@mantine/core/Loader";var vA={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const nle={orientation:"horizontal"},Hqe=(e,{borderWidth:t})=>({group:{"--ai-border-width":Ke(t)}}),uQ=At((e,t)=>{const n=Je("ActionIconGroup",nle,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=Je("ActionIconGroup",nle,e),p=Zt({name:"ActionIconGroup",props:n,classes:vA,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:Hqe,rootSelector:"group"});return S.jsx(je,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});uQ.classes=vA;uQ.displayName="@mantine/core/ActionIconGroup";const rle={},qqe=(e,{radius:t,color:n,gradient:r,variant:i,autoContrast:s,size:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:s});return{groupSection:{"--section-height":Kn(o,"section-height"),"--section-padding-x":Kn(o,"section-padding-x"),"--section-fz":Ba(o),"--section-radius":t===void 0?void 0:Ti(t),"--section-bg":n||i?a.background:void 0,"--section-color":a.color,"--section-bd":n||i?a.border:void 0}}},lQ=At((e,t)=>{const n=Je("ActionIconGroupSection",rle,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,variant:l,gradient:c,radius:f,autoContrast:d,...h}=Je("ActionIconGroupSection",rle,e),p=Zt({name:"ActionIconGroupSection",props:n,classes:vA,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,varsResolver:qqe,rootSelector:"groupSection"});return S.jsx(je,{...p("groupSection"),ref:t,variant:l,...h})});lQ.classes=vA;lQ.displayName="@mantine/core/ActionIconGroupSection";const Wqe={},Gqe=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":Kn(t,"ai-size"),"--ai-radius":n===void 0?void 0:Ti(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},dx=Yo((e,t)=>{const n=Je("ActionIcon",Wqe,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:m,vars:y,children:v,disabled:b,"data-disabled":w,autoContrast:E,mod:T,...A}=n,I=Zt({name:["ActionIcon",p],props:n,className:r,style:u,classes:vA,classNames:o,styles:a,unstyled:i,vars:y,varsResolver:Gqe});return S.jsxs(id,{...I("root",{active:!b&&!l&&!w}),...A,unstyled:i,variant:s,size:f,disabled:b||l,ref:t,mod:[{loading:l,disabled:b||w},T],children:[S.jsx(ng,{mounted:!!l,transition:"slide-down",duration:150,children:R=>S.jsx(je,{component:"span",...I("loader",{style:R}),"aria-hidden":!0,children:S.jsx(mh,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),S.jsx(je,{component:"span",mod:{loading:l},...I("icon"),children:v})]})});dx.classes=vA;dx.displayName="@mantine/core/ActionIcon";dx.Group=uQ;dx.GroupSection=lQ;const iwe=O.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>S.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:S.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));iwe.displayName="@mantine/core/CloseIcon";var swe={root:"m_86a44da5","root--subtle":"m_220c80f2"};const Yqe={variant:"subtle"},Kqe=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":Kn(t,"cb-size"),"--cb-radius":n===void 0?void 0:Ti(n),"--cb-icon-size":Ke(r)}}),hx=Yo((e,t)=>{const n=Je("CloseButton",Yqe,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:m,mod:y,__staticSelector:v,...b}=n,w=Zt({name:v||"CloseButton",props:n,className:a,style:l,classes:swe,classNames:u,styles:c,unstyled:f,vars:s,varsResolver:Kqe});return S.jsxs(id,{ref:t,...b,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},y],...w("root",{variant:p,active:!h&&!d}),children:[m||S.jsx(iwe,{}),i]})});hx.classes=swe;hx.displayName="@mantine/core/CloseButton";function Xqe(e){return O.Children.toArray(e).filter(Boolean)}var owe={root:"m_4081bf90"};const Qqe={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},Jqe=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":qo(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),$i=At((e,t)=>{const n=Je("Group",Qqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:m,variant:y,__size:v,mod:b,...w}=n,E=Xqe(u),T=E.length,A=qo(l??"md"),R={childWidth:`calc(${100/T}% - (${A} - ${A} / ${T}))`},D=Zt({name:"Group",props:n,stylesCtx:R,className:i,style:s,classes:owe,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:Jqe});return S.jsx(je,{...D("root"),ref:t,variant:y,mod:[{grow:h},b],size:v,...w,children:E})});$i.classes=owe;$i.displayName="@mantine/core/Group";const[Zqe,b1]=Su("ModalBase component was not found in tree");function eWe({opened:e,transitionDuration:t}){const[n,r]=O.useState(e),i=O.useRef(-1),o=j8()?0:t;return O.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function tWe({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=pl(e),[u,l]=O.useState(!1),[c,f]=O.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=eWe({opened:n,transitionDuration:d});return Qxe("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),Gxe({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const awe=O.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,onExitTransitionEnd:s,onEnterTransitionEnd:o,trapFocus:a,closeOnEscape:u,returnFocus:l,closeOnClickOutside:c,withinPortal:f,portalProps:d,lockScroll:h,children:p,zIndex:m,shadow:y,padding:v,__vars:b,unstyled:w,removeScrollProps:E,...T},A)=>{const{_id:I,titleMounted:R,bodyMounted:D,shouldLockScroll:M,setTitleMounted:$,setBodyMounted:U}=tWe({id:r,transitionProps:i,opened:t,trapFocus:a,closeOnEscape:u,onClose:n,returnFocus:l}),{key:F,...H}=E||{};return S.jsx(fx,{...d,withinPortal:f,children:S.jsx(Zqe,{value:{opened:t,onClose:n,closeOnClickOutside:c,onExitTransitionEnd:s,onEnterTransitionEnd:o,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${I}-title`,getBodyId:()=>`${I}-body`,titleMounted:R,bodyMounted:D,setTitleMounted:$,setBodyMounted:U,trapFocus:a,closeOnEscape:u,zIndex:m,unstyled:w},children:S.jsx(tC,{enabled:M&&h,...H,children:S.jsx(je,{ref:A,...T,__vars:{...b,"--mb-z-index":(m||uf("modal")).toString(),"--mb-shadow":DX(y),"--mb-padding":qo(v)},children:p})},F)})})});awe.displayName="@mantine/core/ModalBase";function nWe(){const e=b1();return O.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var oC={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const uwe=O.forwardRef(({className:e,...t},n)=>{const r=nWe(),i=b1();return S.jsx(je,{ref:n,...t,id:r,className:Co({[oC.body]:!i.unstyled},e)})});uwe.displayName="@mantine/core/ModalBaseBody";const lwe=O.forwardRef(({className:e,onClick:t,...n},r)=>{const i=b1();return S.jsx(hx,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:Co({[oC.close]:!i.unstyled},e),unstyled:i.unstyled})});lwe.displayName="@mantine/core/ModalBaseCloseButton";const cwe=O.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=b1();return S.jsx(ng,{mounted:a.opened,transition:"pop",...a.transitionProps,onExited:()=>{var u,l,c;(u=a.onExitTransitionEnd)==null||u.call(a),(c=(l=a.transitionProps)==null?void 0:l.onExited)==null||c.call(l)},onEntered:()=>{var u,l,c;(u=a.onEnterTransitionEnd)==null||u.call(a),(c=(l=a.transitionProps)==null?void 0:l.onEntered)==null||c.call(l)},...e,children:u=>S.jsx("div",{...n,className:Co({[oC.inner]:!a.unstyled},n.className),children:S.jsx(K8,{active:a.opened&&a.trapFocus,innerRef:o,children:S.jsx(pA,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,style:[i,u],className:Co({[oC.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})});cwe.displayName="@mantine/core/ModalBaseContent";const fwe=O.forwardRef(({className:e,...t},n)=>{const r=b1();return S.jsx(je,{component:"header",ref:n,className:Co({[oC.header]:!r.unstyled},e),...t})});fwe.displayName="@mantine/core/ModalBaseHeader";const rWe={duration:200,timingFunction:"ease",transition:"fade"};function iWe(e){const t=b1();return{...rWe,...t.transitionProps,...e}}const dwe=O.forwardRef(({onClick:e,transitionProps:t,style:n,visible:r,...i},s)=>{const o=b1(),a=iWe(t);return S.jsx(ng,{mounted:r!==void 0?r:o.opened,...a,transition:"fade",children:u=>S.jsx(sC,{ref:s,fixed:!0,style:[n,u],zIndex:o.zIndex,unstyled:o.unstyled,onClick:l=>{e==null||e(l),o.closeOnClickOutside&&o.onClose()},...i})})});dwe.displayName="@mantine/core/ModalBaseOverlay";function sWe(){const e=b1();return O.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const hwe=O.forwardRef(({className:e,...t},n)=>{const r=sWe(),i=b1();return S.jsx(je,{component:"h2",ref:n,className:Co({[oC.title]:!i.unstyled},e),...t,id:r})});hwe.displayName="@mantine/core/ModalBaseTitle";function oWe({children:e}){return S.jsx(S.Fragment,{children:e})}const[aWe,uWe]=ux({size:"sm"}),lWe={},pwe=At((e,t)=>{const n=Je("InputClearButton",lWe,e),{size:r,variant:i,vars:s,classNames:o,styles:a,...u}=n,l=uWe(),{resolvedClassNames:c,resolvedStyles:f}=EE({classNames:o,styles:a,props:n});return S.jsx(hx,{variant:i||"transparent",ref:t,size:r||(l==null?void 0:l.size)||"sm",classNames:c,styles:f,__staticSelector:"InputClearButton",...u})});pwe.displayName="@mantine/core/InputClearButton";const[cWe,bA]=ux({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var gh={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const ile={},fWe=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${Ba(t)} - ${Ke(2)})`}}),X8=At((e,t)=>{const n=Je("InputDescription",ile,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=Je("InputDescription",ile,n),p=bA(),m=Zt({name:["InputWrapper",c],props:n,classes:gh,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:fWe}),y=f&&(p==null?void 0:p.getStyles)||m;return S.jsx(je,{component:"p",ref:t,variant:d,size:l,...y("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});X8.classes=gh;X8.displayName="@mantine/core/InputDescription";const dWe={},hWe=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${Ba(t)} - ${Ke(2)})`}}),Q8=At((e,t)=>{const n=Je("InputError",dWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=Zt({name:["InputWrapper",c],props:n,classes:gh,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:hWe}),m=bA(),y=f&&(m==null?void 0:m.getStyles)||p;return S.jsx(je,{component:"p",ref:t,variant:d,size:l,...y("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});Q8.classes=gh;Q8.displayName="@mantine/core/InputError";const sle={labelElement:"label"},pWe=(e,{size:t})=>({label:{"--input-label-size":Ba(t),"--input-asterisk-color":void 0}}),J8=At((e,t)=>{const n=Je("InputLabel",sle,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:m,variant:y,mod:v,...b}=Je("InputLabel",sle,n),w=Zt({name:["InputWrapper",m],props:n,classes:gh,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:pWe}),E=bA(),T=(E==null?void 0:E.getStyles)||w;return S.jsxs(je,{...T("label",E!=null&&E.getStyles?{className:i,style:s}:void 0),component:l,variant:y,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},v],onMouseDown:A=>{h==null||h(A),!A.defaultPrevented&&A.detail>1&&A.preventDefault()},...b,children:[p,f&&S.jsx("span",{...T("required"),"aria-hidden":!0,children:" *"})]})});J8.classes=gh;J8.displayName="@mantine/core/InputLabel";const ole={},cQ=At((e,t)=>{const n=Je("InputPlaceholder",ole,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=Je("InputPlaceholder",ole,n),p=Zt({name:["InputPlaceholder",l],props:n,classes:gh,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return S.jsx(je,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});cQ.classes=gh;cQ.displayName="@mantine/core/InputPlaceholder";function mWe(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const gWe={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},yWe=(e,{size:t})=>({label:{"--input-label-size":Ba(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${Ba(t)} - ${Ke(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${Ba(t)} - ${Ke(2)})`}}),fQ=At((e,t)=>{const n=Je("InputWrapper",gWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:m,description:y,labelProps:v,descriptionProps:b,errorProps:w,labelElement:E,children:T,withAsterisk:A,id:I,required:R,__stylesApiProps:D,mod:M,...$}=n,U=Zt({name:["InputWrapper",f],props:D||n,classes:gh,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:yWe}),F={size:l,variant:c,__staticSelector:f},H=pl(I),Q=typeof A=="boolean"?A:R,J=(w==null?void 0:w.id)||`${H}-error`,ne=(b==null?void 0:b.id)||`${H}-description`,Z=H,ie=!!m&&typeof m!="boolean",q=!!y,j=`${ie?J:""} ${q?ne:""}`,G=j.trim().length>0?j.trim():void 0,V=(v==null?void 0:v.id)||`${H}-label`,Y=p&&S.jsx(J8,{labelElement:E,id:V,htmlFor:Z,required:Q,...F,...v,children:p},"label"),ee=q&&S.jsx(X8,{...b,...F,size:(b==null?void 0:b.size)||F.size,id:(b==null?void 0:b.id)||ne,children:y},"description"),ae=S.jsx(O.Fragment,{children:d(T)},"input"),_e=ie&&O.createElement(Q8,{...w,...F,size:(w==null?void 0:w.size)||F.size,key:"error",id:(w==null?void 0:w.id)||J},m),pe=h.map(Te=>{switch(Te){case"label":return Y;case"input":return ae;case"description":return ee;case"error":return _e;default:return null}});return S.jsx(cWe,{value:{getStyles:U,describedBy:G,inputId:Z,labelId:V,...mWe(h,{hasDescription:q,hasError:ie})},children:S.jsx(je,{ref:t,variant:c,size:l,mod:[{error:!!m},M],...U("root"),...$,children:pe})})});fQ.classes=gh;fQ.displayName="@mantine/core/InputWrapper";const vWe={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},bWe=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":Kn(t.size,"input-height"),"--input-fz":Ba(t.size),"--input-radius":t.radius===void 0?void 0:Ti(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?Ke(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?Ke(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?Kn(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),Yi=Yo((e,t)=>{const n=Je("Input",vWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:m,leftSectionProps:y,leftSectionWidth:v,rightSection:b,rightSectionProps:w,rightSectionWidth:E,rightSectionPointerEvents:T,leftSectionPointerEvents:A,variant:I,vars:R,pointer:D,multiline:M,radius:$,id:U,withAria:F,withErrorStyles:H,mod:Q,inputSize:J,__clearSection:ne,__clearable:Z,__defaultRightSection:ie,...q}=n,{styleProps:j,rest:G}=SE(q),V=bA(),Y={offsetBottom:V==null?void 0:V.offsetBottom,offsetTop:V==null?void 0:V.offsetTop},ee=Zt({name:["Input",l],props:c||n,classes:gh,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:Y,rootSelector:"wrapper",vars:R,varsResolver:bWe}),ae=F?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":V==null?void 0:V.describedBy,id:(V==null?void 0:V.inputId)||U}:{},_e=b||Z&&ne||ie;return S.jsx(aWe,{value:{size:f||"sm"},children:S.jsxs(je,{...ee("wrapper"),...j,...d,mod:[{error:!!h&&H,pointer:D,disabled:p,multiline:M,"data-with-right-section":!!b,"data-with-left-section":!!m},Q],variant:I,size:f,children:[m&&S.jsx("div",{...y,"data-position":"left",...ee("section",{className:y==null?void 0:y.className,style:y==null?void 0:y.style}),children:m}),S.jsx(je,{component:"input",...G,...ae,ref:t,required:u,mod:{disabled:p,error:!!h&&H},variant:I,__size:J,...ee("input")}),_e&&S.jsx("div",{...w,"data-position":"right",...ee("section",{className:w==null?void 0:w.className,style:w==null?void 0:w.style}),children:_e})]})})});Yi.classes=gh;Yi.Wrapper=fQ;Yi.Label=J8;Yi.Error=Q8;Yi.Description=X8;Yi.Placeholder=cQ;Yi.ClearButton=pwe;Yi.displayName="@mantine/core/Input";function xWe(e,t,n){const r=Je(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:y,wrapperProps:v,id:b,size:w,style:E,inputContainer:T,inputWrapperOrder:A,withAsterisk:I,variant:R,vars:D,mod:M,...$}=r,{styleProps:U,rest:F}=SE($),H={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:y,unstyled:f,styles:l,size:w,style:E,inputContainer:T,inputWrapperOrder:A,withAsterisk:I,variant:R,id:b,mod:M,...v};return{...F,classNames:u,styles:l,unstyled:f,wrapperProps:{...H,...U},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:w,__staticSelector:d,__stylesApiProps:h||r,error:o,variant:R,id:b}}}const _We={__staticSelector:"InputBase",withAria:!0},yh=Yo((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=xWe("InputBase",_We,e);return S.jsx(Yi.Wrapper,{...r,children:S.jsx(Yi,{...n,...i,ref:t})})});yh.classes={...Yi.classes,...Yi.Wrapper.classes};yh.displayName="@mantine/core/InputBase";const wWe={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var mwe={root:"m_8bffd616"};const EWe={},an=Yo((e,t)=>{const n=Je("Flex",EWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m,...y}=n,v=Zt({name:"Flex",classes:mwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),b=No(),w=NP(),E=a_e({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m},theme:b,data:wWe});return S.jsxs(S.Fragment,{children:[E.hasResponsiveStyles&&S.jsx(TE,{selector:`.${w}`,styles:E.styles,media:E.media}),S.jsx(je,{ref:t,...v("root",{className:w,style:ox(E.inlineStyles)}),...y})]})});an.classes=mwe;an.displayName="@mantine/core/Flex";function TWe(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function SWe({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const i=O.useRef(-1),[s,o]=O.useState(!1),[a,u]=O.useState(typeof r=="boolean"?r:!1),l=()=>{if(!e||!t||!n.current)return;const h=e.getBoundingClientRect(),p=t.getBoundingClientRect(),m=window.getComputedStyle(e),y=window.getComputedStyle(t),v=Yv(m.borderTopWidth)+Yv(y.borderTopWidth),b=Yv(m.borderLeftWidth)+Yv(y.borderLeftWidth),w={top:h.top-p.top-v,left:h.left-p.left-b,width:h.width,height:h.height};n.current.style.transform=`translateY(${w.top}px) translateX(${w.left}px)`,n.current.style.width=`${w.width}px`,n.current.style.height=`${w.height}px`},c=()=>{window.clearTimeout(i.current),n.current&&(n.current.style.transitionDuration="0ms"),l(),i.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},f=O.useRef(null),d=O.useRef(null);return O.useEffect(()=>{if(l(),e)return f.current=new ResizeObserver(c),f.current.observe(e),t&&(d.current=new ResizeObserver(c),d.current.observe(t)),()=>{var h,p;(h=f.current)==null||h.disconnect(),(p=d.current)==null||p.disconnect()}},[t,e]),O.useEffect(()=>{if(t){const h=p=>{TWe(p.target,t)&&(c(),u(!1))};return t.addEventListener("transitionend",h),()=>{t.removeEventListener("transitionend",h)}}},[t]),xze(()=>{e_e()!=="test"&&o(!0)},20,{autoInvoke:!0}),wze(h=>{h.forEach(p=>{p.type==="attributes"&&p.attributeName==="dir"&&c()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:a}}var gwe={root:"m_96b553a6"};const CWe={},AWe=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),dQ=At((e,t)=>{const n=Je("FloatingIndicator",CWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,target:l,parent:c,transitionDuration:f,mod:d,displayAfterTransitionEnd:h,...p}=n,m=Zt({name:"FloatingIndicator",classes:gwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:AWe}),y=O.useRef(null),{initialized:v,hidden:b}=SWe({target:l,parent:c,ref:y,displayAfterTransitionEnd:h}),w=Ro(t,y);return!l||!c?null:S.jsx(je,{ref:w,mod:[{initialized:v,hidden:b},d],...m("root"),...p})});dQ.displayName="@mantine/core/FloatingIndicator";dQ.classes=gwe;const[IWe,hQ]=Su("Accordion component was not found in the tree");function Z8({style:e,size:t=16,...n}){return S.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:Ke(t),height:Ke(t),display:"block"},...n,children:S.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}Z8.displayName="@mantine/core/AccordionChevron";const[kWe,ywe]=Su("Accordion.Item component was not found in the tree");var PP={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const RWe={},pQ=At((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:u,onClick:l,onKeyDown:c,children:f,disabled:d,mod:h,...p}=Je("AccordionControl",RWe,e),{value:m}=ywe(),y=hQ(),v=y.isItemActive(m),b=typeof y.order=="number",w=`h${y.order}`,E=S.jsxs(id,{...p,...y.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:y.variant}),unstyled:y.unstyled,mod:["accordion-control",{active:v,"chevron-position":y.chevronPosition,disabled:d},h],ref:t,onClick:T=>{l==null||l(T),y.onChange(m)},type:"button",disabled:d,"aria-expanded":v,"aria-controls":y.getRegionId(m),id:y.getControlId(m),onKeyDown:NX({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:y.loop,orientation:"vertical",onKeyDown:c}),children:[S.jsx(je,{component:"span",mod:{rotate:!y.disableChevronRotation&&v,position:y.chevronPosition},...y.getStyles("chevron",{classNames:n,styles:s}),children:a||y.chevron}),S.jsx("span",{...y.getStyles("label",{classNames:n,styles:s}),children:f}),u&&S.jsx(je,{component:"span",mod:{"chevron-position":y.chevronPosition},...y.getStyles("icon",{classNames:n,styles:s}),children:u})]});return b?S.jsx(w,{...y.getStyles("itemTitle",{classNames:n,styles:s}),children:E}):E});pQ.displayName="@mantine/core/AccordionControl";pQ.classes=PP;const NWe={},mQ=At((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:u,...l}=Je("AccordionItem",NWe,e),c=hQ();return S.jsx(kWe,{value:{value:a},children:S.jsx(je,{ref:t,mod:[{active:c.isItemActive(a)},u],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...l})})});mQ.displayName="@mantine/core/AccordionItem";mQ.classes=PP;const DWe={},gQ=At((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...u}=Je("AccordionPanel",DWe,e),{value:l}=ywe(),c=hQ();return S.jsx(H8,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...u,in:c.isItemActive(l),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(l),"aria-labelledby":c.getControlId(l),children:S.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});gQ.displayName="@mantine/core/AccordionPanel";gQ.classes=PP;const PWe={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:S.jsx(Z8,{})},OWe=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:Ke(n),"--accordion-radius":r===void 0?void 0:Ti(r)}});function Ku(e){const t=Je("Accordion",PWe,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:u,multiple:l,value:c,defaultValue:f,onChange:d,id:h,loop:p,transitionDuration:m,disableChevronRotation:y,chevronPosition:v,chevronSize:b,order:w,chevron:E,variant:T,radius:A,...I}=t,R=pl(h),[D,M]=Wo({value:c,defaultValue:f,finalValue:l?[]:null,onChange:d}),$=H=>Array.isArray(D)?D.includes(H):H===D,U=H=>{const Q=Array.isArray(D)?D.includes(H)?D.filter(J=>J!==H):[...D,H]:H===D?null:H;M(Q)},F=Zt({name:"Accordion",classes:PP,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:OWe});return S.jsx(IWe,{value:{isItemActive:$,onChange:U,getControlId:R$(`${R}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:R$(`${R}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:y,chevronPosition:v,order:w,chevron:E,loop:p,getStyles:F,variant:T,unstyled:o},children:S.jsx(je,{...F("root"),id:R,...I,variant:T,"data-accordion":!0,children:u})})}const MWe=e=>e;Ku.extend=MWe;Ku.withProps=$Ve(Ku);Ku.classes=PP;Ku.displayName="@mantine/core/Accordion";Ku.Item=mQ;Ku.Panel=gQ;Ku.Control=pQ;Ku.Chevron=Z8;var vwe={root:"m_7f854edf"};const LWe={position:{bottom:0,right:0},zIndex:uf("modal"),withinPortal:!0},$We=(e,{zIndex:t,position:n})=>({root:{"--affix-z-index":t==null?void 0:t.toString(),"--affix-top":Ke(n==null?void 0:n.top),"--affix-left":Ke(n==null?void 0:n.left),"--affix-bottom":Ke(n==null?void 0:n.bottom),"--affix-right":Ke(n==null?void 0:n.right)}}),yQ=At((e,t)=>{const n=Je("Affix",LWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,portalProps:l,zIndex:c,withinPortal:f,position:d,...h}=n,p=Zt({name:"Affix",classes:vwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:$We});return S.jsx(fx,{...l,withinPortal:f,children:S.jsx(je,{ref:t,...p("root"),...h})})});yQ.classes=vwe;yQ.displayName="@mantine/core/Affix";var bwe={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const FWe={},BWe=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:Ti(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},Py=At((e,t)=>{const n=Je("Alert",FWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:m,onClose:y,closeButtonLabel:v,variant:b,autoContrast:w,...E}=n,T=Zt({name:"Alert",classes:bwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:BWe}),A=pl(h),I=f&&`${A}-title`||void 0,R=`${A}-body`;return S.jsx(je,{id:A,...T("root",{variant:b}),variant:b,ref:t,...E,role:"alert","aria-describedby":R,"aria-labelledby":I,children:S.jsxs("div",{...T("wrapper"),children:[p&&S.jsx("div",{...T("icon"),children:p}),S.jsxs("div",{...T("body"),children:[f&&S.jsx("div",{...T("title"),"data-with-close-button":m||void 0,children:S.jsx("span",{id:I,...T("label"),children:f})}),d&&S.jsx("div",{id:R,...T("message"),"data-variant":b,children:d})]}),m&&S.jsx(hx,{...T("closeButton"),onClick:y,variant:"transparent",size:16,iconSize:16,"aria-label":v,unstyled:a})]})})});Py.classes=bwe;Py.displayName="@mantine/core/Alert";var xwe={root:"m_b6d8b162"};function jWe(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const UWe={inherit:!1},zWe=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":Ba(i),"--text-lh":Wxe(i),"--text-gradient":t==="gradient"?jq(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?Hi(s,e):void 0}}),gt=Yo((e,t)=>{const n=Je("Text",UWe,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:m,variant:y,mod:v,size:b,...w}=n,E=Zt({name:["Text",l],props:n,classes:xwe,className:f,style:d,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:zWe});return S.jsx(je,{...E("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:y,mod:[{"data-truncate":jWe(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},v],size:b,...w})});gt.classes=xwe;gt.displayName="@mantine/core/Text";var _we={root:"m_849cf0da"};const VWe={underline:"hover"},AE=Yo((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=Je("Anchor",VWe,e);return S.jsx(gt,{component:"a",ref:t,className:Co({[_we.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});AE.classes=_we;AE.displayName="@mantine/core/Anchor";const[HWe,xA]=Su("AppShell was not found in tree");var px={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const qWe={},vQ=At((e,t)=>{const n=Je("AppShellAside",qWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=xA();return h.disabled?null:S.jsx(je,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});vQ.classes=px;vQ.displayName="@mantine/core/AppShellAside";const WWe={},bQ=At((e,t)=>{var p;const n=Je("AppShellFooter",WWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=xA();return h.disabled?null:S.jsx(je,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:Co({[tC.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});bQ.classes=px;bQ.displayName="@mantine/core/AppShellFooter";const GWe={},xQ=At((e,t)=>{var p;const n=Je("AppShellHeader",GWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=xA();return h.disabled?null:S.jsx(je,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:Co({[tC.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});xQ.classes=px;xQ.displayName="@mantine/core/AppShellHeader";const YWe={},_Q=At((e,t)=>{const n=Je("AppShellMain",YWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=xA();return S.jsx(je,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});_Q.classes=px;_Q.displayName="@mantine/core/AppShellMain";function OP(e){return typeof e=="object"?e.base:e}function MP(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function LP(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function KWe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),MP(s)){const f=Ke(OP(s));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(LP(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=Ke(s.base),e["--app-shell-aside-offset"]=Ke(s.base)),ss(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=Ke(s[f]),t[f]["--app-shell-aside-offset"]=Ke(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=o,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=PX(r.breakpoint,i.breakpoints)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=o,n[f]["--app-shell-aside-transform-rtl"]=a}}function XWe({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(MP(r)){const o=Ke(OP(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}LP(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=Ke(r.base),s&&(e["--app-shell-footer-offset"]=Ke(r.base))),ss(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=Ke(r[o]),s&&(t[o]["--app-shell-footer-offset"]=Ke(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function QWe({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(MP(r)){const o=Ke(OP(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}LP(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=Ke(r.base),s&&(e["--app-shell-header-offset"]=Ke(r.base))),ss(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=Ke(r[o]),s&&(t[o]["--app-shell-header-offset"]=Ke(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function JWe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),MP(s)){const f=Ke(OP(s));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(LP(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=Ke(s.base),e["--app-shell-navbar-offset"]=Ke(s.base)),ss(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=Ke(s[f]),t[f]["--app-shell-navbar-offset"]=Ke(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=o,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=PX(r.breakpoint,i.breakpoints)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=o,n[f]["--app-shell-navbar-transform-rtl"]=a}}function tz(e){return Number(e)===0?"0px":qo(e)}function ZWe({padding:e,baseStyles:t,minMediaStyles:n}){MP(e)&&(t["--app-shell-padding"]=tz(OP(e))),LP(e)&&(e.base&&(t["--app-shell-padding"]=tz(e.base)),ss(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=tz(e[r]))}))}function eGe({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};JWe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),KWe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),QWe({baseStyles:u,minMediaStyles:o,header:t}),XWe({baseStyles:u,minMediaStyles:o,footer:n}),ZWe({baseStyles:u,minMediaStyles:o,padding:i});const l=aD(ss(o),s.breakpoints).map(d=>({query:`(min-width: ${k$(d.px)})`,styles:o[d.value]})),c=aD(ss(a),s.breakpoints).map(d=>({query:`(max-width: ${k$(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function tGe({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=No(),o=lx(),{media:a,baseStyles:u}=eGe({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return S.jsx(TE,{media:a,styles:u,selector:o.cssVariablesSelector})}const nGe={},wQ=At((e,t)=>{const n=Je("AppShellNavbar",nGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=xA();return h.disabled?null:S.jsx(je,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});wQ.classes=px;wQ.displayName="@mantine/core/AppShellNavbar";const rGe={},EQ=Yo((e,t)=>{const n=Je("AppShellSection",rGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,f=xA();return S.jsx(je,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});EQ.classes=px;EQ.displayName="@mantine/core/AppShellSection";function iGe({transitionDuration:e,disabled:t}){const[n,r]=O.useState(!0),i=O.useRef(-1),s=O.useRef(-1);return Qxe("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>O.startTransition(()=>{r(!1)}),200)}),wE(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>O.startTransition(()=>{r(!1)}),e||0)},[t,e]),n}const sGe={withBorder:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:uf("app")},oGe=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),zi=At((e,t)=>{const n=Je("AppShell",sGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:m,layout:y,disabled:v,aside:b,footer:w,offsetScrollbars:E=y!=="alt",mod:T,...A}=n,I=Zt({name:"AppShell",classes:px,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:oGe}),R=iGe({disabled:v,transitionDuration:d});return S.jsxs(HWe,{value:{getStyles:I,withBorder:c,zIndex:m,disabled:v,offsetScrollbars:E},children:[S.jsx(tGe,{navbar:l,header:p,aside:b,footer:w,padding:f}),S.jsx(je,{ref:t,...I("root"),mod:[{resizing:R,layout:y,disabled:v},T],...A})]})});zi.classes=px;zi.displayName="@mantine/core/AppShell";zi.Navbar=wQ;zi.Header=xQ;zi.Main=_Q;zi.Aside=vQ;zi.Footer=bQ;zi.Section=EQ;function wwe(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>wwe(t))}:e}function Ewe(e){return e?e.map(t=>wwe(t)):[]}function TQ(e){return e.reduce((t,n)=>"group"in n?{...t,...TQ(n.items)}:(t[n.value]=n,t),{})}var Xc={dropdown:"m_88b62a41",search:"m_985517d8",options:"m_b2821a6e",option:"m_92253aa5",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const aGe={error:null},uGe=(e,{size:t})=>({chevron:{"--combobox-chevron-size":Kn(t,"combobox-chevron-size")}}),SQ=At((e,t)=>{const n=Je("ComboboxChevron",aGe,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=Zt({name:"ComboboxChevron",classes:Xc,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:uGe,rootSelector:"chevron"});return S.jsx(je,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:S.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});SQ.classes=Xc;SQ.displayName="@mantine/core/ComboboxChevron";const[lGe,vh]=Su("Combobox component was not found in tree"),Twe=O.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>S.jsx(Yi.ClearButton,{ref:s,tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));Twe.displayName="@mantine/core/ComboboxClearButton";const cGe={},CQ=At((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=Je("ComboboxDropdown",cGe,e),u=vh();return S.jsx(vu.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});CQ.classes=Xc;CQ.displayName="@mantine/core/ComboboxDropdown";const fGe={refProp:"ref"},Swe=At((e,t)=>{const{children:n,refProp:r}=Je("ComboboxDropdownTarget",fGe,e);if(vh(),!ax(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return S.jsx(vu.Target,{ref:t,refProp:r,children:n})});Swe.displayName="@mantine/core/ComboboxDropdownTarget";const dGe={},AQ=At((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Je("ComboboxEmpty",dGe,e),u=vh();return S.jsx(je,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});AQ.classes=Xc;AQ.displayName="@mantine/core/ComboboxEmpty";function IQ({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=vh(),[a,u]=O.useState(null),l=f=>{if(e==null||e(f),!o.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()),o.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()),o.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(f.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.dropdownOpened?o.store.listId:void 0,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const hGe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},Cwe=At((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=Je("ComboboxEventsTarget",hGe,e);if(!ax(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=vh(),f=IQ({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return O.cloneElement(n,{...f,...l,[r]:Ro(t,c.store.targetRef,U8(n))})});Cwe.displayName="@mantine/core/ComboboxEventsTarget";const pGe={},kQ=At((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Je("ComboboxFooter",pGe,e),u=vh();return S.jsx(je,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a,onMouseDown:l=>{l.preventDefault()}})});kQ.classes=Xc;kQ.displayName="@mantine/core/ComboboxFooter";const mGe={},RQ=At((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=Je("ComboboxGroup",mGe,e),c=vh();return S.jsxs(je,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&S.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});RQ.classes=Xc;RQ.displayName="@mantine/core/ComboboxGroup";const gGe={},NQ=At((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Je("ComboboxHeader",gGe,e),u=vh();return S.jsx(je,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a,onMouseDown:l=>{l.preventDefault()}})});NQ.classes=Xc;NQ.displayName="@mantine/core/ComboboxHeader";function Awe({value:e,valuesDivider:t=",",...n}){return S.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}Awe.displayName="@mantine/core/ComboboxHiddenInput";const yGe={},DQ=At((e,t)=>{const n=Je("ComboboxOption",yGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:m,...y}=n,v=vh(),b=O.useId(),w=l||b;return S.jsx(je,{...v.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...y,ref:t,id:w,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:E=>{var T;h?E.preventDefault():((T=v.onOptionSubmit)==null||T.call(v,n.value,n),u==null||u(E))},onMouseDown:E=>{E.preventDefault(),f==null||f(E)},onMouseOver:E=>{v.resetSelectionOnOptionHover&&v.store.resetSelectedOption(),d==null||d(E)}})});DQ.classes=Xc;DQ.displayName="@mantine/core/ComboboxOption";const vGe={},PQ=At((e,t)=>{const n=Je("ComboboxOptions",vGe,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=vh(),d=pl(a);return O.useEffect(()=>{f.store.setListId(d)},[d]),S.jsx(je,{ref:t,...f.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});PQ.classes=Xc;PQ.displayName="@mantine/core/ComboboxOptions";const bGe={withAriaAttributes:!0,withKeyboardNavigation:!0},OQ=At((e,t)=>{const n=Je("ComboboxSearch",bGe,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=vh(),h=d.getStyles("search"),p=IQ({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return S.jsx(Yi,{ref:Ro(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});OQ.classes=Xc;OQ.displayName="@mantine/core/ComboboxSearch";const xGe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},Iwe=At((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=Je("ComboboxTarget",xGe,e);if(!ax(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=vh(),f=IQ({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=O.cloneElement(n,{...f,...l});return S.jsx(vu.Target,{ref:Ro(t,c.store.targetRef),children:d})});Iwe.displayName="@mantine/core/ComboboxTarget";function _Ge(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function wGe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function EGe(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function MQ({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=Wo({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=O.useRef(null),c=O.useRef(-1),f=O.useRef(null),d=O.useRef(null),h=O.useRef(-1),p=O.useRef(-1),m=O.useRef(-1),y=O.useCallback((J="unknown")=>{a||(u(!0),i==null||i(J))},[u,i,a]),v=O.useCallback((J="unknown")=>{a&&(u(!1),r==null||r(J))},[u,r,a]),b=O.useCallback((J="unknown")=>{a?v(J):y(J)},[v,y,a]),w=O.useCallback(()=>{const J=document.querySelector(`#${l.current} [data-combobox-selected]`);J==null||J.removeAttribute("data-combobox-selected"),J==null||J.removeAttribute("aria-selected")},[]),E=O.useCallback(J=>{const ne=document.getElementById(l.current),Z=ne==null?void 0:ne.querySelectorAll("[data-combobox-option]");if(!Z)return null;const ie=J>=Z.length?0:J<0?Z.length-1:J;return c.current=ie,Z!=null&&Z[ie]&&!Z[ie].hasAttribute("data-combobox-disabled")?(w(),Z[ie].setAttribute("data-combobox-selected","true"),Z[ie].setAttribute("aria-selected","true"),Z[ie].scrollIntoView({block:"nearest",behavior:o}),Z[ie].id):null},[o,w]),T=O.useCallback(()=>{const J=document.querySelector(`#${l.current} [data-combobox-active]`);if(J){const ne=document.querySelectorAll(`#${l.current} [data-combobox-option]`),Z=Array.from(ne).findIndex(ie=>ie===J);return E(Z)}return E(0)},[E]),A=O.useCallback(()=>E(wGe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[E,s]),I=O.useCallback(()=>E(_Ge(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[E,s]),R=O.useCallback(()=>E(EGe(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[E]),D=O.useCallback((J="selected",ne)=>{m.current=window.setTimeout(()=>{var q;const Z=document.querySelectorAll(`#${l.current} [data-combobox-option]`),ie=Array.from(Z).findIndex(j=>j.hasAttribute(`data-combobox-${J}`));c.current=ie,ne!=null&&ne.scrollIntoView&&((q=Z[ie])==null||q.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),M=O.useCallback(()=>{c.current=-1,w()},[w]),$=O.useCallback(()=>{const J=document.querySelectorAll(`#${l.current} [data-combobox-option]`),ne=J==null?void 0:J[c.current];ne==null||ne.click()},[]),U=O.useCallback(J=>{l.current=J},[]),F=O.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),H=O.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),Q=O.useCallback(()=>c.current,[]);return O.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:y,closeDropdown:v,toggleDropdown:b,selectedOptionIndex:c.current,getSelectedOptionIndex:Q,selectOption:E,selectFirstOption:R,selectActiveOption:T,selectNextOption:A,selectPreviousOption:I,resetSelectedOption:M,updateSelectedOptionIndex:D,listId:l.current,setListId:U,clickSelectedOption:$,searchRef:f,focusSearchInput:F,targetRef:d,focusTarget:H}}const TGe={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},SGe=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":Ba(t),"--combobox-option-padding":Kn(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:Ke(n),"--combobox-option-fz":Ba(t),"--combobox-option-padding":Kn(t,"combobox-option-padding")}});function Wr(e){const t=Je("Combobox",TGe,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...m}=t,y=MQ(),v=o||y,b=Zt({name:h||"Combobox",classes:Xc,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:SGe}),w=()=>{l==null||l(),v.closeDropdown()};return S.jsx(lGe,{value:{getStyles:b,store:v,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:S.jsx(vu,{opened:v.dropdownOpened,...m,onChange:E=>!E&&w(),withRoles:!1,unstyled:i,children:s})})}const CGe=e=>e;Wr.extend=CGe;Wr.classes=Xc;Wr.displayName="@mantine/core/Combobox";Wr.Target=Iwe;Wr.Dropdown=CQ;Wr.Options=PQ;Wr.Option=DQ;Wr.Search=OQ;Wr.Empty=AQ;Wr.Chevron=SQ;Wr.Footer=kQ;Wr.Header=NQ;Wr.EventsTarget=Cwe;Wr.DropdownTarget=Swe;Wr.Group=RQ;Wr.ClearButton=Twe;Wr.HiddenInput=Awe;var kwe={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const Rwe=kwe,eB=O.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:y,style:v,vars:b,mod:w,...E},T)=>{const A=Zt({name:e,props:t,className:n,style:v,classes:kwe,classNames:r,styles:i,unstyled:s});return S.jsx(je,{...A("root"),ref:T,__vars:{"--label-fz":Ba(d),"--label-lh":Kn(d,"label-lh")},mod:[{"label-position":h},w],variant:y,size:d,...E,children:S.jsxs(je,{component:p,htmlFor:p==="label"?l:void 0,...A("body"),children:[o,S.jsxs("div",{...A("labelWrapper"),"data-disabled":c||void 0,children:[a&&S.jsx(je,{component:m,htmlFor:m==="label"?l:void 0,...A("label"),"data-disabled":c||void 0,children:a}),u&&S.jsx(Yi.Description,{size:d,__inheritStyles:!1,...A("description"),children:u}),f&&typeof f!="boolean"&&S.jsx(Yi.Error,{size:d,__inheritStyles:!1,...A("error"),children:f})]})]})})});eB.displayName="@mantine/core/InlineInput";const Nwe=O.createContext(null),AGe=Nwe.Provider,Dwe=()=>O.useContext(Nwe),[IGe,kGe]=ux();var Pwe={card:"m_26775b0a"};const RGe={withBorder:!0},NGe=(e,{radius:t})=>({card:{"--card-radius":Ti(t)}}),LQ=At((e,t)=>{const n=Je("CheckboxCard",RGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,defaultChecked:p,onChange:m,...y}=n,v=Zt({name:"CheckboxCard",classes:Pwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:NGe,rootSelector:"card"}),b=Dwe(),w=typeof l=="boolean"?l:b?b.value.includes(d||""):void 0,[E,T]=Wo({value:w,defaultValue:p,finalValue:!1,onChange:m});return S.jsx(IGe,{value:{checked:E},children:S.jsx(id,{ref:t,mod:[{"with-border":f,checked:E},c],...v("card"),...y,role:"checkbox","aria-checked":E,onClick:A=>{h==null||h(A),b==null||b.onChange(d||""),T(!E)}})})});LQ.displayName="@mantine/core/CheckboxCard";LQ.classes=Pwe;function $Q({children:e,role:t}){const n=bA();return n?S.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):S.jsx(S.Fragment,{children:e})}const DGe={},FQ=At((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=Je("CheckboxGroup",DGe,e),[c,f]=Wo({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return S.jsx(AGe,{value:{value:c,onChange:d,size:s},children:S.jsx(Yi.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:S.jsx($Q,{role:"group",children:a})})})});FQ.classes=Yi.Wrapper.classes;FQ.displayName="@mantine/core/CheckboxGroup";function Owe({size:e,style:t,...n}){const r=e!==void 0?{width:Ke(e),height:Ke(e),...t}:t;return S.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:S.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function Mwe({indeterminate:e,...t}){return e?S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:S.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):S.jsx(Owe,{...t})}var Lwe={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const PGe={icon:Mwe},OGe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=tg({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":Kn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Ti(t),"--checkbox-color":s==="outline"?u:Hi(n,e),"--checkbox-icon-color":i?Hi(i,e):hA(o,e)?cx({color:n,theme:e,autoContrast:o}):void 0}}},BQ=At((e,t)=>{const n=Je("CheckboxIndicator",PGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:m,mod:y,variant:v,disabled:b,...w}=n,E=l,T=Zt({name:"CheckboxIndicator",classes:Lwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:OGe,rootSelector:"indicator"}),A=kGe(),I=typeof m=="boolean"||typeof c=="boolean"?m||c:(A==null?void 0:A.checked)||!1;return S.jsx(je,{ref:t,...T("indicator",{variant:v}),variant:v,mod:[{checked:I,disabled:b},y],...w,children:S.jsx(E,{indeterminate:c,...T("icon")})})});BQ.displayName="@mantine/core/CheckboxIndicator";BQ.classes=Lwe;var $we={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const MGe={labelPosition:"right",icon:Mwe},LGe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=tg({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":Kn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Ti(t),"--checkbox-color":s==="outline"?u:Hi(n,e),"--checkbox-icon-color":i?Hi(i,e):hA(o,e)?cx({color:n,theme:e,autoContrast:o}):void 0}}},nl=At((e,t)=>{const n=Je("Checkbox",MGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,checked:m,labelPosition:y,description:v,error:b,disabled:w,variant:E,indeterminate:T,icon:A,rootRef:I,iconColor:R,onChange:D,autoContrast:M,mod:$,...U}=n,F=Dwe(),H=d||(F==null?void 0:F.size),Q=A,J=Zt({name:"Checkbox",props:n,classes:$we,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:LGe}),{styleProps:ne,rest:Z}=SE(U),ie=pl(f),q=F?{checked:F.value.includes(Z.value),onChange:j=>{F.onChange(j),D==null||D(j)}}:{};return S.jsx(eB,{...J("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:ie,size:H,labelPosition:y,label:c,description:v,error:b,disabled:w,classNames:r,styles:o,unstyled:a,"data-checked":q.checked||m||void 0,variant:E,ref:I,mod:$,...ne,...p,children:S.jsxs(je,{...J("inner"),mod:{"data-label-position":y},children:[S.jsx(je,{component:"input",id:ie,ref:t,checked:m,disabled:w,mod:{error:!!b,indeterminate:T},...J("input",{focusable:!0,variant:E}),onChange:D,...Z,...q,type:"checkbox"}),S.jsx(Q,{indeterminate:T,...J("icon")})]})})});nl.classes={...$we,...Rwe};nl.displayName="@mantine/core/Checkbox";nl.Group=FQ;nl.Indicator=BQ;nl.Card=LQ;function aC(e){return"group"in e}function Fwe({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;aC(o)&&i.push({group:o.group,items:Fwe({options:o.items,search:t,limit:n-i.length})}),aC(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function $Ge(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function Bwe(e,t=new Set){if(Array.isArray(e))for(const n of e)if(aC(n))Bwe(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function FGe(e,t){return Array.isArray(e)?e.includes(t):e===t}function jwe({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!aC(e)){const a=FGe(n,e.value),u=t&&a&&S.jsx(Owe,{className:Xc.optionsDropdownCheckIcon}),l=S.jsxs(S.Fragment,{children:[r==="left"&&u,S.jsx("span",{children:e.label}),r==="right"&&u]});return S.jsx(Wr.Option,{value:e.value,disabled:e.disabled,className:Co({[Xc.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>S.jsx(jwe,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return S.jsx(Wr.Group,{label:e.group,children:o})}function Uwe({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:y,"aria-label":v}){Bwe(e);const w=typeof i=="string"?(r||Fwe)({options:e,search:u?i:"",limit:s??1/0}):e,E=$Ge(w),T=w.map(A=>S.jsx(jwe,{data:A,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:m},aC(A)?A.group:A.value));return S.jsx(Wr.Dropdown,{hidden:t||n&&E,children:S.jsxs(Wr.Options,{labelledBy:p,"aria-label":v,children:[a?S.jsx(Wy.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...y,children:T}):T,E&&d&&S.jsx(Wr.Empty,{children:d})]})})}var zwe={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const BGe={},jGe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":Kn(s,"badge-height"),"--badge-padding-x":Kn(s,"badge-padding-x"),"--badge-fz":Kn(s,"badge-fz"),"--badge-radius":t===void 0?void 0:Ti(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?Hi(n,e):void 0}}},Cp=Yo((e,t)=>{const n=Je("Badge",BGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:m,fullWidth:y,autoContrast:v,circle:b,mod:w,...E}=n,T=Zt({name:"Badge",props:n,classes:zwe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:jGe});return S.jsxs(je,{variant:m,mod:[{block:y,circle:b,"with-right-section":!!h,"with-left-section":!!d},w],...T("root",{variant:m}),ref:t,...E,children:[d&&S.jsx("span",{...T("section"),"data-position":"left",children:d}),S.jsx("span",{...T("label"),children:p}),h&&S.jsx("span",{...T("section"),"data-position":"right",children:h})]})});Cp.classes=zwe;Cp.displayName="@mantine/core/Badge";var _A={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const ale={orientation:"horizontal"},UGe=(e,{borderWidth:t})=>({group:{"--button-border-width":Ke(t)}}),jQ=At((e,t)=>{const n=Je("ButtonGroup",ale,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=Je("ButtonGroup",ale,e),p=Zt({name:"ButtonGroup",props:n,classes:_A,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:UGe,rootSelector:"group"});return S.jsx(je,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});jQ.classes=_A;jQ.displayName="@mantine/core/ButtonGroup";const ule={},zGe=(e,{radius:t,color:n,gradient:r,variant:i,autoContrast:s,size:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:s});return{groupSection:{"--section-height":Kn(o,"section-height"),"--section-padding-x":Kn(o,"section-padding-x"),"--section-fz":o!=null&&o.includes("compact")?Ba(o.replace("compact-","")):Ba(o),"--section-radius":t===void 0?void 0:Ti(t),"--section-bg":n||i?a.background:void 0,"--section-color":a.color,"--section-bd":n||i?a.border:void 0}}},UQ=At((e,t)=>{const n=Je("ButtonGroupSection",ule,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,variant:l,gradient:c,radius:f,autoContrast:d,...h}=Je("ButtonGroupSection",ule,e),p=Zt({name:"ButtonGroupSection",props:n,classes:_A,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,varsResolver:zGe,rootSelector:"groupSection"});return S.jsx(je,{...p("groupSection"),ref:t,variant:l,...h})});UQ.classes=_A;UQ.displayName="@mantine/core/ButtonGroupSection";const VGe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Ke(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},HGe={},qGe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":Kn(s,"button-height"),"--button-padding-x":Kn(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?Ba(s.replace("compact-","")):Ba(s),"--button-radius":t===void 0?void 0:Ti(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},yn=Yo((e,t)=>{const n=Je("Button",HGe,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:m,gradient:y,classNames:v,styles:b,unstyled:w,"data-disabled":E,autoContrast:T,mod:A,...I}=n,R=Zt({name:"Button",props:n,classes:_A,className:s,style:r,classNames:v,styles:b,unstyled:w,vars:i,varsResolver:qGe}),D=!!l,M=!!c;return S.jsxs(id,{ref:t,...R("root",{active:!a&&!p&&!E}),unstyled:w,variant:d,disabled:a||p,mod:[{disabled:a||E,loading:p,block:f,"with-left-section":D,"with-right-section":M},A],...I,children:[S.jsx(ng,{mounted:!!p,transition:VGe,duration:150,children:$=>S.jsx(je,{component:"span",...R("loader",{style:$}),"aria-hidden":!0,children:S.jsx(mh,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),S.jsxs("span",{...R("inner"),children:[l&&S.jsx(je,{component:"span",...R("section"),mod:{position:"left"},children:l}),S.jsx(je,{component:"span",mod:{loading:p},...R("label"),children:u}),c&&S.jsx(je,{component:"span",...R("section"),mod:{position:"right"},children:c})]})]})});yn.classes=_A;yn.displayName="@mantine/core/Button";yn.Group=jQ;yn.GroupSection=UQ;const[WGe,GGe]=Su("Card component was not found in tree");var zQ={root:"m_e615b15f",section:"m_599a2148"};const YGe={},tB=Yo((e,t)=>{const n=Je("CardSection",YGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=GGe();return S.jsx(je,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...f})});tB.classes=zQ;tB.displayName="@mantine/core/CardSection";const KGe={},XGe=(e,{padding:t})=>({root:{"--card-padding":qo(t)}}),wA=Yo((e,t)=>{const n=Je("Card",KGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=Zt({name:"Card",props:n,classes:zQ,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:XGe}),h=O.Children.toArray(l),p=h.map((m,y)=>typeof m=="object"&&m&&"type"in m&&m.type===tB?O.cloneElement(m,{"data-first-section":y===0||void 0,"data-last-section":y===h.length-1||void 0}):m);return S.jsx(WGe,{value:{getStyles:d},children:S.jsx(pA,{ref:t,unstyled:a,...d("root"),...f,children:p})})});wA.classes=zQ;wA.displayName="@mantine/core/Card";wA.Section=tB;var Vwe={root:"m_4451eb3a"};const QGe={},Gl=Yo((e,t)=>{const n=Je("Center",QGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=Zt({name:"Center",props:n,classes:Vwe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return S.jsx(je,{ref:t,mod:[{inline:l},c],...d("root"),...f})});Gl.classes=Vwe;Gl.displayName="@mantine/core/Center";var Hwe={root:"m_b183c0a2"};const JGe={},ZGe=(e,{color:t})=>({root:{"--code-bg":t?Hi(t,e):void 0}}),TN=At((e,t)=>{const n=Je("Code",JGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,block:c,variant:f,mod:d,...h}=n,p=Zt({name:"Code",props:n,classes:Hwe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:ZGe});return S.jsx(je,{component:c?"pre":"code",variant:f,ref:t,mod:[{block:c},d],...p("root"),...h,dir:"ltr"})});TN.classes=Hwe;TN.displayName="@mantine/core/Code";var qwe={root:"m_de3d2490",colorOverlay:"m_862f3d1b",shadowOverlay:"m_98ae7f22",alphaOverlay:"m_95709ac0",childrenOverlay:"m_93e74e3"};const lle={withShadow:!0},eYe=(e,{radius:t,size:n})=>({root:{"--cs-radius":t===void 0?void 0:Ti(t),"--cs-size":Ke(n)}}),VQ=Yo((e,t)=>{const n=Je("ColorSwatch",lle,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,size:c,radius:f,withShadow:d,children:h,variant:p,...m}=Je("ColorSwatch",lle,n),y=Zt({name:"ColorSwatch",props:n,classes:qwe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:eYe});return S.jsxs(je,{ref:t,variant:p,size:c,...y("root",{focusable:!0}),...m,children:[S.jsx("span",{...y("alphaOverlay")}),d&&S.jsx("span",{...y("shadowOverlay")}),S.jsx("span",{...y("colorOverlay",{style:{backgroundColor:l}})}),S.jsx("span",{...y("childrenOverlay"),children:h})]})});VQ.classes=qwe;VQ.displayName="@mantine/core/ColorSwatch";var Wwe={root:"m_7485cace"};const tYe={},nYe=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:Kn(t,"container-size")}}),Yy=At((e,t)=>{const n=Je("Container",tYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=Zt({name:"Container",classes:Wwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:nYe});return S.jsx(je,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});Yy.classes=Wwe;Yy.displayName="@mantine/core/Container";var Gwe={root:"m_3eebeb36",label:"m_9e365f20"};const rYe={orientation:"horizontal"},iYe=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?Hi(t,e):void 0,"--divider-border-style":n,"--divider-size":Kn(r,"divider-size")}}),IE=At((e,t)=>{const n=Je("Divider",rYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,m=Zt({name:"Divider",classes:Gwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:iYe});return S.jsx(je,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...m("root"),...p,role:"separator",children:f&&S.jsx(je,{component:"span",mod:{position:d},...m("label"),children:f})})});IE.classes=Gwe;IE.displayName="@mantine/core/Divider";function sYe({open:e,close:t,openDelay:n,closeDelay:r}){const i=O.useRef(-1),s=O.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return O.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[cle,Ywe]=Su("Grid component was not found in tree"),Xq=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,fle=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":Xq(e,t),dle=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},hle=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function oYe({span:e,order:t,offset:n,selector:r}){var h;const i=No(),s=Ywe(),o=s.breakpoints||i.breakpoints,u=bp(e)===void 0?12:bp(e),l=ox({"--col-order":(h=bp(t))==null?void 0:h.toString(),"--col-flex-grow":dle(u,s.grow),"--col-flex-basis":Xq(u,s.columns),"--col-width":u==="content"?"auto":void 0,"--col-max-width":fle(u,s.columns,s.grow),"--col-offset":hle(bp(n),s.columns)}),c=ss(o).reduce((p,m)=>{var y;return p[m]||(p[m]={}),typeof t=="object"&&t[m]!==void 0&&(p[m]["--col-order"]=(y=t[m])==null?void 0:y.toString()),typeof e=="object"&&e[m]!==void 0&&(p[m]["--col-flex-grow"]=dle(e[m],s.grow),p[m]["--col-flex-basis"]=Xq(e[m],s.columns),p[m]["--col-width"]=e[m]==="content"?"auto":void 0,p[m]["--col-max-width"]=fle(e[m],s.columns,s.grow)),typeof n=="object"&&n[m]!==void 0&&(p[m]["--col-offset"]=hle(n[m],s.columns)),p},{}),d=aD(ss(c),o).filter(p=>ss(c[p.value]).length>0).map(p=>({query:s.type==="container"?`mantine-grid (min-width: ${o[p.value]})`:`(min-width: ${o[p.value]})`,styles:c[p.value]}));return S.jsx(TE,{styles:l,media:s.type==="container"?void 0:d,container:s.type==="container"?d:void 0,selector:r})}var HQ={container:"m_8478a6da",root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const aYe={span:12},qQ=At((e,t)=>{const n=Je("GridCol",aYe,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...f}=n,d=Ywe(),h=NP();return S.jsxs(S.Fragment,{children:[S.jsx(oYe,{selector:`.${h}`,span:u,order:l,offset:c}),S.jsx(je,{ref:t,...d.getStyles("col",{className:Co(i,h),style:s,classNames:r,styles:o}),...f})]})});qQ.classes=HQ;qQ.displayName="@mantine/core/GridCol";function ple({gutter:e,selector:t,breakpoints:n,type:r}){const i=No(),s=n||i.breakpoints,o=ox({"--grid-gutter":qo(bp(e))}),a=ss(s).reduce((c,f)=>(c[f]||(c[f]={}),typeof e=="object"&&e[f]!==void 0&&(c[f]["--grid-gutter"]=qo(e[f])),c),{}),l=aD(ss(a),s).filter(c=>ss(a[c.value]).length>0).map(c=>({query:r==="container"?`mantine-grid (min-width: ${s[c.value]})`:`(min-width: ${s[c.value]})`,styles:a[c.value]}));return S.jsx(TE,{styles:o,media:r==="container"?void 0:l,container:r==="container"?l:void 0,selector:t})}const uYe={gutter:"md",grow:!1,columns:12},lYe=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),Gf=At((e,t)=>{const n=Je("Grid",uYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,breakpoints:m,type:y,...v}=n,b=Zt({name:"Grid",classes:HQ,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:lYe}),w=NP();return y==="container"&&m?S.jsxs(cle,{value:{getStyles:b,grow:l,columns:f||12,breakpoints:m,type:y},children:[S.jsx(ple,{selector:`.${w}`,...n}),S.jsx("div",{...b("container"),children:S.jsx(je,{ref:t,...b("root",{className:w}),...v,children:S.jsx("div",{...b("inner"),children:p})})})]}):S.jsxs(cle,{value:{getStyles:b,grow:l,columns:f||12,breakpoints:m,type:y},children:[S.jsx(ple,{selector:`.${w}`,...n}),S.jsx(je,{ref:t,...b("root",{className:w}),...v,children:S.jsx("div",{...b("inner"),children:p})})]})});Gf.classes=HQ;Gf.displayName="@mantine/core/Grid";Gf.Col=qQ;var Kwe={root:"m_9e117634"};const cYe={},fYe=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:Ti(t),"--image-object-fit":n}}),mx=Yo((e,t)=>{const n=Je("Image",cYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...m}=n,[y,v]=O.useState(!c);O.useEffect(()=>v(!c),[c]);const b=Zt({name:"Image",classes:Kwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:fYe});return y&&h?S.jsx(je,{component:"img",ref:t,src:h,...b("root"),onError:l,mod:["fallback",p],...m}):S.jsx(je,{component:"img",ref:t,...b("root"),src:c,onError:w=>{l==null||l(w),v(!0)},mod:p,...m})});mx.classes=Kwe;mx.displayName="@mantine/core/Image";function Qq(){return Qq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qq.apply(null,arguments)}function dYe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var hYe=O.useLayoutEffect,pYe=function(t){var n=O.useRef(t);return hYe(function(){n.current=t}),n},mle=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},mYe=function(t,n){var r=O.useRef();return O.useCallback(function(i){t.current=i,r.current&&mle(r.current,null),r.current=n,n&&mle(n,i)},[n])},gle={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},gYe=function(t){Object.keys(gle).forEach(function(n){t.style.setProperty(n,gle[n],"important")})},yle=gYe,Al=null,vle=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function yYe(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Al||(Al=document.createElement("textarea"),Al.setAttribute("tabindex","-1"),Al.setAttribute("aria-hidden","true"),yle(Al)),Al.parentNode===null&&document.body.appendChild(Al);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;Al.style[h]=o[h]}),yle(Al),Al.value=t;var u=vle(Al,e);Al.value=t,u=vle(Al,e),Al.value="x";var l=Al.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var ble=function(){},vYe=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},bYe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],xYe=!!document.documentElement.currentStyle,_Ye=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=vYe(bYe,n),i=r.boxSizing;if(i==="")return null;xYe&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},wYe=_Ye;function Xwe(e,t,n){var r=pYe(n);O.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var EYe=function(t){Xwe(window,"resize",t)},TYe=function(t){Xwe(document.fonts,"loadingdone",t)},SYe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],CYe=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?ble:o,u=t.onHeightChange,l=u===void 0?ble:u,c=dYe(t,SYe),f=c.value!==void 0,d=O.useRef(null),h=mYe(d,n),p=O.useRef(0),m=O.useRef(),y=function(){var w=d.current,E=r&&m.current?m.current:wYe(w);if(E){m.current=E;var T=yYe(E,w.value||w.placeholder||"x",s,i),A=T[0],I=T[1];p.current!==A&&(p.current=A,w.style.setProperty("height",A+"px","important"),l(A,{rowHeight:I}))}},v=function(w){f||y(),a(w)};return O.useLayoutEffect(y),EYe(y),TYe(y),O.createElement("textarea",Qq({},c,{onChange:v,ref:h}))},AYe=O.forwardRef(CYe);const IYe={},WQ=At((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=Je("Textarea",IYe,e),u=n&&e_e()!=="test",l=u?{maxRows:r,minRows:i}:{};return S.jsx(yh,{component:u?AYe:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});WQ.classes=yh.classes;WQ.displayName="@mantine/core/Textarea";const[kYe,RYe]=Su("List component was not found in tree");var GQ={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const NYe={},YQ=At((e,t)=>{const n=Je("ListItem",NYe,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...f}=n,d=RYe(),h=u||d.icon,p={classNames:r,styles:o};return S.jsx(je,{...d.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:S.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&S.jsx("span",{...d.getStyles("itemIcon",p),children:h}),S.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});YQ.classes=GQ;YQ.displayName="@mantine/core/ListItem";const DYe={type:"unordered"},PYe=(e,{size:t,spacing:n})=>({root:{"--list-fz":Ba(t),"--list-lh":Wxe(t),"--list-spacing":qo(n)}}),Ap=At((e,t)=>{const n=Je("List",DYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:m,mod:y,...v}=n,b=Zt({name:"List",classes:GQ,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:PYe});return S.jsx(kYe,{value:{center:p,icon:d,getStyles:b},children:S.jsx(je,{...b("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},y],ref:t,...v,children:l})})});Ap.classes=GQ;Ap.displayName="@mantine/core/List";Ap.Item=YQ;var Qwe={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const xle={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:uf("overlay")},OYe=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),sd=At((e,t)=>{const n=Je("LoadingOverlay",xle,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,m=No(),y=Zt({name:"LoadingOverlay",classes:Qwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:OYe}),v={...xle.overlayProps,...f};return S.jsx(ng,{transition:"fade",...l,mounted:!!d,children:b=>S.jsxs(je,{...y("root",{style:b}),ref:t,...p,children:[S.jsx(mh,{...y("loader"),unstyled:a,...c}),S.jsx(sC,{...v,...y("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.white}),S.jsx(sC,{...v,...y("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.colors.dark[5]})]})})});sd.classes=Qwe;sd.displayName="@mantine/core/LoadingOverlay";const[MYe,$P]=Su("Menu component was not found in the tree");var EA={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const LYe={},KQ=At((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Je("MenuDivider",LYe,e),u=$P();return S.jsx(je,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});KQ.classes=EA;KQ.displayName="@mantine/core/MenuDivider";const $Ye={},XQ=At((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,onKeyDown:l,children:c,...f}=Je("MenuDropdown",$Ye,e),d=O.useRef(null),h=$P(),p=c0(l,v=>{var b,w;(v.key==="ArrowUp"||v.key==="ArrowDown")&&(v.preventDefault(),(w=(b=d.current)==null?void 0:b.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||w.focus())}),m=c0(a,()=>(h.trigger==="hover"||h.trigger==="click-hover")&&h.openDropdown()),y=c0(u,()=>(h.trigger==="hover"||h.trigger==="click-hover")&&h.closeDropdown());return S.jsxs(vu.Dropdown,{...f,onMouseEnter:m,onMouseLeave:y,role:"menu","aria-orientation":"vertical",ref:Ro(t,d),...h.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:p,children:[S.jsx("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),c]})});XQ.classes=EA;XQ.displayName="@mantine/core/MenuDropdown";const FYe={},QQ=Yo((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=Je("MenuItem",FYe,e),p=$P(),m=No(),{dir:y}=y1(),v=O.useRef(null),b=p.getItemIndex(v.current),w=h,E=c0(w.onMouseLeave,()=>p.setHovered(-1)),T=c0(w.onMouseEnter,()=>p.setHovered(p.getItemIndex(v.current))),A=c0(w.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),I=c0(w.onFocus,()=>p.setHovered(p.getItemIndex(v.current))),R=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,D=a?tg({color:a,theme:m}):null;return S.jsxs(id,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:I,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:Ro(v,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===b?!0:void 0,"data-mantine-stop-propagation":!0,onMouseEnter:T,onMouseLeave:E,onClick:A,onKeyDown:NX({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:y,orientation:"vertical",onKeyDown:w.onKeyDown}),__vars:{"--menu-item-color":D!=null&&D.isThemeColor&&(D==null?void 0:D.shade)===void 0?`var(--mantine-color-${D.color}-6)`:R==null?void 0:R.color,"--menu-item-hover":R==null?void 0:R.hover},children:[l&&S.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),f&&S.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),c&&S.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});QQ.classes=EA;QQ.displayName="@mantine/core/MenuItem";const BYe={},JQ=At((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Je("MenuLabel",BYe,e),u=$P();return S.jsx(je,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});JQ.classes=EA;JQ.displayName="@mantine/core/MenuLabel";const jYe={refProp:"ref"},Jwe=O.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=Je("MenuTarget",jYe,e);if(!ax(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=$P(),o=n.props,a=c0(o.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),u=c0(o.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),l=c0(o.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return S.jsx(vu.Target,{refProp:r,popupType:"menu",ref:t,...i,children:O.cloneElement(n,{onClick:a,onMouseEnter:u,onMouseLeave:l,"data-expanded":s.opened?!0:void 0})})});Jwe.displayName="@mantine/core/MenuTarget";const UYe={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Pl(e){const t=Je("Menu",UYe,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:m,styles:y,unstyled:v,variant:b,vars:w,menuItemTabIndex:E,keepMounted:T,...A}=t,I=Zt({name:"Menu",classes:EA,props:t,classNames:m,styles:y,unstyled:v}),[R,{setHovered:D,resetHovered:M}]=JUe(),[$,U]=Wo({value:s,defaultValue:o,finalValue:!1,onChange:u}),[F,H]=O.useState(!1),Q=()=>{U(!1),H(!1),$&&(i==null||i())},J=()=>{U(!0),!$&&(r==null||r())},ne=()=>{$?Q():J()},{openDropdown:Z,closeDropdown:ie}=sYe({open:J,close:Q,closeDelay:p,openDelay:h}),q=V=>QUe("[data-menu-item]","[data-menu-dropdown]",V),{resolvedClassNames:j,resolvedStyles:G}=EE({classNames:m,styles:y,props:t});return D0(()=>{M()},[$]),S.jsx(MYe,{value:{getStyles:I,opened:$,toggleDropdown:ne,getItemIndex:q,hovered:R,setHovered:D,openedViaClick:F,setOpenedViaClick:H,closeOnItemClick:l,closeDropdown:d==="click"?Q:ie,openDropdown:d==="click"?J:Z,closeDropdownImmediately:Q,loop:c,trigger:d,unstyled:v,menuItemTabIndex:E},children:S.jsx(vu,{...A,opened:$,onChange:ne,defaultOpened:o,trapFocus:T?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:j,styles:G,unstyled:v,variant:b,keepMounted:T,children:n})})}Pl.extend=e=>e;Pl.classes=EA;Pl.displayName="@mantine/core/Menu";Pl.Item=QQ;Pl.Label=JQ;Pl.Dropdown=XQ;Pl.Target=Jwe;Pl.Divider=KQ;const[zYe,TA]=Su("Modal component was not found in tree");var x1={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const VYe={},nB=At((e,t)=>{const n=Je("ModalBody",VYe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=TA();return S.jsx(uwe,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});nB.classes=x1;nB.displayName="@mantine/core/ModalBody";const HYe={},rB=At((e,t)=>{const n=Je("ModalCloseButton",HYe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=TA();return S.jsx(lwe,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});rB.classes=x1;rB.displayName="@mantine/core/ModalCloseButton";const qYe={},iB=At((e,t)=>{const n=Je("ModalContent",qYe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,__hidden:l,...c}=n,f=TA(),d=f.scrollAreaComponent||oWe;return S.jsx(cwe,{...f.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:f.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":f.fullScreen||void 0,"data-modal-content":!0,"data-hidden":l||void 0,ref:t,...c,children:S.jsx(d,{style:{maxHeight:f.fullScreen?"100dvh":`calc(100dvh - (${Ke(f.yOffset)} * 2))`},children:u})})});iB.classes=x1;iB.displayName="@mantine/core/ModalContent";const WYe={},sB=At((e,t)=>{const n=Je("ModalHeader",WYe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=TA();return S.jsx(fwe,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});sB.classes=x1;sB.displayName="@mantine/core/ModalHeader";const GYe={},oB=At((e,t)=>{const n=Je("ModalOverlay",GYe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=TA();return S.jsx(dwe,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});oB.classes=x1;oB.displayName="@mantine/core/ModalOverlay";const YYe={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:uf("modal"),transitionProps:{duration:200,transition:"fade-down"},yOffset:"5dvh"},KYe=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:Ti(t),"--modal-size":Kn(n,"modal-size"),"--modal-y-offset":Ke(r),"--modal-x-offset":Ke(i)}}),aB=At((e,t)=>{const n=Je("ModalRoot",YYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:m,...y}=n,v=Zt({name:m,classes:x1,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:KYe});return S.jsx(zYe,{value:{yOffset:l,scrollAreaComponent:c,getStyles:v,fullScreen:d},children:S.jsx(awe,{ref:t,...v("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...y})})});aB.classes=x1;aB.displayName="@mantine/core/ModalRoot";const[XYe,QYe]=ux();function Zwe({children:e}){const[t,n]=O.useState([]),[r,i]=O.useState(uf("modal"));return S.jsx(XYe,{value:{stack:t,addModal:(s,o)=>{n(a=>[...new Set([...a,s])]),i(a=>typeof o=="number"&&typeof a=="number"?Math.max(a,o):a)},removeModal:s=>n(o=>o.filter(a=>a!==s)),getZIndex:s=>`calc(${r} + ${t.indexOf(s)} + 1)`,currentId:t[t.length-1],maxZIndex:r},children:e})}Zwe.displayName="@mantine/core/ModalStack";const JYe={},uB=At((e,t)=>{const n=Je("ModalTitle",JYe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=TA();return S.jsx(hwe,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});uB.classes=x1;uB.displayName="@mantine/core/ModalTitle";const ZYe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:uf("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},Us=At((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,opened:l,stackId:c,zIndex:f,...d}=Je("Modal",ZYe,e),h=QYe(),p=!!n||s,m=h&&c?{closeOnEscape:h.currentId===c,trapFocus:h.currentId===c,zIndex:h.getZIndex(c)}:{},y=r===!1?!1:c&&h?h.currentId===c:l;return O.useEffect(()=>{h&&c&&(l?h.addModal(c,f||uf("modal")):h.removeModal(c))},[l,c,f]),S.jsxs(aB,{ref:t,radius:u,opened:l,zIndex:h&&c?h.getZIndex(c):f,...d,...m,children:[r&&S.jsx(oB,{visible:y,transitionProps:h&&c?{duration:0}:void 0,...i}),S.jsxs(iB,{radius:u,__hidden:h&&c&&l?c!==h.currentId:!1,children:[p&&S.jsxs(sB,{children:[n&&S.jsx(uB,{children:n}),s&&S.jsx(rB,{...o})]}),S.jsx(nB,{children:a})]})]})});Us.classes=x1;Us.displayName="@mantine/core/Modal";Us.Root=aB;Us.Overlay=oB;Us.Content=iB;Us.Body=nB;Us.Header=sB;Us.Title=uB;Us.CloseButton=rB;Us.Stack=Zwe;const[eKe,ZQ]=ux(),[tKe,nKe]=ux();var lB={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const rKe={},iKe=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?Kn(t):Kn(n,"pg-gap")}}),eJ=At((e,t)=>{const n=Je("PillGroup",rKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=ZQ(),h=(d==null?void 0:d.size)||l||void 0,p=Zt({name:"PillGroup",classes:lB,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:iKe,stylesCtx:{size:h},rootSelector:"group"});return S.jsx(tKe,{value:{size:h,disabled:c},children:S.jsx(je,{ref:t,size:h,...p("group"),...f})})});eJ.classes=lB;eJ.displayName="@mantine/core/PillGroup";const sKe={variant:"default"},oKe=(e,{radius:t},{size:n})=>({root:{"--pill-fz":Kn(n,"pill-fz"),"--pill-height":Kn(n,"pill-height"),"--pill-radius":t===void 0?void 0:Ti(t)}}),cD=At((e,t)=>{const n=Je("Pill",sKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:m,disabled:y,mod:v,...b}=n,w=nKe(),E=ZQ(),T=m||(w==null?void 0:w.size)||void 0,A=(E==null?void 0:E.variant)==="filled"?"contrast":l||"default",I=Zt({name:"Pill",classes:lB,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:oKe,stylesCtx:{size:T}});return S.jsxs(je,{component:"span",ref:t,variant:A,size:T,...I("root",{variant:A}),mod:[{"with-remove":f&&!y,disabled:y||(w==null?void 0:w.disabled)},v],...b,children:[S.jsx("span",{...I("label"),children:c}),f&&S.jsx(hx,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...I("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:R=>{var D;R.preventDefault(),R.stopPropagation(),(D=h==null?void 0:h.onMouseDown)==null||D.call(h,R)},onClick:R=>{var D;R.stopPropagation(),d==null||d(),(D=h==null?void 0:h.onClick)==null||D.call(h,R)}})]})});cD.classes=lB;cD.displayName="@mantine/core/Pill";cD.Group=eJ;var eEe={field:"m_45c4369d"};const aKe={type:"visible"},tJ=At((e,t)=>{const n=Je("PillsInputField",aKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,m=ZQ(),y=bA(),v=Zt({name:"PillsInputField",classes:eEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),b=c||(m==null?void 0:m.disabled);return S.jsx(je,{component:"input",ref:Ro(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:b,mod:[{disabled:b,pointer:d},h],...v("field"),...p,id:(y==null?void 0:y.inputId)||f,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":y==null?void 0:y.describedBy,type:"text",onMouseDown:w=>!d&&w.stopPropagation()})});tJ.classes=eEe;tJ.displayName="@mantine/core/PillsInputField";const uKe={},F$=At((e,t)=>{const n=Je("PillsInput",uKe,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=O.useRef(null);return S.jsx(eKe,{value:{fieldRef:d,size:o,disabled:a,hasError:!!l,variant:c},children:S.jsx(yh,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});F$.displayName="@mantine/core/PillsInput";F$.Field=tJ;function lKe({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(aC(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const cKe={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},nJ=At((e,t)=>{const n=Je("MultiSelect",cKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:m,dropdownOpened:y,defaultDropdownOpened:v,onDropdownOpen:b,onDropdownClose:w,selectFirstOptionOnChange:E,onOptionSubmit:T,comboboxProps:A,filter:I,limit:R,withScrollArea:D,maxDropdownHeight:M,searchValue:$,defaultSearchValue:U,onSearchChange:F,readOnly:H,disabled:Q,onFocus:J,onBlur:ne,onPaste:Z,radius:ie,rightSection:q,rightSectionWidth:j,rightSectionPointerEvents:G,rightSectionProps:V,leftSection:Y,leftSectionWidth:ee,leftSectionPointerEvents:ae,leftSectionProps:_e,inputContainer:pe,inputWrapperOrder:Te,withAsterisk:Le,labelProps:ye,descriptionProps:he,errorProps:$e,wrapperProps:Ne,description:tt,label:it,error:Me,maxValues:Ge,searchable:at,nothingFoundMessage:yt,withCheckIcon:Tt,checkIconPosition:Ot,hidePickedOptions:qe,withErrorStyles:ft,name:wt,form:ke,id:Oe,clearable:dt,clearButtonProps:Lt,hiddenInputProps:Ft,placeholder:dn,hiddenInputValuesDivider:Dn,required:Tr,mod:Ri,renderOption:Un,onRemove:tr,onClear:Si,scrollAreaProps:Sr,...Po}=n,Qi=pl(Oe),Ni=Ewe(m),Ji=TQ(Ni),Xr=MQ({opened:y,defaultOpened:v,onDropdownOpen:b,onDropdownClose:()=>{w==null||w(),Xr.resetSelectedOption()}}),{styleProps:Oo,rest:{type:ic,autoComplete:ga,...Iu}}=SE(Po),[Qr,Bi]=Wo({value:c,defaultValue:f,finalValue:[],onChange:d}),[si,Hs]=Wo({value:$,defaultValue:U,finalValue:"",onChange:F}),Fr=Zt({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:Zi,resolvedStyles:Mo}=EE({props:n,styles:o,classNames:r}),co=Pr=>{h==null||h(Pr),Pr.key===" "&&!at&&(Pr.preventDefault(),Xr.toggleDropdown()),Pr.key==="Backspace"&&si.length===0&&Qr.length>0&&(tr==null||tr(Qr[Qr.length-1]),Bi(Qr.slice(0,Qr.length-1)))},Ko=Qr.map((Pr,sc)=>{var ps,Wa;return S.jsx(cD,{withRemoveButton:!H&&!((ps=Ji[Pr])!=null&&ps.disabled),onRemove:()=>{Bi(Qr.filter(Xo=>Pr!==Xo)),tr==null||tr(Pr)},unstyled:a,disabled:Q,...Fr("pill"),children:((Wa=Ji[Pr])==null?void 0:Wa.label)||Pr},`${Pr}-${sc}`)});O.useEffect(()=>{E&&Xr.selectFirstOption()},[E,Qr]);const vl=S.jsx(Wr.ClearButton,{...Lt,onClear:()=>{Si==null||Si(),Bi([]),Hs("")}}),kh=lKe({data:Ni,value:Qr});return S.jsxs(S.Fragment,{children:[S.jsxs(Wr,{store:Xr,classNames:Zi,styles:Mo,unstyled:a,size:l,readOnly:H,__staticSelector:"MultiSelect",onOptionSubmit:Pr=>{T==null||T(Pr),Hs(""),Xr.updateSelectedOptionIndex("selected"),Qr.includes(Ji[Pr].value)?(Bi(Qr.filter(sc=>sc!==Ji[Pr].value)),tr==null||tr(Ji[Pr].value)):Qr.length<Ge&&Bi([...Qr,Ji[Pr].value])},...A,children:[S.jsx(Wr.DropdownTarget,{children:S.jsx(F$,{...Oo,__staticSelector:"MultiSelect",classNames:Zi,styles:Mo,unstyled:a,size:l,className:i,style:s,variant:p,disabled:Q,radius:ie,__defaultRightSection:S.jsx(Wr.Chevron,{size:l,error:Me,unstyled:a}),__clearSection:vl,__clearable:dt&&Qr.length>0&&!Q&&!H,rightSection:q,rightSectionPointerEvents:G||(vl?"all":"none"),rightSectionWidth:j,rightSectionProps:V,leftSection:Y,leftSectionWidth:ee,leftSectionPointerEvents:ae,leftSectionProps:_e,inputContainer:pe,inputWrapperOrder:Te,withAsterisk:Le,labelProps:ye,descriptionProps:he,errorProps:$e,wrapperProps:Ne,description:tt,label:it,error:Me,multiline:!0,withErrorStyles:ft,__stylesApiProps:{...n,rightSectionPointerEvents:G||(vl?"all":"none"),multiline:!0},pointer:!at,onClick:()=>at?Xr.openDropdown():Xr.toggleDropdown(),"data-expanded":Xr.dropdownOpened||void 0,id:Qi,required:Tr,mod:Ri,children:S.jsxs(cD.Group,{disabled:Q,unstyled:a,...Fr("pillsList"),children:[Ko,S.jsx(Wr.EventsTarget,{autoComplete:ga,children:S.jsx(F$.Field,{...Iu,ref:t,id:Qi,placeholder:dn,type:!at&&!dn?"hidden":"visible",...Fr("inputField"),unstyled:a,onFocus:Pr=>{J==null||J(Pr),at&&Xr.openDropdown()},onBlur:Pr=>{ne==null||ne(Pr),Xr.closeDropdown(),Hs("")},onKeyDown:co,value:si,onChange:Pr=>{Hs(Pr.currentTarget.value),at&&Xr.openDropdown(),E&&Xr.selectFirstOption()},disabled:Q,readOnly:H||!at,pointer:!at})})]})})}),S.jsx(Uwe,{data:qe?kh:Ni,hidden:H||Q,filter:I,search:si,limit:R,hiddenWhenEmpty:!yt,withScrollArea:D,maxDropdownHeight:M,filterOptions:at,value:Qr,checkIconPosition:Ot,withCheckIcon:Tt,nothingFoundMessage:yt,unstyled:a,labelId:it?`${Qi}-label`:void 0,"aria-label":it?void 0:Po["aria-label"],renderOption:Un,scrollAreaProps:Sr})]}),S.jsx(Wr.HiddenInput,{name:wt,valuesDivider:Dn,value:Qr,form:ke,disabled:Q,...Ft})]})});nJ.classes={...yh.classes,...Wr.classes};nJ.displayName="@mantine/core/MultiSelect";var tEe={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const fKe={},dKe=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":qo(r)}}},cB=Yo((e,t)=>{const n=Je("NavLink",fKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:f,children:d,onClick:h,active:p,disabled:m,leftSection:y,rightSection:v,label:b,description:w,disableRightSectionRotation:E,noWrap:T,childrenOffset:A,onKeyDown:I,autoContrast:R,mod:D,...M}=n,$=Zt({name:"NavLink",props:n,classes:tEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:dKe}),[U,F]=Wo({value:l,defaultValue:c,finalValue:!1,onChange:f}),H=!!d,Q=J=>{h==null||h(J),H&&(J.preventDefault(),F(!U))};return S.jsxs(S.Fragment,{children:[S.jsxs(id,{...$("root"),component:"a",ref:t,onClick:Q,onKeyDown:J=>{I==null||I(J),J.nativeEvent.code==="Space"&&H&&(J.preventDefault(),F(!U))},unstyled:a,mod:[{disabled:m,active:p,expanded:U},D],...M,children:[y&&S.jsx(je,{component:"span",...$("section"),mod:{position:"left"},children:y}),S.jsxs(je,{...$("body"),mod:{"no-wrap":T},children:[S.jsx(je,{component:"span",...$("label"),children:b}),S.jsx(je,{component:"span",mod:{active:p},...$("description"),children:w})]}),(H||v)&&S.jsx(je,{...$("section"),component:"span",mod:{rotate:U&&!E,position:"right"},children:H?v||S.jsx(Z8,{...$("chevron")}):v})]}),H&&S.jsx(H8,{in:U,...$("collapse"),children:S.jsx("div",{...$("children"),children:d})})]})});cB.classes=tEe;cB.displayName="@mantine/core/NavLink";var nEe={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const hKe={withCloseButton:!0},pKe=(e,{radius:t,color:n})=>({root:{"--notification-radius":t===void 0?void 0:Ti(t),"--notification-color":n?Hi(n,e):void 0}}),rJ=At((e,t)=>{const n=Je("Notification",hKe,e),{className:r,color:i,radius:s,loading:o,withCloseButton:a,withBorder:u,title:l,icon:c,children:f,onClose:d,closeButtonProps:h,classNames:p,style:m,styles:y,unstyled:v,variant:b,vars:w,mod:E,...T}=n,A=Zt({name:"Notification",classes:nEe,props:n,className:r,style:m,classNames:p,styles:y,unstyled:v,vars:w,varsResolver:pKe});return S.jsxs(je,{...A("root"),mod:[{"data-with-icon":!!c||o,"data-with-border":u},E],ref:t,variant:b,...T,role:"alert",children:[c&&!o&&S.jsx("div",{...A("icon"),children:c}),o&&S.jsx(mh,{size:28,color:i,...A("loader")}),S.jsxs("div",{...A("body"),children:[l&&S.jsx("div",{...A("title"),children:l}),S.jsx(je,{...A("description"),mod:{"data-with-title":!!l},children:f})]}),a&&S.jsx(hx,{iconSize:16,color:"gray",...h,unstyled:v,onClick:d,...A("closeButton")})]})});rJ.classes=nEe;rJ.displayName="@mantine/core/Notification";function rEe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var fD;(function(e){e.event="event",e.props="prop"})(fD||(fD={}));function Uv(){}function mKe(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function dD(e){return!!(e||"").match(/\d/)}function I2(e){return e==null}function gKe(e){return typeof e=="number"&&isNaN(e)}function iEe(e){return I2(e)||gKe(e)||typeof e=="number"&&!isFinite(e)}function sEe(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function yKe(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function vKe(e,t,n){var r=yKe(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function bKe(e){var t=O.useRef(e);t.current=e;var n=O.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function iJ(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function xKe(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function oEe(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function _le(e,t){return Array(t+1).join(e)}function aEe(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+_le("0",Math.abs(o))+i:o>=a?i=i+_le("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function wle(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=iJ(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),f=s;s&&Number(c[0])&&(f=s.split("").reverse().reduce(function(m,y,v){return m.length>v?(Number(m[0])+Number(y)).toString()+m.substring(1,m.length):y+m},c[0]));var d=oEe(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function ew(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var uEe=mKe(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),_Ke=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function wKe(e,t,n){return Math.min(Math.max(e,t),n)}function nz(e){return Math.max(e.selectionStart,e.selectionEnd)}function EKe(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function TKe(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function SKe(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function CKe(e,t,n,r,i,s,o){o===void 0&&(o=SKe);var a=i.findIndex(function(E){return E}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,m=c;p<m;p++){var y=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(y&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var v=r;v<l&&(d[v]===-1||!s(n[v]));)v++;var b=v===l||d[v]===-1?c:d[v];for(v=r-1;v>0&&d[v]===-1;)v--;var w=v===-1||d[v]===-1?0:d[v]+1;return w>b?b:r-w<b-r?w:b}function Ele(e,t,n,r){var i=e.length;if(t=wKe(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function AKe(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(dD(e[n])||dD(e[n-1]));return t}function lEe(e,t,n,r,i,s){s===void 0&&(s=Uv);var o=bKe(function(p,m){var y,v;return iEe(p)?(v="",y=""):typeof p=="number"||m?(v=typeof p=="number"?aEe(p):p,y=r(v)):(v=i(p,void 0),y=r(v)),{formattedValue:y,numAsString:v}}),a=O.useState(function(){return o(I2(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},f=e,d=n;I2(e)&&(f=u.numAsString,d=!0);var h=o(f,d);return O.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function IKe(e){return e.replace(/[^0-9]/g,"")}function kKe(e){return e}function RKe(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=kKe);var a=e.removeFormatting;a===void 0&&(a=IKe);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=Uv);var h=e.onKeyDown;h===void 0&&(h=Uv);var p=e.onMouseUp;p===void 0&&(p=Uv);var m=e.onFocus;m===void 0&&(m=Uv);var y=e.onBlur;y===void 0&&(y=Uv);var v=e.value,b=e.getCaretBoundary;b===void 0&&(b=AKe);var w=e.isValidInputCharacter;w===void 0&&(w=dD);var E=e.isCharacterSame,T=rEe(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),A=lEe(v,u,!!l,o,a,c),I=A[0],R=I.formattedValue,D=I.numAsString,M=A[1],$=O.useRef(),U=O.useRef({formattedValue:R,numAsString:D}),F=function(Me,Ge){U.current={formattedValue:Me.formattedValue,numAsString:Me.value},M(Me,Ge)},H=O.useState(!1),Q=H[0],J=H[1],ne=O.useRef(null),Z=O.useRef({setCaretTimeout:null,focusTimeout:null});O.useEffect(function(){return J(!0),function(){clearTimeout(Z.current.setCaretTimeout),clearTimeout(Z.current.focusTimeout)}},[]);var ie=o,q=function(Me,Ge){var at=parseFloat(Ge);return{formattedValue:Me,value:Ge,floatValue:isNaN(at)?void 0:at}},j=function(Me,Ge,at){Me.selectionStart===0&&Me.selectionEnd===Me.value.length||(ew(Me,Ge),Z.current.setCaretTimeout=setTimeout(function(){Me.value===at&&Me.selectionStart!==Ge&&ew(Me,Ge)},0))},G=function(Me,Ge,at){return Ele(Me,Ge,b(Me),at)},V=function(Me,Ge,at){var yt=b(Ge),Tt=CKe(Ge,R,Me,at,yt,w,E);return Tt=Ele(Ge,Tt,yt),Tt},Y=function(Me){var Ge=Me.formattedValue;Ge===void 0&&(Ge="");var at=Me.input,yt=Me.source,Tt=Me.event,Ot=Me.numAsString,qe;if(at){var ft=Me.inputValue||at.value,wt=nz(at);at.value=Ge,qe=V(ft,Ge,wt),qe!==void 0&&j(at,qe,Ge)}Ge!==R&&F(q(Ge,Ot),{event:Tt,source:yt})};O.useEffect(function(){var Me=U.current,Ge=Me.formattedValue,at=Me.numAsString;(R!==Ge||D!==at)&&F(q(R,D),{event:void 0,source:fD.props})},[R,D]);var ee=ne.current?nz(ne.current):void 0,ae=typeof window<"u"?O.useLayoutEffect:O.useEffect;ae(function(){var Me=ne.current;if(R!==U.current.formattedValue&&Me){var Ge=V(U.current.formattedValue,R,ee);Me.value=R,j(Me,Ge,R)}},[R]);var _e=function(Me,Ge,at){var yt=Ge.target,Tt=$.current?_Ke($.current,yt.selectionEnd):uEe(R,Me),Ot=Object.assign(Object.assign({},Tt),{lastValue:R}),qe=a(Me,Ot),ft=ie(qe);if(qe=a(ft,void 0),f&&!f(q(ft,qe))){var wt=Ge.target,ke=nz(wt),Oe=V(Me,R,ke);return wt.value=R,j(wt,Oe,R),!1}return Y({formattedValue:ft,numAsString:qe,inputValue:Me,event:Ge,source:at,input:Ge.target}),!0},pe=function(Me,Ge){Ge===void 0&&(Ge=0);var at=Me.selectionStart,yt=Me.selectionEnd;$.current={selectionStart:at,selectionEnd:yt+Ge}},Te=function(Me){var Ge=Me.target,at=Ge.value,yt=_e(at,Me,fD.event);yt&&d(Me),$.current=void 0},Le=function(Me){var Ge=Me.target,at=Me.key,yt=Ge.selectionStart,Tt=Ge.selectionEnd,Ot=Ge.value;Ot===void 0&&(Ot="");var qe;at==="ArrowLeft"||at==="Backspace"?qe=Math.max(yt-1,0):at==="ArrowRight"?qe=Math.min(yt+1,Ot.length):at==="Delete"&&(qe=yt);var ft=0;at==="Delete"&&yt===Tt&&(ft=1);var wt=at==="ArrowLeft"||at==="ArrowRight";if(qe===void 0||yt!==Tt&&!wt){h(Me),pe(Ge,ft);return}var ke=qe;if(wt){var Oe=at==="ArrowLeft"?"left":"right";ke=G(Ot,qe,Oe),ke!==qe&&Me.preventDefault()}else at==="Delete"&&!w(Ot[qe])?ke=G(Ot,qe,"right"):at==="Backspace"&&!w(Ot[qe])&&(ke=G(Ot,qe,"left"));ke!==qe&&j(Ge,ke,Ot),h(Me),pe(Ge,ft)},ye=function(Me){var Ge=Me.target,at=function(){var yt=Ge.selectionStart,Tt=Ge.selectionEnd,Ot=Ge.value;if(Ot===void 0&&(Ot=""),yt===Tt){var qe=G(Ot,yt);qe!==yt&&j(Ge,qe,Ot)}};at(),requestAnimationFrame(function(){at()}),p(Me),pe(Ge)},he=function(Me){Me.persist&&Me.persist();var Ge=Me.target,at=Me.currentTarget;ne.current=Ge,Z.current.focusTimeout=setTimeout(function(){var yt=Ge.selectionStart,Tt=Ge.selectionEnd,Ot=Ge.value;Ot===void 0&&(Ot="");var qe=G(Ot,yt);qe!==yt&&!(yt===0&&Tt===Ot.length)&&j(Ge,qe,Ot),m(Object.assign(Object.assign({},Me),{currentTarget:at}))},0)},$e=function(Me){ne.current=null,clearTimeout(Z.current.focusTimeout),clearTimeout(Z.current.setCaretTimeout),y(Me)},Ne=Q&&EKe()?"numeric":void 0,tt=Object.assign({inputMode:Ne},T,{type:t,value:R,onChange:Te,onKeyDown:Le,onMouseUp:ye,onFocus:he,onBlur:$e});if(n==="text")return i?li.createElement(li.Fragment,null,i(R,T)||null):li.createElement("span",Object.assign({},T,{ref:s}),R);if(r){var it=r;return li.createElement(it,Object.assign({},tt,{ref:s}))}return li.createElement("input",Object.assign({},tt,{ref:s}))}function Tle(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=fB(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=iJ(e,o),h=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return n!==void 0&&(p=oEe(p,n,!!r)),l&&(h=vKe(h,l,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(f&&c||"")+p,e}function fB(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function NKe(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function DKe(e,t){return new RegExp("(^-)|[0-9]|"+sEe(e),"g")}function PKe(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function OKe(e,t,n){var r;t===void 0&&(t=TKe(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=fB(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,m=e[f]===p;if(dD(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var y=a===0?"":p;e=e.substring(0,c)+y+e.substring(c+1,e.length)}var v=function(ne,Z,ie){var q=!1,j=!1;s.startsWith("-")?q=!1:ne.startsWith("--")?(q=!1,j=!0):o.startsWith("-")&&ne.length===o.length?q=!1:ne[0]==="-"&&(q=!0);var G=q?1:0;return j&&(G=2),G&&(ne=ne.substring(G),Z-=G,ie-=G),{value:ne,start:Z,end:ie,hasNegation:q}},b=v(e,c,f),w=b.hasNegation;r=b,e=r.value,c=r.start,f=r.end;var E=v(t.lastValue,u.start,u.end),T=E.start,A=E.end,I=E.value,R=e.substring(c,f);e.length&&I.length&&(T>I.length-o.length||A<s.length)&&!(R&&o.startsWith(R))&&(e=I);var D=0;e.startsWith(s)?D+=s.length:c<s.length&&(D=c),e=e.substring(D),f-=D;var M=e.length,$=e.length-o.length;e.endsWith(o)?M=$:(f>$||f>e.length-o.length)&&(M=f),e=e.substring(0,M),e=NKe(w?"-"+e:e,i),e=(e.match(DKe(p))||[]).join("");var U=e.indexOf(p);e=e.replace(new RegExp(sEe(p),"g"),function(ne,Z){return Z===U?".":""});var F=iJ(e,i),H=F.beforeDecimal,Q=F.afterDecimal,J=F.addNegation;return l.end-l.start<u.end-u.start&&H===""&&m&&!parseFloat(Q)&&(e=J?"-":""),e}function MKe(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function LKe(e){var t=fB(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function $Ke(e){e=LKe(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=Uv);var s=e.onBlur;s===void 0&&(s=Uv);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=rEe(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=fB(e),y=m.decimalSeparator,v=m.allowedDecimalSeparators,b=function(J){return Tle(J,e)},w=function(J,ne){return OKe(J,ne,e)},E=I2(f)?c:f,T=d??PKe(E,l,t);I2(f)?I2(c)||(T=T||typeof c=="number"):T=T||typeof f=="number";var A=function(J){return iEe(J)?J:(typeof J=="number"&&(J=aEe(J)),T&&typeof a=="number"?wle(J,a,!!u):J)},I=lEe(A(f),A(c),!!T,b,w,h),R=I[0],D=R.numAsString,M=R.formattedValue,$=I[1],U=function(J){var ne=J.target,Z=J.key,ie=ne.selectionStart,q=ne.selectionEnd,j=ne.value;if(j===void 0&&(j=""),(Z==="Backspace"||Z==="Delete")&&q<l.length){J.preventDefault();return}if(ie!==q){i(J);return}Z==="Backspace"&&j[0]==="-"&&ie===l.length+1&&n&&ew(ne,1),a&&u&&(Z==="Backspace"&&j[ie-1]===y?(ew(ne,ie-1),J.preventDefault()):Z==="Delete"&&j[ie]===y&&J.preventDefault()),v!=null&&v.includes(Z)&&j[ie]===y&&ew(ne,ie+1);var G=o===!0?",":o;Z==="Backspace"&&j[ie-1]===G&&ew(ne,ie-1),Z==="Delete"&&j[ie]===G&&ew(ne,ie+1),i(J)},F=function(J){var ne=D;if(ne.match(/\d/g)||(ne=""),r||(ne=xKe(ne)),u&&a&&(ne=wle(ne,a,u)),ne!==D){var Z=Tle(ne,e);$({formattedValue:Z,value:ne,floatValue:parseFloat(ne)},{event:J,source:fD.event})}s(J)},H=function(J){return J===y?!0:dD(J)},Q=function(J){var ne=J.currentValue,Z=J.lastValue,ie=J.formattedValue,q=J.currentValueIndex,j=J.formattedValueIndex,G=ne[q],V=ie[j],Y=uEe(Z,ne),ee=Y.to,ae=function(_e){return w(_e).indexOf(".")+l.length};return f===0&&u&&a&&ne[ee.start]===y&&ae(ne)<q&&ae(ie)>j?!1:q>=ee.start&&q<ee.end&&v&&v.includes(G)&&V===y?!0:G===V};return Object.assign(Object.assign({},p),{value:M,valueIsNumericString:!1,isValidInputCharacter:H,isCharacterSame:Q,onValueChange:$,format:b,removeFormatting:w,getCaretBoundary:function(J){return MKe(J,e)},onKeyDown:U,onBlur:F})}function FKe(e){var t=$Ke(e);return li.createElement(RKe,Object.assign({},t))}function Sle({direction:e,style:t,...n}){return S.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:S.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var Jq={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const BKe=/^(0\.0*|-0(\.0*)?)$/,jKe=/^-?0\d+(\.\d+)?\.?$/;function Zq(e){return typeof e=="string"&&e!==""&&!Number.isNaN(Number(e))}function rz(e){return typeof e=="number"?e<Number.MAX_SAFE_INTEGER:e===""||Zq(e)&&Number(e)<Number.MAX_SAFE_INTEGER}function UKe(e){return e.toString().replace(".","").length}function zKe(e,t){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)&&UKe(t)<14&&t!==""}function Cle(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const VKe={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},HKe=(e,{size:t})=>({controls:{"--ni-chevron-size":Kn(t,"ni-chevron-size")}}),sJ=At((e,t)=>{const n=Je("NumberInput",VKe,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:m,rightSection:y,isAllowed:v,clampBehavior:b,onBlur:w,allowDecimal:E,decimalScale:T,onKeyDown:A,onKeyDownCapture:I,handlersRef:R,startValue:D,disabled:M,rightSectionPointerEvents:$,allowNegative:U,readOnly:F,size:H,rightSectionWidth:Q,stepHoldInterval:J,stepHoldDelay:ne,allowLeadingZeros:Z,withKeyboardEvents:ie,trimLeadingZeroesOnBlur:q,...j}=n,G=Zt({name:"NumberInput",classes:Jq,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:HKe}),{resolvedClassNames:V,resolvedStyles:Y}=EE({classNames:i,styles:s,props:n}),[ee,ae]=Wo({value:c,defaultValue:f,finalValue:"",onChange:u}),_e=ne!==void 0&&J!==void 0,pe=O.useRef(null),Te=O.useRef(null),Le=O.useRef(0),ye=(qe,ft)=>{ft.source==="event"&&ae(zKe(qe.floatValue,qe.value)&&!BKe.test(qe.value)&&!(Z&&jKe.test(qe.value))?qe.floatValue:qe.value),l==null||l(qe,ft)},he=qe=>{const ft=String(qe).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return ft?Math.max(0,(ft[1]?ft[1].length:0)-(ft[2]?+ft[2]:0)):0},$e=qe=>{pe.current&&typeof qe<"u"&&pe.current.setSelectionRange(qe,qe)},Ne=O.useRef($q);Ne.current=()=>{if(!rz(ee))return;let qe;const ft=he(ee),wt=he(p),ke=Math.max(ft,wt),Oe=10**ke;if(!Zq(ee)&&(typeof ee!="number"||Number.isNaN(ee)))qe=Jm(D,h,d);else if(d!==void 0){const Lt=(Math.round(Number(ee)*Oe)+Math.round(p*Oe))/Oe;qe=Lt<=d?Lt:d}else qe=(Math.round(Number(ee)*Oe)+Math.round(p*Oe))/Oe;const dt=qe.toFixed(ke);ae(parseFloat(dt)),l==null||l({floatValue:parseFloat(dt),formattedValue:dt,value:dt},{source:"increment"}),setTimeout(()=>{var Lt;return $e((Lt=pe.current)==null?void 0:Lt.value.length)},0)};const tt=O.useRef($q);tt.current=()=>{if(!rz(ee))return;let qe;const ft=h!==void 0?h:U?Number.MIN_SAFE_INTEGER:0,wt=he(ee),ke=he(p),Oe=Math.max(wt,ke),dt=10**Oe;if(!Zq(ee)&&typeof ee!="number"||Number.isNaN(ee))qe=Jm(D,ft,d);else{const Ft=(Math.round(Number(ee)*dt)-Math.round(p*dt))/dt;qe=ft!==void 0&&Ft<ft?ft:Ft}const Lt=qe.toFixed(Oe);ae(parseFloat(Lt)),l==null||l({floatValue:parseFloat(Lt),formattedValue:Lt,value:Lt},{source:"decrement"}),setTimeout(()=>{var Ft;return $e((Ft=pe.current)==null?void 0:Ft.value.length)},0)};const it=qe=>{A==null||A(qe),!(F||!ie)&&(qe.key==="ArrowUp"&&(qe.preventDefault(),Ne.current()),qe.key==="ArrowDown"&&(qe.preventDefault(),tt.current()))},Me=qe=>{if(I==null||I(qe),qe.key==="Backspace"){const ft=pe.current;ft.selectionStart===0&&ft.selectionStart===ft.selectionEnd&&(qe.preventDefault(),window.setTimeout(()=>$e(0),0))}};D$(R,{increment:Ne.current,decrement:tt.current});const Ge=qe=>{qe?Ne.current():tt.current(),Le.current+=1},at=qe=>{if(Ge(qe),_e){const ft=typeof J=="number"?J:J(Le.current);Te.current=window.setTimeout(()=>at(qe),ft)}},yt=(qe,ft)=>{var wt;qe.preventDefault(),(wt=pe.current)==null||wt.focus(),Ge(ft),_e&&(Te.current=window.setTimeout(()=>at(ft),ne))},Tt=()=>{Te.current&&window.clearTimeout(Te.current),Te.current=null,Le.current=0},Ot=S.jsxs("div",{...G("controls"),children:[S.jsx(id,{...G("control"),tabIndex:-1,"aria-hidden":!0,disabled:M||typeof ee=="number"&&d!==void 0&&ee>=d,mod:{direction:"up"},onMouseDown:qe=>qe.preventDefault(),onPointerDown:qe=>{yt(qe,!0)},onPointerUp:Tt,onPointerLeave:Tt,children:S.jsx(Sle,{direction:"up"})}),S.jsx(id,{...G("control"),tabIndex:-1,"aria-hidden":!0,disabled:M||typeof ee=="number"&&h!==void 0&&ee<=h,mod:{direction:"down"},onMouseDown:qe=>qe.preventDefault(),onPointerDown:qe=>{yt(qe,!1)},onPointerUp:Tt,onPointerLeave:Tt,children:S.jsx(Sle,{direction:"down"})})]});return S.jsx(yh,{component:FKe,allowNegative:U,className:Co(Jq.root,r),size:H,...j,readOnly:F,disabled:M,value:ee,getInputRef:Ro(t,pe),onValueChange:ye,rightSection:m||F||!rz(ee)?y:y||Ot,classNames:V,styles:Y,unstyled:o,__staticSelector:"NumberInput",decimalScale:E?T:0,onKeyDown:it,onKeyDownCapture:Me,rightSectionPointerEvents:$??(M?"none":void 0),rightSectionWidth:Q??`var(--ni-right-section-width-${H||"sm"})`,allowLeadingZeros:Z,onBlur:qe=>{if(w==null||w(qe),b==="blur"&&typeof ee=="number"&&Jm(ee,h,d)!==ee&&ae(Jm(ee,h,d)),q&&typeof ee=="string"&&he(ee)<15){const ft=ee.replace(/^0+/,""),wt=parseFloat(ft);ae(Number.isNaN(wt)||wt>Number.MAX_SAFE_INTEGER?ft:Jm(wt,h,d))}},isAllowed:qe=>b==="strict"?v?v(qe)&&Cle(qe.floatValue,h,d):Cle(qe.floatValue,h,d):v?v(qe):!0})});sJ.classes={...yh.classes,...Jq};sJ.displayName="@mantine/core/NumberInput";const[qKe,cEe]=Su("Progress.Root component was not found in tree");var FP={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const WKe={},oJ=At((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Je("ProgressLabel",WKe,e),u=cEe();return S.jsx(je,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});oJ.classes=FP;oJ.displayName="@mantine/core/ProgressLabel";const GKe={},YKe=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":Kn(t,"progress-size"),"--progress-radius":n===void 0?void 0:Ti(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),dB=At((e,t)=>{const n=Je("ProgressRoot",GKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=Zt({name:"Progress",classes:FP,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:YKe});return S.jsx(qKe,{value:{getStyles:d,autoContrast:l},children:S.jsx(je,{ref:t,...d("root"),...f})})});dB.classes=FP;dB.displayName="@mantine/core/ProgressRoot";const KKe={withAria:!0},hB=At((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=Je("ProgressSection",KKe,e),p=cEe(),m=No(),y=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return S.jsx(je,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...y,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":Hi(l,m),"--progress-label-color":hA(p.autoContrast,m)?cx({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});hB.classes=FP;hB.displayName="@mantine/core/ProgressSection";const XKe={},SA=At((e,t)=>{const n=Je("Progress",XKe,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=EE({classNames:i,styles:s,props:n});return S.jsx(dB,{ref:t,classNames:d,styles:h,vars:o,...f,children:S.jsx(hB,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});SA.classes=FP;SA.displayName="@mantine/core/Progress";SA.Section=hB;SA.Root=dB;SA.Label=oJ;const[QKe,fEe]=ux(),[JKe,ZKe]=ux();var dEe={card:"m_9dc8ae12"};const eXe={withBorder:!0},tXe=(e,{radius:t})=>({card:{"--card-radius":Ti(t)}}),aJ=At((e,t)=>{const n=Je("RadioCard",eXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:m,...y}=n,v=Zt({name:"RadioCard",classes:dEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:tXe,rootSelector:"card"}),{dir:b}=y1(),w=fEe(),E=typeof l=="boolean"?l:(w==null?void 0:w.value)===d||!1,T=p||(w==null?void 0:w.name),A=I=>{if(m==null||m(I),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(I.nativeEvent.code)){I.preventDefault();const R=Array.from(document.querySelectorAll(`[role="radio"][name="${T||"__mantine"}"]`)),D=R.findIndex(U=>U===I.target),M=D+1>=R.length?0:D+1,$=D-1<0?R.length-1:D-1;I.nativeEvent.code==="ArrowDown"&&(R[M].focus(),R[M].click()),I.nativeEvent.code==="ArrowUp"&&(R[$].focus(),R[$].click()),I.nativeEvent.code==="ArrowLeft"&&(R[b==="ltr"?$:M].focus(),R[b==="ltr"?$:M].click()),I.nativeEvent.code==="ArrowRight"&&(R[b==="ltr"?M:$].focus(),R[b==="ltr"?M:$].click())}};return S.jsx(JKe,{value:{checked:E},children:S.jsx(id,{ref:t,mod:[{"with-border":f,checked:E},c],...v("card"),...y,role:"radio","aria-checked":E,name:T,onClick:I=>{h==null||h(I),w==null||w.onChange(d||"")},onKeyDown:A})})});aJ.displayName="@mantine/core/RadioCard";aJ.classes=dEe;const nXe={},uJ=At((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=Je("RadioGroup",nXe,e),f=pl(u),[d,h]=Wo({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return S.jsx(QKe,{value:{value:d,onChange:p,size:s,name:f},children:S.jsx(Yi.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:S.jsx($Q,{role:"radiogroup",children:a})})})});uJ.classes=Yi.Wrapper.classes;uJ.displayName="@mantine/core/RadioGroup";function hEe({size:e,style:t,...n}){return S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:Ke(e),height:Ke(e),...t},"aria-hidden":!0,...n,children:S.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var pEe={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const rXe={icon:hEe},iXe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=tg({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":Kn(r,"radio-size"),"--radio-radius":t===void 0?void 0:Ti(t),"--radio-color":s==="outline"?u:Hi(n,e),"--radio-icon-size":Kn(r,"radio-icon-size"),"--radio-icon-color":i?Hi(i,e):hA(o,e)?cx({color:n,theme:e,autoContrast:o}):void 0}}},lJ=At((e,t)=>{const n=Je("RadioIndicator",rXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:m,variant:y,disabled:v,...b}=n,w=l,E=Zt({name:"RadioIndicator",classes:pEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:iXe,rootSelector:"indicator"}),T=ZKe(),A=typeof p=="boolean"?p:(T==null?void 0:T.checked)||!1;return S.jsx(je,{ref:t,...E("indicator",{variant:y}),variant:y,mod:[{checked:A,disabled:v},m],...b,children:S.jsx(w,{...E("icon")})})});lJ.displayName="@mantine/core/RadioIndicator";lJ.classes=pEe;var mEe={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const sXe={labelPosition:"right"},oXe=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=tg({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":Kn(t,"radio-size"),"--radio-radius":n===void 0?void 0:Ti(n),"--radio-color":s==="outline"?u:Hi(r,e),"--radio-icon-color":i?Hi(i,e):hA(o,e)?cx({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":Kn(t,"radio-icon-size")}}},v0=At((e,t)=>{const n=Je("Radio",sXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:m,color:y,variant:v,disabled:b,wrapperProps:w,icon:E=hEe,rootRef:T,iconColor:A,onChange:I,mod:R,...D}=n,M=Zt({name:"Radio",classes:mEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:oXe}),$=fEe(),U=($==null?void 0:$.size)??c,F=n.size?c:U,{styleProps:H,rest:Q}=SE(D),J=pl(l),ne=$?{checked:$.value===Q.value,name:Q.name??$.name,onChange:Z=>{$.onChange(Z),I==null||I(Z)}}:{};return S.jsx(eB,{...M("root"),__staticSelector:"Radio",__stylesApiProps:n,id:J,size:F,labelPosition:d,label:f,description:h,error:p,disabled:b,classNames:r,styles:o,unstyled:a,"data-checked":ne.checked||void 0,variant:v,ref:T,mod:R,...H,...w,children:S.jsxs(je,{...M("inner"),mod:{"label-position":d},children:[S.jsx(je,{...M("radio",{focusable:!0,variant:v}),onChange:I,...Q,...ne,component:"input",mod:{error:!!p},ref:t,id:J,disabled:b,type:"radio"}),S.jsx(E,{...M("icon"),"aria-hidden":!0})]})})});v0.classes=mEe;v0.displayName="@mantine/core/Radio";v0.Group=uJ;v0.Card=aJ;v0.Indicator=lJ;const aXe={duration:100,transition:"fade"};function uXe(e,t){return{...aXe,...t,...e}}function lXe({offset:e,position:t,defaultOpened:n}){const[r,i]=O.useState(n),s=O.useRef(null),{x:o,y:a,elements:u,refs:l,update:c,placement:f}=sQ({placement:t,middleware:[tQ({crossAxis:!0,padding:5,rootBoundary:"document"})]}),d=f.includes("right")?e:t.includes("left")?e*-1:0,h=f.includes("bottom")?e:t.includes("top")?e*-1:0,p=O.useCallback(({clientX:m,clientY:y})=>{l.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:m,y,left:m+d,top:y+h,right:m,bottom:y}}})},[u.reference]);return O.useEffect(()=>{if(l.floating.current){const m=s.current;m.addEventListener("mousemove",p);const y=Dy(l.floating.current);return y.forEach(v=>{v.addEventListener("scroll",c)}),()=>{m.removeEventListener("mousemove",p),y.forEach(v=>{v.removeEventListener("scroll",c)})}}},[u.reference,l.floating.current,c,p,r]),{handleMouseMove:p,x:o,y:a,opened:r,setOpened:i,boundaryRef:s,floating:l.setFloating}}var pB={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const cXe={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:uf("popover")},fXe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Ti(t),"--tooltip-bg":n?Hi(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),cJ=At((e,t)=>{const n=Je("TooltipFloating",cXe,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:y,zIndex:v,disabled:b,defaultOpened:w,variant:E,vars:T,portalProps:A,...I}=n,R=No(),D=Zt({name:"TooltipFloating",props:n,classes:pB,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:T,varsResolver:fXe}),{handleMouseMove:M,x:$,y:U,opened:F,boundaryRef:H,floating:Q,setOpened:J}=lXe({offset:p,position:m,defaultOpened:w});if(!ax(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const ne=Ro(H,U8(r),t),Z=r.props,ie=j=>{var G;(G=Z.onMouseEnter)==null||G.call(Z,j),M(j),J(!0)},q=j=>{var G;(G=Z.onMouseLeave)==null||G.call(Z,j),J(!1)};return S.jsxs(S.Fragment,{children:[S.jsx(fx,{...A,withinPortal:s,children:S.jsx(je,{...I,...D("tooltip",{style:{...jX(o,R),zIndex:v,display:!b&&F?"block":"none",top:(U&&Math.round(U))??"",left:($&&Math.round($))??""}}),variant:E,ref:Q,mod:{multiline:y},children:h})}),O.cloneElement(r,{...Z,[i]:ne,onMouseEnter:ie,onMouseLeave:q})]})});cJ.classes=pB;cJ.displayName="@mantine/core/TooltipFloating";const gEe=O.createContext(!1),dXe=gEe.Provider,hXe=()=>O.useContext(gEe),pXe={openDelay:0,closeDelay:0};function fJ(e){const{openDelay:t,closeDelay:n,children:r}=Je("TooltipGroup",pXe,e);return S.jsx(dXe,{value:!0,children:S.jsx(mqe,{delay:{open:t,close:n},children:r})})}fJ.displayName="@mantine/core/TooltipGroup";fJ.extend=e=>e;function mXe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function gXe(e){const t=mXe(e.middlewares),n=[j_e(e.offset)];return t.shift&&n.push(tQ(typeof t.shift=="boolean"?{padding:8}:{padding:8,...t.shift})),t.flip&&n.push(typeof t.flip=="boolean"?$$():$$(t.flip)),n.push(U_e({element:e.arrowRef,padding:e.arrowOffset})),t.inline?n.push(typeof t.inline=="boolean"?EN():EN(t.inline)):e.inline&&n.push(EN()),n}function yXe(e){var A,I,R;const[t,n]=O.useState(e.defaultOpened),i=typeof e.opened=="boolean"?e.opened:t,s=hXe(),o=pl(),{delay:a,currentId:u,setCurrentId:l}=q_e(),c=O.useCallback(D=>{n(D),D&&l(o)},[l,o]),{x:f,y:d,context:h,refs:p,update:m,placement:y,middlewareData:{arrow:{x:v,y:b}={}}}=sQ({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:gXe(e)});gqe(h,{id:o});const{getReferenceProps:w,getFloatingProps:E}=Eqe([pqe(h,{enabled:(A=e.events)==null?void 0:A.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((I=e.events)!=null&&I.touch)}),wqe(h,{enabled:(R=e.events)==null?void 0:R.focus,visibleOnly:!0}),Sqe(h,{role:"tooltip"}),xqe(h,{enabled:typeof e.opened>"u"})]);Z_e({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),D0(()=>{var D;(D=e.onPositionChange)==null||D.call(e,y)},[y]);const T=i&&u&&u!==o;return{x:f,y:d,arrowX:v,arrowY:b,reference:p.setReference,floating:p.setFloating,getFloatingProps:E,getReferenceProps:w,isGroupPhase:T,opened:i,placement:y}}const Ale={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:uf("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},vXe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Ti(t),"--tooltip-bg":n?Hi(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),cs=At((e,t)=>{const n=Je("Tooltip",Ale,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,defaultOpened:f,withinPortal:d,radius:h,color:p,classNames:m,styles:y,unstyled:v,style:b,className:w,withArrow:E,arrowSize:T,arrowOffset:A,arrowRadius:I,arrowPosition:R,offset:D,transitionProps:M,multiline:$,events:U,zIndex:F,disabled:H,positionDependencies:Q,onClick:J,onMouseEnter:ne,onMouseLeave:Z,inline:ie,variant:q,keepMounted:j,vars:G,portalProps:V,mod:Y,floatingStrategy:ee,middlewares:ae,..._e}=Je("Tooltip",Ale,n),{dir:pe}=y1(),Te=O.useRef(null),Le=yXe({position:W_e(pe,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,defaultOpened:f,events:U,arrowRef:Te,arrowOffset:A,offset:typeof D=="number"?D+(E?T/2:0):D,positionDependencies:[...Q,r],inline:ie,strategy:ee,middlewares:ae}),ye=Zt({name:"Tooltip",props:n,classes:pB,className:w,style:b,classNames:m,styles:y,unstyled:v,rootSelector:"tooltip",vars:G,varsResolver:vXe});if(!ax(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const he=Ro(Le.reference,U8(r),t),$e=uXe(M,{duration:100,transition:"fade"}),Ne=r.props;return S.jsxs(S.Fragment,{children:[S.jsx(fx,{...V,withinPortal:d,children:S.jsx(ng,{...$e,keepMounted:j,mounted:!H&&!!Le.opened,duration:Le.isGroupPhase?10:$e.duration,children:tt=>S.jsxs(je,{..._e,"data-fixed":ee==="fixed"||void 0,variant:q,mod:[{multiline:$},Y],...Le.getFloatingProps({ref:Le.floating,className:ye("tooltip").className,style:{...ye("tooltip").style,...tt,zIndex:F,top:Le.y??0,left:Le.x??0}}),children:[o,S.jsx(oQ,{ref:Te,arrowX:Le.arrowX,arrowY:Le.arrowY,visible:E,position:Le.placement,arrowSize:T,arrowOffset:A,arrowRadius:I,arrowPosition:R,...ye("arrow")})]})})}),O.cloneElement(r,Le.getReferenceProps({onClick:J,onMouseEnter:ne,onMouseLeave:Z,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:he,className:Co(w,Ne.className),...Ne}))]})});cs.classes=pB;cs.displayName="@mantine/core/Tooltip";cs.Floating=cJ;cs.Group=fJ;var yEe={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const bXe={withItemsBorders:!0},xXe=(e,{radius:t,color:n,transitionDuration:r,size:i,transitionTimingFunction:s})=>({root:{"--sc-radius":t===void 0?void 0:Ti(t),"--sc-color":n?Hi(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":s,"--sc-padding":Kn(i,"sc-padding"),"--sc-font-size":Ba(i)}}),dJ=At((e,t)=>{var ae,_e;const n=Je("SegmentedControl",bXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,data:l,value:c,defaultValue:f,onChange:d,size:h,name:p,disabled:m,readOnly:y,fullWidth:v,orientation:b,radius:w,color:E,transitionDuration:T,transitionTimingFunction:A,variant:I,autoContrast:R,withItemsBorders:D,mod:M,...$}=n,U=Zt({name:"SegmentedControl",props:n,classes:yEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:xXe}),F=No(),H=l.map(pe=>typeof pe=="string"?{label:pe,value:pe}:pe),Q=Eze(),[J,ne]=O.useState(null),[Z,ie]=O.useState({}),q=(pe,Te)=>{Z[Te]=pe,ie(Z)},[j,G]=Wo({value:c,defaultValue:f,finalValue:Array.isArray(l)?((ae=H.find(pe=>!pe.disabled))==null?void 0:ae.value)??((_e=l[0])==null?void 0:_e.value)??null:null,onChange:d}),V=pl(p),Y=H.map(pe=>O.createElement(je,{...U("control"),mod:{active:j===pe.value,orientation:b},key:pe.value},O.createElement("input",{...U("input"),disabled:m||pe.disabled,type:"radio",name:V,value:pe.value,id:`${V}-${pe.value}`,checked:j===pe.value,onChange:()=>!y&&G(pe.value),"data-focus-ring":F.focusRing,key:`${pe.value}-input`}),O.createElement(je,{component:"label",...U("label"),mod:{active:j===pe.value&&!(m||pe.disabled),disabled:m||pe.disabled,"read-only":y},htmlFor:`${V}-${pe.value}`,ref:Te=>q(Te,pe.value),__vars:{"--sc-label-color":E!==void 0?cx({color:E,theme:F,autoContrast:R}):void 0},key:`${pe.value}-label`},S.jsx("span",{...U("innerLabel"),children:pe.label})))),ee=Ro(t,pe=>ne(pe));return l.length===0?null:S.jsxs(je,{...U("root"),variant:I,size:h,ref:ee,mod:[{"full-width":v,orientation:b,initialized:Q,"with-items-borders":D},M],...$,role:"radiogroup","data-disabled":m,children:[typeof j=="string"&&S.jsx(dQ,{target:Z[j],parent:J,component:"span",transitionDuration:"var(--sc-transition-duration)",...U("indicator")}),Y]})});dJ.classes=yEe;dJ.displayName="@mantine/core/SegmentedControl";const _Xe={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},CA=At((e,t)=>{const n=Je("Select",_Xe,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:m,value:y,defaultValue:v,selectFirstOptionOnChange:b,onOptionSubmit:w,comboboxProps:E,readOnly:T,disabled:A,filter:I,limit:R,withScrollArea:D,maxDropdownHeight:M,size:$,searchable:U,rightSection:F,checkIconPosition:H,withCheckIcon:Q,nothingFoundMessage:J,name:ne,form:Z,searchValue:ie,defaultSearchValue:q,onSearchChange:j,allowDeselect:G,error:V,rightSectionPointerEvents:Y,id:ee,clearable:ae,clearButtonProps:_e,hiddenInputProps:pe,renderOption:Te,onClear:Le,autoComplete:ye,scrollAreaProps:he,__defaultRightSection:$e,__clearSection:Ne,__clearable:tt,...it}=n,Me=O.useMemo(()=>Ewe(m),[m]),Ge=O.useMemo(()=>TQ(Me),[Me]),at=pl(ee),[yt,Tt,Ot]=Wo({value:y,defaultValue:v,finalValue:null,onChange:p}),qe=typeof yt=="string"?Ge[yt]:void 0,ft=_ze(qe),[wt,ke]=Wo({value:ie,defaultValue:q,finalValue:qe?qe.label:"",onChange:j}),Oe=MQ({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),Oe.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),Oe.resetSelectedOption()}}),{resolvedClassNames:dt,resolvedStyles:Lt}=EE({props:n,styles:i,classNames:r});O.useEffect(()=>{b&&Oe.selectFirstOption()},[b,yt]),O.useEffect(()=>{y===null&&ke(""),typeof y=="string"&&qe&&((ft==null?void 0:ft.value)!==qe.value||(ft==null?void 0:ft.label)!==qe.label)&&ke(qe.label)},[y,qe]);const Ft=S.jsx(Wr.ClearButton,{..._e,onClear:()=>{Tt(null,null),ke(""),Le==null||Le()}});return S.jsxs(S.Fragment,{children:[S.jsxs(Wr,{store:Oe,__staticSelector:"Select",classNames:dt,styles:Lt,unstyled:s,readOnly:T,onOptionSubmit:dn=>{w==null||w(dn);const Dn=G&&Ge[dn].value===yt?null:Ge[dn],Tr=Dn?Dn.value:null;Tr!==yt&&Tt(Tr,Dn),!Ot&&ke(typeof Tr=="string"&&(Dn==null?void 0:Dn.label)||""),Oe.closeDropdown()},size:$,...E,children:[S.jsx(Wr.Target,{targetType:U?"input":"button",autoComplete:ye,children:S.jsx(yh,{id:at,ref:t,__defaultRightSection:S.jsx(Wr.Chevron,{size:$,error:V,unstyled:s}),__clearSection:Ft,__clearable:ae&&!!yt&&!A&&!T,rightSection:F,rightSectionPointerEvents:Y||(Ft?"all":"none"),...it,size:$,__staticSelector:"Select",disabled:A,readOnly:T||!U,value:wt,onChange:dn=>{ke(dn.currentTarget.value),Oe.openDropdown(),b&&Oe.selectFirstOption()},onFocus:dn=>{U&&Oe.openDropdown(),f==null||f(dn)},onBlur:dn=>{var Dn;U&&Oe.closeDropdown(),ke(yt!=null&&((Dn=Ge[yt])==null?void 0:Dn.label)||""),d==null||d(dn)},onClick:dn=>{U?Oe.openDropdown():Oe.toggleDropdown(),h==null||h(dn)},classNames:dt,styles:Lt,unstyled:s,pointer:!U,error:V})}),S.jsx(Uwe,{data:Me,hidden:T||A,filter:I,search:wt,limit:R,hiddenWhenEmpty:!J,withScrollArea:D,maxDropdownHeight:M,filterOptions:U&&(qe==null?void 0:qe.label)!==wt,value:yt,checkIconPosition:H,withCheckIcon:Q,nothingFoundMessage:J,unstyled:s,labelId:it.label?`${at}-label`:void 0,"aria-label":it.label?void 0:it["aria-label"],renderOption:Te,scrollAreaProps:he})]}),S.jsx(Wr.HiddenInput,{value:yt,name:ne,form:Z,disabled:A,...pe})]})});CA.classes={...yh.classes,...Wr.classes};CA.displayName="@mantine/core/Select";function wXe({spacing:e,verticalSpacing:t,cols:n,selector:r}){var c;const i=No(),s=t===void 0?e:t,o=ox({"--sg-spacing-x":qo(bp(e)),"--sg-spacing-y":qo(bp(s)),"--sg-cols":(c=bp(n))==null?void 0:c.toString()}),a=ss(i.breakpoints).reduce((f,d)=>(f[d]||(f[d]={}),typeof e=="object"&&e[d]!==void 0&&(f[d]["--sg-spacing-x"]=qo(e[d])),typeof s=="object"&&s[d]!==void 0&&(f[d]["--sg-spacing-y"]=qo(s[d])),typeof n=="object"&&n[d]!==void 0&&(f[d]["--sg-cols"]=n[d]),f),{}),l=aD(ss(a),i.breakpoints).filter(f=>ss(a[f.value]).length>0).map(f=>({query:`(min-width: ${i.breakpoints[f.value]})`,styles:a[f.value]}));return S.jsx(TE,{styles:o,media:l,selector:r})}function iz(e){return typeof e=="object"&&e!==null?ss(e):[]}function EXe(e){return e.sort((t,n)=>oD(t)-oD(n))}function TXe({spacing:e,verticalSpacing:t,cols:n}){const r=Array.from(new Set([...iz(e),...iz(t),...iz(n)]));return EXe(r)}function SXe({spacing:e,verticalSpacing:t,cols:n,selector:r}){var l;const i=t===void 0?e:t,s=ox({"--sg-spacing-x":qo(bp(e)),"--sg-spacing-y":qo(bp(i)),"--sg-cols":(l=bp(n))==null?void 0:l.toString()}),o=TXe({spacing:e,verticalSpacing:t,cols:n}),a=o.reduce((c,f)=>(c[f]||(c[f]={}),typeof e=="object"&&e[f]!==void 0&&(c[f]["--sg-spacing-x"]=qo(e[f])),typeof i=="object"&&i[f]!==void 0&&(c[f]["--sg-spacing-y"]=qo(i[f])),typeof n=="object"&&n[f]!==void 0&&(c[f]["--sg-cols"]=n[f]),c),{}),u=o.map(c=>({query:`simple-grid (min-width: ${c})`,styles:a[c]}));return S.jsx(TE,{styles:s,container:u,selector:r})}var vEe={container:"m_925c2d2c",root:"m_2415a157"};const CXe={cols:1,spacing:"md",type:"media"},hJ=At((e,t)=>{const n=Je("SimpleGrid",CXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,cols:l,verticalSpacing:c,spacing:f,type:d,...h}=n,p=Zt({name:"SimpleGrid",classes:vEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),m=NP();return d==="container"?S.jsxs(S.Fragment,{children:[S.jsx(SXe,{...n,selector:`.${m}`}),S.jsx("div",{...p("container"),children:S.jsx(je,{ref:t,...p("root",{className:m}),...h})})]}):S.jsxs(S.Fragment,{children:[S.jsx(wXe,{...n,selector:`.${m}`}),S.jsx(je,{ref:t,...p("root",{className:m}),...h})]})});hJ.classes=vEe;hJ.displayName="@mantine/core/SimpleGrid";const[bEe,mB]=Su("SliderProvider was not found in tree"),pJ=O.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=mB();return S.jsx(je,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});pJ.displayName="@mantine/core/SliderRoot";const B$=O.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:m=null,disabled:y},v)=>{const{getStyles:b}=mB(),[w,E]=O.useState(!1),T=l||s||w||h&&p;return S.jsxs(je,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:v,__vars:{"--slider-thumb-offset":`${r}%`},...b("thumb",{focusable:!0}),mod:{dragging:s,disabled:y},onFocus:A=>{E(!0),typeof f=="function"&&f(A)},onBlur:A=>{E(!1),typeof d=="function"&&d(A)},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:A=>A.stopPropagation(),children:[m,S.jsx(ng,{mounted:i!=null&&!!T,transition:"fade",duration:0,...u,children:A=>S.jsx("div",{...b("label",{style:A}),children:i})})]})});B$.displayName="@mantine/core/SliderThumb";function j$({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function AXe({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function xEe({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=mB();if(!e)return null;const u=e.map((l,c)=>O.createElement(je,{...a("markWrapper"),__vars:{"--mark-offset":`${j$({value:l.value,min:t,max:n})}%`},key:c},S.jsx(je,{...a("mark"),mod:{filled:AXe({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&S.jsx("div",{...a("markLabel"),children:l.label})));return S.jsx("div",{children:u})}xEe.displayName="@mantine/core/SliderMarks";function mJ({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=mB();return S.jsx(je,{...u("trackContainer"),mod:{disabled:r},...o,children:S.jsxs(je,{...u("track"),mod:{inverted:s,disabled:r},children:[S.jsx(je,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,S.jsx(xEe,{...a,offset:i,disabled:r,inverted:s})]})})}mJ.displayName="@mantine/core/SliderTrack";function eW({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function Hd(e,t){return parseFloat(e.toFixed(t))}function _Ee(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}function fw(e,t){const r=[...t].sort((i,s)=>i.value-s.value).find(i=>i.value>e);return r?r.value:e}function dw(e,t){const r=[...t].sort((i,s)=>s.value-i.value).find(i=>i.value<e);return r?r.value:e}function tW(e){const t=[...e].sort((n,r)=>n.value-r.value);return t.length>0?t[0].value:0}function nW(e){const t=[...e].sort((n,r)=>n.value-r.value);return t.length>0?t[t.length-1].value:100}var gB={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const IXe={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},kXe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":Kn(t,"slider-size"),"--slider-color":n?Hi(n,e):void 0,"--slider-radius":i===void 0?void 0:Ti(i),"--slider-thumb-size":r!==void 0?Ke(r):"calc(var(--slider-size) * 2)"}}),yB=At((e,t)=>{const n=Je("Slider",IXe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:m,label:y,labelTransitionProps:v,labelAlwaysOn:b,thumbLabel:w,showLabelOnHover:E,thumbChildren:T,disabled:A,unstyled:I,scale:R,inverted:D,className:M,style:$,vars:U,hiddenInputProps:F,restrictToMarks:H,thumbProps:Q,...J}=n,ne=Zt({name:"Slider",props:n,classes:gB,classNames:r,className:M,styles:i,style:$,vars:U,varsResolver:kXe,unstyled:I}),{dir:Z}=y1(),[ie,q]=O.useState(!1),[j,G]=Wo({value:typeof s=="number"?Jm(s,l,c):s,defaultValue:typeof h=="number"?Jm(h,l,c):h,finalValue:Jm(0,l,c),onChange:o}),V=O.useRef(j),Y=O.useRef(null),ee=O.useRef(null),ae=j$({value:j,min:l,max:c}),_e=R(j),pe=typeof y=="function"?y(_e):y,Te=d??_Ee(f),Le=O.useCallback(({x:Ne})=>{if(!A){const tt=eW({value:Ne,min:l,max:c,step:f,precision:Te});G(H&&(m!=null&&m.length)?Bq(tt,m.map(it=>it.value)):tt),V.current=tt}},[A,l,c,f,Te,G,m,H]),{ref:ye,active:he}=Zxe(Le,{onScrubEnd:()=>a==null?void 0:a(H&&(m!=null&&m.length)?Bq(V.current,m.map(Ne=>Ne.value)):V.current)},Z),$e=Ne=>{var tt,it,Me,Ge,at,yt;if(!A)switch(Ne.key){case"ArrowUp":{if(Ne.preventDefault(),(tt=ee.current)==null||tt.focus(),H&&m){const Ot=fw(j,m);G(Ot),a==null||a(Ot);break}const Tt=Hd(Math.min(Math.max(j+f,l),c),Te);G(Tt),a==null||a(Tt);break}case"ArrowRight":{if(Ne.preventDefault(),(it=ee.current)==null||it.focus(),H&&m){const Ot=Z==="rtl"?dw(j,m):fw(j,m);G(Ot),a==null||a(Ot);break}const Tt=Hd(Math.min(Math.max(Z==="rtl"?j-f:j+f,l),c),Te);G(Tt),a==null||a(Tt);break}case"ArrowDown":{if(Ne.preventDefault(),(Me=ee.current)==null||Me.focus(),H&&m){const Ot=dw(j,m);G(Ot),a==null||a(Ot);break}const Tt=Hd(Math.min(Math.max(j-f,l),c),Te);G(Tt),a==null||a(Tt);break}case"ArrowLeft":{if(Ne.preventDefault(),(Ge=ee.current)==null||Ge.focus(),H&&m){const Ot=Z==="rtl"?fw(j,m):dw(j,m);G(Ot),a==null||a(Ot);break}const Tt=Hd(Math.min(Math.max(Z==="rtl"?j+f:j-f,l),c),Te);G(Tt),a==null||a(Tt);break}case"Home":{if(Ne.preventDefault(),(at=ee.current)==null||at.focus(),H&&m){G(tW(m)),a==null||a(tW(m));break}G(l),a==null||a(l);break}case"End":{if(Ne.preventDefault(),(yt=ee.current)==null||yt.focus(),H&&m){G(nW(m)),a==null||a(nW(m));break}G(c),a==null||a(c);break}}};return S.jsx(bEe,{value:{getStyles:ne},children:S.jsxs(pJ,{...J,ref:Ro(t,Y),onKeyDownCapture:$e,onMouseDownCapture:()=>{var Ne;return(Ne=Y.current)==null?void 0:Ne.focus()},size:u,disabled:A,children:[S.jsx(mJ,{inverted:D,offset:0,filled:ae,marks:m,min:l,max:c,value:_e,disabled:A,containerProps:{ref:ye,onMouseEnter:E?()=>q(!0):void 0,onMouseLeave:E?()=>q(!1):void 0},children:S.jsx(B$,{max:c,min:l,value:_e,position:ae,dragging:he,label:pe,ref:ee,labelTransitionProps:v,labelAlwaysOn:b,thumbLabel:w,showLabelOnHover:E,isHovered:ie,disabled:A,...Q,children:T})}),S.jsx("input",{type:"hidden",name:p,value:_e,...F})]})})});yB.classes=gB;yB.displayName="@mantine/core/Slider";function RXe(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const NXe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":Kn(t,"slider-size"),"--slider-color":n?Hi(n,e):void 0,"--slider-radius":i===void 0?void 0:Ti(i),"--slider-thumb-size":r!==void 0?Ke(r):"calc(var(--slider-size) * 2)"}}),DXe={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},U$=At((e,t)=>{const n=Je("RangeSlider",DXe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,minRange:f,maxRange:d,step:h,precision:p,defaultValue:m,name:y,marks:v,label:b,labelTransitionProps:w,labelAlwaysOn:E,thumbFromLabel:T,thumbToLabel:A,showLabelOnHover:I,thumbChildren:R,disabled:D,unstyled:M,scale:$,inverted:U,className:F,style:H,vars:Q,hiddenInputProps:J,restrictToMarks:ne,thumbProps:Z,...ie}=n,q=Zt({name:"Slider",props:n,classes:gB,classNames:r,className:F,styles:i,style:H,vars:Q,varsResolver:NXe,unstyled:M}),{dir:j}=y1(),[G,V]=O.useState(-1),[Y,ee]=O.useState(!1),[ae,_e]=Wo({value:s,defaultValue:m,finalValue:[l,c],onChange:o}),pe=O.useRef(ae),Te=O.useRef([]),Le=O.useRef(void 0),ye=[j$({value:ae[0],min:l,max:c}),j$({value:ae[1],min:l,max:c})],he=p??_Ee(h),$e=ft=>{_e(ft),pe.current=ft};O.useEffect(()=>{Array.isArray(s)&&(pe.current=s)},Array.isArray(s)?[s[0],s[1]]:[null,null]);const Ne=(ft,wt,ke)=>{if(wt===-1)return;const Oe=[...pe.current];if(ne&&v){const dt=Bq(ft,v.map(Tr=>Tr.value)),Lt=Oe[wt];Oe[wt]=dt;const Ft=wt===0?1:0,dn=nW(v),Dn=tW(v);dt===dn&&Oe[Ft]===dn||dt===Dn&&Oe[Ft]===Dn?Oe[wt]=Lt:dt===Oe[Ft]&&(Lt>Oe[Ft]?Oe[Ft]=dw(dt,v):Oe[Ft]=fw(dt,v))}else Oe[wt]=ft,wt===0&&(ft>Oe[1]-(f-1e-9)&&(Oe[1]=Math.min(ft+f,c)),ft>(c-(f-1e-9)||l)&&(Oe[wt]=pe.current[wt]),Oe[1]-ft>d&&(Oe[1]=ft+d)),wt===1&&(ft<Oe[0]+f&&(Oe[0]=Math.max(ft-f,l)),ft<Oe[0]+f&&(Oe[wt]=pe.current[wt]),ft-Oe[0]>d&&(Oe[0]=ft-d));if(Oe[0]=Hd(Oe[0],he),Oe[1]=Hd(Oe[1],he),Oe[0]>Oe[1]){const dt=Oe[0];Oe[0]=Oe[1],Oe[1]=dt}$e(Oe),ke&&(a==null||a(pe.current))},tt=ft=>{if(!D){const wt=eW({value:ft,min:l,max:c,step:h,precision:he});Ne(wt,Le.current,!1)}},{ref:it,active:Me}=Zxe(({x:ft})=>tt(ft),{onScrubEnd:()=>a==null?void 0:a(pe.current)},j);function Ge(ft){Le.current=ft}const at=ft=>{it.current.focus();const wt=it.current.getBoundingClientRect(),ke=RXe(ft.nativeEvent),Oe=eW({value:ke-wt.left,max:c,min:l,step:h,containerWidth:wt.width}),dt=Math.abs(ae[0]-Oe)>Math.abs(ae[1]-Oe)?1:0,Lt=j==="ltr"?dt:dt===1?0:1;Le.current=Lt},yt=()=>G!==1&&G!==0?(V(0),0):G,Tt=ft=>{if(!D)switch(ft.key){case"ArrowUp":{ft.preventDefault();const wt=yt();Te.current[wt].focus();const ke=ne&&v?fw(pe.current[wt],v):Math.min(Math.max(pe.current[wt]+h,l),c);Ne(Hd(ke,he),wt,!0);break}case"ArrowRight":{ft.preventDefault();const wt=yt();Te.current[wt].focus();const ke=ne&&v?(j==="rtl"?dw:fw)(pe.current[wt],v):Math.min(Math.max(j==="rtl"?pe.current[wt]-h:pe.current[wt]+h,l),c);Ne(Hd(ke,he),wt,!0);break}case"ArrowDown":{ft.preventDefault();const wt=yt();Te.current[wt].focus();const ke=ne&&v?dw(pe.current[wt],v):Math.min(Math.max(pe.current[wt]-h,l),c);Ne(Hd(ke,he),wt,!0);break}case"ArrowLeft":{ft.preventDefault();const wt=yt();Te.current[wt].focus();const ke=ne&&v?(j==="rtl"?fw:dw)(pe.current[wt],v):Math.min(Math.max(j==="rtl"?pe.current[wt]+h:pe.current[wt]-h,l),c);Ne(Hd(ke,he),wt,!0);break}}},Ot={max:c,min:l,size:u,labelTransitionProps:w,labelAlwaysOn:E,onBlur:()=>V(-1)},qe=Array.isArray(R);return S.jsx(bEe,{value:{getStyles:q},children:S.jsxs(pJ,{...ie,size:u,ref:t,disabled:D,children:[S.jsxs(mJ,{offset:ye[0],marksOffset:ae[0],filled:ye[1]-ye[0],marks:v,inverted:U,min:l,max:c,value:ae[1],disabled:D,containerProps:{ref:it,onMouseEnter:I?()=>ee(!0):void 0,onMouseLeave:I?()=>ee(!1):void 0,onTouchStartCapture:at,onTouchEndCapture:()=>{Le.current=-1},onMouseDownCapture:at,onMouseUpCapture:()=>{Le.current=-1},onKeyDownCapture:Tt},children:[S.jsx(B$,{...Ot,value:$(ae[0]),position:ye[0],dragging:Me,label:typeof b=="function"?b(Hd($(ae[0]),he)):b,ref:ft=>{Te.current[0]=ft},thumbLabel:T,onMouseDown:()=>Ge(0),onFocus:()=>V(0),showLabelOnHover:I,isHovered:Y,disabled:D,...Z==null?void 0:Z(0),children:qe?R[0]:R}),S.jsx(B$,{...Ot,thumbLabel:A,value:$(ae[1]),position:ye[1],dragging:Me,label:typeof b=="function"?b(Hd($(ae[1]),he)):b,ref:ft=>{Te.current[1]=ft},onMouseDown:()=>Ge(1),onFocus:()=>V(1),showLabelOnHover:I,isHovered:Y,disabled:D,...Z==null?void 0:Z(1),children:qe?R[1]:R})]}),S.jsx("input",{type:"hidden",name:`${y}_from`,value:ae[0],...J}),S.jsx("input",{type:"hidden",name:`${y}_to`,value:ae[1],...J})]})})});U$.classes=gB;U$.displayName="@mantine/core/RangeSlider";const PXe={},Zf=At((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=Je("Space",PXe,e);return S.jsx(je,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});Zf.displayName="@mantine/core/Space";var wEe={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const OXe={maxHeight:100,initialState:!1},MXe=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),gJ=At((e,t)=>{const n=Je("Spoiler",OXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:p,transitionDuration:m,id:y,expanded:v,onExpandedChange:b,...w}=n,E=Zt({name:"Spoiler",classes:wEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:MXe}),T=pl(y),A=`${T}-region`,[I,R]=Wo({value:v,defaultValue:l,finalValue:!1,onChange:b}),{ref:D,height:M}=mze(),$=I?f:d,U=$!==null&&c<M;return S.jsxs(je,{...E("root"),id:T,ref:t,"data-has-spoiler":U||void 0,...w,children:[U&&S.jsx(AE,{component:"button",type:"button",ref:p,onClick:()=>R(!I),"aria-expanded":I,"aria-controls":A,...E("control"),children:$}),S.jsx("div",{...E("content",{style:{maxHeight:I?M?Ke(M):void 0:Ke(c)}}),"data-reduce-motion":!0,role:"region",id:A,children:S.jsx("div",{ref:D,children:h})})]})});gJ.classes=wEe;gJ.displayName="@mantine/core/Spoiler";var EEe={root:"m_6d731127"};const LXe={gap:"md",align:"stretch",justify:"flex-start"},$Xe=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":qo(t),"--stack-align":n,"--stack-justify":r}}),mu=At((e,t)=>{const n=Je("Stack",LXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=Zt({name:"Stack",props:n,classes:EEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:$Xe});return S.jsx(je,{ref:t,...p("root"),variant:d,...h})});mu.classes=EEe;mu.displayName="@mantine/core/Stack";const TEe=O.createContext(null),FXe=TEe.Provider,BXe=()=>O.useContext(TEe),jXe={},yJ=At((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=Je("SwitchGroup",jXe,e),[c,f]=Wo({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return S.jsx(FXe,{value:{value:c,onChange:d,size:s},children:S.jsx(Yi.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"SwitchGroup",children:S.jsx($Q,{role:"group",children:a})})})});yJ.classes=Yi.Wrapper.classes;yJ.displayName="@mantine/core/SwitchGroup";var SEe={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const UXe={labelPosition:"right"},zXe=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:Ti(t),"--switch-height":Kn(r,"switch-height"),"--switch-width":Kn(r,"switch-width"),"--switch-thumb-size":Kn(r,"switch-thumb-size"),"--switch-label-font-size":Kn(r,"switch-label-font-size"),"--switch-track-label-padding":Kn(r,"switch-track-label-padding"),"--switch-color":n?Hi(n,e):void 0}}),Rw=At((e,t)=>{const n=Je("Switch",UXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,offLabel:f,onLabel:d,id:h,size:p,radius:m,wrapperProps:y,thumbIcon:v,checked:b,defaultChecked:w,onChange:E,labelPosition:T,description:A,error:I,disabled:R,variant:D,rootRef:M,mod:$,...U}=n,F=BXe(),H=p||(F==null?void 0:F.size),Q=Zt({name:"Switch",props:n,classes:SEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:zXe}),{styleProps:J,rest:ne}=SE(U),Z=pl(h),ie=F?{checked:F.value.includes(ne.value),onChange:F.onChange}:{},[q,j]=Wo({value:ie.checked??b,defaultValue:w,finalValue:!1});return S.jsxs(eB,{...Q("root"),__staticSelector:"Switch",__stylesApiProps:n,id:Z,size:H,labelPosition:T,label:c,description:A,error:I,disabled:R,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":ie.checked||b||void 0,variant:D,ref:M,mod:$,...J,...y,children:[S.jsx("input",{...ne,disabled:R,checked:q,"data-checked":ie.checked||b||void 0,onChange:G=>{var V;F?(V=ie.onChange)==null||V.call(ie,G):E==null||E(G),j(G.currentTarget.checked)},id:Z,ref:t,type:"checkbox",role:"switch",...Q("input")}),S.jsxs(je,{"aria-hidden":"true",mod:{error:I,"label-position":T,"without-labels":!d&&!f},...Q("track"),children:[S.jsx(je,{component:"span",mod:"reduce-motion",...Q("thumb"),children:v}),S.jsx("span",{...Q("trackLabel"),children:q?d:f})]})]})});Rw.classes={...SEe,...Rwe};Rw.displayName="@mantine/core/Switch";Rw.Group=yJ;const[VXe,HXe]=Su("Table component was not found in the tree");var BP={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function qXe(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function kE(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=At((i,s)=>{const o=Je(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=o,d=HXe();return S.jsx(je,{component:e,ref:s,...qXe(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=BP,r}const rW=kE("th",{columnBorder:!0}),CEe=kE("td",{columnBorder:!0}),VM=kE("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),AEe=kE("thead",{stickyHeader:!0}),IEe=kE("tbody"),kEe=kE("tfoot"),REe=kE("caption",{captionSide:!0});function vJ({data:e}){return S.jsxs(S.Fragment,{children:[e.caption&&S.jsx(REe,{children:e.caption}),e.head&&S.jsx(AEe,{children:S.jsx(VM,{children:e.head.map((t,n)=>S.jsx(rW,{children:t},n))})}),e.body&&S.jsx(IEe,{children:e.body.map((t,n)=>S.jsx(VM,{children:t.map((r,i)=>S.jsx(CEe,{children:r},i))},n))}),e.foot&&S.jsx(kEe,{children:S.jsx(VM,{children:e.foot.map((t,n)=>S.jsx(rW,{children:t},n))})})]})}vJ.displayName="@mantine/core/TableDataRenderer";const WXe={type:"scrollarea"},GXe=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":Ke(t),"--table-overflow":n==="native"?"auto":void 0}}),bJ=At((e,t)=>{const n=Je("TableScrollContainer",WXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=Zt({name:"TableScrollContainer",classes:BP,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:GXe,rootSelector:"scrollContainer"});return S.jsx(je,{component:f==="scrollarea"?Wy:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:S.jsx("div",{...h("scrollContainerInner"),children:l})})});bJ.classes=BP;bJ.displayName="@mantine/core/TableScrollContainer";const YXe={withRowBorders:!0,verticalSpacing:7},KXe=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":qo(r),"--table-vertical-spacing":qo(i),"--table-border-color":s?Hi(s,e):void 0,"--table-striped-color":u&&o?Hi(o,e):void 0,"--table-highlight-on-hover-color":l&&a?Hi(a,e):void 0,"--table-sticky-header-offset":f?Ke(c):void 0}}),En=At((e,t)=>{const n=Je("Table",YXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:y,withRowBorders:v,withTableBorder:b,borderColor:w,layout:E,variant:T,data:A,children:I,stickyHeader:R,stickyHeaderOffset:D,mod:M,tabularNums:$,...U}=n,F=Zt({name:"Table",props:n,className:i,style:s,classes:BP,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:KXe});return S.jsx(VXe,{value:{getStyles:F,stickyHeader:R,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:y,withRowBorders:v,captionSide:f||"bottom"},children:S.jsx(je,{component:"table",variant:T,ref:t,mod:[{"data-with-table-border":b,"data-tabular-nums":$},M],...F("table"),...U,children:I||!!A&&S.jsx(vJ,{data:A})})})});En.classes=BP;En.displayName="@mantine/core/Table";En.Td=CEe;En.Th=rW;En.Tr=VM;En.Thead=AEe;En.Tbody=IEe;En.Tfoot=kEe;En.Caption=REe;En.ScrollContainer=bJ;En.DataRenderer=vJ;const[XXe,xJ]=Su("Tabs component was not found in the tree");var jP={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const QXe={},_J=At((e,t)=>{const n=Je("TabsList",QXe,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...f}=n,d=xJ();return S.jsx(je,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:s,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":o},children:r})});_J.classes=jP;_J.displayName="@mantine/core/TabsList";const JXe={},wJ=At((e,t)=>{const n=Je("TabsPanel",JXe,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,keepMounted:c,...f}=n,d=xJ(),h=d.value===s,p=d.keepMounted||c||h?r:null;return S.jsx(je,{...f,...d.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,h?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:d.orientation},l],role:"tabpanel",id:d.getPanelId(s),"aria-labelledby":d.getTabId(s),children:p})});wJ.classes=jP;wJ.displayName="@mantine/core/TabsPanel";const ZXe={},EJ=At((e,t)=>{const n=Je("TabsTab",ZXe,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:m,mod:y,tabIndex:v,...b}=n,w=No(),{dir:E}=y1(),T=xJ(),A=a===T.value,I=D=>{T.onChange(T.allowTabDeactivation&&a===T.value?null:a),u==null||u(D)},R={classNames:h,styles:p,props:n};return S.jsxs(id,{...b,...T.getStyles("tab",{className:r,style:d,variant:T.variant,...R}),disabled:c,unstyled:T.unstyled,variant:T.variant,mod:[{active:A,disabled:c,orientation:T.orientation,inverted:T.inverted,placement:T.orientation==="vertical"&&T.placement},y],ref:t,role:"tab",id:T.getTabId(a),"aria-selected":A,tabIndex:v||A||T.value===null?0:-1,"aria-controls":T.getPanelId(a),onClick:I,__vars:{"--tabs-color":f?Hi(f,w):void 0},onKeyDown:NX({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:T.activateTabWithKeyboard,loop:T.loop,orientation:T.orientation||"horizontal",dir:E,onKeyDown:l}),children:[o&&S.jsx("span",{...T.getStyles("tabSection",R),"data-position":"left",children:o}),i&&S.jsx("span",{...T.getStyles("tabLabel",R),children:i}),s&&S.jsx("span",{...T.getStyles("tabSection",R),"data-position":"right",children:s})]})});EJ.classes=jP;EJ.displayName="@mantine/core/TabsTab";const Ile="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",eQe={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},tQe=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":Ti(t),"--tabs-color":Hi(n,e),"--tabs-text-color":hA(r,e)?cx({color:n,theme:e,autoContrast:r}):void 0}}),Vr=At((e,t)=>{const n=Je("Tabs",eQe,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,placement:y,keepMounted:v,classNames:b,styles:w,unstyled:E,className:T,style:A,vars:I,autoContrast:R,mod:D,...M}=n,$=pl(l),[U,F]=Wo({value:i,defaultValue:r,finalValue:null,onChange:s}),H=Zt({name:"Tabs",props:n,classes:jP,className:T,style:A,classNames:b,styles:w,unstyled:E,vars:I,varsResolver:tQe});return S.jsx(XXe,{value:{placement:y,value:U,orientation:o,id:$,loop:u,activateTabWithKeyboard:c,getTabId:R$(`${$}-tab`,Ile),getPanelId:R$(`${$}-panel`,Ile),onChange:F,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,keepMounted:v,unstyled:E,getStyles:H},children:S.jsx(je,{ref:t,id:$,variant:d,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&y},D],...H("root"),...M,children:a})})});Vr.classes=jP;Vr.displayName="@mantine/core/Tabs";Vr.Tab=EJ;Vr.Panel=wJ;Vr.List=_J;const nQe={},_y=At((e,t)=>{const n=Je("TextInput",nQe,e);return S.jsx(yh,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});_y.classes=yh.classes;_y.displayName="@mantine/core/TextInput";const rQe=["h1","h2","h3","h4","h5","h6"],iQe=["xs","sm","md","lg","xl"];function sQe(e,t){const n=t!==void 0?t:`h${e}`;return rQe.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:iQe.includes(n)?{fontSize:`var(--mantine-font-size-${n})`,fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}:{fontSize:Ke(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var NEe={root:"m_8a5d1357"};const oQe={order:1},aQe=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=sQe(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},io=At((e,t)=>{const n=Je("Title",oQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...m}=n,y=Zt({name:"Title",props:n,classes:NEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:aQe});return[1,2,3,4,5,6].includes(u)?S.jsx(je,{...y("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...m}):null});io.classes=NEe;io.displayName="@mantine/core/Title";function uQe(e){let t=e,n=!1;const r=new Set;return{getState(){return t},updateState(i){t=typeof i=="function"?i(t):i},setState(i){this.updateState(i),r.forEach(s=>s(t))},initialize(i){n||(t=i,n=!0)},subscribe(i){return r.add(i),()=>r.delete(i)}}}function lQe(e){return O.useSyncExternalStore(e.subscribe,()=>e.getState(),()=>e.getState())}function cQe(e,t,n){const r=[],i=[],s={};for(const o of e){const a=o.position||t;s[a]=s[a]||0,s[a]+=1,s[a]<=n?i.push(o):r.push(o)}return{notifications:i,queue:r}}const fQe=()=>uQe({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),RE=fQe(),dQe=(e=RE)=>lQe(e);function AA(e,t){const n=e.getState(),r=t([...n.notifications,...n.queue]),i=cQe(r,n.defaultPosition,n.limit);e.setState({notifications:i.notifications,queue:i.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function hQe(e,t=RE){const n=e.id||C2();return AA(t,r=>e.id&&r.some(i=>i.id===e.id)?r:[...r,{...e,id:n}]),n}function DEe(e,t=RE){return AA(t,n=>n.filter(r=>{var i;return r.id===e?((i=r.onClose)==null||i.call(r,r),!1):!0})),e}function pQe(e,t=RE){return AA(t,n=>n.map(r=>r.id===e.id?{...r,...e}:r)),e.id}function mQe(e=RE){AA(e,()=>[])}function gQe(e=RE){AA(e,t=>t.slice(0,e.getState().limit))}const NE={show:hQe,hide:DEe,update:pQe,clean:mQe,cleanQueue:gQe,updateState:AA};function iW(){return iW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iW.apply(null,arguments)}function PEe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function sW(e,t){return sW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},sW(e,t)}function OEe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,sW(e,t)}var sz={exports:{}},oz,kle;function yQe(){if(kle)return oz;kle=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return oz=e,oz}var az,Rle;function vQe(){if(Rle)return az;Rle=1;var e=yQe();function t(){}function n(){}return n.resetWarningCache=t,az=function(){function r(o,a,u,l,c,f){if(f!==e){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:t};return s.PropTypes=s,s},az}var Nle;function bQe(){return Nle||(Nle=1,sz.exports=vQe()()),sz.exports}var xQe=bQe();const Dle=hh(xQe),Ple={disabled:!1},z$=li.createContext(null);var _Qe=function(t){return t.scrollTop},OR="unmounted",j_="exited",U_="entering",JS="entered",oW="exiting",_1=function(e){OEe(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,u;return s.appearStatus=null,r.in?a?(u=j_,s.appearStatus=U_):u=JS:r.unmountOnExit||r.mountOnEnter?u=OR:u=j_,s.state={status:u},s.nextCallback=null,s}t.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===OR?{status:j_}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==U_&&o!==JS&&(s=U_):(o===U_||o===JS)&&(s=oW)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===U_){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:PR.findDOMNode(this);o&&_Qe(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===j_&&this.setState({status:OR})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,u=this.props.nodeRef?[a]:[PR.findDOMNode(this),a],l=u[0],c=u[1],f=this.getTimeouts(),d=a?f.appear:f.enter;if(!i&&!o||Ple.disabled){this.safeSetState({status:JS},function(){s.props.onEntered(l)});return}this.props.onEnter(l,c),this.safeSetState({status:U_},function(){s.props.onEntering(l,c),s.onTransitionEnd(d,function(){s.safeSetState({status:JS},function(){s.props.onEntered(l,c)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:PR.findDOMNode(this);if(!s||Ple.disabled){this.safeSetState({status:j_},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:oW},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:j_},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:PR.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],l=u[0],c=u[1];this.props.addEndListener(l,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===OR)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=PEe(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return li.createElement(z$.Provider,{value:null},typeof o=="function"?o(i,a):li.cloneElement(li.Children.only(o),a))},t}(li.Component);_1.contextType=z$;_1.propTypes={};function CS(){}_1.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:CS,onEntering:CS,onEntered:CS,onExit:CS,onExiting:CS,onExited:CS};_1.UNMOUNTED=OR;_1.EXITED=j_;_1.ENTERING=U_;_1.ENTERED=JS;_1.EXITING=oW;function wQe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TJ(e,t){var n=function(s){return t&&O.isValidElement(s)?t(s):s},r=Object.create(null);return e&&O.Children.map(e,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function EQe(e,t){e=e||{},t=t||{};function n(c){return c in t?t[c]:e[c]}var r=Object.create(null),i=[];for(var s in e)s in t?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var u in t){if(r[u])for(o=0;o<r[u].length;o++){var l=r[u][o];a[r[u][o]]=n(l)}a[u]=n(u)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function hw(e,t,n){return n[t]!=null?n[t]:e.props[t]}function TQe(e,t){return TJ(e.children,function(n){return O.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:hw(n,"appear",e),enter:hw(n,"enter",e),exit:hw(n,"exit",e)})})}function SQe(e,t,n){var r=TJ(e.children),i=EQe(t,r);return Object.keys(i).forEach(function(s){var o=i[s];if(O.isValidElement(o)){var a=s in t,u=s in r,l=t[s],c=O.isValidElement(l)&&!l.props.in;u&&(!a||c)?i[s]=O.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:hw(o,"exit",e),enter:hw(o,"enter",e)}):!u&&a&&!c?i[s]=O.cloneElement(o,{in:!1}):u&&a&&O.isValidElement(l)&&(i[s]=O.cloneElement(o,{onExited:n.bind(null,o),in:l.props.in,exit:hw(o,"exit",e),enter:hw(o,"enter",e)}))}}),i}var CQe=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},AQe={component:"div",childFactory:function(t){return t}},Dv=function(e){OEe(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=s.handleExited.bind(wQe(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,u=s.firstRender;return{children:u?TQe(i,a):SQe(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=TJ(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var u=iW({},a.children);return delete u[i.key],{children:u}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=PEe(i,["component","childFactory"]),u=this.state.contextValue,l=CQe(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?li.createElement(z$.Provider,{value:u},l):li.createElement(z$.Provider,{value:u},li.createElement(s,a,l))},t}(li.Component);Dv.propTypes={};Dv.defaultProps=AQe;const MEe=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function IQe(e,t){return e.reduce((n,r)=>(n[r.position||t].push(r),n),MEe.reduce((n,r)=>(n[r]=[],n),{}))}const Ole={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},kQe={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function RQe({state:e,maxHeight:t,position:n,transitionDuration:r}){const[i,s]=n.split("-"),o=s==="center"?`${i}-center`:s,a={opacity:0,maxHeight:t,transform:Ole[o],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},u={opacity:1,transform:kQe[o]},l={opacity:0,maxHeight:0,transform:Ole[o]};return{...a,...{entering:u,entered:u,exiting:l,exited:l}[e]}}function NQe(e,t){return typeof t=="number"?t:t===!1||e===!1?!1:e}const LEe=O.forwardRef(({data:e,onHide:t,autoClose:n,...r},i)=>{const{autoClose:s,message:o,...a}=e,u=NQe(n,e.autoClose),l=O.useRef(-1),c=()=>window.clearTimeout(l.current),f=()=>{t(e.id),c()},d=()=>{typeof u=="number"&&(l.current=window.setTimeout(f,u))};return O.useEffect(()=>{var h;(h=e.onOpen)==null||h.call(e,e)},[]),O.useEffect(()=>(d(),c),[u]),S.jsx(rJ,{...r,...a,onClose:f,ref:i,onMouseEnter:c,onMouseLeave:d,children:o})});LEe.displayName="@mantine/notifications/NotificationContainer";var $Ee={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const DQe=_1,PQe={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:uf("overlay"),store:RE,withinPortal:!0},OQe=(e,{zIndex:t,containerWidth:n})=>({root:{"--notifications-z-index":t==null?void 0:t.toString(),"--notifications-container-width":Ke(n)}}),w1=At((e,t)=>{const n=Je("Notifications",PQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,position:l,autoClose:c,transitionDuration:f,containerWidth:d,notificationMaxHeight:h,limit:p,zIndex:m,store:y,portalProps:v,withinPortal:b,...w}=n,E=No(),T=dQe(y),A=fze(),I=j8(),R=O.useRef({}),D=O.useRef(0),$=(E.respectReducedMotion?I:!1)?1:f,U=Zt({name:"Notifications",classes:$Ee,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:OQe});O.useEffect(()=>{y==null||y.updateState(Q=>({...Q,limit:p||5,defaultPosition:l}))},[p,l]),D0(()=>{T.notifications.length>D.current&&setTimeout(()=>A(),0),D.current=T.notifications.length},[T.notifications]);const F=IQe(T.notifications,l),H=MEe.reduce((Q,J)=>(Q[J]=F[J].map(({style:ne,...Z})=>S.jsx(DQe,{timeout:$,onEnter:()=>R.current[Z.id].offsetHeight,nodeRef:{current:R.current[Z.id]},children:ie=>S.jsx(LEe,{ref:q=>{R.current[Z.id]=q},data:Z,onHide:q=>DEe(q,y),autoClose:c,...U("notification",{style:{...RQe({state:ie,position:J,transitionDuration:$,maxHeight:h}),...ne}})})},Z.id)),Q),{});return S.jsxs(fx,{withinPortal:b,...v,children:[S.jsx(je,{...U("root"),"data-position":"top-center",ref:t,...w,children:S.jsx(Dv,{children:H["top-center"]})}),S.jsx(je,{...U("root"),"data-position":"top-left",...w,children:S.jsx(Dv,{children:H["top-left"]})}),S.jsx(je,{...U("root",{className:tC.classNames.fullWidth}),"data-position":"top-right",...w,children:S.jsx(Dv,{children:H["top-right"]})}),S.jsx(je,{...U("root",{className:tC.classNames.fullWidth}),"data-position":"bottom-right",...w,children:S.jsx(Dv,{children:H["bottom-right"]})}),S.jsx(je,{...U("root"),"data-position":"bottom-left",...w,children:S.jsx(Dv,{children:H["bottom-left"]})}),S.jsx(je,{...U("root"),"data-position":"bottom-center",...w,children:S.jsx(Dv,{children:H["bottom-center"]})})]})});w1.classes=$Ee;w1.displayName="@mantine/notifications/Notifications";w1.show=NE.show;w1.hide=NE.hide;w1.update=NE.update;w1.clean=NE.clean;w1.cleanQueue=NE.cleanQueue;w1.updateState=NE.updateState;const FEe=O.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),uo=()=>O.useContext(FEe);function MQe({children:e}){const[t,n]=O.useState(void 0),r=O.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return S.jsx(FEe.Provider,{value:r,children:e})}var jk={},Mle;function LQe(){if(Mle)return jk;Mle=1,Object.defineProperty(jk,"__esModule",{value:!0}),jk.parse=o,jk.serialize=l;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,s=(()=>{const d=function(){};return d.prototype=Object.create(null),d})();function o(d,h){const p=new s,m=d.length;if(m<2)return p;const y=(h==null?void 0:h.decode)||c;let v=0;do{const b=d.indexOf("=",v);if(b===-1)break;const w=d.indexOf(";",v),E=w===-1?m:w;if(b>E){v=d.lastIndexOf(";",b-1)+1;continue}const T=a(d,v,b),A=u(d,b,T),I=d.slice(T,A);if(p[I]===void 0){let R=a(d,b+1,E),D=u(d,E,R);const M=y(d.slice(R,D));p[I]=M}v=E+1}while(v<m);return p}function a(d,h,p){do{const m=d.charCodeAt(h);if(m!==32&&m!==9)return h}while(++h<p);return p}function u(d,h,p){for(;h>p;){const m=d.charCodeAt(--h);if(m!==32&&m!==9)return h+1}return p}function l(d,h,p){const m=(p==null?void 0:p.encode)||encodeURIComponent;if(!e.test(d))throw new TypeError(`argument name is invalid: ${d}`);const y=m(h);if(!t.test(y))throw new TypeError(`argument val is invalid: ${h}`);let v=d+"="+y;if(!p)return v;if(p.maxAge!==void 0){if(!Number.isInteger(p.maxAge))throw new TypeError(`option maxAge is invalid: ${p.maxAge}`);v+="; Max-Age="+p.maxAge}if(p.domain){if(!n.test(p.domain))throw new TypeError(`option domain is invalid: ${p.domain}`);v+="; Domain="+p.domain}if(p.path){if(!r.test(p.path))throw new TypeError(`option path is invalid: ${p.path}`);v+="; Path="+p.path}if(p.expires){if(!f(p.expires)||!Number.isFinite(p.expires.valueOf()))throw new TypeError(`option expires is invalid: ${p.expires}`);v+="; Expires="+p.expires.toUTCString()}if(p.httpOnly&&(v+="; HttpOnly"),p.secure&&(v+="; Secure"),p.partitioned&&(v+="; Partitioned"),p.priority)switch(typeof p.priority=="string"?p.priority.toLowerCase():void 0){case"low":v+="; Priority=Low";break;case"medium":v+="; Priority=Medium";break;case"high":v+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${p.priority}`)}if(p.sameSite)switch(typeof p.sameSite=="string"?p.sameSite.toLowerCase():p.sameSite){case!0:case"strict":v+="; SameSite=Strict";break;case"lax":v+="; SameSite=Lax";break;case"none":v+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${p.sameSite}`)}return v}function c(d){if(d.indexOf("%")===-1)return d;try{return decodeURIComponent(d)}catch{return d}}function f(d){return i.call(d)==="[object Date]"}return jk}LQe();/**
 * react-router v7.1.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Lle="popstate";function $Qe(e={}){function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return aW("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:hD(i)}return BQe(t,n,null,e)}function Os(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ih(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function FQe(){return Math.random().toString(36).substring(2,10)}function $le(e,t){return{usr:e.state,key:e.key,idx:t}}function aW(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?IA(t):t,state:n,key:t&&t.key||r||FQe()}}function hD({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function IA(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function BQe(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",u=null,l=c();l==null&&(l=0,o.replaceState({...o.state,idx:l},""));function c(){return(o.state||{idx:null}).idx}function f(){a="POP";let y=c(),v=y==null?null:y-l;l=y,u&&u({action:a,location:m.location,delta:v})}function d(y,v){a="PUSH";let b=aW(m.location,y,v);l=c()+1;let w=$le(b,l),E=m.createHref(b);try{o.pushState(w,"",E)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;i.location.assign(E)}s&&u&&u({action:a,location:m.location,delta:1})}function h(y,v){a="REPLACE";let b=aW(m.location,y,v);l=c();let w=$le(b,l),E=m.createHref(b);o.replaceState(w,"",E),s&&u&&u({action:a,location:m.location,delta:0})}function p(y){let v=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof y=="string"?y:hD(y);return b=b.replace(/ $/,"%20"),Os(v,`No window.location.(origin|href) available to create URL for href: ${b}`),new URL(b,v)}let m={get action(){return a},get location(){return e(i,o)},listen(y){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Lle,f),u=y,()=>{i.removeEventListener(Lle,f),u=null}},createHref(y){return t(i,y)},createURL:p,encodeLocation(y){let v=p(y);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:d,replace:h,go(y){return o.go(y)}};return m}function BEe(e,t,n="/"){return jQe(e,t,n,!1)}function jQe(e,t,n,r){let i=typeof t=="string"?IA(t):t,s=Eb(i.pathname||"/",n);if(s==null)return null;let o=jEe(e);UQe(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let l=JQe(s);a=XQe(o[u],l,r)}return a}function jEe(e,t=[],n=[],r=""){let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(Os(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length));let l=Oy([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(Os(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),jEe(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:YQe(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of UEe(s.path))i(s,o,u)}),t}function UEe(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=UEe(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function UQe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:KQe(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var zQe=/^:[\w-]+$/,VQe=3,HQe=2,qQe=1,WQe=10,GQe=-2,Fle=e=>e==="*";function YQe(e,t){let n=e.split("/"),r=n.length;return n.some(Fle)&&(r+=GQe),t&&(r+=HQe),n.filter(i=>!Fle(i)).reduce((i,s)=>i+(zQe.test(s)?VQe:s===""?qQe:WQe),r)}function KQe(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function XQe(e,t,n=!1){let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],l=a===r.length-1,c=s==="/"?t:t.slice(s.length)||"/",f=V$({path:u.relativePath,caseSensitive:u.caseSensitive,end:l},c),d=u.route;if(!f&&l&&n&&!r[r.length-1].route.index&&(f=V$({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},c)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:Oy([s,f.pathname]),pathnameBase:nJe(Oy([s,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(s=Oy([s,f.pathnameBase]))}return o}function V$(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=QQe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,{paramName:c,isOptional:f},d)=>{if(c==="*"){let p=a[d]||"";o=s.slice(0,s.length-p.length).replace(/(.)\/+$/,"$1")}const h=a[d];return f&&!h?l[c]=void 0:l[c]=(h||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function QQe(e,t=!1,n=!0){ih(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function JQe(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ih(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Eb(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function ZQe(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?IA(e):e;return{pathname:n?n.startsWith("/")?n:eJe(n,t):t,search:rJe(r),hash:iJe(i)}}function eJe(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function uz(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function tJe(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function SJ(e){let t=tJe(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function CJ(e,t,n,r=!1){let i;typeof e=="string"?i=IA(e):(i={...e},Os(!i.pathname||!i.pathname.includes("?"),uz("?","pathname","search",i)),Os(!i.pathname||!i.pathname.includes("#"),uz("#","pathname","hash",i)),Os(!i.search||!i.search.includes("#"),uz("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=ZQe(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}var Oy=e=>e.join("/").replace(/\/\/+/g,"/"),nJe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),rJe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,iJe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function sJe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var zEe=["POST","PUT","PATCH","DELETE"];new Set(zEe);var oJe=["GET",...zEe];new Set(oJe);var kA=O.createContext(null);kA.displayName="DataRouter";var vB=O.createContext(null);vB.displayName="DataRouterState";var VEe=O.createContext({isTransitioning:!1});VEe.displayName="ViewTransition";var aJe=O.createContext(new Map);aJe.displayName="Fetchers";var uJe=O.createContext(null);uJe.displayName="Await";var Kp=O.createContext(null);Kp.displayName="Navigation";var UP=O.createContext(null);UP.displayName="Location";var bh=O.createContext({outlet:null,matches:[],isDataRoute:!1});bh.displayName="Route";var AJ=O.createContext(null);AJ.displayName="RouteError";function IJ(e,{relative:t}={}){Os(RA(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=O.useContext(Kp),{hash:i,pathname:s,search:o}=zP(e,{relative:t}),a=s;return n!=="/"&&(a=s==="/"?n:Oy([n,s])),r.createHref({pathname:a,search:o,hash:i})}function RA(){return O.useContext(UP)!=null}function xh(){return Os(RA(),"useLocation() may be used only in the context of a <Router> component."),O.useContext(UP).location}var HEe="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function qEe(e){O.useContext(Kp).static||O.useLayoutEffect(e)}function Xp(){let{isDataRoute:e}=O.useContext(bh);return e?wJe():lJe()}function lJe(){Os(RA(),"useNavigate() may be used only in the context of a <Router> component.");let e=O.useContext(kA),{basename:t,navigator:n}=O.useContext(Kp),{matches:r}=O.useContext(bh),{pathname:i}=xh(),s=JSON.stringify(SJ(r)),o=O.useRef(!1);return qEe(()=>{o.current=!0}),O.useCallback((u,l={})=>{if(ih(o.current,HEe),!o.current)return;if(typeof u=="number"){n.go(u);return}let c=CJ(u,JSON.parse(s),i,l.relative==="path");e==null&&t!=="/"&&(c.pathname=c.pathname==="/"?t:Oy([t,c.pathname])),(l.replace?n.replace:n.push)(c,l.state,l)},[t,n,s,i,e])}var cJe=O.createContext(null);function fJe(e){let t=O.useContext(bh).outlet;return t&&O.createElement(cJe.Provider,{value:e},t)}function M0(){let{matches:e}=O.useContext(bh),t=e[e.length-1];return t?t.params:{}}function zP(e,{relative:t}={}){let{matches:n}=O.useContext(bh),{pathname:r}=xh(),i=JSON.stringify(SJ(n));return O.useMemo(()=>CJ(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function WEe(e,t){return GEe(e,t)}function GEe(e,t,n,r){var v;Os(RA(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=O.useContext(Kp),{matches:s}=O.useContext(bh),o=s[s.length-1],a=o?o.params:{},u=o?o.pathname:"/",l=o?o.pathnameBase:"/",c=o&&o.route;{let b=c&&c.path||"";YEe(u,!c||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let f=xh(),d;if(t){let b=typeof t=="string"?IA(t):t;Os(l==="/"||((v=b.pathname)==null?void 0:v.startsWith(l)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${l}" but pathname "${b.pathname}" was given in the \`location\` prop.`),d=b}else d=f;let h=d.pathname||"/",p=h;if(l!=="/"){let b=l.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(b.length).join("/")}let m=BEe(e,{pathname:p});ih(c||m!=null,`No routes matched location "${d.pathname}${d.search}${d.hash}" `),ih(m==null||m[m.length-1].route.element!==void 0||m[m.length-1].route.Component!==void 0||m[m.length-1].route.lazy!==void 0,`Matched leaf route at location "${d.pathname}${d.search}${d.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=gJe(m&&m.map(b=>Object.assign({},b,{params:Object.assign({},a,b.params),pathname:Oy([l,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:Oy([l,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),s,n,r);return t&&y?O.createElement(UP.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...d},navigationType:"POP"}},y):y}function dJe(){let e=_Je(),t=sJe(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=O.createElement(O.Fragment,null,O.createElement("p",null," Hey developer "),O.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",O.createElement("code",{style:s},"ErrorBoundary")," or"," ",O.createElement("code",{style:s},"errorElement")," prop on your route.")),O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},t),n?O.createElement("pre",{style:i},n):null,o)}var hJe=O.createElement(dJe,null),pJe=class extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?O.createElement(bh.Provider,{value:this.props.routeContext},O.createElement(AJ.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function mJe({routeContext:e,match:t,children:n}){let r=O.useContext(kA);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),O.createElement(bh.Provider,{value:e},n)}function gJe(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,s=n==null?void 0:n.errors;if(s!=null){let u=i.findIndex(l=>l.route.id&&(s==null?void 0:s[l.route.id])!==void 0);Os(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let o=!1,a=-1;if(n)for(let u=0;u<i.length;u++){let l=i[u];if((l.route.HydrateFallback||l.route.hydrateFallbackElement)&&(a=u),l.route.id){let{loaderData:c,errors:f}=n,d=l.route.loader&&!c.hasOwnProperty(l.route.id)&&(!f||f[l.route.id]===void 0);if(l.route.lazy||d){o=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((u,l,c)=>{let f,d=!1,h=null,p=null;n&&(f=s&&l.route.id?s[l.route.id]:void 0,h=l.route.errorElement||hJe,o&&(a<0&&c===0?(YEe("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,p=null):a===c&&(d=!0,p=l.route.hydrateFallbackElement||null)));let m=t.concat(i.slice(0,c+1)),y=()=>{let v;return f?v=h:d?v=p:l.route.Component?v=O.createElement(l.route.Component,null):l.route.element?v=l.route.element:v=u,O.createElement(mJe,{match:l,routeContext:{outlet:u,matches:m,isDataRoute:n!=null},children:v})};return n&&(l.route.ErrorBoundary||l.route.errorElement||c===0)?O.createElement(pJe,{location:n.location,revalidation:n.revalidation,component:h,error:f,children:y(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):y()},null)}function kJ(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function yJe(e){let t=O.useContext(kA);return Os(t,kJ(e)),t}function vJe(e){let t=O.useContext(vB);return Os(t,kJ(e)),t}function bJe(e){let t=O.useContext(bh);return Os(t,kJ(e)),t}function RJ(e){let t=bJe(e),n=t.matches[t.matches.length-1];return Os(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function xJe(){return RJ("useRouteId")}function _Je(){var r;let e=O.useContext(AJ),t=vJe("useRouteError"),n=RJ("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function wJe(){let{router:e}=yJe("useNavigate"),t=RJ("useNavigate"),n=O.useRef(!1);return qEe(()=>{n.current=!0}),O.useCallback(async(i,s={})=>{ih(n.current,HEe),n.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...s}))},[e,t])}var Ble={};function YEe(e,t,n){!t&&!Ble[e]&&(Ble[e]=!0,ih(!1,n))}O.memo(EJe);function EJe({routes:e,future:t,state:n}){return GEe(e,void 0,n,t)}function NJ({to:e,replace:t,state:n,relative:r}){Os(RA(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=O.useContext(Kp);ih(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=O.useContext(bh),{pathname:o}=xh(),a=Xp(),u=CJ(e,SJ(s),o,r==="path"),l=JSON.stringify(u);return O.useEffect(()=>{a(JSON.parse(l),{replace:t,state:n,relative:r})},[a,l,r,t,n]),null}function TJe(e){return fJe(e.context)}function z_(e){Os(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function SJe({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){Os(!RA(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),a=O.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=IA(n));let{pathname:u="/",search:l="",hash:c="",state:f=null,key:d="default"}=n,h=O.useMemo(()=>{let p=Eb(u,o);return p==null?null:{location:{pathname:p,search:l,hash:c,state:f,key:d},navigationType:r}},[o,u,l,c,f,d,r]);return ih(h!=null,`<Router basename="${o}"> is not able to match the URL "${u}${l}${c}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:O.createElement(Kp.Provider,{value:a},O.createElement(UP.Provider,{children:t,value:h}))}function CJe({children:e,location:t}){return WEe(uW(e),t)}function uW(e,t=[]){let n=[];return O.Children.forEach(e,(r,i)=>{if(!O.isValidElement(r))return;let s=[...t,i];if(r.type===O.Fragment){n.push.apply(n,uW(r.props.children,s));return}Os(r.type===z_,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Os(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=uW(r.props.children,s)),n.push(o)}),n}var HM="get",qM="application/x-www-form-urlencoded";function bB(e){return e!=null&&typeof e.tagName=="string"}function AJe(e){return bB(e)&&e.tagName.toLowerCase()==="button"}function IJe(e){return bB(e)&&e.tagName.toLowerCase()==="form"}function kJe(e){return bB(e)&&e.tagName.toLowerCase()==="input"}function RJe(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function NJe(e,t){return e.button===0&&(!t||t==="_self")&&!RJe(e)}function lW(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function DJe(e,t){let n=lW(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}var N4=null;function PJe(){if(N4===null)try{new FormData(document.createElement("form"),0),N4=!1}catch{N4=!0}return N4}var OJe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function lz(e){return e!=null&&!OJe.has(e)?(ih(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${qM}"`),null):e}function MJe(e,t){let n,r,i,s,o;if(IJe(e)){let a=e.getAttribute("action");r=a?Eb(a,t):null,n=e.getAttribute("method")||HM,i=lz(e.getAttribute("enctype"))||qM,s=new FormData(e)}else if(AJe(e)||kJe(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=e.getAttribute("formaction")||a.getAttribute("action");if(r=u?Eb(u,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||HM,i=lz(e.getAttribute("formenctype"))||lz(a.getAttribute("enctype"))||qM,s=new FormData(a,e),!PJe()){let{name:l,type:c,value:f}=e;if(c==="image"){let d=l?`${l}.`:"";s.append(`${d}x`,"0"),s.append(`${d}y`,"0")}else l&&s.append(l,f)}}else{if(bB(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=HM,r=null,i=qM,o=e}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}function DJ(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function LJe(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function $Je(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function FJe(e,t,n){let r=await Promise.all(e.map(async i=>{let s=t.routes[i.route.id];if(s){let o=await LJe(s,n);return o.links?o.links():[]}return[]}));return zJe(r.flat(1).filter($Je).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function jle(e,t,n,r,i,s){let o=(u,l)=>n[l]?u.route.id!==n[l].route.id:!0,a=(u,l)=>{var c;return n[l].pathname!==u.pathname||((c=n[l].route.path)==null?void 0:c.endsWith("*"))&&n[l].params["*"]!==u.params["*"]};return s==="assets"?t.filter((u,l)=>o(u,l)||a(u,l)):s==="data"?t.filter((u,l)=>{var f;let c=r.routes[u.route.id];if(!c||!c.hasLoader)return!1;if(o(u,l)||a(u,l))return!0;if(u.route.shouldRevalidate){let d=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function BJe(e,t){return jJe(e.map(n=>{let r=t.routes[n.route.id];if(!r)return[];let i=[r.module];return r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function jJe(e){return[...new Set(e)]}function UJe(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function zJe(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let s=JSON.stringify(UJe(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function VJe(e){let t=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return t.pathname==="/"?t.pathname="_root.data":t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function HJe(){let e=O.useContext(kA);return DJ(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function qJe(){let e=O.useContext(vB);return DJ(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var PJ=O.createContext(void 0);PJ.displayName="FrameworkContext";function KEe(){let e=O.useContext(PJ);return DJ(e,"You must render this element inside a <HydratedRouter> element"),e}function WJe(e,t){let n=O.useContext(PJ),[r,i]=O.useState(!1),[s,o]=O.useState(!1),{onFocus:a,onBlur:u,onMouseEnter:l,onMouseLeave:c,onTouchStart:f}=t,d=O.useRef(null);O.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let m=v=>{v.forEach(b=>{o(b.isIntersecting)})},y=new IntersectionObserver(m,{threshold:.5});return d.current&&y.observe(d.current),()=>{y.disconnect()}}},[e]),O.useEffect(()=>{if(r){let m=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(m)}}},[r]);let h=()=>{i(!0)},p=()=>{i(!1),o(!1)};return n?e!=="intent"?[s,d,{}]:[s,d,{onFocus:Uk(a,h),onBlur:Uk(u,p),onMouseEnter:Uk(l,h),onMouseLeave:Uk(c,p),onTouchStart:Uk(f,h)}]:[!1,d,{}]}function Uk(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function GJe({page:e,...t}){let{router:n}=HJe(),r=O.useMemo(()=>BEe(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?O.createElement(KJe,{page:e,matches:r,...t}):null}function YJe(e){let{manifest:t,routeModules:n}=KEe(),[r,i]=O.useState([]);return O.useEffect(()=>{let s=!1;return FJe(e,t,n).then(o=>{s||i(o)}),()=>{s=!0}},[e,t,n]),r}function KJe({page:e,matches:t,...n}){let r=xh(),{manifest:i,routeModules:s}=KEe(),{loaderData:o,matches:a}=qJe(),u=O.useMemo(()=>jle(e,t,a,i,r,"data"),[e,t,a,i,r]),l=O.useMemo(()=>jle(e,t,a,i,r,"assets"),[e,t,a,i,r]),c=O.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let h=new Set,p=!1;if(t.forEach(y=>{var b;let v=i.routes[y.route.id];!v||!v.hasLoader||(!u.some(w=>w.route.id===y.route.id)&&y.route.id in o&&((b=s[y.route.id])!=null&&b.shouldRevalidate)||v.hasClientLoader?p=!0:h.add(y.route.id))}),h.size===0)return[];let m=VJe(e);return p&&h.size>0&&m.searchParams.set("_routes",t.filter(y=>h.has(y.route.id)).map(y=>y.route.id).join(",")),[m.pathname+m.search]},[o,r,i,u,t,e,s]),f=O.useMemo(()=>BJe(l,i),[l,i]),d=YJe(l);return O.createElement(O.Fragment,null,c.map(h=>O.createElement("link",{key:h,rel:"prefetch",as:"fetch",href:h,...n})),f.map(h=>O.createElement("link",{key:h,rel:"modulepreload",href:h,...n})),d.map(({key:h,link:p})=>O.createElement("link",{key:h,...p})))}function XJe(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var XEe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{XEe&&(window.__reactRouterVersion="7.1.3")}catch{}function QJe({basename:e,children:t,window:n}){let r=O.useRef();r.current==null&&(r.current=$Qe({window:n,v5Compat:!0}));let i=r.current,[s,o]=O.useState({action:i.action,location:i.location}),a=O.useCallback(u=>{O.startTransition(()=>o(u))},[o]);return O.useLayoutEffect(()=>i.listen(a),[i,a]),O.createElement(SJe,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:i})}var QEe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,JEe=O.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:u,to:l,preventScrollReset:c,viewTransition:f,...d},h){let{basename:p}=O.useContext(Kp),m=typeof l=="string"&&QEe.test(l),y,v=!1;if(typeof l=="string"&&m&&(y=l,XEe))try{let D=new URL(window.location.href),M=l.startsWith("//")?new URL(D.protocol+l):new URL(l),$=Eb(M.pathname,p);M.origin===D.origin&&$!=null?l=$+M.search+M.hash:v=!0}catch{ih(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=IJ(l,{relative:i}),[w,E,T]=WJe(r,d),A=tZe(l,{replace:o,state:a,target:u,preventScrollReset:c,relative:i,viewTransition:f});function I(D){t&&t(D),D.defaultPrevented||A(D)}let R=O.createElement("a",{...d,...T,href:y||b,onClick:v||s?t:I,ref:XJe(h,E),target:u,"data-discover":!m&&n==="render"?"true":void 0});return w&&!m?O.createElement(O.Fragment,null,R,O.createElement(GJe,{page:b})):R});JEe.displayName="Link";var JJe=O.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:u,...l},c){let f=zP(o,{relative:l.relative}),d=xh(),h=O.useContext(vB),{navigator:p,basename:m}=O.useContext(Kp),y=h!=null&&oZe(f)&&a===!0,v=p.encodeLocation?p.encodeLocation(f).pathname:f.pathname,b=d.pathname,w=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;n||(b=b.toLowerCase(),w=w?w.toLowerCase():null,v=v.toLowerCase()),w&&m&&(w=Eb(w,m)||w);const E=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let T=b===v||!i&&b.startsWith(v)&&b.charAt(E)==="/",A=w!=null&&(w===v||!i&&w.startsWith(v)&&w.charAt(v.length)==="/"),I={isActive:T,isPending:A,isTransitioning:y},R=T?t:void 0,D;typeof r=="function"?D=r(I):D=[r,T?"active":null,A?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let M=typeof s=="function"?s(I):s;return O.createElement(JEe,{...l,"aria-current":R,className:D,ref:c,style:M,to:o,viewTransition:a},typeof u=="function"?u(I):u)});JJe.displayName="NavLink";var ZJe=O.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:s,method:o=HM,action:a,onSubmit:u,relative:l,preventScrollReset:c,viewTransition:f,...d},h)=>{let p=iZe(),m=sZe(a,{relative:l}),y=o.toLowerCase()==="get"?"get":"post",v=typeof a=="string"&&QEe.test(a),b=w=>{if(u&&u(w),w.defaultPrevented)return;w.preventDefault();let E=w.nativeEvent.submitter,T=(E==null?void 0:E.getAttribute("formmethod"))||o;p(E||w.currentTarget,{fetcherKey:t,method:T,navigate:n,replace:i,state:s,relative:l,preventScrollReset:c,viewTransition:f})};return O.createElement("form",{ref:h,method:y,action:m,onSubmit:r?u:b,...d,"data-discover":!v&&e==="render"?"true":void 0})});ZJe.displayName="Form";function eZe(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ZEe(e){let t=O.useContext(kA);return Os(t,eZe(e)),t}function tZe(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=Xp(),u=xh(),l=zP(e,{relative:s});return O.useCallback(c=>{if(NJe(c,t)){c.preventDefault();let f=n!==void 0?n:hD(u)===hD(l);a(e,{replace:f,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[u,a,l,n,r,t,e,i,s,o])}function E1(e){ih(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=O.useRef(lW(e)),n=O.useRef(!1),r=xh(),i=O.useMemo(()=>DJe(r.search,n.current?null:t.current),[r.search]),s=Xp(),o=O.useCallback((a,u)=>{const l=lW(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}var nZe=0,rZe=()=>`__${String(++nZe)}__`;function iZe(){let{router:e}=ZEe("useSubmit"),{basename:t}=O.useContext(Kp),n=xJe();return O.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:u,body:l}=MJe(r,t);if(i.navigate===!1){let c=i.fetcherKey||rZe();await e.fetch(c,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:l,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:l,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function sZe(e,{relative:t}={}){let{basename:n}=O.useContext(Kp),r=O.useContext(bh);Os(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...zP(e||".",{relative:t})},o=xh();if(e==null){s.search=o.search;let a=new URLSearchParams(s.search),u=a.getAll("index");if(u.some(c=>c==="")){a.delete("index"),u.filter(f=>f).forEach(f=>a.append("index",f));let c=a.toString();s.search=c?`?${c}`:""}}return(!e||e===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Oy([n,s.pathname])),hD(s)}function oZe(e,t={}){let n=O.useContext(VEe);Os(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=ZEe("useViewTransitionState"),i=zP(e,{relative:t.relative});if(!n.isTransitioning)return!1;let s=Eb(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Eb(n.nextLocation.pathname,r)||n.nextLocation.pathname;return V$(i.pathname,o)!=null||V$(i.pathname,s)!=null}new TextEncoder;const OJ=O.createContext(null);OJ.displayName="@mantine/modals/ModalsContext";function aZe(){const e=O.useContext(OJ);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function uZe({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=aZe(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return S.jsxs(S.Fragment,{children:[l&&S.jsx(je,{mb:"md",children:l}),S.jsxs($i,{mt:l?0:"md",justify:"flex-end",...o,children:[S.jsx(yn,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),S.jsx(yn,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[lZe,MJ]=Aze("mantine-modals"),Ule=e=>{const t=e.modalId||C2();return MJ("openConfirmModal")({...e,modalId:t}),t};MJ("closeModal");MJ("closeAllModals");function zle(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function cZe(e,t){var n;switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const r=e.modals.find(s=>s.id===t.modalId);if(!r)return e;zle(r,t.canceled);const i=e.modals.filter(s=>s.id!==t.modalId);return{current:i[i.length-1]||e.current,modals:i}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(r=>{zle(r,t.canceled)}),{current:e.current,modals:[]}):e;case"UPDATE":{const{modalId:r,newProps:i}=t,s=e.modals.map(a=>a.id!==r?a:a.type==="content"||a.type==="confirm"?{...a,props:{...a.props,...i}}:a.type==="context"?{...a,props:{...a.props,...i,innerProps:{...a.props.innerProps,...i.innerProps}}}:a),o=((n=e.current)==null?void 0:n.id)===r&&s.find(a=>a.id===r)||e.current;return{...e,modals:s,current:o}}default:return e}}function fZe(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function dZe({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=O.useReducer(cZe,{modals:[],current:null}),o=O.useRef(i);o.current=i;const a=O.useCallback(b=>{s({type:"CLOSE_ALL",canceled:b})},[o,s]),u=O.useCallback(({modalId:b,...w})=>{const E=b||C2();return s({type:"OPEN",modal:{id:E,type:"content",props:w}}),E},[s]),l=O.useCallback(({modalId:b,...w})=>{const E=b||C2();return s({type:"OPEN",modal:{id:E,type:"confirm",props:w}}),E},[s]),c=O.useCallback((b,{modalId:w,...E})=>{const T=w||C2();return s({type:"OPEN",modal:{id:T,type:"context",props:E,ctx:b}}),T},[s]),f=O.useCallback((b,w)=>{s({type:"CLOSE",modalId:b,canceled:w})},[o,s]),d=O.useCallback(({modalId:b,...w})=>{s({type:"UPDATE",modalId:b,newProps:w})},[s]),h=O.useCallback(({modalId:b,...w})=>{s({type:"UPDATE",modalId:b,newProps:w})},[s]);lZe({openModal:u,openConfirmModal:l,openContextModal:({modal:b,...w})=>c(b,w),closeModal:f,closeContextModal:f,closeAllModals:a,updateModal:d,updateContextModal:h});const p={modalProps:t||{},modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a,updateModal:d,updateContextModal:h},m=()=>{const b=o.current.current;switch(b==null?void 0:b.type){case"context":{const{innerProps:w,...E}=b.props,T=r[b.ctx];return{modalProps:E,content:S.jsx(T,{innerProps:w,context:p,id:b.id})}}case"confirm":{const{modalProps:w,confirmProps:E}=fZe(b.props);return{modalProps:w,content:S.jsx(uZe,{...E,id:b.id,labels:b.props.labels||n})}}case"content":{const{children:w,...E}=b.props;return{modalProps:E,content:w}}default:return{modalProps:{},content:null}}},{modalProps:y,content:v}=m();return S.jsxs(OJ.Provider,{value:p,children:[S.jsx(Us,{zIndex:uf("modal")+1,...t,...y,opened:i.modals.length>0,onClose:()=>{var b;return f((b=i.current)==null?void 0:b.id)},children:v}),e]})}/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var hZe={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=(e,t,n,r)=>{const i=O.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,title:u,className:l,children:c,...f},d)=>O.createElement("svg",{ref:d,...hZe[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,l].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...f},[u&&O.createElement("title",{key:"svg-title"},u),...r.map(([h,p])=>O.createElement(h,p)),...Array.isArray(c)?c:[c]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pZe=Wn("outline","adjustments-horizontal","IconAdjustmentsHorizontal",[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var mZe=Wn("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var SN=Wn("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vle=Wn("outline","arrow-left","IconArrowLeft",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Hle=Wn("outline","arrow-right","IconArrowRight",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var gZe=Wn("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var yZe=Wn("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vZe=Wn("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var bZe=Wn("outline","brand-python","IconBrandPython",[["path",{d:"M12 9h-7a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h3",key:"svg-0"}],["path",{d:"M12 15h7a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-3",key:"svg-1"}],["path",{d:"M8 9v-4a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v5a2 2 0 0 1 -2 2h-4a2 2 0 0 0 -2 2v5a2 2 0 0 0 2 2h4a2 2 0 0 0 2 -2v-4",key:"svg-2"}],["path",{d:"M11 6l0 .01",key:"svg-3"}],["path",{d:"M13 18l0 .01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xZe=Wn("outline","bubble-text","IconBubbleText",[["path",{d:"M7 10h10",key:"svg-0"}],["path",{d:"M9 14h5",key:"svg-1"}],["path",{d:"M12.4 3a5.34 5.34 0 0 1 4.906 3.239a5.333 5.333 0 0 1 -1.195 10.6a4.26 4.26 0 0 1 -5.28 1.863l-3.831 2.298v-3.134a2.668 2.668 0 0 1 -1.795 -3.773a4.8 4.8 0 0 1 2.908 -8.933a5.33 5.33 0 0 1 4.287 -2.16",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _Ze=Wn("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var eTe=Wn("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xB=Wn("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wZe=Wn("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var qle=Wn("outline","circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var EZe=Wn("outline","code-plus","IconCodePlus",[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-2"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var TZe=Wn("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var SZe=Wn("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var CZe=Wn("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var tTe=Wn("outline","external-link","IconExternalLink",[["path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6",key:"svg-0"}],["path",{d:"M11 13l9 -9",key:"svg-1"}],["path",{d:"M15 4h5v5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var AZe=Wn("outline","hourglass-empty","IconHourglassEmpty",[["path",{d:"M6 20v-2a6 6 0 1 1 12 0v2a1 1 0 0 1 -1 1h-10a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M6 4v2a6 6 0 1 0 12 0v-2a1 1 0 0 0 -1 -1h-10a1 1 0 0 0 -1 1z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IZe=Wn("outline","html","IconHtml",[["path",{d:"M13 16v-8l2 5l2 -5v8",key:"svg-0"}],["path",{d:"M1 16v-8",key:"svg-1"}],["path",{d:"M5 8v8",key:"svg-2"}],["path",{d:"M1 12h4",key:"svg-3"}],["path",{d:"M7 8h4",key:"svg-4"}],["path",{d:"M9 8v8",key:"svg-5"}],["path",{d:"M20 8v8h3",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var LJ=Wn("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var kZe=Wn("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var nTe=Wn("outline","list-check","IconListCheck",[["path",{d:"M3.5 5.5l1.5 1.5l2.5 -2.5",key:"svg-0"}],["path",{d:"M3.5 11.5l1.5 1.5l2.5 -2.5",key:"svg-1"}],["path",{d:"M3.5 17.5l1.5 1.5l2.5 -2.5",key:"svg-2"}],["path",{d:"M11 6l9 0",key:"svg-3"}],["path",{d:"M11 12l9 0",key:"svg-4"}],["path",{d:"M11 18l9 0",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var RZe=Wn("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var NZe=Wn("outline","number-123","IconNumber123",[["path",{d:"M3 10l2 -2v8",key:"svg-0"}],["path",{d:"M9 8h3a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 0 -1 1v2a1 1 0 0 0 1 1h3",key:"svg-1"}],["path",{d:"M17 8h2.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-1.5h1.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-2.5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var DZe=Wn("outline","package-import","IconPackageImport",[["path",{d:"M12 21l-8 -4.5v-9l8 -4.5l8 4.5v4.5",key:"svg-0"}],["path",{d:"M12 12l8 -4.5",key:"svg-1"}],["path",{d:"M12 12v9",key:"svg-2"}],["path",{d:"M12 12l-8 -4.5",key:"svg-3"}],["path",{d:"M22 18h-7",key:"svg-4"}],["path",{d:"M18 15l-3 3l3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var PZe=Wn("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var OZe=Wn("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var rTe=Wn("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var MZe=Wn("outline","radio","IconRadio",[["path",{d:"M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5",key:"svg-0"}],["path",{d:"M4 12h16",key:"svg-1"}],["path",{d:"M7 12v-2",key:"svg-2"}],["path",{d:"M17 16v.01",key:"svg-3"}],["path",{d:"M13 16v.01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var LZe=Wn("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $Ze=Wn("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var FZe=Wn("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var BZe=Wn("outline","select","IconSelect",[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M9 11l3 3l3 -3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var iTe=Wn("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jZe=Wn("outline","squares","IconSquares",[["path",{d:"M8 10a2 2 0 0 1 2 -2h9a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-9a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 8v-3a2 2 0 0 0 -2 -2h-9a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var sTe=Wn("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var UZe=Wn("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var oTe=Wn("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $J=Wn("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Wle=Wn("outline","user","IconUser",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var VP=Wn("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var zZe=Wn("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var VZe=Wn("filled","player-pause-filled","IconPlayerPauseFilled",[["path",{d:"M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-0"}],["path",{d:"M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var HZe=Wn("filled","player-play-filled","IconPlayerPlayFilled",[["path",{d:"M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z",key:"svg-0"}]]);function aTe(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const Ua=void 0;function Gle(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function uTe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const qZe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,WZe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,GZe={};function Yle(e,t){return(GZe.jsx?WZe:qZe).test(e)}const YZe=/[ \t\n\f\r]/g;function KZe(e){return typeof e=="object"?e.type==="text"?Kle(e.value):!1:Kle(e)}function Kle(e){return e.replace(YZe,"")===""}let HP=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};HP.prototype.property={};HP.prototype.normal={};HP.prototype.space=null;function lTe(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new HP(n,r,t)}function pD(e){return e.toLowerCase()}let _h=class{constructor(t,n){this.property=t,this.attribute=n}};_h.prototype.space=null;_h.prototype.boolean=!1;_h.prototype.booleanish=!1;_h.prototype.overloadedBoolean=!1;_h.prototype.number=!1;_h.prototype.commaSeparated=!1;_h.prototype.spaceSeparated=!1;_h.prototype.commaOrSpaceSeparated=!1;_h.prototype.mustUseProperty=!1;_h.prototype.defined=!1;let XZe=0;const ar=DE(),zo=DE(),cTe=DE(),Bt=DE(),ls=DE(),k2=DE(),$f=DE();function DE(){return 2**++XZe}const cW=Object.freeze(Object.defineProperty({__proto__:null,boolean:ar,booleanish:zo,commaOrSpaceSeparated:$f,commaSeparated:k2,number:Bt,overloadedBoolean:cTe,spaceSeparated:ls},Symbol.toStringTag,{value:"Module"})),cz=Object.keys(cW);class FJ extends _h{constructor(t,n,r,i){let s=-1;if(super(t,n),Xle(this,"space",i),typeof r=="number")for(;++s<cz.length;){const o=cz[s];Xle(this,cz[s],(r&cW[o])===cW[o])}}}FJ.prototype.defined=!0;function Xle(e,t,n){n&&(e[t]=n)}const QZe={}.hasOwnProperty;function NA(e){const t={},n={};let r;for(r in e.properties)if(QZe.call(e.properties,r)){const i=e.properties[r],s=new FJ(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[pD(r)]=r,n[pD(s.attribute)]=r}return new HP(t,n,e.space)}const fTe=NA({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),dTe=NA({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function hTe(e,t){return t in e?e[t]:t}function pTe(e,t){return hTe(e,t.toLowerCase())}const mTe=NA({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:pTe,properties:{xmlns:null,xmlnsXLink:null}}),gTe=NA({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:zo,ariaAutoComplete:null,ariaBusy:zo,ariaChecked:zo,ariaColCount:Bt,ariaColIndex:Bt,ariaColSpan:Bt,ariaControls:ls,ariaCurrent:null,ariaDescribedBy:ls,ariaDetails:null,ariaDisabled:zo,ariaDropEffect:ls,ariaErrorMessage:null,ariaExpanded:zo,ariaFlowTo:ls,ariaGrabbed:zo,ariaHasPopup:null,ariaHidden:zo,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ls,ariaLevel:Bt,ariaLive:null,ariaModal:zo,ariaMultiLine:zo,ariaMultiSelectable:zo,ariaOrientation:null,ariaOwns:ls,ariaPlaceholder:null,ariaPosInSet:Bt,ariaPressed:zo,ariaReadOnly:zo,ariaRelevant:null,ariaRequired:zo,ariaRoleDescription:ls,ariaRowCount:Bt,ariaRowIndex:Bt,ariaRowSpan:Bt,ariaSelected:zo,ariaSetSize:Bt,ariaSort:null,ariaValueMax:Bt,ariaValueMin:Bt,ariaValueNow:Bt,ariaValueText:null,role:null}}),JZe=NA({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:pTe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:k2,acceptCharset:ls,accessKey:ls,action:null,allow:null,allowFullScreen:ar,allowPaymentRequest:ar,allowUserMedia:ar,alt:null,as:null,async:ar,autoCapitalize:null,autoComplete:ls,autoFocus:ar,autoPlay:ar,blocking:ls,capture:null,charSet:null,checked:ar,cite:null,className:ls,cols:Bt,colSpan:null,content:null,contentEditable:zo,controls:ar,controlsList:ls,coords:Bt|k2,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ar,defer:ar,dir:null,dirName:null,disabled:ar,download:cTe,draggable:zo,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ar,formTarget:null,headers:ls,height:Bt,hidden:ar,high:Bt,href:null,hrefLang:null,htmlFor:ls,httpEquiv:ls,id:null,imageSizes:null,imageSrcSet:null,inert:ar,inputMode:null,integrity:null,is:null,isMap:ar,itemId:null,itemProp:ls,itemRef:ls,itemScope:ar,itemType:ls,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ar,low:Bt,manifest:null,max:null,maxLength:Bt,media:null,method:null,min:null,minLength:Bt,multiple:ar,muted:ar,name:null,nonce:null,noModule:ar,noValidate:ar,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ar,optimum:Bt,pattern:null,ping:ls,placeholder:null,playsInline:ar,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ar,referrerPolicy:null,rel:ls,required:ar,reversed:ar,rows:Bt,rowSpan:Bt,sandbox:ls,scope:null,scoped:ar,seamless:ar,selected:ar,shadowRootClonable:ar,shadowRootDelegatesFocus:ar,shadowRootMode:null,shape:null,size:Bt,sizes:null,slot:null,span:Bt,spellCheck:zo,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Bt,step:null,style:null,tabIndex:Bt,target:null,title:null,translate:null,type:null,typeMustMatch:ar,useMap:null,value:zo,width:Bt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ls,axis:null,background:null,bgColor:null,border:Bt,borderColor:null,bottomMargin:Bt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ar,declare:ar,event:null,face:null,frame:null,frameBorder:null,hSpace:Bt,leftMargin:Bt,link:null,longDesc:null,lowSrc:null,marginHeight:Bt,marginWidth:Bt,noResize:ar,noHref:ar,noShade:ar,noWrap:ar,object:null,profile:null,prompt:null,rev:null,rightMargin:Bt,rules:null,scheme:null,scrolling:zo,standby:null,summary:null,text:null,topMargin:Bt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Bt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ar,disableRemotePlayback:ar,prefix:null,property:null,results:Bt,security:null,unselectable:null}}),ZZe=NA({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:hTe,properties:{about:$f,accentHeight:Bt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Bt,amplitude:Bt,arabicForm:null,ascent:Bt,attributeName:null,attributeType:null,azimuth:Bt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Bt,by:null,calcMode:null,capHeight:Bt,className:ls,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Bt,diffuseConstant:Bt,direction:null,display:null,dur:null,divisor:Bt,dominantBaseline:null,download:ar,dx:null,dy:null,edgeMode:null,editable:null,elevation:Bt,enableBackground:null,end:null,event:null,exponent:Bt,externalResourcesRequired:null,fill:null,fillOpacity:Bt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:k2,g2:k2,glyphName:k2,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Bt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Bt,horizOriginX:Bt,horizOriginY:Bt,id:null,ideographic:Bt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Bt,k:Bt,k1:Bt,k2:Bt,k3:Bt,k4:Bt,kernelMatrix:$f,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Bt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Bt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Bt,overlineThickness:Bt,paintOrder:null,panose1:null,path:null,pathLength:Bt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ls,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Bt,pointsAtY:Bt,pointsAtZ:Bt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:$f,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:$f,rev:$f,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:$f,requiredFeatures:$f,requiredFonts:$f,requiredFormats:$f,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Bt,specularExponent:Bt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Bt,strikethroughThickness:Bt,string:null,stroke:null,strokeDashArray:$f,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Bt,strokeOpacity:Bt,strokeWidth:null,style:null,surfaceScale:Bt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:$f,tabIndex:Bt,tableValues:null,target:null,targetX:Bt,targetY:Bt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:$f,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Bt,underlineThickness:Bt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Bt,values:null,vAlphabetic:Bt,vMathematical:Bt,vectorEffect:null,vHanging:Bt,vIdeographic:Bt,version:null,vertAdvY:Bt,vertOriginX:Bt,vertOriginY:Bt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Bt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),eet=/^data[-\w.:]+$/i,Qle=/-[a-z]/g,tet=/[A-Z]/g;function _B(e,t){const n=pD(t);let r=t,i=_h;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&eet.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(Qle,ret);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!Qle.test(s)){let o=s.replace(tet,net);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=FJ}return new i(r,t)}function net(e){return"-"+e.toLowerCase()}function ret(e){return e.charAt(1).toUpperCase()}const iet={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},qP=lTe([dTe,fTe,mTe,gTe,JZe],"html"),gx=lTe([dTe,fTe,mTe,gTe,ZZe],"svg");function Jle(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function yTe(e){return e.join(" ").trim()}var zk={},fz,Zle;function set(){if(Zle)return fz;Zle=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,a=/^\s+|\s+$/g,u=`
`,l="/",c="*",f="",d="comment",h="declaration";fz=function(m,y){if(typeof m!="string")throw new TypeError("First argument must be a string");if(!m)return[];y=y||{};var v=1,b=1;function w(F){var H=F.match(t);H&&(v+=H.length);var Q=F.lastIndexOf(u);b=~Q?F.length-Q:b+F.length}function E(){var F={line:v,column:b};return function(H){return H.position=new T(F),R(),H}}function T(F){this.start=F,this.end={line:v,column:b},this.source=y.source}T.prototype.content=m;function A(F){var H=new Error(y.source+":"+v+":"+b+": "+F);if(H.reason=F,H.filename=y.source,H.line=v,H.column=b,H.source=m,!y.silent)throw H}function I(F){var H=F.exec(m);if(H){var Q=H[0];return w(Q),m=m.slice(Q.length),H}}function R(){I(n)}function D(F){var H;for(F=F||[];H=M();)H!==!1&&F.push(H);return F}function M(){var F=E();if(!(l!=m.charAt(0)||c!=m.charAt(1))){for(var H=2;f!=m.charAt(H)&&(c!=m.charAt(H)||l!=m.charAt(H+1));)++H;if(H+=2,f===m.charAt(H-1))return A("End of comment missing");var Q=m.slice(2,H-2);return b+=2,w(Q),m=m.slice(H),b+=2,F({type:d,comment:Q})}}function $(){var F=E(),H=I(r);if(H){if(M(),!I(i))return A("property missing ':'");var Q=I(s),J=F({type:h,property:p(H[0].replace(e,f)),value:Q?p(Q[0].replace(e,f)):f});return I(o),J}}function U(){var F=[];D(F);for(var H;H=$();)H!==!1&&(F.push(H),D(F));return F}return R(),U()};function p(m){return m?m.replace(a,f):f}return fz}var ece;function oet(){if(ece)return zk;ece=1;var e=zk.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(zk,"__esModule",{value:!0});var t=e(set());function n(r,i){var s=null;if(!r||typeof r!="string")return s;var o=(0,t.default)(r),a=typeof i=="function";return o.forEach(function(u){if(u.type==="declaration"){var l=u.property,c=u.value;a?i(l,c,u):c&&(s=s||{},s[l]=c)}}),s}return zk.default=n,zk}var aet=oet();const tce=hh(aet),uet=tce.default||tce,wB=vTe("end"),rg=vTe("start");function vTe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function cet(e){const t=rg(e),n=wB(e);if(t&&n)return{start:t,end:n}}function CN(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?nce(e.position):"start"in e||"end"in e?nce(e):"line"in e||"column"in e?fW(e):""}function fW(e){return rce(e&&e.line)+":"+rce(e&&e.column)}function nce(e){return fW(e&&e.start)+"-"+fW(e&&e.end)}function rce(e){return e&&typeof e=="number"?e:1}class ml extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=CN(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}ml.prototype.file="";ml.prototype.name="";ml.prototype.reason="";ml.prototype.message="";ml.prototype.stack="";ml.prototype.column=void 0;ml.prototype.line=void 0;ml.prototype.ancestors=void 0;ml.prototype.cause=void 0;ml.prototype.fatal=void 0;ml.prototype.place=void 0;ml.prototype.ruleId=void 0;ml.prototype.source=void 0;const BJ={}.hasOwnProperty,fet=new Map,det=/[A-Z]/g,het=/-([a-z])/g,pet=new Set(["table","tbody","thead","tfoot","tr"]),met=new Set(["td","th"]),bTe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function get(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=Tet(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=Eet(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?gx:qP,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=xTe(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function xTe(e,t,n){if(t.type==="element")return yet(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return vet(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return xet(e,t,n);if(t.type==="mdxjsEsm")return bet(e,t);if(t.type==="root")return _et(e,t,n);if(t.type==="text")return wet(e,t)}function yet(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=gx,e.schema=i),e.ancestors.push(t);const s=wTe(e,t.tagName,!1),o=Cet(e,t);let a=UJ(e,t);return pet.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!KZe(u):!0})),_Te(e,o,s,t),jJ(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function vet(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}mD(e,t.position)}function bet(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);mD(e,t.position)}function xet(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=gx,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:wTe(e,t.name,!0),o=Aet(e,t),a=UJ(e,t);return _Te(e,o,s,t),jJ(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function _et(e,t,n){const r={};return jJ(r,UJ(e,t)),e.create(t,e.Fragment,r,n)}function wet(e,t){return t.value}function _Te(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function jJ(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function Eet(e,t,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:t;return a?l(s,o,a):l(s,o)}}function Tet(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=rg(r);return t(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function Cet(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&BJ.call(t.properties,i)){const s=Iet(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&met.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function Aet(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else mD(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else mD(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function UJ(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:fet;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;o=u+"-"+l,i.set(u,l+1)}}const a=xTe(e,s,o);a!==void 0&&n.push(a)}return n}function Iet(e,t,n){const r=_B(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?uTe(n):yTe(n)),r.property==="style"){let i=typeof n=="object"?n:ket(e,String(n));return e.stylePropertyNameCase==="css"&&(i=Ret(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?iet[r.property]||r.property:r.attribute,n]}}function ket(e,t){const n={};try{uet(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new ml("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=bTe+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(het,Det)),n[o]=s}}function wTe(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=Yle(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=Yle(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return BJ.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);mD(e)}function mD(e,t){const n=new ml("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=bTe+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Ret(e){const t={};let n;for(n in e)BJ.call(e,n)&&(t[Net(n)]=e[n]);return t}function Net(e){let t=e.replace(det,Pet);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function Det(e,t){return t.toUpperCase()}function Pet(e){return"-"+e.toLowerCase()}const dz={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Oet={};function Met(e,t){const n=Oet,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return ETe(e,r,i)}function ETe(e,t,n){if(Let(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return ice(e.children,t,n)}return Array.isArray(e)?ice(e,t,n):""}function ice(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=ETe(e[i],t,n);return r.join("")}function Let(e){return!!(e&&typeof e=="object")}const sce=document.createElement("i");function zJ(e){const t="&"+e+";";sce.innerHTML=t;const n=sce.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Ky(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function qd(e,t){return e.length>0?(Ky(e,e.length,0,t),e):t}const oce={}.hasOwnProperty;function $et(e){const t={};let n=-1;for(;++n<e.length;)Fet(t,e[n]);return t}function Fet(e,t){let n;for(n in t){const i=(oce.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){oce.call(i,o)||(i[o]=[]);const a=s[o];Bet(i[o],Array.isArray(a)?a:a?[a]:[])}}}function Bet(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Ky(e,0,0,r)}function TTe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function R2(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Zm=yx(/[A-Za-z]/),Yf=yx(/[\dA-Za-z]/),jet=yx(/[#-'*+\--9=?A-Z^-~]/);function dW(e){return e!==null&&(e<32||e===127)}const hW=yx(/\d/),Uet=yx(/[\dA-Fa-f]/),zet=yx(/[!-/:-@[-`{-~]/);function Vn(e){return e!==null&&e<-2}function Gc(e){return e!==null&&(e<0||e===32)}function wi(e){return e===-2||e===-1||e===32}const Vet=yx(new RegExp("\\p{P}|\\p{S}","u")),Het=yx(/\s/);function yx(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function DA(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&Yf(e.charCodeAt(n+1))&&Yf(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function fs(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return wi(u)?(e.enter(n),a(u)):t(u)}function a(u){return wi(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const qet={tokenize:Wet};function Wet(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),fs(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return Vn(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const Get={tokenize:Yet},ace={tokenize:Ket};function Yet(e){const t=this,n=[];let r=0,i,s,o;return a;function a(w){if(r<n.length){const E=n[r];return t.containerState=E[1],e.attempt(E[0].continuation,u,l)(w)}return l(w)}function u(w){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&b();const E=t.events.length;let T=E,A;for(;T--;)if(t.events[T][0]==="exit"&&t.events[T][1].type==="chunkFlow"){A=t.events[T][1].end;break}v(r);let I=E;for(;I<t.events.length;)t.events[I][1].end=Object.assign({},A),I++;return Ky(t.events,T+1,0,t.events.slice(E)),t.events.length=I,l(w)}return a(w)}function l(w){if(r===n.length){if(!i)return d(w);if(i.currentConstruct&&i.currentConstruct.concrete)return p(w);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(ace,c,f)(w)}function c(w){return i&&b(),v(r),d(w)}function f(w){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(w)}function d(w){return t.containerState={},e.attempt(ace,h,p)(w)}function h(w){return r++,n.push([t.currentConstruct,t.containerState]),d(w)}function p(w){if(w===null){i&&b(),v(0),e.consume(w);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(w)}function m(w){if(w===null){y(e.exit("chunkFlow"),!0),v(0),e.consume(w);return}return Vn(w)?(e.consume(w),y(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(w),m)}function y(w,E){const T=t.sliceStream(w);if(E&&T.push(null),w.previous=s,s&&(s.next=w),s=w,i.defineSkip(w.start),i.write(T),t.parser.lazy[w.start.line]){let A=i.events.length;for(;A--;)if(i.events[A][1].start.offset<o&&(!i.events[A][1].end||i.events[A][1].end.offset>o))return;const I=t.events.length;let R=I,D,M;for(;R--;)if(t.events[R][0]==="exit"&&t.events[R][1].type==="chunkFlow"){if(D){M=t.events[R][1].end;break}D=!0}for(v(r),A=I;A<t.events.length;)t.events[A][1].end=Object.assign({},M),A++;Ky(t.events,R+1,0,t.events.slice(I)),t.events.length=A}}function v(w){let E=n.length;for(;E-- >w;){const T=n[E];t.containerState=T[1],T[0].exit.call(t,e)}n.length=w}function b(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function Ket(e,t,n){return fs(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function uce(e){if(e===null||Gc(e)||Het(e))return 1;if(Vet(e))return 2}function VJ(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const pW={name:"attention",tokenize:Qet,resolveAll:Xet};function Xet(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);lce(f,-u),lce(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=qd(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=qd(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=qd(l,VJ(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=qd(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=qd(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,Ky(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function Qet(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=uce(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=uce(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function lce(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Jet={name:"autolink",tokenize:Zet};function Zet(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return Zm(h)?(e.consume(h),o):h===64?n(h):l(h)}function o(h){return h===43||h===45||h===46||Yf(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||Yf(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||dW(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):jet(h)?(e.consume(h),l):n(h)}function c(h){return Yf(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||Yf(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const EB={tokenize:ett,partial:!0};function ett(e,t,n){return r;function r(s){return wi(s)?fs(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||Vn(s)?t(s):n(s)}}const STe={name:"blockQuote",tokenize:ttt,continuation:{tokenize:ntt},exit:rtt};function ttt(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return wi(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function ntt(e,t,n){const r=this;return i;function i(o){return wi(o)?fs(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(STe,t,n)(o)}}function rtt(e){e.exit("blockQuote")}const CTe={name:"characterEscape",tokenize:itt};function itt(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return zet(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const ATe={name:"characterReference",tokenize:stt};function stt(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=Yf,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=Uet,c):(e.enter("characterReferenceValue"),s=7,o=hW,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===Yf&&!zJ(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const cce={tokenize:att,partial:!0},fce={name:"codeFenced",tokenize:ott,concrete:!0};function ott(e,t,n){const r=this,i={tokenize:T,partial:!0};let s=0,o=0,a;return u;function u(A){return l(A)}function l(A){const I=r.events[r.events.length-1];return s=I&&I[1].type==="linePrefix"?I[2].sliceSerialize(I[1],!0).length:0,a=A,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(A)}function c(A){return A===a?(o++,e.consume(A),c):o<3?n(A):(e.exit("codeFencedFenceSequence"),wi(A)?fs(e,f,"whitespace")(A):f(A))}function f(A){return A===null||Vn(A)?(e.exit("codeFencedFence"),r.interrupt?t(A):e.check(cce,m,E)(A)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(A))}function d(A){return A===null||Vn(A)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(A)):wi(A)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),fs(e,h,"whitespace")(A)):A===96&&A===a?n(A):(e.consume(A),d)}function h(A){return A===null||Vn(A)?f(A):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(A))}function p(A){return A===null||Vn(A)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(A)):A===96&&A===a?n(A):(e.consume(A),p)}function m(A){return e.attempt(i,E,y)(A)}function y(A){return e.enter("lineEnding"),e.consume(A),e.exit("lineEnding"),v}function v(A){return s>0&&wi(A)?fs(e,b,"linePrefix",s+1)(A):b(A)}function b(A){return A===null||Vn(A)?e.check(cce,m,E)(A):(e.enter("codeFlowValue"),w(A))}function w(A){return A===null||Vn(A)?(e.exit("codeFlowValue"),b(A)):(e.consume(A),w)}function E(A){return e.exit("codeFenced"),t(A)}function T(A,I,R){let D=0;return M;function M(Q){return A.enter("lineEnding"),A.consume(Q),A.exit("lineEnding"),$}function $(Q){return A.enter("codeFencedFence"),wi(Q)?fs(A,U,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Q):U(Q)}function U(Q){return Q===a?(A.enter("codeFencedFenceSequence"),F(Q)):R(Q)}function F(Q){return Q===a?(D++,A.consume(Q),F):D>=o?(A.exit("codeFencedFenceSequence"),wi(Q)?fs(A,H,"whitespace")(Q):H(Q)):R(Q)}function H(Q){return Q===null||Vn(Q)?(A.exit("codeFencedFence"),I(Q)):R(Q)}}}function att(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const hz={name:"codeIndented",tokenize:ltt},utt={tokenize:ctt,partial:!0};function ltt(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),fs(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):Vn(l)?e.attempt(utt,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||Vn(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function ctt(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Vn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):fs(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):Vn(o)?i(o):n(o)}}const ftt={name:"codeText",tokenize:ptt,resolve:dtt,previous:htt};function dtt(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function htt(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function ptt(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):Vn(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||Vn(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}class mtt{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Vk(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Vk(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Vk(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Vk(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Vk(this.left,n.reverse())}}}function Vk(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function ITe(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new mtt(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,gtt(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return Ky(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function gtt(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const y=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,y.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):y.pop(),d=y.length;d--;){const v=a.slice(y[d],y[d+1]),b=s.pop();u.push([b,b+v.length-1]),e.splice(b,2,v)}for(u.reverse(),d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const ytt={tokenize:xtt,resolve:btt},vtt={tokenize:_tt,partial:!0};function btt(e){return ITe(e),e}function xtt(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Vn(a)?e.check(vtt,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function _tt(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),fs(e,s,"linePrefix")}function s(o){if(o===null||Vn(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function kTe(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(v){return v===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(v),e.exit(s),d):v===null||v===32||v===41||dW(v)?n(v):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(v))}function d(v){return v===62?(e.enter(s),e.consume(v),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(v))}function h(v){return v===62?(e.exit("chunkString"),e.exit(a),d(v)):v===null||v===60||Vn(v)?n(v):(e.consume(v),v===92?p:h)}function p(v){return v===60||v===62||v===92?(e.consume(v),h):h(v)}function m(v){return!c&&(v===null||v===41||Gc(v))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(v)):c<l&&v===40?(e.consume(v),c++,m):v===41?(e.consume(v),c--,m):v===null||v===32||v===40||dW(v)?n(v):(e.consume(v),v===92?y:m)}function y(v){return v===40||v===41||v===92?(e.consume(v),m):m(v)}}function RTe(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):Vn(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||Vn(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!wi(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function NTe(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):Vn(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),fs(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||Vn(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function AN(e,t){let n;return r;function r(i){return Vn(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):wi(i)?fs(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const wtt={name:"definition",tokenize:Ttt},Ett={tokenize:Stt,partial:!0};function Ttt(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return RTe.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=R2(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return Gc(h)?AN(e,l)(h):l(h)}function l(h){return kTe(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(Ett,f,f)(h)}function f(h){return wi(h)?fs(e,d,"whitespace")(h):d(h)}function d(h){return h===null||Vn(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function Stt(e,t,n){return r;function r(a){return Gc(a)?AN(e,i)(a):n(a)}function i(a){return NTe(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return wi(a)?fs(e,o,"whitespace")(a):o(a)}function o(a){return a===null||Vn(a)?t(a):n(a)}}const Ctt={name:"hardBreakEscape",tokenize:Att};function Att(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return Vn(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const Itt={name:"headingAtx",tokenize:Rtt,resolve:ktt};function ktt(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Ky(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function Rtt(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||Gc(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||Vn(c)?(e.exit("atxHeading"),t(c)):wi(c)?fs(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||Gc(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const Ntt=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],dce=["pre","script","style","textarea"],Dtt={name:"htmlFlow",tokenize:Ltt,resolveTo:Mtt,concrete:!0},Ptt={tokenize:Ftt,partial:!0},Ott={tokenize:$tt,partial:!0};function Mtt(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function Ltt(e,t,n){const r=this;let i,s,o,a,u;return l;function l(V){return c(V)}function c(V){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(V),f}function f(V){return V===33?(e.consume(V),d):V===47?(e.consume(V),s=!0,m):V===63?(e.consume(V),i=3,r.interrupt?t:q):Zm(V)?(e.consume(V),o=String.fromCharCode(V),y):n(V)}function d(V){return V===45?(e.consume(V),i=2,h):V===91?(e.consume(V),i=5,a=0,p):Zm(V)?(e.consume(V),i=4,r.interrupt?t:q):n(V)}function h(V){return V===45?(e.consume(V),r.interrupt?t:q):n(V)}function p(V){const Y="CDATA[";return V===Y.charCodeAt(a++)?(e.consume(V),a===Y.length?r.interrupt?t:U:p):n(V)}function m(V){return Zm(V)?(e.consume(V),o=String.fromCharCode(V),y):n(V)}function y(V){if(V===null||V===47||V===62||Gc(V)){const Y=V===47,ee=o.toLowerCase();return!Y&&!s&&dce.includes(ee)?(i=1,r.interrupt?t(V):U(V)):Ntt.includes(o.toLowerCase())?(i=6,Y?(e.consume(V),v):r.interrupt?t(V):U(V)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(V):s?b(V):w(V))}return V===45||Yf(V)?(e.consume(V),o+=String.fromCharCode(V),y):n(V)}function v(V){return V===62?(e.consume(V),r.interrupt?t:U):n(V)}function b(V){return wi(V)?(e.consume(V),b):M(V)}function w(V){return V===47?(e.consume(V),M):V===58||V===95||Zm(V)?(e.consume(V),E):wi(V)?(e.consume(V),w):M(V)}function E(V){return V===45||V===46||V===58||V===95||Yf(V)?(e.consume(V),E):T(V)}function T(V){return V===61?(e.consume(V),A):wi(V)?(e.consume(V),T):w(V)}function A(V){return V===null||V===60||V===61||V===62||V===96?n(V):V===34||V===39?(e.consume(V),u=V,I):wi(V)?(e.consume(V),A):R(V)}function I(V){return V===u?(e.consume(V),u=null,D):V===null||Vn(V)?n(V):(e.consume(V),I)}function R(V){return V===null||V===34||V===39||V===47||V===60||V===61||V===62||V===96||Gc(V)?T(V):(e.consume(V),R)}function D(V){return V===47||V===62||wi(V)?w(V):n(V)}function M(V){return V===62?(e.consume(V),$):n(V)}function $(V){return V===null||Vn(V)?U(V):wi(V)?(e.consume(V),$):n(V)}function U(V){return V===45&&i===2?(e.consume(V),J):V===60&&i===1?(e.consume(V),ne):V===62&&i===4?(e.consume(V),j):V===63&&i===3?(e.consume(V),q):V===93&&i===5?(e.consume(V),ie):Vn(V)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(Ptt,G,F)(V)):V===null||Vn(V)?(e.exit("htmlFlowData"),F(V)):(e.consume(V),U)}function F(V){return e.check(Ott,H,G)(V)}function H(V){return e.enter("lineEnding"),e.consume(V),e.exit("lineEnding"),Q}function Q(V){return V===null||Vn(V)?F(V):(e.enter("htmlFlowData"),U(V))}function J(V){return V===45?(e.consume(V),q):U(V)}function ne(V){return V===47?(e.consume(V),o="",Z):U(V)}function Z(V){if(V===62){const Y=o.toLowerCase();return dce.includes(Y)?(e.consume(V),j):U(V)}return Zm(V)&&o.length<8?(e.consume(V),o+=String.fromCharCode(V),Z):U(V)}function ie(V){return V===93?(e.consume(V),q):U(V)}function q(V){return V===62?(e.consume(V),j):V===45&&i===2?(e.consume(V),q):U(V)}function j(V){return V===null||Vn(V)?(e.exit("htmlFlowData"),G(V)):(e.consume(V),j)}function G(V){return e.exit("htmlFlow"),t(V)}}function $tt(e,t,n){const r=this;return i;function i(o){return Vn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function Ftt(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(EB,t,n)}}const Btt={name:"htmlText",tokenize:jtt};function jtt(e,t,n){const r=this;let i,s,o;return a;function a(q){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(q),u}function u(q){return q===33?(e.consume(q),l):q===47?(e.consume(q),T):q===63?(e.consume(q),w):Zm(q)?(e.consume(q),R):n(q)}function l(q){return q===45?(e.consume(q),c):q===91?(e.consume(q),s=0,p):Zm(q)?(e.consume(q),b):n(q)}function c(q){return q===45?(e.consume(q),h):n(q)}function f(q){return q===null?n(q):q===45?(e.consume(q),d):Vn(q)?(o=f,ne(q)):(e.consume(q),f)}function d(q){return q===45?(e.consume(q),h):f(q)}function h(q){return q===62?J(q):q===45?d(q):f(q)}function p(q){const j="CDATA[";return q===j.charCodeAt(s++)?(e.consume(q),s===j.length?m:p):n(q)}function m(q){return q===null?n(q):q===93?(e.consume(q),y):Vn(q)?(o=m,ne(q)):(e.consume(q),m)}function y(q){return q===93?(e.consume(q),v):m(q)}function v(q){return q===62?J(q):q===93?(e.consume(q),v):m(q)}function b(q){return q===null||q===62?J(q):Vn(q)?(o=b,ne(q)):(e.consume(q),b)}function w(q){return q===null?n(q):q===63?(e.consume(q),E):Vn(q)?(o=w,ne(q)):(e.consume(q),w)}function E(q){return q===62?J(q):w(q)}function T(q){return Zm(q)?(e.consume(q),A):n(q)}function A(q){return q===45||Yf(q)?(e.consume(q),A):I(q)}function I(q){return Vn(q)?(o=I,ne(q)):wi(q)?(e.consume(q),I):J(q)}function R(q){return q===45||Yf(q)?(e.consume(q),R):q===47||q===62||Gc(q)?D(q):n(q)}function D(q){return q===47?(e.consume(q),J):q===58||q===95||Zm(q)?(e.consume(q),M):Vn(q)?(o=D,ne(q)):wi(q)?(e.consume(q),D):J(q)}function M(q){return q===45||q===46||q===58||q===95||Yf(q)?(e.consume(q),M):$(q)}function $(q){return q===61?(e.consume(q),U):Vn(q)?(o=$,ne(q)):wi(q)?(e.consume(q),$):D(q)}function U(q){return q===null||q===60||q===61||q===62||q===96?n(q):q===34||q===39?(e.consume(q),i=q,F):Vn(q)?(o=U,ne(q)):wi(q)?(e.consume(q),U):(e.consume(q),H)}function F(q){return q===i?(e.consume(q),i=void 0,Q):q===null?n(q):Vn(q)?(o=F,ne(q)):(e.consume(q),F)}function H(q){return q===null||q===34||q===39||q===60||q===61||q===96?n(q):q===47||q===62||Gc(q)?D(q):(e.consume(q),H)}function Q(q){return q===47||q===62||Gc(q)?D(q):n(q)}function J(q){return q===62?(e.consume(q),e.exit("htmlTextData"),e.exit("htmlText"),t):n(q)}function ne(q){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(q),e.exit("lineEnding"),Z}function Z(q){return wi(q)?fs(e,ie,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(q):ie(q)}function ie(q){return e.enter("htmlTextData"),o(q)}}const HJ={name:"labelEnd",tokenize:Wtt,resolveTo:qtt,resolveAll:Htt},Utt={tokenize:Gtt},ztt={tokenize:Ytt},Vtt={tokenize:Ktt};function Htt(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function qtt(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=qd(a,e.slice(s+1,s+r+3)),a=qd(a,[["enter",c,t]]),a=qd(a,VJ(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=qd(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=qd(a,e.slice(o+1)),a=qd(a,[["exit",u,t]]),Ky(e,s,e.length,a),e}function Wtt(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(R2(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(Utt,c,o?c:f)(d):d===91?e.attempt(ztt,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(Vtt,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function Gtt(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return Gc(f)?AN(e,s)(f):s(f)}function s(f){return f===41?c(f):kTe(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return Gc(f)?AN(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?NTe(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return Gc(f)?AN(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function Ytt(e,t,n){const r=this;return i;function i(a){return RTe.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(R2(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function Ktt(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const Xtt={name:"labelStartImage",tokenize:Qtt,resolveAll:HJ.resolveAll};function Qtt(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const Jtt={name:"labelStartLink",tokenize:Ztt,resolveAll:HJ.resolveAll};function Ztt(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const pz={name:"lineEnding",tokenize:ent};function ent(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),fs(e,t,"linePrefix")}}const WM={name:"thematicBreak",tokenize:tnt};function tnt(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||Vn(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),wi(l)?fs(e,a,"whitespace")(l):a(l))}}const Nc={name:"list",tokenize:int,continuation:{tokenize:snt},exit:ant},nnt={tokenize:unt,partial:!0},rnt={tokenize:ont,partial:!0};function int(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:hW(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(WM,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return hW(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(EB,r.interrupt?n:c,e.attempt(nnt,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return wi(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function snt(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(EB,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,fs(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!wi(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(rnt,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,fs(e,e.attempt(Nc,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function ont(e,t,n){const r=this;return fs(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function ant(e){e.exit(this.containerState.type)}function unt(e,t,n){const r=this;return fs(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!wi(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const hce={name:"setextUnderline",tokenize:cnt,resolveTo:lnt};function lnt(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function cnt(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),wi(l)?fs(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||Vn(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const fnt={tokenize:dnt};function dnt(e){const t=this,n=e.attempt(EB,r,e.attempt(this.parser.constructs.flowInitial,i,fs(e,e.attempt(this.parser.constructs.flow,i,e.attempt(ytt,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const hnt={resolveAll:PTe()},pnt=DTe("string"),mnt=DTe("text");function DTe(e){return{tokenize:t,resolveAll:PTe(e==="text"?gnt:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function PTe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function gnt(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function ynt(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:b,enter:w,exit:E,attempt:I(T),check:I(A),interrupt:I(A,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f($){return o=qd(o,$),y(),o[o.length-1]!==null?[]:(R(t,0),l.events=VJ(s,l.events,l),l.events)}function d($,U){return bnt(h($),U)}function h($){return vnt(o,$)}function p(){const{line:$,column:U,offset:F,_index:H,_bufferIndex:Q}=r;return{line:$,column:U,offset:F,_index:H,_bufferIndex:Q}}function m($){i[$.line]=$.column,M()}function y(){let $;for(;r._index<o.length;){const U=o[r._index];if(typeof U=="string")for($=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===$&&r._bufferIndex<U.length;)v(U.charCodeAt(r._bufferIndex));else v(U)}}function v($){c=c($)}function b($){Vn($)?(r.line++,r.column=1,r.offset+=$===-3?2:1,M()):$!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=$}function w($,U){const F=U||{};return F.type=$,F.start=p(),l.events.push(["enter",F,l]),a.push(F),F}function E($){const U=a.pop();return U.end=p(),l.events.push(["exit",U,l]),U}function T($,U){R($,U.from)}function A($,U){U.restore()}function I($,U){return F;function F(H,Q,J){let ne,Z,ie,q;return Array.isArray(H)?G(H):"tokenize"in H?G([H]):j(H);function j(ae){return _e;function _e(pe){const Te=pe!==null&&ae[pe],Le=pe!==null&&ae.null,ye=[...Array.isArray(Te)?Te:Te?[Te]:[],...Array.isArray(Le)?Le:Le?[Le]:[]];return G(ye)(pe)}}function G(ae){return ne=ae,Z=0,ae.length===0?J:V(ae[Z])}function V(ae){return _e;function _e(pe){return q=D(),ie=ae,ae.partial||(l.currentConstruct=ae),ae.name&&l.parser.constructs.disable.null.includes(ae.name)?ee():ae.tokenize.call(U?Object.assign(Object.create(l),U):l,u,Y,ee)(pe)}}function Y(ae){return $(ie,q),Q}function ee(ae){return q.restore(),++Z<ne.length?V(ne[Z]):J}}}function R($,U){$.resolveAll&&!s.includes($)&&s.push($),$.resolve&&Ky(l.events,U,l.events.length-U,$.resolve(l.events.slice(U),l)),$.resolveTo&&(l.events=$.resolveTo(l.events,l))}function D(){const $=p(),U=l.previous,F=l.currentConstruct,H=l.events.length,Q=Array.from(a);return{restore:J,from:H};function J(){r=$,l.previous=U,l.currentConstruct=F,l.events.length=H,a=Q,M()}}function M(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function vnt(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function bnt(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const xnt={42:Nc,43:Nc,45:Nc,48:Nc,49:Nc,50:Nc,51:Nc,52:Nc,53:Nc,54:Nc,55:Nc,56:Nc,57:Nc,62:STe},_nt={91:wtt},wnt={[-2]:hz,[-1]:hz,32:hz},Ent={35:Itt,42:WM,45:[hce,WM],60:Dtt,61:hce,95:WM,96:fce,126:fce},Tnt={38:ATe,92:CTe},Snt={[-5]:pz,[-4]:pz,[-3]:pz,33:Xtt,38:ATe,42:pW,60:[Jet,Btt],91:Jtt,92:[Ctt,CTe],93:HJ,95:pW,96:ftt},Cnt={null:[pW,hnt]},Ant={null:[42,95]},Int={null:[]},knt=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Ant,contentInitial:_nt,disable:Int,document:xnt,flow:Ent,flowInitial:wnt,insideSpan:Cnt,string:Tnt,text:Snt},Symbol.toStringTag,{value:"Module"}));function Rnt(e){const n=$et([knt,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(qet),document:i(Get),flow:i(fnt),string:i(pnt),text:i(mnt)};return r;function i(s){return o;function o(a){return ynt(r,s,a)}}}function Nnt(e){for(;!ITe(e););return e}const pce=/[\0\t\n\r]/g;function Dnt(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(pce.lastIndex=f,l=pce.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const Pnt=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Ont(e){return e.replace(Pnt,Mnt)}function Mnt(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return TTe(n.slice(s?2:1),s?16:10)}return zJ(n)||e}const OTe={}.hasOwnProperty;function Lnt(e,t,n){return typeof t!="string"&&(n=t,t=void 0),$nt(n)(Nnt(Rnt(n).document().write(Dnt()(e,t,!0))))}function $nt(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(at),autolinkProtocol:D,autolinkEmail:D,atxHeading:s(tt),blockQuote:s(Le),characterEscape:D,characterReference:D,codeFenced:s(ye),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(ye,o),codeText:s(he,o),codeTextData:D,data:D,codeFlowValue:D,definition:s($e),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Ne),hardBreakEscape:s(it),hardBreakTrailing:s(it),htmlFlow:s(Me,o),htmlFlowData:D,htmlText:s(Me,o),htmlTextData:D,image:s(Ge),label:o,link:s(at),listItem:s(Tt),listItemValue:d,listOrdered:s(yt,f),listUnordered:s(yt),paragraph:s(Ot),reference:V,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(tt),strong:s(qe),thematicBreak:s(wt)},exit:{atxHeading:u(),atxHeadingSequence:T,autolink:u(),autolinkEmail:Te,autolinkProtocol:pe,blockQuote:u(),characterEscapeValue:M,characterReferenceMarkerHexadecimal:ee,characterReferenceMarkerNumeric:ee,characterReferenceValue:ae,characterReference:_e,codeFenced:u(y),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:M,codeIndented:u(v),codeText:u(Q),codeTextData:M,data:M,definition:u(),definitionDestinationString:E,definitionLabelString:b,definitionTitleString:w,emphasis:u(),hardBreakEscape:u(U),hardBreakTrailing:u(U),htmlFlow:u(F),htmlFlowData:M,htmlText:u(H),htmlTextData:M,image:u(ne),label:ie,labelText:Z,lineEnding:$,link:u(J),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:Y,resourceDestinationString:q,resourceTitleString:j,resource:G,setextHeading:u(R),setextHeadingLineSequence:I,setextHeadingText:A,strong:u(),thematicBreak:u()}};MTe(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(ke){let Oe={type:"root",children:[]};const dt={stack:[Oe],tokenStack:[],config:t,enter:a,exit:l,buffer:o,resume:c,data:n},Lt=[];let Ft=-1;for(;++Ft<ke.length;)if(ke[Ft][1].type==="listOrdered"||ke[Ft][1].type==="listUnordered")if(ke[Ft][0]==="enter")Lt.push(Ft);else{const dn=Lt.pop();Ft=i(ke,dn,Ft)}for(Ft=-1;++Ft<ke.length;){const dn=t[ke[Ft][0]];OTe.call(dn,ke[Ft][1].type)&&dn[ke[Ft][1].type].call(Object.assign({sliceSerialize:ke[Ft][2].sliceSerialize},dt),ke[Ft][1])}if(dt.tokenStack.length>0){const dn=dt.tokenStack[dt.tokenStack.length-1];(dn[1]||mce).call(dt,void 0,dn[0])}for(Oe.position={start:_v(ke.length>0?ke[0][1].start:{line:1,column:1,offset:0}),end:_v(ke.length>0?ke[ke.length-2][1].end:{line:1,column:1,offset:0})},Ft=-1;++Ft<t.transforms.length;)Oe=t.transforms[Ft](Oe)||Oe;return Oe}function i(ke,Oe,dt){let Lt=Oe-1,Ft=-1,dn=!1,Dn,Tr,Ri,Un;for(;++Lt<=dt;){const tr=ke[Lt];switch(tr[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{tr[0]==="enter"?Ft++:Ft--,Un=void 0;break}case"lineEndingBlank":{tr[0]==="enter"&&(Dn&&!Un&&!Ft&&!Ri&&(Ri=Lt),Un=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Un=void 0}if(!Ft&&tr[0]==="enter"&&tr[1].type==="listItemPrefix"||Ft===-1&&tr[0]==="exit"&&(tr[1].type==="listUnordered"||tr[1].type==="listOrdered")){if(Dn){let Si=Lt;for(Tr=void 0;Si--;){const Sr=ke[Si];if(Sr[1].type==="lineEnding"||Sr[1].type==="lineEndingBlank"){if(Sr[0]==="exit")continue;Tr&&(ke[Tr][1].type="lineEndingBlank",dn=!0),Sr[1].type="lineEnding",Tr=Si}else if(!(Sr[1].type==="linePrefix"||Sr[1].type==="blockQuotePrefix"||Sr[1].type==="blockQuotePrefixWhitespace"||Sr[1].type==="blockQuoteMarker"||Sr[1].type==="listItemIndent"))break}Ri&&(!Tr||Ri<Tr)&&(Dn._spread=!0),Dn.end=Object.assign({},Tr?ke[Tr][1].start:tr[1].end),ke.splice(Tr||Lt,0,["exit",Dn,tr[2]]),Lt++,dt++}if(tr[1].type==="listItemPrefix"){const Si={type:"listItem",_spread:!1,start:Object.assign({},tr[1].start),end:void 0};Dn=Si,ke.splice(Lt,0,["enter",Si,tr[2]]),Lt++,dt++,Ri=void 0,Un=!0}}}return ke[Oe][1]._spread=dn,dt}function s(ke,Oe){return dt;function dt(Lt){a.call(this,ke(Lt),Lt),Oe&&Oe.call(this,Lt)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(ke,Oe,dt){this.stack[this.stack.length-1].children.push(ke),this.stack.push(ke),this.tokenStack.push([Oe,dt]),ke.position={start:_v(Oe.start),end:void 0}}function u(ke){return Oe;function Oe(dt){ke&&ke.call(this,dt),l.call(this,dt)}}function l(ke,Oe){const dt=this.stack.pop(),Lt=this.tokenStack.pop();if(Lt)Lt[0].type!==ke.type&&(Oe?Oe.call(this,ke,Lt[0]):(Lt[1]||mce).call(this,ke,Lt[0]));else throw new Error("Cannot close `"+ke.type+"` ("+CN({start:ke.start,end:ke.end})+"): its not open");dt.position.end=_v(ke.end)}function c(){return Met(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(ke){if(this.data.expectingFirstListItemValue){const Oe=this.stack[this.stack.length-2];Oe.start=Number.parseInt(this.sliceSerialize(ke),10),this.data.expectingFirstListItemValue=void 0}}function h(){const ke=this.resume(),Oe=this.stack[this.stack.length-1];Oe.lang=ke}function p(){const ke=this.resume(),Oe=this.stack[this.stack.length-1];Oe.meta=ke}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function y(){const ke=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=ke.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function v(){const ke=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=ke.replace(/(\r?\n|\r)$/g,"")}function b(ke){const Oe=this.resume(),dt=this.stack[this.stack.length-1];dt.label=Oe,dt.identifier=R2(this.sliceSerialize(ke)).toLowerCase()}function w(){const ke=this.resume(),Oe=this.stack[this.stack.length-1];Oe.title=ke}function E(){const ke=this.resume(),Oe=this.stack[this.stack.length-1];Oe.url=ke}function T(ke){const Oe=this.stack[this.stack.length-1];if(!Oe.depth){const dt=this.sliceSerialize(ke).length;Oe.depth=dt}}function A(){this.data.setextHeadingSlurpLineEnding=!0}function I(ke){const Oe=this.stack[this.stack.length-1];Oe.depth=this.sliceSerialize(ke).codePointAt(0)===61?1:2}function R(){this.data.setextHeadingSlurpLineEnding=void 0}function D(ke){const dt=this.stack[this.stack.length-1].children;let Lt=dt[dt.length-1];(!Lt||Lt.type!=="text")&&(Lt=ft(),Lt.position={start:_v(ke.start),end:void 0},dt.push(Lt)),this.stack.push(Lt)}function M(ke){const Oe=this.stack.pop();Oe.value+=this.sliceSerialize(ke),Oe.position.end=_v(ke.end)}function $(ke){const Oe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const dt=Oe.children[Oe.children.length-1];dt.position.end=_v(ke.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Oe.type)&&(D.call(this,ke),M.call(this,ke))}function U(){this.data.atHardBreak=!0}function F(){const ke=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=ke}function H(){const ke=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=ke}function Q(){const ke=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=ke}function J(){const ke=this.stack[this.stack.length-1];if(this.data.inReference){const Oe=this.data.referenceType||"shortcut";ke.type+="Reference",ke.referenceType=Oe,delete ke.url,delete ke.title}else delete ke.identifier,delete ke.label;this.data.referenceType=void 0}function ne(){const ke=this.stack[this.stack.length-1];if(this.data.inReference){const Oe=this.data.referenceType||"shortcut";ke.type+="Reference",ke.referenceType=Oe,delete ke.url,delete ke.title}else delete ke.identifier,delete ke.label;this.data.referenceType=void 0}function Z(ke){const Oe=this.sliceSerialize(ke),dt=this.stack[this.stack.length-2];dt.label=Ont(Oe),dt.identifier=R2(Oe).toLowerCase()}function ie(){const ke=this.stack[this.stack.length-1],Oe=this.resume(),dt=this.stack[this.stack.length-1];if(this.data.inReference=!0,dt.type==="link"){const Lt=ke.children;dt.children=Lt}else dt.alt=Oe}function q(){const ke=this.resume(),Oe=this.stack[this.stack.length-1];Oe.url=ke}function j(){const ke=this.resume(),Oe=this.stack[this.stack.length-1];Oe.title=ke}function G(){this.data.inReference=void 0}function V(){this.data.referenceType="collapsed"}function Y(ke){const Oe=this.resume(),dt=this.stack[this.stack.length-1];dt.label=Oe,dt.identifier=R2(this.sliceSerialize(ke)).toLowerCase(),this.data.referenceType="full"}function ee(ke){this.data.characterReferenceType=ke.type}function ae(ke){const Oe=this.sliceSerialize(ke),dt=this.data.characterReferenceType;let Lt;dt?(Lt=TTe(Oe,dt==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Lt=zJ(Oe);const Ft=this.stack[this.stack.length-1];Ft.value+=Lt}function _e(ke){const Oe=this.stack.pop();Oe.position.end=_v(ke.end)}function pe(ke){M.call(this,ke);const Oe=this.stack[this.stack.length-1];Oe.url=this.sliceSerialize(ke)}function Te(ke){M.call(this,ke);const Oe=this.stack[this.stack.length-1];Oe.url="mailto:"+this.sliceSerialize(ke)}function Le(){return{type:"blockquote",children:[]}}function ye(){return{type:"code",lang:null,meta:null,value:""}}function he(){return{type:"inlineCode",value:""}}function $e(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ne(){return{type:"emphasis",children:[]}}function tt(){return{type:"heading",depth:0,children:[]}}function it(){return{type:"break"}}function Me(){return{type:"html",value:""}}function Ge(){return{type:"image",title:null,url:"",alt:null}}function at(){return{type:"link",title:null,url:"",children:[]}}function yt(ke){return{type:"list",ordered:ke.type==="listOrdered",start:null,spread:ke._spread,children:[]}}function Tt(ke){return{type:"listItem",spread:ke._spread,checked:null,children:[]}}function Ot(){return{type:"paragraph",children:[]}}function qe(){return{type:"strong",children:[]}}function ft(){return{type:"text",value:""}}function wt(){return{type:"thematicBreak"}}}function _v(e){return{line:e.line,column:e.column,offset:e.offset}}function MTe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?MTe(e,r):Fnt(e,r)}}function Fnt(e,t){let n;for(n in t)if(OTe.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function mce(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+CN({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+CN({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+CN({start:t.start,end:t.end})+") is still open")}function Bnt(e){const t=this;t.parser=n;function n(r){return Lnt(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function jnt(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function Unt(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function znt(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function Vnt(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Hnt(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function qnt(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=DA(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function Wnt(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Gnt(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function LTe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function Ynt(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return LTe(e,t);const i={src:DA(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function Knt(e,t){const n={src:DA(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function Xnt(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function Qnt(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return LTe(e,t);const i={href:DA(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function Jnt(e,t){const n={href:DA(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Znt(e,t,n){const r=e.all(t),i=n?ert(n):$Te(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function ert(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=$Te(n[r])}return t}function $Te(e){const t=e.spread;return t??e.children.length>1}function trt(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function nrt(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function rrt(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function irt(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function srt(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=rg(t.children[1]),u=wB(t.children[t.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function ort(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(f,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function art(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const gce=9,yce=32;function urt(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(vce(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(vce(t.slice(i),i>0,!1)),s.join("")}function vce(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===gce||s===yce;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===gce||s===yce;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function lrt(e,t){const n={type:"text",value:urt(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function crt(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const frt={blockquote:jnt,break:Unt,code:znt,delete:Vnt,emphasis:Hnt,footnoteReference:qnt,heading:Wnt,html:Gnt,imageReference:Ynt,image:Knt,inlineCode:Xnt,linkReference:Qnt,link:Jnt,listItem:Znt,list:trt,paragraph:nrt,root:rrt,strong:irt,table:srt,tableCell:art,tableRow:ort,text:lrt,thematicBreak:crt,toml:D4,yaml:D4,definition:D4,footnoteDefinition:D4};function D4(){}const FTe=-1,TB=0,H$=1,q$=2,qJ=3,WJ=4,GJ=5,YJ=6,BTe=7,jTe=8,bce=typeof self=="object"?self:globalThis,drt=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case TB:case FTe:return n(o,i);case H$:{const a=n([],i);for(const u of o)a.push(r(u));return a}case q$:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case qJ:return n(new Date(o),i);case WJ:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case GJ:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case YJ:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case BTe:{const{name:a,message:u}=o;return n(new bce[a](u),i)}case jTe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new bce[s](o),i)};return r},xce=e=>drt(new Map,e)(0),AS="",{toString:hrt}={},{keys:prt}=Object,Hk=e=>{const t=typeof e;if(t!=="object"||!e)return[TB,t];const n=hrt.call(e).slice(8,-1);switch(n){case"Array":return[H$,AS];case"Object":return[q$,AS];case"Date":return[qJ,AS];case"RegExp":return[WJ,AS];case"Map":return[GJ,AS];case"Set":return[YJ,AS]}return n.includes("Array")?[H$,n]:n.includes("Error")?[BTe,n]:[q$,n]},P4=([e,t])=>e===TB&&(t==="function"||t==="symbol"),mrt=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=Hk(o);switch(a){case TB:{let c=o;switch(u){case"bigint":a=jTe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([FTe],o)}return i([a,c],o)}case H$:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case q$:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of prt(o))(e||!P4(Hk(o[d])))&&c.push([s(d),s(o[d])]);return f}case qJ:return i([a,o.toISOString()],o);case WJ:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case GJ:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(P4(Hk(d))||P4(Hk(h))))&&c.push([s(d),s(h)]);return f}case YJ:{const c=[],f=i([a,c],o);for(const d of o)(e||!P4(Hk(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},_ce=(e,{json:t,lossy:n}={})=>{const r=[];return mrt(!(t||n),!!t,new Map,r)(e),r},uC=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?xce(_ce(e,t)):structuredClone(e):(e,t)=>xce(_ce(e,t));function grt(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function yrt(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function vrt(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||grt,r=e.options.footnoteBackLabel||yrt,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=DA(f.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(f);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let b=typeof n=="string"?n:n(u,h);typeof b=="string"&&(b={type:"text",value:b}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(b)?b:[b]})}const y=c[c.length-1];if(y&&y.type==="element"&&y.tagName==="p"){const b=y.children[y.children.length-1];b&&b.type==="text"?b.value+=" ":y.children.push({type:"text",value:" "}),y.children.push(...p)}else c.push(...p);const v={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,v),a.push(v)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...uC(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const UTe=function(e){if(e==null)return wrt;if(typeof e=="function")return SB(e);if(typeof e=="object")return Array.isArray(e)?brt(e):xrt(e);if(typeof e=="string")return _rt(e);throw new Error("Expected function, string, or object as test")};function brt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=UTe(e[n]);return SB(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function xrt(e){const t=e;return SB(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function _rt(e){return SB(t);function t(n){return n&&n.type===e}}function SB(e){return t;function t(n,r,i){return!!(Ert(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function wrt(){return!0}function Ert(e){return e!==null&&typeof e=="object"&&"type"in e}const zTe=[],Trt=!0,wce=!1,Srt="skip";function Crt(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=UTe(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=zTe,p,m,y;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=Art(n(u,c)),h[0]===wce))return h;if("children"in u&&u.children){const v=u;if(v.children&&h[0]!==Srt)for(m=(r?v.children.length:-1)+o,y=c.concat(v);m>-1&&m<v.children.length;){const b=v.children[m];if(p=a(b,m,y)(),p[0]===wce)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function Art(e){return Array.isArray(e)?e:typeof e=="number"?[Trt,e]:e==null?zTe:[e]}function KJ(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),Crt(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const mW={}.hasOwnProperty,Irt={};function krt(e,t){const n=t||Irt,r=new Map,i=new Map,s=new Map,o={...frt,...n.handlers},a={all:l,applyData:Nrt,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:Rrt,wrap:Prt};return KJ(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if(mW.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:m,...y}=c,v=uC(y);return v.children=a.all(c),v}return uC(c)}return(a.options.unknownHandler||Drt)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const p=a.one(d[h],c);if(p){if(h&&d[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=Ece(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=Ece(m.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function Rrt(e,t){e.position&&(t.position=cet(e))}function Nrt(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,uC(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function Drt(e,t){const n=t.data||{},r="value"in t&&!(mW.call(n,"hProperties")||mW.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Prt(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Ece(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Tce(e,t){const n=krt(e,t),r=n.one(e,void 0),i=vrt(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function Ort(e,t){return e&&"run"in e?async function(n,r){const i=Tce(n,{file:r,...t});await e.run(i,r)}:function(n,r){return Tce(n,{file:r,...t||e})}}function Sce(e){if(e)throw e}var mz,Cce;function Mrt(){if(Cce)return mz;Cce=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(l){return typeof Array.isArray=="function"?Array.isArray(l):t.call(l)==="[object Array]"},s=function(l){if(!l||t.call(l)!=="[object Object]")return!1;var c=e.call(l,"constructor"),f=l.constructor&&l.constructor.prototype&&e.call(l.constructor.prototype,"isPrototypeOf");if(l.constructor&&!c&&!f)return!1;var d;for(d in l);return typeof d>"u"||e.call(l,d)},o=function(l,c){n&&c.name==="__proto__"?n(l,c.name,{enumerable:!0,configurable:!0,value:c.newValue,writable:!0}):l[c.name]=c.newValue},a=function(l,c){if(c==="__proto__")if(e.call(l,c)){if(r)return r(l,c).value}else return;return l[c]};return mz=function u(){var l,c,f,d,h,p,m=arguments[0],y=1,v=arguments.length,b=!1;for(typeof m=="boolean"&&(b=m,m=arguments[1]||{},y=2),(m==null||typeof m!="object"&&typeof m!="function")&&(m={});y<v;++y)if(l=arguments[y],l!=null)for(c in l)f=a(m,c),d=a(l,c),m!==d&&(b&&d&&(s(d)||(h=i(d)))?(h?(h=!1,p=f&&i(f)?f:[]):p=f&&s(f)?f:{},o(m,{name:c,newValue:u(b,p,d)})):typeof d<"u"&&o(m,{name:c,newValue:d}));return m},mz}var Lrt=Mrt();const gz=hh(Lrt);function gW(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function $rt(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?Frt(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function Frt(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const zm={basename:Brt,dirname:jrt,extname:Urt,join:zrt,sep:"/"};function Brt(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');WP(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function jrt(e){if(WP(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Urt(e){WP(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function zrt(...e){let t=-1,n;for(;++t<e.length;)WP(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Vrt(n)}function Vrt(e){WP(e);const t=e.codePointAt(0)===47;let n=Hrt(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Hrt(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function WP(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const qrt={cwd:Wrt};function Wrt(){return"/"}function yW(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Grt(e){if(typeof e=="string")e=new URL(e);else if(!yW(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Yrt(e)}function Yrt(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const yz=["history","path","basename","stem","extname","dirname"];class VTe{constructor(t){let n;t?yW(t)?n={path:t}:typeof t=="string"||Krt(t)?n={value:t}:n=t:n={},this.cwd=qrt.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<yz.length;){const s=yz[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)yz.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?zm.basename(this.path):void 0}set basename(t){bz(t,"basename"),vz(t,"basename"),this.path=zm.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?zm.dirname(this.path):void 0}set dirname(t){Ace(this.basename,"dirname"),this.path=zm.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?zm.extname(this.path):void 0}set extname(t){if(vz(t,"extname"),Ace(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=zm.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){yW(t)&&(t=Grt(t)),bz(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?zm.basename(this.path,this.extname):void 0}set stem(t){bz(t,"stem"),vz(t,"stem"),this.path=zm.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new ml(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function vz(e,t){if(e&&e.includes(zm.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+zm.sep+"`")}function bz(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Ace(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Krt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Xrt=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};Object.setPrototypeOf(s,r);const o=Object.getOwnPropertyNames(i);for(const a of o){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(s,a,u)}return s},Qrt={}.hasOwnProperty;class XJ extends Xrt{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=$rt()}copy(){const t=new XJ;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(gz(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(wz("data",this.frozen),this.namespace[t]=n,this):Qrt.call(this.namespace,t)&&this.namespace[t]||void 0:t?(wz("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=O4(t),r=this.parser||this.Parser;return xz("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),xz("process",this.parser||this.Parser),_z("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=O4(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,p=r.stringify(h,d);eit(p)?d.value=p:d.result=p,l(c,d)});function l(c,f){c||!f?o(c):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),xz("processSync",this.parser||this.Parser),_z("processSync",this.compiler||this.Compiler),this.process(t,i),kce("processSync","process",n),r;function i(s,o){n=!0,Sce(s),r=o}}run(t,n,r){Ice(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=O4(n);i.run(t,u,l);function l(c,f,d){const h=f||t;c?a(c):o?o(h):r(void 0,h,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),kce("runSync","run",r),i;function s(o,a){Sce(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=O4(n),i=this.compiler||this.Compiler;return _z("stringify",i),Ice(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(wz("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=gz(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];s(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const m=r[d][1];gW(m)&&gW(h)&&(h=gz(!0,m,h)),r[d]=[l,h,...p]}}}}const Jrt=new XJ().freeze();function xz(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function _z(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function wz(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Ice(e){if(!gW(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function kce(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function O4(e){return Zrt(e)?e:new VTe(e)}function Zrt(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function eit(e){return typeof e=="string"||tit(e)}function tit(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const nit="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Rce=[],Nce={allowDangerousHtml:!0},rit=/^(https?|ircs?|mailto|xmpp)$/i,iit=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function sit(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||Rce,u=e.remarkPlugins||Rce,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Nce}:Nce,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||oit,h=Jrt().use(Bnt).use(u).use(Ort,l).use(a),p=new VTe;typeof r=="string"&&(p.value=r);for(const b of iit)Object.hasOwn(e,b.from)&&(""+b.from+(b.to?"use `"+b.to+"` instead":"remove it")+nit+b.id,void 0);const m=h.parse(p);let y=h.runSync(m,p);return i&&(y={type:"element",tagName:"div",properties:{className:i},children:y.type==="root"?y.children:[y]}),KJ(y,v),get(y,{Fragment:S.Fragment,components:s,ignoreInvalidStyle:!0,jsx:S.jsx,jsxs:S.jsxs,passKeys:!0,passNode:!0});function v(b,w,E){if(b.type==="raw"&&E&&typeof w=="number")return c?E.children.splice(w,1):E.children[w]={type:"text",value:b.value},w;if(b.type==="element"){let T;for(T in dz)if(Object.hasOwn(dz,T)&&Object.hasOwn(b.properties,T)){const A=b.properties[T],I=dz[T];(I===null||I.includes(b.tagName))&&(b.properties[T]=d(String(A||""),T,b))}}if(b.type==="element"){let T=t?!t.includes(b.tagName):o?o.includes(b.tagName):!1;if(!T&&n&&typeof w=="number"&&(T=!n(b,w,E)),T&&E&&typeof w=="number")return f&&b.children?E.children.splice(w,1,...b.children):E.children.splice(w,1),w}}}function oit(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||rit.test(e.slice(0,t))?e:""}const Dce=/[#.]/g;function ait(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){Dce.lastIndex=i;const a=Dce.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const uit=new Set(["button","menu","reset","submit"]),vW={}.hasOwnProperty;function HTe(e,t,n){const r=n&&dit(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=ait(s,t),l.tagName=l.tagName.toLowerCase(),r&&vW.call(r,l.tagName)&&(l.tagName=r[l.tagName]),lit(o,l.tagName)){let c;for(c in o)vW.call(o,c)&&cit(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)bW(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function lit(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?uit.has(e.type.toLowerCase()):!("value"in e)}function cit(e,t,n,r){const i=_B(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=Jle(r):i.commaSeparated?o=Gle(r):i.commaOrSpaceSeparated?o=Jle(Gle(r).join(" ")):o=Pce(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?fit(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=Pce(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function bW(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)bW(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?bW(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function Pce(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||pD(n)===pD(t)))return!0}return n}function fit(e){const t=[];let n;for(n in e)vW.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function dit(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const hit=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],pit=HTe(qP,"div"),mit=HTe(gx,"g",hit),Ez=/\r?\n|\r/g;function git(e){const t=String(e),n=[];for(Ez.lastIndex=0;Ez.test(t);)n.push(Ez.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const pw={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},qTe={}.hasOwnProperty,yit=Object.prototype;function vit(e,t){const n=t;return QJ({file:n.file||void 0,location:!1,schema:n.space==="svg"?gx:qP,verbose:n.verbose||!1},e)}function QJ(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},GM(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:WTe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=git(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},GM(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},GM(e,r,n),n}default:return n=bit(e,t),n}}function WTe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=QJ(e,t[n]);r.push(i)}return r}function bit(e,t){const n=e.schema;e.schema=t.namespaceURI===pw.svg?gx:qP;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;qTe.call(yit,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?mit:pit)(t.tagName,i,WTe(e,t.childNodes));if(GM(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&f2(u.startTag),c=u&&u.endTag&&f2(u.endTag),f=QJ(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function GM(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=xit(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function xit(e,t,n){const r=f2(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)qTe.call(n.attrs,o)&&(s[_B(e.schema,o).property]=f2(n.attrs[o]));n.startTag;const a=f2(n.startTag),u=n.endTag?f2(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function f2(e){const t=Oce({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=Oce({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function Oce(e){return e.line&&e.column?e:void 0}const Mce={}.hasOwnProperty;function GTe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&Mce.call(i,e)){const u=String(i[e]);o=Mce.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const _it={}.hasOwnProperty,YTe=GTe("type",{handlers:{root:Eit,element:Iit,text:Cit,comment:Ait,doctype:Sit}});function wit(e,t){const r=t.space;return YTe(e,r==="svg"?gx:qP)}function Eit(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=JJ(e.children,n,t),PA(e,n),n}function Tit(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=JJ(e.children,n,t),PA(e,n),n}function Sit(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return PA(e,t),t}function Cit(e){const t={nodeName:"#text",value:e.value,parentNode:null};return PA(e,t),t}function Ait(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return PA(e,t),t}function Iit(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=gx);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&_it.call(e.properties,s)){const u=kit(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:pw[o],childNodes:[],parentNode:null};return a.childNodes=JJ(e.children,a,r),PA(e,a),e.tagName==="template"&&e.content&&(a.content=Tit(e.content,r)),a}function kit(e,t,n){const r=_B(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?uTe(n):yTe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=pw[r.space]}return i}function JJ(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=YTe(e[r],n);s.parentNode=t,i.push(s)}return i}function PA(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const Rit=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],Nit=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),Is="";var de;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(de=de||(de={}));const Ic={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function KTe(e){return e>=55296&&e<=57343}function Dit(e){return e>=56320&&e<=57343}function Pit(e,t){return(e-55296)*1024+9216+t}function XTe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function QTe(e){return e>=64976&&e<=65007||Nit.has(e)}var et;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(et=et||(et={}));const Oit=65536;class Mit{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=Oit,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(Dit(n))return this.pos++,this._addGap(),Pit(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,de.EOF;return this._err(et.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,de.EOF;const r=this.html.charCodeAt(n);return r===de.CARRIAGE_RETURN?de.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,de.EOF;let t=this.html.charCodeAt(this.pos);return t===de.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,de.LINE_FEED):t===de.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,KTe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===de.LINE_FEED||t===de.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){XTe(t)?this._err(et.controlCharacterInInputStream):QTe(t)&&this._err(et.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var wr;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(wr=wr||(wr={}));function JTe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const Cv=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),Lit=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var Tz;const $it=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Fit=(Tz=String.fromCodePoint)!==null&&Tz!==void 0?Tz:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function Bit(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=$it.get(e))!==null&&t!==void 0?t:e}var Pa;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Pa||(Pa={}));const jit=32;var f0;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(f0||(f0={}));function xW(e){return e>=Pa.ZERO&&e<=Pa.NINE}function Uit(e){return e>=Pa.UPPER_A&&e<=Pa.UPPER_F||e>=Pa.LOWER_A&&e<=Pa.LOWER_F}function zit(e){return e>=Pa.UPPER_A&&e<=Pa.UPPER_Z||e>=Pa.LOWER_A&&e<=Pa.LOWER_Z||xW(e)}function Vit(e){return e===Pa.EQUALS||zit(e)}var Aa;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Aa||(Aa={}));var tw;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(tw||(tw={}));class Hit{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Aa.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=tw.Strict}startEntity(t){this.decodeMode=t,this.state=Aa.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Aa.EntityStart:return t.charCodeAt(n)===Pa.NUM?(this.state=Aa.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Aa.NamedEntity,this.stateNamedEntity(t,n));case Aa.NumericStart:return this.stateNumericStart(t,n);case Aa.NumericDecimal:return this.stateNumericDecimal(t,n);case Aa.NumericHex:return this.stateNumericHex(t,n);case Aa.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|jit)===Pa.LOWER_X?(this.state=Aa.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Aa.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(xW(i)||Uit(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(xW(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Pa.SEMI)this.consumed+=1;else if(this.decodeMode===tw.Strict)return 0;return this.emitCodePoint(Bit(this.result),this.consumed),this.errors&&(t!==Pa.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&f0.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=eSe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===tw.Attribute&&(s===0||Vit(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&f0.VALUE_LENGTH)>>14,s!==0){if(o===Pa.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==tw.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&f0.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~f0.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Aa.NamedEntity:return this.result!==0&&(this.decodeMode!==tw.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Aa.NumericDecimal:return this.emitNumericEntity(0,2);case Aa.NumericHex:return this.emitNumericEntity(0,3);case Aa.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Aa.EntityStart:return 0}}}function ZTe(e){let t="";const n=new Hit(e,r=>t+=Fit(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function eSe(e,t,n,r){const i=(t&f0.BRANCH_LENGTH)>>7,s=t&f0.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}ZTe(Cv);ZTe(Lit);var lt;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(lt=lt||(lt={}));var ob;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(ob=ob||(ob={}));var Uf;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(Uf=Uf||(Uf={}));var He;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(He=He||(He={}));var B;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(B=B||(B={}));const qit=new Map([[He.A,B.A],[He.ADDRESS,B.ADDRESS],[He.ANNOTATION_XML,B.ANNOTATION_XML],[He.APPLET,B.APPLET],[He.AREA,B.AREA],[He.ARTICLE,B.ARTICLE],[He.ASIDE,B.ASIDE],[He.B,B.B],[He.BASE,B.BASE],[He.BASEFONT,B.BASEFONT],[He.BGSOUND,B.BGSOUND],[He.BIG,B.BIG],[He.BLOCKQUOTE,B.BLOCKQUOTE],[He.BODY,B.BODY],[He.BR,B.BR],[He.BUTTON,B.BUTTON],[He.CAPTION,B.CAPTION],[He.CENTER,B.CENTER],[He.CODE,B.CODE],[He.COL,B.COL],[He.COLGROUP,B.COLGROUP],[He.DD,B.DD],[He.DESC,B.DESC],[He.DETAILS,B.DETAILS],[He.DIALOG,B.DIALOG],[He.DIR,B.DIR],[He.DIV,B.DIV],[He.DL,B.DL],[He.DT,B.DT],[He.EM,B.EM],[He.EMBED,B.EMBED],[He.FIELDSET,B.FIELDSET],[He.FIGCAPTION,B.FIGCAPTION],[He.FIGURE,B.FIGURE],[He.FONT,B.FONT],[He.FOOTER,B.FOOTER],[He.FOREIGN_OBJECT,B.FOREIGN_OBJECT],[He.FORM,B.FORM],[He.FRAME,B.FRAME],[He.FRAMESET,B.FRAMESET],[He.H1,B.H1],[He.H2,B.H2],[He.H3,B.H3],[He.H4,B.H4],[He.H5,B.H5],[He.H6,B.H6],[He.HEAD,B.HEAD],[He.HEADER,B.HEADER],[He.HGROUP,B.HGROUP],[He.HR,B.HR],[He.HTML,B.HTML],[He.I,B.I],[He.IMG,B.IMG],[He.IMAGE,B.IMAGE],[He.INPUT,B.INPUT],[He.IFRAME,B.IFRAME],[He.KEYGEN,B.KEYGEN],[He.LABEL,B.LABEL],[He.LI,B.LI],[He.LINK,B.LINK],[He.LISTING,B.LISTING],[He.MAIN,B.MAIN],[He.MALIGNMARK,B.MALIGNMARK],[He.MARQUEE,B.MARQUEE],[He.MATH,B.MATH],[He.MENU,B.MENU],[He.META,B.META],[He.MGLYPH,B.MGLYPH],[He.MI,B.MI],[He.MO,B.MO],[He.MN,B.MN],[He.MS,B.MS],[He.MTEXT,B.MTEXT],[He.NAV,B.NAV],[He.NOBR,B.NOBR],[He.NOFRAMES,B.NOFRAMES],[He.NOEMBED,B.NOEMBED],[He.NOSCRIPT,B.NOSCRIPT],[He.OBJECT,B.OBJECT],[He.OL,B.OL],[He.OPTGROUP,B.OPTGROUP],[He.OPTION,B.OPTION],[He.P,B.P],[He.PARAM,B.PARAM],[He.PLAINTEXT,B.PLAINTEXT],[He.PRE,B.PRE],[He.RB,B.RB],[He.RP,B.RP],[He.RT,B.RT],[He.RTC,B.RTC],[He.RUBY,B.RUBY],[He.S,B.S],[He.SCRIPT,B.SCRIPT],[He.SECTION,B.SECTION],[He.SELECT,B.SELECT],[He.SOURCE,B.SOURCE],[He.SMALL,B.SMALL],[He.SPAN,B.SPAN],[He.STRIKE,B.STRIKE],[He.STRONG,B.STRONG],[He.STYLE,B.STYLE],[He.SUB,B.SUB],[He.SUMMARY,B.SUMMARY],[He.SUP,B.SUP],[He.TABLE,B.TABLE],[He.TBODY,B.TBODY],[He.TEMPLATE,B.TEMPLATE],[He.TEXTAREA,B.TEXTAREA],[He.TFOOT,B.TFOOT],[He.TD,B.TD],[He.TH,B.TH],[He.THEAD,B.THEAD],[He.TITLE,B.TITLE],[He.TR,B.TR],[He.TRACK,B.TRACK],[He.TT,B.TT],[He.U,B.U],[He.UL,B.UL],[He.SVG,B.SVG],[He.VAR,B.VAR],[He.WBR,B.WBR],[He.XMP,B.XMP]]);function OA(e){var t;return(t=qit.get(e))!==null&&t!==void 0?t:B.UNKNOWN}const Dt=B,Wit={[lt.HTML]:new Set([Dt.ADDRESS,Dt.APPLET,Dt.AREA,Dt.ARTICLE,Dt.ASIDE,Dt.BASE,Dt.BASEFONT,Dt.BGSOUND,Dt.BLOCKQUOTE,Dt.BODY,Dt.BR,Dt.BUTTON,Dt.CAPTION,Dt.CENTER,Dt.COL,Dt.COLGROUP,Dt.DD,Dt.DETAILS,Dt.DIR,Dt.DIV,Dt.DL,Dt.DT,Dt.EMBED,Dt.FIELDSET,Dt.FIGCAPTION,Dt.FIGURE,Dt.FOOTER,Dt.FORM,Dt.FRAME,Dt.FRAMESET,Dt.H1,Dt.H2,Dt.H3,Dt.H4,Dt.H5,Dt.H6,Dt.HEAD,Dt.HEADER,Dt.HGROUP,Dt.HR,Dt.HTML,Dt.IFRAME,Dt.IMG,Dt.INPUT,Dt.LI,Dt.LINK,Dt.LISTING,Dt.MAIN,Dt.MARQUEE,Dt.MENU,Dt.META,Dt.NAV,Dt.NOEMBED,Dt.NOFRAMES,Dt.NOSCRIPT,Dt.OBJECT,Dt.OL,Dt.P,Dt.PARAM,Dt.PLAINTEXT,Dt.PRE,Dt.SCRIPT,Dt.SECTION,Dt.SELECT,Dt.SOURCE,Dt.STYLE,Dt.SUMMARY,Dt.TABLE,Dt.TBODY,Dt.TD,Dt.TEMPLATE,Dt.TEXTAREA,Dt.TFOOT,Dt.TH,Dt.THEAD,Dt.TITLE,Dt.TR,Dt.TRACK,Dt.UL,Dt.WBR,Dt.XMP]),[lt.MATHML]:new Set([Dt.MI,Dt.MO,Dt.MN,Dt.MS,Dt.MTEXT,Dt.ANNOTATION_XML]),[lt.SVG]:new Set([Dt.TITLE,Dt.FOREIGN_OBJECT,Dt.DESC]),[lt.XLINK]:new Set,[lt.XML]:new Set,[lt.XMLNS]:new Set};function tSe(e){return e===Dt.H1||e===Dt.H2||e===Dt.H3||e===Dt.H4||e===Dt.H5||e===Dt.H6}He.STYLE,He.SCRIPT,He.XMP,He.IFRAME,He.NOEMBED,He.NOFRAMES,He.PLAINTEXT;const Git=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var me;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(me||(me={}));const So={DATA:me.DATA,RCDATA:me.RCDATA,RAWTEXT:me.RAWTEXT,SCRIPT_DATA:me.SCRIPT_DATA,PLAINTEXT:me.PLAINTEXT,CDATA_SECTION:me.CDATA_SECTION};function IN(e){return e>=de.DIGIT_0&&e<=de.DIGIT_9}function MR(e){return e>=de.LATIN_CAPITAL_A&&e<=de.LATIN_CAPITAL_Z}function Yit(e){return e>=de.LATIN_SMALL_A&&e<=de.LATIN_SMALL_Z}function Av(e){return Yit(e)||MR(e)}function _W(e){return Av(e)||IN(e)}function nSe(e){return e>=de.LATIN_CAPITAL_A&&e<=de.LATIN_CAPITAL_F}function rSe(e){return e>=de.LATIN_SMALL_A&&e<=de.LATIN_SMALL_F}function Kit(e){return IN(e)||nSe(e)||rSe(e)}function M4(e){return e+32}function iSe(e){return e===de.SPACE||e===de.LINE_FEED||e===de.TABULATION||e===de.FORM_FEED}function Xit(e){return e===de.EQUALS_SIGN||_W(e)}function Lce(e){return iSe(e)||e===de.SOLIDUS||e===de.GREATER_THAN_SIGN}class Qit{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=me.DATA,this.returnState=me.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new Mit(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:wr.START_TAG,tagName:"",tagID:B.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:wr.END_TAG,tagName:"",tagID:B.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:wr.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:wr.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(JTe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(et.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=OA(t.tagName),t.type===wr.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(et.endTagWithAttributes),t.selfClosing&&this._err(et.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case wr.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case wr.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case wr.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:wr.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=iSe(t)?wr.WHITESPACE_CHARACTER:t===de.NULL?wr.NULL_CHARACTER:wr.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(wr.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=Cv[0];s>=0&&(s=eSe(Cv,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=Cv[s];const a=o&f0.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==de.SEMICOLON&&this._isCharacterReferenceInAttribute()&&Xit(this.preprocessor.peek(1))?(n=[de.AMPERSAND],s+=u):(n=u===0?[Cv[s]&~f0.VALUE_LENGTH]:u===1?[Cv[++s]]:[Cv[++s],Cv[++s]],r=0,i=t!==de.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(et.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===me.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===me.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===me.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case me.DATA:{this._stateData(t);break}case me.RCDATA:{this._stateRcdata(t);break}case me.RAWTEXT:{this._stateRawtext(t);break}case me.SCRIPT_DATA:{this._stateScriptData(t);break}case me.PLAINTEXT:{this._statePlaintext(t);break}case me.TAG_OPEN:{this._stateTagOpen(t);break}case me.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case me.TAG_NAME:{this._stateTagName(t);break}case me.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case me.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case me.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case me.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case me.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case me.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case me.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case me.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case me.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case me.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case me.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case me.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case me.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case me.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case me.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case me.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case me.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case me.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case me.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case me.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case me.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case me.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case me.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case me.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case me.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case me.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case me.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case me.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case me.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case me.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case me.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case me.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case me.BOGUS_COMMENT:{this._stateBogusComment(t);break}case me.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case me.COMMENT_START:{this._stateCommentStart(t);break}case me.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case me.COMMENT:{this._stateComment(t);break}case me.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case me.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case me.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case me.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case me.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case me.COMMENT_END:{this._stateCommentEnd(t);break}case me.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case me.DOCTYPE:{this._stateDoctype(t);break}case me.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case me.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case me.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case me.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case me.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case me.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case me.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case me.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case me.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case me.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case me.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case me.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case me.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case me.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case me.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case me.CDATA_SECTION:{this._stateCdataSection(t);break}case me.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case me.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case me.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case me.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case me.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case me.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case me.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case me.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case me.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case me.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case de.LESS_THAN_SIGN:{this.state=me.TAG_OPEN;break}case de.AMPERSAND:{this.returnState=me.DATA,this.state=me.CHARACTER_REFERENCE;break}case de.NULL:{this._err(et.unexpectedNullCharacter),this._emitCodePoint(t);break}case de.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case de.AMPERSAND:{this.returnState=me.RCDATA,this.state=me.CHARACTER_REFERENCE;break}case de.LESS_THAN_SIGN:{this.state=me.RCDATA_LESS_THAN_SIGN;break}case de.NULL:{this._err(et.unexpectedNullCharacter),this._emitChars(Is);break}case de.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case de.LESS_THAN_SIGN:{this.state=me.RAWTEXT_LESS_THAN_SIGN;break}case de.NULL:{this._err(et.unexpectedNullCharacter),this._emitChars(Is);break}case de.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case de.LESS_THAN_SIGN:{this.state=me.SCRIPT_DATA_LESS_THAN_SIGN;break}case de.NULL:{this._err(et.unexpectedNullCharacter),this._emitChars(Is);break}case de.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case de.NULL:{this._err(et.unexpectedNullCharacter),this._emitChars(Is);break}case de.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(Av(t))this._createStartTagToken(),this.state=me.TAG_NAME,this._stateTagName(t);else switch(t){case de.EXCLAMATION_MARK:{this.state=me.MARKUP_DECLARATION_OPEN;break}case de.SOLIDUS:{this.state=me.END_TAG_OPEN;break}case de.QUESTION_MARK:{this._err(et.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=me.BOGUS_COMMENT,this._stateBogusComment(t);break}case de.EOF:{this._err(et.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(et.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=me.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(Av(t))this._createEndTagToken(),this.state=me.TAG_NAME,this._stateTagName(t);else switch(t){case de.GREATER_THAN_SIGN:{this._err(et.missingEndTagName),this.state=me.DATA;break}case de.EOF:{this._err(et.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(et.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=me.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this.state=me.BEFORE_ATTRIBUTE_NAME;break}case de.SOLIDUS:{this.state=me.SELF_CLOSING_START_TAG;break}case de.GREATER_THAN_SIGN:{this.state=me.DATA,this.emitCurrentTagToken();break}case de.NULL:{this._err(et.unexpectedNullCharacter),n.tagName+=Is;break}case de.EOF:{this._err(et.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(MR(t)?M4(t):t)}}_stateRcdataLessThanSign(t){t===de.SOLIDUS?this.state=me.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=me.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){Av(t)?(this.state=me.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=me.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=me.BEFORE_ATTRIBUTE_NAME,!1;case de.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=me.SELF_CLOSING_START_TAG,!1;case de.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=me.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=me.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===de.SOLIDUS?this.state=me.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=me.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){Av(t)?(this.state=me.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=me.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=me.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case de.SOLIDUS:{this.state=me.SCRIPT_DATA_END_TAG_OPEN;break}case de.EXCLAMATION_MARK:{this.state=me.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=me.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){Av(t)?(this.state=me.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=me.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=me.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===de.HYPHEN_MINUS?(this.state=me.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=me.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===de.HYPHEN_MINUS?(this.state=me.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=me.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case de.HYPHEN_MINUS:{this.state=me.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case de.LESS_THAN_SIGN:{this.state=me.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case de.NULL:{this._err(et.unexpectedNullCharacter),this._emitChars(Is);break}case de.EOF:{this._err(et.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case de.HYPHEN_MINUS:{this.state=me.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case de.LESS_THAN_SIGN:{this.state=me.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case de.NULL:{this._err(et.unexpectedNullCharacter),this.state=me.SCRIPT_DATA_ESCAPED,this._emitChars(Is);break}case de.EOF:{this._err(et.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=me.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case de.HYPHEN_MINUS:{this._emitChars("-");break}case de.LESS_THAN_SIGN:{this.state=me.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case de.GREATER_THAN_SIGN:{this.state=me.SCRIPT_DATA,this._emitChars(">");break}case de.NULL:{this._err(et.unexpectedNullCharacter),this.state=me.SCRIPT_DATA_ESCAPED,this._emitChars(Is);break}case de.EOF:{this._err(et.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=me.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===de.SOLIDUS?this.state=me.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Av(t)?(this._emitChars("<"),this.state=me.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=me.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){Av(t)?(this.state=me.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=me.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=me.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(Ic.SCRIPT,!1)&&Lce(this.preprocessor.peek(Ic.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Ic.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=me.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=me.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case de.HYPHEN_MINUS:{this.state=me.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case de.LESS_THAN_SIGN:{this.state=me.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case de.NULL:{this._err(et.unexpectedNullCharacter),this._emitChars(Is);break}case de.EOF:{this._err(et.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case de.HYPHEN_MINUS:{this.state=me.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case de.LESS_THAN_SIGN:{this.state=me.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case de.NULL:{this._err(et.unexpectedNullCharacter),this.state=me.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Is);break}case de.EOF:{this._err(et.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=me.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case de.HYPHEN_MINUS:{this._emitChars("-");break}case de.LESS_THAN_SIGN:{this.state=me.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case de.GREATER_THAN_SIGN:{this.state=me.SCRIPT_DATA,this._emitChars(">");break}case de.NULL:{this._err(et.unexpectedNullCharacter),this.state=me.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Is);break}case de.EOF:{this._err(et.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=me.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===de.SOLIDUS?(this.state=me.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=me.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(Ic.SCRIPT,!1)&&Lce(this.preprocessor.peek(Ic.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Ic.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=me.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=me.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.SOLIDUS:case de.GREATER_THAN_SIGN:case de.EOF:{this.state=me.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case de.EQUALS_SIGN:{this._err(et.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=me.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=me.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:case de.SOLIDUS:case de.GREATER_THAN_SIGN:case de.EOF:{this._leaveAttrName(),this.state=me.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case de.EQUALS_SIGN:{this._leaveAttrName(),this.state=me.BEFORE_ATTRIBUTE_VALUE;break}case de.QUOTATION_MARK:case de.APOSTROPHE:case de.LESS_THAN_SIGN:{this._err(et.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case de.NULL:{this._err(et.unexpectedNullCharacter),this.currentAttr.name+=Is;break}default:this.currentAttr.name+=String.fromCodePoint(MR(t)?M4(t):t)}}_stateAfterAttributeName(t){switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.SOLIDUS:{this.state=me.SELF_CLOSING_START_TAG;break}case de.EQUALS_SIGN:{this.state=me.BEFORE_ATTRIBUTE_VALUE;break}case de.GREATER_THAN_SIGN:{this.state=me.DATA,this.emitCurrentTagToken();break}case de.EOF:{this._err(et.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=me.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.QUOTATION_MARK:{this.state=me.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case de.APOSTROPHE:{this.state=me.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case de.GREATER_THAN_SIGN:{this._err(et.missingAttributeValue),this.state=me.DATA,this.emitCurrentTagToken();break}default:this.state=me.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case de.QUOTATION_MARK:{this.state=me.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case de.AMPERSAND:{this.returnState=me.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=me.CHARACTER_REFERENCE;break}case de.NULL:{this._err(et.unexpectedNullCharacter),this.currentAttr.value+=Is;break}case de.EOF:{this._err(et.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case de.APOSTROPHE:{this.state=me.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case de.AMPERSAND:{this.returnState=me.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=me.CHARACTER_REFERENCE;break}case de.NULL:{this._err(et.unexpectedNullCharacter),this.currentAttr.value+=Is;break}case de.EOF:{this._err(et.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this._leaveAttrValue(),this.state=me.BEFORE_ATTRIBUTE_NAME;break}case de.AMPERSAND:{this.returnState=me.ATTRIBUTE_VALUE_UNQUOTED,this.state=me.CHARACTER_REFERENCE;break}case de.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=me.DATA,this.emitCurrentTagToken();break}case de.NULL:{this._err(et.unexpectedNullCharacter),this.currentAttr.value+=Is;break}case de.QUOTATION_MARK:case de.APOSTROPHE:case de.LESS_THAN_SIGN:case de.EQUALS_SIGN:case de.GRAVE_ACCENT:{this._err(et.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case de.EOF:{this._err(et.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this._leaveAttrValue(),this.state=me.BEFORE_ATTRIBUTE_NAME;break}case de.SOLIDUS:{this._leaveAttrValue(),this.state=me.SELF_CLOSING_START_TAG;break}case de.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=me.DATA,this.emitCurrentTagToken();break}case de.EOF:{this._err(et.eofInTag),this._emitEOFToken();break}default:this._err(et.missingWhitespaceBetweenAttributes),this.state=me.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case de.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=me.DATA,this.emitCurrentTagToken();break}case de.EOF:{this._err(et.eofInTag),this._emitEOFToken();break}default:this._err(et.unexpectedSolidusInTag),this.state=me.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case de.GREATER_THAN_SIGN:{this.state=me.DATA,this.emitCurrentComment(n);break}case de.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case de.NULL:{this._err(et.unexpectedNullCharacter),n.data+=Is;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(Ic.DASH_DASH,!0)?(this._createCommentToken(Ic.DASH_DASH.length+1),this.state=me.COMMENT_START):this._consumeSequenceIfMatch(Ic.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Ic.DOCTYPE.length+1),this.state=me.DOCTYPE):this._consumeSequenceIfMatch(Ic.CDATA_START,!0)?this.inForeignNode?this.state=me.CDATA_SECTION:(this._err(et.cdataInHtmlContent),this._createCommentToken(Ic.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=me.BOGUS_COMMENT):this._ensureHibernation()||(this._err(et.incorrectlyOpenedComment),this._createCommentToken(2),this.state=me.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case de.HYPHEN_MINUS:{this.state=me.COMMENT_START_DASH;break}case de.GREATER_THAN_SIGN:{this._err(et.abruptClosingOfEmptyComment),this.state=me.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=me.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case de.HYPHEN_MINUS:{this.state=me.COMMENT_END;break}case de.GREATER_THAN_SIGN:{this._err(et.abruptClosingOfEmptyComment),this.state=me.DATA,this.emitCurrentComment(n);break}case de.EOF:{this._err(et.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=me.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case de.HYPHEN_MINUS:{this.state=me.COMMENT_END_DASH;break}case de.LESS_THAN_SIGN:{n.data+="<",this.state=me.COMMENT_LESS_THAN_SIGN;break}case de.NULL:{this._err(et.unexpectedNullCharacter),n.data+=Is;break}case de.EOF:{this._err(et.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case de.EXCLAMATION_MARK:{n.data+="!",this.state=me.COMMENT_LESS_THAN_SIGN_BANG;break}case de.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=me.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===de.HYPHEN_MINUS?this.state=me.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=me.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===de.HYPHEN_MINUS?this.state=me.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=me.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==de.GREATER_THAN_SIGN&&t!==de.EOF&&this._err(et.nestedComment),this.state=me.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case de.HYPHEN_MINUS:{this.state=me.COMMENT_END;break}case de.EOF:{this._err(et.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=me.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case de.GREATER_THAN_SIGN:{this.state=me.DATA,this.emitCurrentComment(n);break}case de.EXCLAMATION_MARK:{this.state=me.COMMENT_END_BANG;break}case de.HYPHEN_MINUS:{n.data+="-";break}case de.EOF:{this._err(et.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=me.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case de.HYPHEN_MINUS:{n.data+="--!",this.state=me.COMMENT_END_DASH;break}case de.GREATER_THAN_SIGN:{this._err(et.incorrectlyClosedComment),this.state=me.DATA,this.emitCurrentComment(n);break}case de.EOF:{this._err(et.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=me.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this.state=me.BEFORE_DOCTYPE_NAME;break}case de.GREATER_THAN_SIGN:{this.state=me.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case de.EOF:{this._err(et.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.missingWhitespaceBeforeDoctypeName),this.state=me.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(MR(t))this._createDoctypeToken(String.fromCharCode(M4(t))),this.state=me.DOCTYPE_NAME;else switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.NULL:{this._err(et.unexpectedNullCharacter),this._createDoctypeToken(Is),this.state=me.DOCTYPE_NAME;break}case de.GREATER_THAN_SIGN:{this._err(et.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=me.DATA;break}case de.EOF:{this._err(et.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=me.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this.state=me.AFTER_DOCTYPE_NAME;break}case de.GREATER_THAN_SIGN:{this.state=me.DATA,this.emitCurrentDoctype(n);break}case de.NULL:{this._err(et.unexpectedNullCharacter),n.name+=Is;break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(MR(t)?M4(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.GREATER_THAN_SIGN:{this.state=me.DATA,this.emitCurrentDoctype(n);break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Ic.PUBLIC,!1)?this.state=me.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Ic.SYSTEM,!1)?this.state=me.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(et.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=me.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this.state=me.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case de.QUOTATION_MARK:{this._err(et.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=me.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case de.APOSTROPHE:{this._err(et.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=me.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case de.GREATER_THAN_SIGN:{this._err(et.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=me.DATA,this.emitCurrentDoctype(n);break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=me.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.QUOTATION_MARK:{n.publicId="",this.state=me.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case de.APOSTROPHE:{n.publicId="",this.state=me.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case de.GREATER_THAN_SIGN:{this._err(et.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=me.DATA,this.emitCurrentDoctype(n);break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=me.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case de.QUOTATION_MARK:{this.state=me.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case de.NULL:{this._err(et.unexpectedNullCharacter),n.publicId+=Is;break}case de.GREATER_THAN_SIGN:{this._err(et.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=me.DATA;break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case de.APOSTROPHE:{this.state=me.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case de.NULL:{this._err(et.unexpectedNullCharacter),n.publicId+=Is;break}case de.GREATER_THAN_SIGN:{this._err(et.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=me.DATA;break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this.state=me.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case de.GREATER_THAN_SIGN:{this.state=me.DATA,this.emitCurrentDoctype(n);break}case de.QUOTATION_MARK:{this._err(et.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=me.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case de.APOSTROPHE:{this._err(et.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=me.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=me.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=me.DATA;break}case de.QUOTATION_MARK:{n.systemId="",this.state=me.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case de.APOSTROPHE:{n.systemId="",this.state=me.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=me.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this.state=me.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case de.QUOTATION_MARK:{this._err(et.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=me.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case de.APOSTROPHE:{this._err(et.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=me.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case de.GREATER_THAN_SIGN:{this._err(et.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=me.DATA,this.emitCurrentDoctype(n);break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=me.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.QUOTATION_MARK:{n.systemId="",this.state=me.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case de.APOSTROPHE:{n.systemId="",this.state=me.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case de.GREATER_THAN_SIGN:{this._err(et.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=me.DATA,this.emitCurrentDoctype(n);break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=me.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case de.QUOTATION_MARK:{this.state=me.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case de.NULL:{this._err(et.unexpectedNullCharacter),n.systemId+=Is;break}case de.GREATER_THAN_SIGN:{this._err(et.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=me.DATA;break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case de.APOSTROPHE:{this.state=me.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case de.NULL:{this._err(et.unexpectedNullCharacter),n.systemId+=Is;break}case de.GREATER_THAN_SIGN:{this._err(et.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=me.DATA;break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=me.DATA;break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=me.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case de.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=me.DATA;break}case de.NULL:{this._err(et.unexpectedNullCharacter);break}case de.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case de.RIGHT_SQUARE_BRACKET:{this.state=me.CDATA_SECTION_BRACKET;break}case de.EOF:{this._err(et.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===de.RIGHT_SQUARE_BRACKET?this.state=me.CDATA_SECTION_END:(this._emitChars("]"),this.state=me.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case de.GREATER_THAN_SIGN:{this.state=me.DATA;break}case de.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=me.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===de.NUMBER_SIGN?this.state=me.NUMERIC_CHARACTER_REFERENCE:_W(t)?(this.state=me.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(de.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(de.AMPERSAND),this.state=me.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){_W(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===de.SEMICOLON&&this._err(et.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===de.LATIN_SMALL_X||t===de.LATIN_CAPITAL_X?this.state=me.HEXADEMICAL_CHARACTER_REFERENCE_START:IN(t)?(this.state=me.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(et.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(de.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(de.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){Kit(t)?(this.state=me.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(et.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(de.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(de.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){nSe(t)?this.charRefCode=this.charRefCode*16+t-55:rSe(t)?this.charRefCode=this.charRefCode*16+t-87:IN(t)?this.charRefCode=this.charRefCode*16+t-48:t===de.SEMICOLON?this.state=me.NUMERIC_CHARACTER_REFERENCE_END:(this._err(et.missingSemicolonAfterCharacterReference),this.state=me.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){IN(t)?this.charRefCode=this.charRefCode*10+t-48:t===de.SEMICOLON?this.state=me.NUMERIC_CHARACTER_REFERENCE_END:(this._err(et.missingSemicolonAfterCharacterReference),this.state=me.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===de.NULL)this._err(et.nullCharacterReference),this.charRefCode=de.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(et.characterReferenceOutsideUnicodeRange),this.charRefCode=de.REPLACEMENT_CHARACTER;else if(KTe(this.charRefCode))this._err(et.surrogateCharacterReference),this.charRefCode=de.REPLACEMENT_CHARACTER;else if(QTe(this.charRefCode))this._err(et.noncharacterCharacterReference);else if(XTe(this.charRefCode)||this.charRefCode===de.CARRIAGE_RETURN){this._err(et.controlCharacterReference);const n=Git.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const sSe=new Set([B.DD,B.DT,B.LI,B.OPTGROUP,B.OPTION,B.P,B.RB,B.RP,B.RT,B.RTC]),$ce=new Set([...sSe,B.CAPTION,B.COLGROUP,B.TBODY,B.TD,B.TFOOT,B.TH,B.THEAD,B.TR]),L4=new Map([[B.APPLET,lt.HTML],[B.CAPTION,lt.HTML],[B.HTML,lt.HTML],[B.MARQUEE,lt.HTML],[B.OBJECT,lt.HTML],[B.TABLE,lt.HTML],[B.TD,lt.HTML],[B.TEMPLATE,lt.HTML],[B.TH,lt.HTML],[B.ANNOTATION_XML,lt.MATHML],[B.MI,lt.MATHML],[B.MN,lt.MATHML],[B.MO,lt.MATHML],[B.MS,lt.MATHML],[B.MTEXT,lt.MATHML],[B.DESC,lt.SVG],[B.FOREIGN_OBJECT,lt.SVG],[B.TITLE,lt.SVG]]),Jit=[B.H1,B.H2,B.H3,B.H4,B.H5,B.H6],Zit=[B.TR,B.TEMPLATE,B.HTML],est=[B.TBODY,B.TFOOT,B.THEAD,B.TEMPLATE,B.HTML],tst=[B.TABLE,B.TEMPLATE,B.HTML],nst=[B.TD,B.TH];class rst{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=B.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===B.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===lt.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==lt.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(Jit,lt.HTML)}popUntilTableCellPopped(){this.popUntilPopped(nst,lt.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(tst,lt.HTML)}clearBackToTableBodyContext(){this.clearBackTo(est,lt.HTML)}clearBackToTableRowContext(){this.clearBackTo(Zit,lt.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===B.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===B.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===lt.HTML)return!0;if(L4.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(tSe(n)&&r===lt.HTML)return!0;if(L4.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===lt.HTML)return!0;if((r===B.UL||r===B.OL)&&i===lt.HTML||L4.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===lt.HTML)return!0;if(r===B.BUTTON&&i===lt.HTML||L4.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===lt.HTML){if(r===t)return!0;if(r===B.TABLE||r===B.TEMPLATE||r===B.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===lt.HTML){if(n===B.TBODY||n===B.THEAD||n===B.TFOOT)return!0;if(n===B.TABLE||n===B.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===lt.HTML){if(r===t)return!0;if(r!==B.OPTION&&r!==B.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;sSe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;$ce.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&$ce.has(this.currentTagId);)this.pop()}}const Sz=3;var cp;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(cp=cp||(cp={}));const Fce={type:cp.Marker};class ist{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===cp.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<Sz)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<Sz)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=Sz&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(Fce)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:cp.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:cp.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(Fce);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===cp.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===cp.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===cp.Element&&n.element===t)}}function Bce(e){return{nodeName:"#text",value:e,parentNode:null}}const ZS={createDocument(){return{nodeName:"#document",mode:Uf.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};ZS.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(ZS.isTextNode(n)){n.value+=t;return}}ZS.appendChild(e,Bce(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&ZS.isTextNode(r)?r.value+=t:ZS.insertBefore(e,Bce(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},oSe="html",sst="about:legacy-compat",ost="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",aSe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],ast=[...aSe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],ust=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),uSe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],lst=[...uSe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function jce(e,t){return t.some(n=>e.startsWith(n))}function cst(e){return e.name===oSe&&e.publicId===null&&(e.systemId===null||e.systemId===sst)}function fst(e){if(e.name!==oSe)return Uf.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===ost)return Uf.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),ust.has(n))return Uf.QUIRKS;let r=t===null?ast:aSe;if(jce(n,r))return Uf.QUIRKS;if(r=t===null?uSe:lst,jce(n,r))return Uf.LIMITED_QUIRKS}return Uf.NO_QUIRKS}const Uce={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},dst="definitionurl",hst="definitionURL",pst=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),mst=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:lt.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:lt.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:lt.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:lt.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:lt.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:lt.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:lt.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:lt.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:lt.XML}],["xml:space",{prefix:"xml",name:"space",namespace:lt.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:lt.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:lt.XMLNS}]]),gst=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),yst=new Set([B.B,B.BIG,B.BLOCKQUOTE,B.BODY,B.BR,B.CENTER,B.CODE,B.DD,B.DIV,B.DL,B.DT,B.EM,B.EMBED,B.H1,B.H2,B.H3,B.H4,B.H5,B.H6,B.HEAD,B.HR,B.I,B.IMG,B.LI,B.LISTING,B.MENU,B.META,B.NOBR,B.OL,B.P,B.PRE,B.RUBY,B.S,B.SMALL,B.SPAN,B.STRONG,B.STRIKE,B.SUB,B.SUP,B.TABLE,B.TT,B.U,B.UL,B.VAR]);function vst(e){const t=e.tagID;return t===B.FONT&&e.attrs.some(({name:r})=>r===ob.COLOR||r===ob.SIZE||r===ob.FACE)||yst.has(t)}function lSe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===dst){e.attrs[t].name=hst;break}}function cSe(e){for(let t=0;t<e.attrs.length;t++){const n=pst.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function ZJ(e){for(let t=0;t<e.attrs.length;t++){const n=mst.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function bst(e){const t=gst.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=OA(e.tagName))}function xst(e,t){return t===lt.MATHML&&(e===B.MI||e===B.MO||e===B.MN||e===B.MS||e===B.MTEXT)}function _st(e,t,n){if(t===lt.MATHML&&e===B.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===ob.ENCODING){const i=n[r].value.toLowerCase();return i===Uce.TEXT_HTML||i===Uce.APPLICATION_XML}}return t===lt.SVG&&(e===B.FOREIGN_OBJECT||e===B.DESC||e===B.TITLE)}function wst(e,t,n,r){return(!r||r===lt.HTML)&&_st(e,t,n)||(!r||r===lt.MATHML)&&xst(e,t)}const Est="hidden",Tst=8,Sst=3;var Ee;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(Ee||(Ee={}));const Cst={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},fSe=new Set([B.TABLE,B.TBODY,B.TFOOT,B.THEAD,B.TR]),zce={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:ZS,onParseError:null};let Vce=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=Ee.INITIAL,this.originalInsertionMode=Ee.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...zce,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new Qit(this.options,this),this.activeFormattingElements=new ist(this.treeAdapter),this.fragmentContextID=r?OA(this.treeAdapter.getTagName(r)):B.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new rst(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...zce,...n};t??(t=r.treeAdapter.createElement(He.TEMPLATE,lt.HTML,[]));const i=r.treeAdapter.createElement("documentmock",lt.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===B.TEMPLATE&&s.tmplInsertionModeStack.unshift(Ee.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:Cst,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===lt.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,lt.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=Ee.TEXT}switchToPlaintextParsing(){this.insertionMode=Ee.TEXT,this.originalInsertionMode=Ee.IN_BODY,this.tokenizer.state=So.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===He.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==lt.HTML))switch(this.fragmentContextID){case B.TITLE:case B.TEXTAREA:{this.tokenizer.state=So.RCDATA;break}case B.STYLE:case B.XMP:case B.IFRAME:case B.NOEMBED:case B.NOFRAMES:case B.NOSCRIPT:{this.tokenizer.state=So.RAWTEXT;break}case B.SCRIPT:{this.tokenizer.state=So.SCRIPT_DATA;break}case B.PLAINTEXT:{this.tokenizer.state=So.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,lt.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,lt.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(He.HTML,lt.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,B.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===wr.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===B.SVG&&this.treeAdapter.getTagName(n)===He.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===lt.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===B.MGLYPH||t.tagID===B.MALIGNMARK)&&!this._isIntegrationPoint(r,n,lt.HTML)}_processToken(t){switch(t.type){case wr.CHARACTER:{this.onCharacter(t);break}case wr.NULL_CHARACTER:{this.onNullCharacter(t);break}case wr.COMMENT:{this.onComment(t);break}case wr.DOCTYPE:{this.onDoctype(t);break}case wr.START_TAG:{this._processStartTag(t);break}case wr.END_TAG:{this.onEndTag(t);break}case wr.EOF:{this.onEof(t);break}case wr.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return wst(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===cp.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=Ee.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(B.P),this.openElements.popUntilTagNamePopped(B.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case B.TR:{this.insertionMode=Ee.IN_ROW;return}case B.TBODY:case B.THEAD:case B.TFOOT:{this.insertionMode=Ee.IN_TABLE_BODY;return}case B.CAPTION:{this.insertionMode=Ee.IN_CAPTION;return}case B.COLGROUP:{this.insertionMode=Ee.IN_COLUMN_GROUP;return}case B.TABLE:{this.insertionMode=Ee.IN_TABLE;return}case B.BODY:{this.insertionMode=Ee.IN_BODY;return}case B.FRAMESET:{this.insertionMode=Ee.IN_FRAMESET;return}case B.SELECT:{this._resetInsertionModeForSelect(t);return}case B.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case B.HTML:{this.insertionMode=this.headElement?Ee.AFTER_HEAD:Ee.BEFORE_HEAD;return}case B.TD:case B.TH:{if(t>0){this.insertionMode=Ee.IN_CELL;return}break}case B.HEAD:{if(t>0){this.insertionMode=Ee.IN_HEAD;return}break}}this.insertionMode=Ee.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===B.TEMPLATE)break;if(r===B.TABLE){this.insertionMode=Ee.IN_SELECT_IN_TABLE;return}}this.insertionMode=Ee.IN_SELECT}_isElementCausesFosterParenting(t){return fSe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case B.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===lt.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case B.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return Wit[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){nat(this,t);return}switch(this.insertionMode){case Ee.INITIAL:{qk(this,t);break}case Ee.BEFORE_HTML:{kN(this,t);break}case Ee.BEFORE_HEAD:{RN(this,t);break}case Ee.IN_HEAD:{NN(this,t);break}case Ee.IN_HEAD_NO_SCRIPT:{DN(this,t);break}case Ee.AFTER_HEAD:{PN(this,t);break}case Ee.IN_BODY:case Ee.IN_CAPTION:case Ee.IN_CELL:case Ee.IN_TEMPLATE:{hSe(this,t);break}case Ee.TEXT:case Ee.IN_SELECT:case Ee.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case Ee.IN_TABLE:case Ee.IN_TABLE_BODY:case Ee.IN_ROW:{Cz(this,t);break}case Ee.IN_TABLE_TEXT:{bSe(this,t);break}case Ee.IN_COLUMN_GROUP:{W$(this,t);break}case Ee.AFTER_BODY:{G$(this,t);break}case Ee.AFTER_AFTER_BODY:{YM(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){tat(this,t);return}switch(this.insertionMode){case Ee.INITIAL:{qk(this,t);break}case Ee.BEFORE_HTML:{kN(this,t);break}case Ee.BEFORE_HEAD:{RN(this,t);break}case Ee.IN_HEAD:{NN(this,t);break}case Ee.IN_HEAD_NO_SCRIPT:{DN(this,t);break}case Ee.AFTER_HEAD:{PN(this,t);break}case Ee.TEXT:{this._insertCharacters(t);break}case Ee.IN_TABLE:case Ee.IN_TABLE_BODY:case Ee.IN_ROW:{Cz(this,t);break}case Ee.IN_COLUMN_GROUP:{W$(this,t);break}case Ee.AFTER_BODY:{G$(this,t);break}case Ee.AFTER_AFTER_BODY:{YM(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){wW(this,t);return}switch(this.insertionMode){case Ee.INITIAL:case Ee.BEFORE_HTML:case Ee.BEFORE_HEAD:case Ee.IN_HEAD:case Ee.IN_HEAD_NO_SCRIPT:case Ee.AFTER_HEAD:case Ee.IN_BODY:case Ee.IN_TABLE:case Ee.IN_CAPTION:case Ee.IN_COLUMN_GROUP:case Ee.IN_TABLE_BODY:case Ee.IN_ROW:case Ee.IN_CELL:case Ee.IN_SELECT:case Ee.IN_SELECT_IN_TABLE:case Ee.IN_TEMPLATE:case Ee.IN_FRAMESET:case Ee.AFTER_FRAMESET:{wW(this,t);break}case Ee.IN_TABLE_TEXT:{Wk(this,t);break}case Ee.AFTER_BODY:{Pst(this,t);break}case Ee.AFTER_AFTER_BODY:case Ee.AFTER_AFTER_FRAMESET:{Ost(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case Ee.INITIAL:{Mst(this,t);break}case Ee.BEFORE_HEAD:case Ee.IN_HEAD:case Ee.IN_HEAD_NO_SCRIPT:case Ee.AFTER_HEAD:{this._err(t,et.misplacedDoctype);break}case Ee.IN_TABLE_TEXT:{Wk(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,et.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?rat(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case Ee.INITIAL:{qk(this,t);break}case Ee.BEFORE_HTML:{Lst(this,t);break}case Ee.BEFORE_HEAD:{Fst(this,t);break}case Ee.IN_HEAD:{Qp(this,t);break}case Ee.IN_HEAD_NO_SCRIPT:{Ust(this,t);break}case Ee.AFTER_HEAD:{Vst(this,t);break}case Ee.IN_BODY:{gl(this,t);break}case Ee.IN_TABLE:{lC(this,t);break}case Ee.IN_TABLE_TEXT:{Wk(this,t);break}case Ee.IN_CAPTION:{Bot(this,t);break}case Ee.IN_COLUMN_GROUP:{nZ(this,t);break}case Ee.IN_TABLE_BODY:{IB(this,t);break}case Ee.IN_ROW:{kB(this,t);break}case Ee.IN_CELL:{zot(this,t);break}case Ee.IN_SELECT:{wSe(this,t);break}case Ee.IN_SELECT_IN_TABLE:{Hot(this,t);break}case Ee.IN_TEMPLATE:{Wot(this,t);break}case Ee.AFTER_BODY:{Yot(this,t);break}case Ee.IN_FRAMESET:{Kot(this,t);break}case Ee.AFTER_FRAMESET:{Qot(this,t);break}case Ee.AFTER_AFTER_BODY:{Zot(this,t);break}case Ee.AFTER_AFTER_FRAMESET:{eat(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?iat(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case Ee.INITIAL:{qk(this,t);break}case Ee.BEFORE_HTML:{$st(this,t);break}case Ee.BEFORE_HEAD:{Bst(this,t);break}case Ee.IN_HEAD:{jst(this,t);break}case Ee.IN_HEAD_NO_SCRIPT:{zst(this,t);break}case Ee.AFTER_HEAD:{Hst(this,t);break}case Ee.IN_BODY:{AB(this,t);break}case Ee.TEXT:{kot(this,t);break}case Ee.IN_TABLE:{gD(this,t);break}case Ee.IN_TABLE_TEXT:{Wk(this,t);break}case Ee.IN_CAPTION:{jot(this,t);break}case Ee.IN_COLUMN_GROUP:{Uot(this,t);break}case Ee.IN_TABLE_BODY:{EW(this,t);break}case Ee.IN_ROW:{_Se(this,t);break}case Ee.IN_CELL:{Vot(this,t);break}case Ee.IN_SELECT:{ESe(this,t);break}case Ee.IN_SELECT_IN_TABLE:{qot(this,t);break}case Ee.IN_TEMPLATE:{Got(this,t);break}case Ee.AFTER_BODY:{SSe(this,t);break}case Ee.IN_FRAMESET:{Xot(this,t);break}case Ee.AFTER_FRAMESET:{Jot(this,t);break}case Ee.AFTER_AFTER_BODY:{YM(this,t);break}}}onEof(t){switch(this.insertionMode){case Ee.INITIAL:{qk(this,t);break}case Ee.BEFORE_HTML:{kN(this,t);break}case Ee.BEFORE_HEAD:{RN(this,t);break}case Ee.IN_HEAD:{NN(this,t);break}case Ee.IN_HEAD_NO_SCRIPT:{DN(this,t);break}case Ee.AFTER_HEAD:{PN(this,t);break}case Ee.IN_BODY:case Ee.IN_TABLE:case Ee.IN_CAPTION:case Ee.IN_COLUMN_GROUP:case Ee.IN_TABLE_BODY:case Ee.IN_ROW:case Ee.IN_CELL:case Ee.IN_SELECT:case Ee.IN_SELECT_IN_TABLE:{ySe(this,t);break}case Ee.TEXT:{Rot(this,t);break}case Ee.IN_TABLE_TEXT:{Wk(this,t);break}case Ee.IN_TEMPLATE:{TSe(this,t);break}case Ee.AFTER_BODY:case Ee.IN_FRAMESET:case Ee.AFTER_FRAMESET:case Ee.AFTER_AFTER_BODY:case Ee.AFTER_AFTER_FRAMESET:{tZ(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===de.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case Ee.IN_HEAD:case Ee.IN_HEAD_NO_SCRIPT:case Ee.AFTER_HEAD:case Ee.TEXT:case Ee.IN_COLUMN_GROUP:case Ee.IN_SELECT:case Ee.IN_SELECT_IN_TABLE:case Ee.IN_FRAMESET:case Ee.AFTER_FRAMESET:{this._insertCharacters(t);break}case Ee.IN_BODY:case Ee.IN_CAPTION:case Ee.IN_CELL:case Ee.IN_TEMPLATE:case Ee.AFTER_BODY:case Ee.AFTER_AFTER_BODY:case Ee.AFTER_AFTER_FRAMESET:{dSe(this,t);break}case Ee.IN_TABLE:case Ee.IN_TABLE_BODY:case Ee.IN_ROW:{Cz(this,t);break}case Ee.IN_TABLE_TEXT:{vSe(this,t);break}}}};function Ast(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):gSe(e,t),n}function Ist(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function kst(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=Sst;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=Rst(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function Rst(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function Nst(e,t,n){const r=e.treeAdapter.getTagName(t),i=OA(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===B.TEMPLATE&&s===lt.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function Dst(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function eZ(e,t){for(let n=0;n<Tst;n++){const r=Ast(e,t);if(!r)break;const i=Ist(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=kst(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&Nst(e,o,s),Dst(e,i,r)}}function wW(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function Pst(e,t){e._appendCommentNode(t,e.openElements.items[0])}function Ost(e,t){e._appendCommentNode(t,e.document)}function tZ(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function Mst(e,t){e._setDocumentType(t);const n=t.forceQuirks?Uf.QUIRKS:fst(t);cst(t)||e._err(t,et.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=Ee.BEFORE_HTML}function qk(e,t){e._err(t,et.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,Uf.QUIRKS),e.insertionMode=Ee.BEFORE_HTML,e._processToken(t)}function Lst(e,t){t.tagID===B.HTML?(e._insertElement(t,lt.HTML),e.insertionMode=Ee.BEFORE_HEAD):kN(e,t)}function $st(e,t){const n=t.tagID;(n===B.HTML||n===B.HEAD||n===B.BODY||n===B.BR)&&kN(e,t)}function kN(e,t){e._insertFakeRootElement(),e.insertionMode=Ee.BEFORE_HEAD,e._processToken(t)}function Fst(e,t){switch(t.tagID){case B.HTML:{gl(e,t);break}case B.HEAD:{e._insertElement(t,lt.HTML),e.headElement=e.openElements.current,e.insertionMode=Ee.IN_HEAD;break}default:RN(e,t)}}function Bst(e,t){const n=t.tagID;n===B.HEAD||n===B.BODY||n===B.HTML||n===B.BR?RN(e,t):e._err(t,et.endTagWithoutMatchingOpenElement)}function RN(e,t){e._insertFakeElement(He.HEAD,B.HEAD),e.headElement=e.openElements.current,e.insertionMode=Ee.IN_HEAD,e._processToken(t)}function Qp(e,t){switch(t.tagID){case B.HTML:{gl(e,t);break}case B.BASE:case B.BASEFONT:case B.BGSOUND:case B.LINK:case B.META:{e._appendElement(t,lt.HTML),t.ackSelfClosing=!0;break}case B.TITLE:{e._switchToTextParsing(t,So.RCDATA);break}case B.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,So.RAWTEXT):(e._insertElement(t,lt.HTML),e.insertionMode=Ee.IN_HEAD_NO_SCRIPT);break}case B.NOFRAMES:case B.STYLE:{e._switchToTextParsing(t,So.RAWTEXT);break}case B.SCRIPT:{e._switchToTextParsing(t,So.SCRIPT_DATA);break}case B.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=Ee.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(Ee.IN_TEMPLATE);break}case B.HEAD:{e._err(t,et.misplacedStartTagForHeadElement);break}default:NN(e,t)}}function jst(e,t){switch(t.tagID){case B.HEAD:{e.openElements.pop(),e.insertionMode=Ee.AFTER_HEAD;break}case B.BODY:case B.BR:case B.HTML:{NN(e,t);break}case B.TEMPLATE:{PE(e,t);break}default:e._err(t,et.endTagWithoutMatchingOpenElement)}}function PE(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==B.TEMPLATE&&e._err(t,et.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(B.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,et.endTagWithoutMatchingOpenElement)}function NN(e,t){e.openElements.pop(),e.insertionMode=Ee.AFTER_HEAD,e._processToken(t)}function Ust(e,t){switch(t.tagID){case B.HTML:{gl(e,t);break}case B.BASEFONT:case B.BGSOUND:case B.HEAD:case B.LINK:case B.META:case B.NOFRAMES:case B.STYLE:{Qp(e,t);break}case B.NOSCRIPT:{e._err(t,et.nestedNoscriptInHead);break}default:DN(e,t)}}function zst(e,t){switch(t.tagID){case B.NOSCRIPT:{e.openElements.pop(),e.insertionMode=Ee.IN_HEAD;break}case B.BR:{DN(e,t);break}default:e._err(t,et.endTagWithoutMatchingOpenElement)}}function DN(e,t){const n=t.type===wr.EOF?et.openElementsLeftAfterEof:et.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=Ee.IN_HEAD,e._processToken(t)}function Vst(e,t){switch(t.tagID){case B.HTML:{gl(e,t);break}case B.BODY:{e._insertElement(t,lt.HTML),e.framesetOk=!1,e.insertionMode=Ee.IN_BODY;break}case B.FRAMESET:{e._insertElement(t,lt.HTML),e.insertionMode=Ee.IN_FRAMESET;break}case B.BASE:case B.BASEFONT:case B.BGSOUND:case B.LINK:case B.META:case B.NOFRAMES:case B.SCRIPT:case B.STYLE:case B.TEMPLATE:case B.TITLE:{e._err(t,et.abandonedHeadElementChild),e.openElements.push(e.headElement,B.HEAD),Qp(e,t),e.openElements.remove(e.headElement);break}case B.HEAD:{e._err(t,et.misplacedStartTagForHeadElement);break}default:PN(e,t)}}function Hst(e,t){switch(t.tagID){case B.BODY:case B.HTML:case B.BR:{PN(e,t);break}case B.TEMPLATE:{PE(e,t);break}default:e._err(t,et.endTagWithoutMatchingOpenElement)}}function PN(e,t){e._insertFakeElement(He.BODY,B.BODY),e.insertionMode=Ee.IN_BODY,CB(e,t)}function CB(e,t){switch(t.type){case wr.CHARACTER:{hSe(e,t);break}case wr.WHITESPACE_CHARACTER:{dSe(e,t);break}case wr.COMMENT:{wW(e,t);break}case wr.START_TAG:{gl(e,t);break}case wr.END_TAG:{AB(e,t);break}case wr.EOF:{ySe(e,t);break}}}function dSe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function hSe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function qst(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function Wst(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function Gst(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,lt.HTML),e.insertionMode=Ee.IN_FRAMESET)}function Yst(e,t){e.openElements.hasInButtonScope(B.P)&&e._closePElement(),e._insertElement(t,lt.HTML)}function Kst(e,t){e.openElements.hasInButtonScope(B.P)&&e._closePElement(),tSe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,lt.HTML)}function Xst(e,t){e.openElements.hasInButtonScope(B.P)&&e._closePElement(),e._insertElement(t,lt.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function Qst(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(B.P)&&e._closePElement(),e._insertElement(t,lt.HTML),n||(e.formElement=e.openElements.current))}function Jst(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===B.LI&&i===B.LI||(n===B.DD||n===B.DT)&&(i===B.DD||i===B.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==B.ADDRESS&&i!==B.DIV&&i!==B.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(B.P)&&e._closePElement(),e._insertElement(t,lt.HTML)}function Zst(e,t){e.openElements.hasInButtonScope(B.P)&&e._closePElement(),e._insertElement(t,lt.HTML),e.tokenizer.state=So.PLAINTEXT}function eot(e,t){e.openElements.hasInScope(B.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(B.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,lt.HTML),e.framesetOk=!1}function tot(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(He.A);n&&(eZ(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,lt.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function not(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,lt.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function rot(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(B.NOBR)&&(eZ(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,lt.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function iot(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,lt.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function sot(e,t){e.treeAdapter.getDocumentMode(e.document)!==Uf.QUIRKS&&e.openElements.hasInButtonScope(B.P)&&e._closePElement(),e._insertElement(t,lt.HTML),e.framesetOk=!1,e.insertionMode=Ee.IN_TABLE}function pSe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,lt.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function mSe(e){const t=JTe(e,ob.TYPE);return t!=null&&t.toLowerCase()===Est}function oot(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,lt.HTML),mSe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function aot(e,t){e._appendElement(t,lt.HTML),t.ackSelfClosing=!0}function uot(e,t){e.openElements.hasInButtonScope(B.P)&&e._closePElement(),e._appendElement(t,lt.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function lot(e,t){t.tagName=He.IMG,t.tagID=B.IMG,pSe(e,t)}function cot(e,t){e._insertElement(t,lt.HTML),e.skipNextNewLine=!0,e.tokenizer.state=So.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=Ee.TEXT}function fot(e,t){e.openElements.hasInButtonScope(B.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,So.RAWTEXT)}function dot(e,t){e.framesetOk=!1,e._switchToTextParsing(t,So.RAWTEXT)}function Hce(e,t){e._switchToTextParsing(t,So.RAWTEXT)}function hot(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,lt.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===Ee.IN_TABLE||e.insertionMode===Ee.IN_CAPTION||e.insertionMode===Ee.IN_TABLE_BODY||e.insertionMode===Ee.IN_ROW||e.insertionMode===Ee.IN_CELL?Ee.IN_SELECT_IN_TABLE:Ee.IN_SELECT}function pot(e,t){e.openElements.currentTagId===B.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,lt.HTML)}function mot(e,t){e.openElements.hasInScope(B.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,lt.HTML)}function got(e,t){e.openElements.hasInScope(B.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(B.RTC),e._insertElement(t,lt.HTML)}function yot(e,t){e._reconstructActiveFormattingElements(),lSe(t),ZJ(t),t.selfClosing?e._appendElement(t,lt.MATHML):e._insertElement(t,lt.MATHML),t.ackSelfClosing=!0}function vot(e,t){e._reconstructActiveFormattingElements(),cSe(t),ZJ(t),t.selfClosing?e._appendElement(t,lt.SVG):e._insertElement(t,lt.SVG),t.ackSelfClosing=!0}function qce(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,lt.HTML)}function gl(e,t){switch(t.tagID){case B.I:case B.S:case B.B:case B.U:case B.EM:case B.TT:case B.BIG:case B.CODE:case B.FONT:case B.SMALL:case B.STRIKE:case B.STRONG:{not(e,t);break}case B.A:{tot(e,t);break}case B.H1:case B.H2:case B.H3:case B.H4:case B.H5:case B.H6:{Kst(e,t);break}case B.P:case B.DL:case B.OL:case B.UL:case B.DIV:case B.DIR:case B.NAV:case B.MAIN:case B.MENU:case B.ASIDE:case B.CENTER:case B.FIGURE:case B.FOOTER:case B.HEADER:case B.HGROUP:case B.DIALOG:case B.DETAILS:case B.ADDRESS:case B.ARTICLE:case B.SECTION:case B.SUMMARY:case B.FIELDSET:case B.BLOCKQUOTE:case B.FIGCAPTION:{Yst(e,t);break}case B.LI:case B.DD:case B.DT:{Jst(e,t);break}case B.BR:case B.IMG:case B.WBR:case B.AREA:case B.EMBED:case B.KEYGEN:{pSe(e,t);break}case B.HR:{uot(e,t);break}case B.RB:case B.RTC:{mot(e,t);break}case B.RT:case B.RP:{got(e,t);break}case B.PRE:case B.LISTING:{Xst(e,t);break}case B.XMP:{fot(e,t);break}case B.SVG:{vot(e,t);break}case B.HTML:{qst(e,t);break}case B.BASE:case B.LINK:case B.META:case B.STYLE:case B.TITLE:case B.SCRIPT:case B.BGSOUND:case B.BASEFONT:case B.TEMPLATE:{Qp(e,t);break}case B.BODY:{Wst(e,t);break}case B.FORM:{Qst(e,t);break}case B.NOBR:{rot(e,t);break}case B.MATH:{yot(e,t);break}case B.TABLE:{sot(e,t);break}case B.INPUT:{oot(e,t);break}case B.PARAM:case B.TRACK:case B.SOURCE:{aot(e,t);break}case B.IMAGE:{lot(e,t);break}case B.BUTTON:{eot(e,t);break}case B.APPLET:case B.OBJECT:case B.MARQUEE:{iot(e,t);break}case B.IFRAME:{dot(e,t);break}case B.SELECT:{hot(e,t);break}case B.OPTION:case B.OPTGROUP:{pot(e,t);break}case B.NOEMBED:{Hce(e,t);break}case B.FRAMESET:{Gst(e,t);break}case B.TEXTAREA:{cot(e,t);break}case B.NOSCRIPT:{e.options.scriptingEnabled?Hce(e,t):qce(e,t);break}case B.PLAINTEXT:{Zst(e,t);break}case B.COL:case B.TH:case B.TD:case B.TR:case B.HEAD:case B.FRAME:case B.TBODY:case B.TFOOT:case B.THEAD:case B.CAPTION:case B.COLGROUP:break;default:qce(e,t)}}function bot(e,t){if(e.openElements.hasInScope(B.BODY)&&(e.insertionMode=Ee.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function xot(e,t){e.openElements.hasInScope(B.BODY)&&(e.insertionMode=Ee.AFTER_BODY,SSe(e,t))}function _ot(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function wot(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(B.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(B.FORM):n&&e.openElements.remove(n))}function Eot(e){e.openElements.hasInButtonScope(B.P)||e._insertFakeElement(He.P,B.P),e._closePElement()}function Tot(e){e.openElements.hasInListItemScope(B.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(B.LI),e.openElements.popUntilTagNamePopped(B.LI))}function Sot(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function Cot(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function Aot(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function Iot(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(He.BR,B.BR),e.openElements.pop(),e.framesetOk=!1}function gSe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==B.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function AB(e,t){switch(t.tagID){case B.A:case B.B:case B.I:case B.S:case B.U:case B.EM:case B.TT:case B.BIG:case B.CODE:case B.FONT:case B.NOBR:case B.SMALL:case B.STRIKE:case B.STRONG:{eZ(e,t);break}case B.P:{Eot(e);break}case B.DL:case B.UL:case B.OL:case B.DIR:case B.DIV:case B.NAV:case B.PRE:case B.MAIN:case B.MENU:case B.ASIDE:case B.BUTTON:case B.CENTER:case B.FIGURE:case B.FOOTER:case B.HEADER:case B.HGROUP:case B.DIALOG:case B.ADDRESS:case B.ARTICLE:case B.DETAILS:case B.SECTION:case B.SUMMARY:case B.LISTING:case B.FIELDSET:case B.BLOCKQUOTE:case B.FIGCAPTION:{_ot(e,t);break}case B.LI:{Tot(e);break}case B.DD:case B.DT:{Sot(e,t);break}case B.H1:case B.H2:case B.H3:case B.H4:case B.H5:case B.H6:{Cot(e);break}case B.BR:{Iot(e);break}case B.BODY:{bot(e,t);break}case B.HTML:{xot(e,t);break}case B.FORM:{wot(e);break}case B.APPLET:case B.OBJECT:case B.MARQUEE:{Aot(e,t);break}case B.TEMPLATE:{PE(e,t);break}default:gSe(e,t)}}function ySe(e,t){e.tmplInsertionModeStack.length>0?TSe(e,t):tZ(e,t)}function kot(e,t){var n;t.tagID===B.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function Rot(e,t){e._err(t,et.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function Cz(e,t){if(fSe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=Ee.IN_TABLE_TEXT,t.type){case wr.CHARACTER:{bSe(e,t);break}case wr.WHITESPACE_CHARACTER:{vSe(e,t);break}}else GP(e,t)}function Not(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,lt.HTML),e.insertionMode=Ee.IN_CAPTION}function Dot(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,lt.HTML),e.insertionMode=Ee.IN_COLUMN_GROUP}function Pot(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(He.COLGROUP,B.COLGROUP),e.insertionMode=Ee.IN_COLUMN_GROUP,nZ(e,t)}function Oot(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,lt.HTML),e.insertionMode=Ee.IN_TABLE_BODY}function Mot(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(He.TBODY,B.TBODY),e.insertionMode=Ee.IN_TABLE_BODY,IB(e,t)}function Lot(e,t){e.openElements.hasInTableScope(B.TABLE)&&(e.openElements.popUntilTagNamePopped(B.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function $ot(e,t){mSe(t)?e._appendElement(t,lt.HTML):GP(e,t),t.ackSelfClosing=!0}function Fot(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,lt.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function lC(e,t){switch(t.tagID){case B.TD:case B.TH:case B.TR:{Mot(e,t);break}case B.STYLE:case B.SCRIPT:case B.TEMPLATE:{Qp(e,t);break}case B.COL:{Pot(e,t);break}case B.FORM:{Fot(e,t);break}case B.TABLE:{Lot(e,t);break}case B.TBODY:case B.TFOOT:case B.THEAD:{Oot(e,t);break}case B.INPUT:{$ot(e,t);break}case B.CAPTION:{Not(e,t);break}case B.COLGROUP:{Dot(e,t);break}default:GP(e,t)}}function gD(e,t){switch(t.tagID){case B.TABLE:{e.openElements.hasInTableScope(B.TABLE)&&(e.openElements.popUntilTagNamePopped(B.TABLE),e._resetInsertionMode());break}case B.TEMPLATE:{PE(e,t);break}case B.BODY:case B.CAPTION:case B.COL:case B.COLGROUP:case B.HTML:case B.TBODY:case B.TD:case B.TFOOT:case B.TH:case B.THEAD:case B.TR:break;default:GP(e,t)}}function GP(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,CB(e,t),e.fosterParentingEnabled=n}function vSe(e,t){e.pendingCharacterTokens.push(t)}function bSe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function Wk(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)GP(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const xSe=new Set([B.CAPTION,B.COL,B.COLGROUP,B.TBODY,B.TD,B.TFOOT,B.TH,B.THEAD,B.TR]);function Bot(e,t){const n=t.tagID;xSe.has(n)?e.openElements.hasInTableScope(B.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(B.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Ee.IN_TABLE,lC(e,t)):gl(e,t)}function jot(e,t){const n=t.tagID;switch(n){case B.CAPTION:case B.TABLE:{e.openElements.hasInTableScope(B.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(B.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Ee.IN_TABLE,n===B.TABLE&&gD(e,t));break}case B.BODY:case B.COL:case B.COLGROUP:case B.HTML:case B.TBODY:case B.TD:case B.TFOOT:case B.TH:case B.THEAD:case B.TR:break;default:AB(e,t)}}function nZ(e,t){switch(t.tagID){case B.HTML:{gl(e,t);break}case B.COL:{e._appendElement(t,lt.HTML),t.ackSelfClosing=!0;break}case B.TEMPLATE:{Qp(e,t);break}default:W$(e,t)}}function Uot(e,t){switch(t.tagID){case B.COLGROUP:{e.openElements.currentTagId===B.COLGROUP&&(e.openElements.pop(),e.insertionMode=Ee.IN_TABLE);break}case B.TEMPLATE:{PE(e,t);break}case B.COL:break;default:W$(e,t)}}function W$(e,t){e.openElements.currentTagId===B.COLGROUP&&(e.openElements.pop(),e.insertionMode=Ee.IN_TABLE,e._processToken(t))}function IB(e,t){switch(t.tagID){case B.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,lt.HTML),e.insertionMode=Ee.IN_ROW;break}case B.TH:case B.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(He.TR,B.TR),e.insertionMode=Ee.IN_ROW,kB(e,t);break}case B.CAPTION:case B.COL:case B.COLGROUP:case B.TBODY:case B.TFOOT:case B.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Ee.IN_TABLE,lC(e,t));break}default:lC(e,t)}}function EW(e,t){const n=t.tagID;switch(t.tagID){case B.TBODY:case B.TFOOT:case B.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Ee.IN_TABLE);break}case B.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Ee.IN_TABLE,gD(e,t));break}case B.BODY:case B.CAPTION:case B.COL:case B.COLGROUP:case B.HTML:case B.TD:case B.TH:case B.TR:break;default:gD(e,t)}}function kB(e,t){switch(t.tagID){case B.TH:case B.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,lt.HTML),e.insertionMode=Ee.IN_CELL,e.activeFormattingElements.insertMarker();break}case B.CAPTION:case B.COL:case B.COLGROUP:case B.TBODY:case B.TFOOT:case B.THEAD:case B.TR:{e.openElements.hasInTableScope(B.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Ee.IN_TABLE_BODY,IB(e,t));break}default:lC(e,t)}}function _Se(e,t){switch(t.tagID){case B.TR:{e.openElements.hasInTableScope(B.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Ee.IN_TABLE_BODY);break}case B.TABLE:{e.openElements.hasInTableScope(B.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Ee.IN_TABLE_BODY,EW(e,t));break}case B.TBODY:case B.TFOOT:case B.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(B.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Ee.IN_TABLE_BODY,EW(e,t));break}case B.BODY:case B.CAPTION:case B.COL:case B.COLGROUP:case B.HTML:case B.TD:case B.TH:break;default:gD(e,t)}}function zot(e,t){const n=t.tagID;xSe.has(n)?(e.openElements.hasInTableScope(B.TD)||e.openElements.hasInTableScope(B.TH))&&(e._closeTableCell(),kB(e,t)):gl(e,t)}function Vot(e,t){const n=t.tagID;switch(n){case B.TD:case B.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Ee.IN_ROW);break}case B.TABLE:case B.TBODY:case B.TFOOT:case B.THEAD:case B.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),_Se(e,t));break}case B.BODY:case B.CAPTION:case B.COL:case B.COLGROUP:case B.HTML:break;default:AB(e,t)}}function wSe(e,t){switch(t.tagID){case B.HTML:{gl(e,t);break}case B.OPTION:{e.openElements.currentTagId===B.OPTION&&e.openElements.pop(),e._insertElement(t,lt.HTML);break}case B.OPTGROUP:{e.openElements.currentTagId===B.OPTION&&e.openElements.pop(),e.openElements.currentTagId===B.OPTGROUP&&e.openElements.pop(),e._insertElement(t,lt.HTML);break}case B.INPUT:case B.KEYGEN:case B.TEXTAREA:case B.SELECT:{e.openElements.hasInSelectScope(B.SELECT)&&(e.openElements.popUntilTagNamePopped(B.SELECT),e._resetInsertionMode(),t.tagID!==B.SELECT&&e._processStartTag(t));break}case B.SCRIPT:case B.TEMPLATE:{Qp(e,t);break}}}function ESe(e,t){switch(t.tagID){case B.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===B.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===B.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===B.OPTGROUP&&e.openElements.pop();break}case B.OPTION:{e.openElements.currentTagId===B.OPTION&&e.openElements.pop();break}case B.SELECT:{e.openElements.hasInSelectScope(B.SELECT)&&(e.openElements.popUntilTagNamePopped(B.SELECT),e._resetInsertionMode());break}case B.TEMPLATE:{PE(e,t);break}}}function Hot(e,t){const n=t.tagID;n===B.CAPTION||n===B.TABLE||n===B.TBODY||n===B.TFOOT||n===B.THEAD||n===B.TR||n===B.TD||n===B.TH?(e.openElements.popUntilTagNamePopped(B.SELECT),e._resetInsertionMode(),e._processStartTag(t)):wSe(e,t)}function qot(e,t){const n=t.tagID;n===B.CAPTION||n===B.TABLE||n===B.TBODY||n===B.TFOOT||n===B.THEAD||n===B.TR||n===B.TD||n===B.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(B.SELECT),e._resetInsertionMode(),e.onEndTag(t)):ESe(e,t)}function Wot(e,t){switch(t.tagID){case B.BASE:case B.BASEFONT:case B.BGSOUND:case B.LINK:case B.META:case B.NOFRAMES:case B.SCRIPT:case B.STYLE:case B.TEMPLATE:case B.TITLE:{Qp(e,t);break}case B.CAPTION:case B.COLGROUP:case B.TBODY:case B.TFOOT:case B.THEAD:{e.tmplInsertionModeStack[0]=Ee.IN_TABLE,e.insertionMode=Ee.IN_TABLE,lC(e,t);break}case B.COL:{e.tmplInsertionModeStack[0]=Ee.IN_COLUMN_GROUP,e.insertionMode=Ee.IN_COLUMN_GROUP,nZ(e,t);break}case B.TR:{e.tmplInsertionModeStack[0]=Ee.IN_TABLE_BODY,e.insertionMode=Ee.IN_TABLE_BODY,IB(e,t);break}case B.TD:case B.TH:{e.tmplInsertionModeStack[0]=Ee.IN_ROW,e.insertionMode=Ee.IN_ROW,kB(e,t);break}default:e.tmplInsertionModeStack[0]=Ee.IN_BODY,e.insertionMode=Ee.IN_BODY,gl(e,t)}}function Got(e,t){t.tagID===B.TEMPLATE&&PE(e,t)}function TSe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(B.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):tZ(e,t)}function Yot(e,t){t.tagID===B.HTML?gl(e,t):G$(e,t)}function SSe(e,t){var n;if(t.tagID===B.HTML){if(e.fragmentContext||(e.insertionMode=Ee.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===B.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else G$(e,t)}function G$(e,t){e.insertionMode=Ee.IN_BODY,CB(e,t)}function Kot(e,t){switch(t.tagID){case B.HTML:{gl(e,t);break}case B.FRAMESET:{e._insertElement(t,lt.HTML);break}case B.FRAME:{e._appendElement(t,lt.HTML),t.ackSelfClosing=!0;break}case B.NOFRAMES:{Qp(e,t);break}}}function Xot(e,t){t.tagID===B.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==B.FRAMESET&&(e.insertionMode=Ee.AFTER_FRAMESET))}function Qot(e,t){switch(t.tagID){case B.HTML:{gl(e,t);break}case B.NOFRAMES:{Qp(e,t);break}}}function Jot(e,t){t.tagID===B.HTML&&(e.insertionMode=Ee.AFTER_AFTER_FRAMESET)}function Zot(e,t){t.tagID===B.HTML?gl(e,t):YM(e,t)}function YM(e,t){e.insertionMode=Ee.IN_BODY,CB(e,t)}function eat(e,t){switch(t.tagID){case B.HTML:{gl(e,t);break}case B.NOFRAMES:{Qp(e,t);break}}}function tat(e,t){t.chars=Is,e._insertCharacters(t)}function nat(e,t){e._insertCharacters(t),e.framesetOk=!1}function CSe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==lt.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function rat(e,t){if(vst(t))CSe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===lt.MATHML?lSe(t):r===lt.SVG&&(bst(t),cSe(t)),ZJ(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function iat(e,t){if(t.tagID===B.P||t.tagID===B.BR){CSe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===lt.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}He.AREA,He.BASE,He.BASEFONT,He.BGSOUND,He.BR,He.COL,He.EMBED,He.FRAME,He.HR,He.IMG,He.INPUT,He.KEYGEN,He.LINK,He.META,He.PARAM,He.SOURCE,He.TRACK,He.WBR;const sat=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),Wce={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function ASe(e,t){const n=mat(e),r=GTe("type",{handlers:{root:oat,element:aat,text:uat,comment:kSe,doctype:lat,raw:fat},unknown:dat}),i={parser:n?new Vce(Wce):Vce.getFragmentParser(void 0,Wce),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),MA(i,rg());const s=n?i.parser.document:i.parser.getFragment(),o=vit(s,{file:i.options.file});return i.stitches&&KJ(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function ISe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function oat(e,t){ISe(e.children,t)}function aat(e,t){hat(e,t),ISe(e.children,t),pat(e,t)}function uat(e,t){const n={type:wr.CHARACTER,chars:e.value,location:YP(e)};MA(t,rg(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function lat(e,t){const n={type:wr.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:YP(e)};MA(t,rg(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function cat(e,t){t.stitches=!0;const n=gat(e);if("children"in e&&"children"in n){const r=ASe({type:"root",children:e.children},t.options);n.children=r.children}kSe({type:"comment",value:{stitch:n}},t)}function kSe(e,t){const n=e.value,r={type:wr.COMMENT,data:n,location:YP(e)};MA(t,rg(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function fat(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,RSe(t,rg(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function dat(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))cat(n,t);else{let r="";throw sat.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function MA(e,t){RSe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=So.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function RSe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function hat(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===So.PLAINTEXT)return;MA(t,rg(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:pw.html;i===pw.html&&n==="svg"&&(i=pw.svg);const s=wit({...e,children:[]},{space:i===pw.svg?"svg":"html"}),o={type:wr.START_TAG,tagName:n,tagID:OA(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:YP(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function pat(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&Rit.includes(n)||t.parser.tokenizer.state===So.PLAINTEXT)return;MA(t,wB(e));const r={type:wr.END_TAG,tagName:n,tagID:OA(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:YP(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===So.RCDATA||t.parser.tokenizer.state===So.RAWTEXT||t.parser.tokenizer.state===So.SCRIPT_DATA)&&(t.parser.tokenizer.state=So.DATA)}function mat(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function YP(e){const t=rg(e)||{line:void 0,column:void 0,offset:void 0},n=wB(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function gat(e){return"children"in e?uC({...e,children:[]}):uC(e)}function yat(e){return function(t,n){return ASe(t,{...e,file:n})}}function ll({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return S.jsx(mx,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return S.jsx(gt,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return S.jsx(io,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return S.jsx(io,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return S.jsx(io,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return S.jsx(io,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return S.jsx(io,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return S.jsx(io,{...s,order:6,...s,pb:12})},a({node:i,...s}){return S.jsx(AE,{...s,ref:void 0})},ul({node:i,...s}){return S.jsx(Ap,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return S.jsx(Ap,{type:"ordered",withPadding:!0,...o,pb:8})}};return S.jsx(sit,{components:n,rehypePlugins:[yat],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function KM({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return S.jsx(ll,{text:n})}const IS=14;function vat({completed:e,inProgress:t,rejected:n}){return S.jsxs(an,{ml:4,gap:4,children:[S.jsx(cs,{label:"Completed",children:S.jsx(Cp,{variant:"light",color:"green",leftSection:S.jsx(xB,{width:IS,height:IS,style:{paddingTop:1}}),pb:1,children:e})}),S.jsx(cs,{label:"In Progress",children:S.jsx(Cp,{variant:"light",color:"orange",leftSection:S.jsx(rTe,{width:IS,height:IS,style:{paddingTop:1}}),pb:1,children:t})}),S.jsx(cs,{label:"Rejected",children:S.jsx(Cp,{variant:"light",color:"red",leftSection:S.jsx(VP,{width:IS,height:IS,style:{paddingTop:1}}),pb:1,children:n})})]})}const bat={},xat=Object.freeze(Object.defineProperty({__proto__:null,default:bat},Symbol.toStringTag,{value:"Module"})),NSe=q7e(xat);var Az,Gce;function RB(){if(Gce)return Az;Gce=1;var e=NSe;function t(o,a){var u,l="",c=0,f=!0,d=0,h;function p(){return h=o.charAt(d),d++,h}for(p(),h==="-"&&(l="-",p());h>="0"&&h<="9";)f&&(h=="0"?c++:f=!1),l+=h,p();if(f&&c--,h===".")for(l+=".";p()&&h>="0"&&h<="9";)l+=h;if(h==="e"||h==="E")for(l+=h,p(),(h==="-"||h==="+")&&(l+=h,p());h>="0"&&h<="9";)l+=h,p();for(;h&&h<=" ";)p();if(a&&(h===","||h==="}"||h==="]"||h==="#"||h==="/"&&(o[d]==="/"||o[d]==="*"))&&(h=0),u=+l,!(h||c||!isFinite(u)))return u}function n(o,a){return Object.defineProperty&&Object.defineProperty(o,"__COMMENTS__",{enumerable:!1,writable:!0}),o.__COMMENTS__=a||{}}function r(o){Object.defineProperty(o,"__COMMENTS__",{value:void 0})}function i(o){return o.__COMMENTS__}function s(o){if(!o)return"";var a=o.split(`
`),u,l,c,f;for(c=0;c<a.length;c++)for(u=a[c],f=u.length,l=0;l<f;l++){var d=u[l];if(d==="#")break;if(d==="/"&&(u[l+1]==="/"||u[l+1]==="*")){u[l+1]==="*"&&(c=a.length);break}else if(d>" "){a[c]="# "+u;break}}return a.join(`
`)}return Az={EOL:e.EOL||`
`,tryParseNumber:t,createComment:n,removeComment:r,getComment:i,forceComment:s},Az}var Iz,Yce;function _at(){return Yce||(Yce=1,Iz="3.2.1"),Iz}var kz,Kce;function rZ(){if(Kce)return kz;Kce=1;function e(a,u){if(Object.prototype.toString.apply(a)!=="[object Array]"){if(a)throw new Error("dsf option must contain an array!");return n}else if(a.length===0)return n;var l=[];function c(f){return{}.toString.call(f)==="[object Function]"}return a.forEach(function(f){if(!f.name||!c(f.parse)||!c(f.stringify))throw new Error("extension does not match the DSF interface");l.push(function(){try{if(u=="parse")return f.parse.apply(null,arguments);if(u=="stringify"){var d=f.stringify.apply(null,arguments);if(d!==void 0&&(typeof d!="string"||d.length===0||d[0]==='"'||[].some.call(d,function(h){return r(h)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+d);return d}else throw new Error("Invalid type")}catch(h){throw new Error("DSF-"+f.name+" failed; "+h.message)}})}),t.bind(null,l)}function t(a,u){if(a)for(var l=0;l<a.length;l++){var c=a[l](u);if(c!==void 0)return c}}function n(){}function r(a){return a==="{"||a==="}"||a==="["||a==="]"||a===","}function i(){return{name:"math",parse:function(a){switch(a){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(a){if(typeof a=="number"){if(1/a===-1/0)return"-0";if(a===1/0)return"Inf";if(a===-1/0)return"-Inf";if(isNaN(a))return"NaN"}}}}i.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function s(a){var u=a&&a.out;return{name:"hex",parse:function(l){if(/^0x[0-9A-Fa-f]+$/.test(l))return parseInt(l,16)},stringify:function(l){if(u&&Number.isInteger(l))return"0x"+l.toString(16)}}}s.description="parse hexadecimal numbers prefixed with 0x";function o(){return{name:"date",parse:function(a){if(/^\d{4}-\d{2}-\d{2}$/.test(a)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(a)){var u=Date.parse(a);if(!isNaN(u))return new Date(u)}},stringify:function(a){if(Object.prototype.toString.call(a)==="[object Date]"){var u=a.toISOString();return u.indexOf("T00:00:00.000Z",u.length-14)!==-1?u.substr(0,10):u}}}}return o.description="support ISO dates",kz={loadDsf:e,std:{math:i,hex:s,date:o}},kz}var Rz,Xce;function wat(){return Xce||(Xce=1,Rz=function(e,t){var n=RB(),r=rZ(),i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f(H){return H==="{"||H==="}"||H==="["||H==="]"||H===","||H===":"}function d(H){var Q,J=0,ne=1;for(Q=s-1;Q>0&&i[Q]!==`
`;Q--,J++);for(;Q>0;Q--)i[Q]===`
`&&ne++;throw new Error(H+" at line "+ne+","+J+" >>>"+i.substr(s-J,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p(H){return i.charAt(s+H)}function m(H){for(var Q="",J=o;h();){if(o===J)return h(),H&&J==="'"&&o==="'"&&Q.length===0?(h(),y()):Q;if(o==="\\")if(h(),o==="u"){for(var ne=0,Z=0;Z<4;Z++){h();var ie=o.charCodeAt(0),q;o>="0"&&o<="9"?q=ie-48:o>="a"&&o<="f"?q=ie-97+10:o>="A"&&o<="F"?q=ie-65+10:d("Bad \\u char "+o),ne=ne*16+q}Q+=String.fromCharCode(ne)}else if(typeof a[o]=="string")Q+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):Q+=o}d("Bad string")}function y(){for(var H="",Q=0,J=0;;){var ne=p(-J-5);if(!ne||ne===`
`)break;J++}function Z(){for(var ie=J;o&&o<=" "&&o!==`
`&&ie-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),Z());;){if(!o)d("Bad multiline string");else if(o==="'"){if(Q++,h(),Q===3)return H.slice(-1)===`
`&&(H=H.slice(0,-1)),H;continue}else for(;Q>0;)H+="'",Q--;o===`
`?(H+=`
`,h(),Z()):(o!=="\r"&&(H+=o),h())}}function v(){if(o==='"'||o==="'")return m(!1);for(var H="",Q=s,J=-1;;){if(o===":")return H?J>=0&&J!==H.length&&(s=Q+J,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),H;o<=" "?o?J<0&&(J=H.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):H+=o,h()}}function b(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function w(){var H=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var Q=o==="\r"||o===`
`||o==="";if(Q||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var J=H[0];switch(J){case"f":if(H.trim()==="false")return!1;break;case"n":if(H.trim()==="null")return null;break;case"t":if(H.trim()==="true")return!0;break;default:if(J==="-"||J>="0"&&J<="9"){var ne=n.tryParseNumber(H);if(ne!==void 0)return ne}}if(Q){H=H.trim();var Z=l(H);return Z!==void 0?Z:H}}H+=o}}function E(H,Q){var J;for(H--,J=s-2;J>H&&i[J]<=" "&&i[J]!==`
`;J--);i[J]===`
`&&J--,i[J]==="\r"&&J--;var ne=i.substr(H,J-H+1);for(J=0;J<ne.length;J++)if(ne[J]>" "){var Z=ne.indexOf(`
`);if(Z>=0){var ie=[ne.substr(0,Z),ne.substr(Z+1)];return Q&&ie[0].trim().length===0&&ie.shift(),ie}else return[ne]}return[]}function T(H){function Q(ne,Z){var ie,q,j,G;switch(typeof ne){case"string":ne.indexOf(Z)>=0&&(G=ne);break;case"object":if(Object.prototype.toString.apply(ne)==="[object Array]")for(ie=0,j=ne.length;ie<j;ie++)G=Q(ne[ie],Z)||G;else for(q in ne)Object.prototype.hasOwnProperty.call(ne,q)&&(G=Q(ne[q],Z)||G)}return G}function J(ne){var Z=Q(H,ne);return Z?"found '"+ne+`' in a string value, your mistake could be with:
  > `+Z+`
  (unquoted strings contain everything up to the next line!)`:""}return J("}")||J("]")}function A(){var H=[],Q,J,ne;try{if(u&&(Q=n.createComment(H,{a:[]})),h(),J=s,b(),Q&&(ne=E(J,!0).join(`
`)),o==="]")return h(),Q&&(Q.e=[ne]),H;for(;o;){if(H.push(R()),J=s,b(),o===","&&(h(),J=s,b()),Q){var Z=E(J);Q.a.push([ne||"",Z[0]||""]),ne=Z[1]}if(o==="]")return h(),Q&&(Q.a[Q.a.length-1][1]+=ne||""),H;b()}d("End of input while parsing an array (missing ']')")}catch(ie){throw ie.hint=ie.hint||T(H),ie}}function I(H){var Q="",J={},ne,Z,ie;try{if(u&&(ne=n.createComment(J,{c:{},o:[]})),H?Z=1:(h(),Z=s),b(),ne&&(ie=E(Z,!0).join(`
`)),o==="}"&&!H)return ne&&(ne.e=[ie]),h(),J;for(;o;){if(Q=v(),b(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),J[Q]=R(),Z=s,b(),o===","&&(h(),Z=s,b()),ne){var q=E(Z);ne.c[Q]=[ie||"",q[0]||""],ie=q[1],ne.o.push(Q)}if(o==="}"&&!H)return h(),ne&&(ne.c[Q][1]+=ie||""),J;b()}if(H)return J;d("End of input while parsing an object (missing '}')")}catch(j){throw j.hint=j.hint||T(J),j}}function R(){switch(b(),o){case"{":return I();case"[":return A();case"'":case'"':return m(!0);default:return w()}}function D(H,Q){var J=s;if(b(),o&&d("Syntax error, found trailing characters"),u){var ne=Q.join(`
`),Z=E(J).join(`
`);if(Z||ne){var ie=n.createComment(H,n.getComment(H));ie.r=[ne,Z]}}return H}function M(){b();var H=u?E(1):null;switch(o){case"{":return D(I(),H);case"[":return D(A(),H);default:return D(R(),H)}}function $(){b();var H=u?E(1):null;switch(o){case"{":return D(I(),H);case"[":return D(A(),H)}try{return D(I(!0),H)}catch(Q){c();try{return D(R(),H)}catch{throw Q}}}if(typeof e!="string")throw new Error("source is not a string");var U=null,F=!0;return t&&typeof t=="object"&&(u=t.keepWsc,U=t.dsf,F=t.legacyRoot!==!1),l=r.loadDsf(U,"parse"),i=e,c(),F?$():M()}),Rz}var Nz,Qce;function Eat(){return Qce||(Qce=1,Nz=function(e,t){var n=RB(),r=rZ(),i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,y=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?y.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(y={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var v,b=Object.keys(i);for(v=b.length-1;v>=0;v--){var w=b[v];y[w].push(i[w][0].length,i[w][1].length)}}var E,T="---\u2028--\uFEFF-",A=new RegExp('[\\\\\\"\0-'+T+"]","g"),I=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+T+"]","g"),R=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+T+"]","g"),D=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),M={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},$=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,U="",F=0;function H(G,V){return F+=G[0].length+G[1].length-G[2]-G[3],G[0]+V+G[1]}function Q(G){return G.replace(A,function(V){var Y=M[V];return typeof Y=="string"?H(y.esc,Y):H(y.uni,("0000"+V.charCodeAt(0).toString(16)).slice(-4))})}function J(G,V,Y,ee){return G?(I.lastIndex=0,D.lastIndex=0,c||Y||I.test(G)||n.tryParseNumber(G,!0)!==void 0||D.test(G)?(A.lastIndex=0,R.lastIndex=0,A.test(G)?!R.test(G)&&!ee&&d?ne(G,V):H(y.qstr,Q(G)):H(y.qstr,G)):H(y.str,G)):H(y.qstr,"")}function ne(G,V){var Y,ee=G.replace(/\r/g,"").split(`
`);if(V+=o,ee.length===1)return H(y.mstr,ee[0]);var ae=s+V+y.mstr[0];for(Y=0;Y<ee.length;Y++)ae+=s,ee[Y]&&(ae+=V+ee[Y]);return ae+s+V+y.mstr[1]}function Z(G){return G?l||$.test(G)?(A.lastIndex=0,H(y.qkey,A.test(G)?Q(G):G)):H(y.key,G):'""'}function ie(G,V,Y,ee){function ae(Un){return Un&&Un[Un[0]==="\r"?1:0]===`
`}function _e(Un){return Un&&!ae(Un)}function pe(Un,tr,Si){if(!Un)return"";Un=n.forceComment(Un);var Sr,Po=Un.length;for(Sr=0;Sr<Po&&Un[Sr]<=" ";Sr++);return Si&&Sr>0&&(Un=Un.substr(Sr)),Sr<Po?tr+H(y.rem,Un):Un}var Te=E(G);if(Te!==void 0)return H(y.dsf,Te);switch(typeof G){case"string":return J(G,U,V,ee);case"number":return isFinite(G)?H(y.num,String(G)):H(y.lit,"null");case"boolean":return H(y.lit,String(G));case"object":if(!G)return H(y.lit,"null");var Le;a&&(Le=n.getComment(G));var ye=Object.prototype.toString.apply(G)==="[object Array]",he=U;U+=o;var $e=s+he,Ne=s+U,tt=Y||u?"":$e,it=[],Me,Ge=f?[]:null,at=c,yt=d,Tt=h?"":y.com[0],Ot=0,qe,ft,wt,ke,Oe,dt,Lt,Ft,dn;if(ye){for(qe=0,ft=G.length;qe<ft;qe++){if(Me=qe<ft-1,Le?(dt=Le.a[qe]||[],Lt=_e(dt[1]),it.push(pe(dt[0],`
`)+Ne),Ge&&(dt[0]||dt[1]||Lt)&&(Ge=null)):it.push(Ne),F=0,ke=G[qe],it.push(ie(ke,Le?Lt:!1,!0)+(Me?h:"")),Ge){switch(typeof ke){case"string":F=0,c=!0,d=0,Ge.push(ie(ke,!1,!0)+(Me?y.com[0]:"")),c=at,d=yt;break;case"object":if(ke){Ge=null;break}default:Ge.push(it[it.length-1]+(Me?Tt:""));break}Me&&(F+=y.com[0].length-y.com[2]),Ot+=F}Le&&dt[1]&&it.push(pe(dt[1],Lt?" ":`
`,Lt))}ft===0?Le&&Le.e&&it.push(pe(Le.e[0],`
`)+$e):it.push($e),it.length===0?Ft=H(y.arr,""):(Ft=tt+H(y.arr,it.join("")),Ge&&(dn=Ge.join(" "),dn.length-Ot<=f&&(Ft=H(y.arr,dn))))}else{var Dn=Le?Le.o.slice():[],Tr=[];for(wt in G)Object.prototype.hasOwnProperty.call(G,wt)&&Dn.indexOf(wt)<0&&Tr.push(wt);m&&Tr.sort();var Ri=Dn.concat(Tr);for(qe=0,ft=Ri.length;qe<ft;qe++)if(Me=qe<ft-1,wt=Ri[qe],Le?(dt=Le.c[wt]||[],Lt=_e(dt[1]),it.push(pe(dt[0],`
`)+Ne),Ge&&(dt[0]||dt[1]||Lt)&&(Ge=null)):it.push(Ne),F=0,ke=G[wt],Oe=ie(ke,Le&&Lt),it.push(Z(wt)+y.col[0]+(ae(Oe)?"":" ")+Oe+(Me?h:"")),Le&&dt[1]&&it.push(pe(dt[1],Lt?" ":`
`,Lt)),Ge){switch(typeof ke){case"string":F=0,c=!0,d=0,Oe=ie(ke,!1),c=at,d=yt,Ge.push(Z(wt)+y.col[0]+" "+Oe+(Me?y.com[0]:""));break;case"object":if(ke){Ge=null;break}default:Ge.push(it[it.length-1]+(Me?Tt:""));break}F+=y.col[0].length-y.col[2],Me&&(F+=y.com[0].length-y.com[2]),Ot+=F}ft===0?Le&&Le.e&&it.push(pe(Le.e[0],`
`)+$e):it.push($e),it.length===0?Ft=H(y.obj,""):(Ft=tt+H(y.obj,it.join("")),Ge&&(dn=Ge.join(" "),dn.length-Ot<=f&&(Ft=H(y.obj,dn))))}return U=he,Ft}}E=r.loadDsf(p,"stringify");var q="",j=a?j=(n.getComment(e)||{}).r:null;return j&&j[0]&&(q=j[0]+`
`),q+=ie(e,null,!0,!0),j&&(q+=j[1]||""),q}),Nz}var Dz,Jce;function Tat(){if(Jce)return Dz;Jce=1;var e=RB();function t(c,f,d){var h;return c&&(h={b:c}),f&&((h=h||{}).a=f),d&&((h=h||{}).x=d),h}function n(c,f){if(!(c===null||typeof c!="object")){var d=e.getComment(c);d&&e.removeComment(c);var h,p,m,y;if(Object.prototype.toString.apply(c)==="[object Array]"){for(y={a:{}},h=0,p=c.length;h<p;h++)s(y.a,h,d.a[h],n(c[h]))&&(m=!0);!m&&d.e&&(y.e=t(d.e[0],d.e[1]),m=!0)}else{y={s:{}};var v,b=Object.keys(c);for(d&&d.o?(v=[],d.o.concat(b).forEach(function(E){Object.prototype.hasOwnProperty.call(c,E)&&v.indexOf(E)<0&&v.push(E)})):v=b,y.o=v,h=0,p=v.length;h<p;h++){var w=v[h];s(y.s,w,d.c[w],n(c[w]))&&(m=!0)}!m&&d.e&&(y.e=t(d.e[0],d.e[1]),m=!0)}return f&&d&&d.r&&(y.r=t(d.r[0],d.r[1])),m?y:void 0}}function r(){var c="";return[].forEach.call(arguments,function(f){f&&f.trim()!==""&&(c&&(c+="; "),c+=f.trim())}),c}function i(c,f){var d=[];if(u(c,f,d,[]),d.length>0){var h=l(f,null,1);h+=`
# Orphaned comments:
`,d.forEach(function(p){h+=("# "+p.path.join("/")+": "+r(p.b,p.a,p.e)).replace(`
`,"\\n ")+`
`}),l(f,h,1)}}function s(c,f,d,h){var p=t(d?d[0]:void 0,d?d[1]:void 0,h);return p&&(c[f]=p),p}function o(c,f){var d=t(f.b,f.a);return d.path=c,d}function a(c,f,d){if(c){var h,p;if(c.a)for(h=0,p=c.a.length;h<p;h++){var m=d.slice().concat([h]),y=c.a[h];y&&(f.push(o(m,y)),a(y.x,f,m))}else c.o&&c.o.forEach(function(v){var b=d.slice().concat([v]),w=c.s[v];w&&(f.push(o(b,w)),a(w.x,f,b))});c.e&&f.push(o(d,c.e))}}function u(c,f,d,h){if(c){if(f===null||typeof f!="object"){a(c,d,h);return}var p,m=e.createComment(f);if(h.length===0&&c.r&&(m.r=[c.r.b,c.r.a]),Object.prototype.toString.apply(f)==="[object Array]"){m.a=[];var y=c.a||{};for(var v in y)if(y.hasOwnProperty(v)){p=parseInt(v);var b=c.a[v];if(b){var w=h.slice().concat([p]);p<f.length?(m.a[p]=[b.b,b.a],u(b.x,f[p],d,w)):(d.push(o(w,b)),a(b.x,d,w))}}p===0&&c.e&&(m.e=[c.e.b,c.e.a])}else m.c={},m.o=[],(c.o||[]).forEach(function(E){var T=h.slice().concat([E]),A=c.s[E];Object.prototype.hasOwnProperty.call(f,E)?(m.o.push(E),A&&(m.c[E]=[A.b,A.a],u(A.x,f[E],d,T))):A&&(d.push(o(T,A)),a(A.x,d,T))}),c.e&&(m.e=[c.e.b,c.e.a])}}function l(c,f,d){var h=e.createComment(c,e.getComment(c));return h.r||(h.r=["",""]),(f||f==="")&&(h.r[d]=e.forceComment(f)),h.r[d]||""}return Dz={extract:function(c){return n(c,!0)},merge:i,header:function(c,f){return l(c,f,0)},footer:function(c,f){return l(c,f,1)}},Dz}/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var Pz,Zce;function Sat(){if(Zce)return Pz;Zce=1;var e=RB(),t=_at(),n=wat(),r=Eat(),i=Tat(),s=rZ();return Pz={parse:n,stringify:r,endOfLine:function(){return e.EOL},setEndOfLine:function(o){(o===`
`||o===`\r
`)&&(e.EOL=o)},version:t,rt:{parse:function(o,a){return(a=a||{}).keepWsc=!0,n(o,a)},stringify:function(o,a){return(a=a||{}).keepWsc=!0,r(o,a)}},comments:i,dsf:s.std},Pz}var Cat=Sat(),efe={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DSe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},Aat=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},iZ={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(DSe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Aat(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new Iat;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Iat extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kat=function(e){const t=DSe(e);return iZ.encodeByteArray(t,!0)},Y$=function(e){return kat(e).replace(/\./g,"")},PSe=function(e){try{return iZ.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OSe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rat=()=>OSe().__FIREBASE_DEFAULTS__,Nat=()=>{if(typeof process>"u"||typeof efe>"u")return;const e=efe.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Dat=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&PSe(e[1]);return t&&JSON.parse(t)},NB=()=>{try{return Rat()||Nat()||Dat()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},MSe=e=>{var t,n;return(n=(t=NB())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},Pat=e=>{const t=MSe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},LSe=()=>{var e;return(e=NB())===null||e===void 0?void 0:e.config},$Se=e=>{var t;return(t=NB())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oat(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Y$(JSON.stringify(n)),Y$(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cl(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Mat(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cl())}function Lat(){var e;const t=(e=NB())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $at(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Fat(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Bat(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jat(){const e=cl();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Uat(){return!Lat()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sZ(){try{return typeof indexedDB=="object"}catch{return!1}}function zat(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vat="FirebaseError";class ig extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=Vat,Object.setPrototypeOf(this,ig.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,LA.prototype.create)}}class LA{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?Hat(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ig(i,a,r)}}function Hat(e,t){return e.replace(qat,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const qat=/\{\$([^}]+)}/g;function Wat(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function vD(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(tfe(s)&&tfe(o)){if(!vD(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function tfe(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KP(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Gat(e,t){const n=new Yat(e,t);return n.subscribe.bind(n)}class Yat{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Kat(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=Oz),i.error===void 0&&(i.error=Oz),i.complete===void 0&&(i.complete=Oz);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Kat(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Oz(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xat=1e3,Qat=2,Jat=4*60*60*1e3,Zat=.5;function eut(e,t=Xat,n=Qat){const r=t*Math.pow(n,e),i=Math.round(Zat*r*(Math.random()-.5)*2);return Math.min(Jat,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(e){return e&&e._delegate?e._delegate:e}class L0{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tut=class{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new yD;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(rut(t))try{this.getOrInitializeService({instanceIdentifier:V_})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=V_){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=V_){return this.instances.has(t)}getOptions(t=V_){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:nut(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=V_){return this.component?this.component.multipleInstances?t:V_:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function nut(e){return e===V_?void 0:e}function rut(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iut{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new tut(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Or;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Or||(Or={}));const sut={debug:Or.DEBUG,verbose:Or.VERBOSE,info:Or.INFO,warn:Or.WARN,error:Or.ERROR,silent:Or.SILENT},out=Or.INFO,aut={[Or.DEBUG]:"log",[Or.VERBOSE]:"log",[Or.INFO]:"info",[Or.WARN]:"warn",[Or.ERROR]:"error"},uut=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=aut[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class DB{constructor(t){this.name=t,this._logLevel=out,this._logHandler=uut,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Or))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?sut[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Or.DEBUG,...t),this._logHandler(this,Or.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Or.VERBOSE,...t),this._logHandler(this,Or.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Or.INFO,...t),this._logHandler(this,Or.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Or.WARN,...t),this._logHandler(this,Or.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Or.ERROR,...t),this._logHandler(this,Or.ERROR,...t)}}const lut=(e,t)=>t.some(n=>e instanceof n);let nfe,rfe;function cut(){return nfe||(nfe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fut(){return rfe||(rfe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FSe=new WeakMap,TW=new WeakMap,BSe=new WeakMap,Mz=new WeakMap,oZ=new WeakMap;function dut(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(ab(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&FSe.set(n,e)}).catch(()=>{}),oZ.set(t,e),t}function hut(e){if(TW.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});TW.set(e,t)}let SW={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return TW.get(e);if(t==="objectStoreNames")return e.objectStoreNames||BSe.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ab(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function put(e){SW=e(SW)}function mut(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Lz(this),t,...n);return BSe.set(r,t.sort?t.sort():[t]),ab(r)}:fut().includes(e)?function(...t){return e.apply(Lz(this),t),ab(FSe.get(this))}:function(...t){return ab(e.apply(Lz(this),t))}}function gut(e){return typeof e=="function"?mut(e):(e instanceof IDBTransaction&&hut(e),lut(e,cut())?new Proxy(e,SW):e)}function ab(e){if(e instanceof IDBRequest)return dut(e);if(Mz.has(e))return Mz.get(e);const t=gut(e);return t!==e&&(Mz.set(e,t),oZ.set(t,e)),t}const Lz=e=>oZ.get(e);function yut(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=ab(o);return r&&o.addEventListener("upgradeneeded",u=>{r(ab(o.result),u.oldVersion,u.newVersion,ab(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const vut=["get","getKey","getAll","getAllKeys","count"],but=["put","add","delete","clear"],$z=new Map;function ife(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if($z.get(t))return $z.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=but.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||vut.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return $z.set(t,s),s}put(e=>({...e,get:(t,n,r)=>ife(t,n)||e.get(t,n,r),has:(t,n)=>!!ife(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xut{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_ut(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function _ut(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const CW="@firebase/app",sfe="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy=new DB("@firebase/app"),wut="@firebase/app-compat",Eut="@firebase/analytics-compat",Tut="@firebase/analytics",Sut="@firebase/app-check-compat",Cut="@firebase/app-check",Aut="@firebase/auth",Iut="@firebase/auth-compat",kut="@firebase/database",Rut="@firebase/data-connect",Nut="@firebase/database-compat",Dut="@firebase/functions",Put="@firebase/functions-compat",Out="@firebase/installations",Mut="@firebase/installations-compat",Lut="@firebase/messaging",$ut="@firebase/messaging-compat",Fut="@firebase/performance",But="@firebase/performance-compat",jut="@firebase/remote-config",Uut="@firebase/remote-config-compat",zut="@firebase/storage",Vut="@firebase/storage-compat",Hut="@firebase/firestore",qut="@firebase/vertexai",Wut="@firebase/firestore-compat",Gut="firebase",Yut="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AW="[DEFAULT]",Kut={[CW]:"fire-core",[wut]:"fire-core-compat",[Tut]:"fire-analytics",[Eut]:"fire-analytics-compat",[Cut]:"fire-app-check",[Sut]:"fire-app-check-compat",[Aut]:"fire-auth",[Iut]:"fire-auth-compat",[kut]:"fire-rtdb",[Rut]:"fire-data-connect",[Nut]:"fire-rtdb-compat",[Dut]:"fire-fn",[Put]:"fire-fn-compat",[Out]:"fire-iid",[Mut]:"fire-iid-compat",[Lut]:"fire-fcm",[$ut]:"fire-fcm-compat",[Fut]:"fire-perf",[But]:"fire-perf-compat",[jut]:"fire-rc",[Uut]:"fire-rc-compat",[zut]:"fire-gcs",[Vut]:"fire-gcs-compat",[Hut]:"fire-fst",[Wut]:"fire-fst-compat",[qut]:"fire-vertex","fire-js":"fire-js",[Gut]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K$=new Map,Xut=new Map,IW=new Map;function ofe(e,t){try{e.container.addComponent(t)}catch(n){Xy.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Qy(e){const t=e.name;if(IW.has(t))return Xy.debug(`There were multiple attempts to register component ${t}.`),!1;IW.set(t,e);for(const n of K$.values())ofe(n,e);for(const n of Xut.values())ofe(n,e);return!0}function $A(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function d0(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qut={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ub=new LA("app","Firebase",Qut);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jut{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new L0("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ub.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE=Yut;function jSe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:AW,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw ub.create("bad-app-name",{appName:String(i)});if(n||(n=LSe()),!n)throw ub.create("no-options");const s=K$.get(i);if(s){if(vD(n,s.options)&&vD(r,s.config))return s;throw ub.create("duplicate-app",{appName:i})}const o=new iut(i);for(const u of IW.values())o.addComponent(u);const a=new Jut(n,r,o);return K$.set(i,a),a}function aZ(e=AW){const t=K$.get(e);if(!t&&e===AW&&LSe())return jSe();if(!t)throw ub.create("no-app",{appName:e});return t}function Ip(e,t,n){var r;let i=(r=Kut[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Xy.warn(a.join(" "));return}Qy(new L0(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zut="firebase-heartbeat-database",elt=1,bD="firebase-heartbeat-store";let Fz=null;function USe(){return Fz||(Fz=yut(Zut,elt,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(bD)}catch(n){console.warn(n)}}}}).catch(e=>{throw ub.create("idb-open",{originalErrorMessage:e.message})})),Fz}async function tlt(e){try{const n=(await USe()).transaction(bD),r=await n.objectStore(bD).get(zSe(e));return await n.done,r}catch(t){if(t instanceof ig)Xy.warn(t.message);else{const n=ub.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Xy.warn(n.message)}}}async function afe(e,t){try{const r=(await USe()).transaction(bD,"readwrite");await r.objectStore(bD).put(t,zSe(e)),await r.done}catch(n){if(n instanceof ig)Xy.warn(n.message);else{const r=ub.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Xy.warn(r.message)}}}function zSe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nlt=1024,rlt=30*24*60*60*1e3;class ilt{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new olt(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ufe();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=rlt}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Xy.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ufe(),{heartbeatsToSend:r,unsentEntries:i}=slt(this._heartbeatsCache.heartbeats),s=Y$(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Xy.warn(n),""}}}function ufe(){return new Date().toISOString().substring(0,10)}function slt(e,t=nlt){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),lfe(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),lfe(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class olt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sZ()?zat().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await tlt(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return afe(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return afe(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function lfe(e){return Y$(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function alt(e){Qy(new L0("platform-logger",t=>new xut(t),"PRIVATE")),Qy(new L0("heartbeat",t=>new ilt(t),"PRIVATE")),Ip(CW,sfe,e),Ip(CW,sfe,"esm2017"),Ip("fire-js","")}alt("");var ult="firebase",llt="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ip(ult,llt,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VSe="firebasestorage.googleapis.com",HSe="storageBucket",clt=2*60*1e3,flt=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo extends ig{constructor(t,n,r=0){super(Bz(t),`Firebase Storage: ${n} (${Bz(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,lo.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Bz(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ao;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ao||(ao={}));function Bz(e){return"storage/"+e}function uZ(){const e="An unknown error occurred, please check the error payload for server response.";return new lo(ao.UNKNOWN,e)}function dlt(e){return new lo(ao.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function hlt(e){return new lo(ao.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function plt(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new lo(ao.UNAUTHENTICATED,e)}function mlt(){return new lo(ao.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function glt(e){return new lo(ao.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function ylt(){return new lo(ao.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function vlt(){return new lo(ao.CANCELED,"User canceled the upload/download.")}function blt(e){return new lo(ao.INVALID_URL,"Invalid URL '"+e+"'.")}function xlt(e){return new lo(ao.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function _lt(){return new lo(ao.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+HSe+"' property when initializing the app?")}function wlt(){return new lo(ao.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Elt(){return new lo(ao.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Tlt(e){return new lo(ao.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function kW(e){return new lo(ao.INVALID_ARGUMENT,e)}function qSe(){return new lo(ao.APP_DELETED,"The Firebase app was deleted.")}function Slt(e){return new lo(ao.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ON(e,t){return new lo(ao.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Gk(e){throw new lo(ao.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=jl.makeFromUrl(t,n)}catch{return new jl(t,"")}if(r.path==="")return r;throw xlt(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(E){E.path_=decodeURIComponent(E.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===VSe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,y="([^?#]*)",v=new RegExp(`^https?://${m}/${i}/${y}`,"i"),w=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:v,indices:{bucket:1,path:2},postModify:l}];for(let E=0;E<w.length;E++){const T=w[E],A=T.regex.exec(t);if(A){const I=A[T.indices.bucket];let R=A[T.indices.path];R||(R=""),r=new jl(I,R),T.postModify(r);break}}if(r==null)throw blt(t);return r}}class Clt{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Alt(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...y){l||(l=!0,t.apply(null,y))}function f(y){i=setTimeout(()=>{i=null,e(h,u())},y)}function d(){s&&clearTimeout(s)}function h(y,...v){if(l){d();return}if(y){d(),c.call(null,y,...v);return}if(u()||o){d(),c.call(null,y,...v);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,f(w)}let p=!1;function m(y){p||(p=!0,d(),!l&&(i!==null?(y||(a=2),clearTimeout(i),f(0)):y||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function Ilt(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function klt(e){return e!==void 0}function Rlt(e){return typeof e=="object"&&!Array.isArray(e)}function lZ(e){return typeof e=="string"||e instanceof String}function cfe(e){return cZ()&&e instanceof Blob}function cZ(){return typeof Blob<"u"}function RW(e,t,n,r){if(r<t)throw kW(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw kW(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function WSe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Nw;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Nw||(Nw={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nlt(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dlt{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new $4(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Nw.NO_ERROR,u=s.getStatus();if(!a||Nlt(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===Nw.ABORT;r(!1,new $4(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new $4(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());klt(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=uZ();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?qSe():vlt();o(u)}else{const u=ylt();o(u)}};this.canceled_?n(!1,new $4(!1,null,!0)):this.backoffId_=Alt(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&Ilt(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class $4{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function Plt(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function Olt(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function Mlt(e,t){t&&(e["X-Firebase-GMPID"]=t)}function Llt(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function $lt(e,t,n,r,i,s,o=!0){const a=WSe(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return Mlt(l,t),Plt(l,n),Olt(l,s),Llt(l,r),new Dlt(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Flt(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Blt(...e){const t=Flt();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(cZ())return new Blob(e);throw new lo(ao.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function jlt(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ult(e){if(typeof atob>"u")throw Tlt("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class jz{constructor(t,n){this.data=t,this.contentType=n||null}}function zlt(e,t){switch(e){case h0.RAW:return new jz(GSe(t));case h0.BASE64:case h0.BASE64URL:return new jz(YSe(e,t));case h0.DATA_URL:return new jz(Hlt(t),qlt(t))}throw uZ()}function GSe(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function Vlt(e){let t;try{t=decodeURIComponent(e)}catch{throw ON(h0.DATA_URL,"Malformed data URL.")}return GSe(t)}function YSe(e,t){switch(e){case h0.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw ON(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case h0.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw ON(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Ult(t)}catch(i){throw i.message.includes("polyfill")?i:ON(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class KSe{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw ON(h0.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Wlt(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function Hlt(e){const t=new KSe(e);return t.base64?YSe(h0.BASE64,t.rest):Vlt(t.rest)}function qlt(e){return new KSe(e).contentType}function Wlt(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(t,n){let r=0,i="";cfe(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(cfe(this.data_)){const r=this.data_,i=jlt(r,t,n);return i===null?null:new zv(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new zv(r,!0)}}static getBlob(...t){if(cZ()){const n=t.map(r=>r instanceof zv?r.data_:r);return new zv(Blt.apply(null,n))}else{const n=t.map(o=>lZ(o)?zlt(h0.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new zv(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fZ(e){let t;try{t=JSON.parse(e)}catch{return null}return Rlt(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Glt(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function Ylt(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function XSe(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Klt(e,t){return t}class Il{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||Klt}}let F4=null;function Xlt(e){return!lZ(e)||e.length<2?e:XSe(e)}function QSe(){if(F4)return F4;const e=[];e.push(new Il("bucket")),e.push(new Il("generation")),e.push(new Il("metageneration")),e.push(new Il("name","fullPath",!0));function t(s,o){return Xlt(o)}const n=new Il("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Il("size");return i.xform=r,e.push(i),e.push(new Il("timeCreated")),e.push(new Il("updated")),e.push(new Il("md5Hash",null,!0)),e.push(new Il("cacheControl",null,!0)),e.push(new Il("contentDisposition",null,!0)),e.push(new Il("contentEncoding",null,!0)),e.push(new Il("contentLanguage",null,!0)),e.push(new Il("contentType",null,!0)),e.push(new Il("metadata","customMetadata",!0)),F4=e,F4}function Qlt(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new jl(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function Jlt(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return Qlt(r,e),r}function JSe(e,t,n){const r=fZ(t);return r===null?null:Jlt(e,r,n)}function Zlt(e,t,n,r){const i=fZ(t);if(i===null||!lZ(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=XP(d,n,r),p=WSe({alt:"media",token:l});return h+p})[0]}function ect(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ffe="prefixes",dfe="items";function tct(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[ffe])for(const i of n[ffe]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new jl(t,s));r.prefixes.push(o)}if(n[dfe])for(const i of n[dfe]){const s=e._makeStorageReference(new jl(t,i.name));r.items.push(s)}return r}function nct(e,t,n){const r=fZ(n);return r===null?null:tct(e,t,r)}class PB{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dZ(e){if(!e)throw uZ()}function rct(e,t){function n(r,i){const s=JSe(e,i,t);return dZ(s!==null),s}return n}function ict(e,t){function n(r,i){const s=nct(e,t,i);return dZ(s!==null),s}return n}function sct(e,t){function n(r,i){const s=JSe(e,i,t);return dZ(s!==null),Zlt(s,i,e.host,e._protocol)}return n}function hZ(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=mlt():i=plt():n.getStatus()===402?i=hlt(e.bucket):n.getStatus()===403?i=glt(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function ZSe(e){const t=hZ(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=dlt(e.path)),s.serverResponse=i.serverResponse,s}return n}function oct(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=XP(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new PB(a,u,ict(e,t.bucket),l);return c.urlParams=s,c.errorHandler=hZ(t),c}function act(e,t,n){const r=t.fullServerUrl(),i=XP(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new PB(i,s,sct(e,n),o);return a.errorHandler=ZSe(t),a}function uct(e,t){const n=t.fullServerUrl(),r=XP(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new PB(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=ZSe(t),a}function lct(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function cct(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=lct(null,t)),r}function fct(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let E=0;E<2;E++)w=w+Math.random().toString().slice(2);return w}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=cct(t,r,i),c=ect(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=zv.getBlob(f,r,d);if(h===null)throw wlt();const p={name:l.fullPath},m=XP(s,e.host,e._protocol),y="POST",v=e.maxUploadRetryTime,b=new PB(m,y,rct(e,n),v);return b.urlParams=p,b.headers=o,b.body=h.uploadData(),b.errorHandler=hZ(t),b}class dct{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Nw.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Nw.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Nw.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw Gk("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Gk("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Gk("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Gk("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Gk("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class hct extends dct{initXhr(){this.xhr_.responseType="text"}}function OB(){return new hct}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(t,n){this._service=t,n instanceof jl?this._location=n:this._location=jl.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new Vw(t,n)}get root(){const t=new jl(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return XSe(this._location.path)}get storage(){return this._service}get parent(){const t=Glt(this._location.path);if(t===null)return null;const n=new jl(this._location.bucket,t);return new Vw(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw Slt(t)}}function pct(e,t,n){e._throwIfRoot("uploadBytes");const r=fct(e.storage,e._location,QSe(),new zv(t,!0),n);return e.storage.makeRequestWithTokens(r,OB).then(i=>({metadata:i,ref:e}))}function mct(e){const t={prefixes:[],items:[]};return e2e(e,t).then(()=>t)}async function e2e(e,t,n){const i=await gct(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await e2e(e,t,i.nextPageToken)}function gct(e,t){t!=null&&typeof t.maxResults=="number"&&RW("options.maxResults",1,1e3,t.maxResults);const n=t,r=oct(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,OB)}function yct(e){e._throwIfRoot("getDownloadURL");const t=act(e.storage,e._location,QSe());return e.storage.makeRequestWithTokens(t,OB).then(n=>{if(n===null)throw Elt();return n})}function vct(e){e._throwIfRoot("deleteObject");const t=uct(e.storage,e._location);return e.storage.makeRequestWithTokens(t,OB)}function bct(e,t){const n=Ylt(e._location.path,t),r=new jl(e._location.bucket,n);return new Vw(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xct(e){return/^[A-Za-z]+:\/\//.test(e)}function _ct(e,t){return new Vw(e,t)}function t2e(e,t){if(e instanceof pZ){const n=e;if(n._bucket==null)throw _lt();const r=new Vw(n,n._bucket);return t!=null?t2e(r,t):r}else return t!==void 0?bct(e,t):e}function wct(e,t){if(t&&xct(t)){if(e instanceof pZ)return _ct(e,t);throw kW("To use ref(service, url), the first argument must be a Storage instance.")}else return t2e(e,t)}function hfe(e,t){const n=t==null?void 0:t[HSe];return n==null?null:jl.makeFromBucketSpec(n,e)}function Ect(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:Oat(i,e.app.options.projectId))}class pZ{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=VSe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=clt,this._maxUploadRetryTime=flt,this._requests=new Set,i!=null?this._bucket=jl.makeFromBucketSpec(i,this._host):this._bucket=hfe(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=jl.makeFromBucketSpec(this._url,t):this._bucket=hfe(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){RW("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){RW("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Vw(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new Clt(qSe());{const o=$lt(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const pfe="@firebase/storage",mfe="0.13.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2e="storage";function B4(e,t,n){return e=ds(e),pct(e,t,n)}function Yk(e){return e=ds(e),mct(e)}function j4(e){return e=ds(e),yct(e)}function gfe(e){return e=ds(e),vct(e)}function Mf(e,t){return e=ds(e),wct(e,t)}function yfe(e=aZ(),t){e=ds(e);const r=$A(e,n2e).getImmediate({identifier:t}),i=Pat("storage");return i&&Tct(r,...i),r}function Tct(e,t,n,r={}){Ect(e,t,n,r)}function Sct(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new pZ(n,r,i,t,OE)}function Cct(){Qy(new L0(n2e,Sct,"PUBLIC").setMultipleInstances(!0)),Ip(pfe,mfe,""),Ip(pfe,mfe,"esm2017")}Cct();var vfe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lb,r2e;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(I,R){function D(){}D.prototype=R.prototype,I.D=R.prototype,I.prototype=new D,I.prototype.constructor=I,I.C=function(M,$,U){for(var F=Array(arguments.length-2),H=2;H<arguments.length;H++)F[H-2]=arguments[H];return R.prototype[$].apply(M,F)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,R,D){D||(D=0);var M=Array(16);if(typeof R=="string")for(var $=0;16>$;++$)M[$]=R.charCodeAt(D++)|R.charCodeAt(D++)<<8|R.charCodeAt(D++)<<16|R.charCodeAt(D++)<<24;else for($=0;16>$;++$)M[$]=R[D++]|R[D++]<<8|R[D++]<<16|R[D++]<<24;R=I.g[0],D=I.g[1],$=I.g[2];var U=I.g[3],F=R+(U^D&($^U))+M[0]+3614090360&4294967295;R=D+(F<<7&4294967295|F>>>25),F=U+($^R&(D^$))+M[1]+3905402710&4294967295,U=R+(F<<12&4294967295|F>>>20),F=$+(D^U&(R^D))+M[2]+606105819&4294967295,$=U+(F<<17&4294967295|F>>>15),F=D+(R^$&(U^R))+M[3]+3250441966&4294967295,D=$+(F<<22&4294967295|F>>>10),F=R+(U^D&($^U))+M[4]+4118548399&4294967295,R=D+(F<<7&4294967295|F>>>25),F=U+($^R&(D^$))+M[5]+1200080426&4294967295,U=R+(F<<12&4294967295|F>>>20),F=$+(D^U&(R^D))+M[6]+2821735955&4294967295,$=U+(F<<17&4294967295|F>>>15),F=D+(R^$&(U^R))+M[7]+4249261313&4294967295,D=$+(F<<22&4294967295|F>>>10),F=R+(U^D&($^U))+M[8]+1770035416&4294967295,R=D+(F<<7&4294967295|F>>>25),F=U+($^R&(D^$))+M[9]+2336552879&4294967295,U=R+(F<<12&4294967295|F>>>20),F=$+(D^U&(R^D))+M[10]+4294925233&4294967295,$=U+(F<<17&4294967295|F>>>15),F=D+(R^$&(U^R))+M[11]+2304563134&4294967295,D=$+(F<<22&4294967295|F>>>10),F=R+(U^D&($^U))+M[12]+1804603682&4294967295,R=D+(F<<7&4294967295|F>>>25),F=U+($^R&(D^$))+M[13]+4254626195&4294967295,U=R+(F<<12&4294967295|F>>>20),F=$+(D^U&(R^D))+M[14]+2792965006&4294967295,$=U+(F<<17&4294967295|F>>>15),F=D+(R^$&(U^R))+M[15]+1236535329&4294967295,D=$+(F<<22&4294967295|F>>>10),F=R+($^U&(D^$))+M[1]+4129170786&4294967295,R=D+(F<<5&4294967295|F>>>27),F=U+(D^$&(R^D))+M[6]+3225465664&4294967295,U=R+(F<<9&4294967295|F>>>23),F=$+(R^D&(U^R))+M[11]+643717713&4294967295,$=U+(F<<14&4294967295|F>>>18),F=D+(U^R&($^U))+M[0]+3921069994&4294967295,D=$+(F<<20&4294967295|F>>>12),F=R+($^U&(D^$))+M[5]+3593408605&4294967295,R=D+(F<<5&4294967295|F>>>27),F=U+(D^$&(R^D))+M[10]+38016083&4294967295,U=R+(F<<9&4294967295|F>>>23),F=$+(R^D&(U^R))+M[15]+3634488961&4294967295,$=U+(F<<14&4294967295|F>>>18),F=D+(U^R&($^U))+M[4]+3889429448&4294967295,D=$+(F<<20&4294967295|F>>>12),F=R+($^U&(D^$))+M[9]+568446438&4294967295,R=D+(F<<5&4294967295|F>>>27),F=U+(D^$&(R^D))+M[14]+3275163606&4294967295,U=R+(F<<9&4294967295|F>>>23),F=$+(R^D&(U^R))+M[3]+4107603335&4294967295,$=U+(F<<14&4294967295|F>>>18),F=D+(U^R&($^U))+M[8]+1163531501&4294967295,D=$+(F<<20&4294967295|F>>>12),F=R+($^U&(D^$))+M[13]+2850285829&4294967295,R=D+(F<<5&4294967295|F>>>27),F=U+(D^$&(R^D))+M[2]+4243563512&4294967295,U=R+(F<<9&4294967295|F>>>23),F=$+(R^D&(U^R))+M[7]+1735328473&4294967295,$=U+(F<<14&4294967295|F>>>18),F=D+(U^R&($^U))+M[12]+2368359562&4294967295,D=$+(F<<20&4294967295|F>>>12),F=R+(D^$^U)+M[5]+4294588738&4294967295,R=D+(F<<4&4294967295|F>>>28),F=U+(R^D^$)+M[8]+2272392833&4294967295,U=R+(F<<11&4294967295|F>>>21),F=$+(U^R^D)+M[11]+1839030562&4294967295,$=U+(F<<16&4294967295|F>>>16),F=D+($^U^R)+M[14]+4259657740&4294967295,D=$+(F<<23&4294967295|F>>>9),F=R+(D^$^U)+M[1]+2763975236&4294967295,R=D+(F<<4&4294967295|F>>>28),F=U+(R^D^$)+M[4]+1272893353&4294967295,U=R+(F<<11&4294967295|F>>>21),F=$+(U^R^D)+M[7]+4139469664&4294967295,$=U+(F<<16&4294967295|F>>>16),F=D+($^U^R)+M[10]+3200236656&4294967295,D=$+(F<<23&4294967295|F>>>9),F=R+(D^$^U)+M[13]+681279174&4294967295,R=D+(F<<4&4294967295|F>>>28),F=U+(R^D^$)+M[0]+3936430074&4294967295,U=R+(F<<11&4294967295|F>>>21),F=$+(U^R^D)+M[3]+3572445317&4294967295,$=U+(F<<16&4294967295|F>>>16),F=D+($^U^R)+M[6]+76029189&4294967295,D=$+(F<<23&4294967295|F>>>9),F=R+(D^$^U)+M[9]+3654602809&4294967295,R=D+(F<<4&4294967295|F>>>28),F=U+(R^D^$)+M[12]+3873151461&4294967295,U=R+(F<<11&4294967295|F>>>21),F=$+(U^R^D)+M[15]+530742520&4294967295,$=U+(F<<16&4294967295|F>>>16),F=D+($^U^R)+M[2]+3299628645&4294967295,D=$+(F<<23&4294967295|F>>>9),F=R+($^(D|~U))+M[0]+4096336452&4294967295,R=D+(F<<6&4294967295|F>>>26),F=U+(D^(R|~$))+M[7]+1126891415&4294967295,U=R+(F<<10&4294967295|F>>>22),F=$+(R^(U|~D))+M[14]+2878612391&4294967295,$=U+(F<<15&4294967295|F>>>17),F=D+(U^($|~R))+M[5]+4237533241&4294967295,D=$+(F<<21&4294967295|F>>>11),F=R+($^(D|~U))+M[12]+1700485571&4294967295,R=D+(F<<6&4294967295|F>>>26),F=U+(D^(R|~$))+M[3]+2399980690&4294967295,U=R+(F<<10&4294967295|F>>>22),F=$+(R^(U|~D))+M[10]+4293915773&4294967295,$=U+(F<<15&4294967295|F>>>17),F=D+(U^($|~R))+M[1]+2240044497&4294967295,D=$+(F<<21&4294967295|F>>>11),F=R+($^(D|~U))+M[8]+1873313359&4294967295,R=D+(F<<6&4294967295|F>>>26),F=U+(D^(R|~$))+M[15]+4264355552&4294967295,U=R+(F<<10&4294967295|F>>>22),F=$+(R^(U|~D))+M[6]+2734768916&4294967295,$=U+(F<<15&4294967295|F>>>17),F=D+(U^($|~R))+M[13]+1309151649&4294967295,D=$+(F<<21&4294967295|F>>>11),F=R+($^(D|~U))+M[4]+4149444226&4294967295,R=D+(F<<6&4294967295|F>>>26),F=U+(D^(R|~$))+M[11]+3174756917&4294967295,U=R+(F<<10&4294967295|F>>>22),F=$+(R^(U|~D))+M[2]+718787259&4294967295,$=U+(F<<15&4294967295|F>>>17),F=D+(U^($|~R))+M[9]+3951481745&4294967295,I.g[0]=I.g[0]+R&4294967295,I.g[1]=I.g[1]+($+(F<<21&4294967295|F>>>11))&4294967295,I.g[2]=I.g[2]+$&4294967295,I.g[3]=I.g[3]+U&4294967295}r.prototype.u=function(I,R){R===void 0&&(R=I.length);for(var D=R-this.blockSize,M=this.B,$=this.h,U=0;U<R;){if($==0)for(;U<=D;)i(this,I,U),U+=this.blockSize;if(typeof I=="string"){for(;U<R;)if(M[$++]=I.charCodeAt(U++),$==this.blockSize){i(this,M),$=0;break}}else for(;U<R;)if(M[$++]=I[U++],$==this.blockSize){i(this,M),$=0;break}}this.h=$,this.o+=R},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var R=1;R<I.length-8;++R)I[R]=0;var D=8*this.o;for(R=I.length-8;R<I.length;++R)I[R]=D&255,D/=256;for(this.u(I),I=Array(16),R=D=0;4>R;++R)for(var M=0;32>M;M+=8)I[D++]=this.g[R]>>>M&255;return I};function s(I,R){var D=a;return Object.prototype.hasOwnProperty.call(D,I)?D[I]:D[I]=R(I)}function o(I,R){this.h=R;for(var D=[],M=!0,$=I.length-1;0<=$;$--){var U=I[$]|0;M&&U==R||(D[$]=U,M=!1)}this.g=D}var a={};function u(I){return-128<=I&&128>I?s(I,function(R){return new o([R|0],0>R?-1:0)}):new o([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return y(l(-I));for(var R=[],D=1,M=0;I>=D;M++)R[M]=I/D|0,D*=4294967296;return new o(R,0)}function c(I,R){if(I.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(I.charAt(0)=="-")return y(c(I.substring(1),R));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=l(Math.pow(R,8)),M=f,$=0;$<I.length;$+=8){var U=Math.min(8,I.length-$),F=parseInt(I.substring($,$+U),R);8>U?(U=l(Math.pow(R,U)),M=M.j(U).add(l(F))):(M=M.j(D),M=M.add(l(F)))}return M}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-y(this).m();for(var I=0,R=1,D=0;D<this.g.length;D++){var M=this.i(D);I+=(0<=M?M:4294967296+M)*R,R*=4294967296}return I},e.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(p(this))return"0";if(m(this))return"-"+y(this).toString(I);for(var R=l(Math.pow(I,6)),D=this,M="";;){var $=E(D,R).g;D=v(D,$.j(R));var U=((0<D.g.length?D.g[0]:D.h)>>>0).toString(I);if(D=$,p(D))return U+M;for(;6>U.length;)U="0"+U;M=U+M}},e.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function p(I){if(I.h!=0)return!1;for(var R=0;R<I.g.length;R++)if(I.g[R]!=0)return!1;return!0}function m(I){return I.h==-1}e.l=function(I){return I=v(this,I),m(I)?-1:p(I)?0:1};function y(I){for(var R=I.g.length,D=[],M=0;M<R;M++)D[M]=~I.g[M];return new o(D,~I.h).add(d)}e.abs=function(){return m(this)?y(this):this},e.add=function(I){for(var R=Math.max(this.g.length,I.g.length),D=[],M=0,$=0;$<=R;$++){var U=M+(this.i($)&65535)+(I.i($)&65535),F=(U>>>16)+(this.i($)>>>16)+(I.i($)>>>16);M=F>>>16,U&=65535,F&=65535,D[$]=F<<16|U}return new o(D,D[D.length-1]&-2147483648?-1:0)};function v(I,R){return I.add(y(R))}e.j=function(I){if(p(this)||p(I))return f;if(m(this))return m(I)?y(this).j(y(I)):y(y(this).j(I));if(m(I))return y(this.j(y(I)));if(0>this.l(h)&&0>I.l(h))return l(this.m()*I.m());for(var R=this.g.length+I.g.length,D=[],M=0;M<2*R;M++)D[M]=0;for(M=0;M<this.g.length;M++)for(var $=0;$<I.g.length;$++){var U=this.i(M)>>>16,F=this.i(M)&65535,H=I.i($)>>>16,Q=I.i($)&65535;D[2*M+2*$]+=F*Q,b(D,2*M+2*$),D[2*M+2*$+1]+=U*Q,b(D,2*M+2*$+1),D[2*M+2*$+1]+=F*H,b(D,2*M+2*$+1),D[2*M+2*$+2]+=U*H,b(D,2*M+2*$+2)}for(M=0;M<R;M++)D[M]=D[2*M+1]<<16|D[2*M];for(M=R;M<2*R;M++)D[M]=0;return new o(D,0)};function b(I,R){for(;(I[R]&65535)!=I[R];)I[R+1]+=I[R]>>>16,I[R]&=65535,R++}function w(I,R){this.g=I,this.h=R}function E(I,R){if(p(R))throw Error("division by zero");if(p(I))return new w(f,f);if(m(I))return R=E(y(I),R),new w(y(R.g),y(R.h));if(m(R))return R=E(I,y(R)),new w(y(R.g),R.h);if(30<I.g.length){if(m(I)||m(R))throw Error("slowDivide_ only works with positive integers.");for(var D=d,M=R;0>=M.l(I);)D=T(D),M=T(M);var $=A(D,1),U=A(M,1);for(M=A(M,2),D=A(D,2);!p(M);){var F=U.add(M);0>=F.l(I)&&($=$.add(D),U=F),M=A(M,1),D=A(D,1)}return R=v(I,$.j(R)),new w($,R)}for($=f;0<=I.l(R);){for(D=Math.max(1,Math.floor(I.m()/R.m())),M=Math.ceil(Math.log(D)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),U=l(D),F=U.j(R);m(F)||0<F.l(I);)D-=M,U=l(D),F=U.j(R);p(U)&&(U=d),$=$.add(U),I=v(I,F)}return new w($,I)}e.A=function(I){return E(this,I).h},e.and=function(I){for(var R=Math.max(this.g.length,I.g.length),D=[],M=0;M<R;M++)D[M]=this.i(M)&I.i(M);return new o(D,this.h&I.h)},e.or=function(I){for(var R=Math.max(this.g.length,I.g.length),D=[],M=0;M<R;M++)D[M]=this.i(M)|I.i(M);return new o(D,this.h|I.h)},e.xor=function(I){for(var R=Math.max(this.g.length,I.g.length),D=[],M=0;M<R;M++)D[M]=this.i(M)^I.i(M);return new o(D,this.h^I.h)};function T(I){for(var R=I.g.length+1,D=[],M=0;M<R;M++)D[M]=I.i(M)<<1|I.i(M-1)>>>31;return new o(D,I.h)}function A(I,R){var D=R>>5;R%=32;for(var M=I.g.length-D,$=[],U=0;U<M;U++)$[U]=0<R?I.i(U+D)>>>R|I.i(U+D+1)<<32-R:I.i(U+D);return new o($,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,r2e=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,lb=o}).apply(typeof vfe<"u"?vfe:typeof self<"u"?self:typeof window<"u"?window:{});var U4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var i2e,LR,s2e,XM,NW,o2e,a2e,u2e;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(N,W,te){return N==Array.prototype||N==Object.prototype||(N[W]=te.value),N};function n(N){N=[typeof globalThis=="object"&&globalThis,N,typeof window=="object"&&window,typeof self=="object"&&self,typeof U4=="object"&&U4];for(var W=0;W<N.length;++W){var te=N[W];if(te&&te.Math==Math)return te}throw Error("Cannot find global object")}var r=n(this);function i(N,W){if(W)e:{var te=r;N=N.split(".");for(var ce=0;ce<N.length-1;ce++){var ze=N[ce];if(!(ze in te))break e;te=te[ze]}N=N[N.length-1],ce=te[N],W=W(ce),W!=ce&&W!=null&&t(te,N,{configurable:!0,writable:!0,value:W})}}function s(N,W){N instanceof String&&(N+="");var te=0,ce=!1,ze={next:function(){if(!ce&&te<N.length){var Ze=te++;return{value:W(Ze,N[Ze]),done:!1}}return ce=!0,{done:!0,value:void 0}}};return ze[Symbol.iterator]=function(){return ze},ze}i("Array.prototype.values",function(N){return N||function(){return s(this,function(W,te){return te})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(N){var W=typeof N;return W=W!="object"?W:N?Array.isArray(N)?"array":W:"null",W=="array"||W=="object"&&typeof N.length=="number"}function l(N){var W=typeof N;return W=="object"&&N!=null||W=="function"}function c(N,W,te){return N.call.apply(N.bind,arguments)}function f(N,W,te){if(!N)throw Error();if(2<arguments.length){var ce=Array.prototype.slice.call(arguments,2);return function(){var ze=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ze,ce),N.apply(W,ze)}}return function(){return N.apply(W,arguments)}}function d(N,W,te){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(N,W){var te=Array.prototype.slice.call(arguments,1);return function(){var ce=te.slice();return ce.push.apply(ce,arguments),N.apply(this,ce)}}function p(N,W){function te(){}te.prototype=W.prototype,N.aa=W.prototype,N.prototype=new te,N.prototype.constructor=N,N.Qb=function(ce,ze,Ze){for(var Ut=Array(arguments.length-2),oi=2;oi<arguments.length;oi++)Ut[oi-2]=arguments[oi];return W.prototype[ze].apply(ce,Ut)}}function m(N){const W=N.length;if(0<W){const te=Array(W);for(let ce=0;ce<W;ce++)te[ce]=N[ce];return te}return[]}function y(N,W){for(let te=1;te<arguments.length;te++){const ce=arguments[te];if(u(ce)){const ze=N.length||0,Ze=ce.length||0;N.length=ze+Ze;for(let Ut=0;Ut<Ze;Ut++)N[ze+Ut]=ce[Ut]}else N.push(ce)}}class v{constructor(W,te){this.i=W,this.j=te,this.h=0,this.g=null}get(){let W;return 0<this.h?(this.h--,W=this.g,this.g=W.next,W.next=null):W=this.i(),W}}function b(N){return/^[\s\xa0]*$/.test(N)}function w(){var N=a.navigator;return N&&(N=N.userAgent)?N:""}function E(N){return E[" "](N),N}E[" "]=function(){};var T=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function A(N,W,te){for(const ce in N)W.call(te,N[ce],ce,N)}function I(N,W){for(const te in N)W.call(void 0,N[te],te,N)}function R(N){const W={};for(const te in N)W[te]=N[te];return W}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(N,W){let te,ce;for(let ze=1;ze<arguments.length;ze++){ce=arguments[ze];for(te in ce)N[te]=ce[te];for(let Ze=0;Ze<D.length;Ze++)te=D[Ze],Object.prototype.hasOwnProperty.call(ce,te)&&(N[te]=ce[te])}}function $(N){var W=1;N=N.split(":");const te=[];for(;0<W&&N.length;)te.push(N.shift()),W--;return N.length&&te.push(N.join(":")),te}function U(N){a.setTimeout(()=>{throw N},0)}function F(){var N=ie;let W=null;return N.g&&(W=N.g,N.g=N.g.next,N.g||(N.h=null),W.next=null),W}class H{constructor(){this.h=this.g=null}add(W,te){const ce=Q.get();ce.set(W,te),this.h?this.h.next=ce:this.g=ce,this.h=ce}}var Q=new v(()=>new J,N=>N.reset());class J{constructor(){this.next=this.g=this.h=null}set(W,te){this.h=W,this.g=te,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,Z=!1,ie=new H,q=()=>{const N=a.Promise.resolve(void 0);ne=()=>{N.then(j)}};var j=()=>{for(var N;N=F();){try{N.h.call(N.g)}catch(te){U(te)}var W=Q;W.j(N),100>W.h&&(W.h++,N.next=W.g,W.g=N)}Z=!1};function G(){this.s=this.s,this.C=this.C}G.prototype.s=!1,G.prototype.ma=function(){this.s||(this.s=!0,this.N())},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(N,W){this.type=N,this.g=this.target=W,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var Y=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var N=!1,W=Object.defineProperty({},"passive",{get:function(){N=!0}});try{const te=()=>{};a.addEventListener("test",te,W),a.removeEventListener("test",te,W)}catch{}return N}();function ee(N,W){if(V.call(this,N?N.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,N){var te=this.type=N.type,ce=N.changedTouches&&N.changedTouches.length?N.changedTouches[0]:null;if(this.target=N.target||N.srcElement,this.g=W,W=N.relatedTarget){if(T){e:{try{E(W.nodeName);var ze=!0;break e}catch{}ze=!1}ze||(W=null)}}else te=="mouseover"?W=N.fromElement:te=="mouseout"&&(W=N.toElement);this.relatedTarget=W,ce?(this.clientX=ce.clientX!==void 0?ce.clientX:ce.pageX,this.clientY=ce.clientY!==void 0?ce.clientY:ce.pageY,this.screenX=ce.screenX||0,this.screenY=ce.screenY||0):(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0),this.button=N.button,this.key=N.key||"",this.ctrlKey=N.ctrlKey,this.altKey=N.altKey,this.shiftKey=N.shiftKey,this.metaKey=N.metaKey,this.pointerId=N.pointerId||0,this.pointerType=typeof N.pointerType=="string"?N.pointerType:ae[N.pointerType]||"",this.state=N.state,this.i=N,N.defaultPrevented&&ee.aa.h.call(this)}}p(ee,V);var ae={2:"touch",3:"pen",4:"mouse"};ee.prototype.h=function(){ee.aa.h.call(this);var N=this.i;N.preventDefault?N.preventDefault():N.returnValue=!1};var _e="closure_listenable_"+(1e6*Math.random()|0),pe=0;function Te(N,W,te,ce,ze){this.listener=N,this.proxy=null,this.src=W,this.type=te,this.capture=!!ce,this.ha=ze,this.key=++pe,this.da=this.fa=!1}function Le(N){N.da=!0,N.listener=null,N.proxy=null,N.src=null,N.ha=null}function ye(N){this.src=N,this.g={},this.h=0}ye.prototype.add=function(N,W,te,ce,ze){var Ze=N.toString();N=this.g[Ze],N||(N=this.g[Ze]=[],this.h++);var Ut=$e(N,W,ce,ze);return-1<Ut?(W=N[Ut],te||(W.fa=!1)):(W=new Te(W,this.src,Ze,!!ce,ze),W.fa=te,N.push(W)),W};function he(N,W){var te=W.type;if(te in N.g){var ce=N.g[te],ze=Array.prototype.indexOf.call(ce,W,void 0),Ze;(Ze=0<=ze)&&Array.prototype.splice.call(ce,ze,1),Ze&&(Le(W),N.g[te].length==0&&(delete N.g[te],N.h--))}}function $e(N,W,te,ce){for(var ze=0;ze<N.length;++ze){var Ze=N[ze];if(!Ze.da&&Ze.listener==W&&Ze.capture==!!te&&Ze.ha==ce)return ze}return-1}var Ne="closure_lm_"+(1e6*Math.random()|0),tt={};function it(N,W,te,ce,ze){if(Array.isArray(W)){for(var Ze=0;Ze<W.length;Ze++)it(N,W[Ze],te,ce,ze);return null}return te=wt(te),N&&N[_e]?N.K(W,te,l(ce)?!!ce.capture:!1,ze):Me(N,W,te,!1,ce,ze)}function Me(N,W,te,ce,ze,Ze){if(!W)throw Error("Invalid event type");var Ut=l(ze)?!!ze.capture:!!ze,oi=qe(N);if(oi||(N[Ne]=oi=new ye(N)),te=oi.add(W,te,ce,Ut,Ze),te.proxy)return te;if(ce=Ge(),te.proxy=ce,ce.src=N,ce.listener=te,N.addEventListener)Y||(ze=Ut),ze===void 0&&(ze=!1),N.addEventListener(W.toString(),ce,ze);else if(N.attachEvent)N.attachEvent(Tt(W.toString()),ce);else if(N.addListener&&N.removeListener)N.addListener(ce);else throw Error("addEventListener and attachEvent are unavailable.");return te}function Ge(){function N(te){return W.call(N.src,N.listener,te)}const W=Ot;return N}function at(N,W,te,ce,ze){if(Array.isArray(W))for(var Ze=0;Ze<W.length;Ze++)at(N,W[Ze],te,ce,ze);else ce=l(ce)?!!ce.capture:!!ce,te=wt(te),N&&N[_e]?(N=N.i,W=String(W).toString(),W in N.g&&(Ze=N.g[W],te=$e(Ze,te,ce,ze),-1<te&&(Le(Ze[te]),Array.prototype.splice.call(Ze,te,1),Ze.length==0&&(delete N.g[W],N.h--)))):N&&(N=qe(N))&&(W=N.g[W.toString()],N=-1,W&&(N=$e(W,te,ce,ze)),(te=-1<N?W[N]:null)&&yt(te))}function yt(N){if(typeof N!="number"&&N&&!N.da){var W=N.src;if(W&&W[_e])he(W.i,N);else{var te=N.type,ce=N.proxy;W.removeEventListener?W.removeEventListener(te,ce,N.capture):W.detachEvent?W.detachEvent(Tt(te),ce):W.addListener&&W.removeListener&&W.removeListener(ce),(te=qe(W))?(he(te,N),te.h==0&&(te.src=null,W[Ne]=null)):Le(N)}}}function Tt(N){return N in tt?tt[N]:tt[N]="on"+N}function Ot(N,W){if(N.da)N=!0;else{W=new ee(W,this);var te=N.listener,ce=N.ha||N.src;N.fa&&yt(N),N=te.call(ce,W)}return N}function qe(N){return N=N[Ne],N instanceof ye?N:null}var ft="__closure_events_fn_"+(1e9*Math.random()>>>0);function wt(N){return typeof N=="function"?N:(N[ft]||(N[ft]=function(W){return N.handleEvent(W)}),N[ft])}function ke(){G.call(this),this.i=new ye(this),this.M=this,this.F=null}p(ke,G),ke.prototype[_e]=!0,ke.prototype.removeEventListener=function(N,W,te,ce){at(this,N,W,te,ce)};function Oe(N,W){var te,ce=N.F;if(ce)for(te=[];ce;ce=ce.F)te.push(ce);if(N=N.M,ce=W.type||W,typeof W=="string")W=new V(W,N);else if(W instanceof V)W.target=W.target||N;else{var ze=W;W=new V(ce,N),M(W,ze)}if(ze=!0,te)for(var Ze=te.length-1;0<=Ze;Ze--){var Ut=W.g=te[Ze];ze=dt(Ut,ce,!0,W)&&ze}if(Ut=W.g=N,ze=dt(Ut,ce,!0,W)&&ze,ze=dt(Ut,ce,!1,W)&&ze,te)for(Ze=0;Ze<te.length;Ze++)Ut=W.g=te[Ze],ze=dt(Ut,ce,!1,W)&&ze}ke.prototype.N=function(){if(ke.aa.N.call(this),this.i){var N=this.i,W;for(W in N.g){for(var te=N.g[W],ce=0;ce<te.length;ce++)Le(te[ce]);delete N.g[W],N.h--}}this.F=null},ke.prototype.K=function(N,W,te,ce){return this.i.add(String(N),W,!1,te,ce)},ke.prototype.L=function(N,W,te,ce){return this.i.add(String(N),W,!0,te,ce)};function dt(N,W,te,ce){if(W=N.i.g[String(W)],!W)return!0;W=W.concat();for(var ze=!0,Ze=0;Ze<W.length;++Ze){var Ut=W[Ze];if(Ut&&!Ut.da&&Ut.capture==te){var oi=Ut.listener,go=Ut.ha||Ut.src;Ut.fa&&he(N.i,Ut),ze=oi.call(go,ce)!==!1&&ze}}return ze&&!ce.defaultPrevented}function Lt(N,W,te){if(typeof N=="function")te&&(N=d(N,te));else if(N&&typeof N.handleEvent=="function")N=d(N.handleEvent,N);else throw Error("Invalid listener argument");return 2147483647<Number(W)?-1:a.setTimeout(N,W||0)}function Ft(N){N.g=Lt(()=>{N.g=null,N.i&&(N.i=!1,Ft(N))},N.l);const W=N.h;N.h=null,N.m.apply(null,W)}class dn extends G{constructor(W,te){super(),this.m=W,this.l=te,this.h=null,this.i=!1,this.g=null}j(W){this.h=arguments,this.g?this.i=!0:Ft(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dn(N){G.call(this),this.h=N,this.g={}}p(Dn,G);var Tr=[];function Ri(N){A(N.g,function(W,te){this.g.hasOwnProperty(te)&&yt(W)},N),N.g={}}Dn.prototype.N=function(){Dn.aa.N.call(this),Ri(this)},Dn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Un=a.JSON.stringify,tr=a.JSON.parse,Si=class{stringify(N){return a.JSON.stringify(N,void 0)}parse(N){return a.JSON.parse(N,void 0)}};function Sr(){}Sr.prototype.h=null;function Po(N){return N.h||(N.h=N.i())}function Qi(){}var Ni={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ji(){V.call(this,"d")}p(Ji,V);function Xr(){V.call(this,"c")}p(Xr,V);var Oo={},ic=null;function ga(){return ic=ic||new ke}Oo.La="serverreachability";function Iu(N){V.call(this,Oo.La,N)}p(Iu,V);function Qr(N){const W=ga();Oe(W,new Iu(W))}Oo.STAT_EVENT="statevent";function Bi(N,W){V.call(this,Oo.STAT_EVENT,N),this.stat=W}p(Bi,V);function si(N){const W=ga();Oe(W,new Bi(W,N))}Oo.Ma="timingevent";function Hs(N,W){V.call(this,Oo.Ma,N),this.size=W}p(Hs,V);function Fr(N,W){if(typeof N!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){N()},W)}function Zi(){this.g=!0}Zi.prototype.xa=function(){this.g=!1};function Mo(N,W,te,ce,ze,Ze){N.info(function(){if(N.g)if(Ze)for(var Ut="",oi=Ze.split("&"),go=0;go<oi.length;go++){var Rr=oi[go].split("=");if(1<Rr.length){var fi=Rr[0];Rr=Rr[1];var Ts=fi.split("_");Ut=2<=Ts.length&&Ts[1]=="type"?Ut+(fi+"="+Rr+"&"):Ut+(fi+"=redacted&")}}else Ut=null;else Ut=Ze;return"XMLHTTP REQ ("+ce+") [attempt "+ze+"]: "+W+`
`+te+`
`+Ut})}function co(N,W,te,ce,ze,Ze,Ut){N.info(function(){return"XMLHTTP RESP ("+ce+") [ attempt "+ze+"]: "+W+`
`+te+`
`+Ze+" "+Ut})}function Ko(N,W,te,ce){N.info(function(){return"XMLHTTP TEXT ("+W+"): "+kh(N,te)+(ce?" "+ce:"")})}function vl(N,W){N.info(function(){return"TIMEOUT: "+W})}Zi.prototype.info=function(){};function kh(N,W){if(!N.g)return W;if(!W)return null;try{var te=JSON.parse(W);if(te){for(N=0;N<te.length;N++)if(Array.isArray(te[N])){var ce=te[N];if(!(2>ce.length)){var ze=ce[1];if(Array.isArray(ze)&&!(1>ze.length)){var Ze=ze[0];if(Ze!="noop"&&Ze!="stop"&&Ze!="close")for(var Ut=1;Ut<ze.length;Ut++)ze[Ut]=""}}}}return Un(te)}catch{return W}}var Pr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},sc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ps;function Wa(){}p(Wa,Sr),Wa.prototype.g=function(){return new XMLHttpRequest},Wa.prototype.i=function(){return{}},ps=new Wa;function Xo(N,W,te,ce){this.j=N,this.i=W,this.l=te,this.R=ce||1,this.U=new Dn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fm}function fm(){this.i=null,this.g="",this.h=!1}var Rh={},yd={};function vd(N,W,te){N.L=1,N.v=nr(xt(W)),N.m=te,N.P=!0,df(N,null)}function df(N,W){N.F=Date.now(),fr(N),N.A=xt(N.v);var te=N.A,ce=N.R;Array.isArray(ce)||(ce=[String(ce)]),gf(te.i,"t",ce),N.C=0,te=N.j.J,N.h=new fm,N.g=cT(N.j,te?W:null,!N.m),0<N.O&&(N.M=new dn(d(N.Y,N,N.g),N.O)),W=N.U,te=N.g,ce=N.ca;var ze="readystatechange";Array.isArray(ze)||(ze&&(Tr[0]=ze.toString()),ze=Tr);for(var Ze=0;Ze<ze.length;Ze++){var Ut=it(te,ze[Ze],ce||W.handleEvent,!1,W.h||W);if(!Ut)break;W.g[Ut.key]=Ut}W=N.H?R(N.H):{},N.m?(N.u||(N.u="POST"),W["Content-Type"]="application/x-www-form-urlencoded",N.g.ea(N.A,N.u,N.m,W)):(N.u="GET",N.g.ea(N.A,N.u,null,W)),Qr(),Mo(N.i,N.u,N.A,N.l,N.R,N.m)}Xo.prototype.ca=function(N){N=N.target;const W=this.M;W&&Jr(N)==3?W.j():this.Y(N)},Xo.prototype.Y=function(N){try{if(N==this.g)e:{const Ts=Jr(this.g);var W=this.g.Ba();const va=this.g.Z();if(!(3>Ts)&&(Ts!=3||this.g&&(this.h.h||this.g.oa()||Gs(this.g)))){this.J||Ts!=4||W==7||(W==8||0>=va?Qr(3):Qr(2)),fo(this);var te=this.g.Z();this.X=te;t:if(hf(this)){var ce=Gs(this.g);N="";var ze=ce.length,Ze=Jr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qs(this),bl(this);var Ut="";break t}this.h.i=new a.TextDecoder}for(W=0;W<ze;W++)this.h.h=!0,N+=this.h.i.decode(ce[W],{stream:!(Ze&&W==ze-1)});ce.length=0,this.h.g+=N,this.C=0,Ut=this.h.g}else Ut=this.g.oa();if(this.o=te==200,co(this.i,this.u,this.A,this.l,this.R,Ts,te),this.o){if(this.T&&!this.K){t:{if(this.g){var oi,go=this.g;if((oi=go.g?go.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(oi)){var Rr=oi;break t}}Rr=null}if(te=Rr)Ko(this.i,this.l,te,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,oc(this,te);else{this.o=!1,this.s=3,si(12),qs(this),bl(this);break e}}if(this.P){te=!0;let Nu;for(;!this.J&&this.C<Ut.length;)if(Nu=pf(this,Ut),Nu==yd){Ts==4&&(this.s=4,si(14),te=!1),Ko(this.i,this.l,null,"[Incomplete Response]");break}else if(Nu==Rh){this.s=4,si(15),Ko(this.i,this.l,Ut,"[Invalid Chunk]"),te=!1;break}else Ko(this.i,this.l,Nu,null),oc(this,Nu);if(hf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ts!=4||Ut.length!=0||this.h.h||(this.s=1,si(16),te=!1),this.o=this.o&&te,!te)Ko(this.i,this.l,Ut,"[Invalid Chunked Response]"),qs(this),bl(this);else if(0<Ut.length&&!this.W){this.W=!0;var fi=this.j;fi.g==this&&fi.ba&&!fi.M&&(fi.j.info("Great, no buffering proxy detected. Bytes received: "+Ut.length),fc(fi),fi.M=!0,si(11))}}else Ko(this.i,this.l,Ut,null),oc(this,Ut);Ts==4&&qs(this),this.o&&!this.J&&(Ts==4?_i(this.j,this):(this.o=!1,fr(this)))}else Ru(this.g),te==400&&0<Ut.indexOf("Unknown SID")?(this.s=3,si(12)):(this.s=0,si(13)),qs(this),bl(this)}}}catch{}finally{}};function hf(N){return N.g?N.u=="GET"&&N.L!=2&&N.j.Ca:!1}function pf(N,W){var te=N.C,ce=W.indexOf(`
`,te);return ce==-1?yd:(te=Number(W.substring(te,ce)),isNaN(te)?Rh:(ce+=1,ce+te>W.length?yd:(W=W.slice(ce,ce+te),N.C=ce+te,W)))}Xo.prototype.cancel=function(){this.J=!0,qs(this)};function fr(N){N.S=Date.now()+N.I,Nh(N,N.I)}function Nh(N,W){if(N.B!=null)throw Error("WatchDog timer not null");N.B=Fr(d(N.ba,N),W)}function fo(N){N.B&&(a.clearTimeout(N.B),N.B=null)}Xo.prototype.ba=function(){this.B=null;const N=Date.now();0<=N-this.S?(vl(this.i,this.A),this.L!=2&&(Qr(),si(17)),qs(this),this.s=2,bl(this)):Nh(this,this.S-N)};function bl(N){N.j.G==0||N.J||_i(N.j,N)}function qs(N){fo(N);var W=N.M;W&&typeof W.ma=="function"&&W.ma(),N.M=null,Ri(N.U),N.g&&(W=N.g,N.g=null,W.abort(),W.ma())}function oc(N,W){try{var te=N.j;if(te.G!=0&&(te.g==N||po(te.h,N))){if(!N.K&&po(te.h,N)&&te.G==3){try{var ce=te.Da.g.parse(W)}catch{ce=null}if(Array.isArray(ce)&&ce.length==3){var ze=ce;if(ze[0]==0){e:if(!te.u){if(te.g)if(te.g.F+3e3<N.F)hm(te),cc(te);else break e;Eg(te),si(18)}}else te.za=ze[1],0<te.za-te.T&&37500>ze[2]&&te.F&&te.v==0&&!te.C&&(te.C=Fr(d(te.Za,te),6e3));if(1>=dm(te.h)&&te.ca){try{te.ca()}catch{}te.ca=void 0}}else _f(te,11)}else if((N.K||te.g==N)&&hm(te),!b(W))for(ze=te.Da.g.parse(W),W=0;W<ze.length;W++){let Rr=ze[W];if(te.T=Rr[0],Rr=Rr[1],te.G==2)if(Rr[0]=="c"){te.K=Rr[1],te.ia=Rr[2];const fi=Rr[3];fi!=null&&(te.la=fi,te.j.info("VER="+te.la));const Ts=Rr[4];Ts!=null&&(te.Aa=Ts,te.j.info("SVER="+te.Aa));const va=Rr[5];va!=null&&typeof va=="number"&&0<va&&(ce=1.5*va,te.L=ce,te.j.info("backChannelRequestTimeoutMs_="+ce)),ce=te;const Nu=N.g;if(Nu){const pm=Nu.g?Nu.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pm){var Ze=ce.h;Ze.g||pm.indexOf("spdy")==-1&&pm.indexOf("quic")==-1&&pm.indexOf("h2")==-1||(Ze.j=Ze.l,Ze.g=new Set,Ze.h&&(ue(Ze,Ze.h),Ze.h=null))}if(ce.D){const H1=Nu.g?Nu.g.getResponseHeader("X-HTTP-Session-Id"):null;H1&&(ce.ya=H1,un(ce.I,ce.D,H1))}}te.G=3,te.l&&te.l.ua(),te.ba&&(te.R=Date.now()-N.F,te.j.info("Handshake RTT: "+te.R+"ms")),ce=te;var Ut=N;if(ce.qa=z1(ce,ce.J?ce.ia:null,ce.W),Ut.K){Se(ce.h,Ut);var oi=Ut,go=ce.L;go&&(oi.I=go),oi.B&&(fo(oi),fr(oi)),ce.g=Ut}else wg(ce);0<te.i.length&&bf(te)}else Rr[0]!="stop"&&Rr[0]!="close"||_f(te,7);else te.G==3&&(Rr[0]=="stop"||Rr[0]=="close"?Rr[0]=="stop"?_f(te,7):Ls(te):Rr[0]!="noop"&&te.l&&te.l.ta(Rr),te.v=0)}}Qr(4)}catch{}}var Dh=class{constructor(N,W){this.g=N,this.map=W}};function ac(N){this.l=N||10,a.PerformanceNavigationTiming?(N=a.performance.getEntriesByType("navigation"),N=0<N.length&&(N[0].nextHopProtocol=="hq"||N[0].nextHopProtocol=="h2")):N=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=N?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ho(N){return N.h?!0:N.g?N.g.size>=N.j:!1}function dm(N){return N.h?1:N.g?N.g.size:0}function po(N,W){return N.h?N.h==W:N.g?N.g.has(W):!1}function ue(N,W){N.g?N.g.add(W):N.h=W}function Se(N,W){N.h&&N.h==W?N.h=null:N.g&&N.g.has(W)&&N.g.delete(W)}ac.prototype.cancel=function(){if(this.i=ge(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const N of this.g.values())N.cancel();this.g.clear()}};function ge(N){if(N.h!=null)return N.i.concat(N.h.D);if(N.g!=null&&N.g.size!==0){let W=N.i;for(const te of N.g.values())W=W.concat(te.D);return W}return m(N.i)}function De(N){if(N.V&&typeof N.V=="function")return N.V();if(typeof Map<"u"&&N instanceof Map||typeof Set<"u"&&N instanceof Set)return Array.from(N.values());if(typeof N=="string")return N.split("");if(u(N)){for(var W=[],te=N.length,ce=0;ce<te;ce++)W.push(N[ce]);return W}W=[],te=0;for(ce in N)W[te++]=N[ce];return W}function Be(N){if(N.na&&typeof N.na=="function")return N.na();if(!N.V||typeof N.V!="function"){if(typeof Map<"u"&&N instanceof Map)return Array.from(N.keys());if(!(typeof Set<"u"&&N instanceof Set)){if(u(N)||typeof N=="string"){var W=[];N=N.length;for(var te=0;te<N;te++)W.push(te);return W}W=[],te=0;for(const ce in N)W[te++]=ce;return W}}}function Re(N,W){if(N.forEach&&typeof N.forEach=="function")N.forEach(W,void 0);else if(u(N)||typeof N=="string")Array.prototype.forEach.call(N,W,void 0);else for(var te=Be(N),ce=De(N),ze=ce.length,Ze=0;Ze<ze;Ze++)W.call(void 0,ce[Ze],te&&te[Ze],N)}var rt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bt(N,W){if(N){N=N.split("&");for(var te=0;te<N.length;te++){var ce=N[te].indexOf("="),ze=null;if(0<=ce){var Ze=N[te].substring(0,ce);ze=N[te].substring(ce+1)}else Ze=N[te];W(Ze,ze?decodeURIComponent(ze.replace(/\+/g," ")):"")}}}function Et(N){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,N instanceof Et){this.h=N.h,Nt(this,N.j),this.o=N.o,this.g=N.g,qt(this,N.s),this.l=N.l;var W=N.i,te=new Lo;te.i=W.i,W.g&&(te.g=new Map(W.g),te.h=W.h),In(this,te),this.m=N.m}else N&&(W=String(N).match(rt))?(this.h=!1,Nt(this,W[1]||"",!0),this.o=ln(W[2]||""),this.g=ln(W[3]||"",!0),qt(this,W[4]),this.l=ln(W[5]||"",!0),In(this,W[6]||"",!0),this.m=ln(W[7]||"")):(this.h=!1,this.i=new Lo(null,this.h))}Et.prototype.toString=function(){var N=[],W=this.j;W&&N.push(br(W,Ga,!0),":");var te=this.g;return(te||W=="file")&&(N.push("//"),(W=this.o)&&N.push(br(W,Ga,!0),"@"),N.push(encodeURIComponent(String(te)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),te=this.s,te!=null&&N.push(":",String(te))),(te=this.l)&&(this.g&&te.charAt(0)!="/"&&N.push("/"),N.push(br(te,te.charAt(0)=="/"?Ph:uc,!0))),(te=this.i.toString())&&N.push("?",te),(te=this.m)&&N.push("#",br(te,Oh)),N.join("")};function xt(N){return new Et(N)}function Nt(N,W,te){N.j=te?ln(W,!0):W,N.j&&(N.j=N.j.replace(/:$/,""))}function qt(N,W){if(W){if(W=Number(W),isNaN(W)||0>W)throw Error("Bad port number "+W);N.s=W}else N.s=null}function In(N,W,te){W instanceof Lo?(N.i=W,ku(N.i,N.h)):(te||(W=br(W,mf)),N.i=new Lo(W,N.h))}function un(N,W,te){N.i.set(W,te)}function nr(N){return un(N,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),N}function ln(N,W){return N?W?decodeURI(N.replace(/%25/g,"%2525")):decodeURIComponent(N):""}function br(N,W,te){return typeof N=="string"?(N=encodeURI(N).replace(W,Ws),te&&(N=N.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N):null}function Ws(N){return N=N.charCodeAt(0),"%"+(N>>4&15).toString(16)+(N&15).toString(16)}var Ga=/[#\/\?@]/g,uc=/[#\?:]/g,Ph=/[#\?]/g,mf=/[#\?@]/g,Oh=/#/g;function Lo(N,W){this.h=this.g=null,this.i=N||null,this.j=!!W}function ms(N){N.g||(N.g=new Map,N.h=0,N.i&&bt(N.i,function(W,te){N.add(decodeURIComponent(W.replace(/\+/g," ")),te)}))}e=Lo.prototype,e.add=function(N,W){ms(this),this.i=null,N=Ka(this,N);var te=this.g.get(N);return te||this.g.set(N,te=[]),te.push(W),this.h+=1,this};function $o(N,W){ms(N),W=Ka(N,W),N.g.has(W)&&(N.i=null,N.h-=N.g.get(W).length,N.g.delete(W))}function Ya(N,W){return ms(N),W=Ka(N,W),N.g.has(W)}e.forEach=function(N,W){ms(this),this.g.forEach(function(te,ce){te.forEach(function(ze){N.call(W,ze,ce,this)},this)},this)},e.na=function(){ms(this);const N=Array.from(this.g.values()),W=Array.from(this.g.keys()),te=[];for(let ce=0;ce<W.length;ce++){const ze=N[ce];for(let Ze=0;Ze<ze.length;Ze++)te.push(W[ce])}return te},e.V=function(N){ms(this);let W=[];if(typeof N=="string")Ya(this,N)&&(W=W.concat(this.g.get(Ka(this,N))));else{N=Array.from(this.g.values());for(let te=0;te<N.length;te++)W=W.concat(N[te])}return W},e.set=function(N,W){return ms(this),this.i=null,N=Ka(this,N),Ya(this,N)&&(this.h-=this.g.get(N).length),this.g.set(N,[W]),this.h+=1,this},e.get=function(N,W){return N?(N=this.V(N),0<N.length?String(N[0]):W):W};function gf(N,W,te){$o(N,W),0<te.length&&(N.i=null,N.g.set(Ka(N,W),m(te)),N.h+=te.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const N=[],W=Array.from(this.g.keys());for(var te=0;te<W.length;te++){var ce=W[te];const Ze=encodeURIComponent(String(ce)),Ut=this.V(ce);for(ce=0;ce<Ut.length;ce++){var ze=Ze;Ut[ce]!==""&&(ze+="="+encodeURIComponent(String(Ut[ce]))),N.push(ze)}}return this.i=N.join("&")};function Ka(N,W){return W=String(W),N.j&&(W=W.toLowerCase()),W}function ku(N,W){W&&!N.j&&(ms(N),N.i=null,N.g.forEach(function(te,ce){var ze=ce.toLowerCase();ce!=ze&&($o(this,ce),gf(this,ze,te))},N)),N.j=W}function j1(N,W){const te=new Zi;if(a.Image){const ce=new Image;ce.onload=h(Es,te,"TestLoadImage: loaded",!0,W,ce),ce.onerror=h(Es,te,"TestLoadImage: error",!1,W,ce),ce.onabort=h(Es,te,"TestLoadImage: abort",!1,W,ce),ce.ontimeout=h(Es,te,"TestLoadImage: timeout",!1,W,ce),a.setTimeout(function(){ce.ontimeout&&ce.ontimeout()},1e4),ce.src=N}else W(!1)}function lc(N,W){const te=new Zi,ce=new AbortController,ze=setTimeout(()=>{ce.abort(),Es(te,"TestPingServer: timeout",!1,W)},1e4);fetch(N,{signal:ce.signal}).then(Ze=>{clearTimeout(ze),Ze.ok?Es(te,"TestPingServer: ok",!0,W):Es(te,"TestPingServer: server error",!1,W)}).catch(()=>{clearTimeout(ze),Es(te,"TestPingServer: error",!1,W)})}function Es(N,W,te,ce,ze){try{ze&&(ze.onload=null,ze.onerror=null,ze.onabort=null,ze.ontimeout=null),ce(te)}catch{}}function jx(){this.g=new Si}function xg(N,W,te){const ce=te||"";try{Re(N,function(ze,Ze){let Ut=ze;l(ze)&&(Ut=Un(ze)),W.push(ce+Ze+"="+encodeURIComponent(Ut))})}catch(ze){throw W.push(ce+"type="+encodeURIComponent("_badmap")),ze}}function yf(N){this.l=N.Ub||null,this.j=N.eb||!1}p(yf,Sr),yf.prototype.g=function(){return new bd(this.l,this.j)},yf.prototype.i=function(N){return function(){return N}}({});function bd(N,W){ke.call(this),this.D=N,this.o=W,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(bd,ke),e=bd.prototype,e.open=function(N,W){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=N,this.A=W,this.readyState=1,dr(this)},e.send=function(N){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const W={headers:this.u,method:this.B,credentials:this.m,cache:void 0};N&&(W.body=N),(this.D||a).fetch(new Request(this.A,W)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xr(this)),this.readyState=0},e.Sa=function(N){if(this.g&&(this.l=N,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=N.headers,this.readyState=2,dr(this)),this.g&&(this.readyState=3,dr(this),this.g)))if(this.responseType==="arraybuffer")N.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in N){if(this.j=N.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;U1(this)}else N.text().then(this.Ra.bind(this),this.ga.bind(this))};function U1(N){N.j.read().then(N.Pa.bind(N)).catch(N.ga.bind(N))}e.Pa=function(N){if(this.g){if(this.o&&N.value)this.response.push(N.value);else if(!this.o){var W=N.value?N.value:new Uint8Array(0);(W=this.v.decode(W,{stream:!N.done}))&&(this.response=this.responseText+=W)}N.done?xr(this):dr(this),this.readyState==3&&U1(this)}},e.Ra=function(N){this.g&&(this.response=this.responseText=N,xr(this))},e.Qa=function(N){this.g&&(this.response=N,xr(this))},e.ga=function(){this.g&&xr(this)};function xr(N){N.readyState=4,N.l=null,N.j=null,N.v=null,dr(N)}e.setRequestHeader=function(N,W){this.u.append(N,W)},e.getResponseHeader=function(N){return this.h&&this.h.get(N.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const N=[],W=this.h.entries();for(var te=W.next();!te.done;)te=te.value,N.push(te[0]+": "+te[1]),te=W.next();return N.join(`\r
`)};function dr(N){N.onreadystatechange&&N.onreadystatechange.call(N)}Object.defineProperty(bd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(N){this.m=N?"include":"same-origin"}});function vf(N){let W="";return A(N,function(te,ce){W+=ce,W+=":",W+=te,W+=`\r
`}),W}function ve(N,W,te){e:{for(ce in te){var ce=!1;break e}ce=!0}ce||(te=vf(te),typeof N=="string"?te!=null&&encodeURIComponent(String(te)):un(N,W,te))}function Ae(N){ke.call(this),this.headers=new Map,this.o=N||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(Ae,ke);var Qe=/^https?$/i,tn=["POST","PUT"];e=Ae.prototype,e.Ha=function(N){this.J=N},e.ea=function(N,W,te,ce){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+N);W=W?W.toUpperCase():"GET",this.D=N,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ps.g(),this.v=this.o?Po(this.o):Po(ps),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(W,String(N),!0),this.B=!1}catch(Ze){rr(this,Ze);return}if(N=te||"",te=new Map(this.headers),ce)if(Object.getPrototypeOf(ce)===Object.prototype)for(var ze in ce)te.set(ze,ce[ze]);else if(typeof ce.keys=="function"&&typeof ce.get=="function")for(const Ze of ce.keys())te.set(Ze,ce.get(Ze));else throw Error("Unknown input type for opt_headers: "+String(ce));ce=Array.from(te.keys()).find(Ze=>Ze.toLowerCase()=="content-type"),ze=a.FormData&&N instanceof a.FormData,!(0<=Array.prototype.indexOf.call(tn,W,void 0))||ce||ze||te.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ze,Ut]of te)this.g.setRequestHeader(Ze,Ut);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Br(this),this.u=!0,this.g.send(N),this.u=!1}catch(Ze){rr(this,Ze)}};function rr(N,W){N.h=!1,N.g&&(N.j=!0,N.g.abort(),N.j=!1),N.l=W,N.m=5,kr(N),cn(N)}function kr(N){N.A||(N.A=!0,Oe(N,"complete"),Oe(N,"error"))}e.abort=function(N){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=N||7,Oe(this,"complete"),Oe(this,"abort"),cn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cn(this,!0)),Ae.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?ci(this):this.bb())},e.bb=function(){ci(this)};function ci(N){if(N.h&&typeof o<"u"&&(!N.v[1]||Jr(N)!=4||N.Z()!=2)){if(N.u&&Jr(N)==4)Lt(N.Ea,0,N);else if(Oe(N,"readystatechange"),Jr(N)==4){N.h=!1;try{const Ut=N.Z();e:switch(Ut){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var W=!0;break e;default:W=!1}var te;if(!(te=W)){var ce;if(ce=Ut===0){var ze=String(N.D).match(rt)[1]||null;!ze&&a.self&&a.self.location&&(ze=a.self.location.protocol.slice(0,-1)),ce=!Qe.test(ze?ze.toLowerCase():"")}te=ce}if(te)Oe(N,"complete"),Oe(N,"success");else{N.m=6;try{var Ze=2<Jr(N)?N.g.statusText:""}catch{Ze=""}N.l=Ze+" ["+N.Z()+"]",kr(N)}}finally{cn(N)}}}}function cn(N,W){if(N.g){Br(N);const te=N.g,ce=N.v[0]?()=>{}:null;N.g=null,N.v=null,W||Oe(N,"ready");try{te.onreadystatechange=ce}catch{}}}function Br(N){N.I&&(a.clearTimeout(N.I),N.I=null)}e.isActive=function(){return!!this.g};function Jr(N){return N.g?N.g.readyState:0}e.Z=function(){try{return 2<Jr(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(N){if(this.g){var W=this.g.responseText;return N&&W.indexOf(N)==0&&(W=W.substring(N.length)),tr(W)}};function Gs(N){try{if(!N.g)return null;if("response"in N.g)return N.g.response;switch(N.H){case"":case"text":return N.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in N.g)return N.g.mozResponseArrayBuffer}return null}catch{return null}}function Ru(N){const W={};N=(N.g&&2<=Jr(N)&&N.g.getAllResponseHeaders()||"").split(`\r
`);for(let ce=0;ce<N.length;ce++){if(b(N[ce]))continue;var te=$(N[ce]);const ze=te[0];if(te=te[1],typeof te!="string")continue;te=te.trim();const Ze=W[ze]||[];W[ze]=Ze,Ze.push(te)}I(W,function(ce){return ce.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function es(N,W,te){return te&&te.internalChannelParams&&te.internalChannelParams[N]||W}function xd(N){this.Aa=0,this.i=[],this.j=new Zi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=es("failFast",!1,N),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=es("baseRetryDelayMs",5e3,N),this.cb=es("retryDelaySeedMs",1e4,N),this.Wa=es("forwardChannelMaxRetries",2,N),this.wa=es("forwardChannelRequestTimeoutMs",2e4,N),this.pa=N&&N.xmlHttpFactory||void 0,this.Xa=N&&N.Tb||void 0,this.Ca=N&&N.useFetchStreams||!1,this.L=void 0,this.J=N&&N.supportsCrossDomainXhr||!1,this.K="",this.h=new ac(N&&N.concurrentRequestLimit),this.Da=new jx,this.P=N&&N.fastHandshake||!1,this.O=N&&N.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=N&&N.Rb||!1,N&&N.xa&&this.j.xa(),N&&N.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&N&&N.detectBufferingProxy||!1,this.ja=void 0,N&&N.longPollingTimeout&&0<N.longPollingTimeout&&(this.ja=N.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=xd.prototype,e.la=8,e.G=1,e.connect=function(N,W,te,ce){si(0),this.W=N,this.H=W||{},te&&ce!==void 0&&(this.H.OSID=te,this.H.OAID=ce),this.F=this.X,this.I=z1(this,null,this.W),bf(this)};function Ls(N){if(_g(N),N.G==3){var W=N.U++,te=xt(N.I);if(un(te,"SID",N.K),un(te,"RID",W),un(te,"TYPE","terminate"),Mh(N,te),W=new Xo(N,N.j,W),W.L=2,W.v=nr(xt(te)),te=!1,a.navigator&&a.navigator.sendBeacon)try{te=a.navigator.sendBeacon(W.v.toString(),"")}catch{}!te&&a.Image&&(new Image().src=W.v,te=!0),te||(W.g=cT(W.j,null),W.g.ea(W.v)),W.F=Date.now(),fr(W)}lT(N)}function cc(N){N.g&&(fc(N),N.g.cancel(),N.g=null)}function _g(N){cc(N),N.u&&(a.clearTimeout(N.u),N.u=null),hm(N),N.h.cancel(),N.s&&(typeof N.s=="number"&&a.clearTimeout(N.s),N.s=null)}function bf(N){if(!ho(N.h)&&!N.s){N.s=!0;var W=N.Ga;ne||q(),Z||(ne(),Z=!0),ie.add(W,N),N.B=0}}function uT(N,W){return dm(N.h)>=N.h.j-(N.s?1:0)?!1:N.s?(N.i=W.D.concat(N.i),!0):N.G==1||N.G==2||N.B>=(N.Va?0:N.Wa)?!1:(N.s=Fr(d(N.Ga,N,W),xf(N,N.B)),N.B++,!0)}e.Ga=function(N){if(this.s)if(this.s=null,this.G==1){if(!N){this.U=Math.floor(1e5*Math.random()),N=this.U++;const ze=new Xo(this,this.j,N);let Ze=this.o;if(this.S&&(Ze?(Ze=R(Ze),M(Ze,this.S)):Ze=this.S),this.m!==null||this.O||(ze.H=Ze,Ze=null),this.P)e:{for(var W=0,te=0;te<this.i.length;te++){t:{var ce=this.i[te];if("__data__"in ce.map&&(ce=ce.map.__data__,typeof ce=="string")){ce=ce.length;break t}ce=void 0}if(ce===void 0)break;if(W+=ce,4096<W){W=te;break e}if(W===4096||te===this.i.length-1){W=te+1;break e}}W=1e3}else W=1e3;W=mo(this,ze,W),te=xt(this.I),un(te,"RID",N),un(te,"CVER",22),this.D&&un(te,"X-HTTP-Session-Id",this.D),Mh(this,te),Ze&&(this.O?W="headers="+encodeURIComponent(String(vf(Ze)))+"&"+W:this.m&&ve(te,this.m,Ze)),ue(this.h,ze),this.Ua&&un(te,"TYPE","init"),this.P?(un(te,"$req",W),un(te,"SID","null"),ze.T=!0,vd(ze,te,null)):vd(ze,te,W),this.G=2}}else this.G==3&&(N?Fo(this,N):this.i.length==0||ho(this.h)||Fo(this))};function Fo(N,W){var te;W?te=W.l:te=N.U++;const ce=xt(N.I);un(ce,"SID",N.K),un(ce,"RID",te),un(ce,"AID",N.T),Mh(N,ce),N.m&&N.o&&ve(ce,N.m,N.o),te=new Xo(N,N.j,te,N.B+1),N.m===null&&(te.H=N.o),W&&(N.i=W.D.concat(N.i)),W=mo(N,te,1e3),te.I=Math.round(.5*N.wa)+Math.round(.5*N.wa*Math.random()),ue(N.h,te),vd(te,ce,W)}function Mh(N,W){N.H&&A(N.H,function(te,ce){un(W,ce,te)}),N.l&&Re({},function(te,ce){un(W,ce,te)})}function mo(N,W,te){te=Math.min(N.i.length,te);var ce=N.l?d(N.l.Na,N.l,N):null;e:{var ze=N.i;let Ze=-1;for(;;){const Ut=["count="+te];Ze==-1?0<te?(Ze=ze[0].g,Ut.push("ofs="+Ze)):Ze=0:Ut.push("ofs="+Ze);let oi=!0;for(let go=0;go<te;go++){let Rr=ze[go].g;const fi=ze[go].map;if(Rr-=Ze,0>Rr)Ze=Math.max(0,ze[go].g-100),oi=!1;else try{xg(fi,Ut,"req"+Rr+"_")}catch{ce&&ce(fi)}}if(oi){ce=Ut.join("&");break e}}}return N=N.i.splice(0,te),W.D=N,ce}function wg(N){if(!N.g&&!N.u){N.Y=1;var W=N.Fa;ne||q(),Z||(ne(),Z=!0),ie.add(W,N),N.v=0}}function Eg(N){return N.g||N.u||3<=N.v?!1:(N.Y++,N.u=Fr(d(N.Fa,N),xf(N,N.v)),N.v++,!0)}e.Fa=function(){if(this.u=null,Tg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var N=2*this.R;this.j.info("BP detection timer enabled: "+N),this.A=Fr(d(this.ab,this),N)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,si(10),cc(this),Tg(this))};function fc(N){N.A!=null&&(a.clearTimeout(N.A),N.A=null)}function Tg(N){N.g=new Xo(N,N.j,"rpc",N.Y),N.m===null&&(N.g.H=N.o),N.g.O=0;var W=xt(N.qa);un(W,"RID","rpc"),un(W,"SID",N.K),un(W,"AID",N.T),un(W,"CI",N.F?"0":"1"),!N.F&&N.ja&&un(W,"TO",N.ja),un(W,"TYPE","xmlhttp"),Mh(N,W),N.m&&N.o&&ve(W,N.m,N.o),N.L&&(N.g.I=N.L);var te=N.g;N=N.ia,te.L=1,te.v=nr(xt(W)),te.m=null,te.P=!0,df(te,N)}e.Za=function(){this.C!=null&&(this.C=null,cc(this),Eg(this),si(19))};function hm(N){N.C!=null&&(a.clearTimeout(N.C),N.C=null)}function _i(N,W){var te=null;if(N.g==W){hm(N),fc(N),N.g=null;var ce=2}else if(po(N.h,W))te=W.D,Se(N.h,W),ce=1;else return;if(N.G!=0){if(W.o)if(ce==1){te=W.m?W.m.length:0,W=Date.now()-W.F;var ze=N.B;ce=ga(),Oe(ce,new Hs(ce,te)),bf(N)}else wg(N);else if(ze=W.s,ze==3||ze==0&&0<W.X||!(ce==1&&uT(N,W)||ce==2&&Eg(N)))switch(te&&0<te.length&&(W=N.h,W.i=W.i.concat(te)),ze){case 1:_f(N,5);break;case 4:_f(N,10);break;case 3:_f(N,6);break;default:_f(N,2)}}}function xf(N,W){let te=N.Ta+Math.floor(Math.random()*N.cb);return N.isActive()||(te*=2),te*W}function _f(N,W){if(N.j.info("Error code "+W),W==2){var te=d(N.fb,N),ce=N.Xa;const ze=!ce;ce=new Et(ce||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Nt(ce,"https"),nr(ce),ze?j1(ce.toString(),te):lc(ce.toString(),te)}else si(2);N.G=0,N.l&&N.l.sa(W),lT(N),_g(N)}e.fb=function(N){N?(this.j.info("Successfully pinged google.com"),si(2)):(this.j.info("Failed to ping google.com"),si(1))};function lT(N){if(N.G=0,N.ka=[],N.l){const W=ge(N.h);(W.length!=0||N.i.length!=0)&&(y(N.ka,W),y(N.ka,N.i),N.h.i.length=0,m(N.i),N.i.length=0),N.l.ra()}}function z1(N,W,te){var ce=te instanceof Et?xt(te):new Et(te);if(ce.g!="")W&&(ce.g=W+"."+ce.g),qt(ce,ce.s);else{var ze=a.location;ce=ze.protocol,W=W?W+"."+ze.hostname:ze.hostname,ze=+ze.port;var Ze=new Et(null);ce&&Nt(Ze,ce),W&&(Ze.g=W),ze&&qt(Ze,ze),te&&(Ze.l=te),ce=Ze}return te=N.D,W=N.ya,te&&W&&un(ce,te,W),un(ce,"VER",N.la),Mh(N,ce),ce}function cT(N,W,te){if(W&&!N.J)throw Error("Can't create secondary domain capable XhrIo object.");return W=N.Ca&&!N.pa?new Ae(new yf({eb:te})):new Ae(N.pa),W.Ha(N.J),W}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ux(){}e=Ux.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function V1(){}V1.prototype.g=function(N,W){return new ya(N,W)};function ya(N,W){ke.call(this),this.g=new xd(W),this.l=N,this.h=W&&W.messageUrlParams||null,N=W&&W.messageHeaders||null,W&&W.clientProtocolHeaderRequired&&(N?N["X-Client-Protocol"]="webchannel":N={"X-Client-Protocol":"webchannel"}),this.g.o=N,N=W&&W.initMessageHeaders||null,W&&W.messageContentType&&(N?N["X-WebChannel-Content-Type"]=W.messageContentType:N={"X-WebChannel-Content-Type":W.messageContentType}),W&&W.va&&(N?N["X-WebChannel-Client-Profile"]=W.va:N={"X-WebChannel-Client-Profile":W.va}),this.g.S=N,(N=W&&W.Sb)&&!b(N)&&(this.g.m=N),this.v=W&&W.supportsCrossDomainXhr||!1,this.u=W&&W.sendRawJson||!1,(W=W&&W.httpSessionIdParam)&&!b(W)&&(this.g.D=W,N=this.h,N!==null&&W in N&&(N=this.h,W in N&&delete N[W])),this.j=new _d(this)}p(ya,ke),ya.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ya.prototype.close=function(){Ls(this.g)},ya.prototype.o=function(N){var W=this.g;if(typeof N=="string"){var te={};te.__data__=N,N=te}else this.u&&(te={},te.__data__=Un(N),N=te);W.i.push(new Dh(W.Ya++,N)),W.G==3&&bf(W)},ya.prototype.N=function(){this.g.l=null,delete this.j,Ls(this.g),delete this.g,ya.aa.N.call(this)};function Sg(N){Ji.call(this),N.__headers__&&(this.headers=N.__headers__,this.statusCode=N.__status__,delete N.__headers__,delete N.__status__);var W=N.__sm__;if(W){e:{for(const te in W){N=te;break e}N=void 0}(this.i=N)&&(N=this.i,W=W!==null&&N in W?W[N]:void 0),this.data=W}else this.data=N}p(Sg,Ji);function Lh(){Xr.call(this),this.status=1}p(Lh,Xr);function _d(N){this.g=N}p(_d,Ux),_d.prototype.ua=function(){Oe(this.g,"a")},_d.prototype.ta=function(N){Oe(this.g,new Sg(N))},_d.prototype.sa=function(N){Oe(this.g,new Lh)},_d.prototype.ra=function(){Oe(this.g,"b")},V1.prototype.createWebChannel=V1.prototype.g,ya.prototype.send=ya.prototype.o,ya.prototype.open=ya.prototype.m,ya.prototype.close=ya.prototype.close,u2e=function(){return new V1},a2e=function(){return ga()},o2e=Oo,NW={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pr.NO_ERROR=0,Pr.TIMEOUT=8,Pr.HTTP_ERROR=6,XM=Pr,sc.COMPLETE="complete",s2e=sc,Qi.EventType=Ni,Ni.OPEN="a",Ni.CLOSE="b",Ni.ERROR="c",Ni.MESSAGE="d",ke.prototype.listen=ke.prototype.K,LR=Qi,Ae.prototype.listenOnce=Ae.prototype.L,Ae.prototype.getLastError=Ae.prototype.Ka,Ae.prototype.getLastErrorCode=Ae.prototype.Ba,Ae.prototype.getStatus=Ae.prototype.Z,Ae.prototype.getResponseJson=Ae.prototype.Oa,Ae.prototype.getResponseText=Ae.prototype.oa,Ae.prototype.send=Ae.prototype.ea,Ae.prototype.setWithCredentials=Ae.prototype.Ha,i2e=Ae}).apply(typeof U4<"u"?U4:typeof self<"u"?self:typeof window<"u"?window:{});const bfe="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Pc.UNAUTHENTICATED=new Pc(null),Pc.GOOGLE_CREDENTIALS=new Pc("google-credentials-uid"),Pc.FIRST_PARTY=new Pc("first-party-uid"),Pc.MOCK_USER=new Pc("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FA="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw=new DB("@firebase/firestore");function e2(){return Hw.logLevel}function nn(e,...t){if(Hw.logLevel<=Or.DEBUG){const n=t.map(mZ);Hw.debug(`Firestore (${FA}): ${e}`,...n)}}function Jy(e,...t){if(Hw.logLevel<=Or.ERROR){const n=t.map(mZ);Hw.error(`Firestore (${FA}): ${e}`,...n)}}function xD(e,...t){if(Hw.logLevel<=Or.WARN){const n=t.map(mZ);Hw.warn(`Firestore (${FA}): ${e}`,...n)}}function mZ(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(e="Unexpected state"){const t=`FIRESTORE (${FA}) INTERNAL ASSERTION FAILED: `+e;throw Jy(t),new Error(t)}function ki(e,t){e||Hn()}function Zn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Qt extends ig{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Act{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Ict{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Pc.UNAUTHENTICATED))}shutdown(){}}class kct{constructor(t){this.t=t,this.currentUser=Pc.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){ki(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new My;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new My,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{nn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(nn("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new My)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(nn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ki(typeof r.accessToken=="string"),new Act(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ki(t===null||typeof t=="string"),new Pc(t)}}class Rct{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Pc.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Nct{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new Rct(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Pc.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Dct{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Pct{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){ki(this.o===void 0);const r=s=>{s.error!=null&&nn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,nn("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{nn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):nn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ki(typeof n.token=="string"),this.R=n.token,new Dct(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oct(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2e{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=Oct(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function qr(e,t){return e<t?-1:e>t?1:0}function cC(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vl=class QM{static now(){return QM.fromMillis(Date.now())}static fromDate(t){return QM.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new QM(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Qt(pt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Qt(pt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Qt(pt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Qt(pt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?qr(this.nanoseconds,t.nanoseconds):qr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{static fromTimestamp(t){return new Jn(t)}static min(){return new Jn(new Vl(0,0))}static max(){return new Jn(new Vl(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(t,n,r){n===void 0?n=0:n>t.length&&Hn(),r===void 0?r=t.length-n:r>t.length-n&&Hn(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Wm.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Wm?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=Wm.compareSegments(t.get(i),n.get(i));if(s!==0)return s}return Math.sign(t.length-n.length)}static compareSegments(t,n){const r=Wm.isNumericId(t),i=Wm.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Wm.extractNumericId(t).compare(Wm.extractNumericId(n)):t<n?-1:t>n?1:0}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return lb.fromString(t.substring(4,t.length-2))}}class bs extends Wm{construct(t,n,r){return new bs(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Qt(pt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new bs(n)}static emptyPath(){return new bs([])}}const Mct=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class du extends Wm{construct(t,n,r){return new du(t,n,r)}static isValidIdentifier(t){return Mct.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),du.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new du(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Qt(pt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new Qt(pt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Qt(pt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Qt(pt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new du(n)}static emptyPath(){return new du([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(t){this.path=t}static fromPath(t){return new Tn(bs.fromString(t))}static fromName(t){return new Tn(bs.fromString(t).popFirst(5))}static empty(){return new Tn(bs.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&bs.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return bs.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Tn(new bs(t.slice()))}}function Lct(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Jn.fromTimestamp(r===1e9?new Vl(n+1,0):new Vl(n,r));return new Tb(i,Tn.empty(),t)}function $ct(e){return new Tb(e.readTime,e.key,-1)}class Tb{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Tb(Jn.min(),Tn.empty(),-1)}static max(){return new Tb(Jn.max(),Tn.empty(),-1)}}function Fct(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Tn.comparator(e.documentKey,t.documentKey),n!==0?n:qr(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bct="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jct{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BA(e){if(e.code!==pt.FAILED_PRECONDITION||e.message!==Bct)throw e;nn("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Hn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new vt((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof vt?n:vt.resolve(n)}catch(n){return vt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):vt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):vt.reject(n)}static resolve(t){return new vt((n,r)=>{n(t)})}static reject(t){return new vt((n,r)=>{r(t)})}static waitFor(t){return new vt((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=vt.resolve(!1);for(const r of t)n=n.next(i=>i?vt.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new vt((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new vt((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function Uct(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function jA(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MB{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}MB.oe=-1;function LB(e){return e==null}function X$(e){return e===0&&1/e==-1/0}function zct(e){return typeof e=="number"&&Number.isInteger(e)&&!X$(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vct(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=xfe(t)),t=Hct(e.get(n),t);return xfe(t)}function Hct(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const s=e.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function xfe(e){return e+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _fe(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function vx(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function c2e(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(t,n){this.comparator=t,this.root=n||uu.EMPTY}insert(t,n){return new Vs(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,uu.BLACK,null,null))}remove(t){return new Vs(this.comparator,this.root.remove(t,this.comparator).copy(null,null,uu.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new z4(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new z4(this.root,t,this.comparator,!1)}getReverseIterator(){return new z4(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new z4(this.root,t,this.comparator,!0)}}class z4{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class uu{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??uu.RED,this.left=i??uu.EMPTY,this.right=s??uu.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new uu(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return uu.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return uu.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,uu.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,uu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Hn();const t=this.left.check();if(t!==this.right.check())throw Hn();return t+(this.isRed()?0:1)}}uu.EMPTY=null,uu.RED=!0,uu.BLACK=!1;uu.EMPTY=new class{constructor(){this.size=0}get key(){throw Hn()}get value(){throw Hn()}get color(){throw Hn()}get left(){throw Hn()}get right(){throw Hn()}copy(t,n,r,i,s){return this}insert(t,n,r){return new uu(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(t){this.comparator=t,this.data=new Vs(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new wfe(this.data.getIterator())}getIteratorFrom(t){return new wfe(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof ca)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new ca(this.comparator);return n.data=t,n}}class wfe{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(t){this.fields=t,t.sort(du.comparator)}static empty(){return new Kf([])}unionWith(t){let n=new ca(du.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Kf(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return cC(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2e extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new f2e("Invalid base64 string: "+s):s}}(t);return new wu(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new wu(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return qr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}wu.EMPTY_BYTE_STRING=new wu("");const qct=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sb(e){if(ki(!!e),typeof e=="string"){let t=0;const n=qct.exec(e);if(ki(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:To(e.seconds),nanos:To(e.nanos)}}function To(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Cb(e){return typeof e=="string"?wu.fromBase64String(e):wu.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gZ(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function $B(e){const t=e.mapValue.fields.__previous_value__;return gZ(t)?$B(t):t}function _D(e){const t=Sb(e.mapValue.fields.__local_write_time__.timestampValue);return new Vl(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wct{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class wD{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new wD("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof wD&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ab(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?gZ(e)?4:Yct(e)?9007199254740991:Gct(e)?10:11:Hn()}function $0(e,t){if(e===t)return!0;const n=Ab(e);if(n!==Ab(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return _D(e).isEqual(_D(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Sb(i.timestampValue),a=Sb(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return Cb(i.bytesValue).isEqual(Cb(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return To(i.geoPointValue.latitude)===To(s.geoPointValue.latitude)&&To(i.geoPointValue.longitude)===To(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return To(i.integerValue)===To(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=To(i.doubleValue),a=To(s.doubleValue);return o===a?X$(o)===X$(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return cC(e.arrayValue.values||[],t.arrayValue.values||[],$0);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(_fe(o)!==_fe(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!$0(o[u],a[u])))return!1;return!0}(e,t);default:return Hn()}}function ED(e,t){return(e.values||[]).find(n=>$0(n,t))!==void 0}function fC(e,t){if(e===t)return 0;const n=Ab(e),r=Ab(t);if(n!==r)return qr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return qr(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=To(s.integerValue||s.doubleValue),u=To(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return Efe(e.timestampValue,t.timestampValue);case 4:return Efe(_D(e),_D(t));case 5:return qr(e.stringValue,t.stringValue);case 6:return function(s,o){const a=Cb(s),u=Cb(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=qr(a[l],u[l]);if(c!==0)return c}return qr(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=qr(To(s.latitude),To(o.latitude));return a!==0?a:qr(To(s.longitude),To(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Tfe(e.arrayValue,t.arrayValue);case 10:return function(s,o){var a,u,l,c;const f=s.fields||{},d=o.fields||{},h=(a=f.value)===null||a===void 0?void 0:a.arrayValue,p=(u=d.value)===null||u===void 0?void 0:u.arrayValue,m=qr(((l=h==null?void 0:h.values)===null||l===void 0?void 0:l.length)||0,((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0);return m!==0?m:Tfe(h,p)}(e.mapValue,t.mapValue);case 11:return function(s,o){if(s===V4.mapValue&&o===V4.mapValue)return 0;if(s===V4.mapValue)return 1;if(o===V4.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=qr(u[f],c[f]);if(d!==0)return d;const h=fC(a[u[f]],l[c[f]]);if(h!==0)return h}return qr(u.length,c.length)}(e.mapValue,t.mapValue);default:throw Hn()}}function Efe(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return qr(e,t);const n=Sb(e),r=Sb(t),i=qr(n.seconds,r.seconds);return i!==0?i:qr(n.nanos,r.nanos)}function Tfe(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=fC(n[i],r[i]);if(s)return s}return qr(n.length,r.length)}function dC(e){return DW(e)}function DW(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=Sb(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Cb(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Tn.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=DW(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${DW(n.fields[o])}`;return i+"}"}(e.mapValue):Hn()}function JM(e){switch(Ab(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=$B(e);return t?16+JM(t):16;case 5:return 2*e.stringValue.length;case 6:return Cb(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+JM(s),0)}(e.arrayValue);case 10:case 11:return function(r){let i=0;return vx(r.fields,(s,o)=>{i+=s.length+JM(o)}),i}(e.mapValue);default:throw Hn()}}function Sfe(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function PW(e){return!!e&&"integerValue"in e}function yZ(e){return!!e&&"arrayValue"in e}function Cfe(e){return!!e&&"nullValue"in e}function Afe(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ZM(e){return!!e&&"mapValue"in e}function Gct(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function MN(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return vx(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=MN(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=MN(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Yct(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(t){this.value=t}static empty(){return new Uc({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!ZM(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=MN(n)}setAll(t){let n=du.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=MN(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());ZM(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return $0(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];ZM(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){vx(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Uc(MN(this.value))}}function d2e(e){const t=[];return vx(e.fields,(n,r)=>{const i=new du([n]);if(ZM(r)){const s=d2e(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new Kf(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new Ju(t,0,Jn.min(),Jn.min(),Jn.min(),Uc.empty(),0)}static newFoundDocument(t,n,r,i){return new Ju(t,1,n,Jn.min(),r,i,0)}static newNoDocument(t,n){return new Ju(t,2,n,Jn.min(),Jn.min(),Uc.empty(),0)}static newUnknownDocument(t,n){return new Ju(t,3,n,Jn.min(),Jn.min(),Uc.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Jn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Uc.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Uc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Jn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ju&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ju(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Q$=class{constructor(t,n){this.position=t,this.inclusive=n}};function Ife(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=Tn.comparator(Tn.fromName(o.referenceValue),n.key):r=fC(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function kfe(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!$0(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(t,n="asc"){this.field=t,this.dir=n}}function Kct(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let h2e=class{};class Ho extends h2e{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new Qct(t,n,r):n==="array-contains"?new eft(t,r):n==="in"?new tft(t,r):n==="not-in"?new nft(t,r):n==="array-contains-any"?new rft(t,r):new Ho(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new Jct(t,r):new Zct(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(fC(n,this.value)):n!==null&&Ab(this.value)===Ab(n)&&this.matchesComparison(fC(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Hn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Lp extends h2e{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new Lp(t,n)}matches(t){return p2e(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function p2e(e){return e.op==="and"}function m2e(e){return Xct(e)&&p2e(e)}function Xct(e){for(const t of e.filters)if(t instanceof Lp)return!1;return!0}function OW(e){if(e instanceof Ho)return e.field.canonicalString()+e.op.toString()+dC(e.value);if(m2e(e))return e.filters.map(t=>OW(t)).join(",");{const t=e.filters.map(n=>OW(n)).join(",");return`${e.op}(${t})`}}function g2e(e,t){return e instanceof Ho?function(r,i){return i instanceof Ho&&r.op===i.op&&r.field.isEqual(i.field)&&$0(r.value,i.value)}(e,t):e instanceof Lp?function(r,i){return i instanceof Lp&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&g2e(o,i.filters[a]),!0):!1}(e,t):void Hn()}function y2e(e){return e instanceof Ho?function(n){return`${n.field.canonicalString()} ${n.op} ${dC(n.value)}`}(e):e instanceof Lp?function(n){return n.op.toString()+" {"+n.getFilters().map(y2e).join(" ,")+"}"}(e):"Filter"}class Qct extends Ho{constructor(t,n,r){super(t,n,r),this.key=Tn.fromName(r.referenceValue)}matches(t){const n=Tn.comparator(t.key,this.key);return this.matchesComparison(n)}}class Jct extends Ho{constructor(t,n){super(t,"in",n),this.keys=v2e("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class Zct extends Ho{constructor(t,n){super(t,"not-in",n),this.keys=v2e("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function v2e(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Tn.fromName(r.referenceValue))}class eft extends Ho{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return yZ(n)&&ED(n.arrayValue,this.value)}}class tft extends Ho{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&ED(this.value.arrayValue,n)}}class nft extends Ho{constructor(t,n){super(t,"not-in",n)}matches(t){if(ED(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!ED(this.value.arrayValue,n)}}class rft extends Ho{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!yZ(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ED(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ift{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Rfe(e,t=null,n=[],r=[],i=null,s=null,o=null){return new ift(e,t,n,r,i,s,o)}function vZ(e){const t=Zn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>OW(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),LB(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>dC(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>dC(r)).join(",")),t.ue=n}return t.ue}function bZ(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Kct(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!g2e(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!kfe(e.startAt,t.startAt)&&kfe(e.endAt,t.endAt)}function MW(e){return Tn.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function sft(e,t,n,r,i,s,o,a){return new UA(e,t,n,r,i,s,o,a)}function xZ(e){return new UA(e)}function Nfe(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function b2e(e){return e.collectionGroup!==null}function LN(e){const t=Zn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ca(du.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new TD(s,r))}),n.has(du.keyField().canonicalString())||t.ce.push(new TD(du.keyField(),r))}return t.ce}function b0(e){const t=Zn(e);return t.le||(t.le=oft(t,LN(e))),t.le}function oft(e,t){if(e.limitType==="F")return Rfe(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new TD(i.field,s)});const n=e.endAt?new Q$(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Q$(e.startAt.position,e.startAt.inclusive):null;return Rfe(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function LW(e,t){const n=e.filters.concat([t]);return new UA(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function $W(e,t,n){return new UA(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function FB(e,t){return bZ(b0(e),b0(t))&&e.limitType===t.limitType}function x2e(e){return`${vZ(b0(e))}|lt:${e.limitType}`}function t2(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>y2e(i)).join(", ")}]`),LB(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>dC(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>dC(i)).join(",")),`Target(${r})`}(b0(e))}; limitType=${e.limitType})`}function BB(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Tn.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of LN(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=Ife(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,LN(r),i)||r.endAt&&!function(o,a,u){const l=Ife(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,LN(r),i))}(e,t)}function aft(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function _2e(e){return(t,n)=>{let r=!1;for(const i of LN(e)){const s=uft(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function uft(e,t,n){const r=e.field.isKeyField()?Tn.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?fC(u,l):Hn()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Hn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){vx(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return c2e(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lft=new Vs(Tn.comparator);function Zy(){return lft}const w2e=new Vs(Tn.comparator);function $R(...e){let t=w2e;for(const n of e)t=t.insert(n.key,n);return t}function E2e(e){let t=w2e;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function mw(){return $N()}function T2e(){return $N()}function $N(){return new ME(e=>e.toString(),(e,t)=>e.isEqual(t))}const cft=new Vs(Tn.comparator),fft=new ca(Tn.comparator);function Mr(...e){let t=fft;for(const n of e)t=t.add(n);return t}const dft=new ca(qr);function hft(){return dft}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _Z(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:X$(t)?"-0":t}}function S2e(e){return{integerValue:""+e}}function pft(e,t){return zct(t)?S2e(t):_Z(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jB{constructor(){this._=void 0}}function mft(e,t,n){return e instanceof SD?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&gZ(s)&&(s=$B(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof CD?A2e(e,t):e instanceof AD?I2e(e,t):function(i,s){const o=C2e(i,s),a=Dfe(o)+Dfe(i.Pe);return PW(o)&&PW(i.Pe)?S2e(a):_Z(i.serializer,a)}(e,t)}function gft(e,t,n){return e instanceof CD?A2e(e,t):e instanceof AD?I2e(e,t):n}function C2e(e,t){return e instanceof J$?function(r){return PW(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class SD extends jB{}class CD extends jB{constructor(t){super(),this.elements=t}}function A2e(e,t){const n=k2e(t);for(const r of e.elements)n.some(i=>$0(i,r))||n.push(r);return{arrayValue:{values:n}}}class AD extends jB{constructor(t){super(),this.elements=t}}function I2e(e,t){let n=k2e(t);for(const r of e.elements)n=n.filter(i=>!$0(i,r));return{arrayValue:{values:n}}}class J$ extends jB{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function Dfe(e){return To(e.integerValue||e.doubleValue)}function k2e(e){return yZ(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yft{constructor(t,n){this.field=t,this.transform=n}}function vft(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof CD&&i instanceof CD||r instanceof AD&&i instanceof AD?cC(r.elements,i.elements,$0):r instanceof J$&&i instanceof J$?$0(r.Pe,i.Pe):r instanceof SD&&i instanceof SD}(e.transform,t.transform)}class bft{constructor(t,n){this.version=t,this.transformResults=n}}class ed{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new ed}static exists(t){return new ed(void 0,t)}static updateTime(t){return new ed(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function eL(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class UB{}function R2e(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new wZ(e.key,ed.none()):new QP(e.key,e.data,ed.none());{const n=e.data,r=Uc.empty();let i=new ca(du.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new bx(e.key,r,new Kf(i.toArray()),ed.none())}}function xft(e,t,n){e instanceof QP?function(i,s,o){const a=i.value.clone(),u=Ofe(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof bx?function(i,s,o){if(!eL(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Ofe(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(N2e(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function FN(e,t,n,r){return e instanceof QP?function(s,o,a,u){if(!eL(s.precondition,o))return a;const l=s.value.clone(),c=Mfe(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof bx?function(s,o,a,u){if(!eL(s.precondition,o))return a;const l=Mfe(s.fieldTransforms,u,o),c=o.data;return c.setAll(N2e(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return eL(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function _ft(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=C2e(r.transform,i||null);s!=null&&(n===null&&(n=Uc.empty()),n.set(r.field,s))}return n||null}function Pfe(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&cC(r,i,(s,o)=>vft(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class QP extends UB{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class bx extends UB{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function N2e(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Ofe(e,t,n){const r=new Map;ki(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,gft(o,a,n[i]))}return r}function Mfe(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,mft(s,o,t))}return r}class wZ extends UB{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wft extends UB{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eft{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&xft(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=FN(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=FN(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=T2e();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=R2e(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Jn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Mr())}isEqual(t){return this.batchId===t.batchId&&cC(this.mutations,t.mutations,(n,r)=>Pfe(n,r))&&cC(this.baseMutations,t.baseMutations,(n,r)=>Pfe(n,r))}}class EZ{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){ki(t.mutations.length===r.length);let i=function(){return cft}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new EZ(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tft{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sft{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Uo,ni;function Cft(e){switch(e){default:return Hn();case pt.CANCELLED:case pt.UNKNOWN:case pt.DEADLINE_EXCEEDED:case pt.RESOURCE_EXHAUSTED:case pt.INTERNAL:case pt.UNAVAILABLE:case pt.UNAUTHENTICATED:return!1;case pt.INVALID_ARGUMENT:case pt.NOT_FOUND:case pt.ALREADY_EXISTS:case pt.PERMISSION_DENIED:case pt.FAILED_PRECONDITION:case pt.ABORTED:case pt.OUT_OF_RANGE:case pt.UNIMPLEMENTED:case pt.DATA_LOSS:return!0}}function D2e(e){if(e===void 0)return Jy("GRPC error has no .code"),pt.UNKNOWN;switch(e){case Uo.OK:return pt.OK;case Uo.CANCELLED:return pt.CANCELLED;case Uo.UNKNOWN:return pt.UNKNOWN;case Uo.DEADLINE_EXCEEDED:return pt.DEADLINE_EXCEEDED;case Uo.RESOURCE_EXHAUSTED:return pt.RESOURCE_EXHAUSTED;case Uo.INTERNAL:return pt.INTERNAL;case Uo.UNAVAILABLE:return pt.UNAVAILABLE;case Uo.UNAUTHENTICATED:return pt.UNAUTHENTICATED;case Uo.INVALID_ARGUMENT:return pt.INVALID_ARGUMENT;case Uo.NOT_FOUND:return pt.NOT_FOUND;case Uo.ALREADY_EXISTS:return pt.ALREADY_EXISTS;case Uo.PERMISSION_DENIED:return pt.PERMISSION_DENIED;case Uo.FAILED_PRECONDITION:return pt.FAILED_PRECONDITION;case Uo.ABORTED:return pt.ABORTED;case Uo.OUT_OF_RANGE:return pt.OUT_OF_RANGE;case Uo.UNIMPLEMENTED:return pt.UNIMPLEMENTED;case Uo.DATA_LOSS:return pt.DATA_LOSS;default:return Hn()}}(ni=Uo||(Uo={}))[ni.OK=0]="OK",ni[ni.CANCELLED=1]="CANCELLED",ni[ni.UNKNOWN=2]="UNKNOWN",ni[ni.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ni[ni.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ni[ni.NOT_FOUND=5]="NOT_FOUND",ni[ni.ALREADY_EXISTS=6]="ALREADY_EXISTS",ni[ni.PERMISSION_DENIED=7]="PERMISSION_DENIED",ni[ni.UNAUTHENTICATED=16]="UNAUTHENTICATED",ni[ni.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ni[ni.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ni[ni.ABORTED=10]="ABORTED",ni[ni.OUT_OF_RANGE=11]="OUT_OF_RANGE",ni[ni.UNIMPLEMENTED=12]="UNIMPLEMENTED",ni[ni.INTERNAL=13]="INTERNAL",ni[ni.UNAVAILABLE=14]="UNAVAILABLE",ni[ni.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aft(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ift=new lb([4294967295,4294967295],0);function Lfe(e){const t=Aft().encode(e),n=new r2e;return n.update(t),new Uint8Array(n.digest())}function $fe(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new lb([n,r],0),new lb([i,s],0)]}class TZ{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new FR(`Invalid padding: ${n}`);if(r<0)throw new FR(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new FR(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new FR(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*t.length-n,this.Ie=lb.fromNumber(this.Te)}de(t,n,r){let i=t.add(n.multiply(lb.fromNumber(r)));return i.compare(Ift)===1&&(i=new lb([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}Ee(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;const n=Lfe(t),[r,i]=$fe(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ee(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new TZ(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Te===0)return;const n=Lfe(t),[r,i]=$fe(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class FR extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zB{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,JP.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new zB(Jn.min(),i,new Vs(qr),Zy(),Mr())}}class JP{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new JP(r,n,Mr(),Mr(),Mr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class P2e{constructor(t,n){this.targetId=t,this.me=n}}class O2e{constructor(t,n,r=wu.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Ffe{constructor(){this.fe=0,this.ge=Bfe(),this.pe=wu.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=Mr(),n=Mr(),r=Mr();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Hn()}}),new JP(this.pe,this.ye,t,n,r)}Ce(){this.we=!1,this.ge=Bfe()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,ki(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class kft{constructor(t){this.Be=t,this.Le=new Map,this.ke=Zy(),this.qe=H4(),this.Qe=H4(),this.Ke=new Vs(qr)}$e(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.Ue(n,t.Ve):this.We(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.We(n,t.key,t.Ve)}Ge(t){this.forEachTarget(t,n=>{const r=this.ze(n);switch(t.state){case 0:this.je(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.je(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.De(t.resumeToken));break;default:Hn()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Le.forEach((r,i)=>{this.je(i)&&n(i)})}Je(t){const n=t.targetId,r=t.me.count,i=this.Ye(n);if(i){const s=i.target;if(MW(s))if(r===0){const o=new Tn(s.path);this.We(n,o,Ju.newNoDocument(o,Jn.min()))}else ki(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(t),u=a?this.et(a,t,o):1;if(u!==0){this.He(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}}}}}Xe(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Cb(r).toUint8Array()}catch(u){if(u instanceof f2e)return xD("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new TZ(o,i,s)}catch(u){return xD(u instanceof FR?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Te===0?null:a}et(t,n,r){return n.me.count===r-this.rt(t,n.targetId)?0:2}rt(t,n){const r=this.Be.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.We(n,s,null),i++)}),i}it(t){const n=new Map;this.Le.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&MW(a.target)){const u=new Tn(a.target.path);this.st(u).has(o)||this.ot(o,u)||this.We(o,u,Ju.newNoDocument(u,t))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Mr();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Ye(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new zB(t,n,this.Ke,this.ke,r);return this.ke=Zy(),this.qe=H4(),this.Qe=H4(),this.Ke=new Vs(qr),i}Ue(t,n){if(!this.je(t))return;const r=this.ot(t,n.key)?2:0;this.ze(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(t))}We(t,n,r){if(!this.je(t))return;const i=this.ze(t);this.ot(t,n)?i.Fe(n,1):i.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(t)),this.Qe=this.Qe.insert(n,this._t(n).add(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Le.delete(t)}Ze(t){const n=this.ze(t).ve();return this.Be.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.ze(t).xe()}ze(t){let n=this.Le.get(t);return n||(n=new Ffe,this.Le.set(t,n)),n}_t(t){let n=this.Qe.get(t);return n||(n=new ca(qr),this.Qe=this.Qe.insert(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new ca(qr),this.qe=this.qe.insert(t,n)),n}je(t){const n=this.Ye(t)!==null;return n||nn("WatchChangeAggregator","Detected inactive target",t),n}Ye(t){const n=this.Le.get(t);return n&&n.Se?null:this.Be.ut(t)}He(t){this.Le.set(t,new Ffe),this.Be.getRemoteKeysForTarget(t).forEach(n=>{this.We(t,n,null)})}ot(t,n){return this.Be.getRemoteKeysForTarget(t).has(n)}}function H4(){return new Vs(Tn.comparator)}function Bfe(){return new Vs(Tn.comparator)}const Rft={asc:"ASCENDING",desc:"DESCENDING"},Nft={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Dft={and:"AND",or:"OR"};class Pft{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function FW(e,t){return e.useProto3Json||LB(t)?t:{value:t}}function Z$(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function M2e(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Oft(e,t){return Z$(e,t.toTimestamp())}function x0(e){return ki(!!e),Jn.fromTimestamp(function(n){const r=Sb(n);return new Vl(r.seconds,r.nanos)}(e))}function SZ(e,t){return BW(e,t).canonicalString()}function BW(e,t){const n=function(i){return new bs(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function L2e(e){const t=bs.fromString(e);return ki(U2e(t)),t}function jW(e,t){return SZ(e.databaseId,t.path)}function Uz(e,t){const n=L2e(t);if(n.get(1)!==e.databaseId.projectId)throw new Qt(pt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Qt(pt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Tn(F2e(n))}function $2e(e,t){return SZ(e.databaseId,t)}function Mft(e){const t=L2e(e);return t.length===4?bs.emptyPath():F2e(t)}function UW(e){return new bs(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function F2e(e){return ki(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function jfe(e,t,n){return{name:jW(e,t),fields:n.value.mapValue.fields}}function Lft(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Hn()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(ki(c===void 0||typeof c=="string"),wu.fromBase64String(c||"")):(ki(c===void 0||c instanceof Buffer||c instanceof Uint8Array),wu.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?pt.UNKNOWN:D2e(l.code);return new Qt(c,l.message||"")}(o);n=new O2e(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Uz(e,r.document.name),s=x0(r.document.updateTime),o=r.document.createTime?x0(r.document.createTime):Jn.min(),a=new Uc({mapValue:{fields:r.document.fields}}),u=Ju.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new tL(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Uz(e,r.document),s=r.readTime?x0(r.readTime):Jn.min(),o=Ju.newNoDocument(i,s),a=r.removedTargetIds||[];n=new tL([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Uz(e,r.document),s=r.removedTargetIds||[];n=new tL([],s,i,null)}else{if(!("filter"in t))return Hn();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Sft(i,s),a=r.targetId;n=new P2e(a,o)}}return n}function $ft(e,t){let n;if(t instanceof QP)n={update:jfe(e,t.key,t.value)};else if(t instanceof wZ)n={delete:jW(e,t.key)};else if(t instanceof bx)n={update:jfe(e,t.key,t.data),updateMask:Wft(t.fieldMask)};else{if(!(t instanceof wft))return Hn();n={verify:jW(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof SD)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof CD)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof AD)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof J$)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Hn()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Oft(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Hn()}(e,t.precondition)),n}function Fft(e,t){return e&&e.length>0?(ki(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?x0(i.updateTime):x0(s);return o.isEqual(Jn.min())&&(o=x0(s)),new bft(o,i.transformResults||[])}(n,t))):[]}function Bft(e,t){return{documents:[$2e(e,t.path)]}}function jft(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=$2e(e,i);const s=function(l){if(l.length!==0)return j2e(Lp.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:n2(d.field),direction:Vft(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=FW(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{ct:n,parent:i}}function Uft(e){let t=Mft(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ki(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=B2e(f);return d instanceof Lp&&m2e(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new TD(r2(p.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,LB(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new Q$(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new Q$(h,d)}(n.endAt)),sft(t,i,o,s,a,"F",u,l)}function zft(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Hn()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function B2e(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=r2(n.unaryFilter.field);return Ho.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=r2(n.unaryFilter.field);return Ho.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=r2(n.unaryFilter.field);return Ho.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=r2(n.unaryFilter.field);return Ho.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Hn()}}(e):e.fieldFilter!==void 0?function(n){return Ho.create(r2(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Hn()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Lp.create(n.compositeFilter.filters.map(r=>B2e(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Hn()}}(n.compositeFilter.op))}(e):Hn()}function Vft(e){return Rft[e]}function Hft(e){return Nft[e]}function qft(e){return Dft[e]}function n2(e){return{fieldPath:e.canonicalString()}}function r2(e){return du.fromServerFormat(e.fieldPath)}function j2e(e){return e instanceof Ho?function(n){if(n.op==="=="){if(Afe(n.value))return{unaryFilter:{field:n2(n.field),op:"IS_NAN"}};if(Cfe(n.value))return{unaryFilter:{field:n2(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Afe(n.value))return{unaryFilter:{field:n2(n.field),op:"IS_NOT_NAN"}};if(Cfe(n.value))return{unaryFilter:{field:n2(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:n2(n.field),op:Hft(n.op),value:n.value}}}(e):e instanceof Lp?function(n){const r=n.getFilters().map(i=>j2e(i));return r.length===1?r[0]:{compositeFilter:{op:qft(n.op),filters:r}}}(e):Hn()}function Wft(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function U2e(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(t,n,r,i,s=Jn.min(),o=Jn.min(),a=wu.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new Kv(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Kv(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Kv(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Kv(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gft{constructor(t){this.ht=t}}function Yft(e){const t=Uft({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?$W(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kft{constructor(){this.ln=new Xft}addToCollectionParentIndex(t,n){return this.ln.add(n),vt.resolve()}getCollectionParents(t,n){return vt.resolve(this.ln.getEntries(n))}addFieldIndex(t,n){return vt.resolve()}deleteFieldIndex(t,n){return vt.resolve()}deleteAllFieldIndexes(t){return vt.resolve()}createTargetIndexes(t,n){return vt.resolve()}getDocumentsMatchingTarget(t,n){return vt.resolve(null)}getIndexType(t,n){return vt.resolve(0)}getFieldIndexes(t,n){return vt.resolve([])}getNextCollectionGroupToUpdate(t){return vt.resolve(null)}getMinOffset(t,n){return vt.resolve(Tb.min())}getMinOffsetFromCollectionGroup(t,n){return vt.resolve(Tb.min())}updateCollectionGroup(t,n,r){return vt.resolve()}updateIndexEntries(t,n){return vt.resolve()}}class Xft{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new ca(bs.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new ca(bs.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ufe={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Oc{static withCacheSize(t){return new Oc(t,Oc.DEFAULT_COLLECTION_PERCENTILE,Oc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Oc.DEFAULT_COLLECTION_PERCENTILE=10,Oc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Oc.DEFAULT=new Oc(41943040,Oc.DEFAULT_COLLECTION_PERCENTILE,Oc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Oc.DISABLED=new Oc(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(t){this.kn=t}next(){return this.kn+=2,this.kn}static qn(){return new hC(0)}static Qn(){return new hC(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zfe([e,t],[n,r]){const i=qr(e,n);return i===0?qr(t,r):i}class Qft{constructor(t){this.Gn=t,this.buffer=new ca(zfe),this.zn=0}jn(){return++this.zn}Hn(t){const n=[t,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();zfe(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Jft{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(t){nn("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){jA(n)?nn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await BA(n)}await this.Yn(3e5)})}}class Zft{constructor(t,n){this.Zn=t,this.params=n}calculateTargetCount(t,n){return this.Zn.Xn(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return vt.resolve(MB.oe);const r=new Qft(n);return this.Zn.forEachTarget(t,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(t,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.Zn.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.Zn.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(nn("LruGarbageCollector","Garbage collection skipped; disabled"),vt.resolve(Ufe)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(nn("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ufe):this.tr(t,n))}getCacheSize(t){return this.Zn.getCacheSize(t)}tr(t,n){let r,i,s,o,a,u,l;const c=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(nn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(t,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(t,r,n))).next(f=>(s=f,u=Date.now(),this.removeOrphanedDocuments(t,r))).next(f=>(l=Date.now(),e2()<=Or.DEBUG&&nn("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(l-u)+`ms
Total Duration: ${l-c}ms`),vt.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function edt(e,t){return new Zft(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tdt{constructor(){this.changes=new ME(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Ju.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?vt.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ndt{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rdt{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&FN(r.mutation,i,Kf.empty(),Vl.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Mr()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Mr()){const i=mw();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=$R();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=mw();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Mr()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=Zy();const o=$N(),a=function(){return $N()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof bx)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),FN(c.mutation,l,c.mutation.getFieldMask(),Vl.now())):o.set(l.key,Kf.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new ndt(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=$N();let i=new Vs((o,a)=>o-a),s=Mr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||Kf.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||Mr()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=T2e();c.forEach(d=>{if(!s.has(d)){const h=R2e(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return vt.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return Tn.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):b2e(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):vt.resolve(mw());let a=-1,u=s;return o.next(l=>vt.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?vt.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,Mr())).next(c=>({batchId:a,changes:E2e(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Tn(n)).next(r=>{let i=$R();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=$R();return this.indexManager.getCollectionParents(t,s).next(a=>vt.forEach(a,u=>{const l=function(f,d){return new UA(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,Ju.newInvalidDocument(c)))});let a=$R();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&FN(c.mutation,l,Kf.empty(),Vl.now()),BB(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class idt{constructor(t){this.serializer=t,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(t,n){return vt.resolve(this.Tr.get(n))}saveBundleMetadata(t,n){return this.Tr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:x0(i.createTime)}}(n)),vt.resolve()}getNamedQuery(t,n){return vt.resolve(this.Ir.get(n))}saveNamedQuery(t,n){return this.Ir.set(n.name,function(i){return{name:i.name,query:Yft(i.bundledQuery),readTime:x0(i.readTime)}}(n)),vt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sdt{constructor(){this.overlays=new Vs(Tn.comparator),this.dr=new Map}getOverlay(t,n){return vt.resolve(this.overlays.get(n))}getOverlays(t,n){const r=mw();return vt.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.Tt(t,n,s)}),vt.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.dr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.dr.delete(r)),vt.resolve()}getOverlaysForCollection(t,n,r){const i=mw(),s=n.length+1,o=new Tn(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return vt.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new Vs((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=mw(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=mw(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return vt.resolve(a)}Tt(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.dr.get(i.largestBatchId).delete(r.key);this.dr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Tft(n,r));let s=this.dr.get(n);s===void 0&&(s=Mr(),this.dr.set(n,s)),this.dr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class odt{constructor(){this.sessionToken=wu.EMPTY_BYTE_STRING}getSessionToken(t){return vt.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,vt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CZ{constructor(){this.Er=new ca(Ra.Ar),this.Rr=new ca(Ra.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(t,n){const r=new Ra(t,n);this.Er=this.Er.add(r),this.Rr=this.Rr.add(r)}mr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.gr(new Ra(t,n))}pr(t,n){t.forEach(r=>this.removeReference(r,n))}yr(t){const n=new Tn(new bs([])),r=new Ra(n,t),i=new Ra(n,t+1),s=[];return this.Rr.forEachInRange([r,i],o=>{this.gr(o),s.push(o.key)}),s}wr(){this.Er.forEach(t=>this.gr(t))}gr(t){this.Er=this.Er.delete(t),this.Rr=this.Rr.delete(t)}Sr(t){const n=new Tn(new bs([])),r=new Ra(n,t),i=new Ra(n,t+1);let s=Mr();return this.Rr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Ra(t,0),r=this.Er.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Ra{constructor(t,n){this.key=t,this.br=n}static Ar(t,n){return Tn.comparator(t.key,n.key)||qr(t.br,n.br)}static Vr(t,n){return qr(t.br,n.br)||Tn.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class adt{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new ca(Ra.Ar)}checkEmpty(t){return vt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Eft(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.vr=this.vr.add(new Ra(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return vt.resolve(o)}lookupMutationBatch(t,n){return vt.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.Fr(r),s=i<0?0:i;return vt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return vt.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(t){return vt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Ra(n,0),i=new Ra(n,Number.POSITIVE_INFINITY),s=[];return this.vr.forEachInRange([r,i],o=>{const a=this.Cr(o.br);s.push(a)}),vt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new ca(qr);return n.forEach(i=>{const s=new Ra(i,0),o=new Ra(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([s,o],a=>{r=r.add(a.br)})}),vt.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;Tn.isDocumentKey(s)||(s=s.child(""));const o=new Ra(new Tn(s),0);let a=new ca(qr);return this.vr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.br)),!0)},o),vt.resolve(this.Mr(a))}Mr(t){const n=[];return t.forEach(r=>{const i=this.Cr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){ki(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return vt.forEach(n.mutations,i=>{const s=new Ra(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.vr=r})}Bn(t){}containsKey(t,n){const r=new Ra(n,0),i=this.vr.firstAfterOrEqual(r);return vt.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,vt.resolve()}Or(t,n){return this.Fr(t)}Fr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Cr(t){const n=this.Fr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class udt{constructor(t){this.Nr=t,this.docs=function(){return new Vs(Tn.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Nr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return vt.resolve(r?r.document.mutableCopy():Ju.newInvalidDocument(n))}getEntries(t,n){let r=Zy();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ju.newInvalidDocument(i))}),vt.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=Zy();const o=n.path,a=new Tn(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||Fct($ct(c),r)<=0||(i.has(c.key)||BB(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return vt.resolve(s)}getAllFromCollectionGroup(t,n,r,i){Hn()}Br(t,n){return vt.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new ldt(this)}getSize(t){return vt.resolve(this.size)}}class ldt extends tdt{constructor(t){super(),this.hr=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.hr.addEntry(t,i)):this.hr.removeEntry(r)}),vt.waitFor(n)}getFromCache(t,n){return this.hr.getEntry(t,n)}getAllFromCache(t,n){return this.hr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cdt{constructor(t){this.persistence=t,this.Lr=new ME(n=>vZ(n),bZ),this.lastRemoteSnapshotVersion=Jn.min(),this.highestTargetId=0,this.kr=0,this.qr=new CZ,this.targetCount=0,this.Qr=hC.qn()}forEachTarget(t,n){return this.Lr.forEach((r,i)=>n(i)),vt.resolve()}getLastRemoteSnapshotVersion(t){return vt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return vt.resolve(this.kr)}allocateTargetId(t){return this.highestTargetId=this.Qr.next(),vt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.kr&&(this.kr=n),vt.resolve()}Un(t){this.Lr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Qr=new hC(n),this.highestTargetId=n),t.sequenceNumber>this.kr&&(this.kr=t.sequenceNumber)}addTargetData(t,n){return this.Un(n),this.targetCount+=1,vt.resolve()}updateTargetData(t,n){return this.Un(n),vt.resolve()}removeTargetData(t,n){return this.Lr.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,vt.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Lr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Lr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),vt.waitFor(s).next(()=>i)}getTargetCount(t){return vt.resolve(this.targetCount)}getTargetData(t,n){const r=this.Lr.get(n)||null;return vt.resolve(r)}addMatchingKeys(t,n,r){return this.qr.mr(n,r),vt.resolve()}removeMatchingKeys(t,n,r){this.qr.pr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),vt.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.qr.yr(n),vt.resolve()}getMatchingKeysForTargetId(t,n){const r=this.qr.Sr(n);return vt.resolve(r)}containsKey(t,n){return vt.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2e{constructor(t,n){this.Kr={},this.overlays={},this.$r=new MB(0),this.Ur=!1,this.Ur=!0,this.Wr=new odt,this.referenceDelegate=t(this),this.Gr=new cdt(this),this.indexManager=new Kft,this.remoteDocumentCache=function(i){return new udt(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new Gft(n),this.jr=new idt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new sdt,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Kr[t.toKey()];return r||(r=new adt(n,this.referenceDelegate),this.Kr[t.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(t,n,r){nn("MemoryPersistence","Starting transaction:",t);const i=new fdt(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(s=>this.referenceDelegate.Jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Yr(t,n){return vt.or(Object.values(this.Kr).map(r=>()=>r.containsKey(t,n)))}}class fdt extends jct{constructor(t){super(),this.currentSequenceNumber=t}}class AZ{constructor(t){this.persistence=t,this.Zr=new CZ,this.Xr=null}static ei(t){return new AZ(t)}get ti(){if(this.Xr)return this.Xr;throw Hn()}addReference(t,n,r){return this.Zr.addReference(r,n),this.ti.delete(r.toString()),vt.resolve()}removeReference(t,n,r){return this.Zr.removeReference(r,n),this.ti.add(r.toString()),vt.resolve()}markPotentiallyOrphaned(t,n){return this.ti.add(n.toString()),vt.resolve()}removeTarget(t,n){this.Zr.yr(n.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.ti.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Hr(){this.Xr=new Set}Jr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return vt.forEach(this.ti,r=>{const i=Tn.fromPath(r);return this.ni(t,i).next(s=>{s||n.removeEntry(i,Jn.min())})}).next(()=>(this.Xr=null,n.apply(t)))}updateLimboDocument(t,n){return this.ni(t,n).next(r=>{r?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(t){return 0}ni(t,n){return vt.or([()=>vt.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Yr(t,n)])}}class eF{constructor(t,n){this.persistence=t,this.ri=new ME(r=>Vct(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=edt(this,n)}static ei(t,n){return new eF(t,n)}Hr(){}Jr(t){return vt.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}Xn(t){const n=this.nr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(i=>r+i))}nr(t){let n=0;return this.er(t,r=>{n++}).next(()=>n)}er(t,n){return vt.forEach(this.ri,(r,i)=>this.ir(t,r,i).next(s=>s?vt.resolve():n(i)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Br(t,o=>this.ir(t,o,n).next(a=>{a||(r++,s.removeEntry(o,Jn.min()))})).next(()=>s.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.ri.set(n,t.currentSequenceNumber),vt.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.ri.set(r,t.currentSequenceNumber),vt.resolve()}removeReference(t,n,r){return this.ri.set(r,t.currentSequenceNumber),vt.resolve()}updateLimboDocument(t,n){return this.ri.set(n,t.currentSequenceNumber),vt.resolve()}zr(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=JM(t.data.value)),n}ir(t,n,r){return vt.or([()=>this.persistence.Yr(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const i=this.ri.get(n);return vt.resolve(i!==void 0&&i>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IZ{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.Wi=r,this.Gi=i}static zi(t,n){let r=Mr(),i=Mr();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new IZ(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ddt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hdt{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return Uat()?8:Uct(cl())>0?6:4}()}initialize(t,n){this.Zi=t,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.Xi(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.es(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new ddt;return this.ts(t,n,o).next(a=>{if(s.result=a,this.Hi)return this.ns(t,n,o,a.size)})}).next(()=>s.result)}ns(t,n,r,i){return r.documentReadCount<this.Ji?(e2()<=Or.DEBUG&&nn("QueryEngine","SDK will not create cache indexes for query:",t2(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),vt.resolve()):(e2()<=Or.DEBUG&&nn("QueryEngine","Query:",t2(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(e2()<=Or.DEBUG&&nn("QueryEngine","The SDK decides to create cache indexes for query:",t2(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,b0(n))):vt.resolve())}Xi(t,n){if(Nfe(n))return vt.resolve(null);let r=b0(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=$W(n,null,"F"),r=b0(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=Mr(...s);return this.Zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.rs(n,a);return this.ss(n,l,o,u.readTime)?this.Xi(t,$W(n,null,"F")):this.os(t,l,n,u)}))})))}es(t,n,r,i){return Nfe(n)||i.isEqual(Jn.min())?vt.resolve(null):this.Zi.getDocuments(t,r).next(s=>{const o=this.rs(n,s);return this.ss(n,o,r,i)?vt.resolve(null):(e2()<=Or.DEBUG&&nn("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),t2(n)),this.os(t,o,n,Lct(i,-1)).next(a=>a))})}rs(t,n){let r=new ca(_2e(t));return n.forEach((i,s)=>{BB(t,s)&&(r=r.add(s))}),r}ss(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ts(t,n,r){return e2()<=Or.DEBUG&&nn("QueryEngine","Using full collection scan to execute query:",t2(n)),this.Zi.getDocumentsMatchingQuery(t,n,Tb.min(),r)}os(t,n,r,i){return this.Zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pdt{constructor(t,n,r,i){this.persistence=t,this._s=n,this.serializer=i,this.us=new Vs(qr),this.cs=new ME(s=>vZ(s),bZ),this.ls=new Map,this.hs=t.getRemoteDocumentCache(),this.Gr=t.getTargetCache(),this.jr=t.getBundleCache(),this.Ps(r)}Ps(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new rdt(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.us))}}function mdt(e,t,n,r){return new pdt(e,t,n,r)}async function V2e(e,t){const n=Zn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ps(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Mr();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Ts:l,removedBatchIds:o,addedBatchIds:a}))})})}function gdt(e,t){const n=Zn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.hs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=vt.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const y=l.docVersions.get(p);ki(y!==null),m.version.compareTo(y)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Mr();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function H2e(e){const t=Zn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Gr.getLastRemoteSnapshotVersion(n))}function ydt(e,t){const n=Zn(e),r=t.snapshotVersion;let i=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.hs.newChangeBuffer({trackRemovals:!0});i=n.us;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Gr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Gr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(wu.EMPTY_BYTE_STRING,Jn.min()).withLastLimboFreeSnapshotVersion(Jn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,y,v){return m.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(d,h,c)&&a.push(n.Gr.updateTargetData(s,h))});let u=Zy(),l=Mr();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(vdt(s,o,t.documentUpdates).next(c=>{u=c.Is,l=c.ds})),!r.isEqual(Jn.min())){const c=n.Gr.getLastRemoteSnapshotVersion(s).next(f=>n.Gr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return vt.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.us=i,s))}function vdt(e,t,n){let r=Mr(),i=Mr();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=Zy();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Jn.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):nn("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Is:o,ds:i}})}function bdt(e,t){const n=Zn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function xdt(e,t){const n=Zn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Gr.getTargetData(r,t).next(s=>s?(i=s,vt.resolve(i)):n.Gr.allocateTargetId(r).next(o=>(i=new Kv(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(t,r.targetId)),r})}async function zW(e,t,n){const r=Zn(e),i=r.us.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!jA(o))throw o;nn("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.us=r.us.remove(t),r.cs.delete(i.target)}function Vfe(e,t,n){const r=Zn(e);let i=Jn.min(),s=Mr();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=Zn(u),d=f.cs.get(c);return d!==void 0?vt.resolve(f.us.get(d)):f.Gr.getTargetData(l,c)}(r,o,b0(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r._s.getDocumentsMatchingQuery(o,t,n?i:Jn.min(),n?s:Mr())).next(a=>(_dt(r,aft(t),a),{documents:a,Es:s})))}function _dt(e,t,n){let r=e.ls.get(t)||Jn.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ls.set(t,r)}class Hfe{constructor(){this.activeTargetIds=hft()}ps(t){this.activeTargetIds=this.activeTargetIds.add(t)}ys(t){this.activeTargetIds=this.activeTargetIds.delete(t)}gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class wdt{constructor(){this._o=new Hfe,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this._o.ps(t),this.ao[t]||"not-current"}updateQueryState(t,n,r){this.ao[t]=n}removeLocalQueryTarget(t){this._o.ys(t)}isLocalQueryTarget(t){return this._o.activeTargetIds.has(t)}clearQueryState(t){delete this.ao[t]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(t){return this._o.activeTargetIds.has(t)}start(){return this._o=new Hfe,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Edt{uo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qfe{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(t){this.To.push(t)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){nn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.To)t(0)}Po(){nn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.To)t(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let q4=null;function zz(){return q4===null?q4=function(){return 268435456+Math.round(2147483648*Math.random())}():q4++,"0x"+q4.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tdt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sdt{constructor(t){this.Eo=t.Eo,this.Ao=t.Ao}Ro(t){this.Vo=t}mo(t){this.fo=t}po(t){this.yo=t}onMessage(t){this.wo=t}close(){this.Ao()}send(t){this.Eo(t)}So(){this.Vo()}bo(){this.fo()}Do(t){this.yo(t)}vo(t){this.wo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bu="WebChannelConnection";class Cdt extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+n.host,this.Mo=`projects/${i}/databases/${s}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Oo(n,r,i,s,o){const a=zz(),u=this.No(n,r.toUriEncodedString());nn("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(l,s,o),this.Lo(n,u,l,i).then(c=>(nn("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw xD("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}ko(n,r,i,s,o,a){return this.Oo(n,r,i,s,o)}Bo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+FA}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}No(n,r){const i=Tdt[n];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Lo(t,n,r,i){const s=zz();return new Promise((o,a)=>{const u=new i2e;u.setWithCredentials(!0),u.listenOnce(s2e.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case XM.NO_ERROR:const c=u.getResponseJson();nn(Bu,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case XM.TIMEOUT:nn(Bu,`RPC '${t}' ${s} timed out`),a(new Qt(pt.DEADLINE_EXCEEDED,"Request time out"));break;case XM.HTTP_ERROR:const f=u.getStatus();if(nn(Bu,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(y){const v=y.toLowerCase().replace(/_/g,"-");return Object.values(pt).indexOf(v)>=0?v:pt.UNKNOWN}(h.status);a(new Qt(p,h.message))}else a(new Qt(pt.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new Qt(pt.UNAVAILABLE,"Connection failed."));break;default:Hn()}}finally{nn(Bu,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);nn(Bu,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}qo(t,n,r){const i=zz(),s=[this.Fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=u2e(),a=a2e(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Bo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");nn(Bu,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new Sdt({Eo:y=>{h?nn(Bu,`Not sending because RPC '${t}' stream ${i} is closed:`,y):(d||(nn(Bu,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),nn(Bu,`RPC '${t}' stream ${i} sending:`,y),f.send(y))},Ao:()=>f.close()}),m=(y,v,b)=>{y.listen(v,w=>{try{b(w)}catch(E){setTimeout(()=>{throw E},0)}})};return m(f,LR.EventType.OPEN,()=>{h||(nn(Bu,`RPC '${t}' stream ${i} transport opened.`),p.So())}),m(f,LR.EventType.CLOSE,()=>{h||(h=!0,nn(Bu,`RPC '${t}' stream ${i} transport closed`),p.Do())}),m(f,LR.EventType.ERROR,y=>{h||(h=!0,xD(Bu,`RPC '${t}' stream ${i} transport errored:`,y),p.Do(new Qt(pt.UNAVAILABLE,"The operation could not be completed")))}),m(f,LR.EventType.MESSAGE,y=>{var v;if(!h){const b=y.data[0];ki(!!b);const w=b,E=(w==null?void 0:w.error)||((v=w[0])===null||v===void 0?void 0:v.error);if(E){nn(Bu,`RPC '${t}' stream ${i} received error:`,E);const T=E.status;let A=function(D){const M=Uo[D];if(M!==void 0)return D2e(M)}(T),I=E.message;A===void 0&&(A=pt.INTERNAL,I="Unknown error status: "+T+" with message "+E.message),h=!0,p.Do(new Qt(A,I)),f.close()}else nn(Bu,`RPC '${t}' stream ${i} received:`,b),p.vo(b)}}),m(a,o2e.STAT_EVENT,y=>{y.stat===NW.PROXY?nn(Bu,`RPC '${t}' stream ${i} detected buffering proxy`):y.stat===NW.NOPROXY&&nn(Bu,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.bo()},0),p}}function Vz(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VB(e){return new Pft(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2e{constructor(t,n,r=1e3,i=1.5,s=6e4){this.li=t,this.timerId=n,this.Qo=r,this.Ko=i,this.$o=s,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(t){this.cancel();const n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,n-r);i>0&&nn("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),t())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2e{constructor(t,n,r,i,s,o,a,u){this.li=t,this.Yo=r,this.Zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new q2e(t,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(t){this.l_(),this.stream.send(t)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(t,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,t!==4?this.r_.reset():n&&n.code===pt.RESOURCE_EXHAUSTED?(Jy(n.toString()),Jy("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===pt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.po(n)}P_(){}auth(){this.state=1;const t=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===n&&this.I_(r,i)},r=>{t(()=>{const i=new Qt(pt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.d_(i)})})}I_(t,n){const r=this.T_(this.Xo);this.stream=this.E_(t,n),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.d_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(t){return nn("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}T_(t){return n=>{this.li.enqueueAndForget(()=>this.Xo===t?n():(nn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Adt extends W2e{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}E_(t,n){return this.connection.qo("Listen",t,n)}A_(t){return this.onNext(t)}onNext(t){this.r_.reset();const n=Lft(this.serializer,t),r=function(s){if(!("targetChange"in s))return Jn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Jn.min():o.readTime?x0(o.readTime):Jn.min()}(t);return this.listener.R_(n,r)}V_(t){const n={};n.database=UW(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=MW(u)?{documents:Bft(s,u)}:{query:jft(s,u).ct},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=M2e(s,o.resumeToken);const l=FW(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(Jn.min())>0){a.readTime=Z$(s,o.snapshotVersion.toTimestamp());const l=FW(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=zft(this.serializer,t);r&&(n.labels=r),this.c_(n)}m_(t){const n={};n.database=UW(this.serializer),n.removeTarget=t,this.c_(n)}}class Idt extends W2e{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(t,n){return this.connection.qo("Write",t,n)}A_(t){return ki(!!t.streamToken),this.lastStreamToken=t.streamToken,ki(!t.writeResults||t.writeResults.length===0),this.listener.p_()}onNext(t){ki(!!t.streamToken),this.lastStreamToken=t.streamToken,this.r_.reset();const n=Fft(t.writeResults,t.commitTime),r=x0(t.commitTime);return this.listener.y_(r,n)}w_(){const t={};t.database=UW(this.serializer),this.c_(t)}g_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>$ft(this.serializer,r))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kdt extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new Qt(pt.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(t,n,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Oo(t,BW(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===pt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Qt(pt.UNKNOWN,s.toString())})}ko(t,n,r,i,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.ko(t,BW(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===pt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Qt(pt.UNKNOWN,o.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class Rdt{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(t){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.M_("Offline")))}set(t){this.N_(),this.D_=0,t==="Online"&&(this.C_=!1),this.M_(t)}M_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}x_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Jy(n),this.C_=!1):nn("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ndt{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=s,this.Q_.uo(o=>{r.enqueueAndForget(async()=>{LE(this)&&(nn("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=Zn(u);l.k_.add(4),await e3(l),l.K_.set("Unknown"),l.k_.delete(4),await ZP(l)}(this))})}),this.K_=new Rdt(r,i)}}async function ZP(e){if(LE(e))for(const t of e.q_)await t(!0)}async function e3(e){for(const t of e.q_)await t(!1)}function G2e(e,t){const n=Zn(e);n.L_.has(t.targetId)||(n.L_.set(t.targetId,t),DZ(n)?NZ(n):zA(n).s_()&&RZ(n,t))}function kZ(e,t){const n=Zn(e),r=zA(n);n.L_.delete(t),r.s_()&&Y2e(n,t),n.L_.size===0&&(r.s_()?r.a_():LE(n)&&n.K_.set("Unknown"))}function RZ(e,t){if(e.U_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Jn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}zA(e).V_(t)}function Y2e(e,t){e.U_.xe(t),zA(e).m_(t)}function NZ(e){e.U_=new kft({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ut:t=>e.L_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),zA(e).start(),e.K_.F_()}function DZ(e){return LE(e)&&!zA(e).i_()&&e.L_.size>0}function LE(e){return Zn(e).k_.size===0}function K2e(e){e.U_=void 0}async function Ddt(e){e.K_.set("Online")}async function Pdt(e){e.L_.forEach((t,n)=>{RZ(e,t)})}async function Odt(e,t){K2e(e),DZ(e)?(e.K_.O_(t),NZ(e)):e.K_.set("Unknown")}async function Mdt(e,t,n){if(e.K_.set("Online"),t instanceof O2e&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.L_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.L_.delete(a),i.U_.removeTarget(a))}(e,t)}catch(r){nn("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await tF(e,r)}else if(t instanceof tL?e.U_.$e(t):t instanceof P2e?e.U_.Je(t):e.U_.Ge(t),!n.isEqual(Jn.min()))try{const r=await H2e(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.U_.it(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.L_.get(l);c&&s.L_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.L_.get(u);if(!c)return;s.L_.set(u,c.withResumeToken(wu.EMPTY_BYTE_STRING,c.snapshotVersion)),Y2e(s,u);const f=new Kv(c.target,u,l,c.sequenceNumber);RZ(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){nn("RemoteStore","Failed to raise snapshot:",r),await tF(e,r)}}async function tF(e,t,n){if(!jA(t))throw t;e.k_.add(1),await e3(e),e.K_.set("Offline"),n||(n=()=>H2e(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{nn("RemoteStore","Retrying IndexedDB access"),await n(),e.k_.delete(1),await ZP(e)})}function X2e(e,t){return t().catch(n=>tF(e,n,t))}async function HB(e){const t=Zn(e),n=Ib(t);let r=t.B_.length>0?t.B_[t.B_.length-1].batchId:-1;for(;Ldt(t);)try{const i=await bdt(t.localStore,r);if(i===null){t.B_.length===0&&n.a_();break}r=i.batchId,$dt(t,i)}catch(i){await tF(t,i)}Q2e(t)&&J2e(t)}function Ldt(e){return LE(e)&&e.B_.length<10}function $dt(e,t){e.B_.push(t);const n=Ib(e);n.s_()&&n.f_&&n.g_(t.mutations)}function Q2e(e){return LE(e)&&!Ib(e).i_()&&e.B_.length>0}function J2e(e){Ib(e).start()}async function Fdt(e){Ib(e).w_()}async function Bdt(e){const t=Ib(e);for(const n of e.B_)t.g_(n.mutations)}async function jdt(e,t,n){const r=e.B_.shift(),i=EZ.from(r,t,n);await X2e(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await HB(e)}async function Udt(e,t){t&&Ib(e).f_&&await async function(r,i){if(function(o){return Cft(o)&&o!==pt.ABORTED}(i.code)){const s=r.B_.shift();Ib(r).__(),await X2e(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await HB(r)}}(e,t),Q2e(e)&&J2e(e)}async function Wfe(e,t){const n=Zn(e);n.asyncQueue.verifyOperationInProgress(),nn("RemoteStore","RemoteStore received new credentials");const r=LE(n);n.k_.add(3),await e3(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.k_.delete(3),await ZP(n)}async function zdt(e,t){const n=Zn(e);t?(n.k_.delete(2),await ZP(n)):t||(n.k_.add(2),await e3(n),n.K_.set("Unknown"))}function zA(e){return e.W_||(e.W_=function(n,r,i){const s=Zn(n);return s.b_(),new Adt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Ro:Ddt.bind(null,e),mo:Pdt.bind(null,e),po:Odt.bind(null,e),R_:Mdt.bind(null,e)}),e.q_.push(async t=>{t?(e.W_.__(),DZ(e)?NZ(e):e.K_.set("Unknown")):(await e.W_.stop(),K2e(e))})),e.W_}function Ib(e){return e.G_||(e.G_=function(n,r,i){const s=Zn(n);return s.b_(),new Idt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Ro:()=>Promise.resolve(),mo:Fdt.bind(null,e),po:Udt.bind(null,e),p_:Bdt.bind(null,e),y_:jdt.bind(null,e)}),e.q_.push(async t=>{t?(e.G_.__(),await HB(e)):(await e.G_.stop(),e.B_.length>0&&(nn("RemoteStore",`Stopping write stream with ${e.B_.length} pending writes`),e.B_=[]))})),e.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PZ{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new My,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new PZ(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Qt(pt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function OZ(e,t){if(Jy("AsyncQueue",`${t}: ${e}`),jA(e))return new Qt(pt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{static emptySet(t){return new N2(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||Tn.comparator(n.key,r.key):(n,r)=>Tn.comparator(n.key,r.key),this.keyedMap=$R(),this.sortedSet=new Vs(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof N2)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new N2;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gfe{constructor(){this.z_=new Vs(Tn.comparator)}track(t){const n=t.doc.key,r=this.z_.get(n);r?t.type!==0&&r.type===3?this.z_=this.z_.insert(n,t):t.type===3&&r.type!==1?this.z_=this.z_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.z_=this.z_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.z_=this.z_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.z_=this.z_.remove(n):t.type===1&&r.type===2?this.z_=this.z_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.z_=this.z_.insert(n,{type:2,doc:t.doc}):Hn():this.z_=this.z_.insert(n,t)}j_(){const t=[];return this.z_.inorderTraversal((n,r)=>{t.push(r)}),t}}class pC{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new pC(t,n,N2.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&FB(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vdt{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(t=>t.Z_())}}class Hdt{constructor(){this.queries=Yfe(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,r){const i=Zn(n),s=i.queries;i.queries=Yfe(),s.forEach((o,a)=>{for(const u of a.J_)u.onError(r)})})(this,new Qt(pt.ABORTED,"Firestore shutting down"))}}function Yfe(){return new ME(e=>x2e(e),FB)}async function Z2e(e,t){const n=Zn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.Y_()&&t.Z_()&&(r=2):(s=new Vdt,r=t.Z_()?0:1);try{switch(r){case 0:s.H_=await n.onListen(i,!0);break;case 1:s.H_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=OZ(o,`Initialization of query '${t2(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.J_.push(t),t.ea(n.onlineState),s.H_&&t.ta(s.H_)&&MZ(n)}async function eCe(e,t){const n=Zn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.J_.indexOf(t);o>=0&&(s.J_.splice(o,1),s.J_.length===0?i=t.Z_()?0:1:!s.Y_()&&t.Z_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function qdt(e,t){const n=Zn(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.J_)a.ta(i)&&(r=!0);o.H_=i}}r&&MZ(n)}function Wdt(e,t,n){const r=Zn(e),i=r.queries.get(t);if(i)for(const s of i.J_)s.onError(n);r.queries.delete(t)}function MZ(e){e.X_.forEach(t=>{t.next()})}var VW,Kfe;(Kfe=VW||(VW={})).na="default",Kfe.Cache="cache";class tCe{constructor(t,n,r){this.query=t,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new pC(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.ia?this.oa(t)&&(this.ra.next(t),n=!0):this._a(t,this.onlineState)&&(this.aa(t),n=!0),this.sa=t,n}onError(t){this.ra.error(t)}ea(t){this.onlineState=t;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,t)&&(this.aa(this.sa),n=!0),n}_a(t,n){if(!t.fromCache||!this.Z_())return!0;const r=n!=="Offline";return(!this.options.ua||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}oa(t){if(t.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(t){t=pC.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ia=!0,this.ra.next(t)}Z_(){return this.options.source!==VW.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nCe{constructor(t){this.key=t}}class rCe{constructor(t){this.key=t}}class Gdt{constructor(t,n){this.query=t,this.Ea=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Mr(),this.mutatedKeys=Mr(),this.Va=_2e(t),this.ma=new N2(this.Va)}get fa(){return this.Ea}ga(t,n){const r=n?n.pa:new Gfe,i=n?n.ma:this.ma;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=BB(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let y=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),y=!0):this.ya(d,h)||(r.track({type:2,doc:h}),y=!0,(u&&this.Va(h,u)>0||l&&this.Va(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),y=!0):d&&!h&&(r.track({type:1,doc:d}),y=!0,(u||l)&&(a=!0)),y&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{ma:o,pa:r,ss:a,mutatedKeys:s}}ya(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.ma;this.ma=t.ma,this.mutatedKeys=t.mutatedKeys;const o=t.pa.j_();o.sort((c,f)=>function(h,p){const m=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Hn()}};return m(h)-m(p)}(c.type,f.type)||this.Va(c.doc,f.doc)),this.wa(r),i=i!=null&&i;const a=n&&!i?this.Sa():[],u=this.Ra.size===0&&this.current&&!i?1:0,l=u!==this.Aa;return this.Aa=u,o.length!==0||l?{snapshot:new pC(this.query,t.ma,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Gfe,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(t){return!this.Ea.has(t)&&!!this.ma.has(t)&&!this.ma.get(t).hasLocalMutations}wa(t){t&&(t.addedDocuments.forEach(n=>this.Ea=this.Ea.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ea=this.Ea.delete(n)),this.current=t.current)}Sa(){if(!this.current)return[];const t=this.Ra;this.Ra=Mr(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const n=[];return t.forEach(r=>{this.Ra.has(r)||n.push(new rCe(r))}),this.Ra.forEach(r=>{t.has(r)||n.push(new nCe(r))}),n}va(t){this.Ea=t.Es,this.Ra=Mr();const n=this.ga(t.documents);return this.applyChanges(n,!0)}Ca(){return pC.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class Ydt{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class Kdt{constructor(t){this.key=t,this.Fa=!1}}class Xdt{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ma={},this.xa=new ME(a=>x2e(a),FB),this.Oa=new Map,this.Na=new Set,this.Ba=new Vs(Tn.comparator),this.La=new Map,this.ka=new CZ,this.qa={},this.Qa=new Map,this.Ka=hC.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function Qdt(e,t,n=!0){const r=lCe(e);let i;const s=r.xa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Ca()):i=await iCe(r,t,n,!0),i}async function Jdt(e,t){const n=lCe(e);await iCe(n,t,!0,!1)}async function iCe(e,t,n,r){const i=await xdt(e.localStore,b0(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await Zdt(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&G2e(e.remoteStore,i),a}async function Zdt(e,t,n,r,i){e.Ua=(f,d,h)=>async function(m,y,v,b){let w=y.view.ga(v);w.ss&&(w=await Vfe(m.localStore,y.query,!1).then(({documents:I})=>y.view.ga(I,w)));const E=b&&b.targetChanges.get(y.targetId),T=b&&b.targetMismatches.get(y.targetId)!=null,A=y.view.applyChanges(w,m.isPrimaryClient,E,T);return Qfe(m,y.targetId,A.ba),A.snapshot}(e,f,d,h);const s=await Vfe(e.localStore,t,!0),o=new Gdt(t,s.Es),a=o.ga(s.documents),u=JP.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);Qfe(e,n,l.ba);const c=new Ydt(t,n,o);return e.xa.set(t,c),e.Oa.has(n)?e.Oa.get(n).push(t):e.Oa.set(n,[t]),l.snapshot}async function eht(e,t,n){const r=Zn(e),i=r.xa.get(t),s=r.Oa.get(i.targetId);if(s.length>1)return r.Oa.set(i.targetId,s.filter(o=>!FB(o,t))),void r.xa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await zW(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&kZ(r.remoteStore,i.targetId),HW(r,i.targetId)}).catch(BA)):(HW(r,i.targetId),await zW(r.localStore,i.targetId,!0))}async function tht(e,t){const n=Zn(e),r=n.xa.get(t),i=n.Oa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),kZ(n.remoteStore,r.targetId))}async function nht(e,t,n){const r=lht(e);try{const i=await function(o,a){const u=Zn(o),l=Vl.now(),c=a.reduce((h,p)=>h.add(p.key),Mr());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=Zy(),m=Mr();return u.hs.getEntries(h,c).next(y=>{p=y,p.forEach((v,b)=>{b.isValidDocument()||(m=m.add(v))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(y=>{f=y;const v=[];for(const b of a){const w=_ft(b,f.get(b.key).overlayedDocument);w!=null&&v.push(new bx(b.key,w,d2e(w.value.mapValue),ed.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,v,a)}).next(y=>{d=y;const v=y.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,y.batchId,v)})}).then(()=>({batchId:d.batchId,changes:E2e(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.qa[o.currentUser.toKey()];l||(l=new Vs(qr)),l=l.insert(a,u),o.qa[o.currentUser.toKey()]=l}(r,i.batchId,n),await t3(r,i.changes),await HB(r.remoteStore)}catch(i){const s=OZ(i,"Failed to persist write");n.reject(s)}}async function sCe(e,t){const n=Zn(e);try{const r=await ydt(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.La.get(s);o&&(ki(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Fa=!0:i.modifiedDocuments.size>0?ki(o.Fa):i.removedDocuments.size>0&&(ki(o.Fa),o.Fa=!1))}),await t3(n,r,t)}catch(r){await BA(r)}}function Xfe(e,t,n){const r=Zn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.xa.forEach((s,o)=>{const a=o.view.ea(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=Zn(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.J_)d.ea(a)&&(l=!0)}),l&&MZ(u)}(r.eventManager,t),i.length&&r.Ma.R_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function rht(e,t,n){const r=Zn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.La.get(t),s=i&&i.key;if(s){let o=new Vs(Tn.comparator);o=o.insert(s,Ju.newNoDocument(s,Jn.min()));const a=Mr().add(s),u=new zB(Jn.min(),new Map,new Vs(qr),o,a);await sCe(r,u),r.Ba=r.Ba.remove(s),r.La.delete(t),LZ(r)}else await zW(r.localStore,t,!1).then(()=>HW(r,t,n)).catch(BA)}async function iht(e,t){const n=Zn(e),r=t.batch.batchId;try{const i=await gdt(n.localStore,t);aCe(n,r,null),oCe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await t3(n,i)}catch(i){await BA(i)}}async function sht(e,t,n){const r=Zn(e);try{const i=await function(o,a){const u=Zn(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(ki(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);aCe(r,t,n),oCe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await t3(r,i)}catch(i){await BA(i)}}function oCe(e,t){(e.Qa.get(t)||[]).forEach(n=>{n.resolve()}),e.Qa.delete(t)}function aCe(e,t,n){const r=Zn(e);let i=r.qa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.qa[r.currentUser.toKey()]=i}}function HW(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Oa.get(t))e.xa.delete(r),n&&e.Ma.Wa(r,n);e.Oa.delete(t),e.isPrimaryClient&&e.ka.yr(t).forEach(r=>{e.ka.containsKey(r)||uCe(e,r)})}function uCe(e,t){e.Na.delete(t.path.canonicalString());const n=e.Ba.get(t);n!==null&&(kZ(e.remoteStore,n),e.Ba=e.Ba.remove(t),e.La.delete(n),LZ(e))}function Qfe(e,t,n){for(const r of n)r instanceof nCe?(e.ka.addReference(r.key,t),oht(e,r)):r instanceof rCe?(nn("SyncEngine","Document no longer in limbo: "+r.key),e.ka.removeReference(r.key,t),e.ka.containsKey(r.key)||uCe(e,r.key)):Hn()}function oht(e,t){const n=t.key,r=n.path.canonicalString();e.Ba.get(n)||e.Na.has(r)||(nn("SyncEngine","New document in limbo: "+n),e.Na.add(r),LZ(e))}function LZ(e){for(;e.Na.size>0&&e.Ba.size<e.maxConcurrentLimboResolutions;){const t=e.Na.values().next().value;e.Na.delete(t);const n=new Tn(bs.fromString(t)),r=e.Ka.next();e.La.set(r,new Kdt(n)),e.Ba=e.Ba.insert(n,r),G2e(e.remoteStore,new Kv(b0(xZ(n.path)),r,"TargetPurposeLimboResolution",MB.oe))}}async function t3(e,t,n){const r=Zn(e),i=[],s=[],o=[];r.xa.isEmpty()||(r.xa.forEach((a,u)=>{o.push(r.Ua(u,t,n).then(l=>{var c;if((l||n)&&r.isPrimaryClient){const f=l?!l.fromCache:(c=n==null?void 0:n.targetChanges.get(u.targetId))===null||c===void 0?void 0:c.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);const f=IZ.zi(u.targetId,l);s.push(f)}}))}),await Promise.all(o),r.Ma.R_(i),await async function(u,l){const c=Zn(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>vt.forEach(l,d=>vt.forEach(d.Wi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>vt.forEach(d.Gi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!jA(f))throw f;nn("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.us.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.us=c.us.insert(d,m)}}}(r.localStore,s))}async function aht(e,t){const n=Zn(e);if(!n.currentUser.isEqual(t)){nn("SyncEngine","User change. New user:",t.toKey());const r=await V2e(n.localStore,t);n.currentUser=t,function(s,o){s.Qa.forEach(a=>{a.forEach(u=>{u.reject(new Qt(pt.CANCELLED,o))})}),s.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await t3(n,r.Ts)}}function uht(e,t){const n=Zn(e),r=n.La.get(t);if(r&&r.Fa)return Mr().add(r.key);{let i=Mr();const s=n.Oa.get(t);if(!s)return i;for(const o of s){const a=n.xa.get(o);i=i.unionWith(a.view.fa)}return i}}function lCe(e){const t=Zn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=sCe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=uht.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=rht.bind(null,t),t.Ma.R_=qdt.bind(null,t.eventManager),t.Ma.Wa=Wdt.bind(null,t.eventManager),t}function lht(e){const t=Zn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=iht.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=sht.bind(null,t),t}class nF{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=VB(t.databaseInfo.databaseId),this.sharedClientState=this.za(t),this.persistence=this.ja(t),await this.persistence.start(),this.localStore=this.Ha(t),this.gcScheduler=this.Ja(t,this.localStore),this.indexBackfillerScheduler=this.Ya(t,this.localStore)}Ja(t,n){return null}Ya(t,n){return null}Ha(t){return mdt(this.persistence,new hdt,t.initialUser,this.serializer)}ja(t){return new z2e(AZ.ei,this.serializer)}za(t){return new wdt}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nF.provider={build:()=>new nF};class cht extends nF{constructor(t){super(),this.cacheSizeBytes=t}Ja(t,n){ki(this.persistence.referenceDelegate instanceof eF);const r=this.persistence.referenceDelegate.garbageCollector;return new Jft(r,t.asyncQueue,n)}ja(t){const n=this.cacheSizeBytes!==void 0?Oc.withCacheSize(this.cacheSizeBytes):Oc.DEFAULT;return new z2e(r=>eF.ei(r,n),this.serializer)}}class qW{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Xfe(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=aht.bind(null,this.syncEngine),await zdt(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Hdt}()}createDatastore(t){const n=VB(t.databaseInfo.databaseId),r=function(s){return new Cdt(s)}(t.databaseInfo);return function(s,o,a,u){return new kdt(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new Ndt(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>Xfe(this.syncEngine,n,0),function(){return qfe.p()?new qfe:new Edt}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new Xdt(i,s,o,a,u,l);return c&&(f.$a=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(i){const s=Zn(i);nn("RemoteStore","RemoteStore shutting down."),s.k_.add(5),await e3(s),s.Q_.shutdown(),s.K_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}qW.provider={build:()=>new qW};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cCe{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Xa(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Xa(this.observer.error,t):Jy("Uncaught Error in snapshot listener:",t.toString()))}eu(){this.muted=!0}Xa(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fht{constructor(t,n,r,i,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Pc.UNAUTHENTICATED,this.clientId=l2e.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{nn("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(nn("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new My;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=OZ(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Hz(e,t){e.asyncQueue.verifyOperationInProgress(),nn("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await V2e(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Jfe(e,t){e.asyncQueue.verifyOperationInProgress();const n=await fCe(e);nn("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>Wfe(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>Wfe(t.remoteStore,i)),e._onlineComponents=t}async function fCe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){nn("FirestoreClient","Using user provided OfflineComponentProvider");try{await Hz(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(i){return i.name==="FirebaseError"?i.code===pt.FAILED_PRECONDITION||i.code===pt.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;xD("Error using user provided cache. Falling back to memory cache: "+n),await Hz(e,new nF)}}else nn("FirestoreClient","Using default OfflineComponentProvider"),await Hz(e,new cht(void 0));return e._offlineComponents}async function $Z(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(nn("FirestoreClient","Using user provided OnlineComponentProvider"),await Jfe(e,e._uninitializedComponentsProvider._online)):(nn("FirestoreClient","Using default OnlineComponentProvider"),await Jfe(e,new qW))),e._onlineComponents}function dht(e){return fCe(e).then(t=>t.persistence)}function hht(e){return $Z(e).then(t=>t.remoteStore)}function pht(e){return $Z(e).then(t=>t.syncEngine)}async function dCe(e){const t=await $Z(e),n=t.eventManager;return n.onListen=Qdt.bind(null,t.syncEngine),n.onUnlisten=eht.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Jdt.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=tht.bind(null,t.syncEngine),n}function mht(e){return e.asyncQueue.enqueue(async()=>{const t=await dht(e),n=await hht(e);return t.setNetworkEnabled(!0),function(i){const s=Zn(i);return s.k_.delete(0),ZP(s)}(n)})}function ght(e,t,n={}){const r=new My;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new cCe({next:d=>{c.eu(),o.enqueueAndForget(()=>eCe(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new Qt(pt.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new Qt(pt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new tCe(xZ(a.path),c,{includeMetadataChanges:!0,ua:!0});return Z2e(s,f)}(await dCe(e),e.asyncQueue,t,n,r)),r.promise}function yht(e,t,n={}){const r=new My;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new cCe({next:d=>{c.eu(),o.enqueueAndForget(()=>eCe(s,f)),d.fromCache&&u.source==="server"?l.reject(new Qt(pt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new tCe(a,c,{includeMetadataChanges:!0,ua:!0});return Z2e(s,f)}(await dCe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hCe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zfe=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pCe(e,t,n){if(!n)throw new Qt(pt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function vht(e,t,n,r){if(t===!0&&r===!0)throw new Qt(pt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function ede(e){if(!Tn.isDocumentKey(e))throw new Qt(pt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function tde(e){if(Tn.isDocumentKey(e))throw new Qt(pt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function qB(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Hn()}function F0(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Qt(pt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=qB(e);throw new Qt(pt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nde{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Qt(pt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Qt(pt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}vht("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hCe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Qt(pt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Qt(pt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Qt(pt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class FZ{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nde({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Qt(pt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Qt(pt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nde(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Ict;switch(r.type){case"firstParty":return new Nct(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Qt(pt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Zfe.get(n);r&&(nn("ComponentProvider","Removing Datastore"),Zfe.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let n3=class mCe{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new mCe(this.firestore,t,this._query)}};class Hl{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cb(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Hl(this.firestore,t,this._key)}}class cb extends n3{constructor(t,n,r){super(t,n,xZ(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Hl(this.firestore,null,new Tn(t))}withConverter(t){return new cb(this.firestore,t,this._path)}}function kc(e,t,...n){if(e=ds(e),pCe("collection","path",t),e instanceof FZ){const r=bs.fromString(t,...n);return tde(r),new cb(e,null,r)}{if(!(e instanceof Hl||e instanceof cb))throw new Qt(pt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(bs.fromString(t,...n));return tde(r),new cb(e.firestore,null,r)}}function vs(e,t,...n){if(e=ds(e),arguments.length===1&&(t=l2e.newId()),pCe("doc","path",t),e instanceof FZ){const r=bs.fromString(t,...n);return ede(r),new Hl(e,null,new Tn(r))}{if(!(e instanceof Hl||e instanceof cb))throw new Qt(pt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(bs.fromString(t,...n));return ede(r),new Hl(e.firestore,e instanceof cb?e.converter:null,new Tn(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rde{constructor(t=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new q2e(this,"async_queue_retry"),this.fu=()=>{const r=Vz();r&&nn("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=t;const n=Vz();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.pu(),this.yu(t)}enterRestrictedMode(t){if(!this.du){this.du=!0,this.Vu=t||!1;const n=Vz();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(t){if(this.pu(),this.du)return new Promise(()=>{});const n=new My;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Iu.push(t),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(t){if(!jA(t))throw t;nn("AsyncQueue","Operation failed with retryable error: "+t)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(t){const n=this.gu.then(()=>(this.Ru=!0,t().catch(r=>{this.Au=r,this.Ru=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Jy("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(t,n,r){this.pu(),this.mu.indexOf(t)>-1&&(n=0);const i=PZ.createAndSchedule(this,t,n,r,s=>this.Su(s));return this.Eu.push(i),i}pu(){this.Au&&Hn()}verifyOperationInProgress(){}async bu(){let t;do t=this.gu,await t;while(t!==this.gu)}Du(t){for(const n of this.Eu)if(n.timerId===t)return!0;return!1}vu(t){return this.bu().then(()=>{this.Eu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Eu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.bu()})}Cu(t){this.mu.push(t)}Su(t){const n=this.Eu.indexOf(t);this.Eu.splice(n,1)}}class $E extends FZ{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=new rde,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new rde(t),this._firestoreClient=void 0,await t}}}function bht(e,t,n){n||(n="(default)");const r=$A(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(vD(s,t))return i;throw new Qt(pt.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new Qt(pt.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Qt(pt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function r3(e){if(e._terminated)throw new Qt(pt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||xht(e),e._firestoreClient}function xht(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new Wct(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,hCe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new fht(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(e._componentsProvider))}function _ht(e){return mht(r3(e=F0(e,$E)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(t){this._byteString=t}static fromBase64String(t){try{return new mC(wu.fromBase64String(t))}catch(n){throw new Qt(pt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new mC(wu.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Qt(pt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new du(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WB{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BZ=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Qt(pt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Qt(pt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return qr(this._lat,t._lat)||qr(this._long,t._long)}};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jZ{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wht=/^__.*__$/;class Eht{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new bx(t,this.data,this.fieldMask,n,this.fieldTransforms):new QP(t,this.data,n,this.fieldTransforms)}}class gCe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new bx(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function yCe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Hn()}}class UZ{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Fu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(t){return new UZ(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.xu({path:r,Nu:!1});return i.Bu(t),i}Lu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(t){return this.xu({path:void 0,Nu:!0})}qu(t){return rF(t,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Bu(this.path.get(t))}Bu(t){if(t.length===0)throw this.qu("Document fields must not be empty");if(yCe(this.Mu)&&wht.test(t))throw this.qu('Document fields cannot begin and end with "__"')}}class Tht{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||VB(t)}$u(t,n,r,i=!1){return new UZ({Mu:t,methodName:n,Ku:r,path:du.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function GB(e){const t=e._freezeSettings(),n=VB(e._databaseId);return new Tht(e._databaseId,!!t.ignoreUndefinedProperties,n)}function vCe(e,t,n,r,i,s={}){const o=e.$u(s.merge||s.mergeFields?2:0,t,n,i);VZ("Data must be an object, but it was:",o,r);const a=_Ce(r,o);let u,l;if(s.merge)u=new Kf(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=WW(t,f,n);if(!o.contains(d))throw new Qt(pt.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);ECe(c,d)||c.push(d)}u=new Kf(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new Eht(new Uc(a),u,l)}class YB extends WB{_toFieldTransform(t){if(t.Mu!==2)throw t.Mu===1?t.qu(`${this._methodName}() can only appear at the top level of your update data`):t.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof YB}}class zZ extends WB{_toFieldTransform(t){return new yft(t.path,new SD)}isEqual(t){return t instanceof zZ}}function bCe(e,t,n,r){const i=e.$u(1,t,n);VZ("Data must be an object, but it was:",i,r);const s=[],o=Uc.empty();vx(r,(u,l)=>{const c=HZ(t,u,n);l=ds(l);const f=i.Lu(c);if(l instanceof YB)s.push(c);else{const d=s3(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new Kf(s);return new gCe(o,a,i.fieldTransforms)}function xCe(e,t,n,r,i,s){const o=e.$u(1,t,n),a=[WW(t,r,n)],u=[i];if(s.length%2!=0)throw new Qt(pt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(WW(t,s[d])),u.push(s[d+1]);const l=[],c=Uc.empty();for(let d=a.length-1;d>=0;--d)if(!ECe(l,a[d])){const h=a[d];let p=u[d];p=ds(p);const m=o.Lu(h);if(p instanceof YB)l.push(h);else{const y=s3(p,m);y!=null&&(l.push(h),c.set(h,y))}}const f=new Kf(l);return new gCe(c,f,o.fieldTransforms)}function Sht(e,t,n,r=!1){return s3(n,e.$u(r?4:3,t))}function s3(e,t){if(wCe(e=ds(e)))return VZ("Unsupported field value:",t,e),_Ce(e,t);if(e instanceof WB)return function(r,i){if(!yCe(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Nu&&t.Mu!==4)throw t.qu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=s3(a,i.ku(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=ds(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return pft(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Vl.fromDate(r);return{timestampValue:Z$(i.serializer,s)}}if(r instanceof Vl){const s=new Vl(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Z$(i.serializer,s)}}if(r instanceof BZ)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof mC)return{bytesValue:M2e(i.serializer,r._byteString)};if(r instanceof Hl){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.qu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:SZ(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof jZ)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.qu("VectorValues must only contain numeric values.");return _Z(a.serializer,u)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${qB(r)}`)}(e,t)}function _Ce(e,t){const n={};return c2e(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):vx(e,(r,i)=>{const s=s3(i,t.Ou(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function wCe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Vl||e instanceof BZ||e instanceof mC||e instanceof Hl||e instanceof WB||e instanceof jZ)}function VZ(e,t,n){if(!wCe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=qB(n);throw r==="an object"?t.qu(e+" a custom object"):t.qu(e+" "+r)}}function WW(e,t,n){if((t=ds(t))instanceof i3)return t._internalPath;if(typeof t=="string")return HZ(e,t);throw rF("Field path arguments must be of type string or ",e,!1,void 0,n)}const Cht=new RegExp("[~\\*/\\[\\]]");function HZ(e,t,n){if(t.search(Cht)>=0)throw rF(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new i3(...t.split("."))._internalPath}catch{throw rF(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function rF(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Qt(pt.INVALID_ARGUMENT,a+e+u)}function ECe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TCe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Hl(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Aht(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(KB("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Aht extends TCe{data(){return super.data()}}function KB(e,t){return typeof t=="string"?HZ(e,t):t instanceof i3?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iht(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Qt(pt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qZ{}class SCe extends qZ{}function qz(e,t,...n){let r=[];t instanceof qZ&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof WZ).length,a=s.filter(u=>u instanceof XB).length;if(o>1||o>0&&a>0)throw new Qt(pt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class XB extends SCe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new XB(t,n,r)}_apply(t){const n=this._parse(t);return CCe(t._query,n),new n3(t.firestore,t.converter,LW(t._query,n))}_parse(t){const n=GB(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new Qt(pt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){ade(f,c);const h=[];for(const p of f)h.push(ode(u,s,p));d={arrayValue:{values:h}}}else d=ode(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||ade(f,c),d=Sht(a,o,f,c==="in"||c==="not-in");return Ho.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function ide(e,t,n){const r=t,i=KB("where",e);return XB._create(i,r,n)}class WZ extends qZ{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new WZ(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Lp.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)CCe(o,u),o=LW(o,u)}(t._query,n),new n3(t.firestore,t.converter,LW(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class GZ extends SCe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new GZ(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new Qt(pt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Qt(pt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new TD(s,o)}(t._query,this._field,this._direction);return new n3(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new UA(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function sde(e,t="asc"){const n=t,r=KB("orderBy",e);return GZ._create(r,n)}function ode(e,t,n){if(typeof(n=ds(n))=="string"){if(n==="")throw new Qt(pt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!b2e(t)&&n.indexOf("/")!==-1)throw new Qt(pt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(bs.fromString(n));if(!Tn.isDocumentKey(r))throw new Qt(pt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Sfe(e,new Tn(r))}if(n instanceof Hl)return Sfe(e,n._key);throw new Qt(pt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qB(n)}.`)}function ade(e,t){if(!Array.isArray(e)||e.length===0)throw new Qt(pt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function CCe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new Qt(pt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Qt(pt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class kht{convertValue(t,n="none"){switch(Ab(t)){case 0:return null;case 1:return t.booleanValue;case 2:return To(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Cb(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Hn()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return vx(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(t){var n,r,i;const s=(i=(r=(n=t.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>To(o.doubleValue));return new jZ(s)}convertGeoPoint(t){return new BZ(To(t.latitude),To(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=$B(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(_D(t));default:return null}}convertTimestamp(t){const n=Sb(t);return new Vl(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=bs.fromString(t);ki(U2e(r));const i=new wD(r.get(1),r.get(3)),s=new Tn(r.popFirst(5));return i.isEqual(n)||Jy(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ACe(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class ICe extends TCe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new nL(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(KB("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class nL extends ICe{data(t={}){return super.data(t)}}class Rht{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new BR(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new nL(this._firestore,this._userDataWriter,r.key,r,new BR(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Qt(pt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new nL(i._firestore,i._userDataWriter,a.doc.key,a.doc,new BR(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new nL(i._firestore,i._userDataWriter,a.doc.key,a.doc,new BR(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:Nht(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Nht(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Hn()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W4(e){e=F0(e,Hl);const t=F0(e.firestore,$E);return ght(r3(t),e._key).then(n=>Dht(t,e,n))}class kCe extends kht{constructor(t){super(),this.firestore=t}convertBytes(t){return new mC(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Hl(this.firestore,null,n)}}function kS(e){e=F0(e,n3);const t=F0(e.firestore,$E),n=r3(t),r=new kCe(t);return Iht(e._query),yht(n,e._query).then(i=>new Rht(t,r,e,i))}function ju(e,t,n){e=F0(e,Hl);const r=F0(e.firestore,$E),i=ACe(e.converter,t,n);return YZ(r,[vCe(GB(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,ed.none())])}function ude(e,t,n,...r){e=F0(e,Hl);const i=F0(e.firestore,$E),s=GB(i);let o;return o=typeof(t=ds(t))=="string"||t instanceof i3?xCe(s,"updateDoc",e._key,t,n,r):bCe(s,"updateDoc",e._key,t),YZ(i,[o.toMutation(e._key,ed.exists(!0))])}function YZ(e,t){return function(r,i){const s=new My;return r.asyncQueue.enqueueAndForget(async()=>nht(await pht(r),i,s)),s.promise}(r3(e),t)}function Dht(e,t,n){const r=n.docs.get(t._key),i=new kCe(e);return new ICe(e,i,t._key,r,new BR(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pht{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=GB(t)}set(t,n,r){this._verifyNotCommitted();const i=Wz(t,this._firestore),s=ACe(i.converter,n,r),o=vCe(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,ed.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=Wz(t,this._firestore);let o;return o=typeof(n=ds(n))=="string"||n instanceof i3?xCe(this._dataReader,"WriteBatch.update",s._key,n,r,i):bCe(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,ed.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=Wz(t,this._firestore);return this._mutations=this._mutations.concat(new wZ(n._key,ed.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Qt(pt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Wz(e,t){if((e=ds(e)).firestore!==t)throw new Qt(pt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function G4(){return new zZ("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lde(e){return r3(e=F0(e,$E)),new Pht(e,t=>YZ(e,t))}(function(t,n=!0){(function(i){FA=i})(OE),Qy(new L0("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new $E(new kct(r.getProvider("auth-internal")),new Pct(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Qt(pt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wD(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ip(bfe,"4.7.6",t),Ip(bfe,"4.7.6","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GW=new Map,RCe={activated:!1,tokenObservers:[]},Oht={initialized:!1,enabled:!1};function fa(e){return GW.get(e)||Object.assign({},RCe)}function Mht(e,t){return GW.set(e,t),GW.get(e)}function QB(){return Oht}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NCe="https://content-firebaseappcheck.googleapis.com/v1",Lht="exchangeRecaptchaV3Token",$ht="exchangeDebugToken",cde={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Fht=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bht{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new yD,this.pending.promise.catch(n=>{}),await jht(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new yD,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function jht(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uht={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Vc=new LA("appCheck","AppCheck",Uht);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fde(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function KZ(e){if(!fa(e).activated)throw Vc.create("use-before-activation",{appName:e.name})}function DCe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=Y4(n)+"d:"),r&&(o+=Y4(r)+"h:"),o+=Y4(i)+"m:"+Y4(s)+"s",o}function Y4(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XZ({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw Vc.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw Vc.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw Vc.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Vc.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function zht(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${NCe}/projects/${n}/apps/${r}:${Lht}?key=${i}`,body:{recaptcha_v3_token:t}}}function PCe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${NCe}/projects/${n}/apps/${r}:${$ht}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vht="firebase-app-check-database",Hht=1,ID="firebase-app-check-store",OCe="debug-token";let K4=null;function MCe(){return K4||(K4=new Promise((e,t)=>{try{const n=indexedDB.open(Vht,Hht);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(Vc.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(ID,{keyPath:"compositeKey"})}}}catch(n){t(Vc.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),K4)}function qht(e){return $Ce(FCe(e))}function Wht(e,t){return LCe(FCe(e),t)}function Ght(e){return LCe(OCe,e)}function Yht(){return $Ce(OCe)}async function LCe(e,t){const r=(await MCe()).transaction(ID,"readwrite"),s=r.objectStore(ID).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(Vc.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function $Ce(e){const n=(await MCe()).transaction(ID,"readonly"),i=n.objectStore(ID).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(Vc.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function FCe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD=new DB("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kht(e){if(sZ()){let t;try{t=await qht(e)}catch(n){kD.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function Gz(e,t){return sZ()?Wht(e,t).catch(n=>{kD.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function Xht(){let e;try{e=await Yht()}catch{}if(e)return e;{const t=crypto.randomUUID();return Ght(t).catch(n=>kD.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QZ(){return QB().enabled}async function JZ(){const e=QB();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function Qht(){const e=OSe(),t=QB();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new yD;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(Xht())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jht={error:"UNKNOWN_ERROR"};function Zht(e){return iZ.encodeString(JSON.stringify(e),!1)}async function YW(e,t=!1){const n=e.app;KZ(n);const r=fa(n);let i=r.token,s;if(i&&!d2(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(d2(u)?i=u:await Gz(n,void 0))}if(!t&&i&&d2(i))return{token:i.token};let o=!1;if(QZ()){r.exchangeTokenPromise||(r.exchangeTokenPromise=XZ(PCe(n,await JZ()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await Gz(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await fa(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?kD.warn(u.message):kD.error(u),s=u}let a;return i?s?d2(i)?a={token:i.token,internalError:s}:a=hde(s):(a={token:i.token},r.token=i,await Gz(n,i)):a=hde(s),o&&UCe(n,a),a}async function ept(e){const t=e.app;KZ(t);const{provider:n}=fa(t);if(QZ()){const r=await JZ(),{token:i}=await XZ(PCe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function BCe(e,t,n,r){const{app:i}=e,s=fa(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&d2(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),dde(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>dde(e))}function jCe(e,t){const n=fa(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function dde(e){const{app:t}=e,n=fa(t);let r=n.tokenRefresher;r||(r=tpt(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function tpt(e){const{app:t}=e;return new Bht(async()=>{const n=fa(t);let r;if(n.token?r=await YW(e,!0):r=await YW(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=fa(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},cde.RETRIAL_MIN_WAIT,cde.RETRIAL_MAX_WAIT)}function UCe(e,t){const n=fa(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function d2(e){return e.expireTimeMillis-Date.now()>0}function hde(e){return{token:Zht(Jht),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class npt{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=fa(this.app);for(const n of t)jCe(this.app,n.next);return Promise.resolve()}}function rpt(e,t){return new npt(e,t)}function ipt(e){return{getToken:t=>YW(e,t),getLimitedUseToken:()=>ept(e),addTokenListener:t=>BCe(e,"INTERNAL",t),removeTokenListener:t=>jCe(e.app,t)}}const spt="@firebase/app-check",opt="0.8.11";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const apt="https://www.google.com/recaptcha/api.js";function upt(e,t){const n=new yD,r=fa(e);r.reCAPTCHAState={initialized:n};const i=lpt(e),s=fde(!1);return s?pde(e,t,s,i,n):dpt(()=>{const o=fde(!1);if(!o)throw new Error("no recaptcha");pde(e,t,o,i,n)}),n.promise}function pde(e,t,n,r,i){n.ready(()=>{fpt(e,t,n,r),i.resolve(n)})}function lpt(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function cpt(e){KZ(e);const n=await fa(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=fa(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function fpt(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{fa(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{fa(e).reCAPTCHAState.succeeded=!1}}),s=fa(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function dpt(e){const t=document.createElement("script");t.src=apt,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZZ{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;ppt(this._throttleData);const i=await cpt(this._app).catch(o=>{throw Vc.create("recaptcha-error")});if(!(!((t=fa(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw Vc.create("recaptcha-error");let s;try{s=await XZ(zht(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=hpt(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),Vc.create("throttled",{time:DCe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=$A(t,"heartbeat"),upt(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof ZZ?this._siteKey===t._siteKey:!1}}function hpt(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+Fht,httpStatus:e};{const n=t?t.backoffCount:0,r=eut(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function ppt(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Vc.create("throttled",{time:DCe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mpt(e=aZ(),t){e=ds(e);const n=$A(e,"app-check");if(QB().initialized||Qht(),QZ()&&JZ().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw Vc.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return gpt(e,t.provider,t.isTokenAutoRefreshEnabled),fa(e).isTokenAutoRefreshEnabled&&BCe(r,"INTERNAL",()=>{}),r}function gpt(e,t,n){const r=Mht(e,Object.assign({},RCe));r.activated=!0,r.provider=t,r.cachedTokenPromise=Kht(e).then(i=>(i&&d2(i)&&(r.token=i,UCe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const ypt="app-check",mde="app-check-internal";function vpt(){Qy(new L0(ypt,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return rpt(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(mde).initialize()})),Qy(new L0(mde,e=>{const t=e.getProvider("app-check").getImmediate();return ipt(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ip(spt,opt)}vpt();function zCe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bpt=zCe,VCe=new LA("auth","Firebase",zCe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iF=new DB("@firebase/auth");function xpt(e,...t){iF.logLevel<=Or.WARN&&iF.warn(`Auth (${OE}): ${e}`,...t)}function rL(e,...t){iF.logLevel<=Or.ERROR&&iF.error(`Auth (${OE}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(e,...t){throw tee(e,...t)}function kp(e,...t){return tee(e,...t)}function eee(e,t,n){const r=Object.assign(Object.assign({},bpt()),{[t]:n});return new LA("auth","Firebase",r).create(t,{appName:e.name})}function fb(e){return eee(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _pt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&B0(e,"argument-error"),eee(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function tee(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return VCe.create(e,...t)}function Yn(e,t,...n){if(!e)throw tee(t,...n)}function wy(e){const t="INTERNAL ASSERTION FAILED: "+e;throw rL(t),new Error(t)}function e1(e,t){e||wy(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KW(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function wpt(){return gde()==="http:"||gde()==="https:"}function gde(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ept(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wpt()||Fat()||"connection"in navigator)?navigator.onLine:!0}function Tpt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(t,n){this.shortDelay=t,this.longDelay=n,e1(n>t,"Short delay should be less than long delay!"),this.isMobile=Mat()||Bat()}get(){return Ept()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nee(e,t){e1(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HCe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wy("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wy("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wy("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Spt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cpt=new o3(3e4,6e4);function JB(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function VA(e,t,n,r,i={}){return qCe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=KP(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:u},s);return $at()||(l.referrerPolicy="no-referrer"),HCe.fetch()(GCe(e,e.config.apiHost,n,a),l)})}async function qCe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Spt),t);try{const i=new Apt(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw X4(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw X4(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw X4(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw X4(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw eee(e,c,l);B0(e,c)}}catch(i){if(i instanceof ig)throw i;B0(e,"network-request-failed",{message:String(i)})}}async function WCe(e,t,n,r,i={}){const s=await VA(e,t,n,r,i);return"mfaPendingCredential"in s&&B0(e,"multi-factor-auth-required",{_serverResponse:s}),s}function GCe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?nee(e.config,i):`${e.config.apiScheme}://${i}`}class Apt{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(kp(this.auth,"network-request-failed")),Cpt.get())})}}function X4(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=kp(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ipt(e,t){return VA(e,"POST","/v1/accounts:delete",t)}async function YCe(e,t){return VA(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function kpt(e,t=!1){const n=ds(e),r=await n.getIdToken(t),i=ree(r);Yn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:BN(Yz(i.auth_time)),issuedAtTime:BN(Yz(i.iat)),expirationTime:BN(Yz(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Yz(e){return Number(e)*1e3}function ree(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return rL("JWT malformed, contained fewer than 3 sections"),null;try{const i=PSe(n);return i?JSON.parse(i):(rL("Failed to decode base64 JWT payload"),null)}catch(i){return rL("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function yde(e){const t=ree(e);return Yn(t,"internal-error"),Yn(typeof t.exp<"u","internal-error"),Yn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RD(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof ig&&Rpt(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function Rpt({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Npt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XW{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=BN(this.lastLoginAt),this.creationTime=BN(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sF(e){var t;const n=e.auth,r=await e.getIdToken(),i=await RD(e,YCe(n,{idToken:r}));Yn(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?KCe(s.providerUserInfo):[],a=Ppt(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new XW(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function Dpt(e){const t=ds(e);await sF(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Ppt(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function KCe(e){return e.map(t=>{var{providerId:n}=t,r=RP(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Opt(e,t){const n=await qCe(e,{},async()=>{const r=KP({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=GCe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",HCe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Mpt(e,t){return VA(e,"POST","/v2/accounts:revokeToken",JB(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Yn(t.idToken,"internal-error"),Yn(typeof t.idToken<"u","internal-error"),Yn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):yde(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Yn(t.length!==0,"internal-error");const n=yde(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Yn(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await Opt(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new D2;return r&&(Yn(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(Yn(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(Yn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new D2,this.toJSON())}_performRefresh(){return wy("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wv(e,t){Yn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Ey{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=RP(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Npt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new XW(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await RD(this,this.stsTokenManager.getToken(this.auth,t));return Yn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return kpt(this,t)}reload(){return Dpt(this)}_assign(t){this!==t&&(Yn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Ey(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Yn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await sF(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(d0(this.auth.app))return Promise.reject(fb(this.auth));const t=await this.getIdToken();return await RD(this,Ipt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,y=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,v=(l=n.createdAt)!==null&&l!==void 0?l:void 0,b=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:w,emailVerified:E,isAnonymous:T,providerData:A,stsTokenManager:I}=n;Yn(w&&I,t,"internal-error");const R=D2.fromJSON(this.name,I);Yn(typeof w=="string",t,"internal-error"),wv(f,t.name),wv(d,t.name),Yn(typeof E=="boolean",t,"internal-error"),Yn(typeof T=="boolean",t,"internal-error"),wv(h,t.name),wv(p,t.name),wv(m,t.name),wv(y,t.name),wv(v,t.name),wv(b,t.name);const D=new Ey({uid:w,auth:t,email:d,emailVerified:E,displayName:f,isAnonymous:T,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:R,createdAt:v,lastLoginAt:b});return A&&Array.isArray(A)&&(D.providerData=A.map(M=>Object.assign({},M))),y&&(D._redirectEventId=y),D}static async _fromIdTokenResponse(t,n,r=!1){const i=new D2;i.updateFromServerResponse(n);const s=new Ey({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await sF(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];Yn(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?KCe(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new D2;a.updateFromIdToken(r);const u=new Ey({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new XW(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vde=new Map;function Ty(e){e1(e instanceof Function,"Expected a class definition");let t=vde.get(e);return t?(e1(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,vde.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XCe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}XCe.type="NONE";const bde=XCe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iL(e,t,n){return`firebase:${e}:${t}:${n}`}class P2{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=iL(this.userKey,i.apiKey,s),this.fullPersistenceKey=iL("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Ey._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new P2(Ty(bde),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||Ty(bde);const o=iL(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=Ey._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new P2(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new P2(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xde(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(eAe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(QCe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(nAe(t))return"Blackberry";if(rAe(t))return"Webos";if(JCe(t))return"Safari";if((t.includes("chrome/")||ZCe(t))&&!t.includes("edge/"))return"Chrome";if(tAe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function QCe(e=cl()){return/firefox\//i.test(e)}function JCe(e=cl()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ZCe(e=cl()){return/crios\//i.test(e)}function eAe(e=cl()){return/iemobile/i.test(e)}function tAe(e=cl()){return/android/i.test(e)}function nAe(e=cl()){return/blackberry/i.test(e)}function rAe(e=cl()){return/webos/i.test(e)}function iee(e=cl()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Lpt(e=cl()){var t;return iee(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function $pt(){return jat()&&document.documentMode===10}function iAe(e=cl()){return iee(e)||tAe(e)||rAe(e)||nAe(e)||/windows phone/i.test(e)||eAe(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sAe(e,t=[]){let n;switch(e){case"Browser":n=xde(cl());break;case"Worker":n=`${xde(cl())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${OE}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fpt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bpt(e,t={}){return VA(e,"GET","/v2/passwordPolicy",JB(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jpt=6;class Upt{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:jpt,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zpt{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _de(this),this.idTokenSubscription=new _de(this),this.beforeStateQueue=new Fpt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=VCe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Ty(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await P2.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await YCe(this,{idToken:t}),r=await Ey._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(d0(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Yn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await sF(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Tpt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(d0(this.app))return Promise.reject(fb(this));const n=t?ds(t):null;return n&&Yn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Yn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return d0(this.app)?Promise.reject(fb(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return d0(this.app)?Promise.reject(fb(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ty(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Bpt(this),n=new Upt(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new LA("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Mpt(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Ty(t)||this._popupRedirectResolver;Yn(n,this,"argument-error"),this.redirectPersistenceManager=await P2.create(this,[Ty(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Yn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Yn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=sAe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&xpt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function a3(e){return ds(e)}class _de{constructor(t){this.auth=t,this.observer=null,this.addObserver=Gat(n=>this.observer=n)}get next(){return Yn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let see={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Vpt(e){see=e}function Hpt(e){return see.loadJS(e)}function qpt(){return see.gapiScript}function Wpt(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gpt(e,t){const n=$A(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(vD(s,t??{}))return i;B0(i,"already-initialized")}return n.initialize({options:t})}function Ypt(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ty);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function Kpt(e,t,n){const r=a3(e);Yn(r._canInitEmulator,r,"emulator-config-failed"),Yn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=oAe(t),{host:o,port:a}=Xpt(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),Qpt()}function oAe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Xpt(e){const t=oAe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:wde(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:wde(o)}}}function wde(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function Qpt(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aAe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return wy("not implemented")}_getIdTokenResponse(t){return wy("not implemented")}_linkToIdToken(t,n){return wy("not implemented")}_getReauthenticationResolver(t){return wy("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O2(e,t){return WCe(e,"POST","/v1/accounts:signInWithIdp",JB(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jpt="http://localhost";class qw extends aAe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new qw(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):B0("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=RP(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new qw(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return O2(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,O2(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,O2(t,n)}buildRequest(){const t={requestUri:Jpt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=KP(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oee{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3 extends oee{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv extends u3{constructor(){super("facebook.com")}static credential(t){return qw._fromParams({providerId:Vv.PROVIDER_ID,signInMethod:Vv.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Vv.credentialFromTaggedObject(t)}static credentialFromError(t){return Vv.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Vv.credential(t.oauthAccessToken)}catch{return null}}}Vv.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vv.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my extends u3{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return qw._fromParams({providerId:my.PROVIDER_ID,signInMethod:my.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return my.credentialFromTaggedObject(t)}static credentialFromError(t){return my.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return my.credential(n,r)}catch{return null}}}my.GOOGLE_SIGN_IN_METHOD="google.com";my.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv extends u3{constructor(){super("github.com")}static credential(t){return qw._fromParams({providerId:Hv.PROVIDER_ID,signInMethod:Hv.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Hv.credentialFromTaggedObject(t)}static credentialFromError(t){return Hv.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Hv.credential(t.oauthAccessToken)}catch{return null}}}Hv.GITHUB_SIGN_IN_METHOD="github.com";Hv.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv extends u3{constructor(){super("twitter.com")}static credential(t,n){return qw._fromParams({providerId:qv.PROVIDER_ID,signInMethod:qv.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return qv.credentialFromTaggedObject(t)}static credentialFromError(t){return qv.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return qv.credential(n,r)}catch{return null}}}qv.TWITTER_SIGN_IN_METHOD="twitter.com";qv.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zpt(e,t){return WCe(e,"POST","/v1/accounts:signUp",JB(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await Ey._fromIdTokenResponse(t,r,i),o=Ede(r);return new kb({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=Ede(r);return new kb({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function Ede(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function emt(e){var t;if(d0(e.app))return Promise.reject(fb(e));const n=a3(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new kb({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Zpt(n,{returnSecureToken:!0}),i=await kb._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF extends ig{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,oF.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new oF(t,n,r,i)}}function uAe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?oF._fromErrorAndOperation(e,s,t,r):s})}async function tmt(e,t,n=!1){const r=await RD(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return kb._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nmt(e,t,n=!1){const{auth:r}=e;if(d0(r.app))return Promise.reject(fb(r));const i="reauthenticate";try{const s=await RD(e,uAe(r,i,t,e),n);Yn(s.idToken,r,"internal-error");const o=ree(s.idToken);Yn(o,r,"internal-error");const{sub:a}=o;return Yn(e.uid===a,r,"user-mismatch"),kb._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&B0(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rmt(e,t,n=!1){if(d0(e.app))return Promise.reject(fb(e));const r="signIn",i=await uAe(e,r,t),s=await kb._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function imt(e,t,n,r){return ds(e).onIdTokenChanged(t,n,r)}function smt(e,t,n){return ds(e).beforeAuthStateChanged(t,n)}function omt(e,t,n,r){return ds(e).onAuthStateChanged(t,n,r)}function amt(e){return ds(e).signOut()}const aF="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lAe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(aF,"1"),this.storage.removeItem(aF),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const umt=1e3,lmt=10;class cAe extends lAe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=iAe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);$pt()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,lmt):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},umt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}cAe.type="LOCAL";const cmt=cAe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fAe extends lAe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}fAe.type="SESSION";const dAe=fAe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fmt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZB{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new ZB(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await fmt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ZB.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aee(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dmt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=aee("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(){return window}function hmt(e){_0().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hAe(){return typeof _0().WorkerGlobalScope<"u"&&typeof _0().importScripts=="function"}async function pmt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function mmt(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function gmt(){return hAe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pAe="firebaseLocalStorageDb",ymt=1,uF="firebaseLocalStorage",mAe="fbase_key";class l3{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function e9(e,t){return e.transaction([uF],t?"readwrite":"readonly").objectStore(uF)}function vmt(){const e=indexedDB.deleteDatabase(pAe);return new l3(e).toPromise()}function QW(){const e=indexedDB.open(pAe,ymt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(uF,{keyPath:mAe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(uF)?t(r):(r.close(),await vmt(),t(await QW()))})})}async function Tde(e,t,n){const r=e9(e,!0).put({[mAe]:t,value:n});return new l3(r).toPromise()}async function bmt(e,t){const n=e9(e,!1).get(t),r=await new l3(n).toPromise();return r===void 0?null:r.value}function Sde(e,t){const n=e9(e,!0).delete(t);return new l3(n).toPromise()}const xmt=800,_mt=3;class gAe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await QW(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>_mt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hAe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ZB._getInstance(gmt()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await pmt(),!this.activeServiceWorker)return;this.sender=new dmt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||mmt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await QW();return await Tde(t,aF,"1"),await Sde(t,aF),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Tde(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>bmt(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Sde(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=e9(i,!1).getAll();return new l3(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),xmt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gAe.type="LOCAL";const wmt=gAe;new o3(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yAe(e,t){return t?Ty(t):(Yn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uee extends aAe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return O2(t,this._buildIdpRequest())}_linkToIdToken(t,n){return O2(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return O2(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function Emt(e){return rmt(e.auth,new uee(e),e.bypassAuthState)}function Tmt(e){const{auth:t,user:n}=e;return Yn(n,t,"internal-error"),nmt(n,new uee(e),e.bypassAuthState)}async function Smt(e){const{auth:t,user:n}=e;return Yn(n,t,"internal-error"),tmt(n,new uee(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vAe{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Emt;case"linkViaPopup":case"linkViaRedirect":return Smt;case"reauthViaPopup":case"reauthViaRedirect":return Tmt;default:B0(this.auth,"internal-error")}}resolve(t){e1(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){e1(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cmt=new o3(2e3,1e4);async function Amt(e,t,n){if(d0(e.app))return Promise.reject(kp(e,"operation-not-supported-in-this-environment"));const r=a3(e);_pt(e,t,oee);const i=yAe(r,n);return new gw(r,"signInViaPopup",t,i).executeNotNull()}class gw extends vAe{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,gw.currentPopupAction&&gw.currentPopupAction.cancel(),gw.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Yn(t,this.auth,"internal-error"),t}async onExecution(){e1(this.filter.length===1,"Popup operations only handle one event");const t=aee();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(kp(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(kp(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gw.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(kp(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Cmt.get())};t()}}gw.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Imt="pendingRedirect",sL=new Map;class kmt extends vAe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=sL.get(this.auth._key());if(!t){try{const r=await Rmt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}sL.set(this.auth._key(),t)}return this.bypassAuthState||sL.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Rmt(e,t){const n=Pmt(t),r=Dmt(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Nmt(e,t){sL.set(e._key(),t)}function Dmt(e){return Ty(e._redirectPersistence)}function Pmt(e){return iL(Imt,e.config.apiKey,e.name)}async function Omt(e,t,n=!1){if(d0(e.app))return Promise.reject(fb(e));const r=a3(e),i=yAe(r,t),o=await new kmt(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mmt=10*60*1e3;class Lmt{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!$mt(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!bAe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(kp(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Mmt&&this.cachedEventUids.clear(),this.cachedEventUids.has(Cde(t))}saveEventToCache(t){this.cachedEventUids.add(Cde(t)),this.lastProcessedEventTime=Date.now()}}function Cde(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function bAe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function $mt(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bAe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fmt(e,t={}){return VA(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bmt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jmt=/^https?/;async function Umt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Fmt(e);for(const n of t)try{if(zmt(n))return}catch{}B0(e,"unauthorized-domain")}function zmt(e){const t=KW(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!jmt.test(n))return!1;if(Bmt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vmt=new o3(3e4,6e4);function Ade(){const e=_0().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function Hmt(e){return new Promise((t,n)=>{var r,i,s;function o(){Ade(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ade(),n(kp(e,"network-request-failed"))},timeout:Vmt.get()})}if(!((i=(r=_0().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=_0().gapi)===null||s===void 0)&&s.load)o();else{const a=Wpt("iframefcb");return _0()[a]=()=>{gapi.load?o():n(kp(e,"network-request-failed"))},Hpt(`${qpt()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw oL=null,t})}let oL=null;function qmt(e){return oL=oL||Hmt(e),oL}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wmt=new o3(5e3,15e3),Gmt="__/auth/iframe",Ymt="emulator/auth/iframe",Kmt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Xmt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Qmt(e){const t=e.config;Yn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?nee(t,Ymt):`https://${e.config.authDomain}/${Gmt}`,r={apiKey:t.apiKey,appName:e.name,v:OE},i=Xmt.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${KP(r).slice(1)}`}async function Jmt(e){const t=await qmt(e),n=_0().gapi;return Yn(n,e,"internal-error"),t.open({where:document.body,url:Qmt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Kmt,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=kp(e,"network-request-failed"),a=_0().setTimeout(()=>{s(o)},Wmt.get());function u(){_0().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zmt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},e0t=500,t0t=600,n0t="_blank",r0t="http://localhost";class Ide{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function i0t(e,t,n,r=e0t,i=t0t){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},Zmt),{width:r.toString(),height:i.toString(),top:s,left:o}),l=cl().toLowerCase();n&&(a=ZCe(l)?n0t:n),QCe(l)&&(t=t||r0t,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(Lpt(l)&&a!=="_self")return s0t(t||"",a),new Ide(null);const f=window.open(t||"",a,c);Yn(f,e,"popup-blocked");try{f.focus()}catch{}return new Ide(f)}function s0t(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0t="__/auth/handler",a0t="emulator/auth/handler",u0t=encodeURIComponent("fac");async function kde(e,t,n,r,i,s){Yn(e.config.authDomain,e,"auth-domain-config-required"),Yn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:OE,eventId:i};if(t instanceof oee){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",Wat(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof u3){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${u0t}=${encodeURIComponent(u)}`:"";return`${l0t(e)}?${KP(a).slice(1)}${l}`}function l0t({config:e}){return e.emulator?nee(e,a0t):`https://${e.authDomain}/${o0t}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kz="webStorageSupport";class c0t{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dAe,this._completeRedirectFn=Omt,this._overrideRedirectResult=Nmt}async _openPopup(t,n,r,i){var s;e1((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await kde(t,n,r,KW(),i);return i0t(t,o,aee())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await kde(t,n,r,KW(),i);return hmt(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(e1(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await Jmt(t),r=new Lmt(t);return n.register("authEvent",i=>(Yn(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Kz,{type:Kz},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Kz];o!==void 0&&n(!!o),B0(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Umt(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return iAe()||JCe()||iee()}}const xAe=c0t;var Rde="@firebase/auth",Nde="1.8.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0t{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Yn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0t(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function h0t(e){Qy(new L0("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Yn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sAe(e)},l=new zpt(r,i,s,u);return Ypt(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Qy(new L0("auth-internal",t=>{const n=a3(t.getProvider("auth").getImmediate());return(r=>new f0t(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ip(Rde,Nde,d0t(e)),Ip(Rde,Nde,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0t=5*60,m0t=$Se("authIdTokenMaxAge")||p0t;let Dde=null;const g0t=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>m0t)return;const i=n==null?void 0:n.token;Dde!==i&&(Dde=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function lF(e=aZ()){const t=$A(e,"auth");if(t.isInitialized())return t.getImmediate();const n=Gpt(e,{popupRedirectResolver:xAe,persistence:[wmt,cmt,dAe]}),r=$Se("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=g0t(s.toString());smt(n,o,()=>o(n.currentUser)),imt(n,a=>o(a))}}const i=MSe("auth");return i&&Kpt(n,`http://${i}`),n}function y0t(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}Vpt({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=kp("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",y0t().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});h0t("Browser");function jR(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Xz={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/var Pde;function v0t(){return Pde||(Pde=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof jR=="function"&&jR;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof jR=="function"&&jR,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var y=s.document.createElement("script");y.onreadystatechange=function(){p(),y.onreadystatechange=null,y.parentNode.removeChild(y),y=null},s.document.documentElement.appendChild(y)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var y,v,b=h.length;b;){for(v=h,h=[],y=-1;++y<b;)v[y]();b=h.length}d=!1}r.exports=m;function m(y){h.push(y)===1&&!d&&a()}}).call(this,typeof aa<"u"?aa:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(T){if(typeof T!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,T!==o&&m(this,T)}f.prototype.catch=function(T){return this.then(null,T)},f.prototype.then=function(T,A){if(typeof T!="function"&&this.state===l||typeof A!="function"&&this.state===u)return this;var I=new this.constructor(o);if(this.state!==c){var R=this.state===l?T:A;h(I,R,this.outcome)}else this.queue.push(new d(I,T,A));return I};function d(T,A,I){this.promise=T,typeof A=="function"&&(this.onFulfilled=A,this.callFulfilled=this.otherCallFulfilled),typeof I=="function"&&(this.onRejected=I,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(T){a.resolve(this.promise,T)},d.prototype.otherCallFulfilled=function(T){h(this.promise,this.onFulfilled,T)},d.prototype.callRejected=function(T){a.reject(this.promise,T)},d.prototype.otherCallRejected=function(T){h(this.promise,this.onRejected,T)};function h(T,A,I){s(function(){var R;try{R=A(I)}catch(D){return a.reject(T,D)}R===T?a.reject(T,new TypeError("Cannot resolve promise with itself")):a.resolve(T,R)})}a.resolve=function(T,A){var I=y(p,A);if(I.status==="error")return a.reject(T,I.value);var R=I.value;if(R)m(T,R);else{T.state=l,T.outcome=A;for(var D=-1,M=T.queue.length;++D<M;)T.queue[D].callFulfilled(A)}return T},a.reject=function(T,A){T.state=u,T.outcome=A;for(var I=-1,R=T.queue.length;++I<R;)T.queue[I].callRejected(A);return T};function p(T){var A=T&&T.then;if(T&&(typeof T=="object"||typeof T=="function")&&typeof A=="function")return function(){A.apply(T,arguments)}}function m(T,A){var I=!1;function R(U){I||(I=!0,a.reject(T,U))}function D(U){I||(I=!0,a.resolve(T,U))}function M(){A(D,R)}var $=y(M);$.status==="error"&&R($.value)}function y(T,A){var I={};try{I.value=T(A),I.status="success"}catch(R){I.status="error",I.value=R}return I}f.resolve=v;function v(T){return T instanceof this?T:a.resolve(new this(o),T)}f.reject=b;function b(T){var A=new this(o);return a.reject(A,T)}f.all=w;function w(T){var A=this;if(Object.prototype.toString.call(T)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=T.length,R=!1;if(!I)return this.resolve([]);for(var D=new Array(I),M=0,$=-1,U=new this(o);++$<I;)F(T[$],$);return U;function F(H,Q){A.resolve(H).then(J,function(ne){R||(R=!0,a.reject(U,ne))});function J(ne){D[Q]=ne,++M===I&&!R&&(R=!0,a.resolve(U,D))}}}f.race=E;function E(T){var A=this;if(Object.prototype.toString.call(T)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=T.length,R=!1;if(!I)return this.resolve([]);for(var D=-1,M=new this(o);++D<I;)$(T[D]);return M;function $(U){A.resolve(U).then(function(F){R||(R=!0,a.resolve(M,F))},function(F){R||(R=!0,a.reject(M,F))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof aa<"u"?aa:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ue){return typeof ue}:function(ue){return ue&&typeof Symbol=="function"&&ue.constructor===Symbol&&ue!==Symbol.prototype?"symbol":typeof ue};function o(ue,Se){if(!(ue instanceof Se))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var ue=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),Se=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!ue||Se)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(ue,Se){ue=ue||[],Se=Se||{};try{return new Blob(ue,Se)}catch(Re){if(Re.name!=="TypeError")throw Re;for(var ge=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,De=new ge,Be=0;Be<ue.length;Be+=1)De.append(ue[Be]);return De.getBlob(Se.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(ue,Se){Se&&ue.then(function(ge){Se(null,ge)},function(ge){Se(ge)})}function h(ue,Se,ge){typeof Se=="function"&&ue.then(Se),typeof ge=="function"&&ue.catch(ge)}function p(ue){return typeof ue!="string"&&(console.warn(ue+" used as a key, but it is not a string."),ue=String(ue)),ue}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var y="local-forage-detect-blob-support",v=void 0,b={},w=Object.prototype.toString,E="readonly",T="readwrite";function A(ue){for(var Se=ue.length,ge=new ArrayBuffer(Se),De=new Uint8Array(ge),Be=0;Be<Se;Be++)De[Be]=ue.charCodeAt(Be);return ge}function I(ue){return new f(function(Se){var ge=ue.transaction(y,T),De=c([""]);ge.objectStore(y).put(De,"key"),ge.onabort=function(Be){Be.preventDefault(),Be.stopPropagation(),Se(!1)},ge.oncomplete=function(){var Be=navigator.userAgent.match(/Chrome\/(\d+)/),Re=navigator.userAgent.match(/Edge\//);Se(Re||!Be||parseInt(Be[1],10)>=43)}}).catch(function(){return!1})}function R(ue){return typeof v=="boolean"?f.resolve(v):I(ue).then(function(Se){return v=Se,v})}function D(ue){var Se=b[ue.name],ge={};ge.promise=new f(function(De,Be){ge.resolve=De,ge.reject=Be}),Se.deferredOperations.push(ge),Se.dbReady?Se.dbReady=Se.dbReady.then(function(){return ge.promise}):Se.dbReady=ge.promise}function M(ue){var Se=b[ue.name],ge=Se.deferredOperations.pop();if(ge)return ge.resolve(),ge.promise}function $(ue,Se){var ge=b[ue.name],De=ge.deferredOperations.pop();if(De)return De.reject(Se),De.promise}function U(ue,Se){return new f(function(ge,De){if(b[ue.name]=b[ue.name]||G(),ue.db)if(Se)D(ue),ue.db.close();else return ge(ue.db);var Be=[ue.name];Se&&Be.push(ue.version);var Re=u.open.apply(u,Be);Se&&(Re.onupgradeneeded=function(rt){var bt=Re.result;try{bt.createObjectStore(ue.storeName),rt.oldVersion<=1&&bt.createObjectStore(y)}catch(Et){if(Et.name==="ConstraintError")console.warn('The database "'+ue.name+'" has been upgraded from version '+rt.oldVersion+" to version "+rt.newVersion+', but the storage "'+ue.storeName+'" already exists.');else throw Et}}),Re.onerror=function(rt){rt.preventDefault(),De(Re.error)},Re.onsuccess=function(){var rt=Re.result;rt.onversionchange=function(bt){bt.target.close()},ge(rt),M(ue)}})}function F(ue){return U(ue,!1)}function H(ue){return U(ue,!0)}function Q(ue,Se){if(!ue.db)return!0;var ge=!ue.db.objectStoreNames.contains(ue.storeName),De=ue.version<ue.db.version,Be=ue.version>ue.db.version;if(De&&(ue.version!==Se&&console.warn('The database "'+ue.name+`" can't be downgraded from version `+ue.db.version+" to version "+ue.version+"."),ue.version=ue.db.version),Be||ge){if(ge){var Re=ue.db.version+1;Re>ue.version&&(ue.version=Re)}return!0}return!1}function J(ue){return new f(function(Se,ge){var De=new FileReader;De.onerror=ge,De.onloadend=function(Be){var Re=btoa(Be.target.result||"");Se({__local_forage_encoded_blob:!0,data:Re,type:ue.type})},De.readAsBinaryString(ue)})}function ne(ue){var Se=A(atob(ue.data));return c([Se],{type:ue.type})}function Z(ue){return ue&&ue.__local_forage_encoded_blob}function ie(ue){var Se=this,ge=Se._initReady().then(function(){var De=b[Se._dbInfo.name];if(De&&De.dbReady)return De.dbReady});return h(ge,ue,ue),ge}function q(ue){D(ue);for(var Se=b[ue.name],ge=Se.forages,De=0;De<ge.length;De++){var Be=ge[De];Be._dbInfo.db&&(Be._dbInfo.db.close(),Be._dbInfo.db=null)}return ue.db=null,F(ue).then(function(Re){return ue.db=Re,Q(ue)?H(ue):Re}).then(function(Re){ue.db=Se.db=Re;for(var rt=0;rt<ge.length;rt++)ge[rt]._dbInfo.db=Re}).catch(function(Re){throw $(ue,Re),Re})}function j(ue,Se,ge,De){De===void 0&&(De=1);try{var Be=ue.db.transaction(ue.storeName,Se);ge(null,Be)}catch(Re){if(De>0&&(!ue.db||Re.name==="InvalidStateError"||Re.name==="NotFoundError"))return f.resolve().then(function(){if(!ue.db||Re.name==="NotFoundError"&&!ue.db.objectStoreNames.contains(ue.storeName)&&ue.version<=ue.db.version)return ue.db&&(ue.version=ue.db.version+1),H(ue)}).then(function(){return q(ue).then(function(){j(ue,Se,ge,De-1)})}).catch(ge);ge(Re)}}function G(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function V(ue){var Se=this,ge={db:null};if(ue)for(var De in ue)ge[De]=ue[De];var Be=b[ge.name];Be||(Be=G(),b[ge.name]=Be),Be.forages.push(Se),Se._initReady||(Se._initReady=Se.ready,Se.ready=ie);var Re=[];function rt(){return f.resolve()}for(var bt=0;bt<Be.forages.length;bt++){var Et=Be.forages[bt];Et!==Se&&Re.push(Et._initReady().catch(rt))}var xt=Be.forages.slice(0);return f.all(Re).then(function(){return ge.db=Be.db,F(ge)}).then(function(Nt){return ge.db=Nt,Q(ge,Se._defaultConfig.version)?H(ge):Nt}).then(function(Nt){ge.db=Be.db=Nt,Se._dbInfo=ge;for(var qt=0;qt<xt.length;qt++){var In=xt[qt];In!==Se&&(In._dbInfo.db=ge.db,In._dbInfo.version=ge.version)}})}function Y(ue,Se){var ge=this;ue=p(ue);var De=new f(function(Be,Re){ge.ready().then(function(){j(ge._dbInfo,E,function(rt,bt){if(rt)return Re(rt);try{var Et=bt.objectStore(ge._dbInfo.storeName),xt=Et.get(ue);xt.onsuccess=function(){var Nt=xt.result;Nt===void 0&&(Nt=null),Z(Nt)&&(Nt=ne(Nt)),Be(Nt)},xt.onerror=function(){Re(xt.error)}}catch(Nt){Re(Nt)}})}).catch(Re)});return d(De,Se),De}function ee(ue,Se){var ge=this,De=new f(function(Be,Re){ge.ready().then(function(){j(ge._dbInfo,E,function(rt,bt){if(rt)return Re(rt);try{var Et=bt.objectStore(ge._dbInfo.storeName),xt=Et.openCursor(),Nt=1;xt.onsuccess=function(){var qt=xt.result;if(qt){var In=qt.value;Z(In)&&(In=ne(In));var un=ue(In,qt.key,Nt++);un!==void 0?Be(un):qt.continue()}else Be()},xt.onerror=function(){Re(xt.error)}}catch(qt){Re(qt)}})}).catch(Re)});return d(De,Se),De}function ae(ue,Se,ge){var De=this;ue=p(ue);var Be=new f(function(Re,rt){var bt;De.ready().then(function(){return bt=De._dbInfo,w.call(Se)==="[object Blob]"?R(bt.db).then(function(Et){return Et?Se:J(Se)}):Se}).then(function(Et){j(De._dbInfo,T,function(xt,Nt){if(xt)return rt(xt);try{var qt=Nt.objectStore(De._dbInfo.storeName);Et===null&&(Et=void 0);var In=qt.put(Et,ue);Nt.oncomplete=function(){Et===void 0&&(Et=null),Re(Et)},Nt.onabort=Nt.onerror=function(){var un=In.error?In.error:In.transaction.error;rt(un)}}catch(un){rt(un)}})}).catch(rt)});return d(Be,ge),Be}function _e(ue,Se){var ge=this;ue=p(ue);var De=new f(function(Be,Re){ge.ready().then(function(){j(ge._dbInfo,T,function(rt,bt){if(rt)return Re(rt);try{var Et=bt.objectStore(ge._dbInfo.storeName),xt=Et.delete(ue);bt.oncomplete=function(){Be()},bt.onerror=function(){Re(xt.error)},bt.onabort=function(){var Nt=xt.error?xt.error:xt.transaction.error;Re(Nt)}}catch(Nt){Re(Nt)}})}).catch(Re)});return d(De,Se),De}function pe(ue){var Se=this,ge=new f(function(De,Be){Se.ready().then(function(){j(Se._dbInfo,T,function(Re,rt){if(Re)return Be(Re);try{var bt=rt.objectStore(Se._dbInfo.storeName),Et=bt.clear();rt.oncomplete=function(){De()},rt.onabort=rt.onerror=function(){var xt=Et.error?Et.error:Et.transaction.error;Be(xt)}}catch(xt){Be(xt)}})}).catch(Be)});return d(ge,ue),ge}function Te(ue){var Se=this,ge=new f(function(De,Be){Se.ready().then(function(){j(Se._dbInfo,E,function(Re,rt){if(Re)return Be(Re);try{var bt=rt.objectStore(Se._dbInfo.storeName),Et=bt.count();Et.onsuccess=function(){De(Et.result)},Et.onerror=function(){Be(Et.error)}}catch(xt){Be(xt)}})}).catch(Be)});return d(ge,ue),ge}function Le(ue,Se){var ge=this,De=new f(function(Be,Re){if(ue<0){Be(null);return}ge.ready().then(function(){j(ge._dbInfo,E,function(rt,bt){if(rt)return Re(rt);try{var Et=bt.objectStore(ge._dbInfo.storeName),xt=!1,Nt=Et.openKeyCursor();Nt.onsuccess=function(){var qt=Nt.result;if(!qt){Be(null);return}ue===0||xt?Be(qt.key):(xt=!0,qt.advance(ue))},Nt.onerror=function(){Re(Nt.error)}}catch(qt){Re(qt)}})}).catch(Re)});return d(De,Se),De}function ye(ue){var Se=this,ge=new f(function(De,Be){Se.ready().then(function(){j(Se._dbInfo,E,function(Re,rt){if(Re)return Be(Re);try{var bt=rt.objectStore(Se._dbInfo.storeName),Et=bt.openKeyCursor(),xt=[];Et.onsuccess=function(){var Nt=Et.result;if(!Nt){De(xt);return}xt.push(Nt.key),Nt.continue()},Et.onerror=function(){Be(Et.error)}}catch(Nt){Be(Nt)}})}).catch(Be)});return d(ge,ue),ge}function he(ue,Se){Se=m.apply(this,arguments);var ge=this.config();ue=typeof ue!="function"&&ue||{},ue.name||(ue.name=ue.name||ge.name,ue.storeName=ue.storeName||ge.storeName);var De=this,Be;if(!ue.name)Be=f.reject("Invalid arguments");else{var Re=ue.name===ge.name&&De._dbInfo.db,rt=Re?f.resolve(De._dbInfo.db):F(ue).then(function(bt){var Et=b[ue.name],xt=Et.forages;Et.db=bt;for(var Nt=0;Nt<xt.length;Nt++)xt[Nt]._dbInfo.db=bt;return bt});ue.storeName?Be=rt.then(function(bt){if(bt.objectStoreNames.contains(ue.storeName)){var Et=bt.version+1;D(ue);var xt=b[ue.name],Nt=xt.forages;bt.close();for(var qt=0;qt<Nt.length;qt++){var In=Nt[qt];In._dbInfo.db=null,In._dbInfo.version=Et}var un=new f(function(nr,ln){var br=u.open(ue.name,Et);br.onerror=function(Ws){var Ga=br.result;Ga.close(),ln(Ws)},br.onupgradeneeded=function(){var Ws=br.result;Ws.deleteObjectStore(ue.storeName)},br.onsuccess=function(){var Ws=br.result;Ws.close(),nr(Ws)}});return un.then(function(nr){xt.db=nr;for(var ln=0;ln<Nt.length;ln++){var br=Nt[ln];br._dbInfo.db=nr,M(br._dbInfo)}}).catch(function(nr){throw($(ue,nr)||f.resolve()).catch(function(){}),nr})}}):Be=rt.then(function(bt){D(ue);var Et=b[ue.name],xt=Et.forages;bt.close();for(var Nt=0;Nt<xt.length;Nt++){var qt=xt[Nt];qt._dbInfo.db=null}var In=new f(function(un,nr){var ln=u.deleteDatabase(ue.name);ln.onerror=function(){var br=ln.result;br&&br.close(),nr(ln.error)},ln.onblocked=function(){console.warn('dropInstance blocked for database "'+ue.name+'" until all open connections are closed')},ln.onsuccess=function(){var br=ln.result;br&&br.close(),un(br)}});return In.then(function(un){Et.db=un;for(var nr=0;nr<xt.length;nr++){var ln=xt[nr];M(ln._dbInfo)}}).catch(function(un){throw($(ue,un)||f.resolve()).catch(function(){}),un})})}return d(Be,Se),Be}var $e={_driver:"asyncStorage",_initStorage:V,_support:l(),iterate:ee,getItem:Y,setItem:ae,removeItem:_e,clear:pe,length:Te,key:Le,keys:ye,dropInstance:he};function Ne(){return typeof openDatabase=="function"}var tt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",it="~~local_forage_type~",Me=/^~~local_forage_type~([^~]+)~/,Ge="__lfsc__:",at=Ge.length,yt="arbf",Tt="blob",Ot="si08",qe="ui08",ft="uic8",wt="si16",ke="si32",Oe="ur16",dt="ui32",Lt="fl32",Ft="fl64",dn=at+yt.length,Dn=Object.prototype.toString;function Tr(ue){var Se=ue.length*.75,ge=ue.length,De,Be=0,Re,rt,bt,Et;ue[ue.length-1]==="="&&(Se--,ue[ue.length-2]==="="&&Se--);var xt=new ArrayBuffer(Se),Nt=new Uint8Array(xt);for(De=0;De<ge;De+=4)Re=tt.indexOf(ue[De]),rt=tt.indexOf(ue[De+1]),bt=tt.indexOf(ue[De+2]),Et=tt.indexOf(ue[De+3]),Nt[Be++]=Re<<2|rt>>4,Nt[Be++]=(rt&15)<<4|bt>>2,Nt[Be++]=(bt&3)<<6|Et&63;return xt}function Ri(ue){var Se=new Uint8Array(ue),ge="",De;for(De=0;De<Se.length;De+=3)ge+=tt[Se[De]>>2],ge+=tt[(Se[De]&3)<<4|Se[De+1]>>4],ge+=tt[(Se[De+1]&15)<<2|Se[De+2]>>6],ge+=tt[Se[De+2]&63];return Se.length%3===2?ge=ge.substring(0,ge.length-1)+"=":Se.length%3===1&&(ge=ge.substring(0,ge.length-2)+"=="),ge}function Un(ue,Se){var ge="";if(ue&&(ge=Dn.call(ue)),ue&&(ge==="[object ArrayBuffer]"||ue.buffer&&Dn.call(ue.buffer)==="[object ArrayBuffer]")){var De,Be=Ge;ue instanceof ArrayBuffer?(De=ue,Be+=yt):(De=ue.buffer,ge==="[object Int8Array]"?Be+=Ot:ge==="[object Uint8Array]"?Be+=qe:ge==="[object Uint8ClampedArray]"?Be+=ft:ge==="[object Int16Array]"?Be+=wt:ge==="[object Uint16Array]"?Be+=Oe:ge==="[object Int32Array]"?Be+=ke:ge==="[object Uint32Array]"?Be+=dt:ge==="[object Float32Array]"?Be+=Lt:ge==="[object Float64Array]"?Be+=Ft:Se(new Error("Failed to get type for BinaryArray"))),Se(Be+Ri(De))}else if(ge==="[object Blob]"){var Re=new FileReader;Re.onload=function(){var rt=it+ue.type+"~"+Ri(this.result);Se(Ge+Tt+rt)},Re.readAsArrayBuffer(ue)}else try{Se(JSON.stringify(ue))}catch(rt){console.error("Couldn't convert value into a JSON string: ",ue),Se(null,rt)}}function tr(ue){if(ue.substring(0,at)!==Ge)return JSON.parse(ue);var Se=ue.substring(dn),ge=ue.substring(at,dn),De;if(ge===Tt&&Me.test(Se)){var Be=Se.match(Me);De=Be[1],Se=Se.substring(Be[0].length)}var Re=Tr(Se);switch(ge){case yt:return Re;case Tt:return c([Re],{type:De});case Ot:return new Int8Array(Re);case qe:return new Uint8Array(Re);case ft:return new Uint8ClampedArray(Re);case wt:return new Int16Array(Re);case Oe:return new Uint16Array(Re);case ke:return new Int32Array(Re);case dt:return new Uint32Array(Re);case Lt:return new Float32Array(Re);case Ft:return new Float64Array(Re);default:throw new Error("Unkown type: "+ge)}}var Si={serialize:Un,deserialize:tr,stringToBuffer:Tr,bufferToString:Ri};function Sr(ue,Se,ge,De){ue.executeSql("CREATE TABLE IF NOT EXISTS "+Se.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],ge,De)}function Po(ue){var Se=this,ge={db:null};if(ue)for(var De in ue)ge[De]=typeof ue[De]!="string"?ue[De].toString():ue[De];var Be=new f(function(Re,rt){try{ge.db=openDatabase(ge.name,String(ge.version),ge.description,ge.size)}catch(bt){return rt(bt)}ge.db.transaction(function(bt){Sr(bt,ge,function(){Se._dbInfo=ge,Re()},function(Et,xt){rt(xt)})},rt)});return ge.serializer=Si,Be}function Qi(ue,Se,ge,De,Be,Re){ue.executeSql(ge,De,Be,function(rt,bt){bt.code===bt.SYNTAX_ERR?rt.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[Se.storeName],function(Et,xt){xt.rows.length?Re(Et,bt):Sr(Et,Se,function(){Et.executeSql(ge,De,Be,Re)},Re)},Re):Re(rt,bt)},Re)}function Ni(ue,Se){var ge=this;ue=p(ue);var De=new f(function(Be,Re){ge.ready().then(function(){var rt=ge._dbInfo;rt.db.transaction(function(bt){Qi(bt,rt,"SELECT * FROM "+rt.storeName+" WHERE key = ? LIMIT 1",[ue],function(Et,xt){var Nt=xt.rows.length?xt.rows.item(0).value:null;Nt&&(Nt=rt.serializer.deserialize(Nt)),Be(Nt)},function(Et,xt){Re(xt)})})}).catch(Re)});return d(De,Se),De}function Ji(ue,Se){var ge=this,De=new f(function(Be,Re){ge.ready().then(function(){var rt=ge._dbInfo;rt.db.transaction(function(bt){Qi(bt,rt,"SELECT * FROM "+rt.storeName,[],function(Et,xt){for(var Nt=xt.rows,qt=Nt.length,In=0;In<qt;In++){var un=Nt.item(In),nr=un.value;if(nr&&(nr=rt.serializer.deserialize(nr)),nr=ue(nr,un.key,In+1),nr!==void 0){Be(nr);return}}Be()},function(Et,xt){Re(xt)})})}).catch(Re)});return d(De,Se),De}function Xr(ue,Se,ge,De){var Be=this;ue=p(ue);var Re=new f(function(rt,bt){Be.ready().then(function(){Se===void 0&&(Se=null);var Et=Se,xt=Be._dbInfo;xt.serializer.serialize(Se,function(Nt,qt){qt?bt(qt):xt.db.transaction(function(In){Qi(In,xt,"INSERT OR REPLACE INTO "+xt.storeName+" (key, value) VALUES (?, ?)",[ue,Nt],function(){rt(Et)},function(un,nr){bt(nr)})},function(In){if(In.code===In.QUOTA_ERR){if(De>0){rt(Xr.apply(Be,[ue,Et,ge,De-1]));return}bt(In)}})})}).catch(bt)});return d(Re,ge),Re}function Oo(ue,Se,ge){return Xr.apply(this,[ue,Se,ge,1])}function ic(ue,Se){var ge=this;ue=p(ue);var De=new f(function(Be,Re){ge.ready().then(function(){var rt=ge._dbInfo;rt.db.transaction(function(bt){Qi(bt,rt,"DELETE FROM "+rt.storeName+" WHERE key = ?",[ue],function(){Be()},function(Et,xt){Re(xt)})})}).catch(Re)});return d(De,Se),De}function ga(ue){var Se=this,ge=new f(function(De,Be){Se.ready().then(function(){var Re=Se._dbInfo;Re.db.transaction(function(rt){Qi(rt,Re,"DELETE FROM "+Re.storeName,[],function(){De()},function(bt,Et){Be(Et)})})}).catch(Be)});return d(ge,ue),ge}function Iu(ue){var Se=this,ge=new f(function(De,Be){Se.ready().then(function(){var Re=Se._dbInfo;Re.db.transaction(function(rt){Qi(rt,Re,"SELECT COUNT(key) as c FROM "+Re.storeName,[],function(bt,Et){var xt=Et.rows.item(0).c;De(xt)},function(bt,Et){Be(Et)})})}).catch(Be)});return d(ge,ue),ge}function Qr(ue,Se){var ge=this,De=new f(function(Be,Re){ge.ready().then(function(){var rt=ge._dbInfo;rt.db.transaction(function(bt){Qi(bt,rt,"SELECT key FROM "+rt.storeName+" WHERE id = ? LIMIT 1",[ue+1],function(Et,xt){var Nt=xt.rows.length?xt.rows.item(0).key:null;Be(Nt)},function(Et,xt){Re(xt)})})}).catch(Re)});return d(De,Se),De}function Bi(ue){var Se=this,ge=new f(function(De,Be){Se.ready().then(function(){var Re=Se._dbInfo;Re.db.transaction(function(rt){Qi(rt,Re,"SELECT key FROM "+Re.storeName,[],function(bt,Et){for(var xt=[],Nt=0;Nt<Et.rows.length;Nt++)xt.push(Et.rows.item(Nt).key);De(xt)},function(bt,Et){Be(Et)})})}).catch(Be)});return d(ge,ue),ge}function si(ue){return new f(function(Se,ge){ue.transaction(function(De){De.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(Be,Re){for(var rt=[],bt=0;bt<Re.rows.length;bt++)rt.push(Re.rows.item(bt).name);Se({db:ue,storeNames:rt})},function(Be,Re){ge(Re)})},function(De){ge(De)})})}function Hs(ue,Se){Se=m.apply(this,arguments);var ge=this.config();ue=typeof ue!="function"&&ue||{},ue.name||(ue.name=ue.name||ge.name,ue.storeName=ue.storeName||ge.storeName);var De=this,Be;return ue.name?Be=new f(function(Re){var rt;ue.name===ge.name?rt=De._dbInfo.db:rt=openDatabase(ue.name,"","",0),ue.storeName?Re({db:rt,storeNames:[ue.storeName]}):Re(si(rt))}).then(function(Re){return new f(function(rt,bt){Re.db.transaction(function(Et){function xt(un){return new f(function(nr,ln){Et.executeSql("DROP TABLE IF EXISTS "+un,[],function(){nr()},function(br,Ws){ln(Ws)})})}for(var Nt=[],qt=0,In=Re.storeNames.length;qt<In;qt++)Nt.push(xt(Re.storeNames[qt]));f.all(Nt).then(function(){rt()}).catch(function(un){bt(un)})},function(Et){bt(Et)})})}):Be=f.reject("Invalid arguments"),d(Be,Se),Be}var Fr={_driver:"webSQLStorage",_initStorage:Po,_support:Ne(),iterate:Ji,getItem:Ni,setItem:Oo,removeItem:ic,clear:ga,length:Iu,key:Qr,keys:Bi,dropInstance:Hs};function Zi(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Mo(ue,Se){var ge=ue.name+"/";return ue.storeName!==Se.storeName&&(ge+=ue.storeName+"/"),ge}function co(){var ue="_localforage_support_test";try{return localStorage.setItem(ue,!0),localStorage.removeItem(ue),!1}catch{return!0}}function Ko(){return!co()||localStorage.length>0}function vl(ue){var Se=this,ge={};if(ue)for(var De in ue)ge[De]=ue[De];return ge.keyPrefix=Mo(ue,Se._defaultConfig),Ko()?(Se._dbInfo=ge,ge.serializer=Si,f.resolve()):f.reject()}function kh(ue){var Se=this,ge=Se.ready().then(function(){for(var De=Se._dbInfo.keyPrefix,Be=localStorage.length-1;Be>=0;Be--){var Re=localStorage.key(Be);Re.indexOf(De)===0&&localStorage.removeItem(Re)}});return d(ge,ue),ge}function Pr(ue,Se){var ge=this;ue=p(ue);var De=ge.ready().then(function(){var Be=ge._dbInfo,Re=localStorage.getItem(Be.keyPrefix+ue);return Re&&(Re=Be.serializer.deserialize(Re)),Re});return d(De,Se),De}function sc(ue,Se){var ge=this,De=ge.ready().then(function(){for(var Be=ge._dbInfo,Re=Be.keyPrefix,rt=Re.length,bt=localStorage.length,Et=1,xt=0;xt<bt;xt++){var Nt=localStorage.key(xt);if(Nt.indexOf(Re)===0){var qt=localStorage.getItem(Nt);if(qt&&(qt=Be.serializer.deserialize(qt)),qt=ue(qt,Nt.substring(rt),Et++),qt!==void 0)return qt}}});return d(De,Se),De}function ps(ue,Se){var ge=this,De=ge.ready().then(function(){var Be=ge._dbInfo,Re;try{Re=localStorage.key(ue)}catch{Re=null}return Re&&(Re=Re.substring(Be.keyPrefix.length)),Re});return d(De,Se),De}function Wa(ue){var Se=this,ge=Se.ready().then(function(){for(var De=Se._dbInfo,Be=localStorage.length,Re=[],rt=0;rt<Be;rt++){var bt=localStorage.key(rt);bt.indexOf(De.keyPrefix)===0&&Re.push(bt.substring(De.keyPrefix.length))}return Re});return d(ge,ue),ge}function Xo(ue){var Se=this,ge=Se.keys().then(function(De){return De.length});return d(ge,ue),ge}function fm(ue,Se){var ge=this;ue=p(ue);var De=ge.ready().then(function(){var Be=ge._dbInfo;localStorage.removeItem(Be.keyPrefix+ue)});return d(De,Se),De}function Rh(ue,Se,ge){var De=this;ue=p(ue);var Be=De.ready().then(function(){Se===void 0&&(Se=null);var Re=Se;return new f(function(rt,bt){var Et=De._dbInfo;Et.serializer.serialize(Se,function(xt,Nt){if(Nt)bt(Nt);else try{localStorage.setItem(Et.keyPrefix+ue,xt),rt(Re)}catch(qt){(qt.name==="QuotaExceededError"||qt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&bt(qt),bt(qt)}})})});return d(Be,ge),Be}function yd(ue,Se){if(Se=m.apply(this,arguments),ue=typeof ue!="function"&&ue||{},!ue.name){var ge=this.config();ue.name=ue.name||ge.name,ue.storeName=ue.storeName||ge.storeName}var De=this,Be;return ue.name?Be=new f(function(Re){ue.storeName?Re(Mo(ue,De._defaultConfig)):Re(ue.name+"/")}).then(function(Re){for(var rt=localStorage.length-1;rt>=0;rt--){var bt=localStorage.key(rt);bt.indexOf(Re)===0&&localStorage.removeItem(bt)}}):Be=f.reject("Invalid arguments"),d(Be,Se),Be}var vd={_driver:"localStorageWrapper",_initStorage:vl,_support:Zi(),iterate:sc,getItem:Pr,setItem:Rh,removeItem:fm,clear:kh,length:Xo,key:ps,keys:Wa,dropInstance:yd},df=function(Se,ge){return Se===ge||typeof Se=="number"&&typeof ge=="number"&&isNaN(Se)&&isNaN(ge)},hf=function(Se,ge){for(var De=Se.length,Be=0;Be<De;){if(df(Se[Be],ge))return!0;Be++}return!1},pf=Array.isArray||function(ue){return Object.prototype.toString.call(ue)==="[object Array]"},fr={},Nh={},fo={INDEXEDDB:$e,WEBSQL:Fr,LOCALSTORAGE:vd},bl=[fo.INDEXEDDB._driver,fo.WEBSQL._driver,fo.LOCALSTORAGE._driver],qs=["dropInstance"],oc=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(qs),Dh={description:"",driver:bl.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ac(ue,Se){ue[Se]=function(){var ge=arguments;return ue.ready().then(function(){return ue[Se].apply(ue,ge)})}}function ho(){for(var ue=1;ue<arguments.length;ue++){var Se=arguments[ue];if(Se)for(var ge in Se)Se.hasOwnProperty(ge)&&(pf(Se[ge])?arguments[0][ge]=Se[ge].slice():arguments[0][ge]=Se[ge])}return arguments[0]}var dm=function(){function ue(Se){o(this,ue);for(var ge in fo)if(fo.hasOwnProperty(ge)){var De=fo[ge],Be=De._driver;this[ge]=Be,fr[Be]||this.defineDriver(De)}this._defaultConfig=ho({},Dh),this._config=ho({},this._defaultConfig,Se),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return ue.prototype.config=function(ge){if((typeof ge>"u"?"undefined":s(ge))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var De in ge){if(De==="storeName"&&(ge[De]=ge[De].replace(/\W/g,"_")),De==="version"&&typeof ge[De]!="number")return new Error("Database version must be a number.");this._config[De]=ge[De]}return"driver"in ge&&ge.driver?this.setDriver(this._config.driver):!0}else return typeof ge=="string"?this._config[ge]:this._config},ue.prototype.defineDriver=function(ge,De,Be){var Re=new f(function(rt,bt){try{var Et=ge._driver,xt=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!ge._driver){bt(xt);return}for(var Nt=oc.concat("_initStorage"),qt=0,In=Nt.length;qt<In;qt++){var un=Nt[qt],nr=!hf(qs,un);if((nr||ge[un])&&typeof ge[un]!="function"){bt(xt);return}}var ln=function(){for(var Ga=function(Lo){return function(){var ms=new Error("Method "+Lo+" is not implemented by the current driver"),$o=f.reject(ms);return d($o,arguments[arguments.length-1]),$o}},uc=0,Ph=qs.length;uc<Ph;uc++){var mf=qs[uc];ge[mf]||(ge[mf]=Ga(mf))}};ln();var br=function(Ga){fr[Et]&&console.info("Redefining LocalForage driver: "+Et),fr[Et]=ge,Nh[Et]=Ga,rt()};"_support"in ge?ge._support&&typeof ge._support=="function"?ge._support().then(br,bt):br(!!ge._support):br(!0)}catch(Ws){bt(Ws)}});return h(Re,De,Be),Re},ue.prototype.driver=function(){return this._driver||null},ue.prototype.getDriver=function(ge,De,Be){var Re=fr[ge]?f.resolve(fr[ge]):f.reject(new Error("Driver not found."));return h(Re,De,Be),Re},ue.prototype.getSerializer=function(ge){var De=f.resolve(Si);return h(De,ge),De},ue.prototype.ready=function(ge){var De=this,Be=De._driverSet.then(function(){return De._ready===null&&(De._ready=De._initDriver()),De._ready});return h(Be,ge,ge),Be},ue.prototype.setDriver=function(ge,De,Be){var Re=this;pf(ge)||(ge=[ge]);var rt=this._getSupportedDrivers(ge);function bt(){Re._config.driver=Re.driver()}function Et(qt){return Re._extend(qt),bt(),Re._ready=Re._initStorage(Re._config),Re._ready}function xt(qt){return function(){var In=0;function un(){for(;In<qt.length;){var nr=qt[In];return In++,Re._dbInfo=null,Re._ready=null,Re.getDriver(nr).then(Et).catch(un)}bt();var ln=new Error("No available storage method found.");return Re._driverSet=f.reject(ln),Re._driverSet}return un()}}var Nt=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=Nt.then(function(){var qt=rt[0];return Re._dbInfo=null,Re._ready=null,Re.getDriver(qt).then(function(In){Re._driver=In._driver,bt(),Re._wrapLibraryMethodsWithReady(),Re._initDriver=xt(rt)})}).catch(function(){bt();var qt=new Error("No available storage method found.");return Re._driverSet=f.reject(qt),Re._driverSet}),h(this._driverSet,De,Be),this._driverSet},ue.prototype.supports=function(ge){return!!Nh[ge]},ue.prototype._extend=function(ge){ho(this,ge)},ue.prototype._getSupportedDrivers=function(ge){for(var De=[],Be=0,Re=ge.length;Be<Re;Be++){var rt=ge[Be];this.supports(rt)&&De.push(rt)}return De},ue.prototype._wrapLibraryMethodsWithReady=function(){for(var ge=0,De=oc.length;ge<De;ge++)ac(this,oc[ge])},ue.prototype.createInstance=function(ge){return new ue(ge)},ue}(),po=new dm;r.exports=po},{3:3}]},{},[4])(4)})}(Xz)),Xz.exports}var b0t=v0t();const x0t=hh(b0t),iu=[];for(let e=0;e<256;++e)iu.push((e+256).toString(16).slice(1));function _0t(e,t=0){return(iu[e[t+0]]+iu[e[t+1]]+iu[e[t+2]]+iu[e[t+3]]+"-"+iu[e[t+4]]+iu[e[t+5]]+"-"+iu[e[t+6]]+iu[e[t+7]]+"-"+iu[e[t+8]]+iu[e[t+9]]+"-"+iu[e[t+10]]+iu[e[t+11]]+iu[e[t+12]]+iu[e[t+13]]+iu[e[t+14]]+iu[e[t+15]]).toLowerCase()}let Qz;const w0t=new Uint8Array(16);function E0t(){if(!Qz){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Qz=crypto.getRandomValues.bind(crypto)}return Qz(w0t)}const T0t=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ode={randomUUID:T0t};function Mde(e,t,n){var i;if(Ode.randomUUID&&!e)return Ode.randomUUID();e=e||{};const r=e.random??((i=e.rng)==null?void 0:i.call(e))??E0t();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,_0t(r)}class S0t{constructor(t){Of(this,"engine");Of(this,"connected",!1);Of(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function Lde(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function Kk(e){return e.participantId!==void 0}class fp extends S0t{constructor(){super("firebase");Of(this,"RECAPTCHAV3TOKEN","6LeLH9MqAAAAANZiz-dFmDWFHYFW_7R3mD1vZMMG");Of(this,"firestore");Of(this,"collectionPrefix","prod-");Of(this,"studyCollection");Of(this,"storage");Of(this,"studyId","");Of(this,"localForage",x0t.createInstance({name:"currentParticipantId"}));Of(this,"participantData",null);Of(this,"userManagementData",{});const n=Cat.parse(`
{
  apiKey: "AIzaSyDnDMdTOuZjEP9rADW66GFFZttHD3jAwlo",
  authDomain: "wpi-datavis-2025.firebaseapp.com",
  projectId: "wpi-datavis-2025",
  storageBucket: "wpi-datavis-2025.firebasestorage.app",
  messagingSenderId: "671149596953",
  appId: "1:671149596953:web:d6a0dcca66648e4cd02588"
}
`),r=jSe(n);this.firestore=bht(r,{}),this.storage=yfe();try{mpt(r,{provider:new ZZ(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await _ht(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=lF();if(!i.currentUser&&(await emt(i),!i.currentUser))throw new Error("Login failed with firebase");this.studyCollection=kc(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n;const s=await this.getCurrentConfigHash(),o=await Lde(JSON.stringify(r));if(await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this._setCurrentConfigHash(o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s,o){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),u=await this.getModes(n);if(Kk(a))return this.participantData=a,a;const l=await Lde(JSON.stringify(i)),{currentRow:c,creationIndex:f}=await this.getSequence();return this.participantData={participantId:this.currentParticipantId,participantConfigHash:l,sequence:c,participantIndex:f,answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1,participantTags:[]},u.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=vs(this.studyCollection,"configHash"),r=await W4(n);return r.exists()?r.data().configHash:null}async _setCurrentConfigHash(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=vs(this.studyCollection,"configHash");await ju(r,{configHash:n})}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const u=Mf(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(u,"config")}),s=await Promise.all(i),o={};return n.forEach((a,u)=>o[a]=s[u]),o}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=Mde(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAudio(n,r){let i=null;const s=async o=>{i||(i=setTimeout(async()=>{this._pushToFirebaseStorage(`/audio/${this.currentParticipantId}`,r,o.data)},500))};n.addEventListener("dataavailable",s),n.requestData()}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=await this.getModes(this.studyId),i=vs(this.studyCollection,"sequenceAssignment");await ju(i,{});const s=kc(i,"sequenceAssignment"),o=vs(s,this.currentParticipantId),a=qz(s,ide("rejected","==",!0),ide("claimed","==",!1)),u=await kS(a);if(u.docs.length>0){const v=u.docs[0],b=v.data().timestamp;r.dataCollectionEnabled&&(await ju(v.ref,{claimed:!0}),await ju(o,{participantId:this.currentParticipantId,timestamp:b,rejected:!1,claimed:!1,completed:null,createdTime:G4()}))}else r.dataCollectionEnabled&&await ju(o,{participantId:this.currentParticipantId,timestamp:G4(),rejected:!1,claimed:!1,completed:null,createdTime:G4()});const l=qz(s,sde("timestamp","asc")),f=(await kS(l)).docs.map(v=>v.data()),d=f.filter(v=>!v.rejected).findIndex(v=>v.participantId===this.currentParticipantId)%n.length,h=d===-1?Math.floor(Math.random()*n.length-1):d,p=n[h];if(!p)throw new Error("Latin square is empty");const y=f.sort((v,b)=>v.createdTime-b.createdTime).findIndex(v=>v.participantId===this.currentParticipantId)+1;return{currentRow:p,creationIndex:y}}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=Mf(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await Yk(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");Kk(a)&&i.push(a)});return await Promise.all(s),i}async getAudio(n,r){const i=yfe(),s=await j4(Mf(i,`${this.collectionPrefix}${this.studyId}/audio/${r}_${n}`));return new Promise(a=>{const u=new XMLHttpRequest;u.responseType="blob",u.onload=()=>{const l=u.response,c=URL.createObjectURL(l);a(c)},u.open("GET",s),u.send()})}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null&&!n)throw new Error("Participant not initialized");const r=await this._getFromFirebaseStorage(`participants/${n||this.currentParticipantId}`,"participantData");return Kk(r)?r:null}async getParticipantTags(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.participantTags}async addParticipantTags(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=[...new Set([...r.participantTags,...n])],await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",r)}async removeParticipantTags(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=r.participantTags.filter(i=>!n.includes(i)),await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",r)}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=Mde();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);if(this.participantData.completed)return!0;this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData);const r=vs(this.studyCollection,"sequenceAssignment"),i=kc(r,"sequenceAssignment"),s=vs(i,this.currentParticipantId);return await ude(s,{completed:G4()}),!0}async getUserManagementData(n){if(Object.keys(this.userManagementData).length===0){const r=kc(this.firestore,"user-management"),i=await kS(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));this.userManagementData=s}return n in this.userManagementData?this.userManagementData[n]:null}async validateUser(n,r=!1){if(r&&(this.userManagementData={}),n!=null&&n.user){const i=await this.getUserManagementData("authentication");if(i!=null&&i.isEnabled){const s=await this.getUserManagementData("adminUsers");if(s&&s.adminUsersList){const o=Object.fromEntries(s.adminUsersList.map(u=>[u.email,u.uid]));if(n.user.email&&(o[n.user.email]===n.user.uid||o[n.user.email]===null)){if(n.user.email&&o[n.user.email]===null){const u=s.adminUsersList.find(l=>l.email===n.user.email);u&&(u.uid=n.user.uid),await ju(vs(this.firestore,"user-management","adminUsers"),{adminUsersList:s.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await ju(vs(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await ju(vs(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await ju(vs(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await ju(vs(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=Mf(this.storage,`${this.collectionPrefix}${n}/participants`),i=await Yk(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");Kk(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r,i){const s=kc(this.firestore,`${this.collectionPrefix}${n}`),o=Mf(this.storage,`${this.collectionPrefix}${n}/participants/${r}_participantData`),a=await this._getFromFirebaseStorageByRef(o,"participantData");try{if(!a||!Kk(a)||a.rejected)return;a.rejected={reason:i,timestamp:new Date().getTime()},await this._pushToFirebaseStorageByRef(o,"participantData",a);const u=vs(s,"sequenceAssignment"),l=kc(u,"sequenceAssignment"),c=vs(l,r);await ude(c,{rejected:!0})}catch{console.warn("Failed to reject the participant.")}}async rejectCurrentParticipant(n,r){if(!this.currentParticipantId)throw new Error("Participant not initialized");return await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){const s=vs(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await ju(s,{[r]:i},{merge:!0})}async getModes(n){const r=vs(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await W4(r);if(i.exists())return i.data();const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await ju(r,s),s}async getParticipantsStatusCounts(n){const r=kc(this.firestore,`${this.collectionPrefix}${n}`),i=vs(r,"sequenceAssignment"),s=kc(i,"sequenceAssignment"),o=qz(s,sde("timestamp","asc")),u=(await kS(o)).docs.map(p=>p.data()),l=u.filter(p=>p.completed&&!p.rejected).length,c=u.filter(p=>p.rejected).length,f=u.length-l-c,d=u.length>0?u[0].timestamp:null,h=u.length>0?u.at(-1).timestamp:null;return{completed:l,rejected:c,inProgress:f,minTime:d,maxTime:h}}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),{status:"FAILED",error:{message:"There is currently no data in your study. A snapshot could not be created.",title:"Failed to Create Snapshot."}};const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),f=s.getUTCSeconds().toString().padStart(2,"0"),d=`${o}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h);const p=[];if(r){const m=await this.removeSnapshotOrLive(i,!1);m.status==="FAILED"?p.push({title:m.error.title,message:m.error.message,color:"red"}):p.push({title:"Success!",message:"Successfully deleted live data.",color:"green"})}return p.push({message:"Successfully created snapshot",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:p}}async removeSnapshotOrLive(n,r){try{const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;return await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i),{status:"SUCCESS",notifications:[{message:"Successfully deleted snapshot or live data.",title:"Success!",color:"green"}]}}catch{return{status:"FAILED",error:{title:"Failed to delete live data or snapshot",message:"There was an unspecified error when trying to remove a snapshot or live data."}}}}async getSnapshots(n){try{const r=vs(this.firestore,"metadata","collections"),i=await W4(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(u=>u.startsWith(`${this.collectionPrefix}${n}-snapshot`)).map(u=>{const l=s[u];let c;return typeof l=="boolean"?c=u:l&&typeof l=="object"&&l.enabled===!0?c=l.name:c=null,{originalName:u,alternateName:c}}).filter(u=>u.alternateName!==null).sort((u,l)=>u.originalName.localeCompare(l.originalName)).reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`,s=[];try{const o=await this.createSnapshot(n,!0);return o.status==="FAILED"?(console.warn("No live data to capture."),s.push({title:o.error.title,message:o.error.message,color:"yellow"})):s.push({title:"Success!",message:"Successfully created snapshot of live data.",color:"green"}),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i),s.push({message:"Successfully restored snapshot to live data.",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:s}}catch(o){return console.error("Error trying to delete a snapshot",o),{status:"FAILED",error:{title:"Failed to restore a snapshot fully.",message:"There was an unspecified error when trying to restore this snapshot."}}}}async _addDirectoryNameToMetadata(n){try{const r=vs(this.firestore,"metadata","collections");await ju(r,{[n]:{enabled:!0,name:n}},{merge:!0})}catch(r){throw console.error("Error adding collection to metadata:",r),r}}async renameSnapshot(n,r){try{const i=vs(this.firestore,"metadata","collections");return await ju(i,{[n]:{enabled:!0,name:r}},{merge:!0}),{status:"SUCCESS",notifications:[{message:"Successfully renamed snapshot.",title:"Success!",color:"green"}]}}catch(i){return console.error("Error renaming collection in metadata",i),{status:"FAILED",error:{title:"Failed to Rename Snapshot.",message:"There was an error when trying to rename the snapshot."}}}}async _removeNameFromMetadata(n){try{const r=vs(this.firestore,"metadata","collections"),i=await W4(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await ju(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=Mf(this.storage,n),s=(await Yk(r)).items.map(o=>gfe(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=Mf(this.storage,n),o=(await Yk(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=Mf(this.storage,n),s=Mf(this.storage,r),o=await j4(i),u=await(await fetch(o)).blob();await B4(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=kc(this.firestore,n),s=vs(i,"sequenceAssignment"),o=kc(s,"sequenceAssignment"),a=kc(this.firestore,r),u=vs(a,"sequenceAssignment");await ju(u,{});const l=kc(u,"sequenceAssignment"),c=await kS(o),f=lde(this.firestore);c.docs.forEach(d=>{const h=vs(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=kc(this.firestore,n),i=vs(r,"sequenceAssignment"),s=kc(i,"sequenceAssignment"),o=await kS(s),a=lde(this.firestore);o.forEach(u=>{const l=vs(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=Mf(this.storage,n);return(await Yk(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=Mf(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await j4(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await j4(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){const s=Mf(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);if(i instanceof Blob)await B4(s,i);else if(Object.keys(i).length>0){const o=new Blob([JSON.stringify(i)],{type:"application/json"});await B4(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await B4(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=Mf(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await gfe(i)}}const _Ae=O.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),HA=()=>O.useContext(_Ae);function C0t({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=O.useState(t),[o,a]=O.useState(!1),{storageEngine:u}=uo(),l=async()=>{const h=lF();try{await amt(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h,!0):!1;O.useEffect(()=>{s(t);let h;if(u instanceof fp)try{h=lF()}catch{console.warn("No firebase store.")}const p=async v=>{if(s(b=>({user:b.user,isAdmin:b.isAdmin,determiningStatus:!0,adminVerification:!1})),v){const b={user:v,determiningStatus:!1,isAdmin:!1,adminVerification:!0},w=await f(b);b.isAdmin=!!w,s(b)}else l()},y=(async()=>{if(u instanceof fp){const v=await(u==null?void 0:u.getUserManagementData("authentication"));if(v!=null&&v.isEnabled){const b=omt(h,async w=>await p(w));return()=>b()}s(r)}else u&&s(r);return()=>{}})();return()=>{y.then(v=>v())}},[u,o]);const d=O.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return S.jsx(_Ae.Provider,{value:d,children:i.determiningStatus?S.jsx(sd,{visible:!0}):e})}const A0t="https://github.com/revisit-studies/study/tree/main/public/";function I0t({configName:e,config:t,url:n}){const{storageEngine:r}=uo(),[i,s]=O.useState(null);O.useEffect(()=>{r&&r.getParticipantsStatusCounts(e).then(f=>{s(f)})},[e,r]);const{minTime:o,maxTime:a}=O.useMemo(()=>{if(!i)return{minTime:null,maxTime:null};if(!i.minTime||!i.maxTime)return{minTime:null,maxTime:null};const f=typeof i.minTime=="number"?new Date(i.minTime):i.minTime.toDate(),d=typeof i.maxTime=="number"?new Date(i.maxTime):i.maxTime.toDate();return{minTime:f.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"}),maxTime:d.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"})}},[i]),[u,l]=O.useState(null);O.useEffect(()=>{r&&r.getModes(e).then(f=>{l(f)})},[e,r]);const c=O.useMemo(()=>u?u.dataCollectionEnabled?i&&(i.inProgress>0||i.completed>0)?"Collecting Data":"Ready to Collect Data":"Data Collection Disabled":"Unknown",[u,i]);return S.jsx(wA,{shadow:"sm",radius:"md",my:"sm",withBorder:!0,children:t.errors.length>0?S.jsxs(S.Fragment,{children:[S.jsx(gt,{fw:"bold",children:e}),S.jsxs(an,{align:"center",direction:"row",children:[S.jsx(SN,{color:"red"}),S.jsx(gt,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),S.jsx(KM,{issues:t.errors,type:"error"}),t.warnings.length>0&&S.jsxs(S.Fragment,{children:[S.jsxs(an,{align:"center",direction:"row",children:[S.jsx(SN,{color:"orange"}),S.jsx(gt,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),S.jsx(KM,{issues:t.warnings,type:"warning"})]})]}):S.jsxs(S.Fragment,{children:[S.jsx(an,{direction:"row",justify:"space-between",children:S.jsx(gt,{fw:"bold",children:t.studyMetadata.title})}),S.jsxs(gt,{c:"dimmed",children:[S.jsx(gt,{span:!0,fw:500,children:"Authors: "}),t.studyMetadata.authors.join(", ")]}),S.jsx(gt,{c:"dimmed",children:t.studyMetadata.description}),S.jsx(gt,{c:"dimmed",ta:"right",style:{paddingRight:5},children:S.jsxs(AE,{target:"_blank",onClick:f=>f.stopPropagation(),href:`${A0t}${n}`,children:["View source:"," ",n,S.jsx(tTe,{style:{width:Ke(18),height:Ke(18),marginLeft:Ke(2),marginBottom:Ke(-3)}})]})}),t.warnings.length>0&&S.jsxs(S.Fragment,{children:[S.jsxs(an,{align:"center",direction:"row",children:[S.jsx(SN,{color:"orange"}),S.jsx(gt,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),S.jsx(KM,{issues:t.warnings,type:"warning"})]}),S.jsx(IE,{my:"md"}),S.jsxs(an,{direction:"row",gap:"sm",children:[S.jsxs(gt,{fw:"bold",size:"sm",opacity:.7,children:["Study Status:"," ",c]}),i&&S.jsx(vat,{completed:i.completed,inProgress:i.inProgress,rejected:i.rejected})]}),o&&a&&S.jsxs(gt,{c:"dimmed",mt:4,children:["Activity:"," ",o," ",""," ",a]}),S.jsxs(an,{direction:"row",align:"end",gap:"sm",mt:"md",children:[S.jsx(yn,{leftSection:S.jsx(eTe,{}),style:{marginLeft:"auto"},variant:"default",component:"a",href:`${Ua}analysis/stats/${n}`,children:"Analyze & Manage Study"}),S.jsx(yn,{leftSection:S.jsx(nTe,{}),component:"a",href:`${Ua}${n}`,children:"Go to Study"})]})]})},e)}function RS({configNames:e,studyConfigs:t}){return e.map(n=>{const r=t[n];if(!r)return null;const i=aTe(n);return S.jsx(I0t,{configName:n,config:r,url:i},n)})}function k0t({globalConfig:e,studyConfigs:t}){const{storageEngine:n}=uo(),{configsList:r}=e,i=r.filter(v=>v.startsWith("demo-")),s=r.filter(v=>v.startsWith("tutorial")),o=r.filter(v=>v.startsWith("example-")),a=r.filter(v=>v.startsWith("test-")),u=r.filter(v=>v.startsWith("library-")),l=O.useMemo(()=>r.filter(v=>!v.startsWith("demo-")&&!v.startsWith("tutorial")&&!v.startsWith("example-")&&!v.startsWith("test-")&&!v.startsWith("library-")),[r]),[c,f]=O.useState({});O.useEffect(()=>{async function v(){const b={};await Promise.all(l.map(async w=>{if(n instanceof fp){const E=await n.getModes(w);b[w]=E.analyticsInterfacePubliclyAccessible}})),f(b)}v()},[l,n]);const{user:d}=HA(),h=O.useMemo(()=>l.filter(v=>c[v]||d.isAdmin),[l,c,d]),[p]=E1(),m=O.useMemo(()=>p.get("tab")||(h.length>0?"Others":"Demos"),[h.length,p]),y=Xp();return S.jsx(zi.Main,{children:S.jsxs(Yy,{size:"sm",px:0,children:[S.jsx(mx,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${Ua}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),S.jsxs(Vr,{variant:"outline",defaultValue:l.length>0?"Others":"Demos",value:m,onChange:v=>y(`/?tab=${v}`),children:[S.jsxs(Vr.List,{children:[h.length>0&&S.jsx(Vr.Tab,{value:"Others",children:"Your Studies"}),S.jsx(Vr.Tab,{value:"Demos",children:"Demo Studies"}),S.jsx(Vr.Tab,{value:"Examples",children:"Example Studies"}),S.jsx(Vr.Tab,{value:"Tutorials",children:"Tutorials"}),S.jsx(Vr.Tab,{value:"Tests",children:"Tests"}),S.jsx(Vr.Tab,{value:"Libraries",children:"Libraries"})]}),h.length>0&&S.jsx(Vr.Panel,{value:"Others",children:S.jsx(RS,{configNames:h,studyConfigs:t})}),S.jsxs(Vr.Panel,{value:"Demos",children:[S.jsx(gt,{c:"dimmed",mt:"sm",children:"These studies show off individual features of the reVISit platform."}),S.jsx(RS,{configNames:i,studyConfigs:t})]}),S.jsxs(Vr.Panel,{value:"Examples",children:[S.jsx(gt,{c:"dimmed",mt:"sm",children:"These are full studies that demonstrate the capabilities of the reVISit platform."}),S.jsx(RS,{configNames:o,studyConfigs:t})]}),S.jsxs(Vr.Panel,{value:"Tutorials",children:[S.jsx(gt,{c:"dimmed",mt:"sm",children:"These studies are designed to help you learn how to use the reVISit platform."}),S.jsx(RS,{configNames:s,studyConfigs:t})]}),S.jsxs(Vr.Panel,{value:"Tests",children:[S.jsx(gt,{c:"dimmed",mt:"sm",children:"These studies exist for testing purposes."}),S.jsx(RS,{configNames:a,studyConfigs:t})]}),S.jsxs(Vr.Panel,{value:"Libraries",children:[S.jsx(gt,{c:"dimmed",mt:"sm",children:"Here you can see an example of every library that we publish."}),S.jsx(RS,{configNames:u,studyConfigs:t})]})]})]})})}var Jz={exports:{}},Zz={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $de;function R0t(){if($de)return Zz;$de=1;var e=$8();function t(u,l){return u===l&&(u!==0||1/u===1/l)||u!==u&&l!==l}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,s=e.useEffect,o=e.useMemo,a=e.useDebugValue;return Zz.useSyncExternalStoreWithSelector=function(u,l,c,f,d){var h=i(null);if(h.current===null){var p={hasValue:!1,value:null};h.current=p}else p=h.current;h=o(function(){function y(T){if(!v){if(v=!0,b=T,T=f(T),d!==void 0&&p.hasValue){var A=p.value;if(d(A,T))return w=A}return w=T}if(A=w,n(b,T))return A;var I=f(T);return d!==void 0&&d(A,I)?(b=T,A):(b=T,w=I)}var v=!1,b,w,E=c===void 0?null:c;return[function(){return y(l())},E===null?void 0:function(){return y(E())}]},[l,c,f,d]);var m=r(u,h[0],h[1]);return s(function(){p.hasValue=!0,p.value=m},[m]),a(m),m},Zz}var Fde;function N0t(){return Fde||(Fde=1,Jz.exports=R0t()),Jz.exports}var D0t=N0t();function P0t(e){e()}function O0t(){let e=null,t=null;return{clear(){e=null,t=null},notify(){P0t(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var Bde={notify(){},get:()=>[]};function M0t(e,t){let n,r=Bde,i=0,s=!1;function o(m){c();const y=r.subscribe(m);let v=!1;return()=>{v||(v=!0,y(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=O0t())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Bde)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}var L0t=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$0t=L0t(),F0t=()=>typeof navigator<"u"&&navigator.product==="ReactNative",B0t=F0t(),j0t=()=>$0t||B0t?O.useLayoutEffect:O.useEffect,U0t=j0t(),eV=Symbol.for("react-redux-context"),tV=typeof globalThis<"u"?globalThis:{};function z0t(){if(!O.createContext)return{};const e=tV[eV]??(tV[eV]=new Map);let t=e.get(O.createContext);return t||(t=O.createContext(null),e.set(O.createContext,t)),t}var Rb=z0t();function V0t(e){const{children:t,context:n,serverState:r,store:i}=e,s=O.useMemo(()=>{const u=M0t(i);return{store:i,subscription:u,getServerState:r?()=>r:void 0}},[i,r]),o=O.useMemo(()=>i.getState(),[i]);U0t(()=>{const{subscription:u}=s;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),o!==i.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[s,o]);const a=n||Rb;return O.createElement(a.Provider,{value:s},t)}var H0t=V0t;function lee(e=Rb){return function(){return O.useContext(e)}}var wAe=lee();function EAe(e=Rb){const t=e===Rb?wAe:lee(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var q0t=EAe();function W0t(e=Rb){const t=e===Rb?q0t:EAe(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var TAe=W0t(),G0t=(e,t)=>e===t;function Y0t(e=Rb){const t=e===Rb?wAe:lee(e),n=(r,i={})=>{const{equalityFn:s=G0t}=typeof i=="function"?{equalityFn:i}:i,o=t(),{store:a,subscription:u,getServerState:l}=o;O.useRef(!0);const c=O.useCallback({[r.name](d){return r(d)}}[r.name],[r]),f=D0t.useSyncExternalStoreWithSelector(u.addNestedSub,a.getState,l||a.getState,c,s);return O.useDebugValue(f),f};return Object.assign(n,{withTypes:()=>n}),n}var K0t=Y0t();function ou(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var X0t=typeof Symbol=="function"&&Symbol.observable||"@@observable",jde=X0t,nV=()=>Math.random().toString(36).substring(7).split("").join("."),Q0t={INIT:`@@redux/INIT${nV()}`,REPLACE:`@@redux/REPLACE${nV()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${nV()}`},cF=Q0t;function cee(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function SAe(e,t,n){if(typeof e!="function")throw new Error(ou(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ou(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ou(1));return n(SAe)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((y,v)=>{o.set(v,y)}))}function c(){if(u)throw new Error(ou(3));return i}function f(y){if(typeof y!="function")throw new Error(ou(4));if(u)throw new Error(ou(5));let v=!0;l();const b=a++;return o.set(b,y),function(){if(v){if(u)throw new Error(ou(6));v=!1,l(),o.delete(b),s=null}}}function d(y){if(!cee(y))throw new Error(ou(7));if(typeof y.type>"u")throw new Error(ou(8));if(typeof y.type!="string")throw new Error(ou(17));if(u)throw new Error(ou(9));try{u=!0,i=r(i,y)}finally{u=!1}return(s=o).forEach(b=>{b()}),y}function h(y){if(typeof y!="function")throw new Error(ou(10));r=y,d({type:cF.REPLACE})}function p(){const y=f;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(ou(11));function b(){const E=v;E.next&&E.next(c())}return b(),{unsubscribe:y(b)}},[jde](){return this}}}return d({type:cF.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[jde]:p}}function J0t(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:cF.INIT})>"u")throw new Error(ou(12));if(typeof n(void 0,{type:cF.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ou(13))})}function Z0t(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{J0t(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=o[f],p=d(h,a);if(typeof p>"u")throw a&&a.type,new Error(ou(14));l[f]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function fF(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function egt(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(ou(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=fF(...a)(i.dispatch),{...i,dispatch:s}}}function tgt(e){return cee(e)&&"type"in e&&typeof e.type=="string"}var CAe=Symbol.for("immer-nothing"),Ude=Symbol.for("immer-draftable"),od=Symbol.for("immer-state");function hp(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var gC=Object.getPrototypeOf;function Ww(e){return!!e&&!!e[od]}function t1(e){var t;return e?AAe(e)||Array.isArray(e)||!!e[Ude]||!!((t=e.constructor)!=null&&t[Ude])||n9(e)||r9(e):!1}var ngt=Object.prototype.constructor.toString();function AAe(e){if(!e||typeof e!="object")return!1;const t=gC(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===ngt}function dF(e,t){t9(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function t9(e){const t=e[od];return t?t.type_:Array.isArray(e)?1:n9(e)?2:r9(e)?3:0}function JW(e,t){return t9(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function IAe(e,t,n){const r=t9(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function rgt(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function n9(e){return e instanceof Map}function r9(e){return e instanceof Set}function H_(e){return e.copy_||e.base_}function ZW(e,t){if(n9(e))return new Map(e);if(r9(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=AAe(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[od];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(gC(e),r)}else{const r=gC(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function fee(e,t=!1){return i9(e)||Ww(e)||!t1(e)||(t9(e)>1&&(e.set=e.add=e.clear=e.delete=igt),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>fee(r,!0))),e}function igt(){hp(2)}function i9(e){return Object.isFrozen(e)}var sgt={};function Gw(e){const t=sgt[e];return t||hp(0,e),t}var ND;function kAe(){return ND}function ogt(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function zde(e,t){t&&(Gw("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function eG(e){tG(e),e.drafts_.forEach(agt),e.drafts_=null}function tG(e){e===ND&&(ND=e.parent_)}function Vde(e){return ND=ogt(ND,e)}function agt(e){const t=e[od];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Hde(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[od].modified_&&(eG(t),hp(4)),t1(e)&&(e=hF(t,e),t.parent_||pF(t,e)),t.patches_&&Gw("Patches").generateReplacementPatches_(n[od].base_,e,t.patches_,t.inversePatches_)):e=hF(t,n,[]),eG(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==CAe?e:void 0}function hF(e,t,n){if(i9(t))return t;const r=t[od];if(!r)return dF(t,(i,s)=>qde(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return pF(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),dF(s,(a,u)=>qde(e,r,i,a,u,n,o)),pF(e,i,!1),n&&e.patches_&&Gw("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function qde(e,t,n,r,i,s,o){if(Ww(i)){const a=s&&t&&t.type_!==3&&!JW(t.assigned_,r)?s.concat(r):void 0,u=hF(e,i,a);if(IAe(n,r,u),Ww(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(t1(i)&&!i9(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;hF(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&pF(e,i)}}function pF(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&fee(t,n)}function ugt(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:kAe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=dee;n&&(i=[r],s=DD);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var dee={get(e,t){if(t===od)return e;const n=H_(e);if(!JW(n,t))return lgt(e,n,t);const r=n[t];return e.finalized_||!t1(r)?r:r===rV(e.base_,t)?(iV(e),e.copy_[t]=rG(r,e)):r},has(e,t){return t in H_(e)},ownKeys(e){return Reflect.ownKeys(H_(e))},set(e,t,n){const r=RAe(H_(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=rV(H_(e),t),s=i==null?void 0:i[od];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(rgt(n,i)&&(n!==void 0||JW(e.base_,t)))return!0;iV(e),nG(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return rV(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,iV(e),nG(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=H_(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){hp(11)},getPrototypeOf(e){return gC(e.base_)},setPrototypeOf(){hp(12)}},DD={};dF(dee,(e,t)=>{DD[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});DD.deleteProperty=function(e,t){return DD.set.call(this,e,t,void 0)};DD.set=function(e,t,n){return dee.set.call(this,e[0],t,n,e[0])};function rV(e,t){const n=e[od];return(n?H_(n):e)[t]}function lgt(e,t,n){var i;const r=RAe(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function RAe(e,t){if(!(t in e))return;let n=gC(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=gC(n)}}function nG(e){e.modified_||(e.modified_=!0,e.parent_&&nG(e.parent_))}function iV(e){e.copy_||(e.copy_=ZW(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var cgt=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&hp(6),r!==void 0&&typeof r!="function"&&hp(7);let i;if(t1(t)){const s=Vde(this),o=rG(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?eG(s):tG(s)}return zde(s,r),Hde(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===CAe&&(i=void 0),this.autoFreeze_&&fee(i,!0),r){const s=[],o=[];Gw("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else hp(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){t1(e)||hp(8),Ww(e)&&(e=fgt(e));const t=Vde(this),n=rG(e,void 0);return n[od].isManual_=!0,tG(t),n}finishDraft(e,t){const n=e&&e[od];(!n||!n.isManual_)&&hp(9);const{scope_:r}=n;return zde(r,t),Hde(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Gw("Patches").applyPatches_;return Ww(e)?r(e,t):this.produce(e,i=>r(i,t))}};function rG(e,t){const n=n9(e)?Gw("MapSet").proxyMap_(e,t):r9(e)?Gw("MapSet").proxySet_(e,t):ugt(e,t);return(t?t.scope_:kAe()).drafts_.push(n),n}function fgt(e){return Ww(e)||hp(10,e),NAe(e)}function NAe(e){if(!t1(e)||i9(e))return e;const t=e[od];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=ZW(e,t.scope_.immer_.useStrictShallowCopy_)}else n=ZW(e,!0);return dF(n,(r,i)=>{IAe(n,r,NAe(i))}),t&&(t.finalized_=!1),n}var ad=new cgt,DAe=ad.produce;ad.produceWithPatches.bind(ad);ad.setAutoFreeze.bind(ad);ad.setUseStrictShallowCopy.bind(ad);ad.applyPatches.bind(ad);ad.createDraft.bind(ad);ad.finishDraft.bind(ad);function dgt(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function hgt(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function pgt(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var Wde=e=>Array.isArray(e)?e:[e];function mgt(e){const t=Array.isArray(e[0])?e[0]:e;return pgt(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function ggt(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var ygt=class{constructor(e){this.value=e}deref(){return this.value}},vgt=typeof WeakRef<"u"?WeakRef:ygt,bgt=0,Gde=1;function Q4(){return{s:bgt,v:void 0,o:null,p:null}}function PAe(e,t={}){let n=Q4();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const y=m.get(p);y===void 0?(a=Q4(),m.set(p,a)):a=y}else{let m=a.p;m===null&&(a.p=m=new Map);const y=m.get(p);y===void 0?(a=Q4(),m.set(p,a)):a=y}}const l=a;let c;if(a.s===Gde)c=a.v;else if(c=e.apply(null,arguments),s++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new vgt(c):c}return l.s=Gde,l.v=c,c}return o.clearCache=()=>{n=Q4(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function xgt(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),dgt(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=PAe,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,y=Wde(d),v=Wde(p),b=mgt(i),w=f(function(){return s++,l.apply(null,arguments)},...y),E=h(function(){o++;const A=ggt(b,arguments);return a=w.apply(null,A),a},...v);return Object.assign(E,{resultFunc:l,memoizedResultFunc:w,dependencies:b,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var OAe=xgt(PAe),_gt=Object.assign((e,t=OAe)=>{hgt(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>_gt});function MAe(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var wgt=MAe(),Egt=MAe,Tgt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?fF:fF.apply(null,arguments)};function Yde(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Ly(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>tgt(r)&&r.type===e,n}var LAe=class UR extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,UR.prototype)}static get[Symbol.species](){return UR}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new UR(...t[0].concat(this)):new UR(...t.concat(this))}};function Kde(e){return t1(e)?DAe(e,()=>{}):e}function Xde(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function Sgt(e){return typeof e=="boolean"}var Cgt=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new LAe;return n&&(Sgt(n)?o.push(wgt):o.push(Egt(n.extraArgument))),o},Agt="RTK_autoBatch",Qde=e=>t=>{setTimeout(t,e)},Igt=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Qde(10):e.type==="callback"?e.queueNotification:Qde(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[Agt]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},kgt=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new LAe(e);return r&&i.push(Igt(typeof r=="object"?r:void 0)),i};function Rgt(e){const t=Cgt(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e;let a;if(typeof n=="function")a=n;else if(cee(n))a=Z0t(n);else throw new Error(Ly(1));let u;typeof r=="function"?u=r(t):u=t();let l=fF;i&&(l=Tgt({trace:!1,...typeof i=="object"&&i}));const c=egt(...u),f=kgt(c);let d=typeof o=="function"?o(f):f();const h=l(...d);return SAe(a,s,h)}function $Ae(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Ly(28));if(a in t)throw new Error(Ly(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function Ngt(e){return typeof e=="function"}function Dgt(e,t){let[n,r,i]=$Ae(t),s;if(Ngt(e))s=()=>Kde(e());else{const a=Kde(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(Ww(c)){const h=f(c,u);return h===void 0?c:h}else{if(t1(c))return DAe(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw Error("A case reducer on a non-draftable value must not return undefined")}return d}}return c},a)}return o.getInitialState=s,o}var Pgt=Symbol.for("rtk-slice-createasyncthunk");function Ogt(e,t){return`${e}/${t}`}function Mgt({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[Pgt];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(Ly(11));const a=(typeof i.reducers=="function"?i.reducers(Fgt()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(w,E){const T=typeof w=="string"?w:w.type;if(!T)throw new Error(Ly(12));if(T in l.sliceCaseReducersByType)throw new Error(Ly(13));return l.sliceCaseReducersByType[T]=E,c},addMatcher(w,E){return l.sliceMatchers.push({matcher:w,reducer:E}),c},exposeAction(w,E){return l.actionCreators[w]=E,c},exposeCaseReducer(w,E){return l.sliceCaseReducersByName[w]=E,c}};u.forEach(w=>{const E=a[w],T={reducerName:w,type:Ogt(s,w),createNotation:typeof i.reducers=="function"};jgt(E)?zgt(T,E,c,t):Bgt(T,E,c)});function f(){const[w={},E=[],T=void 0]=typeof i.extraReducers=="function"?$Ae(i.extraReducers):[i.extraReducers],A={...w,...l.sliceCaseReducersByType};return Dgt(i.initialState,I=>{for(let R in A)I.addCase(R,A[R]);for(let R of l.sliceMatchers)I.addMatcher(R.matcher,R.reducer);for(let R of E)I.addMatcher(R.matcher,R.reducer);T&&I.addDefaultCase(T)})}const d=w=>w,h=new Map;let p;function m(w,E){return p||(p=f()),p(w,E)}function y(){return p||(p=f()),p.getInitialState()}function v(w,E=!1){function T(I){let R=I[w];return typeof R>"u"&&E&&(R=y()),R}function A(I=d){const R=Xde(h,E,()=>new WeakMap);return Xde(R,I,()=>{const D={};for(const[M,$]of Object.entries(i.selectors??{}))D[M]=Lgt($,I,y,E);return D})}return{reducerPath:w,getSelectors:A,get selectors(){return A(T)},selectSlice:T}}const b={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:y,...v(o),injectInto(w,{reducerPath:E,...T}={}){const A=E??o;return w.inject({reducerPath:A,reducer:m},T),{...b,...v(A,!0)}}};return b}}function Lgt(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var $gt=Mgt();function Fgt(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function Bgt({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!Ugt(r))throw new Error(Ly(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?Yde(e,o):Yde(e))}function jgt(e){return e._reducerDefinitionType==="asyncThunk"}function Ugt(e){return e._reducerDefinitionType==="reducerWithPrepare"}function zgt({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Ly(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,s,c);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:o||J4,pending:a||J4,rejected:u||J4,settled:l||J4})}function J4(){}function Ly(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function $p(e){return e.components.flatMap(t=>typeof t=="string"?t:$p(t))}function FAe(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:FAe(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function BAe(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+$p(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+$p(e).length-1}];r+=1}else{const o=BAe(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function hee(e,t){const n=BAe(e,t,0);return typeof n=="number"?null:n}function jAe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=jAe(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function Vgt(e,t){const n=jAe(e,t,0);return n.found?n.distance:-1}function UAe(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...UAe(i,`${t}-${s}`))}),n}function pee(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>pee(n,`${t}-${r}`))}}async function Hgt(e,t,n,r,i,s,o){const a=$p(n),u=Object.fromEntries(a.filter(p=>p!=="end").map((p,m)=>[`${p}_${m}`,{answer:{},incorrectAnswers:{},startTime:0,endTime:-1,provenanceGraph:void 0,windowEvents:[],timedOut:!1,helpButtonClickedCount:0}])),l=Object.assign({},...a.map((p,m)=>({[`${p}_${m}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),c=Object.assign({},...a.map((p,m)=>({[`${p}_${m}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),f={studyId:e,isRecording:!1,answers:Object.keys(i).length>0?i:u,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?c:l,reactiveAnswers:{},reactiveProvenance:null,otherTexts:{},metadata:r,analysisProvState:null,analysisIsPlaying:!1,analysisHasAudio:!1,analysisHasProvenance:!1,modes:s,matrixAnswers:{},participantId:o},d=$gt({name:"storeSlice",initialState:f,reducers:{setConfig(p,m){p.config=m.payload},setIsRecording(p,m){p.isRecording=m.payload},toggleStudyBrowser:p=>{p.showStudyBrowser=!p.showStudyBrowser},toggleShowHelpText:p=>{p.showHelpText=!p.showHelpText},setAlertModal:(p,m)=>{p.alertModal=m.payload},setreactiveAnswers:(p,m)=>{p.reactiveAnswers=m.payload},setreactiveProvenance:(p,m)=>{p.reactiveProvenance=m.payload},setOtherText:(p,m)=>{p.otherTexts[m.payload.key]=m.payload.value},resetOtherText:p=>{p.otherTexts={}},saveAnalysisState(p,{payload:m}){p.analysisProvState=m},setAnalysisIsPlaying(p,{payload:m}){p.analysisIsPlaying=m},setAnalysisHasAudio(p,{payload:m}){p.analysisHasAudio=m},setAnalysisHasProvenance(p,{payload:m}){p.analysisHasProvenance=m},setMatrixAnswersRadio:(p,m)=>{if(m.payload){const{responseId:y,questionKey:v,val:b}=m.payload;p.matrixAnswers={...p.matrixAnswers,[y]:{...p.matrixAnswers[y],[v]:b}}}else p.matrixAnswers={}},setMatrixAnswersCheckbox:(p,m)=>{var y;if(m.payload){const{responseId:v,questionKey:b,value:w,isChecked:E,choiceOptions:T}=m.payload,A=((y=p.matrixAnswers[v])==null?void 0:y[b])??"";let I="";E?A.length>0?I=[...A.split("|"),w].sort((R,D)=>T.map(M=>M.value).indexOf(R)-T.map(M=>M.value).indexOf(D)).join("|"):I=`${w}`:I=A.split("|").filter(R=>R!==w).join("|"),p.matrixAnswers={...p.matrixAnswers,[v]:{...p.matrixAnswers[v],[b]:I}}}else p.matrixAnswers={}},updateResponseBlockValidation:(p,{payload:m})=>{if(p.trialValidation[m.identifier]||(p.trialValidation[m.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),Object.keys(m.values).length>0){const y=p.trialValidation[m.identifier][m.location].values;p.trialValidation[m.identifier][m.location]={valid:m.status,values:{...y,...m.values}}}m.provenanceGraph&&(p.trialValidation[m.identifier].provenanceGraph=m.provenanceGraph)},saveTrialAnswer(p,{payload:m}){const{identifier:y,answer:v,startTime:b,endTime:w,provenanceGraph:E,windowEvents:T,timedOut:A,incorrectAnswers:I,helpButtonClickedCount:R}=m;p.answers[y]={incorrectAnswers:I,answer:v,startTime:b,endTime:w,provenanceGraph:E,windowEvents:T,timedOut:A,helpButtonClickedCount:R}},incrementHelpCounter(p,{payload:m}){const{identifier:y}=m;p.answers[y].helpButtonClickedCount+=1},saveIncorrectAnswer(p,{payload:m}){const{identifier:y,answer:v,question:b}=m;p.answers[b].incorrectAnswers||(p.answers[b].incorrectAnswers={}),p.answers[b].incorrectAnswers[y]||(p.answers[b].incorrectAnswers[y]={id:y,value:[]}),p.answers[b].incorrectAnswers[y].value.push(v)}}});return{store:Rgt({reducer:d.reducer,preloadedState:f}),actions:d.actions}}const zAe=O.createContext(null);function Eu(){return O.useContext(zAe).actions}const yl=TAe,mi=K0t;function qgt(e){return mi(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}const Wgt=OAe(e=>e.sequence,e=>$p(e));function mee(){return mi(Wgt)}var aL={exports:{}},uL={exports:{}},Ggt=uL.exports,Jde;function Kr(){return Jde||(Jde=1,function(e,t){(function(n,r){e.exports=r()})(Ggt,function(){var n=n||function(r,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof aa<"u"&&aa.crypto&&(s=aa.crypto),!s&&typeof jR=="function")try{s=NSe}catch{}var o=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function b(){}return function(w){var E;return b.prototype=w,E=new b,b.prototype=null,E}}(),u={},l=u.lib={},c=l.Base=function(){return{extend:function(b){var w=a(this);return b&&w.mixIn(b),(!w.hasOwnProperty("init")||this.init===w.init)&&(w.init=function(){w.$super.init.apply(this,arguments)}),w.init.prototype=w,w.$super=this,w},create:function(){var b=this.extend();return b.init.apply(b,arguments),b},init:function(){},mixIn:function(b){for(var w in b)b.hasOwnProperty(w)&&(this[w]=b[w]);b.hasOwnProperty("toString")&&(this.toString=b.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=l.WordArray=c.extend({init:function(b,w){b=this.words=b||[],w!=i?this.sigBytes=w:this.sigBytes=b.length*4},toString:function(b){return(b||h).stringify(this)},concat:function(b){var w=this.words,E=b.words,T=this.sigBytes,A=b.sigBytes;if(this.clamp(),T%4)for(var I=0;I<A;I++){var R=E[I>>>2]>>>24-I%4*8&255;w[T+I>>>2]|=R<<24-(T+I)%4*8}else for(var D=0;D<A;D+=4)w[T+D>>>2]=E[D>>>2];return this.sigBytes+=A,this},clamp:function(){var b=this.words,w=this.sigBytes;b[w>>>2]&=4294967295<<32-w%4*8,b.length=r.ceil(w/4)},clone:function(){var b=c.clone.call(this);return b.words=this.words.slice(0),b},random:function(b){for(var w=[],E=0;E<b;E+=4)w.push(o());return new f.init(w,b)}}),d=u.enc={},h=d.Hex={stringify:function(b){for(var w=b.words,E=b.sigBytes,T=[],A=0;A<E;A++){var I=w[A>>>2]>>>24-A%4*8&255;T.push((I>>>4).toString(16)),T.push((I&15).toString(16))}return T.join("")},parse:function(b){for(var w=b.length,E=[],T=0;T<w;T+=2)E[T>>>3]|=parseInt(b.substr(T,2),16)<<24-T%8*4;return new f.init(E,w/2)}},p=d.Latin1={stringify:function(b){for(var w=b.words,E=b.sigBytes,T=[],A=0;A<E;A++){var I=w[A>>>2]>>>24-A%4*8&255;T.push(String.fromCharCode(I))}return T.join("")},parse:function(b){for(var w=b.length,E=[],T=0;T<w;T++)E[T>>>2]|=(b.charCodeAt(T)&255)<<24-T%4*8;return new f.init(E,w)}},m=d.Utf8={stringify:function(b){try{return decodeURIComponent(escape(p.stringify(b)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(b){return p.parse(unescape(encodeURIComponent(b)))}},y=l.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(b){typeof b=="string"&&(b=m.parse(b)),this._data.concat(b),this._nDataBytes+=b.sigBytes},_process:function(b){var w,E=this._data,T=E.words,A=E.sigBytes,I=this.blockSize,R=I*4,D=A/R;b?D=r.ceil(D):D=r.max((D|0)-this._minBufferSize,0);var M=D*I,$=r.min(M*4,A);if(M){for(var U=0;U<M;U+=I)this._doProcessBlock(T,U);w=T.splice(0,M),E.sigBytes-=$}return new f.init(w,$)},clone:function(){var b=c.clone.call(this);return b._data=this._data.clone(),b},_minBufferSize:0});l.Hasher=y.extend({cfg:c.extend(),init:function(b){this.cfg=this.cfg.extend(b),this.reset()},reset:function(){y.reset.call(this),this._doReset()},update:function(b){return this._append(b),this._process(),this},finalize:function(b){b&&this._append(b);var w=this._doFinalize();return w},blockSize:16,_createHelper:function(b){return function(w,E){return new b.init(E).finalize(w)}},_createHmacHelper:function(b){return function(w,E){return new v.HMAC.init(b,E).finalize(w)}}});var v=u.algo={};return u}(Math);return n})}(uL)),uL.exports}var lL={exports:{}},Ygt=lL.exports,Zde;function s9(){return Zde||(Zde=1,function(e,t){(function(n,r){e.exports=r(Kr())})(Ygt,function(n){return function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,u=i.x64={};u.Word=o.extend({init:function(l,c){this.high=l,this.low=c}}),u.WordArray=o.extend({init:function(l,c){l=this.words=l||[],c!=r?this.sigBytes=c:this.sigBytes=l.length*8},toX32:function(){for(var l=this.words,c=l.length,f=[],d=0;d<c;d++){var h=l[d];f.push(h.high),f.push(h.low)}return a.create(f,this.sigBytes)},clone:function(){for(var l=o.clone.call(this),c=l.words=this.words.slice(0),f=c.length,d=0;d<f;d++)c[d]=c[d].clone();return l}})}(),n})}(lL)),lL.exports}var cL={exports:{}},Kgt=cL.exports,ehe;function Xgt(){return ehe||(ehe=1,function(e,t){(function(n,r){e.exports=r(Kr())})(Kgt,function(n){return function(){if(typeof ArrayBuffer=="function"){var r=n,i=r.lib,s=i.WordArray,o=s.init,a=s.init=function(u){if(u instanceof ArrayBuffer&&(u=new Uint8Array(u)),(u instanceof Int8Array||typeof Uint8ClampedArray<"u"&&u instanceof Uint8ClampedArray||u instanceof Int16Array||u instanceof Uint16Array||u instanceof Int32Array||u instanceof Uint32Array||u instanceof Float32Array||u instanceof Float64Array)&&(u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength)),u instanceof Uint8Array){for(var l=u.byteLength,c=[],f=0;f<l;f++)c[f>>>2]|=u[f]<<24-f%4*8;o.call(this,c,l)}else o.apply(this,arguments)};a.prototype=s}}(),n.lib.WordArray})}(cL)),cL.exports}var fL={exports:{}},Qgt=fL.exports,the;function Jgt(){return the||(the=1,function(e,t){(function(n,r){e.exports=r(Kr())})(Qgt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Utf16=o.Utf16BE={stringify:function(u){for(var l=u.words,c=u.sigBytes,f=[],d=0;d<c;d+=2){var h=l[d>>>2]>>>16-d%4*8&65535;f.push(String.fromCharCode(h))}return f.join("")},parse:function(u){for(var l=u.length,c=[],f=0;f<l;f++)c[f>>>1]|=u.charCodeAt(f)<<16-f%2*16;return s.create(c,l*2)}},o.Utf16LE={stringify:function(u){for(var l=u.words,c=u.sigBytes,f=[],d=0;d<c;d+=2){var h=a(l[d>>>2]>>>16-d%4*8&65535);f.push(String.fromCharCode(h))}return f.join("")},parse:function(u){for(var l=u.length,c=[],f=0;f<l;f++)c[f>>>1]|=a(u.charCodeAt(f)<<16-f%2*16);return s.create(c,l*2)}};function a(u){return u<<8&4278255360|u>>>8&16711935}}(),n.enc.Utf16})}(fL)),fL.exports}var dL={exports:{}},Zgt=dL.exports,nhe;function FE(){return nhe||(nhe=1,function(e,t){(function(n,r){e.exports=r(Kr())})(Zgt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64={stringify:function(u){var l=u.words,c=u.sigBytes,f=this._map;u.clamp();for(var d=[],h=0;h<c;h+=3)for(var p=l[h>>>2]>>>24-h%4*8&255,m=l[h+1>>>2]>>>24-(h+1)%4*8&255,y=l[h+2>>>2]>>>24-(h+2)%4*8&255,v=p<<16|m<<8|y,b=0;b<4&&h+b*.75<c;b++)d.push(f.charAt(v>>>6*(3-b)&63));var w=f.charAt(64);if(w)for(;d.length%4;)d.push(w);return d.join("")},parse:function(u){var l=u.length,c=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var d=0;d<c.length;d++)f[c.charCodeAt(d)]=d}var h=c.charAt(64);if(h){var p=u.indexOf(h);p!==-1&&(l=p)}return a(u,l,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(u,l,c){for(var f=[],d=0,h=0;h<l;h++)if(h%4){var p=c[u.charCodeAt(h-1)]<<h%4*2,m=c[u.charCodeAt(h)]>>>6-h%4*2,y=p|m;f[d>>>2]|=y<<24-d%4*8,d++}return s.create(f,d)}}(),n.enc.Base64})}(dL)),dL.exports}var hL={exports:{}},eyt=hL.exports,rhe;function tyt(){return rhe||(rhe=1,function(e,t){(function(n,r){e.exports=r(Kr())})(eyt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64url={stringify:function(u,l){l===void 0&&(l=!0);var c=u.words,f=u.sigBytes,d=l?this._safe_map:this._map;u.clamp();for(var h=[],p=0;p<f;p+=3)for(var m=c[p>>>2]>>>24-p%4*8&255,y=c[p+1>>>2]>>>24-(p+1)%4*8&255,v=c[p+2>>>2]>>>24-(p+2)%4*8&255,b=m<<16|y<<8|v,w=0;w<4&&p+w*.75<f;w++)h.push(d.charAt(b>>>6*(3-w)&63));var E=d.charAt(64);if(E)for(;h.length%4;)h.push(E);return h.join("")},parse:function(u,l){l===void 0&&(l=!0);var c=u.length,f=l?this._safe_map:this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var h=0;h<f.length;h++)d[f.charCodeAt(h)]=h}var p=f.charAt(64);if(p){var m=u.indexOf(p);m!==-1&&(c=m)}return a(u,c,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(u,l,c){for(var f=[],d=0,h=0;h<l;h++)if(h%4){var p=c[u.charCodeAt(h-1)]<<h%4*2,m=c[u.charCodeAt(h)]>>>6-h%4*2,y=p|m;f[d>>>2]|=y<<24-d%4*8,d++}return s.create(f,d)}}(),n.enc.Base64url})}(hL)),hL.exports}var pL={exports:{}},nyt=pL.exports,ihe;function BE(){return ihe||(ihe=1,function(e,t){(function(n,r){e.exports=r(Kr())})(nyt,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=[];(function(){for(var m=0;m<64;m++)l[m]=r.abs(r.sin(m+1))*4294967296|0})();var c=u.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(m,y){for(var v=0;v<16;v++){var b=y+v,w=m[b];m[b]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360}var E=this._hash.words,T=m[y+0],A=m[y+1],I=m[y+2],R=m[y+3],D=m[y+4],M=m[y+5],$=m[y+6],U=m[y+7],F=m[y+8],H=m[y+9],Q=m[y+10],J=m[y+11],ne=m[y+12],Z=m[y+13],ie=m[y+14],q=m[y+15],j=E[0],G=E[1],V=E[2],Y=E[3];j=f(j,G,V,Y,T,7,l[0]),Y=f(Y,j,G,V,A,12,l[1]),V=f(V,Y,j,G,I,17,l[2]),G=f(G,V,Y,j,R,22,l[3]),j=f(j,G,V,Y,D,7,l[4]),Y=f(Y,j,G,V,M,12,l[5]),V=f(V,Y,j,G,$,17,l[6]),G=f(G,V,Y,j,U,22,l[7]),j=f(j,G,V,Y,F,7,l[8]),Y=f(Y,j,G,V,H,12,l[9]),V=f(V,Y,j,G,Q,17,l[10]),G=f(G,V,Y,j,J,22,l[11]),j=f(j,G,V,Y,ne,7,l[12]),Y=f(Y,j,G,V,Z,12,l[13]),V=f(V,Y,j,G,ie,17,l[14]),G=f(G,V,Y,j,q,22,l[15]),j=d(j,G,V,Y,A,5,l[16]),Y=d(Y,j,G,V,$,9,l[17]),V=d(V,Y,j,G,J,14,l[18]),G=d(G,V,Y,j,T,20,l[19]),j=d(j,G,V,Y,M,5,l[20]),Y=d(Y,j,G,V,Q,9,l[21]),V=d(V,Y,j,G,q,14,l[22]),G=d(G,V,Y,j,D,20,l[23]),j=d(j,G,V,Y,H,5,l[24]),Y=d(Y,j,G,V,ie,9,l[25]),V=d(V,Y,j,G,R,14,l[26]),G=d(G,V,Y,j,F,20,l[27]),j=d(j,G,V,Y,Z,5,l[28]),Y=d(Y,j,G,V,I,9,l[29]),V=d(V,Y,j,G,U,14,l[30]),G=d(G,V,Y,j,ne,20,l[31]),j=h(j,G,V,Y,M,4,l[32]),Y=h(Y,j,G,V,F,11,l[33]),V=h(V,Y,j,G,J,16,l[34]),G=h(G,V,Y,j,ie,23,l[35]),j=h(j,G,V,Y,A,4,l[36]),Y=h(Y,j,G,V,D,11,l[37]),V=h(V,Y,j,G,U,16,l[38]),G=h(G,V,Y,j,Q,23,l[39]),j=h(j,G,V,Y,Z,4,l[40]),Y=h(Y,j,G,V,T,11,l[41]),V=h(V,Y,j,G,R,16,l[42]),G=h(G,V,Y,j,$,23,l[43]),j=h(j,G,V,Y,H,4,l[44]),Y=h(Y,j,G,V,ne,11,l[45]),V=h(V,Y,j,G,q,16,l[46]),G=h(G,V,Y,j,I,23,l[47]),j=p(j,G,V,Y,T,6,l[48]),Y=p(Y,j,G,V,U,10,l[49]),V=p(V,Y,j,G,ie,15,l[50]),G=p(G,V,Y,j,M,21,l[51]),j=p(j,G,V,Y,ne,6,l[52]),Y=p(Y,j,G,V,R,10,l[53]),V=p(V,Y,j,G,Q,15,l[54]),G=p(G,V,Y,j,A,21,l[55]),j=p(j,G,V,Y,F,6,l[56]),Y=p(Y,j,G,V,q,10,l[57]),V=p(V,Y,j,G,$,15,l[58]),G=p(G,V,Y,j,Z,21,l[59]),j=p(j,G,V,Y,D,6,l[60]),Y=p(Y,j,G,V,J,10,l[61]),V=p(V,Y,j,G,I,15,l[62]),G=p(G,V,Y,j,H,21,l[63]),E[0]=E[0]+j|0,E[1]=E[1]+G|0,E[2]=E[2]+V|0,E[3]=E[3]+Y|0},_doFinalize:function(){var m=this._data,y=m.words,v=this._nDataBytes*8,b=m.sigBytes*8;y[b>>>5]|=128<<24-b%32;var w=r.floor(v/4294967296),E=v;y[(b+64>>>9<<4)+15]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,y[(b+64>>>9<<4)+14]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,m.sigBytes=(y.length+1)*4,this._process();for(var T=this._hash,A=T.words,I=0;I<4;I++){var R=A[I];A[I]=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360}return T},clone:function(){var m=a.clone.call(this);return m._hash=this._hash.clone(),m}});function f(m,y,v,b,w,E,T){var A=m+(y&v|~y&b)+w+T;return(A<<E|A>>>32-E)+y}function d(m,y,v,b,w,E,T){var A=m+(y&b|v&~b)+w+T;return(A<<E|A>>>32-E)+y}function h(m,y,v,b,w,E,T){var A=m+(y^v^b)+w+T;return(A<<E|A>>>32-E)+y}function p(m,y,v,b,w,E,T){var A=m+(v^(y|~b))+w+T;return(A<<E|A>>>32-E)+y}i.MD5=a._createHelper(c),i.HmacMD5=a._createHmacHelper(c)}(Math),n.MD5})}(pL)),pL.exports}var mL={exports:{}},ryt=mL.exports,she;function VAe(){return she||(she=1,function(e,t){(function(n,r){e.exports=r(Kr())})(ryt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.Hasher,a=r.algo,u=[],l=a.SHA1=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(c,f){for(var d=this._hash.words,h=d[0],p=d[1],m=d[2],y=d[3],v=d[4],b=0;b<80;b++){if(b<16)u[b]=c[f+b]|0;else{var w=u[b-3]^u[b-8]^u[b-14]^u[b-16];u[b]=w<<1|w>>>31}var E=(h<<5|h>>>27)+v+u[b];b<20?E+=(p&m|~p&y)+1518500249:b<40?E+=(p^m^y)+1859775393:b<60?E+=(p&m|p&y|m&y)-1894007588:E+=(p^m^y)-899497514,v=y,y=m,m=p<<30|p>>>2,p=h,h=E}d[0]=d[0]+h|0,d[1]=d[1]+p|0,d[2]=d[2]+m|0,d[3]=d[3]+y|0,d[4]=d[4]+v|0},_doFinalize:function(){var c=this._data,f=c.words,d=this._nDataBytes*8,h=c.sigBytes*8;return f[h>>>5]|=128<<24-h%32,f[(h+64>>>9<<4)+14]=Math.floor(d/4294967296),f[(h+64>>>9<<4)+15]=d,c.sigBytes=f.length*4,this._process(),this._hash},clone:function(){var c=o.clone.call(this);return c._hash=this._hash.clone(),c}});r.SHA1=o._createHelper(l),r.HmacSHA1=o._createHmacHelper(l)}(),n.SHA1})}(mL)),mL.exports}var gL={exports:{}},iyt=gL.exports,ohe;function gee(){return ohe||(ohe=1,function(e,t){(function(n,r){e.exports=r(Kr())})(iyt,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=[],c=[];(function(){function h(v){for(var b=r.sqrt(v),w=2;w<=b;w++)if(!(v%w))return!1;return!0}function p(v){return(v-(v|0))*4294967296|0}for(var m=2,y=0;y<64;)h(m)&&(y<8&&(l[y]=p(r.pow(m,1/2))),c[y]=p(r.pow(m,1/3)),y++),m++})();var f=[],d=u.SHA256=a.extend({_doReset:function(){this._hash=new o.init(l.slice(0))},_doProcessBlock:function(h,p){for(var m=this._hash.words,y=m[0],v=m[1],b=m[2],w=m[3],E=m[4],T=m[5],A=m[6],I=m[7],R=0;R<64;R++){if(R<16)f[R]=h[p+R]|0;else{var D=f[R-15],M=(D<<25|D>>>7)^(D<<14|D>>>18)^D>>>3,$=f[R-2],U=($<<15|$>>>17)^($<<13|$>>>19)^$>>>10;f[R]=M+f[R-7]+U+f[R-16]}var F=E&T^~E&A,H=y&v^y&b^v&b,Q=(y<<30|y>>>2)^(y<<19|y>>>13)^(y<<10|y>>>22),J=(E<<26|E>>>6)^(E<<21|E>>>11)^(E<<7|E>>>25),ne=I+J+F+c[R]+f[R],Z=Q+H;I=A,A=T,T=E,E=w+ne|0,w=b,b=v,v=y,y=ne+Z|0}m[0]=m[0]+y|0,m[1]=m[1]+v|0,m[2]=m[2]+b|0,m[3]=m[3]+w|0,m[4]=m[4]+E|0,m[5]=m[5]+T|0,m[6]=m[6]+A|0,m[7]=m[7]+I|0},_doFinalize:function(){var h=this._data,p=h.words,m=this._nDataBytes*8,y=h.sigBytes*8;return p[y>>>5]|=128<<24-y%32,p[(y+64>>>9<<4)+14]=r.floor(m/4294967296),p[(y+64>>>9<<4)+15]=m,h.sigBytes=p.length*4,this._process(),this._hash},clone:function(){var h=a.clone.call(this);return h._hash=this._hash.clone(),h}});i.SHA256=a._createHelper(d),i.HmacSHA256=a._createHmacHelper(d)}(Math),n.SHA256})}(gL)),gL.exports}var yL={exports:{}},syt=yL.exports,ahe;function oyt(){return ahe||(ahe=1,function(e,t){(function(n,r,i){e.exports=r(Kr(),gee())})(syt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.algo,a=o.SHA256,u=o.SHA224=a.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var l=a._doFinalize.call(this);return l.sigBytes-=4,l}});r.SHA224=a._createHelper(u),r.HmacSHA224=a._createHmacHelper(u)}(),n.SHA224})}(yL)),yL.exports}var vL={exports:{}},ayt=vL.exports,uhe;function HAe(){return uhe||(uhe=1,function(e,t){(function(n,r,i){e.exports=r(Kr(),s9())})(ayt,function(n){return function(){var r=n,i=r.lib,s=i.Hasher,o=r.x64,a=o.Word,u=o.WordArray,l=r.algo;function c(){return a.create.apply(a,arguments)}var f=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],d=[];(function(){for(var p=0;p<80;p++)d[p]=c()})();var h=l.SHA512=s.extend({_doReset:function(){this._hash=new u.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(p,m){for(var y=this._hash.words,v=y[0],b=y[1],w=y[2],E=y[3],T=y[4],A=y[5],I=y[6],R=y[7],D=v.high,M=v.low,$=b.high,U=b.low,F=w.high,H=w.low,Q=E.high,J=E.low,ne=T.high,Z=T.low,ie=A.high,q=A.low,j=I.high,G=I.low,V=R.high,Y=R.low,ee=D,ae=M,_e=$,pe=U,Te=F,Le=H,ye=Q,he=J,$e=ne,Ne=Z,tt=ie,it=q,Me=j,Ge=G,at=V,yt=Y,Tt=0;Tt<80;Tt++){var Ot,qe,ft=d[Tt];if(Tt<16)qe=ft.high=p[m+Tt*2]|0,Ot=ft.low=p[m+Tt*2+1]|0;else{var wt=d[Tt-15],ke=wt.high,Oe=wt.low,dt=(ke>>>1|Oe<<31)^(ke>>>8|Oe<<24)^ke>>>7,Lt=(Oe>>>1|ke<<31)^(Oe>>>8|ke<<24)^(Oe>>>7|ke<<25),Ft=d[Tt-2],dn=Ft.high,Dn=Ft.low,Tr=(dn>>>19|Dn<<13)^(dn<<3|Dn>>>29)^dn>>>6,Ri=(Dn>>>19|dn<<13)^(Dn<<3|dn>>>29)^(Dn>>>6|dn<<26),Un=d[Tt-7],tr=Un.high,Si=Un.low,Sr=d[Tt-16],Po=Sr.high,Qi=Sr.low;Ot=Lt+Si,qe=dt+tr+(Ot>>>0<Lt>>>0?1:0),Ot=Ot+Ri,qe=qe+Tr+(Ot>>>0<Ri>>>0?1:0),Ot=Ot+Qi,qe=qe+Po+(Ot>>>0<Qi>>>0?1:0),ft.high=qe,ft.low=Ot}var Ni=$e&tt^~$e&Me,Ji=Ne&it^~Ne&Ge,Xr=ee&_e^ee&Te^_e&Te,Oo=ae&pe^ae&Le^pe&Le,ic=(ee>>>28|ae<<4)^(ee<<30|ae>>>2)^(ee<<25|ae>>>7),ga=(ae>>>28|ee<<4)^(ae<<30|ee>>>2)^(ae<<25|ee>>>7),Iu=($e>>>14|Ne<<18)^($e>>>18|Ne<<14)^($e<<23|Ne>>>9),Qr=(Ne>>>14|$e<<18)^(Ne>>>18|$e<<14)^(Ne<<23|$e>>>9),Bi=f[Tt],si=Bi.high,Hs=Bi.low,Fr=yt+Qr,Zi=at+Iu+(Fr>>>0<yt>>>0?1:0),Fr=Fr+Ji,Zi=Zi+Ni+(Fr>>>0<Ji>>>0?1:0),Fr=Fr+Hs,Zi=Zi+si+(Fr>>>0<Hs>>>0?1:0),Fr=Fr+Ot,Zi=Zi+qe+(Fr>>>0<Ot>>>0?1:0),Mo=ga+Oo,co=ic+Xr+(Mo>>>0<ga>>>0?1:0);at=Me,yt=Ge,Me=tt,Ge=it,tt=$e,it=Ne,Ne=he+Fr|0,$e=ye+Zi+(Ne>>>0<he>>>0?1:0)|0,ye=Te,he=Le,Te=_e,Le=pe,_e=ee,pe=ae,ae=Fr+Mo|0,ee=Zi+co+(ae>>>0<Fr>>>0?1:0)|0}M=v.low=M+ae,v.high=D+ee+(M>>>0<ae>>>0?1:0),U=b.low=U+pe,b.high=$+_e+(U>>>0<pe>>>0?1:0),H=w.low=H+Le,w.high=F+Te+(H>>>0<Le>>>0?1:0),J=E.low=J+he,E.high=Q+ye+(J>>>0<he>>>0?1:0),Z=T.low=Z+Ne,T.high=ne+$e+(Z>>>0<Ne>>>0?1:0),q=A.low=q+it,A.high=ie+tt+(q>>>0<it>>>0?1:0),G=I.low=G+Ge,I.high=j+Me+(G>>>0<Ge>>>0?1:0),Y=R.low=Y+yt,R.high=V+at+(Y>>>0<yt>>>0?1:0)},_doFinalize:function(){var p=this._data,m=p.words,y=this._nDataBytes*8,v=p.sigBytes*8;m[v>>>5]|=128<<24-v%32,m[(v+128>>>10<<5)+30]=Math.floor(y/4294967296),m[(v+128>>>10<<5)+31]=y,p.sigBytes=m.length*4,this._process();var b=this._hash.toX32();return b},clone:function(){var p=s.clone.call(this);return p._hash=this._hash.clone(),p},blockSize:1024/32});r.SHA512=s._createHelper(h),r.HmacSHA512=s._createHmacHelper(h)}(),n.SHA512})}(vL)),vL.exports}var bL={exports:{}},uyt=bL.exports,lhe;function lyt(){return lhe||(lhe=1,function(e,t){(function(n,r,i){e.exports=r(Kr(),s9(),HAe())})(uyt,function(n){return function(){var r=n,i=r.x64,s=i.Word,o=i.WordArray,a=r.algo,u=a.SHA512,l=a.SHA384=u.extend({_doReset:function(){this._hash=new o.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var c=u._doFinalize.call(this);return c.sigBytes-=16,c}});r.SHA384=u._createHelper(l),r.HmacSHA384=u._createHmacHelper(l)}(),n.SHA384})}(bL)),bL.exports}var xL={exports:{}},cyt=xL.exports,che;function fyt(){return che||(che=1,function(e,t){(function(n,r,i){e.exports=r(Kr(),s9())})(cyt,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.x64,l=u.Word,c=i.algo,f=[],d=[],h=[];(function(){for(var y=1,v=0,b=0;b<24;b++){f[y+5*v]=(b+1)*(b+2)/2%64;var w=v%5,E=(2*y+3*v)%5;y=w,v=E}for(var y=0;y<5;y++)for(var v=0;v<5;v++)d[y+5*v]=v+(2*y+3*v)%5*5;for(var T=1,A=0;A<24;A++){for(var I=0,R=0,D=0;D<7;D++){if(T&1){var M=(1<<D)-1;M<32?R^=1<<M:I^=1<<M-32}T&128?T=T<<1^113:T<<=1}h[A]=l.create(I,R)}})();var p=[];(function(){for(var y=0;y<25;y++)p[y]=l.create()})();var m=c.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var y=this._state=[],v=0;v<25;v++)y[v]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(y,v){for(var b=this._state,w=this.blockSize/2,E=0;E<w;E++){var T=y[v+2*E],A=y[v+2*E+1];T=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,A=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360;var I=b[E];I.high^=A,I.low^=T}for(var R=0;R<24;R++){for(var D=0;D<5;D++){for(var M=0,$=0,U=0;U<5;U++){var I=b[D+5*U];M^=I.high,$^=I.low}var F=p[D];F.high=M,F.low=$}for(var D=0;D<5;D++)for(var H=p[(D+4)%5],Q=p[(D+1)%5],J=Q.high,ne=Q.low,M=H.high^(J<<1|ne>>>31),$=H.low^(ne<<1|J>>>31),U=0;U<5;U++){var I=b[D+5*U];I.high^=M,I.low^=$}for(var Z=1;Z<25;Z++){var M,$,I=b[Z],ie=I.high,q=I.low,j=f[Z];j<32?(M=ie<<j|q>>>32-j,$=q<<j|ie>>>32-j):(M=q<<j-32|ie>>>64-j,$=ie<<j-32|q>>>64-j);var G=p[d[Z]];G.high=M,G.low=$}var V=p[0],Y=b[0];V.high=Y.high,V.low=Y.low;for(var D=0;D<5;D++)for(var U=0;U<5;U++){var Z=D+5*U,I=b[Z],ee=p[Z],ae=p[(D+1)%5+5*U],_e=p[(D+2)%5+5*U];I.high=ee.high^~ae.high&_e.high,I.low=ee.low^~ae.low&_e.low}var I=b[0],pe=h[R];I.high^=pe.high,I.low^=pe.low}},_doFinalize:function(){var y=this._data,v=y.words;this._nDataBytes*8;var b=y.sigBytes*8,w=this.blockSize*32;v[b>>>5]|=1<<24-b%32,v[(r.ceil((b+1)/w)*w>>>5)-1]|=128,y.sigBytes=v.length*4,this._process();for(var E=this._state,T=this.cfg.outputLength/8,A=T/8,I=[],R=0;R<A;R++){var D=E[R],M=D.high,$=D.low;M=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360,$=($<<8|$>>>24)&16711935|($<<24|$>>>8)&4278255360,I.push($),I.push(M)}return new o.init(I,T)},clone:function(){for(var y=a.clone.call(this),v=y._state=this._state.slice(0),b=0;b<25;b++)v[b]=v[b].clone();return y}});i.SHA3=a._createHelper(m),i.HmacSHA3=a._createHmacHelper(m)}(Math),n.SHA3})}(xL)),xL.exports}var _L={exports:{}},dyt=_L.exports,fhe;function hyt(){return fhe||(fhe=1,function(e,t){(function(n,r){e.exports=r(Kr())})(dyt,function(n){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),f=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=o.create([0,1518500249,1859775393,2400959708,2840853838]),p=o.create([1352829926,1548603684,1836072691,2053994217,0]),m=u.RIPEMD160=a.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(A,I){for(var R=0;R<16;R++){var D=I+R,M=A[D];A[D]=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360}var $=this._hash.words,U=h.words,F=p.words,H=l.words,Q=c.words,J=f.words,ne=d.words,Z,ie,q,j,G,V,Y,ee,ae,_e;V=Z=$[0],Y=ie=$[1],ee=q=$[2],ae=j=$[3],_e=G=$[4];for(var pe,R=0;R<80;R+=1)pe=Z+A[I+H[R]]|0,R<16?pe+=y(ie,q,j)+U[0]:R<32?pe+=v(ie,q,j)+U[1]:R<48?pe+=b(ie,q,j)+U[2]:R<64?pe+=w(ie,q,j)+U[3]:pe+=E(ie,q,j)+U[4],pe=pe|0,pe=T(pe,J[R]),pe=pe+G|0,Z=G,G=j,j=T(q,10),q=ie,ie=pe,pe=V+A[I+Q[R]]|0,R<16?pe+=E(Y,ee,ae)+F[0]:R<32?pe+=w(Y,ee,ae)+F[1]:R<48?pe+=b(Y,ee,ae)+F[2]:R<64?pe+=v(Y,ee,ae)+F[3]:pe+=y(Y,ee,ae)+F[4],pe=pe|0,pe=T(pe,ne[R]),pe=pe+_e|0,V=_e,_e=ae,ae=T(ee,10),ee=Y,Y=pe;pe=$[1]+q+ae|0,$[1]=$[2]+j+_e|0,$[2]=$[3]+G+V|0,$[3]=$[4]+Z+Y|0,$[4]=$[0]+ie+ee|0,$[0]=pe},_doFinalize:function(){var A=this._data,I=A.words,R=this._nDataBytes*8,D=A.sigBytes*8;I[D>>>5]|=128<<24-D%32,I[(D+64>>>9<<4)+14]=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,A.sigBytes=(I.length+1)*4,this._process();for(var M=this._hash,$=M.words,U=0;U<5;U++){var F=$[U];$[U]=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360}return M},clone:function(){var A=a.clone.call(this);return A._hash=this._hash.clone(),A}});function y(A,I,R){return A^I^R}function v(A,I,R){return A&I|~A&R}function b(A,I,R){return(A|~I)^R}function w(A,I,R){return A&R|I&~R}function E(A,I,R){return A^(I|~R)}function T(A,I){return A<<I|A>>>32-I}i.RIPEMD160=a._createHelper(m),i.HmacRIPEMD160=a._createHmacHelper(m)}(),n.RIPEMD160})}(_L)),_L.exports}var wL={exports:{}},pyt=wL.exports,dhe;function yee(){return dhe||(dhe=1,function(e,t){(function(n,r){e.exports=r(Kr())})(pyt,function(n){(function(){var r=n,i=r.lib,s=i.Base,o=r.enc,a=o.Utf8,u=r.algo;u.HMAC=s.extend({init:function(l,c){l=this._hasher=new l.init,typeof c=="string"&&(c=a.parse(c));var f=l.blockSize,d=f*4;c.sigBytes>d&&(c=l.finalize(c)),c.clamp();for(var h=this._oKey=c.clone(),p=this._iKey=c.clone(),m=h.words,y=p.words,v=0;v<f;v++)m[v]^=1549556828,y[v]^=909522486;h.sigBytes=p.sigBytes=d,this.reset()},reset:function(){var l=this._hasher;l.reset(),l.update(this._iKey)},update:function(l){return this._hasher.update(l),this},finalize:function(l){var c=this._hasher,f=c.finalize(l);c.reset();var d=c.finalize(this._oKey.clone().concat(f));return d}})})()})}(wL)),wL.exports}var EL={exports:{}},myt=EL.exports,hhe;function gyt(){return hhe||(hhe=1,function(e,t){(function(n,r,i){e.exports=r(Kr(),gee(),yee())})(myt,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,u=a.SHA256,l=a.HMAC,c=a.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:u,iterations:25e4}),init:function(f){this.cfg=this.cfg.extend(f)},compute:function(f,d){for(var h=this.cfg,p=l.create(h.hasher,f),m=o.create(),y=o.create([1]),v=m.words,b=y.words,w=h.keySize,E=h.iterations;v.length<w;){var T=p.update(d).finalize(y);p.reset();for(var A=T.words,I=A.length,R=T,D=1;D<E;D++){R=p.finalize(R),p.reset();for(var M=R.words,$=0;$<I;$++)A[$]^=M[$]}m.concat(T),b[0]++}return m.sigBytes=w*4,m}});r.PBKDF2=function(f,d,h){return c.create(h).compute(f,d)}}(),n.PBKDF2})}(EL)),EL.exports}var TL={exports:{}},yyt=TL.exports,phe;function xx(){return phe||(phe=1,function(e,t){(function(n,r,i){e.exports=r(Kr(),VAe(),yee())})(yyt,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,u=a.MD5,l=a.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:u,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,f){for(var d,h=this.cfg,p=h.hasher.create(),m=o.create(),y=m.words,v=h.keySize,b=h.iterations;y.length<v;){d&&p.update(d),d=p.update(c).finalize(f),p.reset();for(var w=1;w<b;w++)d=p.finalize(d),p.reset();m.concat(d)}return m.sigBytes=v*4,m}});r.EvpKDF=function(c,f,d){return l.create(d).compute(c,f)}}(),n.EvpKDF})}(TL)),TL.exports}var SL={exports:{}},vyt=SL.exports,mhe;function Va(){return mhe||(mhe=1,function(e,t){(function(n,r,i){e.exports=r(Kr(),xx())})(vyt,function(n){n.lib.Cipher||function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,u=s.BufferedBlockAlgorithm,l=i.enc;l.Utf8;var c=l.Base64,f=i.algo,d=f.EvpKDF,h=s.Cipher=u.extend({cfg:o.extend(),createEncryptor:function(M,$){return this.create(this._ENC_XFORM_MODE,M,$)},createDecryptor:function(M,$){return this.create(this._DEC_XFORM_MODE,M,$)},init:function(M,$,U){this.cfg=this.cfg.extend(U),this._xformMode=M,this._key=$,this.reset()},reset:function(){u.reset.call(this),this._doReset()},process:function(M){return this._append(M),this._process()},finalize:function(M){M&&this._append(M);var $=this._doFinalize();return $},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function M($){return typeof $=="string"?D:A}return function($){return{encrypt:function(U,F,H){return M(F).encrypt($,U,F,H)},decrypt:function(U,F,H){return M(F).decrypt($,U,F,H)}}}}()});s.StreamCipher=h.extend({_doFinalize:function(){var M=this._process(!0);return M},blockSize:1});var p=i.mode={},m=s.BlockCipherMode=o.extend({createEncryptor:function(M,$){return this.Encryptor.create(M,$)},createDecryptor:function(M,$){return this.Decryptor.create(M,$)},init:function(M,$){this._cipher=M,this._iv=$}}),y=p.CBC=function(){var M=m.extend();M.Encryptor=M.extend({processBlock:function(U,F){var H=this._cipher,Q=H.blockSize;$.call(this,U,F,Q),H.encryptBlock(U,F),this._prevBlock=U.slice(F,F+Q)}}),M.Decryptor=M.extend({processBlock:function(U,F){var H=this._cipher,Q=H.blockSize,J=U.slice(F,F+Q);H.decryptBlock(U,F),$.call(this,U,F,Q),this._prevBlock=J}});function $(U,F,H){var Q,J=this._iv;J?(Q=J,this._iv=r):Q=this._prevBlock;for(var ne=0;ne<H;ne++)U[F+ne]^=Q[ne]}return M}(),v=i.pad={},b=v.Pkcs7={pad:function(M,$){for(var U=$*4,F=U-M.sigBytes%U,H=F<<24|F<<16|F<<8|F,Q=[],J=0;J<F;J+=4)Q.push(H);var ne=a.create(Q,F);M.concat(ne)},unpad:function(M){var $=M.words[M.sigBytes-1>>>2]&255;M.sigBytes-=$}};s.BlockCipher=h.extend({cfg:h.cfg.extend({mode:y,padding:b}),reset:function(){var M;h.reset.call(this);var $=this.cfg,U=$.iv,F=$.mode;this._xformMode==this._ENC_XFORM_MODE?M=F.createEncryptor:(M=F.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==M?this._mode.init(this,U&&U.words):(this._mode=M.call(F,this,U&&U.words),this._mode.__creator=M)},_doProcessBlock:function(M,$){this._mode.processBlock(M,$)},_doFinalize:function(){var M,$=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?($.pad(this._data,this.blockSize),M=this._process(!0)):(M=this._process(!0),$.unpad(M)),M},blockSize:128/32});var w=s.CipherParams=o.extend({init:function(M){this.mixIn(M)},toString:function(M){return(M||this.formatter).stringify(this)}}),E=i.format={},T=E.OpenSSL={stringify:function(M){var $,U=M.ciphertext,F=M.salt;return F?$=a.create([1398893684,1701076831]).concat(F).concat(U):$=U,$.toString(c)},parse:function(M){var $,U=c.parse(M),F=U.words;return F[0]==1398893684&&F[1]==1701076831&&($=a.create(F.slice(2,4)),F.splice(0,4),U.sigBytes-=16),w.create({ciphertext:U,salt:$})}},A=s.SerializableCipher=o.extend({cfg:o.extend({format:T}),encrypt:function(M,$,U,F){F=this.cfg.extend(F);var H=M.createEncryptor(U,F),Q=H.finalize($),J=H.cfg;return w.create({ciphertext:Q,key:U,iv:J.iv,algorithm:M,mode:J.mode,padding:J.padding,blockSize:M.blockSize,formatter:F.format})},decrypt:function(M,$,U,F){F=this.cfg.extend(F),$=this._parse($,F.format);var H=M.createDecryptor(U,F).finalize($.ciphertext);return H},_parse:function(M,$){return typeof M=="string"?$.parse(M,this):M}}),I=i.kdf={},R=I.OpenSSL={execute:function(M,$,U,F,H){if(F||(F=a.random(64/8)),H)var Q=d.create({keySize:$+U,hasher:H}).compute(M,F);else var Q=d.create({keySize:$+U}).compute(M,F);var J=a.create(Q.words.slice($),U*4);return Q.sigBytes=$*4,w.create({key:Q,iv:J,salt:F})}},D=s.PasswordBasedCipher=A.extend({cfg:A.cfg.extend({kdf:R}),encrypt:function(M,$,U,F){F=this.cfg.extend(F);var H=F.kdf.execute(U,M.keySize,M.ivSize,F.salt,F.hasher);F.iv=H.iv;var Q=A.encrypt.call(this,M,$,H.key,F);return Q.mixIn(H),Q},decrypt:function(M,$,U,F){F=this.cfg.extend(F),$=this._parse($,F.format);var H=F.kdf.execute(U,M.keySize,M.ivSize,$.salt,F.hasher);F.iv=H.iv;var Q=A.decrypt.call(this,M,$,H.key,F);return Q}})}()})}(SL)),SL.exports}var CL={exports:{}},byt=CL.exports,ghe;function xyt(){return ghe||(ghe=1,function(e,t){(function(n,r,i){e.exports=r(Kr(),Va())})(byt,function(n){return n.mode.CFB=function(){var r=n.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize;i.call(this,s,o,u,a),this._prevBlock=s.slice(o,o+u)}}),r.Decryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=s.slice(o,o+u);i.call(this,s,o,u,a),this._prevBlock=l}});function i(s,o,a,u){var l,c=this._iv;c?(l=c.slice(0),this._iv=void 0):l=this._prevBlock,u.encryptBlock(l,0);for(var f=0;f<a;f++)s[o+f]^=l[f]}return r}(),n.mode.CFB})}(CL)),CL.exports}var AL={exports:{}},_yt=AL.exports,yhe;function wyt(){return yhe||(yhe=1,function(e,t){(function(n,r,i){e.exports=r(Kr(),Va())})(_yt,function(n){return n.mode.CTR=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=this._iv,c=this._counter;l&&(c=this._counter=l.slice(0),this._iv=void 0);var f=c.slice(0);a.encryptBlock(f,0),c[u-1]=c[u-1]+1|0;for(var d=0;d<u;d++)s[o+d]^=f[d]}});return r.Decryptor=i,r}(),n.mode.CTR})}(AL)),AL.exports}var IL={exports:{}},Eyt=IL.exports,vhe;function Tyt(){return vhe||(vhe=1,function(e,t){(function(n,r,i){e.exports=r(Kr(),Va())})(Eyt,function(n){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return n.mode.CTRGladman=function(){var r=n.lib.BlockCipherMode.extend();function i(a){if((a>>24&255)===255){var u=a>>16&255,l=a>>8&255,c=a&255;u===255?(u=0,l===255?(l=0,c===255?c=0:++c):++l):++u,a=0,a+=u<<16,a+=l<<8,a+=c}else a+=1<<24;return a}function s(a){return(a[0]=i(a[0]))===0&&(a[1]=i(a[1])),a}var o=r.Encryptor=r.extend({processBlock:function(a,u){var l=this._cipher,c=l.blockSize,f=this._iv,d=this._counter;f&&(d=this._counter=f.slice(0),this._iv=void 0),s(d);var h=d.slice(0);l.encryptBlock(h,0);for(var p=0;p<c;p++)a[u+p]^=h[p]}});return r.Decryptor=o,r}(),n.mode.CTRGladman})}(IL)),IL.exports}var kL={exports:{}},Syt=kL.exports,bhe;function Cyt(){return bhe||(bhe=1,function(e,t){(function(n,r,i){e.exports=r(Kr(),Va())})(Syt,function(n){return n.mode.OFB=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=this._iv,c=this._keystream;l&&(c=this._keystream=l.slice(0),this._iv=void 0),a.encryptBlock(c,0);for(var f=0;f<u;f++)s[o+f]^=c[f]}});return r.Decryptor=i,r}(),n.mode.OFB})}(kL)),kL.exports}var RL={exports:{}},Ayt=RL.exports,xhe;function Iyt(){return xhe||(xhe=1,function(e,t){(function(n,r,i){e.exports=r(Kr(),Va())})(Ayt,function(n){return n.mode.ECB=function(){var r=n.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(i,s){this._cipher.encryptBlock(i,s)}}),r.Decryptor=r.extend({processBlock:function(i,s){this._cipher.decryptBlock(i,s)}}),r}(),n.mode.ECB})}(RL)),RL.exports}var NL={exports:{}},kyt=NL.exports,_he;function Ryt(){return _he||(_he=1,function(e,t){(function(n,r,i){e.exports=r(Kr(),Va())})(kyt,function(n){return n.pad.AnsiX923={pad:function(r,i){var s=r.sigBytes,o=i*4,a=o-s%o,u=s+a-1;r.clamp(),r.words[u>>>2]|=a<<24-u%4*8,r.sigBytes+=a},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Ansix923})}(NL)),NL.exports}var DL={exports:{}},Nyt=DL.exports,whe;function Dyt(){return whe||(whe=1,function(e,t){(function(n,r,i){e.exports=r(Kr(),Va())})(Nyt,function(n){return n.pad.Iso10126={pad:function(r,i){var s=i*4,o=s-r.sigBytes%s;r.concat(n.lib.WordArray.random(o-1)).concat(n.lib.WordArray.create([o<<24],1))},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Iso10126})}(DL)),DL.exports}var PL={exports:{}},Pyt=PL.exports,Ehe;function Oyt(){return Ehe||(Ehe=1,function(e,t){(function(n,r,i){e.exports=r(Kr(),Va())})(Pyt,function(n){return n.pad.Iso97971={pad:function(r,i){r.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(r,i)},unpad:function(r){n.pad.ZeroPadding.unpad(r),r.sigBytes--}},n.pad.Iso97971})}(PL)),PL.exports}var OL={exports:{}},Myt=OL.exports,The;function Lyt(){return The||(The=1,function(e,t){(function(n,r,i){e.exports=r(Kr(),Va())})(Myt,function(n){return n.pad.ZeroPadding={pad:function(r,i){var s=i*4;r.clamp(),r.sigBytes+=s-(r.sigBytes%s||s)},unpad:function(r){for(var i=r.words,s=r.sigBytes-1,s=r.sigBytes-1;s>=0;s--)if(i[s>>>2]>>>24-s%4*8&255){r.sigBytes=s+1;break}}},n.pad.ZeroPadding})}(OL)),OL.exports}var ML={exports:{}},$yt=ML.exports,She;function Fyt(){return She||(She=1,function(e,t){(function(n,r,i){e.exports=r(Kr(),Va())})($yt,function(n){return n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding})}(ML)),ML.exports}var LL={exports:{}},Byt=LL.exports,Che;function jyt(){return Che||(Che=1,function(e,t){(function(n,r,i){e.exports=r(Kr(),Va())})(Byt,function(n){return function(r){var i=n,s=i.lib,o=s.CipherParams,a=i.enc,u=a.Hex,l=i.format;l.Hex={stringify:function(c){return c.ciphertext.toString(u)},parse:function(c){var f=u.parse(c);return o.create({ciphertext:f})}}}(),n.format.Hex})}(LL)),LL.exports}var $L={exports:{}},Uyt=$L.exports,Ahe;function zyt(){return Ahe||(Ahe=1,function(e,t){(function(n,r,i){e.exports=r(Kr(),FE(),BE(),xx(),Va())})(Uyt,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo,a=[],u=[],l=[],c=[],f=[],d=[],h=[],p=[],m=[],y=[];(function(){for(var w=[],E=0;E<256;E++)E<128?w[E]=E<<1:w[E]=E<<1^283;for(var T=0,A=0,E=0;E<256;E++){var I=A^A<<1^A<<2^A<<3^A<<4;I=I>>>8^I&255^99,a[T]=I,u[I]=T;var R=w[T],D=w[R],M=w[D],$=w[I]*257^I*16843008;l[T]=$<<24|$>>>8,c[T]=$<<16|$>>>16,f[T]=$<<8|$>>>24,d[T]=$;var $=M*16843009^D*65537^R*257^T*16843008;h[I]=$<<24|$>>>8,p[I]=$<<16|$>>>16,m[I]=$<<8|$>>>24,y[I]=$,T?(T=R^w[w[w[M^R]]],A^=w[w[A]]):T=A=1}})();var v=[0,1,2,4,8,16,32,64,128,27,54],b=o.AES=s.extend({_doReset:function(){var w;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var E=this._keyPriorReset=this._key,T=E.words,A=E.sigBytes/4,I=this._nRounds=A+6,R=(I+1)*4,D=this._keySchedule=[],M=0;M<R;M++)M<A?D[M]=T[M]:(w=D[M-1],M%A?A>6&&M%A==4&&(w=a[w>>>24]<<24|a[w>>>16&255]<<16|a[w>>>8&255]<<8|a[w&255]):(w=w<<8|w>>>24,w=a[w>>>24]<<24|a[w>>>16&255]<<16|a[w>>>8&255]<<8|a[w&255],w^=v[M/A|0]<<24),D[M]=D[M-A]^w);for(var $=this._invKeySchedule=[],U=0;U<R;U++){var M=R-U;if(U%4)var w=D[M];else var w=D[M-4];U<4||M<=4?$[U]=w:$[U]=h[a[w>>>24]]^p[a[w>>>16&255]]^m[a[w>>>8&255]]^y[a[w&255]]}}},encryptBlock:function(w,E){this._doCryptBlock(w,E,this._keySchedule,l,c,f,d,a)},decryptBlock:function(w,E){var T=w[E+1];w[E+1]=w[E+3],w[E+3]=T,this._doCryptBlock(w,E,this._invKeySchedule,h,p,m,y,u);var T=w[E+1];w[E+1]=w[E+3],w[E+3]=T},_doCryptBlock:function(w,E,T,A,I,R,D,M){for(var $=this._nRounds,U=w[E]^T[0],F=w[E+1]^T[1],H=w[E+2]^T[2],Q=w[E+3]^T[3],J=4,ne=1;ne<$;ne++){var Z=A[U>>>24]^I[F>>>16&255]^R[H>>>8&255]^D[Q&255]^T[J++],ie=A[F>>>24]^I[H>>>16&255]^R[Q>>>8&255]^D[U&255]^T[J++],q=A[H>>>24]^I[Q>>>16&255]^R[U>>>8&255]^D[F&255]^T[J++],j=A[Q>>>24]^I[U>>>16&255]^R[F>>>8&255]^D[H&255]^T[J++];U=Z,F=ie,H=q,Q=j}var Z=(M[U>>>24]<<24|M[F>>>16&255]<<16|M[H>>>8&255]<<8|M[Q&255])^T[J++],ie=(M[F>>>24]<<24|M[H>>>16&255]<<16|M[Q>>>8&255]<<8|M[U&255])^T[J++],q=(M[H>>>24]<<24|M[Q>>>16&255]<<16|M[U>>>8&255]<<8|M[F&255])^T[J++],j=(M[Q>>>24]<<24|M[U>>>16&255]<<16|M[F>>>8&255]<<8|M[H&255])^T[J++];w[E]=Z,w[E+1]=ie,w[E+2]=q,w[E+3]=j},keySize:256/32});r.AES=s._createHelper(b)}(),n.AES})}($L)),$L.exports}var FL={exports:{}},Vyt=FL.exports,Ihe;function Hyt(){return Ihe||(Ihe=1,function(e,t){(function(n,r,i){e.exports=r(Kr(),FE(),BE(),xx(),Va())})(Vyt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.BlockCipher,a=r.algo,u=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=a.DES=o.extend({_doReset:function(){for(var v=this._key,b=v.words,w=[],E=0;E<56;E++){var T=u[E]-1;w[E]=b[T>>>5]>>>31-T%32&1}for(var A=this._subKeys=[],I=0;I<16;I++){for(var R=A[I]=[],D=c[I],E=0;E<24;E++)R[E/6|0]|=w[(l[E]-1+D)%28]<<31-E%6,R[4+(E/6|0)]|=w[28+(l[E+24]-1+D)%28]<<31-E%6;R[0]=R[0]<<1|R[0]>>>31;for(var E=1;E<7;E++)R[E]=R[E]>>>(E-1)*4+3;R[7]=R[7]<<5|R[7]>>>27}for(var M=this._invSubKeys=[],E=0;E<16;E++)M[E]=A[15-E]},encryptBlock:function(v,b){this._doCryptBlock(v,b,this._subKeys)},decryptBlock:function(v,b){this._doCryptBlock(v,b,this._invSubKeys)},_doCryptBlock:function(v,b,w){this._lBlock=v[b],this._rBlock=v[b+1],p.call(this,4,252645135),p.call(this,16,65535),m.call(this,2,858993459),m.call(this,8,16711935),p.call(this,1,1431655765);for(var E=0;E<16;E++){for(var T=w[E],A=this._lBlock,I=this._rBlock,R=0,D=0;D<8;D++)R|=f[D][((I^T[D])&d[D])>>>0];this._lBlock=I,this._rBlock=A^R}var M=this._lBlock;this._lBlock=this._rBlock,this._rBlock=M,p.call(this,1,1431655765),m.call(this,8,16711935),m.call(this,2,858993459),p.call(this,16,65535),p.call(this,4,252645135),v[b]=this._lBlock,v[b+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function p(v,b){var w=(this._lBlock>>>v^this._rBlock)&b;this._rBlock^=w,this._lBlock^=w<<v}function m(v,b){var w=(this._rBlock>>>v^this._lBlock)&b;this._lBlock^=w,this._rBlock^=w<<v}r.DES=o._createHelper(h);var y=a.TripleDES=o.extend({_doReset:function(){var v=this._key,b=v.words;if(b.length!==2&&b.length!==4&&b.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var w=b.slice(0,2),E=b.length<4?b.slice(0,2):b.slice(2,4),T=b.length<6?b.slice(0,2):b.slice(4,6);this._des1=h.createEncryptor(s.create(w)),this._des2=h.createEncryptor(s.create(E)),this._des3=h.createEncryptor(s.create(T))},encryptBlock:function(v,b){this._des1.encryptBlock(v,b),this._des2.decryptBlock(v,b),this._des3.encryptBlock(v,b)},decryptBlock:function(v,b){this._des3.decryptBlock(v,b),this._des2.encryptBlock(v,b),this._des1.decryptBlock(v,b)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=o._createHelper(y)}(),n.TripleDES})}(FL)),FL.exports}var BL={exports:{}},qyt=BL.exports,khe;function Wyt(){return khe||(khe=1,function(e,t){(function(n,r,i){e.exports=r(Kr(),FE(),BE(),xx(),Va())})(qyt,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=o.RC4=s.extend({_doReset:function(){for(var c=this._key,f=c.words,d=c.sigBytes,h=this._S=[],p=0;p<256;p++)h[p]=p;for(var p=0,m=0;p<256;p++){var y=p%d,v=f[y>>>2]>>>24-y%4*8&255;m=(m+h[p]+v)%256;var b=h[p];h[p]=h[m],h[m]=b}this._i=this._j=0},_doProcessBlock:function(c,f){c[f]^=u.call(this)},keySize:256/32,ivSize:0});function u(){for(var c=this._S,f=this._i,d=this._j,h=0,p=0;p<4;p++){f=(f+1)%256,d=(d+c[f])%256;var m=c[f];c[f]=c[d],c[d]=m,h|=c[(c[f]+c[d])%256]<<24-p*8}return this._i=f,this._j=d,h}r.RC4=s._createHelper(a);var l=o.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)u.call(this)}});r.RC4Drop=s._createHelper(l)}(),n.RC4})}(BL)),BL.exports}var jL={exports:{}},Gyt=jL.exports,Rhe;function Yyt(){return Rhe||(Rhe=1,function(e,t){(function(n,r,i){e.exports=r(Kr(),FE(),BE(),xx(),Va())})(Gyt,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],u=[],l=[],c=o.Rabbit=s.extend({_doReset:function(){for(var d=this._key.words,h=this.cfg.iv,p=0;p<4;p++)d[p]=(d[p]<<8|d[p]>>>24)&16711935|(d[p]<<24|d[p]>>>8)&4278255360;var m=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],y=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var p=0;p<4;p++)f.call(this);for(var p=0;p<8;p++)y[p]^=m[p+4&7];if(h){var v=h.words,b=v[0],w=v[1],E=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,T=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,A=E>>>16|T&4294901760,I=T<<16|E&65535;y[0]^=E,y[1]^=A,y[2]^=T,y[3]^=I,y[4]^=E,y[5]^=A,y[6]^=T,y[7]^=I;for(var p=0;p<4;p++)f.call(this)}},_doProcessBlock:function(d,h){var p=this._X;f.call(this),a[0]=p[0]^p[5]>>>16^p[3]<<16,a[1]=p[2]^p[7]>>>16^p[5]<<16,a[2]=p[4]^p[1]>>>16^p[7]<<16,a[3]=p[6]^p[3]>>>16^p[1]<<16;for(var m=0;m<4;m++)a[m]=(a[m]<<8|a[m]>>>24)&16711935|(a[m]<<24|a[m]>>>8)&4278255360,d[h+m]^=a[m]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,h=this._C,p=0;p<8;p++)u[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<u[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<u[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<u[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<u[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<u[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<u[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<u[6]>>>0?1:0)|0,this._b=h[7]>>>0<u[7]>>>0?1:0;for(var p=0;p<8;p++){var m=d[p]+h[p],y=m&65535,v=m>>>16,b=((y*y>>>17)+y*v>>>15)+v*v,w=((m&4294901760)*m|0)+((m&65535)*m|0);l[p]=b^w}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.Rabbit=s._createHelper(c)}(),n.Rabbit})}(jL)),jL.exports}var UL={exports:{}},Kyt=UL.exports,Nhe;function Xyt(){return Nhe||(Nhe=1,function(e,t){(function(n,r,i){e.exports=r(Kr(),FE(),BE(),xx(),Va())})(Kyt,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],u=[],l=[],c=o.RabbitLegacy=s.extend({_doReset:function(){var d=this._key.words,h=this.cfg.iv,p=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],m=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var y=0;y<4;y++)f.call(this);for(var y=0;y<8;y++)m[y]^=p[y+4&7];if(h){var v=h.words,b=v[0],w=v[1],E=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,T=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,A=E>>>16|T&4294901760,I=T<<16|E&65535;m[0]^=E,m[1]^=A,m[2]^=T,m[3]^=I,m[4]^=E,m[5]^=A,m[6]^=T,m[7]^=I;for(var y=0;y<4;y++)f.call(this)}},_doProcessBlock:function(d,h){var p=this._X;f.call(this),a[0]=p[0]^p[5]>>>16^p[3]<<16,a[1]=p[2]^p[7]>>>16^p[5]<<16,a[2]=p[4]^p[1]>>>16^p[7]<<16,a[3]=p[6]^p[3]>>>16^p[1]<<16;for(var m=0;m<4;m++)a[m]=(a[m]<<8|a[m]>>>24)&16711935|(a[m]<<24|a[m]>>>8)&4278255360,d[h+m]^=a[m]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,h=this._C,p=0;p<8;p++)u[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<u[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<u[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<u[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<u[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<u[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<u[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<u[6]>>>0?1:0)|0,this._b=h[7]>>>0<u[7]>>>0?1:0;for(var p=0;p<8;p++){var m=d[p]+h[p],y=m&65535,v=m>>>16,b=((y*y>>>17)+y*v>>>15)+v*v,w=((m&4294901760)*m|0)+((m&65535)*m|0);l[p]=b^w}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.RabbitLegacy=s._createHelper(c)}(),n.RabbitLegacy})}(UL)),UL.exports}var zL={exports:{}},Qyt=zL.exports,Dhe;function Jyt(){return Dhe||(Dhe=1,function(e,t){(function(n,r,i){e.exports=r(Kr(),FE(),BE(),xx(),Va())})(Qyt,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo;const a=16,u=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],l=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function f(y,v){let b=v>>24&255,w=v>>16&255,E=v>>8&255,T=v&255,A=y.sbox[0][b]+y.sbox[1][w];return A=A^y.sbox[2][E],A=A+y.sbox[3][T],A}function d(y,v,b){let w=v,E=b,T;for(let A=0;A<a;++A)w=w^y.pbox[A],E=f(y,w)^E,T=w,w=E,E=T;return T=w,w=E,E=T,E=E^y.pbox[a],w=w^y.pbox[a+1],{left:w,right:E}}function h(y,v,b){let w=v,E=b,T;for(let A=a+1;A>1;--A)w=w^y.pbox[A],E=f(y,w)^E,T=w,w=E,E=T;return T=w,w=E,E=T,E=E^y.pbox[1],w=w^y.pbox[0],{left:w,right:E}}function p(y,v,b){for(let I=0;I<4;I++){y.sbox[I]=[];for(let R=0;R<256;R++)y.sbox[I][R]=l[I][R]}let w=0;for(let I=0;I<a+2;I++)y.pbox[I]=u[I]^v[w],w++,w>=b&&(w=0);let E=0,T=0,A=0;for(let I=0;I<a+2;I+=2)A=d(y,E,T),E=A.left,T=A.right,y.pbox[I]=E,y.pbox[I+1]=T;for(let I=0;I<4;I++)for(let R=0;R<256;R+=2)A=d(y,E,T),E=A.left,T=A.right,y.sbox[I][R]=E,y.sbox[I][R+1]=T;return!0}var m=o.Blowfish=s.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var y=this._keyPriorReset=this._key,v=y.words,b=y.sigBytes/4;p(c,v,b)}},encryptBlock:function(y,v){var b=d(c,y[v],y[v+1]);y[v]=b.left,y[v+1]=b.right},decryptBlock:function(y,v){var b=h(c,y[v],y[v+1]);y[v]=b.left,y[v+1]=b.right},blockSize:64/32,keySize:128/32,ivSize:64/32});r.Blowfish=s._createHelper(m)}(),n.Blowfish})}(zL)),zL.exports}var Zyt=aL.exports,Phe;function e1t(){return Phe||(Phe=1,function(e,t){(function(n,r,i){e.exports=r(Kr(),s9(),Xgt(),Jgt(),FE(),tyt(),BE(),VAe(),gee(),oyt(),HAe(),lyt(),fyt(),hyt(),yee(),gyt(),xx(),Va(),xyt(),wyt(),Tyt(),Cyt(),Iyt(),Ryt(),Dyt(),Oyt(),Lyt(),Fyt(),jyt(),zyt(),Hyt(),Wyt(),Yyt(),Xyt(),Jyt())})(Zyt,function(n){return n})}(aL)),aL.exports}var iG=e1t();function pp(e){const t=iG.AES.encrypt(e.toString(),"notSecret").toString();return btoa(t)}function t1t(e){const t=iG.AES.decrypt(atob(e),"notSecret").toString(iG.enc.Utf8);return parseInt(t,10)}function jE(){const{studyId:e}=M0();return`${e}`}function wh(){const{index:e}=M0();return e===void 0?0:e.startsWith("reviewer-")||e.startsWith("__")?e:t1t(e)}function Eh(){const e=wh(),t=mee();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var zR={exports:{}};zR.exports;var Ohe;function n1t(){return Ohe||(Ohe=1,function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",y="[object Number]",v="[object Null]",b="[object Object]",w="[object Proxy]",E="[object RegExp]",T="[object Set]",A="[object String]",I="[object Undefined]",R="[object WeakMap]",D="[object ArrayBuffer]",M="[object DataView]",$="[object Float32Array]",U="[object Float64Array]",F="[object Int8Array]",H="[object Int16Array]",Q="[object Int32Array]",J="[object Uint8Array]",ne="[object Uint8ClampedArray]",Z="[object Uint16Array]",ie="[object Uint32Array]",q=/[\\^$.*+?()[\]{}|]/g,j=/^\[object .+?Constructor\]$/,G=/^(?:0|[1-9]\d*)$/,V={};V[$]=V[U]=V[F]=V[H]=V[Q]=V[J]=V[ne]=V[Z]=V[ie]=!0,V[a]=V[u]=V[D]=V[c]=V[M]=V[f]=V[d]=V[h]=V[m]=V[y]=V[b]=V[E]=V[T]=V[A]=V[R]=!1;var Y=typeof aa=="object"&&aa&&aa.Object===Object&&aa,ee=typeof self=="object"&&self&&self.Object===Object&&self,ae=Y||ee||Function("return this")(),_e=t&&!t.nodeType&&t,pe=_e&&!0&&e&&!e.nodeType&&e,Te=pe&&pe.exports===_e,Le=Te&&Y.process,ye=function(){try{var ve=pe&&pe.require&&pe.require("util").types;return ve||Le&&Le.binding&&Le.binding("util")}catch{}}(),he=ye&&ye.isTypedArray;function $e(ve,Ae,Qe){switch(Qe.length){case 0:return ve.call(Ae);case 1:return ve.call(Ae,Qe[0]);case 2:return ve.call(Ae,Qe[0],Qe[1]);case 3:return ve.call(Ae,Qe[0],Qe[1],Qe[2])}return ve.apply(Ae,Qe)}function Ne(ve,Ae){for(var Qe=-1,tn=Array(ve);++Qe<ve;)tn[Qe]=Ae(Qe);return tn}function tt(ve){return function(Ae){return ve(Ae)}}function it(ve,Ae){return ve==null?void 0:ve[Ae]}function Me(ve,Ae){return function(Qe){return ve(Ae(Qe))}}var Ge=Array.prototype,at=Function.prototype,yt=Object.prototype,Tt=ae["__core-js_shared__"],Ot=at.toString,qe=yt.hasOwnProperty,ft=function(){var ve=/[^.]+$/.exec(Tt&&Tt.keys&&Tt.keys.IE_PROTO||"");return ve?"Symbol(src)_1."+ve:""}(),wt=yt.toString,ke=Ot.call(Object),Oe=RegExp("^"+Ot.call(qe).replace(q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),dt=Te?ae.Buffer:void 0,Lt=ae.Symbol,Ft=ae.Uint8Array;dt&&dt.allocUnsafe;var dn=Me(Object.getPrototypeOf,Object),Dn=Object.create,Tr=yt.propertyIsEnumerable,Ri=Ge.splice,Un=Lt?Lt.toStringTag:void 0,tr=function(){try{var ve=Et(Object,"defineProperty");return ve({},"",{}),ve}catch{}}(),Si=dt?dt.isBuffer:void 0,Sr=Math.max,Po=Date.now,Qi=Et(ae,"Map"),Ni=Et(Object,"create"),Ji=function(){function ve(){}return function(Ae){if(!lc(Ae))return{};if(Dn)return Dn(Ae);ve.prototype=Ae;var Qe=new ve;return ve.prototype=void 0,Qe}}();function Xr(ve){var Ae=-1,Qe=ve==null?0:ve.length;for(this.clear();++Ae<Qe;){var tn=ve[Ae];this.set(tn[0],tn[1])}}function Oo(){this.__data__=Ni?Ni(null):{},this.size=0}function ic(ve){var Ae=this.has(ve)&&delete this.__data__[ve];return this.size-=Ae?1:0,Ae}function ga(ve){var Ae=this.__data__;if(Ni){var Qe=Ae[ve];return Qe===r?void 0:Qe}return qe.call(Ae,ve)?Ae[ve]:void 0}function Iu(ve){var Ae=this.__data__;return Ni?Ae[ve]!==void 0:qe.call(Ae,ve)}function Qr(ve,Ae){var Qe=this.__data__;return this.size+=this.has(ve)?0:1,Qe[ve]=Ni&&Ae===void 0?r:Ae,this}Xr.prototype.clear=Oo,Xr.prototype.delete=ic,Xr.prototype.get=ga,Xr.prototype.has=Iu,Xr.prototype.set=Qr;function Bi(ve){var Ae=-1,Qe=ve==null?0:ve.length;for(this.clear();++Ae<Qe;){var tn=ve[Ae];this.set(tn[0],tn[1])}}function si(){this.__data__=[],this.size=0}function Hs(ve){var Ae=this.__data__,Qe=pf(Ae,ve);if(Qe<0)return!1;var tn=Ae.length-1;return Qe==tn?Ae.pop():Ri.call(Ae,Qe,1),--this.size,!0}function Fr(ve){var Ae=this.__data__,Qe=pf(Ae,ve);return Qe<0?void 0:Ae[Qe][1]}function Zi(ve){return pf(this.__data__,ve)>-1}function Mo(ve,Ae){var Qe=this.__data__,tn=pf(Qe,ve);return tn<0?(++this.size,Qe.push([ve,Ae])):Qe[tn][1]=Ae,this}Bi.prototype.clear=si,Bi.prototype.delete=Hs,Bi.prototype.get=Fr,Bi.prototype.has=Zi,Bi.prototype.set=Mo;function co(ve){var Ae=-1,Qe=ve==null?0:ve.length;for(this.clear();++Ae<Qe;){var tn=ve[Ae];this.set(tn[0],tn[1])}}function Ko(){this.size=0,this.__data__={hash:new Xr,map:new(Qi||Bi),string:new Xr}}function vl(ve){var Ae=bt(this,ve).delete(ve);return this.size-=Ae?1:0,Ae}function kh(ve){return bt(this,ve).get(ve)}function Pr(ve){return bt(this,ve).has(ve)}function sc(ve,Ae){var Qe=bt(this,ve),tn=Qe.size;return Qe.set(ve,Ae),this.size+=Qe.size==tn?0:1,this}co.prototype.clear=Ko,co.prototype.delete=vl,co.prototype.get=kh,co.prototype.has=Pr,co.prototype.set=sc;function ps(ve){var Ae=this.__data__=new Bi(ve);this.size=Ae.size}function Wa(){this.__data__=new Bi,this.size=0}function Xo(ve){var Ae=this.__data__,Qe=Ae.delete(ve);return this.size=Ae.size,Qe}function fm(ve){return this.__data__.get(ve)}function Rh(ve){return this.__data__.has(ve)}function yd(ve,Ae){var Qe=this.__data__;if(Qe instanceof Bi){var tn=Qe.__data__;if(!Qi||tn.length<n-1)return tn.push([ve,Ae]),this.size=++Qe.size,this;Qe=this.__data__=new co(tn)}return Qe.set(ve,Ae),this.size=Qe.size,this}ps.prototype.clear=Wa,ps.prototype.delete=Xo,ps.prototype.get=fm,ps.prototype.has=Rh,ps.prototype.set=yd;function vd(ve,Ae){var Qe=$o(ve),tn=!Qe&&ms(ve),rr=!Qe&&!tn&&Ka(ve),kr=!Qe&&!tn&&!rr&&xg(ve),ci=Qe||tn||rr||kr,cn=ci?Ne(ve.length,String):[],Br=cn.length;for(var Jr in ve)ci&&(Jr=="length"||rr&&(Jr=="offset"||Jr=="parent")||kr&&(Jr=="buffer"||Jr=="byteLength"||Jr=="byteOffset")||qt(Jr,Br))||cn.push(Jr);return cn}function df(ve,Ae,Qe){(Qe!==void 0&&!Lo(ve[Ae],Qe)||Qe===void 0&&!(Ae in ve))&&fr(ve,Ae,Qe)}function hf(ve,Ae,Qe){var tn=ve[Ae];(!(qe.call(ve,Ae)&&Lo(tn,Qe))||Qe===void 0&&!(Ae in ve))&&fr(ve,Ae,Qe)}function pf(ve,Ae){for(var Qe=ve.length;Qe--;)if(Lo(ve[Qe][0],Ae))return Qe;return-1}function fr(ve,Ae,Qe){Ae=="__proto__"&&tr?tr(ve,Ae,{configurable:!0,enumerable:!0,value:Qe,writable:!0}):ve[Ae]=Qe}var Nh=rt();function fo(ve){return ve==null?ve===void 0?I:v:Un&&Un in Object(ve)?xt(ve):Ws(ve)}function bl(ve){return Es(ve)&&fo(ve)==a}function qs(ve){if(!lc(ve)||nr(ve))return!1;var Ae=ku(ve)?Oe:j;return Ae.test(Oh(ve))}function oc(ve){return Es(ve)&&j1(ve.length)&&!!V[fo(ve)]}function Dh(ve){if(!lc(ve))return br(ve);var Ae=ln(ve),Qe=[];for(var tn in ve)tn=="constructor"&&(Ae||!qe.call(ve,tn))||Qe.push(tn);return Qe}function ac(ve,Ae,Qe,tn,rr){ve!==Ae&&Nh(Ae,function(kr,ci){if(rr||(rr=new ps),lc(kr))ho(ve,Ae,ci,Qe,ac,tn,rr);else{var cn=tn?tn(uc(ve,ci),kr,ci+"",ve,Ae,rr):void 0;cn===void 0&&(cn=kr),df(ve,ci,cn)}},bd)}function ho(ve,Ae,Qe,tn,rr,kr,ci){var cn=uc(ve,Qe),Br=uc(Ae,Qe),Jr=ci.get(Br);if(Jr){df(ve,Qe,Jr);return}var Gs=kr?kr(cn,Br,Qe+"",ve,Ae,ci):void 0,Ru=Gs===void 0;if(Ru){var es=$o(Br),xd=!es&&Ka(Br),Ls=!es&&!xd&&xg(Br);Gs=Br,es||xd||Ls?$o(cn)?Gs=cn:gf(cn)?Gs=De(cn):xd?(Ru=!1,Gs=ue(Br)):Ls?(Ru=!1,Gs=ge(Br)):Gs=[]:jx(Br)||ms(Br)?(Gs=cn,ms(cn)?Gs=yf(cn):(!lc(cn)||ku(cn))&&(Gs=Nt(Br))):Ru=!1}Ru&&(ci.set(Br,Gs),rr(Gs,Br,tn,kr,ci),ci.delete(Br)),df(ve,Qe,Gs)}function dm(ve,Ae){return Ph(Ga(ve,Ae,dr),ve+"")}var po=tr?function(ve,Ae){return tr(ve,"toString",{configurable:!0,enumerable:!1,value:xr(Ae),writable:!0})}:dr;function ue(ve,Ae){return ve.slice()}function Se(ve){var Ae=new ve.constructor(ve.byteLength);return new Ft(Ae).set(new Ft(ve)),Ae}function ge(ve,Ae){var Qe=Se(ve.buffer);return new ve.constructor(Qe,ve.byteOffset,ve.length)}function De(ve,Ae){var Qe=-1,tn=ve.length;for(Ae||(Ae=Array(tn));++Qe<tn;)Ae[Qe]=ve[Qe];return Ae}function Be(ve,Ae,Qe,tn){var rr=!Qe;Qe||(Qe={});for(var kr=-1,ci=Ae.length;++kr<ci;){var cn=Ae[kr],Br=void 0;Br===void 0&&(Br=ve[cn]),rr?fr(Qe,cn,Br):hf(Qe,cn,Br)}return Qe}function Re(ve){return dm(function(Ae,Qe){var tn=-1,rr=Qe.length,kr=rr>1?Qe[rr-1]:void 0,ci=rr>2?Qe[2]:void 0;for(kr=ve.length>3&&typeof kr=="function"?(rr--,kr):void 0,ci&&In(Qe[0],Qe[1],ci)&&(kr=rr<3?void 0:kr,rr=1),Ae=Object(Ae);++tn<rr;){var cn=Qe[tn];cn&&ve(Ae,cn,tn,kr)}return Ae})}function rt(ve){return function(Ae,Qe,tn){for(var rr=-1,kr=Object(Ae),ci=tn(Ae),cn=ci.length;cn--;){var Br=ci[++rr];if(Qe(kr[Br],Br,kr)===!1)break}return Ae}}function bt(ve,Ae){var Qe=ve.__data__;return un(Ae)?Qe[typeof Ae=="string"?"string":"hash"]:Qe.map}function Et(ve,Ae){var Qe=it(ve,Ae);return qs(Qe)?Qe:void 0}function xt(ve){var Ae=qe.call(ve,Un),Qe=ve[Un];try{ve[Un]=void 0;var tn=!0}catch{}var rr=wt.call(ve);return tn&&(Ae?ve[Un]=Qe:delete ve[Un]),rr}function Nt(ve){return typeof ve.constructor=="function"&&!ln(ve)?Ji(dn(ve)):{}}function qt(ve,Ae){var Qe=typeof ve;return Ae=Ae??o,!!Ae&&(Qe=="number"||Qe!="symbol"&&G.test(ve))&&ve>-1&&ve%1==0&&ve<Ae}function In(ve,Ae,Qe){if(!lc(Qe))return!1;var tn=typeof Ae;return(tn=="number"?Ya(Qe)&&qt(Ae,Qe.length):tn=="string"&&Ae in Qe)?Lo(Qe[Ae],ve):!1}function un(ve){var Ae=typeof ve;return Ae=="string"||Ae=="number"||Ae=="symbol"||Ae=="boolean"?ve!=="__proto__":ve===null}function nr(ve){return!!ft&&ft in ve}function ln(ve){var Ae=ve&&ve.constructor,Qe=typeof Ae=="function"&&Ae.prototype||yt;return ve===Qe}function br(ve){var Ae=[];if(ve!=null)for(var Qe in Object(ve))Ae.push(Qe);return Ae}function Ws(ve){return wt.call(ve)}function Ga(ve,Ae,Qe){return Ae=Sr(Ae===void 0?ve.length-1:Ae,0),function(){for(var tn=arguments,rr=-1,kr=Sr(tn.length-Ae,0),ci=Array(kr);++rr<kr;)ci[rr]=tn[Ae+rr];rr=-1;for(var cn=Array(Ae+1);++rr<Ae;)cn[rr]=tn[rr];return cn[Ae]=Qe(ci),$e(ve,this,cn)}}function uc(ve,Ae){if(!(Ae==="constructor"&&typeof ve[Ae]=="function")&&Ae!="__proto__")return ve[Ae]}var Ph=mf(po);function mf(ve){var Ae=0,Qe=0;return function(){var tn=Po(),rr=s-(tn-Qe);if(Qe=tn,rr>0){if(++Ae>=i)return arguments[0]}else Ae=0;return ve.apply(void 0,arguments)}}function Oh(ve){if(ve!=null){try{return Ot.call(ve)}catch{}try{return ve+""}catch{}}return""}function Lo(ve,Ae){return ve===Ae||ve!==ve&&Ae!==Ae}var ms=bl(function(){return arguments}())?bl:function(ve){return Es(ve)&&qe.call(ve,"callee")&&!Tr.call(ve,"callee")},$o=Array.isArray;function Ya(ve){return ve!=null&&j1(ve.length)&&!ku(ve)}function gf(ve){return Es(ve)&&Ya(ve)}var Ka=Si||vf;function ku(ve){if(!lc(ve))return!1;var Ae=fo(ve);return Ae==h||Ae==p||Ae==l||Ae==w}function j1(ve){return typeof ve=="number"&&ve>-1&&ve%1==0&&ve<=o}function lc(ve){var Ae=typeof ve;return ve!=null&&(Ae=="object"||Ae=="function")}function Es(ve){return ve!=null&&typeof ve=="object"}function jx(ve){if(!Es(ve)||fo(ve)!=b)return!1;var Ae=dn(ve);if(Ae===null)return!0;var Qe=qe.call(Ae,"constructor")&&Ae.constructor;return typeof Qe=="function"&&Qe instanceof Qe&&Ot.call(Qe)==ke}var xg=he?tt(he):oc;function yf(ve){return Be(ve,bd(ve))}function bd(ve){return Ya(ve)?vd(ve):Dh(ve)}var U1=Re(function(ve,Ae,Qe){ac(ve,Ae,Qe)});function xr(ve){return function(){return ve}}function dr(ve){return ve}function vf(){return!1}e.exports=U1}(zR,zR.exports)),zR.exports}var r1t=n1t();const vee=hh(r1t);function $y(e){return structuredClone(e)}function bee(){const e=wh(),n=`${Eh()}_${e}`;return mi(i=>i.answers[n])}const qAe=O.createContext(null);function i1t(){const e=O.useContext(qAe);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function n1(){return mi(e=>e.config)}function qA(){const[e]=E1();return!!e.get("participantId")}function Mhe(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function WAe(){const e=wh(),t=mee(),r=`${Eh()}_${e}`,i=mi($=>$.trialValidation),s=mi($=>$.sequence),o=mi($=>$.answers),a=mi($=>$.modes),u=mi($=>$.otherTexts),l=yl(),{saveTrialAnswer:c,setreactiveAnswers:f,setMatrixAnswersRadio:d,setMatrixAnswersCheckbox:h,resetOtherText:p}=Eu(),{storageEngine:m}=uo(),y=jE(),v=O.useMemo(()=>a.dataCollectionEnabled,[a]),b=qgt(r),w=qA(),E=typeof e!="number"||w||!b,T=bee(),A=Xp(),I=n1(),R=O.useMemo(()=>Date.now(),[]),D=i1t(),M=O.useCallback(($=!0)=>{if(typeof e!="number")return;const U=$y(i[r]),F=Object.values(U).reduce((V,Y)=>Object.hasOwn(Y,"values")?{...V,...Y.values}:V,{});Object.entries(u).forEach(([V,Y])=>{Array.isArray(F[V])&&F[V].includes("__other")&&(F[V]=F[V].filter(ee=>ee!=="__other"),F[V].push(`other:${Y}`)),typeof F[V]=="string"&&F[V]==="__other"&&(F[V]=`other:${Y}`)});const{provenanceGraph:H}=U,Q=Date.now(),{incorrectAnswers:J,helpButtonClickedCount:ne}=T,Z=D&&"current"in D&&D.current?D.current.splice(0,D.current.length):[];if(v&&T.endTime===-1){const V={answer:$?F:{},startTime:R,endTime:Q,incorrectAnswers:J,provenanceGraph:H,windowEvents:Z,timedOut:!$,helpButtonClickedCount:ne};l(c({identifier:r,...V})),m&&m.saveAnswers({...o,[r]:V}),l(f({})),l(p()),l(h(null)),l(d(null))}let ie=e+1;const q=hee(s,e),j=q!==null&&q.some(V=>Object.hasOwn(V.currentBlock,"skip")&&V.currentBlock.skip!==void 0),G={...o,[r]:{answer:F,startTime:R,endTime:Q,provenanceGraph:H,windowEvents:Z}};j&&[...q.flatMap(Y=>Y.currentBlock.skip?Y.currentBlock.skip.map(ee=>({...ee,firstIndex:Y.firstIndex,lastIndex:Y.lastIndex})):[])].some(Y=>{let ee=!1;const ae=Object.fromEntries(Object.entries(G).filter(([pe])=>{const Te=parseInt(pe.slice(pe.lastIndexOf("_")+1),10);return Te>=Y.firstIndex&&Te<=e})),_e=Y.check!=="block"?Object.entries(ae).filter(([pe])=>pe.slice(0,pe.lastIndexOf("_"))===Y.name):Object.entries(ae);if(_e.length===0)return!1;if(_e.some(([pe,Te])=>!Te))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(Y,null,2)}`);if(Y.check==="response"||Y.check==="responses"){const[pe,Te]=_e[0];Y.check==="response"?ee=Y.comparison==="equal"?Y.value===Te.answer[Y.responseId]:Y.value!==Te.answer[Y.responseId]:ee=!Mhe(Te.answer,pe,I.components[pe.slice(0,pe.lastIndexOf("_"))],I)}else if(Y.check==="block"||Y.check==="repeatedComponent"){if(_e.length<Y.value)return!1;const pe=_e.map(([ye,he])=>Mhe(he.answer,ye,I.components[ye.slice(0,ye.lastIndexOf("_"))],I)),Te=pe.filter(ye=>ye).length,Le=pe.length-Te;ee=Y.condition==="numCorrect"&&Te===Y.value||Y.condition==="numIncorrect"&&Le===Y.value}if(ee){const pe=t.indexOf(Y.to),Te=pe===-1?Vgt(s,Y.to):-1;return ie=pe===-1?Te:pe,!0}return!1}),A(`/${y}/${pp(ie)}${window.location.search}`)},[e,i,r,u,T,D,v,s,o,R,A,y,l,c,m,f,p,h,d,I,t]);return{isNextDisabled:E,goToNextStep:M}}function s1t({label:e="Next",disabled:t=!1,onClick:n,configInUse:r}){const{isNextDisabled:i,goToNextStep:s}=WAe(),o=n1(),a=Xp(),u=O.useCallback(()=>{n&&n(),s()},[s,n]),l=r==null?void 0:r.nextButtonDisableTime,c=(r==null?void 0:r.nextButtonEnableTime)||0,[f,d]=O.useState(void 0);O.useEffect(()=>{let p=0;const m=setInterval(()=>{p+=100,d(p)},100);return()=>{clearInterval(m)}},[]),O.useEffect(()=>{f&&l&&f>=l&&o.uiConfig.timeoutReject&&a("./../__timedOut")},[l,f,a,o.uiConfig.timeoutReject]);const h=O.useMemo(()=>{const p=l&&f?f<=l:!0,m=f?f>=c:!0;return p&&m},[l,c,f]);return O.useEffect(()=>{const p=m=>{m.key==="Enter"&&!t&&!i&&h&&s()};return o.uiConfig.nextOnEnter?(window.addEventListener("keydown",p),()=>{window.removeEventListener("keydown",p)}):()=>{}},[t,i,h,s,o.uiConfig.nextOnEnter]),S.jsxs(S.Fragment,{children:[S.jsx(yn,{type:"submit",disabled:t||i||!h,onClick:u,children:e}),c>0&&f&&f<c&&S.jsxs(Py,{mt:"md",title:"Please wait",color:"blue",icon:S.jsx(LJ,{}),children:["The next button will be enabled in"," ",Math.ceil((c-f)/1e3)," ","seconds."]}),l&&f&&l-f<1e4&&(l-f>0?S.jsxs(Py,{mt:"md",title:"Next button disables soon",color:"yellow",icon:S.jsx(SN,{}),children:["The next button disables in"," ",Math.ceil((l-f)/1e3)," ","seconds."]}):!o.uiConfig.timeoutReject&&S.jsxs(Py,{mt:"md",title:"Next button disabled",color:"red",icon:S.jsx(SN,{}),children:["The next button has timed out and is now disabled.",S.jsx($i,{justify:"right",mt:"sm",children:S.jsx(yn,{onClick:()=>s(!1),variant:"link",color:"red",children:"Proceed"})})]}))]})}function o1t(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const a1t=typeof window<"u"?O.useLayoutEffect:O.useEffect;function nu(e,t){a1t(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function u1t(e,t){e&&o1t(e),nu(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),nu(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),nu(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),nu(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),nu(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),nu(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),nu(`mantine-form:${e}:clear-errors`,t.clearErrors),nu(`mantine-form:${e}:reset`,t.reset),nu(`mantine-form:${e}:validate`,t.validate),nu(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),nu(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),nu(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),nu(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),nu(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),nu(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),nu(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),nu(`mantine-form:${e}:reset-touched`,t.resetTouched)}function l1t(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function sG(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function c1t(e){const[t,n]=O.useState(sG(e)),r=O.useRef(t),i=O.useCallback(u=>{n(l=>{const c=sG(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=O.useCallback(()=>i({}),[]),o=O.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=O.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function oG(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function Lhe(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function $he(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=oG(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=Lhe(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=Lhe(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function f1t(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function Fhe(e,t,n){typeof n.value=="object"&&(n.value=h2(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function h2(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(h2(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(h2(a),h2(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(h2(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)Fhe(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||Fhe(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function GAe(e){return typeof e!="string"?[]:e.split(".")}function hu(e,t){const n=GAe(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!=null;i+=1)r=r[n[i]];return r}function c3(e,t,n){const r=GAe(e);if(r.length===0)return n;const i=h2(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function d1t(e,{from:t,to:n},r){const i=hu(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),c3(e,s,r)}function h1t(e,t,n,r){const i=hu(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),c3(e,s,r)}function p1t(e,t,n){const r=hu(e,n);return Array.isArray(r)?c3(e,r.filter((i,s)=>s!==t),n):n}function m1t(e,t,n,r){const i=hu(e,r);if(!Array.isArray(i)||i.length<=n)return r;const s=[...i];return s[n]=t,c3(e,s,r)}function g1t({$values:e,$errors:t,$status:n}){const r=O.useCallback((a,u)=>{n.clearFieldDirty(a),t.setErrors(l=>f1t(a,u,l)),e.setValues({values:d1t(a,u,e.refValues.current),updateState:!0})},[]),i=O.useCallback((a,u)=>{n.clearFieldDirty(a),t.setErrors(l=>$he(a,u,l,-1)),e.setValues({values:p1t(a,u,e.refValues.current),updateState:!0})},[]),s=O.useCallback((a,u,l)=>{n.clearFieldDirty(a),t.setErrors(c=>$he(a,l,c,1)),e.setValues({values:h1t(a,u,l,e.refValues.current),updateState:!0})},[]),o=O.useCallback((a,u,l)=>{n.clearFieldDirty(a),e.setValues({values:m1t(a,l,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s,replaceListItem:o}}var sV,Bhe;function xee(){return Bhe||(Bhe=1,sV=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}),sV}var y1t=xee();const VR=hh(y1t);function Xk(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function v1t({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=O.useState(t),[o,a]=O.useState(e),u=O.useRef(t),l=O.useRef(e),c=O.useCallback(A=>{const I=typeof A=="function"?A(u.current):A;u.current=I,n==="controlled"&&s(I)},[]),f=O.useCallback((A,I=!1)=>{const R=typeof A=="function"?A(l.current):A;l.current=R,(n==="controlled"||I)&&a(R)},[]),d=O.useCallback(()=>c({}),[]),h=O.useCallback(A=>{const I=A?{...A,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(I),f({})},[]),p=O.useCallback((A,I)=>{c(R=>Xk(R,A)===I?R:{...R,[A]:I})},[]),m=O.useCallback((A,I,R)=>{f(D=>Xk(D,A)===I?D:{...D,[A]:I},R)},[]),y=O.useCallback((A,I)=>{const R=Xk(l.current,A),D=!VR(hu(A,r.getValuesSnapshot()),I),M=oG(A,l.current);M[A]=D,f(M,R!==D)},[]),v=O.useCallback(A=>Xk(u.current,A),[]),b=O.useCallback(A=>f(I=>{if(typeof A!="string")return I;const R=oG(A,I);return delete R[A],VR(R,I)?I:R}),[]),w=O.useCallback(A=>{if(A){const R=hu(A,l.current);if(typeof R=="boolean")return R;const D=hu(A,r.refValues.current),M=hu(A,r.valuesSnapshot.current);return!VR(D,M)}return Object.keys(l.current).length>0?Xk(l.current):!VR(r.refValues.current,r.valuesSnapshot.current)},[]),E=O.useCallback(()=>l.current,[]),T=O.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:v,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:b,isDirty:w,getDirty:E,getTouched:T,setCalculatedFieldDirty:y}}function b1t({initialValues:e,onValuesChange:t,mode:n}){const r=O.useRef(!1),[i,s]=O.useState(e||{}),o=O.useRef(i),a=O.useRef(i),u=O.useCallback(({values:m,subscribers:y,updateState:v=!0,mergeWithPreviousValues:b=!0})=>{const w=o.current,E=m instanceof Function?m(o.current):m,T=b?{...w,...E}:E;o.current=T,v&&s(T),t==null||t(T,w),y==null||y.filter(Boolean).forEach(A=>A({updatedValues:T,previousValues:w}))},[t]),l=O.useCallback(m=>{var b;const y=hu(m.path,o.current),v=m.value instanceof Function?m.value(y):m.value;if(y!==v){const w=o.current,E=c3(m.path,v,o.current);u({values:E,updateState:m.updateState}),(b=m.subscribers)==null||b.filter(Boolean).forEach(T=>T({path:m.path,updatedValues:E,previousValues:w}))}},[u]),c=O.useCallback(m=>{a.current=m},[]),f=O.useCallback((m,y)=>{r.current||(r.current=!0,u({values:m,updateState:n==="controlled"}),c(m),y())},[u]),d=O.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[u]),h=O.useCallback(()=>o.current,[]),p=O.useCallback(()=>a.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h,getValuesSnapshot:p}}function x1t({$status:e}){const t=O.useRef({}),n=O.useCallback((i,s)=>{O.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=O.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:hu(i,o.previousValues),value:hu(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function jhe(e,t){return e?`${e}-${t.toString()}`:t.toString()}function Uhe(e){const t=sG(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function aG(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=hu(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>aG(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||aG(o,t,a,i)),i},r)}function uG(e,t){return Uhe(typeof e=="function"?e(t):aG(e,t))}function Z4(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=uG(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const _1t="__MANTINE_FORM_INDEX__";function zhe(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]+/g,`.${_1t}`)):!1:!1}function YAe({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=m=>m,enhanceGetInputProps:f,validate:d,onSubmitPreventDefault:h="always",touchTrigger:p="change"}={}){const m=c1t(r),y=b1t({initialValues:n,onValuesChange:l,mode:t}),v=v1t({initialDirty:i,initialTouched:s,$values:y,mode:t}),b=g1t({$values:y,$errors:m,$status:v}),w=x1t({$status:v}),[E,T]=O.useState(0),[A,I]=O.useState({}),[R,D]=O.useState(!1),M=O.useCallback(()=>{y.resetValues(),m.clearErrors(),v.resetDirty(),v.resetTouched(),t==="uncontrolled"&&T(ee=>ee+1)},[]),$=O.useCallback(ee=>{o&&m.clearErrors(),t==="uncontrolled"&&T(ae=>ae+1),Object.keys(w.subscribers.current).forEach(ae=>{const _e=hu(ae,y.refValues.current),pe=hu(ae,ee);_e!==pe&&w.getFieldSubscribers(ae).forEach(Te=>Te({previousValues:ee,updatedValues:y.refValues.current}))})},[o]),U=O.useCallback(ee=>{const ae=y.refValues.current;y.initialize(ee,()=>t==="uncontrolled"&&T(_e=>_e+1)),$(ae)},[$]),F=O.useCallback((ee,ae,_e)=>{const pe=zhe(ee,a),Te=ae instanceof Function?ae(hu(ee,y.refValues.current)):ae;v.setCalculatedFieldDirty(ee,Te),p==="change"&&v.setFieldTouched(ee,!0),!pe&&o&&m.clearFieldError(ee),y.setFieldValue({path:ee,value:ae,updateState:t==="controlled",subscribers:[...w.getFieldSubscribers(ee),pe?Le=>{const ye=Z4(ee,d,Le.updatedValues);ye.hasError?m.setFieldError(ee,ye.error):m.clearFieldError(ee)}:null,(_e==null?void 0:_e.forceUpdate)!==!1&&t!=="controlled"?()=>I(Le=>({...Le,[ee]:(Le[ee]||0)+1})):null]})},[l,d]),H=O.useCallback(ee=>{const ae=y.refValues.current;y.setValues({values:ee,updateState:t==="controlled"}),$(ae)},[l,$]),Q=O.useCallback(()=>{const ee=uG(d,y.refValues.current);return m.setErrors(ee.errors),ee},[d]),J=O.useCallback(ee=>{const ae=Z4(ee,d,y.refValues.current);return ae.hasError?m.setFieldError(ee,ae.error):m.clearFieldError(ee),ae},[d]),ne=(ee,{type:ae="input",withError:_e=!0,withFocus:pe=!0,...Te}={})=>{const ye={onChange:l1t(he=>F(ee,he,{forceUpdate:!1})),"data-path":jhe(e,ee)};return _e&&(ye.error=m.errorsState[ee]),ae==="checkbox"?ye[t==="controlled"?"checked":"defaultChecked"]=hu(ee,y.refValues.current):ye[t==="controlled"?"value":"defaultValue"]=hu(ee,y.refValues.current),pe&&(ye.onFocus=()=>v.setFieldTouched(ee,!0),ye.onBlur=()=>{if(zhe(ee,u)){const he=Z4(ee,d,y.refValues.current);he.hasError?m.setFieldError(ee,he.error):m.clearFieldError(ee)}}),Object.assign(ye,f==null?void 0:f({inputProps:ye,field:ee,options:{type:ae,withError:_e,withFocus:pe,...Te},form:Y}))},Z=(ee,ae)=>_e=>{h==="always"&&(_e==null||_e.preventDefault());const pe=Q();if(pe.hasErrors)h==="validation-failed"&&(_e==null||_e.preventDefault()),ae==null||ae(pe.errors,y.refValues.current,_e);else{const Te=ee==null?void 0:ee(c(y.refValues.current),_e);Te instanceof Promise&&(D(!0),Te.finally(()=>D(!1)))}},ie=ee=>c(ee||y.refValues.current),q=O.useCallback(ee=>{ee.preventDefault(),M()},[]),j=O.useCallback(ee=>ee?!Z4(ee,d,y.refValues.current).hasError:!uG(d,y.refValues.current).hasErrors,[d]),G=ee=>`${E}-${ee}-${A[ee]||0}`,V=O.useCallback(ee=>document.querySelector(`[data-path="${jhe(e,ee)}"]`),[]),Y={watch:w.watch,initialized:y.initialized.current,values:y.stateValues,getValues:y.getValues,setInitialValues:y.setValuesSnapshot,initialize:U,setValues:H,setFieldValue:F,submitting:R,setSubmitting:D,errors:m.errorsState,setErrors:m.setErrors,setFieldError:m.setFieldError,clearFieldError:m.clearFieldError,clearErrors:m.clearErrors,resetDirty:v.resetDirty,setTouched:v.setTouched,setDirty:v.setDirty,isTouched:v.isTouched,resetTouched:v.resetTouched,isDirty:v.isDirty,getTouched:v.getTouched,getDirty:v.getDirty,reorderListItem:b.reorderListItem,insertListItem:b.insertListItem,removeListItem:b.removeListItem,replaceListItem:b.replaceListItem,reset:M,validate:Q,validateField:J,getInputProps:ne,onSubmit:Z,onReset:q,isValid:j,getTransformedValues:ie,key:G,getInputNode:V};return u1t(e,Y),Y}function w1t(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function E1t(e){return w1t(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}function KAe(e,t){if(e.type==="checkbox"){const n=e,r=n.minSelections&&t.length<n.minSelections,i=n.maxSelections&&t.length>n.maxSelections;if(r&&i)return`Please select between ${n.minSelections} and ${n.maxSelections} options`;if(r)return`Please select at least ${n.minSelections} options`;if(i)return`Please select at most ${n.maxSelections} options`}return null}const T1t=new URLSearchParams(window.location.search),S1t=(e,t)=>{let n={};return e.forEach(r=>{const i=t[r.id];if(i)n={...n,[r.id]:i};else{let s="";r.paramCapture?s=T1t.get(r.paramCapture):r.type==="reactive"?s=[]:r.type==="matrix-radio"||r.type==="matrix-checkbox"?s=Object.fromEntries(r.questionOptions.map(a=>[a,""])):r.type==="slider"&&r.startingValue&&(s=r.startingValue.toString());const o=r.withDontKnow?{[`${r.id}-dontKnow`]:""}:{};n={...n,[r.id]:s,...o}}}),{...n}},C1t=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:(r,i)=>{if(typeof r=="object"&&!Array.isArray(r)&&r!==null)return Object.values(r).every(s=>s!=="")?null:"Empty Input";if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value. Contact study administrator.";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const s=[...n.requiredValue].sort(),o=[...r].sort();return s.every((a,u)=>a===o[u])?null:"Incorrect input"}return n.type==="checkbox"?KAe(n,r):r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?(r==null||r==="")&&!i[`${n.id}-dontKnow`]?"Empty input":null:r===null?"Empty input":null}})}),t};function A1t(e,t,n){const[r,i]=O.useState(null),s=YAe({initialValues:S1t(e,n),validate:C1t(e)});return O.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function UE(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:t.checked&&e.required?s=KAe(e,t.checked):s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function XAe({horizontal:e,children:t,style:n}){return e?S.jsx($i,{mt:Ke(4),gap:"lg",style:n,children:t}):S.jsx(mu,{gap:"md",style:n,children:t})}function I1t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u,horizontal:l,withOther:c}=e,f=a.map(w=>typeof w=="string"?{value:w,label:w}:w),[d,h]=O.useState(!1),[p,m]=O.useState(""),{setOtherText:y}=Eu(),v=yl();O.useEffect(()=>{v(y({key:e.id,value:p}))},[p,e.id,y,v]);const b=O.useMemo(()=>UE(e,n,f),[e,n,f]);return S.jsxs(nl.Group,{label:S.jsxs(an,{direction:"row",wrap:"nowrap",gap:4,children:[i&&S.jsx(je,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),S.jsx(je,{style:{display:"block"},className:"no-last-child-bottom-padding",children:S.jsx(ll,{text:s,required:o})})]}),description:u,...n,error:b,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:[S.jsx(je,{mt:"xs",children:S.jsxs(XAe,{horizontal:!!l,style:{flexGrow:1},children:[f.map(w=>S.jsx(nl,{disabled:t,value:w.value,label:w.label},w.value)),c&&S.jsx(nl,{disabled:t,value:"__other",checked:d,onClick:w=>h(w.currentTarget.checked),label:l?"Other":S.jsx(Yi,{mt:-8,placeholder:"Other",disabled:!d,value:p,onChange:w=>m(w.currentTarget.value)})},"__other")]})}),l&&c&&S.jsx(Yi,{mt:"sm",placeholder:"Other",disabled:!d,value:p,onChange:w=>m(w.currentTarget.value),w:216})]})}function k1t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:u,secondaryText:l}=e,c=u.map(f=>typeof f=="string"?{value:f,label:f}:f);return S.jsx(CA,{disabled:t,label:S.jsxs(an,{direction:"row",wrap:"nowrap",gap:4,children:[i&&S.jsx(je,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),S.jsx(je,{style:{display:"block"},className:"no-last-child-bottom-padding",children:S.jsx(ll,{text:o,required:a})})]}),description:l,placeholder:s,data:c,radius:"md",size:"md",...n,error:UE(e,n,c)})}function R1t({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return S.jsx(Yi.Wrapper,{label:S.jsxs(an,{direction:"row",wrap:"nowrap",gap:4,children:[r&&S.jsx(je,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${n}. `}),S.jsx(je,{style:{display:"block"},className:"no-last-child-bottom-padding",children:S.jsx(ll,{text:i,required:s})})]}),description:o,size:"md",children:t.value&&S.jsx(Ap,{children:Array.isArray(t.value)?t.value.map(a=>S.jsx(Ap.Item,{children:a},a)):S.jsx(Ap.Item,{children:t.value})})})}function QAe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i,stretch:s}){const{prompt:o,required:a,options:u,leftLabel:l,rightLabel:c,secondaryText:f,horizontal:d,withOther:h}=e,p=u.map(T=>typeof T=="string"?{value:T,label:T}:T),[m,y]=O.useState(!1),[v,b]=O.useState(""),{setOtherText:w}=Eu(),E=yl();return O.useEffect(()=>{E(w({key:e.id,value:v}))},[v,e.id,w,E]),S.jsxs(v0.Group,{name:`radioInput${e.id}`,label:S.jsxs(an,{direction:"row",wrap:"nowrap",gap:4,children:[i&&S.jsx(je,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),S.jsx(je,{style:{display:"block"},className:"no-last-child-bottom-padding",children:S.jsx(ll,{text:o,required:a})})]}),description:f,...n,error:UE(e,n,p),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:[S.jsxs($i,{gap:"lg",align:"flex-end",mt:d?0:"sm",children:[l?S.jsx(gt,{children:l}):null,S.jsxs(XAe,{horizontal:!!d,style:{flexGrow:1},children:[p.map(T=>S.jsxs("div",{style:{display:"flex",flexDirection:d?"column":"row",gap:d?"unset":Ke(12),flex:s?1:"unset",alignItems:"center"},children:[d&&S.jsx(gt,{size:"sm",children:T.label}),S.jsx(v0,{disabled:t,value:T.value,label:T.label,styles:{label:{display:"none"}},onChange:()=>y(!1)}),!d&&S.jsx(gt,{size:"sm",children:T.label})]},`${T.value}-${e.id}`)),h&&S.jsxs("div",{style:{display:"flex",flexDirection:d?"column":"row",gap:d?"unset":Ke(12),flex:s?1:"unset",alignItems:"center"},children:[d&&S.jsx(gt,{size:"sm",children:"Other"}),S.jsx(v0,{disabled:t,value:"other",checked:m,onClick:T=>y(T.currentTarget.checked),label:!d&&S.jsx(Yi,{mt:-8,placeholder:"Other",disabled:!m,value:v,onChange:T=>b(T.currentTarget.value)}),mt:0})]})]}),S.jsx(gt,{children:c})]}),d&&h&&S.jsx(Yi,{mt:"sm",placeholder:"Other",disabled:!m,value:v,onChange:T=>b(T.currentTarget.value),w:216})]},e.id)}function N1t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let u=1;u<=+s;u+=1)o.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:o,horizontal:!0};return S.jsx(QAe,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i,stretch:!0})}function D1t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:u,placeholder:l,secondaryText:c}=e;return S.jsx(sJ,{disabled:t,placeholder:l,label:S.jsxs(an,{direction:"row",wrap:"nowrap",gap:4,children:[i&&S.jsx(je,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),S.jsx(je,{style:{display:"block"},className:"no-last-child-bottom-padding",children:S.jsx(ll,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:UE(e,n)})}const P1t="_markLabel_18a7j_1",O1t={markLabel:P1t};function M1t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u,snap:l}=e,[c,f]=O.useMemo(()=>[Math.min(...a.map(h=>h.value)),Math.max(...a.map(h=>h.value))],[a]),d=UE(e,n);return S.jsx(Yi.Wrapper,{label:S.jsxs(an,{direction:"row",wrap:"nowrap",gap:4,children:[i&&S.jsx(je,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),S.jsx(je,{style:{display:"block"},className:"no-last-child-bottom-padding",children:S.jsx(ll,{text:s,required:o})})]}),description:u,error:d,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:S.jsx(yB,{disabled:t,marks:a,min:c,max:f,...n,h:40,mt:4,classNames:{markLabel:O1t.markLabel},restrictToMarks:l,label:h=>l?null:h})})}function L1t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return S.jsx(_y,{disabled:t,placeholder:s,label:S.jsxs(an,{direction:"row",wrap:"nowrap",gap:4,children:[i&&S.jsx(je,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),S.jsx(je,{style:{display:"block"},className:"no-last-child-bottom-padding",children:S.jsx(ll,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:UE(e,n)})}function $1t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return S.jsx(WQ,{disabled:t,placeholder:s,label:S.jsxs(an,{direction:"row",wrap:"nowrap",gap:4,children:[i&&S.jsx(je,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),S.jsx(je,{style:{display:"block"},className:"no-last-child-bottom-padding",children:S.jsx(ll,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:UE(e,n)})}function F1t({_choices:e,_n:t,idx:n,question:r,answer:i,onChange:s,disabled:o}){return S.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(a=>S.jsx(nl,{disabled:o,checked:i.value[r.label].split("|").includes(a.value),onChange:u=>s(u,r.label,a),value:a.value},`${a.label}-${n}`))})}function B1t({_choices:e,_n:t,idx:n,question:r,response:i,answer:s,onChange:o,disabled:a}){return S.jsx(v0.Group,{name:`radioInput${i.id}-${n}`,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))",flex:1},onChange:u=>o(u,r.label),value:s.value[r.label],children:S.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(u=>S.jsx(v0,{disabled:a,value:u.value},`${u.label}-${n}`))})},`${i.id}-${n}`)}function j1t({response:e,answer:t,index:n,disabled:r,enumerateQuestions:i}){const{setMatrixAnswersRadio:s,setMatrixAnswersCheckbox:o}=Eu(),a=yl(),{answerOptions:u,questionOptions:l,prompt:c,secondaryText:f,required:d}=e,p=typeof u=="string"?{likely5:["Highly Unlikely","Unlikely","Neutral","Likely","Highly Likely"],likely7:["Highly Unlikely","Unlikely","Slightly Unlikely","Neutral","Slightly Likely","Likely","Highly Likely"],satisfaction5:["Highly Unsatisfied","Unsatisfied","Neutral","Satisfied","Highly Satisfied"],satisfaction7:["Highly Unsatisfied","Unsatisfied","Slightly Unsatisfied","Neutral","Slightly Satisfied","Satisfied","Highly Satisfied"]}[u].map(E=>({value:E,label:E})):u.map(E=>typeof E=="string"?{value:E,label:E}:E),m=l.map(E=>typeof E=="string"?{value:E,label:E}:E),y=(E,T)=>{const A={type:"radio",questionKey:T,val:E,responseId:e.id};a(s(A))},v=(E,T,A)=>{const I=E.target.checked,R={questionKey:T,responseId:e.id,value:A.value,label:A.label,isChecked:I,choiceOptions:p};a(o(R))},b=p.length,w=m.length;return S.jsxs(S.Fragment,{children:[S.jsxs(an,{direction:"row",wrap:"nowrap",gap:4,children:[i&&S.jsx(je,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${n}. `}),S.jsx(je,{style:{display:"block"},className:"no-last-child-bottom-padding",children:S.jsx(ll,{text:c,required:d})})]}),S.jsx(gt,{c:"dimmed",size:"sm",mt:0,children:f}),S.jsxs(je,{style:{display:"grid",gridTemplateColumns:"auto 1fr",gridTemplateRows:"auto 1fr"},m:"md",mt:"xs",children:[S.jsx("div",{style:{borderBottom:"1px solid var(--mantine-color-dark-0)",borderRight:"1px solid var(--mantine-color-dark-0)"}}),S.jsx("div",{style:{height:"100%",display:"grid",gridTemplateColumns:`repeat(${b}, 1fr)`,alignItems:"center",justifyItems:"center",borderBottom:"1px solid var(--mantine-color-dark-0)"},children:p.map((E,T)=>S.jsx(gt,{style:{fontWeight:"bold",textAlign:"center",fontSize:"0.8em"},mb:"sm",ml:"xs",mr:"xs",children:E.label},`choice-${T}-label`))}),S.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${w}, 1fr)`},children:m.map((E,T)=>S.jsx(gt,{style:{height:"80px",width:"100%",display:"flex",alignItems:"center",justifyContent:"end",borderRight:"1px solid var(--mantine-color-dark-0)",backgroundColor:`${(T+1)%2===0?"var(--mantine-color-gray-2)":"white"}`,overflowY:"hidden"},ta:"right",p:"sm",miw:140,children:E.label},`question-${T}-label`))}),S.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${w},1fr)`},children:m.map((E,T)=>S.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",backgroundColor:`${(T+1)%2===0?"var(--mantine-color-gray-2)":"white"}`},children:e.type==="matrix-radio"?S.jsx(B1t,{disabled:r,idx:T,question:E,answer:t,_choices:p,_n:b,onChange:y,response:e}):S.jsx(F1t,{disabled:r,idx:T,question:E,answer:t,_choices:p,_n:b,onChange:v})},`question-${T}`))})]})]})}function U1t({response:e,answer:t,storedAnswer:n,index:r,configInUse:i,form:s}){const o=(Object.keys(n||{}).length>0?{value:n[e.id]}:t)||{value:void 0},a=Object.keys(n||{}).length>0,[u]=E1(),c=n1().uiConfig.enumerateQuestions??!1,f=O.useMemo(()=>{if(e.paramCapture){const p=u.get(e.paramCapture);return a||!!p}return a},[a,e.paramCapture,u]),[d,h]=O.useState(!!(n!=null&&n[`${e.id}-dontKnow`])||!1);return O.useEffect(()=>{s.setFieldValue(`${e.id}-dontKnow`,d.toString()),d||s.setFieldValue(e.id,"false")},[d,e.id]),S.jsxs(je,{mb:e.withDivider||i.responseDividers?"xl":"lg",children:[e.type==="numerical"&&S.jsx(D1t,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="shortText"&&S.jsx(L1t,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="longText"&&S.jsx($1t,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="likert"&&S.jsx(N1t,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="dropdown"&&S.jsx(k1t,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="slider"&&S.jsx(M1t,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="radio"&&S.jsx(QAe,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="checkbox"&&S.jsx(I1t,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="reactive"&&S.jsx(R1t,{response:e,answer:o,index:r,enumerateQuestions:c}),(e.type==="matrix-radio"||e.type==="matrix-checkbox")&&S.jsx(j1t,{disabled:f||d,response:e,answer:o,index:r,enumerateQuestions:c}),e.withDontKnow&&S.jsx(nl,{mt:"xs",disabled:f,label:"I don't know",checked:d,onChange:p=>h(p.currentTarget.checked)}),(e.withDivider||i.responseDividers)&&S.jsx(IE,{mt:"xl",mb:"xs"})]})}function mF({config:e,location:t,status:n,style:r}){var q;const{storageEngine:i}=uo(),s=yl(),{updateResponseBlockValidation:o,toggleShowHelpText:a,saveIncorrectAnswer:u,incrementHelpCounter:l}=Eu(),c=wh(),f=Eh(),d=n==null?void 0:n.answer,h=jE(),p=Xp(),m=e,y=O.useMemo(()=>{var j;return((j=m==null?void 0:m.response)==null?void 0:j.filter(G=>G.location?G.location===t:t==="belowStimulus"))||[]},[m==null?void 0:m.response,t]),v=O.useMemo(()=>y.map(j=>({...j,required:j.required===void 0?!0:j.required})),[y]),b=A1t(v,c,d||{}),[w,E]=O.useState(void 0),T=mi(j=>j.reactiveAnswers),A=mi(j=>j.reactiveProvenance),I=mi(j=>j.matrixAnswers),R=(m==null?void 0:m.provideFeedback)&&(((q=m==null?void 0:m.correctAnswer)==null?void 0:q.length)||0)>0,D=(m==null?void 0:m.allowFailedTraining)===void 0?!0:m.allowFailedTraining,[M,$]=O.useState(0),U=(m==null?void 0:m.trainingAttempts)||2,[F,H]=O.useState(!1),Q=t===((m==null?void 0:m.nextButtonLocation)||"belowStimulus");O.useEffect(()=>{const j=v.find(G=>G.type==="reactive");if(T&&j){const G=j.id;b.setValues({...b.values,[G]:T[G]})}},[T]),O.useEffect(()=>{A&&E(A)},[A]),O.useEffect(()=>{const j=v.filter(G=>G.type==="matrix-radio"||G.type==="matrix-checkbox");if(I&&j.length>0){const G={...b.values};j.forEach(V=>{const{id:Y}=V;G[Y]={...b.getInputProps(Y).value,...I[Y]}}),b.setValues(G)}},[I]),O.useEffect(()=>{s(o({location:t,identifier:`${f}_${c}`,status:b.isValid(),values:$y(b.values),provenanceGraph:w}))},[b.values,f,c,t,s,o,w]);const[J,ne]=O.useState(Object.fromEntries(v.map(j=>[j.id,{visible:!1,title:"Correct Answer",message:"The correct answer is: ",color:"green"}]))),Z=(j,G,V,Y,ee)=>{ne(ae=>({...ae,[j]:{visible:G,title:V,message:Y,color:ee}}))},ie=()=>{const j=M+1;$(j);const G=Object.fromEntries(v.map(V=>{var ae,_e;const Y=(_e=(ae=m.correctAnswer)==null?void 0:ae.find(pe=>pe.id===V.id))==null?void 0:_e.answer,ee=b.values[V.id];return[V.id,Array.isArray(ee)?typeof Y=="string"?ee.length===1&&Y===ee[0]:ee.length===Y.length&&ee.every(pe=>Y.includes(pe)):Y===ee]}));R&&(v.forEach(V=>{var Y;if(G[V.id]&&!((Y=J[V.id])!=null&&Y.message.includes("You've failed to answer this question correctly")))Z(V.id,!0,"Correct Answer","You have answered the question correctly.","green");else{s(u({question:`${f}_${c}`,identifier:V.id,answer:b.values[V.id]}));let ee="";U===-1?ee="Please try again.":j>=U?(ee=`You didn't answer this question correctly after ${U} attempts. ${D?"You can continue to the next question.":"Unfortunately you have not met the criteria for continuing this study."}`,!D&&i&&i.rejectCurrentParticipant(h,"Failed training").then(()=>{setTimeout(()=>{p("./../__trainingFailed")},5e3)}).catch(()=>{console.error("Failed to reject participant who failed training"),setTimeout(()=>{p("./../__trainingFailed")},5e3)})):U-j===1?ee="Please try again. You have 1 attempt left.":ee=`Please try again. You have ${U-j} attempts left.`,Z(V.id,!0,"Incorrect Answer",ee,"red")}}),H(D&&j>=U||Object.values(G).every(V=>V)&&j<=U))};return S.jsxs("div",{style:r,children:[v.map((j,G)=>{var Y,ee;const V=(ee=(Y=m.correctAnswer)==null?void 0:Y.find(ae=>ae.id===j.id))==null?void 0:ee.answer;return S.jsx(li.Fragment,{children:j.hidden?"":S.jsxs(S.Fragment,{children:[S.jsx(U1t,{storedAnswer:d,answer:{...b.getInputProps(j.id,{type:j.type==="checkbox"?"checkbox":"input"})},response:j,index:G+1,configInUse:m,form:b}),J[j.id].visible&&S.jsxs(Py,{mb:"md",title:J[j.id].title,color:J[j.id].color,children:[J[j.id].message," ",J[j.id].message.includes("Please try again")&&S.jsxs(S.Fragment,{children:[S.jsx("br",{}),S.jsx("br",{}),"If you're unsure"," ",S.jsx(AE,{style:{fontSize:14},onClick:()=>{s(a()),s(l({identifier:`${f}_${c}`}))},children:"review the help text."})," "]}),S.jsx("br",{}),S.jsx("br",{}),M>=U&&U>=0&&V&&` The correct answer was: ${V}.`]})]})},`${j.id}-${c}`)}),S.jsxs($i,{justify:"right",gap:"xs",children:[R&&Q&&S.jsx(yn,{onClick:()=>ie(),disabled:!b.isValid()||M>=U&&U>=0,children:"Check Answer"}),Q&&S.jsx(s1t,{disabled:R&&!F||!b.isValid(),label:m.nextButtonText||"Next",configInUse:m})]})]})}const Qk="@REVISIT_COMMS",z1t={minHeight:"500px",width:"100%",border:0};function V1t({currentConfig:e}){const{setreactiveAnswers:t,setreactiveProvenance:n}=Eu(),r=yl(),i=TAe(),s=O.useRef(null),o=O.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=Eh(),u=O.useCallback((l,c)=>{var f,d;(d=(f=s.current)==null?void 0:f.contentWindow)==null||d.postMessage({error:!1,type:`${Qk}/${l}`,iframeId:o,message:c},"*")},[s,o]);return O.useEffect(()=>{const l=c=>{const{data:f}=c;if(typeof f=="object"&&o===f.iframeId)switch(f.type){case`${Qk}/WINDOW_READY`:e.parameters&&u("STUDY_DATA",e.parameters);break;case`${Qk}/READY`:s.current&&(s.current.style.height=`${f.message.documentHeight}px`);break;case`${Qk}/ANSWERS`:r(t(f.message));break;case`${Qk}/PROVENANCE`:r(n(f.message));break}};return window.addEventListener("message",l),()=>window.removeEventListener("message",l)},[r,i,o,e,u,t,n]),S.jsx("iframe",{ref:s,src:e.path.startsWith("http")?e.path:`${Ua}${e.path}?trialid=${a}&id=${o}`,style:z1t})}async function _ee(e){const n=await(await fetch(`${Ua}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}async function H1t(e){const t=await fetch(`${Ua}${e}`);let n;try{n=await t.json()}catch(r){console.error("Invalid JSON:",r)}return n}function Nb({email:e,path:t}){const n=xh();return S.jsxs(Yy,{fluid:!0,my:50,maw:800,mx:"auto",children:[S.jsx(io,{order:2,children:S.jsx(gt,{span:!0,c:"orange",children:"404"})}),S.jsxs(gt,{children:[S.jsx(gt,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),S.jsx(Zf,{h:"lg"}),S.jsxs(Ap,{children:[S.jsx(Ap.Item,{children:S.jsx(gt,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),S.jsx(Ap.Item,{children:S.jsxs(gt,{children:["If you're a participant, please contact the study administrator"," ",e&&S.jsxs(S.Fragment,{children:["at"," ",S.jsxs(AE,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const q1t={maxWidth:"100%"};function W1t({currentConfig:e}){const t={...q1t,...e.style},[n,r]=O.useState(!0),[i,s]=O.useState(!1);return O.useEffect(()=>{async function o(){const a=await _ee(e.path);s(!!a),r(!1)}o()},[e]),n||i?S.jsx(mx,{mx:"auto",src:`${Ua}${e.path}`,style:t}):S.jsx(Nb,{path:e.path})}function Fy(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function G1t(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function WA(e){let t,n,r;e.length!==2?(t=Fy,n=(a,u)=>Fy(e(a),u),r=(a,u)=>e(a)-u):(t=e===Fy||e===G1t?e:Y1t,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function Y1t(){return 0}function JAe(e){return e===null?NaN:+e}function*K1t(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const ZAe=WA(Fy),Db=ZAe.right,X1t=ZAe.left;WA(JAe).center;function Q1t(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function J1t(e,t){const n=Q1t(e,t);return n&&Math.sqrt(n)}function lG(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class ql{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class Vhe extends Map{constructor(t,n=nIe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(cG(this,t))}has(t){return super.has(cG(this,t))}set(t,n){return super.set(eIe(this,t),n)}delete(t){return super.delete(tIe(this,t))}}class gF extends Set{constructor(t,n=nIe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(cG(this,t))}add(t){return super.add(eIe(this,t))}delete(t){return super.delete(tIe(this,t))}}function cG({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function eIe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function tIe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function nIe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Z1t(e,t){return Array.from(t,n=>e[n])}function evt(e=Fy){if(e===Fy)return rIe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function rIe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const tvt=Math.sqrt(50),nvt=Math.sqrt(10),rvt=Math.sqrt(2);function yF(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=tvt?10:s>=nvt?5:s>=rvt?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?yF(e,t,n*2):[a,u,l]}function fG(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?yF(t,e,n):yF(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function dG(e,t,n){return t=+t,e=+e,n=+n,yF(e,t,n)[2]}function Pb(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?dG(t,e,n):dG(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function db(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function hG(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function iIe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?rIe:evt(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));iIe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(Jk(e,n,t),i(e[r],s)>0&&Jk(e,n,r);o<a;){for(Jk(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?Jk(e,n,a):(++a,Jk(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function Jk(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function pG(e,t,n){if(e=Float64Array.from(K1t(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return hG(e);if(t>=1)return db(e);var r,i=(r-1)*t,s=Math.floor(i),o=db(iIe(e,s).subarray(0,s+1)),a=hG(e.subarray(s+1));return o+(a-o)*(i-s)}}function sIe(e,t,n=JAe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function ivt(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function oIe(e,t){return pG(e,.5,t)}function*svt(e){for(const t of e)yield*t}function aIe(e){return Array.from(svt(e))}function Hc(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function uIe(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function ovt(e,...t){e=new gF(e),t=t.map(avt);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function avt(e){return e instanceof gF?e:new gF(e)}function uvt(...e){const t=new gF;for(const n of e)for(const r of n)t.add(r);return t}var lvt={value:()=>{}};function o9(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new VL(n)}function VL(e){this._=e}function cvt(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}VL.prototype=o9.prototype={constructor:VL,on:function(e,t){var n=this._,r=cvt(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=fvt(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=Hhe(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Hhe(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new VL(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function fvt(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Hhe(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=lvt,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var mG="http://www.w3.org/1999/xhtml";const qhe={svg:"http://www.w3.org/2000/svg",xhtml:mG,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function a9(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),qhe.hasOwnProperty(t)?{space:qhe[t],local:e}:e}function dvt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===mG&&t.documentElement.namespaceURI===mG?t.createElement(e):t.createElementNS(n,e)}}function hvt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function lIe(e){var t=a9(e);return(t.local?hvt:dvt)(t)}function pvt(){}function wee(e){return e==null?pvt:function(){return this.querySelector(e)}}function mvt(e){typeof e!="function"&&(e=wee(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new Yl(r,this._parents)}function cIe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function gvt(){return[]}function fIe(e){return e==null?gvt:function(){return this.querySelectorAll(e)}}function yvt(e){return function(){return cIe(e.apply(this,arguments))}}function vvt(e){typeof e=="function"?e=yvt(e):e=fIe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new Yl(r,i)}function dIe(e){return function(){return this.matches(e)}}function hIe(e){return function(t){return t.matches(e)}}var bvt=Array.prototype.find;function xvt(e){return function(){return bvt.call(this.children,e)}}function _vt(){return this.firstElementChild}function wvt(e){return this.select(e==null?_vt:xvt(typeof e=="function"?e:hIe(e)))}var Evt=Array.prototype.filter;function Tvt(){return Array.from(this.children)}function Svt(e){return function(){return Evt.call(this.children,e)}}function Cvt(e){return this.selectAll(e==null?Tvt:Svt(typeof e=="function"?e:hIe(e)))}function Avt(e){typeof e!="function"&&(e=dIe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Yl(r,this._parents)}function pIe(e){return new Array(e.length)}function Ivt(){return new Yl(this._enter||this._groups.map(pIe),this._parents)}function vF(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}vF.prototype={constructor:vF,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function kvt(e){return function(){return e}}function Rvt(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new vF(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function Nvt(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new vF(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function Dvt(e){return e.__data__}function Pvt(e,t){if(!arguments.length)return Array.from(this,Dvt);var n=t?Nvt:Rvt,r=this._parents,i=this._groups;typeof e!="function"&&(e=kvt(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=Ovt(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),y=o[l]=new Array(p),v=u[l]=new Array(d);n(c,f,m,y,v,h,t);for(var b=0,w=0,E,T;b<p;++b)if(E=m[b]){for(b>=w&&(w=b+1);!(T=y[w])&&++w<p;);E._next=T||null}}return o=new Yl(o,r),o._enter=a,o._exit=u,o}function Ovt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Mvt(){return new Yl(this._exit||this._groups.map(pIe),this._parents)}function Lvt(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function $vt(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new Yl(a,this._parents)}function Fvt(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Bvt(e){e||(e=jvt);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new Yl(i,this._parents).order()}function jvt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Uvt(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function zvt(){return Array.from(this)}function Vvt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function Hvt(){let e=0;for(const t of this)++e;return e}function qvt(){return!this.node()}function Wvt(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function Gvt(e){return function(){this.removeAttribute(e)}}function Yvt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Kvt(e,t){return function(){this.setAttribute(e,t)}}function Xvt(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Qvt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Jvt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Zvt(e,t){var n=a9(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Yvt:Gvt:typeof t=="function"?n.local?Jvt:Qvt:n.local?Xvt:Kvt)(n,t))}function mIe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ebt(e){return function(){this.style.removeProperty(e)}}function tbt(e,t,n){return function(){this.style.setProperty(e,t,n)}}function nbt(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function rbt(e,t,n){return arguments.length>1?this.each((t==null?ebt:typeof t=="function"?nbt:tbt)(e,t,n??"")):yC(this.node(),e)}function yC(e,t){return e.style.getPropertyValue(t)||mIe(e).getComputedStyle(e,null).getPropertyValue(t)}function ibt(e){return function(){delete this[e]}}function sbt(e,t){return function(){this[e]=t}}function obt(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function abt(e,t){return arguments.length>1?this.each((t==null?ibt:typeof t=="function"?obt:sbt)(e,t)):this.node()[e]}function gIe(e){return e.trim().split(/^|\s+/)}function Eee(e){return e.classList||new yIe(e)}function yIe(e){this._node=e,this._names=gIe(e.getAttribute("class")||"")}yIe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function vIe(e,t){for(var n=Eee(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function bIe(e,t){for(var n=Eee(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function ubt(e){return function(){vIe(this,e)}}function lbt(e){return function(){bIe(this,e)}}function cbt(e,t){return function(){(t.apply(this,arguments)?vIe:bIe)(this,e)}}function fbt(e,t){var n=gIe(e+"");if(arguments.length<2){for(var r=Eee(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?cbt:t?ubt:lbt)(n,t))}function dbt(){this.textContent=""}function hbt(e){return function(){this.textContent=e}}function pbt(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function mbt(e){return arguments.length?this.each(e==null?dbt:(typeof e=="function"?pbt:hbt)(e)):this.node().textContent}function gbt(){this.innerHTML=""}function ybt(e){return function(){this.innerHTML=e}}function vbt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function bbt(e){return arguments.length?this.each(e==null?gbt:(typeof e=="function"?vbt:ybt)(e)):this.node().innerHTML}function xbt(){this.nextSibling&&this.parentNode.appendChild(this)}function _bt(){return this.each(xbt)}function wbt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ebt(){return this.each(wbt)}function Tbt(e){var t=typeof e=="function"?e:lIe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Sbt(){return null}function Cbt(e,t){var n=typeof e=="function"?e:lIe(e),r=t==null?Sbt:typeof t=="function"?t:wee(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Abt(){var e=this.parentNode;e&&e.removeChild(this)}function Ibt(){return this.each(Abt)}function kbt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Rbt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Nbt(e){return this.select(e?Rbt:kbt)}function Dbt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Pbt(e){return function(t){e.call(this,t,this.__data__)}}function Obt(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Mbt(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Lbt(e,t,n){return function(){var r=this.__on,i,s=Pbt(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function $bt(e,t,n){var r=Obt(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?Lbt:Mbt,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function xIe(e,t,n){var r=mIe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Fbt(e,t){return function(){return xIe(this,e,t)}}function Bbt(e,t){return function(){return xIe(this,e,t.apply(this,arguments))}}function jbt(e,t){return this.each((typeof t=="function"?Bbt:Fbt)(e,t))}function*Ubt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var Tee=[null];function Yl(e,t){this._groups=e,this._parents=t}function f3(){return new Yl([[document.documentElement]],Tee)}function zbt(){return this}Yl.prototype=f3.prototype={constructor:Yl,select:mvt,selectAll:vvt,selectChild:wvt,selectChildren:Cvt,filter:Avt,data:Pvt,enter:Ivt,exit:Mvt,join:Lvt,merge:$vt,selection:zbt,order:Fvt,sort:Bvt,call:Uvt,nodes:zvt,node:Vvt,size:Hvt,empty:qvt,each:Wvt,attr:Zvt,style:rbt,property:abt,classed:fbt,text:mbt,html:bbt,raise:_bt,lower:Ebt,append:Tbt,insert:Cbt,remove:Ibt,clone:Nbt,datum:Dbt,on:$bt,dispatch:jbt,[Symbol.iterator]:Ubt};function Vo(e){return typeof e=="string"?new Yl([[document.querySelector(e)]],[document.documentElement]):new Yl([[e]],Tee)}function Vbt(e){let t;for(;t=e.sourceEvent;)e=t;return e}function gG(e,t){if(e=Vbt(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function Hbt(e){return typeof e=="string"?new Yl([document.querySelectorAll(e)],[document.documentElement]):new Yl([cIe(e)],Tee)}const yG={capture:!0,passive:!1};function vG(e){e.preventDefault(),e.stopImmediatePropagation()}function qbt(e){var t=e.document.documentElement,n=Vo(e).on("dragstart.drag",vG,yG);"onselectstart"in t?n.on("selectstart.drag",vG,yG):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Wbt(e,t){var n=e.document.documentElement,r=Vo(e).on("dragstart.drag",null);t&&(r.on("click.drag",vG,yG),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function GA(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function d3(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function _x(){}var Yw=.7,vC=1/Yw,M2="\\s*([+-]?\\d+)\\s*",PD="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",w0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Gbt=/^#([0-9a-f]{3,8})$/,Ybt=new RegExp(`^rgb\\(${M2},${M2},${M2}\\)$`),Kbt=new RegExp(`^rgb\\(${w0},${w0},${w0}\\)$`),Xbt=new RegExp(`^rgba\\(${M2},${M2},${M2},${PD}\\)$`),Qbt=new RegExp(`^rgba\\(${w0},${w0},${w0},${PD}\\)$`),Jbt=new RegExp(`^hsl\\(${PD},${w0},${w0}\\)$`),Zbt=new RegExp(`^hsla\\(${PD},${w0},${w0},${PD}\\)$`),Whe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};GA(_x,Kw,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ghe,formatHex:Ghe,formatHex8:ext,formatHsl:txt,formatRgb:Yhe,toString:Yhe});function Ghe(){return this.rgb().formatHex()}function ext(){return this.rgb().formatHex8()}function txt(){return _Ie(this).formatHsl()}function Yhe(){return this.rgb().formatRgb()}function Kw(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Gbt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Khe(t):n===3?new Oa(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?e6(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?e6(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Ybt.exec(e))?new Oa(t[1],t[2],t[3],1):(t=Kbt.exec(e))?new Oa(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Xbt.exec(e))?e6(t[1],t[2],t[3],t[4]):(t=Qbt.exec(e))?e6(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Jbt.exec(e))?Jhe(t[1],t[2]/100,t[3]/100,1):(t=Zbt.exec(e))?Jhe(t[1],t[2]/100,t[3]/100,t[4]):Whe.hasOwnProperty(e)?Khe(Whe[e]):e==="transparent"?new Oa(NaN,NaN,NaN,0):null}function Khe(e){return new Oa(e>>16&255,e>>8&255,e&255,1)}function e6(e,t,n,r){return r<=0&&(e=t=n=NaN),new Oa(e,t,n,r)}function See(e){return e instanceof _x||(e=Kw(e)),e?(e=e.rgb(),new Oa(e.r,e.g,e.b,e.opacity)):new Oa}function Ob(e,t,n,r){return arguments.length===1?See(e):new Oa(e,t,n,r??1)}function Oa(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}GA(Oa,Ob,d3(_x,{brighter(e){return e=e==null?vC:Math.pow(vC,e),new Oa(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Yw:Math.pow(Yw,e),new Oa(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Oa(Dw(this.r),Dw(this.g),Dw(this.b),bF(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Xhe,formatHex:Xhe,formatHex8:nxt,formatRgb:Qhe,toString:Qhe}));function Xhe(){return`#${yw(this.r)}${yw(this.g)}${yw(this.b)}`}function nxt(){return`#${yw(this.r)}${yw(this.g)}${yw(this.b)}${yw((isNaN(this.opacity)?1:this.opacity)*255)}`}function Qhe(){const e=bF(this.opacity);return`${e===1?"rgb(":"rgba("}${Dw(this.r)}, ${Dw(this.g)}, ${Dw(this.b)}${e===1?")":`, ${e})`}`}function bF(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Dw(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function yw(e){return e=Dw(e),(e<16?"0":"")+e.toString(16)}function Jhe(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new mp(e,t,n,r)}function _Ie(e){if(e instanceof mp)return new mp(e.h,e.s,e.l,e.opacity);if(e instanceof _x||(e=Kw(e)),!e)return new mp;if(e instanceof mp)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new mp(o,a,u,e.opacity)}function xF(e,t,n,r){return arguments.length===1?_Ie(e):new mp(e,t,n,r??1)}function mp(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}GA(mp,xF,d3(_x,{brighter(e){return e=e==null?vC:Math.pow(vC,e),new mp(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Yw:Math.pow(Yw,e),new mp(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Oa(oV(e>=240?e-240:e+120,i,r),oV(e,i,r),oV(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new mp(Zhe(this.h),t6(this.s),t6(this.l),bF(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=bF(this.opacity);return`${e===1?"hsl(":"hsla("}${Zhe(this.h)}, ${t6(this.s)*100}%, ${t6(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Zhe(e){return e=(e||0)%360,e<0?e+360:e}function t6(e){return Math.max(0,Math.min(1,e||0))}function oV(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const wIe=Math.PI/180,EIe=180/Math.PI,_F=18,TIe=.96422,SIe=1,CIe=.82521,AIe=4/29,L2=6/29,IIe=3*L2*L2,rxt=L2*L2*L2;function kIe(e){if(e instanceof E0)return new E0(e.l,e.a,e.b,e.opacity);if(e instanceof Sy)return RIe(e);e instanceof Oa||(e=See(e));var t=cV(e.r),n=cV(e.g),r=cV(e.b),i=aV((.2225045*t+.7168786*n+.0606169*r)/SIe),s,o;return t===n&&n===r?s=o=i:(s=aV((.4360747*t+.3850649*n+.1430804*r)/TIe),o=aV((.0139322*t+.0971045*n+.7141733*r)/CIe)),new E0(116*i-16,500*(s-i),200*(i-o),e.opacity)}function wF(e,t,n,r){return arguments.length===1?kIe(e):new E0(e,t,n,r??1)}function E0(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}GA(E0,wF,d3(_x,{brighter(e){return new E0(this.l+_F*(e??1),this.a,this.b,this.opacity)},darker(e){return new E0(this.l-_F*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=TIe*uV(t),e=SIe*uV(e),n=CIe*uV(n),new Oa(lV(3.1338561*t-1.6168667*e-.4906146*n),lV(-.9787684*t+1.9161415*e+.033454*n),lV(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function aV(e){return e>rxt?Math.pow(e,1/3):e/IIe+AIe}function uV(e){return e>L2?e*e*e:IIe*(e-AIe)}function lV(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function cV(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function ixt(e){if(e instanceof Sy)return new Sy(e.h,e.c,e.l,e.opacity);if(e instanceof E0||(e=kIe(e)),e.a===0&&e.b===0)return new Sy(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*EIe;return new Sy(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function EF(e,t,n,r){return arguments.length===1?ixt(e):new Sy(e,t,n,r??1)}function Sy(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function RIe(e){if(isNaN(e.h))return new E0(e.l,0,0,e.opacity);var t=e.h*wIe;return new E0(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}GA(Sy,EF,d3(_x,{brighter(e){return new Sy(this.h,this.c,this.l+_F*(e??1),this.opacity)},darker(e){return new Sy(this.h,this.c,this.l-_F*(e??1),this.opacity)},rgb(){return RIe(this).rgb()}}));var NIe=-.14861,Cee=1.78277,Aee=-.29227,u9=-.90649,OD=1.97294,epe=OD*u9,tpe=OD*Cee,npe=Cee*Aee-u9*NIe;function sxt(e){if(e instanceof Pw)return new Pw(e.h,e.s,e.l,e.opacity);e instanceof Oa||(e=See(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(npe*r+epe*t-tpe*n)/(npe+epe-tpe),s=r-i,o=(OD*(n-i)-Aee*s)/u9,a=Math.sqrt(o*o+s*s)/(OD*i*(1-i)),u=a?Math.atan2(o,s)*EIe-120:NaN;return new Pw(u<0?u+360:u,a,i,e.opacity)}function bG(e,t,n,r){return arguments.length===1?sxt(e):new Pw(e,t,n,r??1)}function Pw(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}GA(Pw,bG,d3(_x,{brighter(e){return e=e==null?vC:Math.pow(vC,e),new Pw(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Yw:Math.pow(Yw,e),new Pw(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*wIe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Oa(255*(t+n*(NIe*r+Cee*i)),255*(t+n*(Aee*r+u9*i)),255*(t+n*(OD*r)),this.opacity)}}));function DIe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function PIe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return DIe((n-r/t)*t,o,i,s,a)}}function OIe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return DIe((n-r/t)*t,i,s,o,a)}}const l9=e=>()=>e;function MIe(e,t){return function(n){return e+n*t}}function oxt(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function c9(e,t){var n=t-e;return n?MIe(e,n>180||n<-180?n-360*Math.round(n/360):n):l9(isNaN(e)?t:e)}function axt(e){return(e=+e)==1?Ma:function(t,n){return n-t?oxt(t,n,e):l9(isNaN(t)?n:t)}}function Ma(e,t){var n=t-e;return n?MIe(e,n):l9(isNaN(e)?t:e)}const MD=function e(t){var n=axt(t);function r(i,s){var o=n((i=Ob(i)).r,(s=Ob(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=Ma(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function LIe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=Ob(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var uxt=LIe(PIe),lxt=LIe(OIe);function Iee(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function $Ie(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function cxt(e,t){return($Ie(t)?Iee:FIe)(e,t)}function FIe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=T1(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function BIe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Wd(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function jIe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=T1(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var xG=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fV=new RegExp(xG.source,"g");function fxt(e){return function(){return e}}function dxt(e){return function(t){return e(t)+""}}function kee(e,t){var n=xG.lastIndex=fV.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=xG.exec(e))&&(i=fV.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:Wd(r,i)})),n=fV.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?dxt(u[0].x):fxt(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function T1(e,t){var n=typeof t,r;return t==null||n==="boolean"?l9(t):(n==="number"?Wd:n==="string"?(r=Kw(t))?(t=r,MD):kee:t instanceof Kw?MD:t instanceof Date?BIe:$Ie(t)?Iee:Array.isArray(t)?FIe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?jIe:Wd)(e,t)}function hxt(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function pxt(e,t){var n=c9(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function h3(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var rpe=180/Math.PI,_G={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function UIe(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*rpe,skewX:Math.atan(u)*rpe,scaleX:o,scaleY:a}}var n6;function mxt(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?_G:UIe(t.a,t.b,t.c,t.d,t.e,t.f)}function gxt(e){return e==null||(n6||(n6=document.createElementNS("http://www.w3.org/2000/svg","g")),n6.setAttribute("transform",e),!(e=n6.transform.baseVal.consolidate()))?_G:(e=e.matrix,UIe(e.a,e.b,e.c,e.d,e.e,e.f))}function zIe(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:Wd(l,f)},{i:m-2,x:Wd(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Wd(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Wd(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:Wd(l,f)},{i:m-2,x:Wd(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,y;++p<m;)f[(y=d[p]).i]=y.x(h);return f.join("")}}}var VIe=zIe(mxt,"px, ","px)","deg)"),HIe=zIe(gxt,", ",")",")"),yxt=1e-12;function ipe(e){return((e=Math.exp(e))+1/e)/2}function vxt(e){return((e=Math.exp(e))-1/e)/2}function bxt(e){return((e=Math.exp(2*e))-1)/(e+1)}const xxt=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,y,v;if(m<yxt)v=Math.log(d/l)/t,y=function(I){return[a+I*h,u+I*p,l*Math.exp(t*I*v)]};else{var b=Math.sqrt(m),w=(d*d-l*l+r*m)/(2*l*n*b),E=(d*d-l*l-r*m)/(2*d*n*b),T=Math.log(Math.sqrt(w*w+1)-w),A=Math.log(Math.sqrt(E*E+1)-E);v=(A-T)/t,y=function(I){var R=I*v,D=ipe(T),M=l/(n*b)*(D*bxt(t*R+T)-vxt(T));return[a+M*h,u+M*p,l*D/ipe(t*R+T)]}}return y.duration=v*1e3*t/Math.SQRT2,y}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function qIe(e){return function(t,n){var r=e((t=xF(t)).h,(n=xF(n)).h),i=Ma(t.s,n.s),s=Ma(t.l,n.l),o=Ma(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const _xt=qIe(c9);var wxt=qIe(Ma);function Ext(e,t){var n=Ma((e=wF(e)).l,(t=wF(t)).l),r=Ma(e.a,t.a),i=Ma(e.b,t.b),s=Ma(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function WIe(e){return function(t,n){var r=e((t=EF(t)).h,(n=EF(n)).h),i=Ma(t.c,n.c),s=Ma(t.l,n.l),o=Ma(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const Txt=WIe(c9);var Sxt=WIe(Ma);function GIe(e){return function t(n){n=+n;function r(i,s){var o=e((i=bG(i)).h,(s=bG(s)).h),a=Ma(i.s,s.s),u=Ma(i.l,s.l),l=Ma(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const Cxt=GIe(c9);var Axt=GIe(Ma);function Ree(e,t){t===void 0&&(t=e,e=T1);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function Ixt(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const kxt=Object.freeze(Object.defineProperty({__proto__:null,interpolate:T1,interpolateArray:cxt,interpolateBasis:PIe,interpolateBasisClosed:OIe,interpolateCubehelix:Cxt,interpolateCubehelixLong:Axt,interpolateDate:BIe,interpolateDiscrete:hxt,interpolateHcl:Txt,interpolateHclLong:Sxt,interpolateHsl:_xt,interpolateHslLong:wxt,interpolateHue:pxt,interpolateLab:Ext,interpolateNumber:Wd,interpolateNumberArray:Iee,interpolateObject:jIe,interpolateRgb:MD,interpolateRgbBasis:uxt,interpolateRgbBasisClosed:lxt,interpolateRound:h3,interpolateString:kee,interpolateTransformCss:VIe,interpolateTransformSvg:HIe,interpolateZoom:xxt,piecewise:Ree,quantize:Ixt},Symbol.toStringTag,{value:"Module"}));var bC=0,HR=0,Zk=0,YIe=1e3,TF,qR,SF=0,Xw=0,f9=0,LD=typeof performance=="object"&&performance.now?performance:Date,KIe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function d9(){return Xw||(KIe(Rxt),Xw=LD.now()+f9)}function Rxt(){Xw=0}function $D(){this._call=this._time=this._next=null}$D.prototype=Nee.prototype={constructor:$D,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?d9():+n)+(t==null?0:+t),!this._next&&qR!==this&&(qR?qR._next=this:TF=this,qR=this),this._call=e,this._time=n,wG()},stop:function(){this._call&&(this._call=null,this._time=1/0,wG())}};function Nee(e,t,n){var r=new $D;return r.restart(e,t,n),r}function Nxt(){d9(),++bC;for(var e=TF,t;e;)(t=Xw-e._time)>=0&&e._call.call(void 0,t),e=e._next;--bC}function spe(){Xw=(SF=LD.now())+f9,bC=HR=0;try{Nxt()}finally{bC=0,Pxt(),Xw=0}}function Dxt(){var e=LD.now(),t=e-SF;t>YIe&&(f9-=t,SF=e)}function Pxt(){for(var e,t=TF,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:TF=n);qR=e,wG(r)}function wG(e){if(!bC){HR&&(HR=clearTimeout(HR));var t=e-Xw;t>24?(e<1/0&&(HR=setTimeout(spe,e-LD.now()-f9)),Zk&&(Zk=clearInterval(Zk))):(Zk||(SF=LD.now(),Zk=setInterval(Dxt,YIe)),bC=1,KIe(spe))}}function ope(e,t,n){var r=new $D;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function Oxt(e,t,n){var r=new $D,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?d9():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var Mxt=o9("start","end","cancel","interrupt"),Lxt=[],XIe=0,ape=1,EG=2,HL=3,upe=4,TG=5,qL=6;function h9(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;$xt(e,n,{name:t,index:r,group:i,on:Mxt,tween:Lxt,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:XIe})}function Dee(e,t){var n=Jp(e,t);if(n.state>XIe)throw new Error("too late; already scheduled");return n}function sg(e,t){var n=Jp(e,t);if(n.state>HL)throw new Error("too late; already running");return n}function Jp(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function $xt(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Nee(s,0,n.time);function s(l){n.state=ape,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==ape)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===HL)return ope(o);h.state===upe?(h.state=qL,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=qL,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(ope(function(){n.state===HL&&(n.state=upe,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=EG,n.on.call("start",e,e.__data__,n.index,n.group),n.state===EG){for(n.state=HL,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=TG,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===TG&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=qL,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function SG(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>EG&&r.state<TG,r.state=qL,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function Fxt(e){return this.each(function(){SG(this,e)})}function Bxt(e,t){var n,r;return function(){var i=sg(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function jxt(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=sg(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function Uxt(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Jp(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?Bxt:jxt)(n,e,t))}function Pee(e,t,n){var r=e._id;return e.each(function(){var i=sg(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Jp(i,r).value[t]}}function QIe(e,t){var n;return(typeof t=="number"?Wd:t instanceof Kw?MD:(n=Kw(t))?(t=n,MD):kee)(e,t)}function zxt(e){return function(){this.removeAttribute(e)}}function Vxt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Hxt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function qxt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function Wxt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function Gxt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function Yxt(e,t){var n=a9(e),r=n==="transform"?HIe:QIe;return this.attrTween(e,typeof t=="function"?(n.local?Gxt:Wxt)(n,r,Pee(this,"attr."+e,t)):t==null?(n.local?Vxt:zxt)(n):(n.local?qxt:Hxt)(n,r,t))}function Kxt(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Xxt(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Qxt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Xxt(e,s)),n}return i._value=t,i}function Jxt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Kxt(e,s)),n}return i._value=t,i}function Zxt(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=a9(e);return this.tween(n,(r.local?Qxt:Jxt)(r,t))}function e_t(e,t){return function(){Dee(this,e).delay=+t.apply(this,arguments)}}function t_t(e,t){return t=+t,function(){Dee(this,e).delay=t}}function n_t(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?e_t:t_t)(t,e)):Jp(this.node(),t).delay}function r_t(e,t){return function(){sg(this,e).duration=+t.apply(this,arguments)}}function i_t(e,t){return t=+t,function(){sg(this,e).duration=t}}function s_t(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?r_t:i_t)(t,e)):Jp(this.node(),t).duration}function o_t(e,t){if(typeof t!="function")throw new Error;return function(){sg(this,e).ease=t}}function a_t(e){var t=this._id;return arguments.length?this.each(o_t(t,e)):Jp(this.node(),t).ease}function u_t(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;sg(this,e).ease=n}}function l_t(e){if(typeof e!="function")throw new Error;return this.each(u_t(this._id,e))}function c_t(e){typeof e!="function"&&(e=dIe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new r1(r,this._parents,this._name,this._id)}function f_t(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new r1(o,this._parents,this._name,this._id)}function d_t(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function h_t(e,t,n){var r,i,s=d_t(t)?Dee:sg;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function p_t(e,t){var n=this._id;return arguments.length<2?Jp(this.node(),n).on.on(e):this.each(h_t(n,e,t))}function m_t(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function g_t(){return this.on("end.remove",m_t(this._id))}function y_t(e){var t=this._name,n=this._id;typeof e!="function"&&(e=wee(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,h9(l[d],t,n,d,l,Jp(c,n)));return new r1(s,this._parents,t,n)}function v_t(e){var t=this._name,n=this._id;typeof e!="function"&&(e=fIe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=Jp(c,n),m=0,y=d.length;m<y;++m)(h=d[m])&&h9(h,t,n,m,d,p);s.push(d),o.push(c)}return new r1(s,o,t,n)}var b_t=f3.prototype.constructor;function x_t(){return new b_t(this._groups,this._parents)}function __t(e,t){var n,r,i;return function(){var s=yC(this,e),o=(this.style.removeProperty(e),yC(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function JIe(e){return function(){this.style.removeProperty(e)}}function w_t(e,t,n){var r,i=n+"",s;return function(){var o=yC(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function E_t(e,t,n){var r,i,s;return function(){var o=yC(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),yC(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function T_t(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=sg(this,e),l=u.on,c=u.value[s]==null?a||(a=JIe(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function S_t(e,t,n){var r=(e+="")=="transform"?VIe:QIe;return t==null?this.styleTween(e,__t(e,r)).on("end.style."+e,JIe(e)):typeof t=="function"?this.styleTween(e,E_t(e,r,Pee(this,"style."+e,t))).each(T_t(this._id,e)):this.styleTween(e,w_t(e,r,t),n).on("end.style."+e,null)}function C_t(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function A_t(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&C_t(e,o,n)),r}return s._value=t,s}function I_t(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,A_t(e,t,n??""))}function k_t(e){return function(){this.textContent=e}}function R_t(e){return function(){var t=e(this);this.textContent=t??""}}function N_t(e){return this.tween("text",typeof e=="function"?R_t(Pee(this,"text",e)):k_t(e==null?"":e+""))}function D_t(e){return function(t){this.textContent=e.call(this,t)}}function P_t(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&D_t(i)),t}return r._value=e,r}function O_t(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,P_t(e))}function M_t(){for(var e=this._name,t=this._id,n=ZIe(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=Jp(u,t);h9(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new r1(r,this._parents,e,n)}function L_t(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=sg(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var $_t=0;function r1(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function ZIe(){return++$_t}var Kg=f3.prototype;r1.prototype={constructor:r1,select:y_t,selectAll:v_t,selectChild:Kg.selectChild,selectChildren:Kg.selectChildren,filter:c_t,merge:f_t,selection:x_t,transition:M_t,call:Kg.call,nodes:Kg.nodes,node:Kg.node,size:Kg.size,empty:Kg.empty,each:Kg.each,on:p_t,attr:Yxt,attrTween:Zxt,style:S_t,styleTween:I_t,text:N_t,textTween:O_t,remove:g_t,tween:Uxt,delay:n_t,duration:s_t,ease:a_t,easeVarying:l_t,end:L_t,[Symbol.iterator]:Kg[Symbol.iterator]};const F_t=e=>+e;function B_t(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var j_t={time:null,delay:0,duration:250,ease:B_t};function U_t(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function z_t(e){var t,n;e instanceof r1?(t=e._id,e=e._name):(t=ZIe(),(n=j_t).time=d9(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&h9(u,e,t,l,o,n||U_t(u,t));return new r1(r,this._parents,e,t)}f3.prototype.interrupt=Fxt;f3.prototype.transition=z_t;const dV=e=>()=>e;function V_t(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function H_t(e){e.stopImmediatePropagation()}function hV(e){e.preventDefault(),e.stopImmediatePropagation()}var lpe={name:"drag"},pV={name:"space"},NS={name:"handle"},DS={name:"center"};const{abs:cpe,max:Uu,min:zu}=Math;function fpe(e){return[+e[0],+e[1]]}function CG(e){return[fpe(e[0]),fpe(e[1])]}var WL={name:"x",handles:["w","e"].map(FD),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},GL={name:"y",handles:["n","s"].map(FD),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},q_t={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(FD),input:function(e){return e==null?null:CG(e)},output:function(e){return e}},Xg={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},dpe={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},hpe={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},W_t={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},G_t={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function FD(e){return{type:e}}function Y_t(e){return!e.ctrlKey&&!e.button}function K_t(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function X_t(){return navigator.maxTouchPoints||"ontouchstart"in this}function mV(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function Q_t(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function J_t(){return Oee(WL)}function Z_t(){return Oee(GL)}function ewt(){return Oee(q_t)}function Oee(e){var t=K_t,n=Y_t,r=X_t,i=!0,s=o9("start","brush","end"),o=6,a;function u(y){var v=y.property("__brush",m).selectAll(".overlay").data([FD("overlay")]);v.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Xg.overlay).merge(v).each(function(){var w=mV(this).extent;Vo(this).attr("x",w[0][0]).attr("y",w[0][1]).attr("width",w[1][0]-w[0][0]).attr("height",w[1][1]-w[0][1])}),y.selectAll(".selection").data([FD("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Xg.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var b=y.selectAll(".handle").data(e.handles,function(w){return w.type});b.exit().remove(),b.enter().append("rect").attr("class",function(w){return"handle handle--"+w.type}).attr("cursor",function(w){return Xg[w.type]}),y.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(y,v,b){y.tween?y.on("start.brush",function(w){c(this,arguments).beforestart().start(w)}).on("interrupt.brush end.brush",function(w){c(this,arguments).end(w)}).tween("brush",function(){var w=this,E=w.__brush,T=c(w,arguments),A=E.selection,I=e.input(typeof v=="function"?v.apply(this,arguments):v,E.extent),R=T1(A,I);function D(M){E.selection=M===1&&I===null?null:R(M),l.call(w),T.brush()}return A!==null&&I!==null?D:D(1)}):y.each(function(){var w=this,E=arguments,T=w.__brush,A=e.input(typeof v=="function"?v.apply(w,E):v,T.extent),I=c(w,E).beforestart();SG(w),T.selection=A===null?null:A,l.call(w),I.start(b).brush(b).end(b)})},u.clear=function(y,v){u.move(y,null,v)};function l(){var y=Vo(this),v=mV(this).selection;v?(y.selectAll(".selection").style("display",null).attr("x",v[0][0]).attr("y",v[0][1]).attr("width",v[1][0]-v[0][0]).attr("height",v[1][1]-v[0][1]),y.selectAll(".handle").style("display",null).attr("x",function(b){return b.type[b.type.length-1]==="e"?v[1][0]-o/2:v[0][0]-o/2}).attr("y",function(b){return b.type[0]==="s"?v[1][1]-o/2:v[0][1]-o/2}).attr("width",function(b){return b.type==="n"||b.type==="s"?v[1][0]-v[0][0]+o:o}).attr("height",function(b){return b.type==="e"||b.type==="w"?v[1][1]-v[0][1]+o:o})):y.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(y,v,b){var w=y.__brush.emitter;return w&&(!b||!w.clean)?w:new f(y,v,b)}function f(y,v,b){this.that=y,this.args=v,this.state=y.__brush,this.active=0,this.clean=b}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(y,v){return this.starting?(this.starting=!1,this.emit("start",y,v)):this.emit("brush",y),this},brush:function(y,v){return this.emit("brush",y,v),this},end:function(y,v){return--this.active===0&&(delete this.state.emitter,this.emit("end",y,v)),this},emit:function(y,v,b){var w=Vo(this.that).datum();s.call(y,this.that,new V_t(y,{sourceEvent:v,target:u,selection:e.output(this.state.selection),mode:b,dispatch:s}),w)}};function d(y){if(a&&!y.touches||!n.apply(this,arguments))return;var v=this,b=y.target.__data__.type,w=(i&&y.metaKey?b="overlay":b)==="selection"?lpe:i&&y.altKey?DS:NS,E=e===GL?null:W_t[b],T=e===WL?null:G_t[b],A=mV(v),I=A.extent,R=A.selection,D=I[0][0],M,$,U=I[0][1],F,H,Q=I[1][0],J,ne,Z=I[1][1],ie,q,j=0,G=0,V,Y=E&&T&&i&&y.shiftKey,ee,ae,_e=Array.from(y.touches||[y],Me=>{const Ge=Me.identifier;return Me=gG(Me,v),Me.point0=Me.slice(),Me.identifier=Ge,Me});SG(v);var pe=c(v,arguments,!0).beforestart();if(b==="overlay"){R&&(V=!0);const Me=[_e[0],_e[1]||_e[0]];A.selection=R=[[M=e===GL?D:zu(Me[0][0],Me[1][0]),F=e===WL?U:zu(Me[0][1],Me[1][1])],[J=e===GL?Q:Uu(Me[0][0],Me[1][0]),ie=e===WL?Z:Uu(Me[0][1],Me[1][1])]],_e.length>1&&$e(y)}else M=R[0][0],F=R[0][1],J=R[1][0],ie=R[1][1];$=M,H=F,ne=J,q=ie;var Te=Vo(v).attr("pointer-events","none"),Le=Te.selectAll(".overlay").attr("cursor",Xg[b]);if(y.touches)pe.moved=he,pe.ended=Ne;else{var ye=Vo(y.view).on("mousemove.brush",he,!0).on("mouseup.brush",Ne,!0);i&&ye.on("keydown.brush",tt,!0).on("keyup.brush",it,!0),qbt(y.view)}l.call(v),pe.start(y,w.name);function he(Me){for(const Ge of Me.changedTouches||[Me])for(const at of _e)at.identifier===Ge.identifier&&(at.cur=gG(Ge,v));if(Y&&!ee&&!ae&&_e.length===1){const Ge=_e[0];cpe(Ge.cur[0]-Ge[0])>cpe(Ge.cur[1]-Ge[1])?ae=!0:ee=!0}for(const Ge of _e)Ge.cur&&(Ge[0]=Ge.cur[0],Ge[1]=Ge.cur[1]);V=!0,hV(Me),$e(Me)}function $e(Me){const Ge=_e[0],at=Ge.point0;var yt;switch(j=Ge[0]-at[0],G=Ge[1]-at[1],w){case pV:case lpe:{E&&(j=Uu(D-M,zu(Q-J,j)),$=M+j,ne=J+j),T&&(G=Uu(U-F,zu(Z-ie,G)),H=F+G,q=ie+G);break}case NS:{_e[1]?(E&&($=Uu(D,zu(Q,_e[0][0])),ne=Uu(D,zu(Q,_e[1][0])),E=1),T&&(H=Uu(U,zu(Z,_e[0][1])),q=Uu(U,zu(Z,_e[1][1])),T=1)):(E<0?(j=Uu(D-M,zu(Q-M,j)),$=M+j,ne=J):E>0&&(j=Uu(D-J,zu(Q-J,j)),$=M,ne=J+j),T<0?(G=Uu(U-F,zu(Z-F,G)),H=F+G,q=ie):T>0&&(G=Uu(U-ie,zu(Z-ie,G)),H=F,q=ie+G));break}case DS:{E&&($=Uu(D,zu(Q,M-j*E)),ne=Uu(D,zu(Q,J+j*E))),T&&(H=Uu(U,zu(Z,F-G*T)),q=Uu(U,zu(Z,ie+G*T)));break}}ne<$&&(E*=-1,yt=M,M=J,J=yt,yt=$,$=ne,ne=yt,b in dpe&&Le.attr("cursor",Xg[b=dpe[b]])),q<H&&(T*=-1,yt=F,F=ie,ie=yt,yt=H,H=q,q=yt,b in hpe&&Le.attr("cursor",Xg[b=hpe[b]])),A.selection&&(R=A.selection),ee&&($=R[0][0],ne=R[1][0]),ae&&(H=R[0][1],q=R[1][1]),(R[0][0]!==$||R[0][1]!==H||R[1][0]!==ne||R[1][1]!==q)&&(A.selection=[[$,H],[ne,q]],l.call(v),pe.brush(Me,w.name))}function Ne(Me){if(H_t(Me),Me.touches){if(Me.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else Wbt(Me.view,V),ye.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Te.attr("pointer-events","all"),Le.attr("cursor",Xg.overlay),A.selection&&(R=A.selection),Q_t(R)&&(A.selection=null,l.call(v)),pe.end(Me,w.name)}function tt(Me){switch(Me.keyCode){case 16:{Y=E&&T;break}case 18:{w===NS&&(E&&(J=ne-j*E,M=$+j*E),T&&(ie=q-G*T,F=H+G*T),w=DS,$e(Me));break}case 32:{(w===NS||w===DS)&&(E<0?J=ne-j:E>0&&(M=$-j),T<0?ie=q-G:T>0&&(F=H-G),w=pV,Le.attr("cursor",Xg.selection),$e(Me));break}default:return}hV(Me)}function it(Me){switch(Me.keyCode){case 16:{Y&&(ee=ae=Y=!1,$e(Me));break}case 18:{w===DS&&(E<0?J=ne:E>0&&(M=$),T<0?ie=q:T>0&&(F=H),w=NS,$e(Me));break}case 32:{w===pV&&(Me.altKey?(E&&(J=ne-j*E,M=$+j*E),T&&(ie=q-G*T,F=H+G*T),w=DS):(E<0?J=ne:E>0&&(M=$),T<0?ie=q:T>0&&(F=H),w=NS),Le.attr("cursor",Xg[b]),$e(Me));break}default:return}hV(Me)}}function h(y){c(this,arguments).moved(y)}function p(y){c(this,arguments).ended(y)}function m(){var y=this.__brush||{selection:null};return y.extent=CG(t.apply(this,arguments)),y.dim=e,y}return u.extent=function(y){return arguments.length?(t=typeof y=="function"?y:dV(CG(y)),u):t},u.filter=function(y){return arguments.length?(n=typeof y=="function"?y:dV(!!y),u):n},u.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:dV(!!y),u):r},u.handleSize=function(y){return arguments.length?(o=+y,u):o},u.keyModifiers=function(y){return arguments.length?(i=!!y,u):i},u.on=function(){var y=s.on.apply(s,arguments);return y===s?u:y},u}const AG=Math.PI,IG=2*AG,q_=1e-6,twt=IG-q_;function eke(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function nwt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return eke;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let Mee=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?eke:nwt(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>q_)if(!(Math.abs(f*u-l*c)>q_)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,y=h*h+p*p,v=Math.sqrt(m),b=Math.sqrt(d),w=s*Math.tan((AG-Math.acos((m+d-y)/(2*v*b)))/2),E=w/b,T=w/v;Math.abs(E-1)>q_&&this._append`L${t+E*c},${n+E*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+T*u},${this._y1=n+T*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>q_||Math.abs(this._y1-c)>q_)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%IG+IG),d>twt?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>q_&&this._append`A${r},${r},0,${+(d>=AG)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function p9(){return new Mee}p9.prototype=Mee.prototype;const By=11102230246251565e-32,Vu=134217729,rwt=(3+8*By)*By;function gV(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function iwt(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function p3(e){return new Float64Array(e)}const swt=(3+16*By)*By,owt=(2+12*By)*By,awt=(9+64*By)*By*By,PS=p3(4),ppe=p3(8),mpe=p3(12),gpe=p3(16),kl=p3(4);function uwt(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,y,v,b,w,E,T,A,I,R;const D=e-i,M=n-i,$=t-s,U=r-s;E=D*U,d=Vu*D,h=d-(d-D),p=D-h,d=Vu*U,m=d-(d-U),y=U-m,T=p*y-(E-h*m-p*m-h*y),A=$*M,d=Vu*$,h=d-(d-$),p=$-h,d=Vu*M,m=d-(d-M),y=M-m,I=p*y-(A-h*m-p*m-h*y),v=T-I,f=T-v,PS[0]=T-(v+f)+(f-I),b=E+v,f=b-E,w=E-(b-f)+(v-f),v=w-A,f=w-v,PS[1]=w-(v+f)+(f-A),R=b+v,f=R-b,PS[2]=b-(R-f)+(v-f),PS[3]=R;let F=iwt(4,PS),H=owt*o;if(F>=H||-F>=H||(f=e-D,a=e-(D+f)+(f-i),f=n-M,l=n-(M+f)+(f-i),f=t-$,u=t-($+f)+(f-s),f=r-U,c=r-(U+f)+(f-s),a===0&&u===0&&l===0&&c===0)||(H=awt*o+rwt*Math.abs(F),F+=D*c+U*a-($*l+M*u),F>=H||-F>=H))return F;E=a*U,d=Vu*a,h=d-(d-a),p=a-h,d=Vu*U,m=d-(d-U),y=U-m,T=p*y-(E-h*m-p*m-h*y),A=u*M,d=Vu*u,h=d-(d-u),p=u-h,d=Vu*M,m=d-(d-M),y=M-m,I=p*y-(A-h*m-p*m-h*y),v=T-I,f=T-v,kl[0]=T-(v+f)+(f-I),b=E+v,f=b-E,w=E-(b-f)+(v-f),v=w-A,f=w-v,kl[1]=w-(v+f)+(f-A),R=b+v,f=R-b,kl[2]=b-(R-f)+(v-f),kl[3]=R;const Q=gV(4,PS,4,kl,ppe);E=D*c,d=Vu*D,h=d-(d-D),p=D-h,d=Vu*c,m=d-(d-c),y=c-m,T=p*y-(E-h*m-p*m-h*y),A=$*l,d=Vu*$,h=d-(d-$),p=$-h,d=Vu*l,m=d-(d-l),y=l-m,I=p*y-(A-h*m-p*m-h*y),v=T-I,f=T-v,kl[0]=T-(v+f)+(f-I),b=E+v,f=b-E,w=E-(b-f)+(v-f),v=w-A,f=w-v,kl[1]=w-(v+f)+(f-A),R=b+v,f=R-b,kl[2]=b-(R-f)+(v-f),kl[3]=R;const J=gV(Q,ppe,4,kl,mpe);E=a*c,d=Vu*a,h=d-(d-a),p=a-h,d=Vu*c,m=d-(d-c),y=c-m,T=p*y-(E-h*m-p*m-h*y),A=u*l,d=Vu*u,h=d-(d-u),p=u-h,d=Vu*l,m=d-(d-l),y=l-m,I=p*y-(A-h*m-p*m-h*y),v=T-I,f=T-v,kl[0]=T-(v+f)+(f-I),b=E+v,f=b-E,w=E-(b-f)+(v-f),v=w-A,f=w-v,kl[1]=w-(v+f)+(f-A),R=b+v,f=R-b,kl[2]=b-(R-f)+(v-f),kl[3]=R;const ne=gV(J,mpe,4,kl,gpe);return gpe[ne-1]}function r6(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=swt*l?u:-uwt(e,t,n,r,i,s,l)}const ype=Math.pow(2,-52),i6=new Uint32Array(512);class CF{static from(t,n=hwt,r=pwt){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new CF(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let D=0;D<o;D++){const M=t[2*D],$=t[2*D+1];M<a&&(a=M),$<u&&(u=$),M>l&&(l=M),$>c&&(c=$),this._ids[D]=D}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let D=0,M=1/0;D<o;D++){const $=yV(f,d,t[2*D],t[2*D+1]);$<M&&(h=D,M=$)}const y=t[2*h],v=t[2*h+1];for(let D=0,M=1/0;D<o;D++){if(D===h)continue;const $=yV(y,v,t[2*D],t[2*D+1]);$<M&&$>0&&(p=D,M=$)}let b=t[2*p],w=t[2*p+1],E=1/0;for(let D=0;D<o;D++){if(D===h||D===p)continue;const M=fwt(y,v,b,w,t[2*D],t[2*D+1]);M<E&&(m=D,E=M)}let T=t[2*m],A=t[2*m+1];if(E===1/0){for(let $=0;$<o;$++)this._dists[$]=t[2*$]-t[0]||t[2*$+1]-t[1];p2(this._ids,this._dists,0,o-1);const D=new Uint32Array(o);let M=0;for(let $=0,U=-1/0;$<o;$++){const F=this._ids[$],H=this._dists[F];H>U&&(D[M++]=F,U=H)}this.hull=D.subarray(0,M),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(r6(y,v,b,w,T,A)<0){const D=p,M=b,$=w;p=m,b=T,w=A,m=D,T=M,A=$}const I=dwt(y,v,b,w,T,A);this._cx=I.x,this._cy=I.y;for(let D=0;D<o;D++)this._dists[D]=yV(t[2*D],t[2*D+1],I.x,I.y);p2(this._ids,this._dists,0,o-1),this._hullStart=h;let R=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(y,v)]=h,s[this._hashKey(b,w)]=p,s[this._hashKey(T,A)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let D=0,M,$;D<this._ids.length;D++){const U=this._ids[D],F=t[2*U],H=t[2*U+1];if(D>0&&Math.abs(F-M)<=ype&&Math.abs(H-$)<=ype||(M=F,$=H,U===h||U===p||U===m))continue;let Q=0;for(let q=0,j=this._hashKey(F,H);q<this._hashSize&&(Q=s[(j+q)%this._hashSize],!(Q!==-1&&Q!==r[Q]));q++);Q=n[Q];let J=Q,ne;for(;ne=r[J],r6(F,H,t[2*J],t[2*J+1],t[2*ne],t[2*ne+1])>=0;)if(J=ne,J===Q){J=-1;break}if(J===-1)continue;let Z=this._addTriangle(J,U,r[J],-1,-1,i[J]);i[U]=this._legalize(Z+2),i[J]=Z,R++;let ie=r[J];for(;ne=r[ie],r6(F,H,t[2*ie],t[2*ie+1],t[2*ne],t[2*ne+1])<0;)Z=this._addTriangle(ie,U,ne,i[U],-1,i[ie]),i[U]=this._legalize(Z+2),r[ie]=ie,R--,ie=ne;if(J===Q)for(;ne=n[J],r6(F,H,t[2*ne],t[2*ne+1],t[2*J],t[2*J+1])<0;)Z=this._addTriangle(ne,U,J,-1,i[J],i[ne]),this._legalize(Z+2),i[ne]=Z,r[J]=J,R--,J=ne;this._hullStart=n[U]=J,r[J]=n[ie]=U,r[U]=ie,s[this._hashKey(F,H)]=U,s[this._hashKey(t[2*J],t[2*J+1])]=J}this.hull=new Uint32Array(R);for(let D=0,M=this._hullStart;D<R;D++)this.hull[D]=M,M=r[M];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(lwt(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=i6[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(cwt(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const v=r[f];if(v===-1){let w=this._hullStart;do{if(this._hullTri[w]===f){this._hullTri[w]=t;break}w=this._hullPrev[w]}while(w!==this._hullStart)}this._link(t,v),this._link(a,r[o]),this._link(o,f);const b=l+(a+1)%3;s<i6.length&&(i6[s++]=b)}else{if(s===0)break;t=i6[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function lwt(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function yV(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function cwt(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,y=d*d+h*h;return u*(f*y-m*h)-l*(c*y-m*d)+p*(c*h-f*d)<0}function fwt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function dwt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function p2(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;eR(e,i,s),t[e[n]]>t[e[r]]&&eR(e,n,r),t[e[s]]>t[e[r]]&&eR(e,s,r),t[e[n]]>t[e[s]]&&eR(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;eR(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(p2(e,t,s,r),p2(e,t,n,o-1)):(p2(e,t,n,o-1),p2(e,t,s,r))}}function eR(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function hwt(e){return e[0]}function pwt(e){return e[1]}const vpe=1e-6;class vw{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>vpe||Math.abs(this._y1-s)>vpe)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class kG{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let mwt=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,y=0,v=r.length,b,w;m<v;m+=3,y+=2){const E=r[m]*2,T=r[m+1]*2,A=r[m+2]*2,I=t[E],R=t[E+1],D=t[T],M=t[T+1],$=t[A],U=t[A+1],F=D-I,H=M-R,Q=$-I,J=U-R,ne=(F*J-H*Q)*2;if(Math.abs(ne)<1e-9){if(s===void 0){s=o=0;for(const ie of n)s+=t[ie*2],o+=t[ie*2+1];s/=n.length,o/=n.length}const Z=1e9*Math.sign((s-I)*J-(o-R)*Q);b=(I+$)/2-Z*J,w=(R+U)/2+Z*Q}else{const Z=1/ne,ie=F*F+H*H,q=Q*Q+J*J;b=I+(J*ie-H*q)*Z,w=R+(F*q-Q*ie)*Z}a[y]=b,a[y+1]=w}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new vw:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],y=o[h+1],v=o[p],b=o[p+1];this._renderSegment(m,y,v,b,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new vw:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new vw:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new kG;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,y,v,b;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,y,v,b]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[v,b,m,y]=p,f=d,d=this._edgecode(m,y),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,y):i=[m,y]}f=d,d=this._edgecode(v,b),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(v,b):i=[v,b]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const gwt=2*Math.PI,OS=Math.pow;function ywt(e){return e[0]}function vwt(e){return e[1]}function bwt(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function xwt(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class Lee{static from(t,n=ywt,r=vwt,i){return new Lee("length"in t?_wt(t,n,r,i):Float64Array.from(wwt(t,n,r,i)))}constructor(t){this._delaunator=new CF(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&bwt(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=xwt(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new CF(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new mwt(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=OS(n-l[t*2],2)+OS(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=OS(n-l[p*2],2)+OS(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&OS(n-l[h*2],2)+OS(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new vw:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new vw:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,gwt)}return r&&r.value()}renderHull(t){const n=t==null?t=new vw:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new kG;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new vw:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new kG;return this.renderTriangle(t,n),n.value()}}function _wt(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*wwt(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var bpe={},vV={},bV=34,tR=10,xV=13;function tke(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Ewt(e,t){var n=tke(e);return function(r,i){return t(n(r),i,e)}}function xpe(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Dc(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Twt(e){return e<0?"-"+Dc(-e,6):e>9999?"+"+Dc(e,6):Dc(e,4)}function Swt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Twt(e.getUTCFullYear())+"-"+Dc(e.getUTCMonth()+1,2)+"-"+Dc(e.getUTCDate(),2)+(i?"T"+Dc(t,2)+":"+Dc(n,2)+":"+Dc(r,2)+"."+Dc(i,3)+"Z":r?"T"+Dc(t,2)+":"+Dc(n,2)+":"+Dc(r,2)+"Z":n||t?"T"+Dc(t,2)+":"+Dc(n,2)+"Z":"")}function nke(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(y,v){if(h)return h(y,v-1);p=y,h=d?Ewt(y,d):tke(y)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,y=0,v,b=p<=0,w=!1;f.charCodeAt(p-1)===tR&&--p,f.charCodeAt(p-1)===xV&&--p;function E(){if(b)return vV;if(w)return w=!1,bpe;var A,I=m,R;if(f.charCodeAt(I)===bV){for(;m++<p&&f.charCodeAt(m)!==bV||f.charCodeAt(++m)===bV;);return(A=m)>=p?b=!0:(R=f.charCodeAt(m++))===tR?w=!0:R===xV&&(w=!0,f.charCodeAt(m)===tR&&++m),f.slice(I+1,A-1).replace(/""/g,'"')}for(;m<p;){if((R=f.charCodeAt(A=m++))===tR)w=!0;else if(R===xV)w=!0,f.charCodeAt(m)===tR&&++m;else if(R!==n)continue;return f.slice(I,A)}return b=!0,f.slice(I,p)}for(;(v=E())!==vV;){for(var T=[];v!==bpe&&v!==vV;)T.push(v),v=E();d&&(T=d(T,y++))==null||h.push(T)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=xpe(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=xpe(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?Swt(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var Cwt=nke(","),Awt=Cwt.parse;function Iwt(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function kwt(e,t){return fetch(e,t).then(Iwt)}function Rwt(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),kwt(t,n).then(function(i){return e(i,r)})}}var Nwt=Rwt(Awt);function Dwt(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function Pwt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return rke(this.cover(t,n),t,n,e)}function rke(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,y,v,b;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(y=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[v=y<<1|m]))return i[v]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[v]=o:e._root=o,e;do i=i?i[v]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(y=n>=(d=(u+c)/2))?u=d:c=d;while((v=y<<1|m)===(b=(p>=d)<<1|h>=f));return i[b]=s,i[v]=o,e}function Owt(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)rke(this,o[n],a[n],e[n]);return this}function Mwt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Lwt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function $wt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Fl(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Fwt(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new Fl(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var y=(o+u)/2,v=(a+l)/2;d.push(new Fl(h[3],y,v,u,l),new Fl(h[2],o,v,y,l),new Fl(h[1],y,a,u,v),new Fl(h[0],o,a,y,v)),(m=(t>=v)<<1|e>=y)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var b=e-+this._x.call(null,h.data),w=t-+this._y.call(null,h.data),E=b*b+w*w;if(E<n){var T=Math.sqrt(n=E);i=e-T,s=t-T,c=e+T,f=t+T,r=h.data}}return r}function Bwt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,y,v;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[y=m<<1|p]))return this;if(!n.length)break;(t[y+1&3]||t[y+2&3]||t[y+3&3])&&(r=t,v=y)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[y]=s:delete t[y],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[v]=n:this._root=n),this):(this._root=s,this)}function jwt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Uwt(){return this._root}function zwt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Vwt(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new Fl(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new Fl(i,l,c,a,u)),(i=r[2])&&t.push(new Fl(i,s,c,l,u)),(i=r[1])&&t.push(new Fl(i,l,o,a,c)),(i=r[0])&&t.push(new Fl(i,s,o,l,c))}return this}function Hwt(e){var t=[],n=[],r;for(this._root&&t.push(new Fl(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new Fl(s,o,a,c,f)),(s=i[1])&&t.push(new Fl(s,c,a,u,f)),(s=i[2])&&t.push(new Fl(s,o,f,c,l)),(s=i[3])&&t.push(new Fl(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function qwt(e){return e[0]}function Wwt(e){return arguments.length?(this._x=e,this):this._x}function Gwt(e){return e[1]}function Ywt(e){return arguments.length?(this._y=e,this):this._y}function $ee(e,t,n){var r=new Fee(t??qwt,n??Gwt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function Fee(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function _pe(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var ec=$ee.prototype=Fee.prototype;ec.copy=function(){var e=new Fee(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=_pe(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=_pe(r));return e};ec.add=Pwt;ec.addAll=Owt;ec.cover=Mwt;ec.data=Lwt;ec.extent=$wt;ec.find=Fwt;ec.remove=Bwt;ec.removeAll=jwt;ec.root=Uwt;ec.size=zwt;ec.visit=Vwt;ec.visitAfter=Hwt;ec.x=Wwt;ec.y=Ywt;function Ul(e){return function(){return e}}function Xv(e){return(e()-.5)*1e-6}function Kwt(e){return e.x+e.vx}function Xwt(e){return e.y+e.vy}function Qwt(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=Ul(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,y,v=0;v<s;++v)for(f=$ee(t,Kwt,Xwt).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],y=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(b);function b(w,E,T,A,I){var R=w.data,D=w.r,M=m+D;if(R){if(R.index>d.index){var $=h-R.x-R.vx,U=p-R.y-R.vy,F=$*$+U*U;F<M*M&&($===0&&($=Xv(r),F+=$*$),U===0&&(U=Xv(r),F+=U*U),F=(M-(F=Math.sqrt(F)))/F*i,d.vx+=($*=F)*(M=(D*=D)/(y+D)),d.vy+=(U*=F)*M,R.vx-=$*(M=1-M),R.vy-=U*M)}return}return E>h+M||A<h-M||T>p+M||I<p-M}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:Ul(+l),u(),o):e},o}function Jwt(e){return e.index}function wpe(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Zwt(e){var t=Jwt,n=f,r,i=Ul(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(y){return 1/Math.min(a[y.source.index],a[y.target.index])}function d(y){for(var v=0,b=e.length;v<c;++v)for(var w=0,E,T,A,I,R,D,M;w<b;++w)E=e[w],T=E.source,A=E.target,I=A.x+A.vx-T.x-T.vx||Xv(l),R=A.y+A.vy-T.y-T.vy||Xv(l),D=Math.sqrt(I*I+R*R),D=(D-s[w])/D*y*r[w],I*=D,R*=D,A.vx-=I*(M=u[w]),A.vy-=R*M,T.vx+=I*(M=1-M),T.vy+=R*M}function h(){if(o){var y,v=o.length,b=e.length,w=new Map(o.map((T,A)=>[t(T,A,o),T])),E;for(y=0,a=new Array(v);y<b;++y)E=e[y],E.index=y,typeof E.source!="object"&&(E.source=wpe(w,E.source)),typeof E.target!="object"&&(E.target=wpe(w,E.target)),a[E.source.index]=(a[E.source.index]||0)+1,a[E.target.index]=(a[E.target.index]||0)+1;for(y=0,u=new Array(b);y<b;++y)E=e[y],u[y]=a[E.source.index]/(a[E.source.index]+a[E.target.index]);r=new Array(b),p(),s=new Array(b),m()}}function p(){if(o)for(var y=0,v=e.length;y<v;++y)r[y]=+n(e[y],y,e)}function m(){if(o)for(var y=0,v=e.length;y<v;++y)s[y]=+i(e[y],y,e)}return d.initialize=function(y,v){o=y,l=v,h()},d.links=function(y){return arguments.length?(e=y,h(),d):e},d.id=function(y){return arguments.length?(t=y,d):t},d.iterations=function(y){return arguments.length?(c=+y,d):c},d.strength=function(y){return arguments.length?(n=typeof y=="function"?y:Ul(+y),p(),d):n},d.distance=function(y){return arguments.length?(i=typeof y=="function"?y:Ul(+y),m(),d):i},d}const eEt=1664525,tEt=1013904223,Epe=4294967296;function nEt(){let e=1;return()=>(e=(eEt*e+tEt)%Epe)/Epe}function rEt(e){return e.x}function iEt(e){return e.y}var sEt=10,oEt=Math.PI*(3-Math.sqrt(5));function aEt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=Nee(f),l=o9("tick","end"),c=nEt();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var y,v=e.length,b;m===void 0&&(m=1);for(var w=0;w<m;++w)for(n+=(s-n)*i,a.forEach(function(E){E(n)}),y=0;y<v;++y)b=e[y],b.fx==null?b.x+=b.vx*=o:(b.x=b.fx,b.vx=0),b.fy==null?b.y+=b.vy*=o:(b.y=b.fy,b.vy=0);return t}function h(){for(var m=0,y=e.length,v;m<y;++m){if(v=e[m],v.index=m,v.fx!=null&&(v.x=v.fx),v.fy!=null&&(v.y=v.fy),isNaN(v.x)||isNaN(v.y)){var b=sEt*Math.sqrt(.5+m),w=m*oEt;v.x=b*Math.cos(w),v.y=b*Math.sin(w)}(isNaN(v.vx)||isNaN(v.vy))&&(v.vx=v.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,y){return arguments.length>1?(y==null?a.delete(m):a.set(m,p(y)),t):a.get(m)},find:function(m,y,v){var b=0,w=e.length,E,T,A,I,R;for(v==null?v=1/0:v*=v,b=0;b<w;++b)I=e[b],E=m-I.x,T=y-I.y,A=E*E+T*T,A<v&&(R=I,v=A);return R},on:function(m,y){return arguments.length>1?(l.on(m,y),t):l.on(m)}}}function uEt(){var e,t,n,r,i=Ul(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,y=$ee(e,rEt,iEt).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],y.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,y,v=0,b,w,E;if(h.length){for(b=w=E=0;E<4;++E)(m=h[E])&&(y=Math.abs(m.value))&&(p+=m.value,v+=y,b+=y*m.x,w+=y*m.y);h.x=b/v,h.y=w/v}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,y){if(!h.value)return!0;var v=h.x-t.x,b=h.y-t.y,w=y-p,E=v*v+b*b;if(w*w/u<E)return E<a&&(v===0&&(v=Xv(n),E+=v*v),b===0&&(b=Xv(n),E+=b*b),E<o&&(E=Math.sqrt(o*E)),t.vx+=v*h.value*r/E,t.vy+=b*h.value*r/E),!0;if(h.length||E>=a)return;(h.data!==t||h.next)&&(v===0&&(v=Xv(n),E+=v*v),b===0&&(b=Xv(n),E+=b*b),E<o&&(E=Math.sqrt(o*E)));do h.data!==t&&(w=s[h.data.index]*r/E,t.vx+=v*w,t.vy+=b*w);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Ul(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function lEt(e){var t=Ul(.1),n,r,i;typeof e!="function"&&(e=Ul(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Ul(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:Ul(+a),o(),s):e},s}function cEt(e){var t=Ul(.1),n,r,i;typeof e!="function"&&(e=Ul(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Ul(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:Ul(+a),o(),s):e},s}function fEt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function AF(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function xC(e){return e=AF(Math.abs(e)),e?e[1]:NaN}function dEt(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function hEt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var pEt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Qw(e){if(!(t=pEt.exec(e)))throw new Error("invalid format: "+e);var t;return new Bee({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Qw.prototype=Bee.prototype;function Bee(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Bee.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function mEt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var ike;function gEt(e,t){var n=AF(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(ike=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+AF(e,Math.max(0,t+s-1))[0]}function Tpe(e,t){var n=AF(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Spe={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:fEt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Tpe(e*100,t),r:Tpe,s:gEt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Cpe(e){return e}var Ape=Array.prototype.map,Ipe=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function ske(e){var t=e.grouping===void 0||e.thousands===void 0?Cpe:dEt(Ape.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Cpe:hEt(Ape.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=Qw(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,y=f.zero,v=f.width,b=f.comma,w=f.precision,E=f.trim,T=f.type;T==="n"?(b=!0,T="g"):Spe[T]||(w===void 0&&(w=12),E=!0,T="g"),(y||d==="0"&&h==="=")&&(y=!0,d="0",h="=");var A=m==="$"?n:m==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",I=m==="$"?r:/[%p]/.test(T)?o:"",R=Spe[T],D=/[defgprs%]/.test(T);w=w===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function M($){var U=A,F=I,H,Q,J;if(T==="c")F=R($)+F,$="";else{$=+$;var ne=$<0||1/$<0;if($=isNaN($)?u:R(Math.abs($),w),E&&($=mEt($)),ne&&+$==0&&p!=="+"&&(ne=!1),U=(ne?p==="("?p:a:p==="-"||p==="("?"":p)+U,F=(T==="s"?Ipe[8+ike/3]:"")+F+(ne&&p==="("?")":""),D){for(H=-1,Q=$.length;++H<Q;)if(J=$.charCodeAt(H),48>J||J>57){F=(J===46?i+$.slice(H+1):$.slice(H))+F,$=$.slice(0,H);break}}}b&&!y&&($=t($,1/0));var Z=U.length+$.length+F.length,ie=Z<v?new Array(v-Z+1).join(d):"";switch(b&&y&&($=t(ie+$,ie.length?v-F.length:1/0),ie=""),h){case"<":$=U+$+F+ie;break;case"=":$=U+ie+$+F;break;case"^":$=ie.slice(0,Z=ie.length>>1)+U+$+F+ie.slice(Z);break;default:$=ie+U+$+F;break}return s($)}return M.toString=function(){return f+""},M}function c(f,d){var h=l((f=Qw(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(xC(d)/3)))*3,m=Math.pow(10,-p),y=Ipe[8+p/3];return function(v){return h(m*v)+y}}return{format:l,formatPrefix:c}}var s6,YA,jee;yEt({thousands:",",grouping:[3],currency:["$",""]});function yEt(e){return s6=ske(e),YA=s6.format,jee=s6.formatPrefix,s6}function oke(e){return Math.max(0,-xC(Math.abs(e)))}function ake(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(xC(t)/3)))*3-xC(Math.abs(e)))}function uke(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,xC(t)-xC(e))+1}var An=1e-6,RG=1e-12,Ar=Math.PI,so=Ar/2,IF=Ar/4,Kl=Ar*2,Eo=180/Ar,Er=Ar/180,Gr=Math.abs,KA=Math.atan,sh=Math.atan2,Cn=Math.cos,o6=Math.ceil,lke=Math.exp,NG=Math.hypot,kF=Math.log,_V=Math.pow,xn=Math.sin,Jd=Math.sign||function(e){return e>0?1:e<0?-1:0},Xl=Math.sqrt,Uee=Math.tan;function cke(e){return e>1?0:e<-1?Ar:Math.acos(e)}function Qc(e){return e>1?so:e<-1?-so:Math.asin(e)}function gu(){}function RF(e,t){e&&Rpe.hasOwnProperty(e.type)&&Rpe[e.type](e,t)}var kpe={Feature:function(e,t){RF(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)RF(n[r].geometry,t)}},Rpe={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){DG(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)DG(n[r],t,0)},Polygon:function(e,t){Npe(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Npe(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)RF(n[r],t)}};function DG(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function Npe(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)DG(e[n],t,1);t.polygonEnd()}function gy(e,t){e&&kpe.hasOwnProperty(e.type)?kpe[e.type](e,t):RF(e,t)}var NF=new ql,DF=new ql,fke,dke,PG,OG,MG,j0={point:gu,lineStart:gu,lineEnd:gu,polygonStart:function(){NF=new ql,j0.lineStart=vEt,j0.lineEnd=bEt},polygonEnd:function(){var e=+NF;DF.add(e<0?Kl+e:e),this.lineStart=this.lineEnd=this.point=gu},sphere:function(){DF.add(Kl)}};function vEt(){j0.point=xEt}function bEt(){hke(fke,dke)}function xEt(e,t){j0.point=hke,fke=e,dke=t,e*=Er,t*=Er,PG=e,OG=Cn(t=t/2+IF),MG=xn(t)}function hke(e,t){e*=Er,t*=Er,t=t/2+IF;var n=e-PG,r=n>=0?1:-1,i=r*n,s=Cn(t),o=xn(t),a=MG*o,u=OG*s+a*Cn(i),l=a*r*xn(i);NF.add(sh(l,u)),PG=e,OG=s,MG=o}function _Et(e){return DF=new ql,gy(e,j0),DF*2}function PF(e){return[sh(e[1],e[0]),Qc(e[2])]}function Jw(e){var t=e[0],n=e[1],r=Cn(n);return[r*Cn(t),r*xn(t),xn(n)]}function a6(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function _C(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function wV(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function u6(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function OF(e){var t=Xl(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Bs,Bc,Js,zf,W_,pke,mke,$2,jN,Pv,i1,ly={point:LG,lineStart:Dpe,lineEnd:Ppe,polygonStart:function(){ly.point=yke,ly.lineStart=wEt,ly.lineEnd=EEt,jN=new ql,j0.polygonStart()},polygonEnd:function(){j0.polygonEnd(),ly.point=LG,ly.lineStart=Dpe,ly.lineEnd=Ppe,NF<0?(Bs=-(Js=180),Bc=-(zf=90)):jN>An?zf=90:jN<-1e-6&&(Bc=-90),i1[0]=Bs,i1[1]=Js},sphere:function(){Bs=-(Js=180),Bc=-(zf=90)}};function LG(e,t){Pv.push(i1=[Bs=e,Js=e]),t<Bc&&(Bc=t),t>zf&&(zf=t)}function gke(e,t){var n=Jw([e*Er,t*Er]);if($2){var r=_C($2,n),i=[r[1],-r[0],0],s=_C(i,r);OF(s),s=PF(s);var o=e-W_,a=o>0?1:-1,u=s[0]*Eo*a,l,c=Gr(o)>180;c^(a*W_<u&&u<a*e)?(l=s[1]*Eo,l>zf&&(zf=l)):(u=(u+360)%360-180,c^(a*W_<u&&u<a*e)?(l=-s[1]*Eo,l<Bc&&(Bc=l)):(t<Bc&&(Bc=t),t>zf&&(zf=t))),c?e<W_?jf(Bs,e)>jf(Bs,Js)&&(Js=e):jf(e,Js)>jf(Bs,Js)&&(Bs=e):Js>=Bs?(e<Bs&&(Bs=e),e>Js&&(Js=e)):e>W_?jf(Bs,e)>jf(Bs,Js)&&(Js=e):jf(e,Js)>jf(Bs,Js)&&(Bs=e)}else Pv.push(i1=[Bs=e,Js=e]);t<Bc&&(Bc=t),t>zf&&(zf=t),$2=n,W_=e}function Dpe(){ly.point=gke}function Ppe(){i1[0]=Bs,i1[1]=Js,ly.point=LG,$2=null}function yke(e,t){if($2){var n=e-W_;jN.add(Gr(n)>180?n+(n>0?360:-360):n)}else pke=e,mke=t;j0.point(e,t),gke(e,t)}function wEt(){j0.lineStart()}function EEt(){yke(pke,mke),j0.lineEnd(),Gr(jN)>An&&(Bs=-(Js=180)),i1[0]=Bs,i1[1]=Js,$2=null}function jf(e,t){return(t-=e)<0?t+360:t}function TEt(e,t){return e[0]-t[0]}function Ope(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function SEt(e){var t,n,r,i,s,o,a;if(zf=Js=-(Bs=Bc=1/0),Pv=[],gy(e,ly),n=Pv.length){for(Pv.sort(TEt),t=1,r=Pv[0],s=[r];t<n;++t)i=Pv[t],Ope(r,i[0])||Ope(r,i[1])?(jf(r[0],i[1])>jf(r[0],r[1])&&(r[1]=i[1]),jf(i[0],r[1])>jf(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=jf(r[1],i[0]))>o&&(o=a,Bs=i[0],Js=r[1])}return Pv=i1=null,Bs===1/0||Bc===1/0?[[NaN,NaN],[NaN,NaN]]:[[Bs,Bc],[Js,zf]]}var WR,MF,LF,$F,FF,BF,jF,UF,$G,FG,BG,vke,bke,Ml,Ll,$l,_p={sphere:gu,point:zee,lineStart:Mpe,lineEnd:Lpe,polygonStart:function(){_p.lineStart=IEt,_p.lineEnd=kEt},polygonEnd:function(){_p.lineStart=Mpe,_p.lineEnd=Lpe}};function zee(e,t){e*=Er,t*=Er;var n=Cn(t);m3(n*Cn(e),n*xn(e),xn(t))}function m3(e,t,n){++WR,LF+=(e-LF)/WR,$F+=(t-$F)/WR,FF+=(n-FF)/WR}function Mpe(){_p.point=CEt}function CEt(e,t){e*=Er,t*=Er;var n=Cn(t);Ml=n*Cn(e),Ll=n*xn(e),$l=xn(t),_p.point=AEt,m3(Ml,Ll,$l)}function AEt(e,t){e*=Er,t*=Er;var n=Cn(t),r=n*Cn(e),i=n*xn(e),s=xn(t),o=sh(Xl((o=Ll*s-$l*i)*o+(o=$l*r-Ml*s)*o+(o=Ml*i-Ll*r)*o),Ml*r+Ll*i+$l*s);MF+=o,BF+=o*(Ml+(Ml=r)),jF+=o*(Ll+(Ll=i)),UF+=o*($l+($l=s)),m3(Ml,Ll,$l)}function Lpe(){_p.point=zee}function IEt(){_p.point=REt}function kEt(){xke(vke,bke),_p.point=zee}function REt(e,t){vke=e,bke=t,e*=Er,t*=Er,_p.point=xke;var n=Cn(t);Ml=n*Cn(e),Ll=n*xn(e),$l=xn(t),m3(Ml,Ll,$l)}function xke(e,t){e*=Er,t*=Er;var n=Cn(t),r=n*Cn(e),i=n*xn(e),s=xn(t),o=Ll*s-$l*i,a=$l*r-Ml*s,u=Ml*i-Ll*r,l=NG(o,a,u),c=Qc(l),f=l&&-c/l;$G.add(f*o),FG.add(f*a),BG.add(f*u),MF+=c,BF+=c*(Ml+(Ml=r)),jF+=c*(Ll+(Ll=i)),UF+=c*($l+($l=s)),m3(Ml,Ll,$l)}function NEt(e){WR=MF=LF=$F=FF=BF=jF=UF=0,$G=new ql,FG=new ql,BG=new ql,gy(e,_p);var t=+$G,n=+FG,r=+BG,i=NG(t,n,r);return i<RG&&(t=BF,n=jF,r=UF,MF<An&&(t=LF,n=$F,r=FF),i=NG(t,n,r),i<RG)?[NaN,NaN]:[sh(n,t)*Eo,Qc(r/i)*Eo]}function jG(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function UG(e,t){return Gr(e)>Ar&&(e-=Math.round(e/Kl)*Kl),[e,t]}UG.invert=UG;function _ke(e,t,n){return(e%=Kl)?t||n?jG(Fpe(e),Bpe(t,n)):Fpe(e):t||n?Bpe(t,n):UG}function $pe(e){return function(t,n){return t+=e,Gr(t)>Ar&&(t-=Math.round(t/Kl)*Kl),[t,n]}}function Fpe(e){var t=$pe(e);return t.invert=$pe(-e),t}function Bpe(e,t){var n=Cn(e),r=xn(e),i=Cn(t),s=xn(t);function o(a,u){var l=Cn(u),c=Cn(a)*l,f=xn(a)*l,d=xn(u),h=d*n+c*r;return[sh(f*i-h*s,c*n-d*r),Qc(h*i+f*s)]}return o.invert=function(a,u){var l=Cn(u),c=Cn(a)*l,f=xn(a)*l,d=xn(u),h=d*i-f*s;return[sh(f*i+d*s,c*n+h*r),Qc(h*n-c*r)]},o}function DEt(e){e=_ke(e[0]*Er,e[1]*Er,e.length>2?e[2]*Er:0);function t(n){return n=e(n[0]*Er,n[1]*Er),n[0]*=Eo,n[1]*=Eo,n}return t.invert=function(n){return n=e.invert(n[0]*Er,n[1]*Er),n[0]*=Eo,n[1]*=Eo,n},t}function PEt(e,t,n,r,i,s){if(n){var o=Cn(t),a=xn(t),u=r*n;i==null?(i=t+r*Kl,s=t-u/2):(i=jpe(o,i),s=jpe(o,s),(r>0?i<s:i>s)&&(i+=r*Kl));for(var l,c=i;r>0?c>s:c<s;c-=u)l=PF([o,-a*Cn(c),-a*xn(c)]),e.point(l[0],l[1])}}function jpe(e,t){t=Jw(t),t[0]-=e,OF(t);var n=cke(-t[1]);return((-t[2]<0?-n:n)+Kl-An)%Kl}function wke(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:gu,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function YL(e,t){return Gr(e[0]-t[0])<An&&Gr(e[1]-t[1])<An}function l6(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Eke(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,y=p[0],v=p[m],b;if(YL(y,v)){if(!y[2]&&!v[2]){for(i.lineStart(),a=0;a<m;++a)i.point((y=p[a])[0],y[1]);i.lineEnd();return}v[0]+=2*An}s.push(b=new l6(y,p,null,!0)),o.push(b.o=new l6(y,null,b,!1)),s.push(b=new l6(v,p,null,!1)),o.push(b.o=new l6(v,null,b,!0))}}),!!s.length){for(o.sort(t),Upe(s),Upe(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function Upe(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function EV(e){return Gr(e[0])<=Ar?e[0]:Jd(e[0])*((Gr(e[0])+Ar)%Kl-Ar)}function OEt(e,t){var n=EV(t),r=t[1],i=xn(r),s=[xn(n),-Cn(n),0],o=0,a=0,u=new ql;i===1?r=so+An:i===-1&&(r=-so-An);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=EV(h),m=h[1]/2+IF,y=xn(m),v=Cn(m),b=0;b<d;++b,p=E,y=A,v=I,h=w){var w=f[b],E=EV(w),T=w[1]/2+IF,A=xn(T),I=Cn(T),R=E-p,D=R>=0?1:-1,M=D*R,$=M>Ar,U=y*A;if(u.add(sh(U*D*xn(M),v*I+U*Cn(M))),o+=$?R+D*Kl:R,$^p>=n^E>=n){var F=_C(Jw(h),Jw(w));OF(F);var H=_C(s,F);OF(H);var Q=($^R>=0?-1:1)*Qc(H[2]);(r>Q||r===Q&&(F[0]||F[1]))&&(a+=$^R>=0?1:-1)}}return(o<-1e-6||o<An&&u<-1e-12)^a&1}function Tke(e,t,n,r){return function(i){var s=t(i),o=wke(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:y,polygonStart:function(){d.point=v,d.lineStart=b,d.lineEnd=w,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=y,c=aIe(c);var E=OEt(l,r);c.length?(u||(i.polygonStart(),u=!0),Eke(c,LEt,E,n,i)):E&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(E,T){e(E,T)&&i.point(E,T)}function p(E,T){s.point(E,T)}function m(){d.point=p,s.lineStart()}function y(){d.point=h,s.lineEnd()}function v(E,T){f.push([E,T]),a.point(E,T)}function b(){a.lineStart(),f=[]}function w(){v(f[0][0],f[0][1]),a.lineEnd();var E=a.clean(),T=o.result(),A,I=T.length,R,D,M;if(f.pop(),l.push(f),f=null,!!I){if(E&1){if(D=T[0],(R=D.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),A=0;A<R;++A)i.point((M=D[A])[0],M[1]);i.lineEnd()}return}I>1&&E&2&&T.push(T.pop().concat(T.shift())),c.push(T.filter(MEt))}}return d}}function MEt(e){return e.length>1}function LEt(e,t){return((e=e.x)[0]<0?e[1]-so-An:so-e[1])-((t=t.x)[0]<0?t[1]-so-An:so-t[1])}const zpe=Tke(function(){return!0},$Et,BEt,[-Ar,-so]);function $Et(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Ar:-Ar,u=Gr(s-t);Gr(u-Ar)<An?(e.point(t,n=(n+o)/2>0?so:-so),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=Ar&&(Gr(t-r)<An&&(t-=r*An),Gr(s-a)<An&&(s-=a*An),n=FEt(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function FEt(e,t,n,r){var i,s,o=xn(e-n);return Gr(o)>An?KA((xn(t)*(s=Cn(r))*xn(n)-xn(r)*(i=Cn(t))*xn(e))/(i*s*o)):(t+r)/2}function BEt(e,t,n,r){var i;if(e==null)i=n*so,r.point(-Ar,i),r.point(0,i),r.point(Ar,i),r.point(Ar,0),r.point(Ar,-i),r.point(0,-i),r.point(-Ar,-i),r.point(-Ar,0),r.point(-Ar,i);else if(Gr(e[0]-t[0])>An){var s=e[0]<t[0]?Ar:-Ar;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function jEt(e){var t=Cn(e),n=2*Er,r=t>0,i=Gr(t)>An;function s(c,f,d,h){PEt(h,e,n,d,c,f)}function o(c,f){return Cn(c)*Cn(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(y,v){var b=[y,v],w,E=o(y,v),T=r?E?0:l(y,v):E?l(y+(y<0?Ar:-Ar),v):0;if(!f&&(p=h=E)&&c.lineStart(),E!==h&&(w=u(f,b),(!w||YL(f,w)||YL(b,w))&&(b[2]=1)),E!==h)m=0,E?(c.lineStart(),w=u(b,f),c.point(w[0],w[1])):(w=u(f,b),c.point(w[0],w[1],2),c.lineEnd()),f=w;else if(i&&f&&r^E){var A;!(T&d)&&(A=u(b,f,!0))&&(m=0,r?(c.lineStart(),c.point(A[0][0],A[0][1]),c.point(A[1][0],A[1][1]),c.lineEnd()):(c.point(A[1][0],A[1][1]),c.lineEnd(),c.lineStart(),c.point(A[0][0],A[0][1],3)))}E&&(!f||!YL(f,b))&&c.point(b[0],b[1]),f=b,h=E,d=T},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=Jw(c),p=Jw(f),m=[1,0,0],y=_C(h,p),v=a6(y,y),b=y[0],w=v-b*b;if(!w)return!d&&c;var E=t*v/w,T=-t*b/w,A=_C(m,y),I=u6(m,E),R=u6(y,T);wV(I,R);var D=A,M=a6(I,D),$=a6(D,D),U=M*M-$*(a6(I,I)-1);if(!(U<0)){var F=Xl(U),H=u6(D,(-M-F)/$);if(wV(H,I),H=PF(H),!d)return H;var Q=c[0],J=f[0],ne=c[1],Z=f[1],ie;J<Q&&(ie=Q,Q=J,J=ie);var q=J-Q,j=Gr(q-Ar)<An,G=j||q<An;if(!j&&Z<ne&&(ie=ne,ne=Z,Z=ie),G?j?ne+Z>0^H[1]<(Gr(H[0]-Q)<An?ne:Z):ne<=H[1]&&H[1]<=Z:q>Ar^(Q<=H[0]&&H[0]<=J)){var V=u6(D,(-M+F)/$);return wV(V,I),[H,PF(V)]}}}function l(c,f){var d=r?e:Ar-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return Tke(o,a,s,r?[0,-e]:[-Ar,e-Ar])}function UEt(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var c6=1e9,f6=-1e9;function Ske(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return Gr(l[0]-e)<An?c>0?0:3:Gr(l[0]-n)<An?c>0?2:1:Gr(l[1]-t)<An?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=wke(),d,h,p,m,y,v,b,w,E,T,A,I={point:R,lineStart:U,lineEnd:F,polygonStart:M,polygonEnd:$};function R(Q,J){i(Q,J)&&c.point(Q,J)}function D(){for(var Q=0,J=0,ne=h.length;J<ne;++J)for(var Z=h[J],ie=1,q=Z.length,j=Z[0],G,V,Y=j[0],ee=j[1];ie<q;++ie)G=Y,V=ee,j=Z[ie],Y=j[0],ee=j[1],V<=r?ee>r&&(Y-G)*(r-V)>(ee-V)*(e-G)&&++Q:ee<=r&&(Y-G)*(r-V)<(ee-V)*(e-G)&&--Q;return Q}function M(){c=f,d=[],h=[],A=!0}function $(){var Q=D(),J=A&&Q,ne=(d=aIe(d)).length;(J||ne)&&(l.polygonStart(),J&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),ne&&Eke(d,a,Q,s,l),l.polygonEnd()),c=l,d=h=p=null}function U(){I.point=H,h&&h.push(p=[]),T=!0,E=!1,b=w=NaN}function F(){d&&(H(m,y),v&&E&&f.rejoin(),d.push(f.result())),I.point=R,E&&c.lineEnd()}function H(Q,J){var ne=i(Q,J);if(h&&p.push([Q,J]),T)m=Q,y=J,v=ne,T=!1,ne&&(c.lineStart(),c.point(Q,J));else if(ne&&E)c.point(Q,J);else{var Z=[b=Math.max(f6,Math.min(c6,b)),w=Math.max(f6,Math.min(c6,w))],ie=[Q=Math.max(f6,Math.min(c6,Q)),J=Math.max(f6,Math.min(c6,J))];UEt(Z,ie,e,t,n,r)?(E||(c.lineStart(),c.point(Z[0],Z[1])),c.point(ie[0],ie[1]),ne||c.lineEnd(),A=!1):ne&&(c.lineStart(),c.point(Q,J),A=!1)}b=Q,w=J,E=ne}return I}}function Vpe(e,t,n){var r=Hc(e,t-An,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function Hpe(e,t,n){var r=Hc(e,t-An,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function zEt(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,y=2.5;function v(){return{type:"MultiLineString",coordinates:b()}}function b(){return Hc(o6(r/c)*c,n,c).map(p).concat(Hc(o6(a/f)*f,o,f).map(m)).concat(Hc(o6(t/u)*u,e,u).filter(function(w){return Gr(w%c)>An}).map(d)).concat(Hc(o6(s/l)*l,i,l).filter(function(w){return Gr(w%f)>An}).map(h))}return v.lines=function(){return b().map(function(w){return{type:"LineString",coordinates:w}})},v.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},v.extent=function(w){return arguments.length?v.extentMajor(w).extentMinor(w):v.extentMinor()},v.extentMajor=function(w){return arguments.length?(r=+w[0][0],n=+w[1][0],a=+w[0][1],o=+w[1][1],r>n&&(w=r,r=n,n=w),a>o&&(w=a,a=o,o=w),v.precision(y)):[[r,a],[n,o]]},v.extentMinor=function(w){return arguments.length?(t=+w[0][0],e=+w[1][0],s=+w[0][1],i=+w[1][1],t>e&&(w=t,t=e,e=w),s>i&&(w=s,s=i,i=w),v.precision(y)):[[t,s],[e,i]]},v.step=function(w){return arguments.length?v.stepMajor(w).stepMinor(w):v.stepMinor()},v.stepMajor=function(w){return arguments.length?(c=+w[0],f=+w[1],v):[c,f]},v.stepMinor=function(w){return arguments.length?(u=+w[0],l=+w[1],v):[u,l]},v.precision=function(w){return arguments.length?(y=+w,d=Vpe(s,i,90),h=Hpe(t,e,y),p=Vpe(a,o,90),m=Hpe(r,n,y),v):y},v.extentMajor([[-180,-90+An],[180,90-An]]).extentMinor([[-180,-80-An],[180,80+An]])}const BD=e=>e;var TV=new ql,zG=new ql,Cke,Ake,VG,HG,yy={point:gu,lineStart:gu,lineEnd:gu,polygonStart:function(){yy.lineStart=VEt,yy.lineEnd=qEt},polygonEnd:function(){yy.lineStart=yy.lineEnd=yy.point=gu,TV.add(Gr(zG)),zG=new ql},result:function(){var e=TV/2;return TV=new ql,e}};function VEt(){yy.point=HEt}function HEt(e,t){yy.point=Ike,Cke=VG=e,Ake=HG=t}function Ike(e,t){zG.add(HG*e-VG*t),VG=e,HG=t}function qEt(){Ike(Cke,Ake)}var wC=1/0,zF=wC,jD=-wC,VF=jD,HF={point:WEt,lineStart:gu,lineEnd:gu,polygonStart:gu,polygonEnd:gu,result:function(){var e=[[wC,zF],[jD,VF]];return jD=VF=-(zF=wC=1/0),e}};function WEt(e,t){e<wC&&(wC=e),e>jD&&(jD=e),t<zF&&(zF=t),t>VF&&(VF=t)}var qG=0,WG=0,GR=0,qF=0,WF=0,m2=0,GG=0,YG=0,YR=0,kke,Rke,e0,t0,Xd={point:Zw,lineStart:qpe,lineEnd:Wpe,polygonStart:function(){Xd.lineStart=KEt,Xd.lineEnd=XEt},polygonEnd:function(){Xd.point=Zw,Xd.lineStart=qpe,Xd.lineEnd=Wpe},result:function(){var e=YR?[GG/YR,YG/YR]:m2?[qF/m2,WF/m2]:GR?[qG/GR,WG/GR]:[NaN,NaN];return qG=WG=GR=qF=WF=m2=GG=YG=YR=0,e}};function Zw(e,t){qG+=e,WG+=t,++GR}function qpe(){Xd.point=GEt}function GEt(e,t){Xd.point=YEt,Zw(e0=e,t0=t)}function YEt(e,t){var n=e-e0,r=t-t0,i=Xl(n*n+r*r);qF+=i*(e0+e)/2,WF+=i*(t0+t)/2,m2+=i,Zw(e0=e,t0=t)}function Wpe(){Xd.point=Zw}function KEt(){Xd.point=QEt}function XEt(){Nke(kke,Rke)}function QEt(e,t){Xd.point=Nke,Zw(kke=e0=e,Rke=t0=t)}function Nke(e,t){var n=e-e0,r=t-t0,i=Xl(n*n+r*r);qF+=i*(e0+e)/2,WF+=i*(t0+t)/2,m2+=i,i=t0*e-e0*t,GG+=i*(e0+e),YG+=i*(t0+t),YR+=i*3,Zw(e0=e,t0=t)}function Dke(e){this._context=e}Dke.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Kl);break}}},result:gu};var KG=new ql,SV,Pke,Oke,KR,XR,UD={point:gu,lineStart:function(){UD.point=JEt},lineEnd:function(){SV&&Mke(Pke,Oke),UD.point=gu},polygonStart:function(){SV=!0},polygonEnd:function(){SV=null},result:function(){var e=+KG;return KG=new ql,e}};function JEt(e,t){UD.point=Mke,Pke=KR=e,Oke=XR=t}function Mke(e,t){KR-=e,XR-=t,KG.add(Xl(KR*KR+XR*XR)),KR=e,XR=t}let Gpe,GF,Ype,Kpe;class Xpe{constructor(t){this._append=t==null?Lke:ZEt(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Ype||this._append!==GF){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Ype=r,GF=this._append,Kpe=this._,this._=i}this._+=Kpe;break}}}result(){const t=this._;return this._="",t.length?t:null}}function Lke(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function ZEt(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return Lke;if(t!==Gpe){const n=10**t;Gpe=t,GF=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return GF}function $ke(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),gy(a,i(s))),s.result()}return o.area=function(a){return gy(a,i(yy)),yy.result()},o.measure=function(a){return gy(a,i(UD)),UD.result()},o.bounds=function(a){return gy(a,i(HF)),HF.result()},o.centroid=function(a){return gy(a,i(Xd)),Xd.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,BD):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new Xpe(n)):new Dke(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new Xpe(n)),o},o.projection(e).digits(n).context(t)}function m9(e){return function(t){var n=new XG;for(var r in e)n[r]=e[r];return n.stream=t,n}}function XG(){}XG.prototype={constructor:XG,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Vee(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),gy(n,e.stream(HF)),t(HF.result()),r!=null&&e.clipExtent(r),e}function g9(e,t,n){return Vee(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function Hee(e,t,n){return g9(e,[[0,0],t],n)}function qee(e,t,n){return Vee(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function Wee(e,t,n){return Vee(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var Qpe=16,eTt=Cn(30*Er);function Jpe(e,t){return+t?nTt(e,t):tTt(e)}function tTt(e){return m9({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function nTt(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,y){var v=l-r,b=c-i,w=v*v+b*b;if(w>4*t&&m--){var E=o+d,T=a+h,A=u+p,I=Xl(E*E+T*T+A*A),R=Qc(A/=I),D=Gr(Gr(A)-1)<An||Gr(s-f)<An?(s+f)/2:sh(T,E),M=e(D,R),$=M[0],U=M[1],F=$-r,H=U-i,Q=b*F-v*H;(Q*Q/w>t||Gr((v*F+b*H)/w-.5)>.3||o*d+a*h+u*p<eTt)&&(n(r,i,s,o,a,u,$,U,D,E/=I,T/=I,A,m,y),y.point($,U),n($,U,D,E,T,A,l,c,f,d,h,p,m,y))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,y={point:v,lineStart:b,lineEnd:E,polygonStart:function(){r.polygonStart(),y.lineStart=T},polygonEnd:function(){r.polygonEnd(),y.lineStart=b}};function v(R,D){R=e(R,D),r.point(R[0],R[1])}function b(){f=NaN,y.point=w,r.lineStart()}function w(R,D){var M=Jw([R,D]),$=e(R,D);n(f,d,c,h,p,m,f=$[0],d=$[1],c=R,h=M[0],p=M[1],m=M[2],Qpe,r),r.point(f,d)}function E(){y.point=v,r.lineEnd()}function T(){b(),y.point=A,y.lineEnd=I}function A(R,D){w(i=R,D),s=f,o=d,a=h,u=p,l=m,y.point=w}function I(){n(f,d,c,h,p,m,s,o,i,a,u,l,Qpe,r),y.lineEnd=E,E()}return y}}var rTt=m9({point:function(e,t){this.stream.point(e*Er,t*Er)}});function iTt(e){return m9({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function sTt(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function Zpe(e,t,n,r,i,s){if(!s)return sTt(e,t,n,r,i);var o=Cn(s),a=xn(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,y){return m*=r,y*=i,[u*m-l*y+t,n-l*m-u*y]}return p.invert=function(m,y){return[r*(c*m-f*y+d),i*(h-f*m-c*y)]},p}function og(e){return Fke(function(){return e})()}function Fke(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=zpe,y=null,v,b,w,E=BD,T=.5,A,I,R,D,M;function $(Q){return R(Q[0]*Er,Q[1]*Er)}function U(Q){return Q=R.invert(Q[0],Q[1]),Q&&[Q[0]*Eo,Q[1]*Eo]}$.stream=function(Q){return D&&M===Q?D:D=rTt(iTt(c)(m(A(E(M=Q)))))},$.preclip=function(Q){return arguments.length?(m=Q,p=void 0,H()):m},$.postclip=function(Q){return arguments.length?(E=Q,y=v=b=w=null,H()):E},$.clipAngle=function(Q){return arguments.length?(m=+Q?jEt(p=Q*Er):(p=null,zpe),H()):p*Eo},$.clipExtent=function(Q){return arguments.length?(E=Q==null?(y=v=b=w=null,BD):Ske(y=+Q[0][0],v=+Q[0][1],b=+Q[1][0],w=+Q[1][1]),H()):y==null?null:[[y,v],[b,w]]},$.scale=function(Q){return arguments.length?(n=+Q,F()):n},$.translate=function(Q){return arguments.length?(r=+Q[0],i=+Q[1],F()):[r,i]},$.center=function(Q){return arguments.length?(s=Q[0]%360*Er,o=Q[1]%360*Er,F()):[s*Eo,o*Eo]},$.rotate=function(Q){return arguments.length?(a=Q[0]%360*Er,u=Q[1]%360*Er,l=Q.length>2?Q[2]%360*Er:0,F()):[a*Eo,u*Eo,l*Eo]},$.angle=function(Q){return arguments.length?(f=Q%360*Er,F()):f*Eo},$.reflectX=function(Q){return arguments.length?(d=Q?-1:1,F()):d<0},$.reflectY=function(Q){return arguments.length?(h=Q?-1:1,F()):h<0},$.precision=function(Q){return arguments.length?(A=Jpe(I,T=Q*Q),H()):Xl(T)},$.fitExtent=function(Q,J){return g9($,Q,J)},$.fitSize=function(Q,J){return Hee($,Q,J)},$.fitWidth=function(Q,J){return qee($,Q,J)},$.fitHeight=function(Q,J){return Wee($,Q,J)};function F(){var Q=Zpe(n,0,0,d,h,f).apply(null,t(s,o)),J=Zpe(n,r-Q[0],i-Q[1],d,h,f);return c=_ke(a,u,l),I=jG(t,J),R=jG(c,I),A=Jpe(I,T),H()}function H(){return D=M=null,$}return function(){return t=e.apply(this,arguments),$.invert=t.invert&&U,F()}}function Gee(e){var t=0,n=Ar/3,r=Fke(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Er,n=s[1]*Er):[t*Eo,n*Eo]},i}function oTt(e){var t=Cn(e);function n(r,i){return[r*t,xn(i)/t]}return n.invert=function(r,i){return[r/t,Qc(i*t)]},n}function aTt(e,t){var n=xn(e),r=(n+xn(t))/2;if(Gr(r)<An)return oTt(e);var i=1+n*(2*r-n),s=Xl(i)/r;function o(a,u){var l=Xl(i-2*r*xn(u))/r;return[l*xn(a*=r),s-l*Cn(a)]}return o.invert=function(a,u){var l=s-u,c=sh(a,Gr(l))*Jd(l);return l*r<0&&(c-=Ar*Jd(a)*Jd(l)),[c/r,Qc((i-(a*a+l*l)*r*r)/(2*r))]},o}function YF(){return Gee(aTt).scale(155.424).center([0,33.6442])}function Bke(){return YF().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function uTt(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function lTt(){var e,t,n=Bke(),r,i=YF().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=YF().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,y=(d[1]-p[1])/h;return(y>=.12&&y<.234&&m>=-.425&&m<-.214?i:y>=.166&&y<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=uTt([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+An,m+.12*h+An],[p-.214*h-An,m+.234*h-An]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+An,m+.166*h+An],[p-.115*h-An,m+.234*h-An]]).stream(l),f()},c.fitExtent=function(d,h){return g9(c,d,h)},c.fitSize=function(d,h){return Hee(c,d,h)},c.fitWidth=function(d,h){return qee(c,d,h)},c.fitHeight=function(d,h){return Wee(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function jke(e){return function(t,n){var r=Cn(t),i=Cn(n),s=e(r*i);return s===1/0?[2,0]:[s*i*xn(t),s*xn(n)]}}function g3(e){return function(t,n){var r=Xl(t*t+n*n),i=e(r),s=xn(i),o=Cn(i);return[sh(t*s,r*o),Qc(r&&n*s/r)]}}var Uke=jke(function(e){return Xl(2/(1+e))});Uke.invert=g3(function(e){return 2*Qc(e/2)});function cTt(){return og(Uke).scale(124.75).clipAngle(180-.001)}var zke=jke(function(e){return(e=cke(e))&&e/xn(e)});zke.invert=g3(function(e){return e});function fTt(){return og(zke).scale(79.4188).clipAngle(180-.001)}function y9(e,t){return[e,kF(Uee((so+t)/2))]}y9.invert=function(e,t){return[e,2*KA(lke(t))-so]};function dTt(){return Vke(y9).scale(961/Kl)}function Vke(e){var t=og(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=Ar*r(),d=t(DEt(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===y9?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function d6(e){return Uee((so+e)/2)}function hTt(e,t){var n=Cn(e),r=e===t?xn(e):kF(n/Cn(t))/kF(d6(t)/d6(e)),i=n*_V(d6(e),r)/r;if(!r)return y9;function s(o,a){i>0?a<-so+An&&(a=-so+An):a>so-An&&(a=so-An);var u=i/_V(d6(a),r);return[u*xn(r*o),i-u*Cn(r*o)]}return s.invert=function(o,a){var u=i-a,l=Jd(r)*Xl(o*o+u*u),c=sh(o,Gr(u))*Jd(u);return u*r<0&&(c-=Ar*Jd(o)*Jd(u)),[c/r,2*KA(_V(i/l,1/r))-so]},s}function pTt(){return Gee(hTt).scale(109.5).parallels([30,30])}function KF(e,t){return[e,t]}KF.invert=KF;function mTt(){return og(KF).scale(152.63)}function gTt(e,t){var n=Cn(e),r=e===t?xn(e):(n-Cn(t))/(t-e),i=n/r+e;if(Gr(r)<An)return KF;function s(o,a){var u=i-a,l=r*o;return[u*xn(l),i-u*Cn(l)]}return s.invert=function(o,a){var u=i-a,l=sh(o,Gr(u))*Jd(u);return u*r<0&&(l-=Ar*Jd(o)*Jd(u)),[l/r,i-Jd(r)*Xl(o*o+u*u)]},s}function yTt(){return Gee(gTt).scale(131.154).center([0,13.9389])}var UN=1.340264,zN=-.081106,VN=893e-6,HN=.003796,XF=Xl(3)/2,vTt=12;function Hke(e,t){var n=Qc(XF*xn(t)),r=n*n,i=r*r*r;return[e*Cn(n)/(XF*(UN+3*zN*r+i*(7*VN+9*HN*r))),n*(UN+zN*r+i*(VN+HN*r))]}Hke.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<vTt&&(a=n*(UN+zN*r+i*(VN+HN*r))-t,u=UN+3*zN*r+i*(7*VN+9*HN*r),n-=o=a/u,r=n*n,i=r*r*r,!(Gr(o)<RG));++s);return[XF*e*(UN+3*zN*r+i*(7*VN+9*HN*r))/Cn(n),Qc(xn(n)/XF)]};function bTt(){return og(Hke).scale(177.158)}function qke(e,t){var n=Cn(t),r=Cn(e)*n;return[n*xn(e)/r,xn(t)/r]}qke.invert=g3(KA);function xTt(){return og(qke).scale(144.049).clipAngle(60)}function _Tt(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=m9({point:function(E,T){var A=w([E,T]);this.stream.point(A[0],A[1])}}),m=BD,y,v;function b(){return d=e*r,h=e*i,y=v=null,w}function w(E){var T=E[0]*d,A=E[1]*h;if(s){var I=A*o-T*a;T=T*o+A*a,A=I}return[T+t,A+n]}return w.invert=function(E){var T=E[0]-t,A=E[1]-n;if(s){var I=A*o+T*a;T=T*o-A*a,A=I}return[T/d,A/h]},w.stream=function(E){return y&&v===E?y:y=p(m(v=E))},w.postclip=function(E){return arguments.length?(m=E,u=l=c=f=null,b()):m},w.clipExtent=function(E){return arguments.length?(m=E==null?(u=l=c=f=null,BD):Ske(u=+E[0][0],l=+E[0][1],c=+E[1][0],f=+E[1][1]),b()):u==null?null:[[u,l],[c,f]]},w.scale=function(E){return arguments.length?(e=+E,b()):e},w.translate=function(E){return arguments.length?(t=+E[0],n=+E[1],b()):[t,n]},w.angle=function(E){return arguments.length?(s=E%360*Er,a=xn(s),o=Cn(s),b()):s*Eo},w.reflectX=function(E){return arguments.length?(r=E?-1:1,b()):r<0},w.reflectY=function(E){return arguments.length?(i=E?-1:1,b()):i<0},w.fitExtent=function(E,T){return g9(w,E,T)},w.fitSize=function(E,T){return Hee(w,E,T)},w.fitWidth=function(E,T){return qee(w,E,T)},w.fitHeight=function(E,T){return Wee(w,E,T)},w}function Wke(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}Wke.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Gr(i)>An&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function wTt(){return og(Wke).scale(175.295)}function Gke(e,t){return[Cn(t)*xn(e),xn(t)]}Gke.invert=g3(Qc);function ETt(){return og(Gke).scale(249.5).clipAngle(90+An)}function Yke(e,t){var n=Cn(t),r=1+Cn(e)*n;return[n*xn(e)/r,xn(t)/r]}Yke.invert=g3(function(e){return 2*KA(e)});function TTt(){return og(Yke).scale(250).clipAngle(142)}function Kke(e,t){return[kF(Uee((so+t)/2)),-e]}Kke.invert=function(e,t){return[-t,2*KA(lke(e))-so]};function STt(){var e=Vke(Kke),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function CTt(e,t){return e.parent===t.parent?1:2}function ATt(e){return e.reduce(ITt,0)/e.length}function ITt(e,t){return e+t.x}function kTt(e){return 1+e.reduce(RTt,0)}function RTt(e,t){return Math.max(e,t.y)}function NTt(e){for(var t;t=e.children;)e=t[0];return e}function DTt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function PTt(){var e=CTt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=ATt(h),d.y=kTt(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=NTt(s),l=DTt(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function OTt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function MTt(){return this.eachAfter(OTt)}function LTt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function $Tt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function FTt(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function BTt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function jTt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function UTt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function zTt(e){for(var t=this,n=VTt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function VTt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function HTt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function qTt(){return Array.from(this)}function WTt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function GTt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*YTt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function v9(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=QTt)):t===void 0&&(t=XTt);for(var n=new EC(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new EC(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(Xke)}function KTt(){return v9(this).eachBefore(JTt)}function XTt(e){return e.children}function QTt(e){return Array.isArray(e)?e[1]:null}function JTt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function Xke(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function EC(e){this.data=e,this.depth=this.height=0,this.parent=null}EC.prototype=v9.prototype={constructor:EC,count:MTt,each:LTt,eachAfter:FTt,eachBefore:$Tt,find:BTt,sum:jTt,sort:UTt,path:zTt,ancestors:HTt,descendants:qTt,leaves:WTt,links:GTt,copy:KTt,[Symbol.iterator]:YTt};function KL(e){return e==null?null:Qke(e)}function Qke(e){if(typeof e!="function")throw new Error;return e}function nw(){return 0}function i2(e){return function(){return e}}const ZTt=1664525,eSt=1013904223,eme=4294967296;function tSt(){let e=1;return()=>(e=(ZTt*e+eSt)%eme)/eme}function nSt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function rSt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function iSt(e,t){for(var n=0,r=(e=rSt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&Jke(o,s)?++n:(o=oSt(i=sSt(i,s)),n=0);return o}function sSt(e,t){var n,r;if(CV(t,e))return[t];for(n=0;n<e.length;++n)if(h6(t,e[n])&&CV(QR(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(h6(QR(e[n],e[r]),t)&&h6(QR(e[n],t),e[r])&&h6(QR(e[r],t),e[n])&&CV(Zke(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function h6(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function Jke(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function CV(e,t){for(var n=0;n<t.length;++n)if(!Jke(e,t[n]))return!1;return!0}function oSt(e){switch(e.length){case 1:return aSt(e[0]);case 2:return QR(e[0],e[1]);case 3:return Zke(e[0],e[1],e[2])}}function aSt(e){return{x:e.x,y:e.y,r:e.r}}function QR(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function Zke(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,y=u-s,v=f-s,b=r*r+i*i-s*s,w=b-o*o-a*a+u*u,E=b-l*l-c*c+f*f,T=h*p-d*m,A=(p*E-m*w)/(T*2)-r,I=(m*y-p*v)/T,R=(h*w-d*E)/(T*2)-i,D=(d*v-h*y)/T,M=I*I+D*D-1,$=2*(s+A*I+R*D),U=A*A+R*R-s*s,F=-(Math.abs(M)>1e-6?($+Math.sqrt($*$-4*M*U))/(2*M):U/$);return{x:r+A+I*F,y:i+R+D*F,r:F}}function tme(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function nme(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function rme(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function p6(e){this._=e,this.next=null,this.previous=null}function uSt(e,t){if(!(s=(e=nSt(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;tme(r,n,i=e[2]),n=new p6(n),r=new p6(r),i=new p6(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){tme(n._,r._,i=e[u]),i=new p6(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(nme(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(nme(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=rme(n);(i=i.next)!==r;)(a=rme(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=iSt(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function lSt(e){return Math.sqrt(e.value)}function eRe(){var e=null,t=1,n=1,r=nw;function i(s){const o=tSt();return s.x=t/2,s.y=n/2,e?s.eachBefore(ime(e)).eachAfter(AV(r,.5,o)).eachBefore(sme(1)):s.eachBefore(ime(lSt)).eachAfter(AV(nw,1,o)).eachAfter(AV(r,s.r/Math.min(t,n),o)).eachBefore(sme(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=KL(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:i2(+s),i):r},i}function ime(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function AV(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=uSt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function sme(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function tRe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function y3(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function cSt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(tRe),o}function s(o,a){return function(u){u.children&&y3(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var fSt={depth:-1},ome={},IV={};function dSt(e){return e.id}function hSt(e){return e.parentId}function ame(){var e=dSt,t=hSt,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,y=new Map;if(n!=null){const v=s.map((E,T)=>pSt(n(E,T,i))),b=v.map(ume),w=new Set(v).add("");for(const E of b)w.has(E)||(w.add(E),v.push(E),b.push(ume(E)),s.push(IV));o=(E,T)=>v[T],a=(E,T)=>b[T]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new EC(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,y.set(m,y.has(m)?ome:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=y.get(p),!d)throw new Error("missing: "+p);if(d===ome)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===IV&&f.children.length===1;)f=f.children[0],--u;for(let v=s.length-1;v>=0&&(h=s[v],h.data===IV);--v)h.data=null}if(f.parent=fSt,f.eachBefore(function(v){v.depth=v.parent.depth+1,--u}).eachBefore(Xke),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=KL(i),r):e},r.parentId=function(i){return arguments.length?(t=KL(i),r):t},r.path=function(i){return arguments.length?(n=KL(i),r):n},r}function pSt(e){e=`${e}`;let t=e.length;return QG(e,t-1)&&!QG(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function ume(e){let t=e.length;if(t<2)return"";for(;--t>1&&!QG(e,t););return e.slice(0,t)}function QG(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function mSt(e,t){return e.parent===t.parent?1:2}function kV(e){var t=e.children;return t?t[0]:e.t}function RV(e){var t=e.children;return t?t[t.length-1]:e.t}function gSt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function ySt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function vSt(e,t,n){return e.a.parent===t.parent?e.a:n}function XL(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}XL.prototype=Object.create(EC.prototype);function bSt(e){for(var t=new XL(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new XL(s[o],o)),i.parent=n;return(t.parent=new XL(null,0)).children=[t],t}function xSt(){var e=mSt,t=1,n=1,r=null;function i(l){var c=bSt(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(b){b.x<f.x&&(f=b),b.x>d.x&&(d=b),b.depth>h.depth&&(h=b)});var p=f===d?1:e(f,d)/2,m=p-f.x,y=t/(d.x+p+m),v=n/(h.depth||1);l.eachBefore(function(b){b.x=(b.x+m)*y,b.y=b.depth*v})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){ySt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],y=d.m,v=h.m,b=p.m,w=m.m,E;p=RV(p),d=kV(d),p&&d;)m=kV(m),h=RV(h),h.a=l,E=p.z+b-d.z-y+e(p._,d._),E>0&&(gSt(vSt(p,l,f),l,E),y+=E,v+=E),b+=p.m,y+=d.m,w+=m.m,v+=h.m;p&&!RV(h)&&(h.t=p,h.m+=b-v),d&&!kV(m)&&(m.t=d,m.m+=y-w,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function b9(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var nRe=(1+Math.sqrt(5))/2;function rRe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,y,v,b,w,E,T,A;c<d;){h=i-n,p=s-r;do y=a[f++].value;while(!y&&f<d);for(v=b=y,T=Math.max(p/h,h/p)/(m*e),A=y*y*T,E=Math.max(b/A,A/v);f<d;++f){if(y+=l=a[f].value,l<v&&(v=l),l>b&&(b=l),A=y*y*T,w=Math.max(b/A,A/v),w>E){y-=l;break}E=w}o.push(u={value:y,dice:h<p,children:a.slice(c,f)}),u.dice?y3(u,n,r,i,m?r+=p*y/m:s):b9(u,n,r,m?n+=h*y/m:i,s),m-=y,c=f}return o}const iRe=function e(t){function n(r,i,s,o,a){rRe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(nRe);function _St(){var e=iRe,t=!1,n=1,r=1,i=[0],s=nw,o=nw,a=nw,u=nw,l=nw;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(tRe),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,y=d.x1-h,v=d.y1-h;y<p&&(p=y=(p+y)/2),v<m&&(m=v=(m+v)/2),d.x0=p,d.y0=m,d.x1=y,d.y1=v,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,y-=a(d)-h,v-=u(d)-h,y<p&&(p=y=(p+y)/2),v<m&&(m=v=(m+v)/2),e(d,p,m,y,v))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=Qke(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:i2(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:i2(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:i2(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:i2(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:i2(+d),c):l},c}function wSt(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,y,v){if(f>=d-1){var b=s[f];b.x0=p,b.y0=m,b.x1=y,b.y1=v;return}for(var w=l[f],E=h/2+w,T=f+1,A=d-1;T<A;){var I=T+A>>>1;l[I]<E?T=I+1:A=I}E-l[T-1]<l[T]-E&&f+1<T&&--T;var R=l[T]-w,D=h-R;if(y-p>v-m){var M=h?(p*D+y*R)/h:y;c(f,T,R,p,m,M,v),c(T,d,D,M,m,y,v)}else{var $=h?(m*D+v*R)/h:v;c(f,T,R,p,m,y,$),c(T,d,D,p,$,y,v)}}}function ESt(e,t,n,r,i){(e.depth&1?b9:y3)(e,t,n,r,i)}const TSt=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?y3(l,i,s,o,m?s+=(a-s)*l.value/m:a):b9(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=rRe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(nRe);function Zp(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function wx(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const JG=Symbol("implicit");function XA(){var e=new Vhe,t=[],n=[],r=JG;function i(s){let o=e.get(s);if(o===void 0){if(r!==JG)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Vhe;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return XA(t,n).unknown(r)},Zp.apply(i,arguments),i}function v3(){var e=XA().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var y=Hc(d).map(function(v){return p+s*v});return n(h?y.reverse():y)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return v3(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},Zp.apply(f(),arguments)}function SSt(e){return function(){return e}}function ZG(e){return+e}var lme=[0,1];function qc(e){return e}function eY(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:SSt(isNaN(t)?NaN:.5)}function CSt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function ASt(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=eY(i,r),s=n(o,s)):(r=eY(r,i),s=n(s,o)),function(a){return s(r(a))}}function ISt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=eY(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=Db(e,a,1,r)-1;return s[u](i[u](a))}}function b3(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function x9(){var e=lme,t=lme,n=T1,r,i,s,o=qc,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==qc&&(o=CSt(e[0],e[d-1])),a=d>2?ISt:ASt,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),Wd)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,ZG),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=h3,c()},f.clamp=function(d){return arguments.length?(o=d?!0:qc,c()):o!==qc},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function sRe(){return x9()(qc,qc)}function oRe(e,t,n,r){var i=Pb(e,t,n),s;switch(r=Qw(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=ake(i,o))&&(r.precision=s),jee(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=uke(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=oke(i))&&(r.precision=s-(r.type==="%")*2);break}}return YA(r)}function zE(e){var t=e.domain;return e.ticks=function(n){var r=t();return fG(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return oRe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=dG(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function Fp(){var e=sRe();return e.copy=function(){return b3(e,Fp())},Zp.apply(e,arguments),zE(e)}function aRe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,ZG),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return aRe(e).unknown(t)},e=arguments.length?Array.from(e,ZG):[0,1],zE(n)}function uRe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function cme(e){return Math.log(e)}function fme(e){return Math.exp(e)}function kSt(e){return-Math.log(-e)}function RSt(e){return-Math.exp(-e)}function NSt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function DSt(e){return e===10?NSt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function PSt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function dme(e){return(t,n)=>-e(-t,n)}function Yee(e){const t=e(cme,fme),n=t.domain;let r=10,i,s;function o(){return i=PSt(r),s=DSt(r),n()[0]<0?(i=dme(i),s=dme(s),e(kSt,RSt)):e(cme,fme),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const y=a==null?10:+a;let v=[];if(!(r%1)&&h-d<y){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;v.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;v.push(m)}v.length*2<y&&(v=fG(l,c,y))}else v=fG(d,h,Math.min(h-d,y)).map(s);return f?v.reverse():v},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=Qw(u)).precision==null&&(u.trim=!0),u=YA(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(uRe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function lRe(){const e=Yee(x9()).domain([1,10]);return e.copy=()=>b3(e,lRe()).base(e.base()),Zp.apply(e,arguments),e}function hme(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function pme(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Kee(e){var t=1,n=e(hme(t),pme(t));return n.constant=function(r){return arguments.length?e(hme(t=+r),pme(t)):t},zE(n)}function cRe(){var e=Kee(x9());return e.copy=function(){return b3(e,cRe()).constant(e.constant())},Zp.apply(e,arguments)}function mme(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function OSt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function MSt(e){return e<0?-e*e:e*e}function Xee(e){var t=e(qc,qc),n=1;function r(){return n===1?e(qc,qc):n===.5?e(OSt,MSt):e(mme(n),mme(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},zE(t)}function Qee(){var e=Xee(x9());return e.copy=function(){return b3(e,Qee()).exponent(e.exponent())},Zp.apply(e,arguments),e}function LSt(){return Qee.apply(null,arguments).exponent(.5)}function fRe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=sIe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[Db(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Fy),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return fRe().domain(e).range(t).unknown(r)},Zp.apply(s,arguments)}function dRe(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[Db(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return dRe().domain([e,t]).range(i).unknown(s)},Zp.apply(zE(o),arguments)}function hRe(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[Db(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return hRe().domain(e).range(t).unknown(n)},Zp.apply(i,arguments)}const NV=new Date,DV=new Date;function pa(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>pa(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(NV.setTime(+s),DV.setTime(+o),e(NV),e(DV),Math.floor(n(NV,DV))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const TC=pa(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);TC.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?pa(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):TC);TC.range;const Cy=1e3,Zd=Cy*60,Ay=Zd*60,s1=Ay*24,Jee=s1*7,gme=s1*30,PV=s1*365,Iy=pa(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Cy)},(e,t)=>(t-e)/Cy,e=>e.getUTCSeconds());Iy.range;const _9=pa(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Cy)},(e,t)=>{e.setTime(+e+t*Zd)},(e,t)=>(t-e)/Zd,e=>e.getMinutes());_9.range;const w9=pa(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Zd)},(e,t)=>(t-e)/Zd,e=>e.getUTCMinutes());w9.range;const E9=pa(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Cy-e.getMinutes()*Zd)},(e,t)=>{e.setTime(+e+t*Ay)},(e,t)=>(t-e)/Ay,e=>e.getHours());E9.range;const T9=pa(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ay)},(e,t)=>(t-e)/Ay,e=>e.getUTCHours());T9.range;const jy=pa(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Zd)/s1,e=>e.getDate()-1);jy.range;const hb=pa(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/s1,e=>e.getUTCDate()-1);hb.range;const pRe=pa(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/s1,e=>Math.floor(e/s1));pRe.range;function VE(e){return pa(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Zd)/Jee)}const QA=VE(0),QF=VE(1),$St=VE(2),FSt=VE(3),SC=VE(4),BSt=VE(5),jSt=VE(6);QA.range;QF.range;$St.range;FSt.range;SC.range;BSt.range;jSt.range;function HE(e){return pa(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Jee)}const JA=HE(0),JF=HE(1),USt=HE(2),zSt=HE(3),CC=HE(4),VSt=HE(5),HSt=HE(6);JA.range;JF.range;USt.range;zSt.range;CC.range;VSt.range;HSt.range;const zD=pa(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());zD.range;const VD=pa(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());VD.range;const U0=pa(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());U0.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:pa(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});U0.range;const z0=pa(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());z0.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:pa(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});z0.range;function mRe(e,t,n,r,i,s){const o=[[Iy,1,Cy],[Iy,5,5*Cy],[Iy,15,15*Cy],[Iy,30,30*Cy],[s,1,Zd],[s,5,5*Zd],[s,15,15*Zd],[s,30,30*Zd],[i,1,Ay],[i,3,3*Ay],[i,6,6*Ay],[i,12,12*Ay],[r,1,s1],[r,2,2*s1],[n,1,Jee],[t,1,gme],[t,3,3*gme],[e,1,PV]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=WA(([,,y])=>y).right(o,d);if(h===o.length)return e.every(Pb(l/PV,c/PV,f));if(h===0)return TC.every(Math.max(Pb(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[qSt,WSt]=mRe(z0,VD,JA,pRe,T9,w9),[GSt,YSt]=mRe(U0,zD,QA,jy,E9,_9);function OV(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function MV(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function nR(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function gRe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=rR(i),c=iR(i),f=rR(s),d=iR(s),h=rR(o),p=iR(o),m=rR(a),y=iR(a),v=rR(u),b=iR(u),w={a:ne,A:Z,b:ie,B:q,c:null,d:wme,e:wme,f:y2t,g:A2t,G:k2t,H:p2t,I:m2t,j:g2t,L:yRe,m:v2t,M:b2t,p:j,q:G,Q:Sme,s:Cme,S:x2t,u:_2t,U:w2t,V:E2t,w:T2t,W:S2t,x:null,X:null,y:C2t,Y:I2t,Z:R2t,"%":Tme},E={a:V,A:Y,b:ee,B:ae,c:null,d:Eme,e:Eme,f:O2t,g:H2t,G:W2t,H:N2t,I:D2t,j:P2t,L:bRe,m:M2t,M:L2t,p:_e,q:pe,Q:Sme,s:Cme,S:$2t,u:F2t,U:B2t,V:j2t,w:U2t,W:z2t,x:null,X:null,y:V2t,Y:q2t,Z:G2t,"%":Tme},T={a:M,A:$,b:U,B:F,c:H,d:xme,e:xme,f:c2t,g:bme,G:vme,H:_me,I:_me,j:o2t,L:l2t,m:s2t,M:a2t,p:D,q:i2t,Q:d2t,s:h2t,S:u2t,u:ZSt,U:e2t,V:t2t,w:JSt,W:n2t,x:Q,X:J,y:bme,Y:vme,Z:r2t,"%":f2t};w.x=A(n,w),w.X=A(r,w),w.c=A(t,w),E.x=A(n,E),E.X=A(r,E),E.c=A(t,E);function A(Te,Le){return function(ye){var he=[],$e=-1,Ne=0,tt=Te.length,it,Me,Ge;for(ye instanceof Date||(ye=new Date(+ye));++$e<tt;)Te.charCodeAt($e)===37&&(he.push(Te.slice(Ne,$e)),(Me=yme[it=Te.charAt(++$e)])!=null?it=Te.charAt(++$e):Me=it==="e"?" ":"0",(Ge=Le[it])&&(it=Ge(ye,Me)),he.push(it),Ne=$e+1);return he.push(Te.slice(Ne,$e)),he.join("")}}function I(Te,Le){return function(ye){var he=nR(1900,void 0,1),$e=R(he,Te,ye+="",0),Ne,tt;if($e!=ye.length)return null;if("Q"in he)return new Date(he.Q);if("s"in he)return new Date(he.s*1e3+("L"in he?he.L:0));if(Le&&!("Z"in he)&&(he.Z=0),"p"in he&&(he.H=he.H%12+he.p*12),he.m===void 0&&(he.m="q"in he?he.q:0),"V"in he){if(he.V<1||he.V>53)return null;"w"in he||(he.w=1),"Z"in he?(Ne=MV(nR(he.y,0,1)),tt=Ne.getUTCDay(),Ne=tt>4||tt===0?JF.ceil(Ne):JF(Ne),Ne=hb.offset(Ne,(he.V-1)*7),he.y=Ne.getUTCFullYear(),he.m=Ne.getUTCMonth(),he.d=Ne.getUTCDate()+(he.w+6)%7):(Ne=OV(nR(he.y,0,1)),tt=Ne.getDay(),Ne=tt>4||tt===0?QF.ceil(Ne):QF(Ne),Ne=jy.offset(Ne,(he.V-1)*7),he.y=Ne.getFullYear(),he.m=Ne.getMonth(),he.d=Ne.getDate()+(he.w+6)%7)}else("W"in he||"U"in he)&&("w"in he||(he.w="u"in he?he.u%7:"W"in he?1:0),tt="Z"in he?MV(nR(he.y,0,1)).getUTCDay():OV(nR(he.y,0,1)).getDay(),he.m=0,he.d="W"in he?(he.w+6)%7+he.W*7-(tt+5)%7:he.w+he.U*7-(tt+6)%7);return"Z"in he?(he.H+=he.Z/100|0,he.M+=he.Z%100,MV(he)):OV(he)}}function R(Te,Le,ye,he){for(var $e=0,Ne=Le.length,tt=ye.length,it,Me;$e<Ne;){if(he>=tt)return-1;if(it=Le.charCodeAt($e++),it===37){if(it=Le.charAt($e++),Me=T[it in yme?Le.charAt($e++):it],!Me||(he=Me(Te,ye,he))<0)return-1}else if(it!=ye.charCodeAt(he++))return-1}return he}function D(Te,Le,ye){var he=l.exec(Le.slice(ye));return he?(Te.p=c.get(he[0].toLowerCase()),ye+he[0].length):-1}function M(Te,Le,ye){var he=h.exec(Le.slice(ye));return he?(Te.w=p.get(he[0].toLowerCase()),ye+he[0].length):-1}function $(Te,Le,ye){var he=f.exec(Le.slice(ye));return he?(Te.w=d.get(he[0].toLowerCase()),ye+he[0].length):-1}function U(Te,Le,ye){var he=v.exec(Le.slice(ye));return he?(Te.m=b.get(he[0].toLowerCase()),ye+he[0].length):-1}function F(Te,Le,ye){var he=m.exec(Le.slice(ye));return he?(Te.m=y.get(he[0].toLowerCase()),ye+he[0].length):-1}function H(Te,Le,ye){return R(Te,t,Le,ye)}function Q(Te,Le,ye){return R(Te,n,Le,ye)}function J(Te,Le,ye){return R(Te,r,Le,ye)}function ne(Te){return o[Te.getDay()]}function Z(Te){return s[Te.getDay()]}function ie(Te){return u[Te.getMonth()]}function q(Te){return a[Te.getMonth()]}function j(Te){return i[+(Te.getHours()>=12)]}function G(Te){return 1+~~(Te.getMonth()/3)}function V(Te){return o[Te.getUTCDay()]}function Y(Te){return s[Te.getUTCDay()]}function ee(Te){return u[Te.getUTCMonth()]}function ae(Te){return a[Te.getUTCMonth()]}function _e(Te){return i[+(Te.getUTCHours()>=12)]}function pe(Te){return 1+~~(Te.getUTCMonth()/3)}return{format:function(Te){var Le=A(Te+="",w);return Le.toString=function(){return Te},Le},parse:function(Te){var Le=I(Te+="",!1);return Le.toString=function(){return Te},Le},utcFormat:function(Te){var Le=A(Te+="",E);return Le.toString=function(){return Te},Le},utcParse:function(Te){var Le=I(Te+="",!0);return Le.toString=function(){return Te},Le}}}var yme={"-":"",_:" ",0:"0"},Ha=/^\s*\d+/,KSt=/^%/,XSt=/[\\^$*+?|[\]().{}]/g;function gi(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function QSt(e){return e.replace(XSt,"\\$&")}function rR(e){return new RegExp("^(?:"+e.map(QSt).join("|")+")","i")}function iR(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function JSt(e,t,n){var r=Ha.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function ZSt(e,t,n){var r=Ha.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function e2t(e,t,n){var r=Ha.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function t2t(e,t,n){var r=Ha.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function n2t(e,t,n){var r=Ha.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function vme(e,t,n){var r=Ha.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function bme(e,t,n){var r=Ha.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function r2t(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function i2t(e,t,n){var r=Ha.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function s2t(e,t,n){var r=Ha.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function xme(e,t,n){var r=Ha.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function o2t(e,t,n){var r=Ha.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function _me(e,t,n){var r=Ha.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function a2t(e,t,n){var r=Ha.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function u2t(e,t,n){var r=Ha.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function l2t(e,t,n){var r=Ha.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function c2t(e,t,n){var r=Ha.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function f2t(e,t,n){var r=KSt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function d2t(e,t,n){var r=Ha.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function h2t(e,t,n){var r=Ha.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function wme(e,t){return gi(e.getDate(),t,2)}function p2t(e,t){return gi(e.getHours(),t,2)}function m2t(e,t){return gi(e.getHours()%12||12,t,2)}function g2t(e,t){return gi(1+jy.count(U0(e),e),t,3)}function yRe(e,t){return gi(e.getMilliseconds(),t,3)}function y2t(e,t){return yRe(e,t)+"000"}function v2t(e,t){return gi(e.getMonth()+1,t,2)}function b2t(e,t){return gi(e.getMinutes(),t,2)}function x2t(e,t){return gi(e.getSeconds(),t,2)}function _2t(e){var t=e.getDay();return t===0?7:t}function w2t(e,t){return gi(QA.count(U0(e)-1,e),t,2)}function vRe(e){var t=e.getDay();return t>=4||t===0?SC(e):SC.ceil(e)}function E2t(e,t){return e=vRe(e),gi(SC.count(U0(e),e)+(U0(e).getDay()===4),t,2)}function T2t(e){return e.getDay()}function S2t(e,t){return gi(QF.count(U0(e)-1,e),t,2)}function C2t(e,t){return gi(e.getFullYear()%100,t,2)}function A2t(e,t){return e=vRe(e),gi(e.getFullYear()%100,t,2)}function I2t(e,t){return gi(e.getFullYear()%1e4,t,4)}function k2t(e,t){var n=e.getDay();return e=n>=4||n===0?SC(e):SC.ceil(e),gi(e.getFullYear()%1e4,t,4)}function R2t(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+gi(t/60|0,"0",2)+gi(t%60,"0",2)}function Eme(e,t){return gi(e.getUTCDate(),t,2)}function N2t(e,t){return gi(e.getUTCHours(),t,2)}function D2t(e,t){return gi(e.getUTCHours()%12||12,t,2)}function P2t(e,t){return gi(1+hb.count(z0(e),e),t,3)}function bRe(e,t){return gi(e.getUTCMilliseconds(),t,3)}function O2t(e,t){return bRe(e,t)+"000"}function M2t(e,t){return gi(e.getUTCMonth()+1,t,2)}function L2t(e,t){return gi(e.getUTCMinutes(),t,2)}function $2t(e,t){return gi(e.getUTCSeconds(),t,2)}function F2t(e){var t=e.getUTCDay();return t===0?7:t}function B2t(e,t){return gi(JA.count(z0(e)-1,e),t,2)}function xRe(e){var t=e.getUTCDay();return t>=4||t===0?CC(e):CC.ceil(e)}function j2t(e,t){return e=xRe(e),gi(CC.count(z0(e),e)+(z0(e).getUTCDay()===4),t,2)}function U2t(e){return e.getUTCDay()}function z2t(e,t){return gi(JF.count(z0(e)-1,e),t,2)}function V2t(e,t){return gi(e.getUTCFullYear()%100,t,2)}function H2t(e,t){return e=xRe(e),gi(e.getUTCFullYear()%100,t,2)}function q2t(e,t){return gi(e.getUTCFullYear()%1e4,t,4)}function W2t(e,t){var n=e.getUTCDay();return e=n>=4||n===0?CC(e):CC.ceil(e),gi(e.getUTCFullYear()%1e4,t,4)}function G2t(){return"+0000"}function Tme(){return"%"}function Sme(e){return+e}function Cme(e){return Math.floor(+e/1e3)}var MS,Zee,_Re,S9,wRe;Y2t({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Y2t(e){return MS=gRe(e),Zee=MS.format,_Re=MS.parse,S9=MS.utcFormat,wRe=MS.utcParse,MS}function K2t(e){return new Date(e)}function X2t(e){return e instanceof Date?+e:+new Date(+e)}function ete(e,t,n,r,i,s,o,a,u,l){var c=sRe(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),y=l("%I %p"),v=l("%a %d"),b=l("%b %d"),w=l("%B"),E=l("%Y");function T(A){return(u(A)<A?h:a(A)<A?p:o(A)<A?m:s(A)<A?y:r(A)<A?i(A)<A?v:b:n(A)<A?w:E)(A)}return c.invert=function(A){return new Date(f(A))},c.domain=function(A){return arguments.length?d(Array.from(A,X2t)):d().map(K2t)},c.ticks=function(A){var I=d();return e(I[0],I[I.length-1],A??10)},c.tickFormat=function(A,I){return I==null?T:l(I)},c.nice=function(A){var I=d();return(!A||typeof A.range!="function")&&(A=t(I[0],I[I.length-1],A??10)),A?d(uRe(I,A)):c},c.copy=function(){return b3(c,ete(e,t,n,r,i,s,o,a,u,l))},c}function ERe(){return Zp.apply(ete(GSt,YSt,U0,zD,QA,jy,E9,_9,Iy,Zee).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Q2t(){return Zp.apply(ete(qSt,WSt,z0,VD,JA,hb,T9,w9,Iy,S9).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function C9(){var e=0,t=1,n,r,i,s,o=qc,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(T1),l.rangeRound=c(h3),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function Ex(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function tte(){var e=zE(C9()(qc));return e.copy=function(){return Ex(e,tte())},wx.apply(e,arguments)}function TRe(){var e=Yee(C9()).domain([1,10]);return e.copy=function(){return Ex(e,TRe()).base(e.base())},wx.apply(e,arguments)}function SRe(){var e=Kee(C9());return e.copy=function(){return Ex(e,SRe()).constant(e.constant())},wx.apply(e,arguments)}function nte(){var e=Xee(C9());return e.copy=function(){return Ex(e,nte()).exponent(e.exponent())},wx.apply(e,arguments)}function J2t(){return nte.apply(null,arguments).exponent(.5)}function A9(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=qc,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(y){var v,b,w;return arguments.length?([v,b,w]=y,l=Ree(m,[v,b,w]),h):[l(0),l(.5),l(1)]}}return h.range=p(T1),h.rangeRound=p(h3),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function CRe(){var e=zE(A9()(qc));return e.copy=function(){return Ex(e,CRe())},wx.apply(e,arguments)}function ARe(){var e=Yee(A9()).domain([.1,1,10]);return e.copy=function(){return Ex(e,ARe()).base(e.base())},wx.apply(e,arguments)}function IRe(){var e=Kee(A9());return e.copy=function(){return Ex(e,IRe()).constant(e.constant())},wx.apply(e,arguments)}function rte(){var e=Xee(A9());return e.copy=function(){return Ex(e,rte()).exponent(e.exponent())},wx.apply(e,arguments)}function Z2t(){return rte.apply(null,arguments).exponent(.5)}function em(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const eCt=em("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),tCt=em("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),nCt=em("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),rCt=em("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),iCt=em("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),sCt=em("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),oCt=em("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),aCt=em("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),uCt=em("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),lCt=em("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),kRe=em("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function mr(e){return function(){return e}}const Ame=Math.abs,Hu=Math.atan2,C_=Math.cos,cCt=Math.max,LV=Math.min,Om=Math.sin,bw=Math.sqrt,qu=1e-12,AC=Math.PI,ZF=AC/2,qN=2*AC;function fCt(e){return e>1?0:e<-1?AC:Math.acos(e)}function Ime(e){return e>=1?ZF:e<=-1?-ZF:Math.asin(e)}function I9(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Mee(t)}function dCt(e){return e.innerRadius}function hCt(e){return e.outerRadius}function pCt(e){return e.startAngle}function mCt(e){return e.endAngle}function gCt(e){return e&&e.padAngle}function yCt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<qu))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function m6(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/bw(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,y=(d+p)/2,v=(h+m)/2,b=p-d,w=m-h,E=b*b+w*w,T=i-s,A=d*m-p*h,I=(w<0?-1:1)*bw(cCt(0,T*T*E-A*A)),R=(A*w-b*I)/E,D=(-A*b-w*I)/E,M=(A*w+b*I)/E,$=(-A*b+w*I)/E,U=R-y,F=D-v,H=M-y,Q=$-v;return U*U+F*F>H*H+Q*Q&&(R=M,D=$),{cx:R,cy:D,x01:-c,y01:-f,x11:R*(i/T-1),y11:D*(i/T-1)}}function tY(){var e=dCt,t=hCt,n=mr(0),r=null,i=pCt,s=mCt,o=gCt,a=null,u=I9(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-ZF,m=s.apply(this,arguments)-ZF,y=Ame(m-p),v=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>qu))a.moveTo(0,0);else if(y>qN-qu)a.moveTo(h*C_(p),h*Om(p)),a.arc(0,0,h,p,m,!v),d>qu&&(a.moveTo(d*C_(m),d*Om(m)),a.arc(0,0,d,m,p,v));else{var b=p,w=m,E=p,T=m,A=y,I=y,R=o.apply(this,arguments)/2,D=R>qu&&(r?+r.apply(this,arguments):bw(d*d+h*h)),M=LV(Ame(h-d)/2,+n.apply(this,arguments)),$=M,U=M,F,H;if(D>qu){var Q=Ime(D/d*Om(R)),J=Ime(D/h*Om(R));(A-=Q*2)>qu?(Q*=v?1:-1,E+=Q,T-=Q):(A=0,E=T=(p+m)/2),(I-=J*2)>qu?(J*=v?1:-1,b+=J,w-=J):(I=0,b=w=(p+m)/2)}var ne=h*C_(b),Z=h*Om(b),ie=d*C_(T),q=d*Om(T);if(M>qu){var j=h*C_(w),G=h*Om(w),V=d*C_(E),Y=d*Om(E),ee;if(y<AC)if(ee=yCt(ne,Z,V,Y,j,G,ie,q)){var ae=ne-ee[0],_e=Z-ee[1],pe=j-ee[0],Te=G-ee[1],Le=1/Om(fCt((ae*pe+_e*Te)/(bw(ae*ae+_e*_e)*bw(pe*pe+Te*Te)))/2),ye=bw(ee[0]*ee[0]+ee[1]*ee[1]);$=LV(M,(d-ye)/(Le-1)),U=LV(M,(h-ye)/(Le+1))}else $=U=0}I>qu?U>qu?(F=m6(V,Y,ne,Z,h,U,v),H=m6(j,G,ie,q,h,U,v),a.moveTo(F.cx+F.x01,F.cy+F.y01),U<M?a.arc(F.cx,F.cy,U,Hu(F.y01,F.x01),Hu(H.y01,H.x01),!v):(a.arc(F.cx,F.cy,U,Hu(F.y01,F.x01),Hu(F.y11,F.x11),!v),a.arc(0,0,h,Hu(F.cy+F.y11,F.cx+F.x11),Hu(H.cy+H.y11,H.cx+H.x11),!v),a.arc(H.cx,H.cy,U,Hu(H.y11,H.x11),Hu(H.y01,H.x01),!v))):(a.moveTo(ne,Z),a.arc(0,0,h,b,w,!v)):a.moveTo(ne,Z),!(d>qu)||!(A>qu)?a.lineTo(ie,q):$>qu?(F=m6(ie,q,j,G,d,-$,v),H=m6(ne,Z,V,Y,d,-$,v),a.lineTo(F.cx+F.x01,F.cy+F.y01),$<M?a.arc(F.cx,F.cy,$,Hu(F.y01,F.x01),Hu(H.y01,H.x01),!v):(a.arc(F.cx,F.cy,$,Hu(F.y01,F.x01),Hu(F.y11,F.x11),!v),a.arc(0,0,d,Hu(F.cy+F.y11,F.cx+F.x11),Hu(H.cy+H.y11,H.cx+H.x11),v),a.arc(H.cx,H.cy,$,Hu(H.y11,H.x11),Hu(H.y01,H.x01),!v))):a.arc(0,0,d,T,E,v)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-AC/2;return[C_(f)*c,Om(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:mr(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:mr(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:mr(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:mr(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:mr(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:mr(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:mr(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function k9(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function RRe(e){this._context=e}RRe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function ite(e){return new RRe(e)}function NRe(e){return e[0]}function DRe(e){return e[1]}function PRe(e,t){var n=mr(!0),r=null,i=ite,s=null,o=I9(a);e=typeof e=="function"?e:e===void 0?NRe:mr(e),t=typeof t=="function"?t:t===void 0?DRe:mr(t);function a(u){var l,c=(u=k9(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:mr(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:mr(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:mr(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function ORe(e,t,n){var r=null,i=mr(!0),s=null,o=ite,a=null,u=I9(l);e=typeof e=="function"?e:e===void 0?NRe:mr(+e),t=typeof t=="function"?t:mr(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?DRe:mr(+n);function l(f){var d,h,p,m=(f=k9(f)).length,y,v=!1,b,w=new Array(m),E=new Array(m);for(s==null&&(a=o(b=u())),d=0;d<=m;++d){if(!(d<m&&i(y=f[d],d,f))===v)if(v=!v)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(w[p],E[p]);a.lineEnd(),a.areaEnd()}v&&(w[d]=+e(y,d,f),E[d]=+t(y,d,f),a.point(r?+r(y,d,f):w[d],n?+n(y,d,f):E[d]))}if(b)return a=null,b+""||null}function c(){return PRe().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:mr(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:mr(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:mr(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:mr(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:mr(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:mr(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:mr(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}function vCt(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function bCt(e){return e}function xCt(){var e=bCt,t=vCt,n=null,r=mr(0),i=mr(qN),s=mr(0);function o(a){var u,l=(a=k9(a)).length,c,f,d=0,h=new Array(l),p=new Array(l),m=+r.apply(this,arguments),y=Math.min(qN,Math.max(-qN,i.apply(this,arguments)-m)),v,b=Math.min(Math.abs(y)/l,s.apply(this,arguments)),w=b*(y<0?-1:1),E;for(u=0;u<l;++u)(E=p[h[u]=u]=+e(a[u],u,a))>0&&(d+=E);for(t!=null?h.sort(function(T,A){return t(p[T],p[A])}):n!=null&&h.sort(function(T,A){return n(a[T],a[A])}),u=0,f=d?(y-l*w)/d:0;u<l;++u,m=v)c=h[u],E=p[c],v=m+(E>0?E*f:0)+w,p[c]={data:a[c],index:u,value:E,startAngle:m,endAngle:v,padAngle:b};return p}return o.value=function(a){return arguments.length?(e=typeof a=="function"?a:mr(+a),o):e},o.sortValues=function(a){return arguments.length?(t=a,n=null,o):t},o.sort=function(a){return arguments.length?(n=a,t=null,o):n},o.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:mr(+a),o):r},o.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:mr(+a),o):i},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:mr(+a),o):s},o}const _Ct={draw(e,t){const n=bw(t/AC);e.moveTo(n,0),e.arc(0,0,n,0,qN)}};function wCt(e,t){let n=null,r=I9(i);e=typeof e=="function"?e:mr(e||_Ct),t=typeof t=="function"?t:mr(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:mr(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:mr(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Mb(){}function e5(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function R9(e){this._context=e}R9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:e5(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:e5(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ECt(e){return new R9(e)}function MRe(e){this._context=e}MRe.prototype={areaStart:Mb,areaEnd:Mb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:e5(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function TCt(e){return new MRe(e)}function LRe(e){this._context=e}LRe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:e5(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function SCt(e){return new LRe(e)}function $Re(e,t){this._basis=new R9(e),this._beta=t}$Re.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const CCt=function e(t){function n(r){return t===1?new R9(r):new $Re(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function t5(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function ste(e,t){this._context=e,this._k=(1-t)/6}ste.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:t5(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:t5(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ACt=function e(t){function n(r){return new ste(r,t)}return n.tension=function(r){return e(+r)},n}(0);function ote(e,t){this._context=e,this._k=(1-t)/6}ote.prototype={areaStart:Mb,areaEnd:Mb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:t5(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ICt=function e(t){function n(r){return new ote(r,t)}return n.tension=function(r){return e(+r)},n}(0);function ate(e,t){this._context=e,this._k=(1-t)/6}ate.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:t5(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const kCt=function e(t){function n(r){return new ate(r,t)}return n.tension=function(r){return e(+r)},n}(0);function ute(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>qu){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>qu){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function FRe(e,t){this._context=e,this._alpha=t}FRe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:ute(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const RCt=function e(t){function n(r){return t?new FRe(r,t):new ste(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function BRe(e,t){this._context=e,this._alpha=t}BRe.prototype={areaStart:Mb,areaEnd:Mb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:ute(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const NCt=function e(t){function n(r){return t?new BRe(r,t):new ote(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function jRe(e,t){this._context=e,this._alpha=t}jRe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ute(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const DCt=function e(t){function n(r){return t?new jRe(r,t):new ate(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function URe(e){this._context=e}URe.prototype={areaStart:Mb,areaEnd:Mb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function PCt(e){return new URe(e)}function kme(e){return e<0?-1:1}function Rme(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(kme(s)+kme(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Nme(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function $V(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function n5(e){this._context=e}n5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:$V(this,this._t0,Nme(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,$V(this,Nme(this,n=Rme(this,e,t)),n);break;default:$V(this,this._t0,n=Rme(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function zRe(e){this._context=new VRe(e)}(zRe.prototype=Object.create(n5.prototype)).point=function(e,t){n5.prototype.point.call(this,t,e)};function VRe(e){this._context=e}VRe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function OCt(e){return new n5(e)}function MCt(e){return new zRe(e)}function HRe(e){this._context=e}HRe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Dme(e),i=Dme(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Dme(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function LCt(e){return new HRe(e)}function N9(e,t){this._context=e,this._t=t}N9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function $Ct(e){return new N9(e,.5)}function FCt(e){return new N9(e,0)}function BCt(e){return new N9(e,1)}function Pme(e,t){if((o=e.length)>1)for(var n=1,r,i,s=e[t[0]],o,a=s.length;n<o;++n)for(i=s,s=e[t[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Ome(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function jCt(e,t){return e[t]}function UCt(e){const t=[];return t.key=e,t}function zCt(){var e=mr([]),t=Ome,n=Pme,r=jCt;function i(s){var o=Array.from(e.apply(this,arguments),UCt),a,u=o.length,l=-1,c;for(const f of s)for(a=0,++l;a<u;++a)(o[a][l]=[0,+r(f,o[a].key,l,s)]).data=f;for(a=0,c=k9(t(o));a<u;++a)o[c[a]].index=a;return n(o,c),o}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:mr(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:mr(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?Ome:typeof s=="function"?s:mr(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??Pme,i):n},i}function JR(e,t,n){this.k=e,this.x=t,this.y=n}JR.prototype={constructor:JR,scale:function(e){return e===1?this:new JR(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new JR(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};JR.prototype;function gp(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Lb(e){return!!e&&!!e[Ns]}function o1(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===QCt}(e)||Array.isArray(e)||!!e[Ume]||!!(!((t=e.constructor)===null||t===void 0)&&t[Ume])||lte(e)||cte(e))}function eE(e,t,n){n===void 0&&(n=!1),ZA(e)===0?(n?Object.keys:B2)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function ZA(e){var t=e[Ns];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:lte(e)?2:cte(e)?3:0}function F2(e,t){return ZA(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function VCt(e,t){return ZA(e)===2?e.get(t):e[t]}function qRe(e,t,n){var r=ZA(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function WRe(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function lte(e){return KCt&&e instanceof Map}function cte(e){return XCt&&e instanceof Set}function G_(e){return e.o||e.t}function fte(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=YRe(e);delete t[Ns];for(var n=B2(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function dte(e,t){return t===void 0&&(t=!1),hte(e)||Lb(e)||!o1(e)||(ZA(e)>1&&(e.set=e.add=e.clear=e.delete=HCt),Object.freeze(e),t&&eE(e,function(n,r){return dte(r,!0)},!0)),e}function HCt(){gp(2)}function hte(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function T0(e){var t=sY[e];return t||gp(18,e),t}function qCt(e,t){sY[e]||(sY[e]=t)}function nY(){return HD}function FV(e,t){t&&(T0("Patches"),e.u=[],e.s=[],e.v=t)}function r5(e){rY(e),e.p.forEach(WCt),e.p=null}function rY(e){e===HD&&(HD=e.l)}function Mme(e){return HD={p:[],l:HD,h:e,m:!0,_:0}}function WCt(e){var t=e[Ns];t.i===0||t.i===1?t.j():t.g=!0}function BV(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||T0("ES5").S(t,e,r),r?(n[Ns].P&&(r5(t),gp(4)),o1(e)&&(e=i5(t,e),t.l||s5(t,e)),t.u&&T0("Patches").M(n[Ns].t,e,t.u,t.s)):e=i5(t,n,[]),r5(t),t.u&&t.v(t.u,t.s),e!==GRe?e:void 0}function i5(e,t,n){if(hte(t))return t;var r=t[Ns];if(!r)return eE(t,function(a,u){return Lme(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return s5(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=fte(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),eE(s,function(a,u){return Lme(e,r,i,a,u,n,o)}),s5(e,i,!1),n&&e.u&&T0("Patches").N(r,n,e.u,e.s)}return r.o}function Lme(e,t,n,r,i,s,o){if(Lb(i)){var a=i5(e,i,s&&t&&t.i!==3&&!F2(t.R,r)?s.concat(r):void 0);if(qRe(n,r,a),!Lb(a))return;e.m=!1}else o&&n.add(i);if(o1(i)&&!hte(i)){if(!e.h.D&&e._<1)return;i5(e,i),t&&t.A.l||s5(e,i)}}function s5(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&dte(t,n)}function jV(e,t){var n=e[Ns];return(n?G_(n):e)[t]}function $me(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Wv(e){e.P||(e.P=!0,e.l&&Wv(e.l))}function UV(e){e.o||(e.o=fte(e.t))}function iY(e,t,n){var r=lte(t)?T0("MapSet").F(t,n):cte(t)?T0("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:nY(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=qD;o&&(u=[a],l=ZR);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):T0("ES5").J(t,n);return(n?n.A:nY()).p.push(r),r}function GCt(e){return Lb(e)||gp(22,e),function t(n){if(!o1(n))return n;var r,i=n[Ns],s=ZA(n);if(i){if(!i.P&&(i.i<4||!T0("ES5").K(i)))return i.t;i.I=!0,r=Fme(n,s),i.I=!1}else r=Fme(n,s);return eE(r,function(o,a){i&&VCt(i.t,o)===a||qRe(r,o,t(a))}),s===3?new Set(r):r}(e)}function Fme(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return fte(e)}function YCt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[Ns];return qD.get(u,s)},set:function(u){var l=this[Ns];qD.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][Ns];if(!a.P)switch(a.i){case 5:r(a)&&Wv(a);break;case 4:n(a)&&Wv(a)}}}function n(s){for(var o=s.t,a=s.k,u=B2(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==Ns){var f=o[c];if(f===void 0&&!F2(o,c))return!0;var d=a[c],h=d&&d[Ns];if(h?h.t!==f:!WRe(d,f))return!0}}var p=!!o[Ns];return u.length!==B2(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};qCt("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=YRe(f);delete p[Ns];for(var m=B2(p),y=0;y<m.length;y++){var v=m[y];p[v]=e(v,c||!!p[v].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:nY(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,Ns,{value:l,writable:!0}),u},S:function(s,o,a){a?Lb(o)&&o[Ns].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[Ns];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)eE(d,function(w){w!==Ns&&(f[w]!==void 0||F2(f,w)?h[w]||u(d[w]):(h[w]=!0,Wv(c)))}),eE(f,function(w){d[w]!==void 0||F2(d,w)||(h[w]=!1,Wv(c))});else if(p===5){if(r(c)&&(Wv(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var y=f.length;y<d.length;y++)h[y]=!0;for(var v=Math.min(d.length,f.length),b=0;b<v;b++)d.hasOwnProperty(b)||(h[b]=!0),h[b]===void 0&&u(d[b])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var Bme,HD,pte=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",KCt=typeof Map<"u",XCt=typeof Set<"u",jme=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",GRe=pte?Symbol.for("immer-nothing"):((Bme={})["immer-nothing"]=!0,Bme),Ume=pte?Symbol.for("immer-draftable"):"__$immer_draftable",Ns=pte?Symbol.for("immer-state"):"__$immer_state",QCt=""+Object.prototype.constructor,B2=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,YRe=Object.getOwnPropertyDescriptors||function(e){var t={};return B2(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},sY={},qD={get:function(e,t){if(t===Ns)return e;var n=G_(e);if(!F2(n,t))return function(i,s,o){var a,u=$me(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!o1(r)?r:r===jV(e.t,t)?(UV(e),e.o[t]=iY(e.A.h,r,e)):r},has:function(e,t){return t in G_(e)},ownKeys:function(e){return Reflect.ownKeys(G_(e))},set:function(e,t,n){var r=$me(G_(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=jV(G_(e),t),s=i==null?void 0:i[Ns];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(WRe(n,i)&&(n!==void 0||F2(e.t,t)))return!0;UV(e),Wv(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return jV(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,UV(e),Wv(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=G_(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){gp(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){gp(12)}},ZR={};eE(qD,function(e,t){ZR[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),ZR.deleteProperty=function(e,t){return ZR.set.call(this,e,t,void 0)},ZR.set=function(e,t,n){return qD.set.call(this,e[0],t,n,e[0])};var JCt=function(){function e(n){var r=this;this.O=jme,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var y=this;m===void 0&&(m=a);for(var v=arguments.length,b=Array(v>1?v-1:0),w=1;w<v;w++)b[w-1]=arguments[w];return u.produce(m,function(E){var T;return(T=s).call.apply(T,[y,E].concat(b))})}}var l;if(typeof s!="function"&&gp(6),o!==void 0&&typeof o!="function"&&gp(7),o1(i)){var c=Mme(r),f=iY(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?r5(c):rY(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return FV(c,o),BV(m,c)},function(m){throw r5(c),m}):(FV(c,o),BV(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===GRe&&(l=void 0),r.D&&dte(l,!0),o){var h=[],p=[];T0("Patches").M(i,l,h,p),o(h,p)}return l}gp(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){o1(n)||gp(8),Lb(n)&&(n=GCt(n));var r=Mme(this),i=iY(this,n,void 0);return i[Ns].C=!0,rY(r),i},t.finishDraft=function(n,r){var i=n&&n[Ns],s=i.A;return FV(s,r),BV(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!jme&&gp(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=T0("Patches").$;return Lb(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),ud=new JCt,KRe=ud.produce;ud.produceWithPatches.bind(ud);ud.setAutoFreeze.bind(ud);ud.setUseProxies.bind(ud);ud.applyPatches.bind(ud);ud.createDraft.bind(ud);ud.finishDraft.bind(ud);function WD(e){"@babel/helpers - typeof";return WD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},WD(e)}function ZCt(e,t){if(WD(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(WD(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eAt(e){var t=ZCt(e,"string");return WD(t)=="symbol"?t:t+""}function tAt(e,t,n){return(t=eAt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zme(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Vme(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zme(Object(n),!0).forEach(function(r){tAt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zme(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Gu(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Hme=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),zV=function(){return Math.random().toString(36).substring(7).split("").join(".")},o5={INIT:"@@redux/INIT"+zV(),REPLACE:"@@redux/REPLACE"+zV(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+zV()}};function nAt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function XRe(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Gu(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Gu(1));return n(XRe)(e,t)}if(typeof e!="function")throw new Error(Gu(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(Gu(3));return s}function f(m){if(typeof m!="function")throw new Error(Gu(4));if(u)throw new Error(Gu(5));var y=!0;return l(),a.push(m),function(){if(y){if(u)throw new Error(Gu(6));y=!1,l();var b=a.indexOf(m);a.splice(b,1),o=null}}}function d(m){if(!nAt(m))throw new Error(Gu(7));if(typeof m.type>"u")throw new Error(Gu(8));if(u)throw new Error(Gu(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var y=o=a,v=0;v<y.length;v++){var b=y[v];b()}return m}function h(m){if(typeof m!="function")throw new Error(Gu(10));i=m,d({type:o5.REPLACE})}function p(){var m,y=f;return m={subscribe:function(b){if(typeof b!="object"||b===null)throw new Error(Gu(11));function w(){b.next&&b.next(c())}w();var E=y(w);return{unsubscribe:E}}},m[Hme]=function(){return this},m}return d({type:o5.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[Hme]=p,r}function rAt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:o5.INIT});if(typeof r>"u")throw new Error(Gu(12));if(typeof n(void 0,{type:o5.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Gu(13))})}function iAt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{rAt(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],y=p(m,l);if(typeof y>"u")throw l&&l.type,new Error(Gu(14));f[h]=y,c=c||y!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function a5(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function sAt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Gu(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=a5.apply(void 0,a)(i.dispatch),Vme(Vme({},i),{},{dispatch:s})}}}function QRe(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var oY=QRe();oY.withExtraArgument=QRe;var JRe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),x3=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},tE=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},oAt=Object.defineProperty,aAt=Object.defineProperties,uAt=Object.getOwnPropertyDescriptors,qme=Object.getOwnPropertySymbols,lAt=Object.prototype.hasOwnProperty,cAt=Object.prototype.propertyIsEnumerable,Wme=function(e,t,n){return t in e?oAt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},pb=function(e,t){for(var n in t||(t={}))lAt.call(t,n)&&Wme(e,n,t[n]);if(qme)for(var r=0,i=qme(t);r<i.length;r++){var n=i[r];cAt.call(t,n)&&Wme(e,n,t[n])}return e},VV=function(e,t){return aAt(e,uAt(t))},_3=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},fAt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?a5:a5.apply(null,arguments)};function ZRe(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var dAt=function(e){return e&&typeof e.match=="function"};function S0(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return pb(pb({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function hAt(e){return ZRe(e)&&"type"in e}var pAt=function(e){JRe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,tE([void 0],n[0].concat(this)))):new(t.bind.apply(t,tE([void 0],n.concat(this))))},t}(Array),mAt=function(e){JRe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,tE([void 0],n[0].concat(this)))):new(t.bind.apply(t,tE([void 0],n.concat(this))))},t}(Array);function aY(e){return o1(e)?KRe(e,function(){}):e}function gAt(e){return typeof e=="boolean"}function yAt(){return function(t){return vAt(t)}}function vAt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new pAt;return n&&(gAt(n)?r.push(oY):r.push(oY.withExtraArgument(n.extraArgument))),r}function bAt(e){var t=yAt(),n=e,r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(ZRe(i))h=iAt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=sAt.apply(void 0,p),y=a5;u&&(y=fAt(pb({trace:!1},typeof u=="object"&&u)));var v=new mAt(m),b=v;Array.isArray(d)?b=tE([m],d):typeof d=="function"&&(b=d(v));var w=y.apply(void 0,b);return XRe(h,c,w)}function eNe(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function xAt(e){return typeof e=="function"}function _At(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?eNe(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(xAt(e))u=function(){return aY(e())};else{var l=aY(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=tE([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(Lb(p)){var y=p,v=m(y,d);return v===void 0?p:v}else{if(o1(p))return KRe(p,function(b){return m(b,d)});var v=m(p,d);if(v===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}return p},f)}return c.getInitialState=u,c}function wAt(e,t){return e+"/"+t}function EAt(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n=typeof e.initialState=="function"?e.initialState:aY(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=wAt(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?S0(d,p):S0(d)});function u(){var c=typeof e.extraReducers=="function"?eNe(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],y=m===void 0?void 0:m,v=pb(pb({},d),o);return _At(n,function(b){for(var w in v)b.addCase(w,v[w]);for(var E=0,T=p;E<T.length;E++){var A=T[E];b.addMatcher(A.matcher,A.reducer)}y&&b.addDefaultCase(y)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var TAt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",tNe=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=TAt[Math.random()*64|0];return t},SAt=["name","message","stack","code"],HV=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Gme=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),CAt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=SAt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=S0(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:VV(pb({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=S0(t+"/pending",function(l,c,f){return{payload:void 0,meta:VV(pb({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=S0(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||CAt)(l||"Rejected"),meta:VV(pb({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):tNe(),p=new a,m;function y(b){m=b,p.abort()}var v=function(){return _3(this,null,function(){var b,w,E,T,A,I,R;return x3(this,function(D){switch(D.label){case 0:return D.trys.push([0,4,,5]),T=(b=r==null?void 0:r.condition)==null?void 0:b.call(r,l,{getState:f,extra:d}),IAt(T)?[4,T]:[3,2];case 1:T=D.sent(),D.label=2;case 2:if(T===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return A=new Promise(function(M,$){return p.signal.addEventListener("abort",function(){return $({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(w=r==null?void 0:r.getPendingMeta)==null?void 0:w.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([A,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:y,rejectWithValue:function(M,$){return new HV(M,$)},fulfillWithValue:function(M,$){return new Gme(M,$)}})).then(function(M){if(M instanceof HV)throw M;return M instanceof Gme?i(M.payload,h,l,M.meta):i(M,h,l)})])];case 3:return E=D.sent(),[3,5];case 4:return I=D.sent(),E=I instanceof HV?o(null,h,l,I.payload,I.meta):o(I,h,l),[3,5];case 5:return R=r&&!r.dispatchConditionRejection&&o.match(E)&&E.meta.condition,R||c(E),[2,E]}})})}();return Object.assign(v,{abort:y,requestId:h,arg:l,unwrap:function(){return v.then(AAt)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function AAt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function IAt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var kAt=function(e,t){return dAt(e)?e.match(t):e(t)};function Yme(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return kAt(r,n)})}}var mte=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},uY=function(){},nNe=function(e,t){return t===void 0&&(t=uY),e.catch(t),e},rNe=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},j2=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},RAt="task",iNe="listener",sNe="completed",gte="cancelled",NAt="task-"+gte,DAt="task-"+sNe,oNe=iNe+"-"+gte,PAt=iNe+"-"+sNe,D9=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=RAt+" "+gte+" (reason: "+t+")"}return e}(),U2=function(e){if(e.aborted)throw new D9(e.reason)};function aNe(e,t){var n=uY;return new Promise(function(r,i){var s=function(){return i(new D9(e.reason))};if(e.aborted){s();return}n=rNe(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=uY})}var OAt=function(e,t){return _3(void 0,null,function(){var n,r;return x3(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof D9?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},u5=function(e){return function(t){return nNe(aNe(e,t).then(function(n){return U2(e),n}))}},uNe=function(e){var t=u5(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},MAt=Object.assign,Kme={},w3="listenerMiddleware",LAt=function(e,t){var n=function(r){return rNe(e,function(){return j2(r,e.reason)})};return function(r,i){mte(r,"taskExecutor");var s=new AbortController;n(s);var o=OAt(function(){return _3(void 0,null,function(){var a;return x3(this,function(u){switch(u.label){case 0:return U2(e),U2(s.signal),[4,r({pause:u5(s.signal),delay:uNe(s.signal),signal:s.signal})];case 1:return a=u.sent(),U2(s.signal),[2,a]}})})},function(){return j2(s,DAt)});return i!=null&&i.autoJoin&&t.push(o),{result:u5(e)(o),cancel:function(){j2(s,NAt)}}}},$At=function(e,t){var n=function(r,i){return _3(void 0,null,function(){var s,o,a,u;return x3(this,function(l){switch(l.label){case 0:U2(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,aNe(t,Promise.race(a))];case 2:return u=l.sent(),U2(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return nNe(n(r,i))}},lNe=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=S0(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return mte(s,"options.listener"),{predicate:i,type:t,effect:s}},FAt=function(e){var t=lNe(e),n=t.type,r=t.predicate,i=t.effect,s=tNe(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},lY=function(e){e.pending.forEach(function(t){j2(t,oNe)})},BAt=function(e){return function(){e.forEach(lY),e.clear()}},Xme=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},jAt=S0(w3+"/add"),UAt=S0(w3+"/removeAll"),zAt=S0(w3+"/remove"),VAt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,tE([w3+"/error"],e))};function HAt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?VAt:i;mte(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&lY(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var y=m[p];if(h(y))return y}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=FAt(h)),o(p)},l=function(h){var p=lNe(h),m=p.type,y=p.effect,v=p.predicate,b=a(function(w){var E=typeof m=="string"?w.type===m:w.predicate===v;return E&&w.effect===y});return b&&(b.unsubscribe(),h.cancelActive&&lY(b)),!!b},c=function(h,p,m,y){return _3(t,null,function(){var v,b,w,E;return x3(this,function(T){switch(T.label){case 0:v=new AbortController,b=$At(u,v.signal),w=[],T.label=1;case 1:return T.trys.push([1,3,4,6]),h.pending.add(v),[4,Promise.resolve(h.effect(p,MAt({},m,{getOriginalState:y,condition:function(A,I){return b(A,I).then(Boolean)},take:b,delay:uNe(v.signal),pause:u5(v.signal),extra:r,signal:v.signal,fork:LAt(v.signal,w),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(A,I,R){A!==v&&(j2(A,oNe),R.delete(A))})}})))];case 2:return T.sent(),[3,6];case 3:return E=T.sent(),E instanceof D9||Xme(s,E,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(w)];case 5:return T.sent(),j2(v,PAt),h.pending.delete(v),[7];case 6:return[2]}})})},f=BAt(n),d=function(h){return function(p){return function(m){if(!hAt(m))return p(m);if(jAt.match(m))return u(m.payload);if(UAt.match(m)){f();return}if(zAt.match(m))return l(m.payload);var y=h.getState(),v=function(){if(y===Kme)throw new Error(w3+": getOriginalState can only be called synchronously");return y},b;try{if(b=p(m),n.size>0)for(var w=h.getState(),E=Array.from(n.values()),T=0,A=E;T<A.length;T++){var I=A[T],R=!1;try{R=I.predicate(m,w,y)}catch(D){R=!1,Xme(s,D,{raisedBy:"predicate"})}R&&c(I,m,h,v)}}finally{y=Kme}return b}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var Qme;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);YCt();function qAt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let g6;const WAt=new Uint8Array(16);function GAt(){if(!g6&&(g6=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!g6))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return g6(WAt)}const su=[];for(let e=0;e<256;++e)su.push((e+256).toString(16).slice(1));function YAt(e,t=0){return(su[e[t+0]]+su[e[t+1]]+su[e[t+2]]+su[e[t+3]]+"-"+su[e[t+4]]+su[e[t+5]]+"-"+su[e[t+6]]+su[e[t+7]]+"-"+su[e[t+8]]+su[e[t+9]]+"-"+su[e[t+10]]+su[e[t+11]]+su[e[t+12]]+su[e[t+13]]+su[e[t+14]]+su[e[t+15]]).toLowerCase()}const KAt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Jme={randomUUID:KAt};function Zme(e,t,n){if(Jme.randomUUID&&!e)return Jme.randomUUID();e=e||{};const r=e.random||(e.rng||GAt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,YAt(r)}class C0{static get(){let t=Zme();for(;this.ids.has(t);)t=Zme();return this.ids.set(t,!0),t}}C0.ids=new Map;function Rp(e){return"parent"in e}function XAt(e){return!Rp(e)}function QAt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:C0.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:C0.get(),createdOn:Date.now(),val:r}]:[];return{id:C0.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function JAt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:C0.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:C0.get(),createdOn:Date.now(),val:s}]:[];return{id:C0.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function no(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=aIt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function nE(e){return!!e&&!!e[ld]}function $b(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===uIt}(e)||Array.isArray(e)||!!e[WN]||!!(!((t=e.constructor)===null||t===void 0)&&t[WN])||P9(e)||O9(e))}function IC(e,t,n){n===void 0&&(n=!1),Fb(e)===0?(n?Object.keys:wte)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function Fb(e){var t=e[ld];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:P9(e)?2:O9(e)?3:0}function GD(e,t){return Fb(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function QL(e,t){return Fb(e)===2?e.get(t):e[t]}function cNe(e,t,n){var r=Fb(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function ZAt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function P9(e){return sIt&&e instanceof Map}function O9(e){return oIt&&e instanceof Set}function Y_(e){return e.o||e.t}function yte(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=lIt(e);delete t[ld];for(var n=wte(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function vte(e,t){return t===void 0&&(t=!1),bte(e)||nE(e)||!$b(e)||(Fb(e)>1&&(e.set=e.add=e.clear=e.delete=eIt),Object.freeze(e),t&&IC(e,function(n,r){return vte(r,!0)},!0)),e}function eIt(){no(2)}function bte(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function A0(e){var t=hY[e];return t||no(18,e),t}function tIt(e,t){hY[e]||(hY[e]=t)}function e0e(){return{}.NODE_ENV==="production"||kC||no(0),kC}function qV(e,t){t&&(A0("Patches"),e.u=[],e.s=[],e.v=t)}function l5(e){cY(e),e.p.forEach(nIt),e.p=null}function cY(e){e===kC&&(kC=e.l)}function t0e(e){return kC={p:[],l:kC,h:e,m:!0,_:0}}function nIt(e){var t=e[ld];t.i===0||t.i===1?t.j():t.O=!0}function WV(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||A0("ES5").S(t,e,r),r?(n[ld].P&&(l5(t),no(4)),$b(e)&&(e=c5(t,e),t.l||f5(t,e)),t.u&&A0("Patches").M(n[ld].t,e,t.u,t.s)):e=c5(t,n,[]),l5(t),t.u&&t.v(t.u,t.s),e!==_te?e:void 0}function c5(e,t,n){if(bte(t))return t;var r=t[ld];if(!r)return IC(t,function(s,o){return n0e(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return f5(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=yte(r.k):r.o;IC(r.i===3?new Set(i):i,function(s,o){return n0e(e,r,i,s,o,n)}),f5(e,i,!1),n&&e.u&&A0("Patches").R(r,n,e.u,e.s)}return r.o}function n0e(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&no(5),nE(i)){var o=c5(e,i,s&&t&&t.i!==3&&!GD(t.D,r)?s.concat(r):void 0);if(cNe(n,r,o),!nE(o))return;e.m=!1}if($b(i)&&!bte(i)){if(!e.h.F&&e._<1)return;c5(e,i),t&&t.A.l||f5(e,i)}}function f5(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&vte(t,n)}function GV(e,t){var n=e[ld];return(n?Y_(n):e)[t]}function r0e(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function fY(e){e.P||(e.P=!0,e.l&&fY(e.l))}function YV(e){e.o||(e.o=yte(e.t))}function dY(e,t,n){var r=P9(t)?A0("MapSet").N(t,n):O9(t)?A0("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:e0e(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=pY;o&&(u=[a],l=eN);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):A0("ES5").J(t,n);return(n?n.A:e0e()).p.push(r),r}function rIt(e){return nE(e)||no(22,e),function t(n){if(!$b(n))return n;var r,i=n[ld],s=Fb(n);if(i){if(!i.P&&(i.i<4||!A0("ES5").K(i)))return i.t;i.I=!0,r=i0e(n,s),i.I=!1}else r=i0e(n,s);return IC(r,function(o,a){i&&QL(i.t,o)===a||cNe(r,o,t(a))}),s===3?new Set(r):r}(e)}function i0e(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return yte(e)}function iIt(){function e(r){if(!$b(r))return r;if(Array.isArray(r))return r.map(e);if(P9(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(O9(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return GD(r,WN)&&(i[WN]=r[WN]),i}function t(r){return nE(r)?e(r):r}var n="add";tIt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=Fb(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||no(24),typeof u=="function"&&f==="prototype"&&no(24),typeof(u=QL(u,f))!="object"&&no(15,o.join("/"))}var d=Fb(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:no(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:no(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;IC(a.D,function(h,p){var m=QL(f,h),y=QL(d,h),v=p?GD(f,h)?"replace":n:"remove";if(m!==y||v!=="replace"){var b=u.concat(h);l.push(v==="remove"?{op:v,path:b}:{op:v,path:b,value:y}),c.push(v===n?{op:"remove",path:b}:v==="remove"?{op:n,path:b,value:t(m)}:{op:"replace",path:b,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var y=0;y<f.length;y++)if(d[y]&&h[y]!==f[y]){var v=u.concat([y]);l.push({op:"replace",path:v,value:t(h[y])}),c.push({op:"replace",path:v,value:t(f[y])})}for(var b=f.length;b<h.length;b++){var w=u.concat([b]);l.push({op:n,path:w,value:t(h[b])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===_te?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var s0e,kC,xte=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",sIt=typeof Map<"u",oIt=typeof Set<"u",o0e=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",_te=xte?Symbol.for("immer-nothing"):((s0e={})["immer-nothing"]=!0,s0e),WN=xte?Symbol.for("immer-draftable"):"__$immer_draftable",ld=xte?Symbol.for("immer-state"):"__$immer_state",aIt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},uIt=""+Object.prototype.constructor,wte=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,lIt=Object.getOwnPropertyDescriptors||function(e){var t={};return wte(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},hY={},pY={get:function(e,t){if(t===ld)return e;var n=Y_(e);if(!GD(n,t))return function(i,s,o){var a,u=r0e(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!$b(r)?r:r===GV(e.t,t)?(YV(e),e.o[t]=dY(e.A.h,r,e)):r},has:function(e,t){return t in Y_(e)},ownKeys:function(e){return Reflect.ownKeys(Y_(e))},set:function(e,t,n){var r=r0e(Y_(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=GV(Y_(e),t),s=i==null?void 0:i[ld];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(ZAt(n,i)&&(n!==void 0||GD(e.t,t)))return!0;YV(e),fY(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return GV(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,YV(e),fY(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Y_(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){no(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){no(12)}},eN={};IC(pY,function(e,t){eN[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),eN.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&no(13),eN.set.call(this,e,t,void 0)},eN.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&no(14),pY.set.call(this,e[0],t,n,e[0])};var cIt=function(){function e(n){var r=this;this.g=o0e,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var y=this;m===void 0&&(m=a);for(var v=arguments.length,b=Array(v>1?v-1:0),w=1;w<v;w++)b[w-1]=arguments[w];return u.produce(m,function(E){var T;return(T=s).call.apply(T,[y,E].concat(b))})}}var l;if(typeof s!="function"&&no(6),o!==void 0&&typeof o!="function"&&no(7),$b(i)){var c=t0e(r),f=dY(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?l5(c):cY(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return qV(c,o),WV(m,c)},function(m){throw l5(c),m}):(qV(c,o),WV(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===_te&&(l=void 0),r.F&&vte(l,!0),o){var h=[],p=[];A0("Patches").M(i,l,h,p),o(h,p)}return l}no(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){$b(n)||no(8),nE(n)&&(n=rIt(n));var r=t0e(this),i=dY(this,n,void 0);return i[ld].C=!0,cY(r),i},t.finishDraft=function(n,r){var i=n&&n[ld];({}).NODE_ENV!=="production"&&(i&&i.C||no(9),i.I&&no(10));var s=i.A;return qV(s,r),WV(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!o0e&&no(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=A0("Patches").$;return nE(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),cd=new cIt,fIt=cd.produce;cd.produceWithPatches.bind(cd);cd.setAutoFreeze.bind(cd);cd.setUseProxies.bind(cd);cd.applyPatches.bind(cd);cd.createDraft.bind(cd);cd.finishDraft.bind(cd);function dIt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=QAt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return EAt({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:C0.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:C0.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function hIt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=dIt(e),s=HAt();s.startListening({matcher:Yme(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=Yme(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=bAt({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:C0.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var pIt=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),mIt=Object.prototype.hasOwnProperty;function mY(e,t){return mIt.call(e,t)}function gY(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)mY(e,i)&&r.push(i);return r}function Wc(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function yY(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function K_(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function fNe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function vY(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(vY(e[t]))return!0}else if(typeof e=="object"){for(var r=gY(e),i=r.length,s=0;s<i;s++)if(vY(e[r[s]]))return!0}}return!1}function a0e(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var dNe=function(e){pIt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,a0e(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=a0e(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Zs=dNe,gIt=Wc,g2={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=d5(n,this.path);r&&(r=Wc(r));var i=Ow(n,{op:"remove",path:this.from}).removed;return Ow(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=d5(n,this.from);return Ow(n,{op:"add",path:this.path,value:Wc(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:YD(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},yIt={add:function(e,t,n){return yY(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:g2.move,copy:g2.copy,test:g2.test,_get:g2._get};function d5(e,t){if(t=="")return e;var n={op:"_get",path:t};return Ow(e,n),n.value}function Ow(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):h5(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=d5(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=YD(e,t.value),o.test===!1)throw new Zs("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Zs("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Wc(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=h5;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=fNe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!yY(h))throw new Zs("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);yY(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Zs("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=yIt[t.op].call(t,l,h,e);if(o.test===!1)throw new Zs("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=g2[t.op].call(t,l,h,e);if(o.test===!1)throw new Zs("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Zs("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function M9(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Zs("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Wc(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=Ow(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function vIt(e,t,n){var r=Ow(e,t);if(r.test===!1)throw new Zs("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function h5(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Zs("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(g2[e.op]){if(typeof e.path!="string")throw new Zs("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Zs('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Zs("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Zs("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&vY(e.value))throw new Zs("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Zs("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Zs("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=hNe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Zs("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Zs("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function hNe(e,t,n){try{if(!Array.isArray(e))throw new Zs("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)M9(Wc(t),Wc(e),n||!0);else{n=n||h5;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Zs)return i;throw i}}function YD(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!YD(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!YD(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const bIt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Zs,_areEquals:YD,applyOperation:Ow,applyPatch:M9,applyReducer:vIt,deepClone:gIt,getValueByPointer:d5,validate:hNe,validator:h5},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var Ete=new WeakMap,xIt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),_It=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function wIt(e){return Ete.get(e)}function EIt(e,t){return e.observers.get(t)}function TIt(e,t){e.observers.delete(t.callback)}function SIt(e,t){t.unobserve()}function CIt(e,t){var n=[],r,i=wIt(e);if(!i)i=new xIt(e),Ete.set(e,i);else{var s=EIt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Wc(e),t){r.callback=t,r.next=null;var o=function(){bY(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){bY(r),clearTimeout(r.next),TIt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new _It(t,r)),r}function bY(e,t){t===void 0&&(t=!1);var n=Ete.get(e.object);Tte(n.value,e.object,e.patches,"",t),e.patches.length&&M9(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function Tte(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=gY(t),o=gY(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(mY(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?Tte(c,f,n,r+"/"+K_(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+K_(l),value:Wc(c)}),n.push({op:"replace",path:r+"/"+K_(l),value:Wc(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+K_(l),value:Wc(c)}),n.push({op:"remove",path:r+"/"+K_(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!mY(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+K_(l),value:Wc(t[l])})}}}function pNe(e,t,n){n===void 0&&(n=!1);var r=[];return Tte(e,t,r,"",n),r}const AIt=Object.freeze(Object.defineProperty({__proto__:null,compare:pNe,generate:bY,observe:CIt,unobserve:SIt},Symbol.toStringTag,{value:"Module"}));Object.assign({},bIt,AIt,{JsonPatchError:dNe,deepClone:Wc,escapePathComponent:K_,unescapePathComponent:fNe});var tN=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(tN||{});function JL(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=mNe(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=JL(i,t);return M9(a,Wc(o),!0,!1).newDocument}function IIt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function E3({registry:e,initialState:t}){let n=!1;const r=qAt(),i=hIt(t);function s(c){return i.backend.nodes[c]}r.listen(tN.TRAVERSAL_START,()=>{n=!0}),r.listen(tN.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return JL(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,y=null;const v=JL(this.current,this.graph.backend.nodes);if(p)y={type:"checkpoint",val:f};else{const b=pNe(v,f);if(IIt(f,b)==="checkpoint")y={type:"checkpoint",val:f};else{const w=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;y={type:"patch",val:b,checkpointRef:w}}}if(!y)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=JAt({label:c,state:y,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=JL(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(tN.TRAVERSAL_START);const f=mNe(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);RIt(p,m)?Rp(p)&&d.push(...p.sideEffects.undo):Rp(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(tN.TRAVERSAL_END)},undo(){const{current:c}=i;return Rp(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return gNe(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function kIt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;Rp(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)Rp(r)&&(r=n[r.parent]),Rp(i)&&(i=n[i.parent]);return r.id}function mNe(e,t,n){const r=kIt(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),Rp(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),Rp(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function RIt(e,t){if(Rp(e)&&e.parent===t.id)return!0;if(Rp(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function gNe(e,t){return{...e,children:e.children.map(n=>gNe(t[n],t)),name:`${e.label}`}}iIt();function NIt(e){return e.length===2?fIt(e):e}class qE{static create(){return new qE}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:NIt(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),S0(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}const u0e=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:t.height?Math.max(t.height-t.marginTop-t.marginBottom,0):0,boundedWidth:t.width?Math.max(t.width-t.marginLeft-t.marginRight,0):0}},eI=e=>{const t=O.useRef(null),n=u0e(e),[r,i]=O.useState(0),[s,o]=O.useState(0);O.useEffect(()=>{const u=t.current;if(u){const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];r!==f.contentRect.width&&i(f.contentRect.width),s!==f.contentRect.height&&o(f.contentRect.height)});return l.observe(u),()=>l.unobserve(u)}return()=>null},[s,r]);const a=u0e({...n,width:n.width||r,height:n.height||s});return[t,a]},DIt=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:eI},Symbol.toStringTag,{value:"Module"})),PIt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:650,width:850};function OIt({parameters:e,setAnswer:t}){const[n,r]=eI(PIt),[i,s]=O.useState(100),[o,a]=O.useState(100),[u,l]=O.useState(e.speed),{taskid:c}=e,{actions:f,trrack:d}=O.useMemo(()=>{const p=qE.create(),m=p.register("click",(v,b)=>(v.clickX=b.clickX,v.clickY=b.clickY,v.distance=b.distance,v)),y=E3({registry:p,initialState:{distance:0,speed:10,clickX:0,clickY:0}});return{actions:{clickAction:m},trrack:y}},[]),h=O.useCallback(p=>{const m=Vo("#movingCircle"),y=Vo("#clickAccuracySvg"),v=gG(p,y.node()),b=[+m.attr("cx"),+m.attr("cy")],w=`${Math.round(Math.sqrt((v[0]-b[0])**2+(v[1]-b[1])**2))}px`;d.apply("Clicked",f.clickAction({distance:+w,clickX:v[0],clickY:v[1]})),t({status:!0,provenanceGraph:d.graph.backend,answers:{[c]:w}})},[f,t,c,d]);return O.useEffect(()=>{const p=Math.random()*800,m=Math.random()*600,v=Math.sqrt((p-i)**2+(m-o)**2)/u*1e3;Vo(n.current).select("circle").transition().duration(v).ease(F_t).attr("cx",p).attr("cy",m).on("end",()=>{s(p),a(m)})},[n,u,i,o]),S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"Chart__wrapper",ref:n,onClick:h,style:{height:"650px"},children:S.jsx("svg",{id:"clickAccuracySvg",width:r.width,height:r.height,children:S.jsxs("g",{transform:`translate(${[r.marginLeft/2,r.marginTop/2].join(",")})`,children:[S.jsx("rect",{width:"800",height:"600",stroke:"black",strokeWidth:"5",fill:"none"}),S.jsx("circle",{id:"movingCircle",cx:"100",cy:"100",r:"10"})]})})}),S.jsxs(je,{children:["Adjust speed (px/s):",S.jsx(yB,{w:800,min:10,max:1e3,value:u,onChange:l})]})]})}const MIt=Object.freeze(Object.defineProperty({__proto__:null,default:OIt},Symbol.toStringTag,{value:"Module"}));function Ste({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=O.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=O.useCallback(c=>(s?S9("%B"):YA(".2s"))(c),[s]);return S.jsxs(S.Fragment,{children:[S.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:S.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:S.jsx(Gl,{children:S.jsx($i,{gap:3,children:S.jsx(gt,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),S.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?S.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>S.jsxs("g",{transform:`translate(${f}, ${n})`,children:[S.jsx("line",{y2:"6",stroke:"currentColor"}),o?S.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,S.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:S.jsx(Gl,{children:S.jsx(cs,{withinPortal:!0,label:c,children:S.jsx(gt,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const LIt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:Ste},Symbol.toStringTag,{value:"Module"}));function yNe({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=O.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return S.jsxs(S.Fragment,{children:[S.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:S.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:S.jsx(Gl,{children:S.jsx($i,{gap:3,children:S.jsx(gt,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),S.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?S.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>S.jsxs("g",{transform:`translate(${n}, ${l})`,children:[S.jsx("line",{x2:"-6",stroke:"currentColor"}),s?S.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,S.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:S.jsx("foreignObject",{width:a,height:20,children:S.jsx($i,{style:{width:"100%",height:"100%"},justify:"right",children:S.jsx(gt,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const $It=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:yNe},Symbol.toStringTag,{value:"Module"})),$d={top:15,left:100,right:50,bottom:50};function xY({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=Ny(),o=O.useMemo(()=>s-$d.left-$d.right,[s]),a=O.useMemo(()=>i-$d.top-$d.bottom,[i]),u=O.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return XA(kRe).domain(d)},[n,t.category]),l=O.useMemo(()=>e?Fp([$d.left,o+$d.left]).domain([0,db(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=O.useMemo(()=>e?v3([$d.top,a+$d.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=O.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:S.jsxs("g",{children:[S.jsx("rect",{x:$d.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-$d.left},h),S.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?S.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[S.jsx(Ste,{xScale:l,yRange:c.range(),vertPosition:a+$d.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?S.jsx(yNe,{yScale:c,horizontalPosition:$d.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):S.jsx(mh,{})}const FIt=Object.freeze(Object.defineProperty({__proto__:null,Bar:xY,default:xY},Symbol.toStringTag,{value:"Module"})),di=Array.isArray;function Jc(e){return e!=null?di(e)?e:[e]:[]}function BIt(e=0,t=1/0){return`${l0e(e)} < row_number() && row_number() <= ${l0e(t)}`}function l0e(e){return e<0?`count() + ${e}`:e}class vNe{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(BIt(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,Jc(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function gr(e){throw Error(e)}function Ql(e){return typeof e=="number"}function ws(e){return typeof e=="function"}function L9(e,t){const n=Array(e);if(ws(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let jIt=class extends vNe{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){gr("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){gr("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){gr("Not implemented")}getter(t){gr("Not implemented")}objects(t){gr("Not implemented")}object(t){gr("Not implemented")}[Symbol.iterator](){gr("Not implemented")}print(t={}){Ql(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=L9(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},UIt=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},zIt=function(e){return e&&ws(e.get)?e:new UIt(e)};function a1(e){return e instanceof Date}function fl(e){return e===Object(e)}function p5(e){return e instanceof RegExp}function Cu(e){return typeof e=="string"}function VIt(e,t){const n=r=>gr(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?c0e(e.entries(),t):a1(e)?n("Date"):p5(e)?n("RegExp"):Cu(e)?n():di(e)?HIt(e,t):ws(e[Symbol.iterator])?qIt(e,t):fl(e)?c0e(Object.entries(e),t):n()}function c0e(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function HIt(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function qIt(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:WIt}=Object.prototype;function Bp(e,t){return WIt.call(e,t)}function gd(e){return e?new f0e({...e.data()},e.columnNames()):new f0e}class f0e{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return Bp(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const ui=void 0,GIt=Object.getPrototypeOf(Int8Array);function T3(e){return e instanceof GIt}function xw(e){return di(e)||T3(e)}function wp(e){return e!=null&&e===e}const sR=e=>xw(e)||Cu(e),YIt={compact:e=>xw(e)?e.filter(t=>wp(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>sR(e)?e.includes(t,n):!1,indexof:(e,t)=>sR(e)?e.indexOf(t):-1,join:(e,t)=>xw(e)?e.join(t):ui,lastindexof:(e,t)=>sR(e)?e.lastIndexOf(t):-1,length:e=>sR(e)?e.length:0,pluck:(e,t)=>xw(e)?e.map(n=>wp(n)?n[t]:ui):ui,reverse:e=>xw(e)?e.slice().reverse():Cu(e)?e.split("").reverse().join(""):ui,slice:(e,t,n)=>sR(e)?e.slice(t,n):ui};function KIt(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function ZL(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const Mm=e=>(e<10?"0":"")+e,XIt=e=>e<0?"-"+ZL(-e,6):e>9999?"+"+ZL(e,6):ZL(e,4);function bNe(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return XIt(e)+"-"+Mm(t+1)+"-"+Mm(n)+(!u||o?"T"+Mm(r)+":"+Mm(i)+":"+Mm(s)+"."+ZL(o,3)+l:s?"T"+Mm(r)+":"+Mm(i)+":"+Mm(s)+l:i||r||!a?"T"+Mm(r)+":"+Mm(i)+l:"")}function xNe(e,t){return isNaN(e)?"Invalid Date":bNe(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function $9(e,t){return isNaN(e)?"Invalid Date":bNe(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const QIt=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function JIt(e){return e.match(QIt)&&!isNaN(Date.parse(e))}function ZIt(e,t=Date.parse){return JIt(e)?t(e):e}const _Ne=6e4,wNe=864e5,ENe=6048e5,to=new Date,ro=new Date,wo=e=>(to.setTime(typeof e=="string"?ZIt(e):e),to);function ekt(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function tkt(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function nkt(e){ro.setTime(+e),ro.setHours(0,0,0,0),to.setTime(+ro),to.setMonth(0),to.setDate(1);const t=(ro.getTimezoneOffset()-to.getTimezoneOffset())*_Ne;return Math.floor(1+(ro-to-t)/wNe)}function rkt(e){ro.setTime(+e),ro.setUTCHours(0,0,0,0);const t=Date.UTC(ro.getUTCFullYear(),0,1);return Math.floor(1+(ro-t)/wNe)}function ikt(e,t){const n=t||0;ro.setTime(+e),ro.setDate(ro.getDate()-(ro.getDay()+7-n)%7),ro.setHours(0,0,0,0),to.setTime(+e),to.setMonth(0),to.setDate(1),to.setDate(1-(to.getDay()+7-n)%7),to.setHours(0,0,0,0);const r=(ro.getTimezoneOffset()-to.getTimezoneOffset())*_Ne;return Math.floor((1+(ro-to)-r)/ENe)}function skt(e,t){const n=t||0;return ro.setTime(+e),ro.setUTCDate(ro.getUTCDate()-(ro.getUTCDay()+7-n)%7),ro.setUTCHours(0,0,0,0),to.setTime(+e),to.setUTCMonth(0),to.setUTCDate(1),to.setUTCDate(1-(to.getUTCDay()+7-n)%7),to.setUTCHours(0,0,0,0),Math.floor((1+(ro-to))/ENe)}const okt={format_date:(e,t)=>xNe(wo(e),!t),format_utcdate:(e,t)=>$9(wo(e),!t),timestamp:e=>+wo(e),year:e=>wo(e).getFullYear(),quarter:e=>Math.floor(wo(e).getMonth()/3),month:e=>wo(e).getMonth(),date:e=>wo(e).getDate(),dayofweek:e=>wo(e).getDay(),hours:e=>wo(e).getHours(),minutes:e=>wo(e).getMinutes(),seconds:e=>wo(e).getSeconds(),milliseconds:e=>wo(e).getMilliseconds(),utcyear:e=>wo(e).getUTCFullYear(),utcquarter:e=>Math.floor(wo(e).getUTCMonth()/3),utcmonth:e=>wo(e).getUTCMonth(),utcdate:e=>wo(e).getUTCDate(),utcdayofweek:e=>wo(e).getUTCDay(),utchours:e=>wo(e).getUTCHours(),utcminutes:e=>wo(e).getUTCMinutes(),utcseconds:e=>wo(e).getUTCSeconds(),utcmilliseconds:e=>wo(e).getUTCMilliseconds(),datetime:ekt,dayofyear:nkt,week:ikt,utcdatetime:tkt,utcdayofyear:rkt,utcweek:skt,now:Date.now};function Cte(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:a1(e)||a1(t)?+e==+t:p5(e)&&p5(t)?e+""==t+"":fl(e)&&fl(t)?akt(e,t):!1}function akt(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return d0e(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!d0e(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!Cte(e[o],t[o]))return!1}return!0}function d0e(e,t,n=Cte){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const ukt={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let lkt=Math.random;function tI(){return lkt()}const ckt={random:tI,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function Ate(e){return e instanceof Map}function fkt(e){return e instanceof Set}function e$(e){return Ate(e)||fkt(e)}function KV(e){return Array.from(e)}const dkt={has:(e,t)=>e$(e)?e.has(t):e!=null?Bp(e,t):!1,keys:e=>Ate(e)?KV(e.keys()):e!=null?Object.keys(e):[],values:e=>e$(e)?KV(e.values()):e!=null?Object.values(e):[],entries:e=>e$(e)?KV(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):ui};function hkt(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(Bp(t,e))return t[e];return n!==void 0?n:e}function pkt(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const mkt={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},y2={bin:KIt,equal:Cte,recode:hkt,sequence:pkt,...YIt,...okt,...ukt,...ckt,...dkt,...mkt};function KD(e){return typeof e=="bigint"}function V0(e){return e===void 0?e+"":KD(e)?e+"n":JSON.stringify(e)}function ur(e,t=[],n=[]){return new gkt(e,Jc(t),Jc(n))}let gkt=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${V0(n)}]`),...this.params.map(V0)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const TNe=e=>ur("any",e),SNe=()=>ur("count"),CNe=e=>ur("array_agg",e),ANe=e=>ur("array_agg_distinct",e),INe=(e,t)=>ur("map_agg",[e,t]),kNe=(e,t)=>ur("object_agg",[e,t]),RNe=(e,t)=>ur("entries_agg",[e,t]);({...y2});function ykt(e,t){e=e$(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function vkt(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function bkt(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function xkt(e,t,n,r){const i=r==="map"||r===!0?INe:r==="entries"?RNe:r==="object"?kNe:gr('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=ykt(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:CNe(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const _kt="ArrayPattern",wkt="ArrowFunctionExpression",Ekt="FunctionExpression",mb="Identifier",nI="Literal",NNe="MemberExpression",Tkt="ObjectExpression",DNe="ObjectPattern",PNe="Property",S3="Column",Skt="Constant",Ckt="Dictionary",Akt="Function",Ikt="Parameter",ONe="Op",us=(e,t)=>{const n=kkt[e.type];return n?n(e,t):gr(`Unsupported expression construct: ${e.type}`)},XV=(e,t)=>"("+us(e.left,t)+" "+e.operator+" "+us(e.right,t)+")",QV=(e,t)=>"("+Vm(e.params,t)+")=>"+us(e.body,t),h0e=(e,t)=>us(e.callee,t)+"("+Vm(e.arguments,t)+")",Vm=(e,t,n=",")=>e.map(r=>us(r,t)).join(n),MNe=e=>e.computed?`[${V0(e.name)}]`:`.${e.name}`,p0e=(e,t,n)=>{const r=e.table||"";return`data${r}${MNe(e)}.${n}(${t.index}${r})`},kkt={Constant:e=>e.raw,Column:(e,t)=>p0e(e,t,"get"),Dictionary:(e,t)=>p0e(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${MNe(e)}`,Op:(e,t)=>`op(${V0(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+us(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=us(e.object,t),i=us(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:h0e,NewExpression:(e,t)=>"new "+h0e(e,t),ArrayExpression:(e,t)=>"["+Vm(e.elements,t)+"]",AssignmentExpression:XV,BinaryExpression:XV,LogicalExpression:XV,UnaryExpression:(e,t)=>"("+e.operator+us(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+us(e.test,t)+"?"+us(e.consequent,t)+":"+us(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+Vm(e.properties,t)+"})",Property:(e,t)=>{const n=us(e.key,t);return(e.computed?`[${n}]`:n)+":"+us(e.value,t)},ArrowFunctionExpression:QV,FunctionExpression:QV,FunctionDeclaration:QV,ArrayPattern:(e,t)=>"["+Vm(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+Vm(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+Vm(e.declarations,t,","),VariableDeclarator:(e,t)=>us(e.id,t)+"="+us(e.init,t),SpreadElement:(e,t)=>"..."+us(e.argument,t),BlockStatement:(e,t)=>"{"+Vm(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>us(e.expression,t),IfStatement:(e,t)=>"if ("+us(e.test,t)+")"+us(e.consequent,t)+(e.alternate?" else "+us(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+us(e.discriminant,t)+") {"+Vm(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+us(e.test,t):"default")+": "+Vm(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+us(e.argument,t),Program:(e,t)=>us(e.body[0],t)};function m5(e,t={index:"row"}){return us(e,t)}function Rkt(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function RC(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:a1(e)?+e:di(e)||T3(e)?`[${e.map(RC)}]`:p5(e)?e+"":Nkt(e)}function Nkt(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${RC(e[r])}`;return t+="}",t}function g5(e,t){const n=e.length;return n===1?(r,i)=>RC(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=RC(a)}return s}}function Dkt(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=RC(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=RC(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function cy(){}function Pkt(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function na(e){return e.init=e.init||cy,e.add=e.add||cy,e.rem=e.rem||cy,e}function m0e(e,t){return e.product_v=!1,e.product=t}const LNe={count:{create:()=>na({value:e=>e.count}),param:[]},array_agg:{create:()=>na({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>na({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>na({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>na({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>na({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:ui}),param:[1]},valid:{create:()=>na({value:e=>e.valid}),param:[1]},invalid:{create:()=>na({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=Dkt(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>na({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>na({value:e=>{let t=ui,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:ui,add:(e,t)=>KD(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>m0e(e,1),value:e=>e.valid?e.product_v?m0e(e,Pkt(e.list.values())):e.product:void 0,add:(e,t)=>KD(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:ui,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>na({value:e=>e.valid?e.mean:ui}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):ui,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>na({value:e=>e.valid>1?e.dev/e.valid:ui}),param:[1],req:["variance"]},stdev:{create:()=>na({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):ui}),param:[1],req:["variance"]},stdevp:{create:()=>na({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):ui}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=ui,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===ui)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=ui,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===ui)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>na({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>na({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):ui,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>na({value:e=>e.valid>1?e.cov/e.valid:ui}),param:[2],req:["covariance"]},corr:{create:()=>na({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):ui}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>na({value:i=>Rkt(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},g0e={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},y0e={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},$Ne={row_number:{create(){return{init:cy,value:e=>e.index+1}},param:[]},rank:g0e,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=g0e.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:y0e,ntile:{create(e){e=+e,e>0||gr("ntile num must be greater than zero.");const{init:t,value:n}=y0e.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=ui){return e=+e||1,{init:cy,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=ui){return e=+e||1,{init:cy,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:cy,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:cy,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||gr("nth_value nth must be greater than zero."),{init:cy,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):ui}}},param:[1,1]},fill_down:{create(e=ui){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return wp(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=ui){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=Okt(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function Okt(e,t,n){for(const r=e.size;n<r;++n)if(wp(e.value(n,t)))return n;return-1}function Ite(e){return Bp(LNe,e)}function kte(e){return Bp($Ne,e)}function FNe(e){return Bp(y2,e)||e==="row_object"}function BNe(e){return Ite(e)&&LNe[e]}function jNe(e){return kte(e)&&$Ne[e]}function oR(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const Rte={escape:(e,t,n)=>oR(e,t,n),expr:(e,t)=>oR(`(row,data,op)=>${e}`,y2,t),expr2:(e,t)=>oR(`(row0,data0,row,data)=>${e}`,y2,t),join:(e,t)=>oR(`(row1,data1,row2,data2)=>${e}`,y2,t),param:(e,t)=>oR(e,y2,t)},Mkt={"==":1,"!=":1,"===":1,"!==":1};function UNe(e,t,n=0,r,i){if(e.type=S3,e.name=t,e.table=n,i&&r&&ws(r.keyFor)){const s=Mkt[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===nI&&Lkt(i,e,s,r.keyFor(s.value))}return e}function Lkt(e,t,n,r){return r<0?(e.type=nI,e.value=!1,e.raw="false"):(t.type=Ckt,n.value=r,n.raw=r+""),!0}function F9(e){return di(e)?e:Ate(e)?e.entries():e?Object.entries(e):[]}const zNe="row_object";function VNe(e,t){e.type=Tkt;const n=e.properties=[];for(const r of F9(t)){const[i,s]=di(r)?r:[r,r];n.push({type:PNe,key:{type:nI,raw:V0(s)},value:UNe({computed:!0},i)})}return e}function HNe(e){return m5(VNe({},e))}function qNe(e){return Rte.expr(HNe(e))}const $kt=new TextDecoder("utf-8"),_Y=e=>$kt.decode(e),Fkt=new TextEncoder,Nte=e=>Fkt.encode(e),Bkt=e=>typeof e=="boolean",Mc=e=>typeof e=="function",Tx=e=>e!=null&&Object(e)===e,B9=e=>Tx(e)&&Mc(e.then),Dte=e=>Tx(e)&&Mc(e[Symbol.iterator]),j9=e=>Tx(e)&&Mc(e[Symbol.asyncIterator]),jkt=e=>Tx(e)&&"done"in e&&"value"in e,WNe=e=>"_getDOMStream"in e&&"_getNodeStream"in e,Ukt=e=>Tx(e)&&Mc(e.abort)&&Mc(e.getWriter)&&!WNe(e),zkt=e=>Tx(e)&&Mc(e.end)&&Mc(e.write)&&Bkt(e.writable)&&!WNe(e),Vkt=e=>Tx(e)&&Mc(e.clear)&&Mc(e.bytes)&&Mc(e.position)&&Mc(e.setPosition)&&Mc(e.capacity)&&Mc(e.getBufferIdentifier)&&Mc(e.createLong),Pte=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function Hkt(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function y5(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function H0(e,t){const n=Hkt(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?y5(o,s,a):o=s;break}y5(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function ka(e,t){let n=jkt(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=Nte(n)),n instanceof ArrayBuffer?new e(n):n instanceof Pte?new e(n):Vkt(n)?ka(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const aR=e=>ka(Int32Array,e),Oi=e=>ka(Uint8Array,e),wY=e=>(e.next(),e);function*qkt(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof Pte?n(t):Dte(t)?t:n(t);return yield*wY(function*(i){let s=null;do s=i.next(yield ka(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const Wkt=e=>qkt(Uint8Array,e);function GNe(e,t){return lw(this,arguments,function*(){if(B9(t))return yield Hr(yield Hr(yield*LU(wN(GNe(e,yield Hr(t))))));const r=function(o){return lw(this,arguments,function*(){yield yield Hr(yield Hr(o))})},i=function(o){return lw(this,arguments,function*(){yield Hr(yield*LU(wN(wY(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof Pte?r(t):Dte(t)?i(t):j9(t)?t:r(t);return yield Hr(yield*LU(wN(wY(function(o){return lw(this,arguments,function*(){let a=null;do a=yield Hr(o.next(yield yield Hr(ka(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Hr(new e)})}const Gkt=e=>GNe(Uint8Array,e);function YNe(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function Ykt(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const v0e={fromIterable(e){return y6(Kkt(e))},fromAsyncIterable(e){return y6(Xkt(e))},fromDOMStream(e){return y6(Qkt(e))},fromNodeStream(e){return y6(Zkt(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},y6=e=>(e.next(),e);function*Kkt(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?H0(r,o)[0]:([i,r,a]=H0(r,o),i)}({cmd:s,size:o}=yield null);const l=Wkt(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function Xkt(e){return lw(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?H0(i,a)[0]:([s,i,u]=H0(i,a),s)}({cmd:o,size:a}=yield yield Hr(null));const c=Gkt(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Hr(c.next()):yield Hr(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Hr(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Hr(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Hr(c.return(new Uint8Array(0))))}return yield Hr(null)})}function Qkt(e){return lw(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?H0(i,a)[0]:([s,i,u]=H0(i,a),s)}({cmd:o,size:a}=yield yield Hr(null));const c=new Jkt(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Hr(c.read()):yield Hr(c.read(a-u)),!n&&s.byteLength>0&&(i.push(Oi(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Hr(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield Hr(c.cancel(f)))}finally{r===!1?yield Hr(c.cancel()):e.locked&&c.releaseLock()}return yield Hr(null)})}class Jkt{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return hy(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return hy(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Oi(n)),n})}}const JV=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function Zkt(e){return lw(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?H0(l,a)[0]:([c,l,u]=H0(l,a),c)}if({cmd:o,size:a}=yield yield Hr(null),e.isTTY)return yield yield Hr(new Uint8Array(0)),yield Hr(null);try{n[0]=JV(e,"end"),n[1]=JV(e,"error");do{if(n[2]=JV(e,"readable"),[r,s]=yield Hr(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=Oi(e.read(a-u)),c.byteLength<a-u&&(c=Oi(e.read()))):c=Oi(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Hr(f()));while(a<u)}while(!i)}finally{yield Hr(d(n,r==="error"?s:null))}return yield Hr(null);function d(h,p){return c=l=null,new Promise((m,y)=>{for(const[v,b]of h)e.off(v,b);try{const v=e.destroy;v&&v.call(e,p),p=void 0}catch(v){p=v||p}finally{p!=null?y(p):m()}})}})}var Bl;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Bl||(Bl={}));var Zc;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(Zc||(Zc={}));var bu;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(bu||(bu={}));var q0;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(q0||(q0={}));var Pn;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Pn||(Pn={}));var W0;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(W0||(W0={}));var Na;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Na||(Na={}));var we;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(we||(we={}));var sy;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(sy||(sy={}));const eRt=void 0;function rE(e){if(e===null)return"null";if(e===eRt)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>rE(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const tRt=Symbol.for("isArrowBigNum");function tm(e,...t){return t.length===0?Object.setPrototypeOf(ka(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}tm.prototype[tRt]=!0;tm.prototype.toJSON=function(){return`"${QD(this)}"`};tm.prototype.valueOf=function(){return KNe(this)};tm.prototype.toString=function(){return QD(this)};tm.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return KNe(this);case"string":return QD(this);case"default":return nRt(this)}return QD(this)};function z2(...e){return tm.apply(this,e)}function V2(...e){return tm.apply(this,e)}function XD(...e){return tm.apply(this,e)}Object.setPrototypeOf(z2.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(V2.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(XD.prototype,Object.create(Uint32Array.prototype));Object.assign(z2.prototype,tm.prototype,{constructor:z2,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(V2.prototype,tm.prototype,{constructor:V2,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(XD.prototype,tm.prototype,{constructor:XD,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function KNe(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}const QD=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return ZV(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return ZV(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${ZV(t)}`},nRt=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:QD(e);function ZV(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class Ote{static new(t,n){switch(n){case!0:return new z2(t);case!1:return new V2(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new z2(t)}return t.byteLength===16?new XD(t):new V2(t)}static signed(t){return new z2(t)}static unsigned(t){return new V2(t)}static decimal(t){return new XD(t)}constructor(t,n){return Ote.new(t,n)}}function jp(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var XNe,QNe,JNe,ZNe,eDe,tDe,nDe,rDe,iDe,sDe,oDe,aDe,uDe,lDe,cDe,fDe,dDe,hDe,pDe,mDe;class or{static isNull(t){return(t==null?void 0:t.typeId)===we.Null}static isInt(t){return(t==null?void 0:t.typeId)===we.Int}static isFloat(t){return(t==null?void 0:t.typeId)===we.Float}static isBinary(t){return(t==null?void 0:t.typeId)===we.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===we.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===we.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===we.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===we.Date}static isTime(t){return(t==null?void 0:t.typeId)===we.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===we.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===we.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===we.Duration}static isList(t){return(t==null?void 0:t.typeId)===we.List}static isStruct(t){return(t==null?void 0:t.typeId)===we.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===we.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===we.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===we.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===we.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===we.Dictionary}static isDenseUnion(t){return or.isUnion(t)&&t.mode===Zc.Dense}static isSparseUnion(t){return or.isUnion(t)&&t.mode===Zc.Sparse}get typeId(){return we.NONE}}XNe=Symbol.toStringTag;or[XNe]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(or.prototype);let u1=class extends or{toString(){return"Null"}get typeId(){return we.Null}};QNe=Symbol.toStringTag;u1[QNe]=(e=>e[Symbol.toStringTag]="Null")(u1.prototype);class Jl extends or{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return we.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}JNe=Symbol.toStringTag;Jl[JNe]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(Jl.prototype);class Mte extends Jl{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class Lte extends Jl{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class Bb extends Jl{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class $te extends Jl{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class Fte extends Jl{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class Bte extends Jl{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class jte extends Jl{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class Ute extends Jl{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(Mte.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(Lte.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(Bb.prototype,"ArrayType",{value:Int32Array});Object.defineProperty($te.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(Fte.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(Bte.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(jte.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(Ute.prototype,"ArrayType",{value:BigUint64Array});class jb extends or{constructor(t){super(),this.precision=t}get typeId(){return we.Float}get ArrayType(){switch(this.precision){case bu.HALF:return Uint16Array;case bu.SINGLE:return Float32Array;case bu.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}ZNe=Symbol.toStringTag;jb[ZNe]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(jb.prototype);class gDe extends jb{constructor(){super(bu.HALF)}}class zte extends jb{constructor(){super(bu.SINGLE)}}class Vte extends jb{constructor(){super(bu.DOUBLE)}}Object.defineProperty(gDe.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(zte.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(Vte.prototype,"ArrayType",{value:Float64Array});let JD=class extends or{constructor(){super()}get typeId(){return we.Binary}toString(){return"Binary"}};eDe=Symbol.toStringTag;JD[eDe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(JD.prototype);let NC=class extends or{constructor(){super()}get typeId(){return we.Utf8}toString(){return"Utf8"}};tDe=Symbol.toStringTag;NC[tDe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(NC.prototype);let ZD=class extends or{constructor(){super()}get typeId(){return we.Bool}toString(){return"Bool"}};nDe=Symbol.toStringTag;ZD[nDe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(ZD.prototype);let v5=class extends or{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return we.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};rDe=Symbol.toStringTag;v5[rDe]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(v5.prototype);class DC extends or{constructor(t){super(),this.unit=t}get typeId(){return we.Date}toString(){return`Date${(this.unit+1)*32}<${q0[this.unit]}>`}}iDe=Symbol.toStringTag;DC[iDe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(DC.prototype);class rRt extends DC{constructor(){super(q0.DAY)}}class iRt extends DC{constructor(){super(q0.MILLISECOND)}}class l1 extends or{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return we.Time}toString(){return`Time${this.bitWidth}<${Pn[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}sDe=Symbol.toStringTag;l1[sDe]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(l1.prototype);class sRt extends l1{constructor(){super(Pn.SECOND,32)}}class oRt extends l1{constructor(){super(Pn.MILLISECOND,32)}}class aRt extends l1{constructor(){super(Pn.MICROSECOND,64)}}class uRt extends l1{constructor(){super(Pn.NANOSECOND,64)}}class b5 extends or{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return we.Timestamp}toString(){return`Timestamp<${Pn[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}oDe=Symbol.toStringTag;b5[oDe]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(b5.prototype);class PC extends or{constructor(t){super(),this.unit=t}get typeId(){return we.Interval}toString(){return`Interval<${W0[this.unit]}>`}}aDe=Symbol.toStringTag;PC[aDe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(PC.prototype);class lRt extends PC{constructor(){super(W0.DAY_TIME)}}class cRt extends PC{constructor(){super(W0.YEAR_MONTH)}}let x5=class extends or{constructor(t){super(),this.unit=t}get typeId(){return we.Duration}toString(){return`Duration<${Pn[this.unit]}>`}};uDe=Symbol.toStringTag;x5[uDe]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(x5.prototype);let OC=class extends or{constructor(t){super(),this.children=[t]}get typeId(){return we.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};lDe=Symbol.toStringTag;OC[lDe]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(OC.prototype);class Zu extends or{constructor(t){super(),this.children=t}get typeId(){return we.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}cDe=Symbol.toStringTag;Zu[cDe]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(Zu.prototype);class eP extends or{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return we.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}fDe=Symbol.toStringTag;eP[fDe]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(eP.prototype);let _5=class extends or{constructor(t){super(),this.byteWidth=t}get typeId(){return we.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};dDe=Symbol.toStringTag;_5[dDe]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(_5.prototype);let MC=class extends or{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return we.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};hDe=Symbol.toStringTag;MC[hDe]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(MC.prototype);class tP extends or{constructor(t,n=!1){var r,i,s;if(super(),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get typeId(){return we.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}pDe=Symbol.toStringTag;tP[pDe]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(tP.prototype);const fRt=(e=>()=>++e)(-1);class Ub extends or{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?fRt():jp(r)}get typeId(){return we.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}mDe=Symbol.toStringTag;Ub[mDe]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(Ub.prototype);function Gm(e){const t=e;switch(e.typeId){case we.Decimal:return e.bitWidth/32;case we.Timestamp:return 2;case we.Date:return 1+t.unit;case we.Interval:return 1+t.unit;case we.FixedSizeList:return t.listSize;case we.FixedSizeBinary:return t.byteWidth;default:return 1}}class vr{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return dRt(this,t,n)}getVisitFnByTypeId(t,n=!0){return s2(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function dRt(e,t,n=!0){return typeof t=="number"?s2(e,t,n):typeof t=="string"&&t in we?s2(e,we[t],n):t&&t instanceof or?s2(e,b0e(t),n):t!=null&&t.type&&t.type instanceof or?s2(e,b0e(t.type),n):s2(e,we.NONE,n)}function s2(e,t,n=!0){let r=null;switch(t){case we.Null:r=e.visitNull;break;case we.Bool:r=e.visitBool;break;case we.Int:r=e.visitInt;break;case we.Int8:r=e.visitInt8||e.visitInt;break;case we.Int16:r=e.visitInt16||e.visitInt;break;case we.Int32:r=e.visitInt32||e.visitInt;break;case we.Int64:r=e.visitInt64||e.visitInt;break;case we.Uint8:r=e.visitUint8||e.visitInt;break;case we.Uint16:r=e.visitUint16||e.visitInt;break;case we.Uint32:r=e.visitUint32||e.visitInt;break;case we.Uint64:r=e.visitUint64||e.visitInt;break;case we.Float:r=e.visitFloat;break;case we.Float16:r=e.visitFloat16||e.visitFloat;break;case we.Float32:r=e.visitFloat32||e.visitFloat;break;case we.Float64:r=e.visitFloat64||e.visitFloat;break;case we.Utf8:r=e.visitUtf8;break;case we.Binary:r=e.visitBinary;break;case we.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case we.Date:r=e.visitDate;break;case we.DateDay:r=e.visitDateDay||e.visitDate;break;case we.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case we.Timestamp:r=e.visitTimestamp;break;case we.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case we.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case we.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case we.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case we.Time:r=e.visitTime;break;case we.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case we.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case we.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case we.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case we.Decimal:r=e.visitDecimal;break;case we.List:r=e.visitList;break;case we.Struct:r=e.visitStruct;break;case we.Union:r=e.visitUnion;break;case we.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case we.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case we.Dictionary:r=e.visitDictionary;break;case we.Interval:r=e.visitInterval;break;case we.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case we.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case we.Duration:r=e.visitDuration;break;case we.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case we.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case we.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case we.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case we.FixedSizeList:r=e.visitFixedSizeList;break;case we.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${we[t]}'`)}function b0e(e){switch(e.typeId){case we.Null:return we.Null;case we.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?we.Int8:we.Uint8;case 16:return n?we.Int16:we.Uint16;case 32:return n?we.Int32:we.Uint32;case 64:return n?we.Int64:we.Uint64}return we.Int}case we.Float:switch(e.precision){case bu.HALF:return we.Float16;case bu.SINGLE:return we.Float32;case bu.DOUBLE:return we.Float64}return we.Float;case we.Binary:return we.Binary;case we.Utf8:return we.Utf8;case we.Bool:return we.Bool;case we.Decimal:return we.Decimal;case we.Time:switch(e.unit){case Pn.SECOND:return we.TimeSecond;case Pn.MILLISECOND:return we.TimeMillisecond;case Pn.MICROSECOND:return we.TimeMicrosecond;case Pn.NANOSECOND:return we.TimeNanosecond}return we.Time;case we.Timestamp:switch(e.unit){case Pn.SECOND:return we.TimestampSecond;case Pn.MILLISECOND:return we.TimestampMillisecond;case Pn.MICROSECOND:return we.TimestampMicrosecond;case Pn.NANOSECOND:return we.TimestampNanosecond}return we.Timestamp;case we.Date:switch(e.unit){case q0.DAY:return we.DateDay;case q0.MILLISECOND:return we.DateMillisecond}return we.Date;case we.Interval:switch(e.unit){case W0.DAY_TIME:return we.IntervalDayTime;case W0.YEAR_MONTH:return we.IntervalYearMonth}return we.Interval;case we.Duration:switch(e.unit){case Pn.SECOND:return we.DurationSecond;case Pn.MILLISECOND:return we.DurationMillisecond;case Pn.MICROSECOND:return we.DurationMicrosecond;case Pn.NANOSECOND:return we.DurationNanosecond}return we.Duration;case we.Map:return we.Map;case we.List:return we.List;case we.Struct:return we.Struct;case we.Union:switch(e.mode){case Zc.Dense:return we.DenseUnion;case Zc.Sparse:return we.SparseUnion}return we.Union;case we.FixedSizeBinary:return we.FixedSizeBinary;case we.FixedSizeList:return we.FixedSizeList;case we.Dictionary:return we.Dictionary}throw new Error(`Unrecognized type '${we[e.typeId]}'`)}vr.prototype.visitInt8=null;vr.prototype.visitInt16=null;vr.prototype.visitInt32=null;vr.prototype.visitInt64=null;vr.prototype.visitUint8=null;vr.prototype.visitUint16=null;vr.prototype.visitUint32=null;vr.prototype.visitUint64=null;vr.prototype.visitFloat16=null;vr.prototype.visitFloat32=null;vr.prototype.visitFloat64=null;vr.prototype.visitDateDay=null;vr.prototype.visitDateMillisecond=null;vr.prototype.visitTimestampSecond=null;vr.prototype.visitTimestampMillisecond=null;vr.prototype.visitTimestampMicrosecond=null;vr.prototype.visitTimestampNanosecond=null;vr.prototype.visitTimeSecond=null;vr.prototype.visitTimeMillisecond=null;vr.prototype.visitTimeMicrosecond=null;vr.prototype.visitTimeNanosecond=null;vr.prototype.visitDenseUnion=null;vr.prototype.visitSparseUnion=null;vr.prototype.visitIntervalDayTime=null;vr.prototype.visitIntervalYearMonth=null;vr.prototype.visitDuration=null;vr.prototype.visitDurationSecond=null;vr.prototype.visitDurationMillisecond=null;vr.prototype.visitDurationMicrosecond=null;vr.prototype.visitDurationNanosecond=null;const yDe=new Float64Array(1),LS=new Uint32Array(yDe.buffer);function vDe(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function bDe(e){if(e!==e)return 32256;yDe[0]=e;const t=(LS[1]&2147483648)>>16&65535;let n=LS[1]&2146435072,r=0;return n>=1089470464?LS[0]>0?n=31744:(n=(n&2080374784)>>16,r=(LS[1]&1048575)>>10):n<=1056964608?(r=1048576+(LS[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(LS[1]&1048575)+512>>10),t|n|r&65535}class Fn extends vr{}function Gn(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const hRt=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},Hte=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},pRt=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},mRt=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},xDe=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},gRt=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},S1=({values:e},t,n)=>{e[t]=n},qte=({values:e},t,n)=>{e[t]=n},_De=({values:e},t,n)=>{e[t]=bDe(n)},yRt=(e,t,n)=>{switch(e.type.precision){case bu.HALF:return _De(e,t,n);case bu.SINGLE:case bu.DOUBLE:return qte(e,t,n)}},Wte=({values:e},t,n)=>{hRt(e,t,n.valueOf())},Gte=({values:e},t,n)=>{Hte(e,t*2,n.valueOf())},wDe=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},vRt=({values:e,valueOffsets:t},n,r)=>xDe(e,t,n,r),bRt=({values:e,valueOffsets:t},n,r)=>{xDe(e,t,n,Nte(r))},EDe=(e,t,n)=>{e.type.unit===q0.DAY?Wte(e,t,n):Gte(e,t,n)},Yte=({values:e},t,n)=>Hte(e,t*2,n/1e3),Kte=({values:e},t,n)=>Hte(e,t*2,n),Xte=({values:e},t,n)=>pRt(e,t*2,n),Qte=({values:e},t,n)=>mRt(e,t*2,n),TDe=(e,t,n)=>{switch(e.type.unit){case Pn.SECOND:return Yte(e,t,n);case Pn.MILLISECOND:return Kte(e,t,n);case Pn.MICROSECOND:return Xte(e,t,n);case Pn.NANOSECOND:return Qte(e,t,n)}},Jte=({values:e},t,n)=>{e[t]=n},Zte=({values:e},t,n)=>{e[t]=n},ene=({values:e},t,n)=>{e[t]=n},tne=({values:e},t,n)=>{e[t]=n},SDe=(e,t,n)=>{switch(e.type.unit){case Pn.SECOND:return Jte(e,t,n);case Pn.MILLISECOND:return Zte(e,t,n);case Pn.MICROSECOND:return ene(e,t,n);case Pn.NANOSECOND:return tne(e,t,n)}},CDe=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},xRt=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=oh.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},_Rt=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=oh.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},wRt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),ERt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),TRt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),SRt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),CRt=(e,t,n)=>{const r=e.type.children.map(s=>oh.getVisitFn(s.type)),i=n instanceof Map?TRt(t,n):n instanceof hi?ERt(t,n):Array.isArray(n)?wRt(t,n):SRt(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},ARt=(e,t,n)=>{e.type.mode===Zc.Dense?ADe(e,t,n):IDe(e,t,n)},ADe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];oh.visit(i,e.valueOffsets[t],n)},IDe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];oh.visit(i,t,n)},IRt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},kDe=(e,t,n)=>{e.type.unit===W0.DAY_TIME?nne(e,t,n):rne(e,t,n)},nne=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},rne=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},ine=({values:e},t,n)=>{e[t]=n},sne=({values:e},t,n)=>{e[t]=n},one=({values:e},t,n)=>{e[t]=n},ane=({values:e},t,n)=>{e[t]=n},RDe=(e,t,n)=>{switch(e.type.unit){case Pn.SECOND:return ine(e,t,n);case Pn.MILLISECOND:return sne(e,t,n);case Pn.MICROSECOND:return one(e,t,n);case Pn.NANOSECOND:return ane(e,t,n)}},kRt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=oh.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};Fn.prototype.visitBool=Gn(gRt);Fn.prototype.visitInt=Gn(S1);Fn.prototype.visitInt8=Gn(S1);Fn.prototype.visitInt16=Gn(S1);Fn.prototype.visitInt32=Gn(S1);Fn.prototype.visitInt64=Gn(S1);Fn.prototype.visitUint8=Gn(S1);Fn.prototype.visitUint16=Gn(S1);Fn.prototype.visitUint32=Gn(S1);Fn.prototype.visitUint64=Gn(S1);Fn.prototype.visitFloat=Gn(yRt);Fn.prototype.visitFloat16=Gn(_De);Fn.prototype.visitFloat32=Gn(qte);Fn.prototype.visitFloat64=Gn(qte);Fn.prototype.visitUtf8=Gn(bRt);Fn.prototype.visitBinary=Gn(vRt);Fn.prototype.visitFixedSizeBinary=Gn(wDe);Fn.prototype.visitDate=Gn(EDe);Fn.prototype.visitDateDay=Gn(Wte);Fn.prototype.visitDateMillisecond=Gn(Gte);Fn.prototype.visitTimestamp=Gn(TDe);Fn.prototype.visitTimestampSecond=Gn(Yte);Fn.prototype.visitTimestampMillisecond=Gn(Kte);Fn.prototype.visitTimestampMicrosecond=Gn(Xte);Fn.prototype.visitTimestampNanosecond=Gn(Qte);Fn.prototype.visitTime=Gn(SDe);Fn.prototype.visitTimeSecond=Gn(Jte);Fn.prototype.visitTimeMillisecond=Gn(Zte);Fn.prototype.visitTimeMicrosecond=Gn(ene);Fn.prototype.visitTimeNanosecond=Gn(tne);Fn.prototype.visitDecimal=Gn(CDe);Fn.prototype.visitList=Gn(xRt);Fn.prototype.visitStruct=Gn(CRt);Fn.prototype.visitUnion=Gn(ARt);Fn.prototype.visitDenseUnion=Gn(ADe);Fn.prototype.visitSparseUnion=Gn(IDe);Fn.prototype.visitDictionary=Gn(IRt);Fn.prototype.visitInterval=Gn(kDe);Fn.prototype.visitIntervalDayTime=Gn(nne);Fn.prototype.visitIntervalYearMonth=Gn(rne);Fn.prototype.visitDuration=Gn(RDe);Fn.prototype.visitDurationSecond=Gn(ine);Fn.prototype.visitDurationMillisecond=Gn(sne);Fn.prototype.visitDurationMicrosecond=Gn(one);Fn.prototype.visitDurationNanosecond=Gn(ane);Fn.prototype.visitFixedSizeList=Gn(kRt);Fn.prototype.visitMap=Gn(_Rt);const oh=new Fn,ap=Symbol.for("parent"),H2=Symbol.for("rowIndex");class une{constructor(t,n){return this[ap]=t,this[H2]=n,new Proxy(this,new NRt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[H2],n=this[ap],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=ef.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${rE(t)}: ${rE(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new RRt(this[ap],this[H2])}}class RRt{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,ef.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(une.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[ap]:{writable:!0,enumerable:!1,configurable:!1,value:null},[H2]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class NRt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[ap].type.children.map(n=>n.name)}has(t,n){return t[ap].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[ap].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[ap].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=ef.visit(t[ap].children[r],t[H2]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[ap].type.children.findIndex(s=>s.name===n);return i!==-1?(oh.visit(t[ap].children[i],t[H2],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class On extends vr{}function Bn(e){return(t,n)=>t.getValid(n)?e(t,n):null}const DRt=(e,t)=>864e5*e[t],lne=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),PRt=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,ORt=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,NDe=e=>new Date(e),MRt=(e,t)=>NDe(DRt(e,t)),LRt=(e,t)=>NDe(lne(e,t)),$Rt=(e,t)=>null,DDe=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},FRt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},PDe=({values:e},t)=>MRt(e,t),ODe=({values:e},t)=>LRt(e,t*2),Sx=({stride:e,values:t},n)=>t[e*n],BRt=({stride:e,values:t},n)=>vDe(t[e*n]),MDe=({values:e},t)=>e[t],jRt=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),URt=({values:e,valueOffsets:t},n)=>DDe(e,t,n),zRt=({values:e,valueOffsets:t},n)=>{const r=DDe(e,t,n);return r!==null?_Y(r):null},VRt=({values:e},t)=>e[t],HRt=({type:e,values:t},n)=>e.precision!==bu.HALF?t[n]:vDe(t[n]),qRt=(e,t)=>e.type.unit===q0.DAY?PDe(e,t):ODe(e,t),LDe=({values:e},t)=>1e3*lne(e,t*2),$De=({values:e},t)=>lne(e,t*2),FDe=({values:e},t)=>PRt(e,t*2),BDe=({values:e},t)=>ORt(e,t*2),WRt=(e,t)=>{switch(e.type.unit){case Pn.SECOND:return LDe(e,t);case Pn.MILLISECOND:return $De(e,t);case Pn.MICROSECOND:return FDe(e,t);case Pn.NANOSECOND:return BDe(e,t)}},jDe=({values:e},t)=>e[t],UDe=({values:e},t)=>e[t],zDe=({values:e},t)=>e[t],VDe=({values:e},t)=>e[t],GRt=(e,t)=>{switch(e.type.unit){case Pn.SECOND:return jDe(e,t);case Pn.MILLISECOND:return UDe(e,t);case Pn.MICROSECOND:return zDe(e,t);case Pn.NANOSECOND:return VDe(e,t)}},YRt=({values:e,stride:t},n)=>Ote.decimal(e.subarray(t*n,t*(n+1))),KRt=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new hi([u])},XRt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new U9(o.slice(i,s-i))},QRt=(e,t)=>new une(e,t),JRt=(e,t)=>e.type.mode===Zc.Dense?HDe(e,t):qDe(e,t),HDe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return ef.visit(r,e.valueOffsets[t])},qDe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return ef.visit(r,t)},ZRt=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},eNt=(e,t)=>e.type.unit===W0.DAY_TIME?WDe(e,t):GDe(e,t),WDe=({values:e},t)=>e.subarray(2*t,2*(t+1)),GDe=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},YDe=({values:e},t)=>e[t],KDe=({values:e},t)=>e[t],XDe=({values:e},t)=>e[t],QDe=({values:e},t)=>e[t],tNt=(e,t)=>{switch(e.type.unit){case Pn.SECOND:return YDe(e,t);case Pn.MILLISECOND:return KDe(e,t);case Pn.MICROSECOND:return XDe(e,t);case Pn.NANOSECOND:return QDe(e,t)}},nNt=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new hi([s])};On.prototype.visitNull=Bn($Rt);On.prototype.visitBool=Bn(FRt);On.prototype.visitInt=Bn(VRt);On.prototype.visitInt8=Bn(Sx);On.prototype.visitInt16=Bn(Sx);On.prototype.visitInt32=Bn(Sx);On.prototype.visitInt64=Bn(MDe);On.prototype.visitUint8=Bn(Sx);On.prototype.visitUint16=Bn(Sx);On.prototype.visitUint32=Bn(Sx);On.prototype.visitUint64=Bn(MDe);On.prototype.visitFloat=Bn(HRt);On.prototype.visitFloat16=Bn(BRt);On.prototype.visitFloat32=Bn(Sx);On.prototype.visitFloat64=Bn(Sx);On.prototype.visitUtf8=Bn(zRt);On.prototype.visitBinary=Bn(URt);On.prototype.visitFixedSizeBinary=Bn(jRt);On.prototype.visitDate=Bn(qRt);On.prototype.visitDateDay=Bn(PDe);On.prototype.visitDateMillisecond=Bn(ODe);On.prototype.visitTimestamp=Bn(WRt);On.prototype.visitTimestampSecond=Bn(LDe);On.prototype.visitTimestampMillisecond=Bn($De);On.prototype.visitTimestampMicrosecond=Bn(FDe);On.prototype.visitTimestampNanosecond=Bn(BDe);On.prototype.visitTime=Bn(GRt);On.prototype.visitTimeSecond=Bn(jDe);On.prototype.visitTimeMillisecond=Bn(UDe);On.prototype.visitTimeMicrosecond=Bn(zDe);On.prototype.visitTimeNanosecond=Bn(VDe);On.prototype.visitDecimal=Bn(YRt);On.prototype.visitList=Bn(KRt);On.prototype.visitStruct=Bn(QRt);On.prototype.visitUnion=Bn(JRt);On.prototype.visitDenseUnion=Bn(HDe);On.prototype.visitSparseUnion=Bn(qDe);On.prototype.visitDictionary=Bn(ZRt);On.prototype.visitInterval=Bn(eNt);On.prototype.visitIntervalDayTime=Bn(WDe);On.prototype.visitIntervalYearMonth=Bn(GDe);On.prototype.visitDuration=Bn(tNt);On.prototype.visitDurationSecond=Bn(YDe);On.prototype.visitDurationMillisecond=Bn(KDe);On.prototype.visitDurationMicrosecond=Bn(XDe);On.prototype.visitDurationNanosecond=Bn(QDe);On.prototype.visitFixedSizeList=Bn(nNt);On.prototype.visitMap=Bn(XRt);const ef=new On,yp=Symbol.for("keys"),q2=Symbol.for("vals");class U9{constructor(t){return this[yp]=new hi([t.children[0]]).memoize(),this[q2]=t.children[1],new Proxy(this,new iNt)}[Symbol.iterator](){return new rNt(this[yp],this[q2])}get size(){return this[yp].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[yp],n=this[q2],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=ef.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${rE(t)}: ${rE(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class rNt{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),ef.visit(this.vals,t)]})}}class iNt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[yp].toArray().map(String)}has(t,n){return t[yp].includes(n)}getOwnPropertyDescriptor(t,n){if(t[yp].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[yp].indexOf(n);if(r!==-1){const i=ef.visit(Reflect.get(t,q2),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[yp].indexOf(n);return i!==-1?(oh.visit(Reflect.get(t,q2),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(U9.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[yp]:{writable:!0,enumerable:!1,configurable:!1,value:null},[q2]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let x0e;function JDe(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(x0e=s,s=o,o=x0e),o>i&&(o=i),r?r(e,s,o):[s,o]}const _0e=e=>e!==e;function rI(e){if(typeof e!=="object"||e===null)return _0e(e)?_0e:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?Ykt(e,n):!1:e instanceof Map?oNt(e):Array.isArray(e)?sNt(e):e instanceof hi?aNt(e):uNt(e,!0)}function sNt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=rI(e[n]);return z9(t)}function oNt(e){let t=-1;const n=[];for(const r of e.values())n[++t]=rI(r);return z9(n)}function aNt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=rI(e.get(n));return z9(t)}function uNt(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=rI(e[n[i]]);return z9(r,n)}function z9(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return lNt(e,n);case Map:return w0e(e,n,n.keys());case U9:case une:case Object:case void 0:return w0e(e,n,t||Object.keys(n))}return n instanceof hi?cNt(e,n):!1}}function lNt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function cNt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function w0e(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function ZDe(e,t,n,r){return(n&1<<r)!==0}function fNt(e,t,n,r){return(n&1<<r)>>r}function w5(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):ePe(new cne(n,e,t,null,ZDe)).subarray(0,r)),i}return n}function ePe(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class cne{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function EY(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new cne(e,t,n-t,e,fNt))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return EY(e,t,i)+EY(e,r,n)+dNt(e,i>>3,r-i>>3)}function dNt(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=eH(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=eH(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=eH(s.getUint8(i)),i+=1;return r}function eH(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const hNt=-1;class Pi{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return or.isSparseUnion(t)?this.children.some(n=>n.nullable):or.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(or.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=hNt&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-EY(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof Pi?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=Gm(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u)))}getValid(t){const{type:n}=this;if(or.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===Zc.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(or.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===Zc.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,u=o+t,l=1<<u%8,c=u>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(w5(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[c];r=(f&l)!==0,n?s[c]=f|l:s[c]=f&~l}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new Pi(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===we.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(w5(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[sy.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[sy.TYPE])&&(o[sy.TYPE]=s.subarray(t,t+n)),(s=o[sy.OFFSET])&&(o[sy.OFFSET]=s.subarray(t,t+n+1))||(s=o[sy.DATA])&&(o[sy.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}Pi.prototype.children=Object.freeze([]);class GN extends vr{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new Pi(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=Oi(t.nullBitmap),s=ka(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pi(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=Oi(t.nullBitmap),s=ka(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pi(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=Oi(t.nullBitmap),s=ka(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pi(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Oi(t.data),s=Oi(t.nullBitmap),o=aR(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Pi(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Oi(t.data),s=Oi(t.nullBitmap),o=aR(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Pi(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Oi(t.nullBitmap),s=ka(n.ArrayType,t.data),{["length"]:o=s.length/Gm(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pi(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=Oi(t.nullBitmap),s=ka(n.ArrayType,t.data),{["length"]:o=s.length/Gm(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pi(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=Oi(t.nullBitmap),s=ka(n.ArrayType,t.data),{["length"]:o=s.length/Gm(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pi(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=Oi(t.nullBitmap),s=ka(n.ArrayType,t.data),{["length"]:o=s.length/Gm(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pi(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=Oi(t.nullBitmap),s=ka(n.ArrayType,t.data),{["length"]:o=s.length/Gm(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pi(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=Oi(t.nullBitmap),o=aR(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Pi(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Oi(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new Pi(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=ka(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(or.isSparseUnion(n))return new Pi(n,r,o,a,[void 0,void 0,void 0,s],i);const u=aR(t.valueOffsets);return new Pi(n,r,o,a,[u,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=Oi(t.nullBitmap),s=ka(n.indices.ArrayType,t.data),{["dictionary"]:o=new hi([new GN().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Pi(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=Oi(t.nullBitmap),s=ka(n.ArrayType,t.data),{["length"]:o=s.length/Gm(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pi(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=Oi(t.nullBitmap),s=ka(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pi(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new GN().visit({type:n.valueType})}=t,s=Oi(t.nullBitmap),{["length"]:o=i.length/Gm(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pi(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new GN().visit({type:n.childType})}=t,s=Oi(t.nullBitmap),o=aR(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Pi(n,r,a,u,[o,void 0,s],[i])}}const pNt=new GN;function Xu(e){return pNt.visit(e)}class E0e{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function tPe(e){return e.reduce((t,n)=>t+n.nullCount,0)}function nPe(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function rPe(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function fne(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function dne(e,t){return e.getValid(t)}function W2(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return fne(r,this._offsets,n,t)}}function iPe(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=fne(s,this._offsets,r,n);return t=void 0,o}}function sPe(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):fne(s,this._offsets,i,n);return t=void 0,o}}class Mn extends vr{}function mNt(e,t){return t===null&&e.length>0?0:-1}function gNt(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new cne(n,e.offset+(t||0),e.length,n,ZDe)){if(!i)return r;++r}return-1}function er(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case we.Union:break;case we.Dictionary:break;default:return gNt(e,n)}const r=ef.getVisitFn(e),i=rI(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function oPe(e,t,n){const r=ef.getVisitFn(e),i=rI(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}Mn.prototype.visitNull=mNt;Mn.prototype.visitBool=er;Mn.prototype.visitInt=er;Mn.prototype.visitInt8=er;Mn.prototype.visitInt16=er;Mn.prototype.visitInt32=er;Mn.prototype.visitInt64=er;Mn.prototype.visitUint8=er;Mn.prototype.visitUint16=er;Mn.prototype.visitUint32=er;Mn.prototype.visitUint64=er;Mn.prototype.visitFloat=er;Mn.prototype.visitFloat16=er;Mn.prototype.visitFloat32=er;Mn.prototype.visitFloat64=er;Mn.prototype.visitUtf8=er;Mn.prototype.visitBinary=er;Mn.prototype.visitFixedSizeBinary=er;Mn.prototype.visitDate=er;Mn.prototype.visitDateDay=er;Mn.prototype.visitDateMillisecond=er;Mn.prototype.visitTimestamp=er;Mn.prototype.visitTimestampSecond=er;Mn.prototype.visitTimestampMillisecond=er;Mn.prototype.visitTimestampMicrosecond=er;Mn.prototype.visitTimestampNanosecond=er;Mn.prototype.visitTime=er;Mn.prototype.visitTimeSecond=er;Mn.prototype.visitTimeMillisecond=er;Mn.prototype.visitTimeMicrosecond=er;Mn.prototype.visitTimeNanosecond=er;Mn.prototype.visitDecimal=er;Mn.prototype.visitList=er;Mn.prototype.visitStruct=er;Mn.prototype.visitUnion=er;Mn.prototype.visitDenseUnion=oPe;Mn.prototype.visitSparseUnion=oPe;Mn.prototype.visitDictionary=er;Mn.prototype.visitInterval=er;Mn.prototype.visitIntervalDayTime=er;Mn.prototype.visitIntervalYearMonth=er;Mn.prototype.visitDuration=er;Mn.prototype.visitDurationSecond=er;Mn.prototype.visitDurationMillisecond=er;Mn.prototype.visitDurationMicrosecond=er;Mn.prototype.visitDurationNanosecond=er;Mn.prototype.visitFixedSizeList=er;Mn.prototype.visitMap=er;const E5=new Mn;class Ln extends vr{}function jn(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===we.Timestamp||t instanceof Jl&&t.bitWidth!==64||t instanceof l1&&t.bitWidth!==64||t instanceof jb&&t.precision!==bu.HALF))return new E0e(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new E0e(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new yNt(o)})}class yNt{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Ln.prototype.visitNull=jn;Ln.prototype.visitBool=jn;Ln.prototype.visitInt=jn;Ln.prototype.visitInt8=jn;Ln.prototype.visitInt16=jn;Ln.prototype.visitInt32=jn;Ln.prototype.visitInt64=jn;Ln.prototype.visitUint8=jn;Ln.prototype.visitUint16=jn;Ln.prototype.visitUint32=jn;Ln.prototype.visitUint64=jn;Ln.prototype.visitFloat=jn;Ln.prototype.visitFloat16=jn;Ln.prototype.visitFloat32=jn;Ln.prototype.visitFloat64=jn;Ln.prototype.visitUtf8=jn;Ln.prototype.visitBinary=jn;Ln.prototype.visitFixedSizeBinary=jn;Ln.prototype.visitDate=jn;Ln.prototype.visitDateDay=jn;Ln.prototype.visitDateMillisecond=jn;Ln.prototype.visitTimestamp=jn;Ln.prototype.visitTimestampSecond=jn;Ln.prototype.visitTimestampMillisecond=jn;Ln.prototype.visitTimestampMicrosecond=jn;Ln.prototype.visitTimestampNanosecond=jn;Ln.prototype.visitTime=jn;Ln.prototype.visitTimeSecond=jn;Ln.prototype.visitTimeMillisecond=jn;Ln.prototype.visitTimeMicrosecond=jn;Ln.prototype.visitTimeNanosecond=jn;Ln.prototype.visitDecimal=jn;Ln.prototype.visitList=jn;Ln.prototype.visitStruct=jn;Ln.prototype.visitUnion=jn;Ln.prototype.visitDenseUnion=jn;Ln.prototype.visitSparseUnion=jn;Ln.prototype.visitDictionary=jn;Ln.prototype.visitInterval=jn;Ln.prototype.visitIntervalDayTime=jn;Ln.prototype.visitIntervalYearMonth=jn;Ln.prototype.visitDuration=jn;Ln.prototype.visitDurationSecond=jn;Ln.prototype.visitDurationMillisecond=jn;Ln.prototype.visitDurationMicrosecond=jn;Ln.prototype.visitDurationNanosecond=jn;Ln.prototype.visitFixedSizeList=jn;Ln.prototype.visitMap=jn;const hne=new Ln,vNt=(e,t)=>e+t;class Cx extends vr{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===Pn.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitDuration(t,n){return 8}visitStruct(t,n){return t.children.reduce((r,i)=>r+G0.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+G0.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const bNt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),xNt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),_Nt=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=G0.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},wNt=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=G0.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},ENt=(e,t)=>e.type.mode===Zc.Dense?aPe(e,t):uPe(e,t),aPe=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+G0.visit(t[s],r[i])},uPe=({children:e},t)=>4+G0.visitMany(e,e.map(()=>t)).reduce(vNt,0);Cx.prototype.visitUtf8=bNt;Cx.prototype.visitBinary=xNt;Cx.prototype.visitList=_Nt;Cx.prototype.visitFixedSizeList=wNt;Cx.prototype.visitUnion=ENt;Cx.prototype.visitDenseUnion=aPe;Cx.prototype.visitSparseUnion=uPe;const G0=new Cx;var lPe;const cPe={},fPe={};class hi{constructor(t){var n,r,i;const s=t[0]instanceof hi?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof Pi)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=cPe[o.typeId],f=s[0];this.isValid=d=>dne(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,fPe[o.typeId]),this._offsets=nPe(s);break}this.data=s,this.type=o,this.stride=Gm(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullCount(){return tPe(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${we[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}getByteLength(t){return 0}[Symbol.iterator](){return hne.visit(this)}concat(...t){return new hi(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new hi(JDe(this,t,n,({data:r,_offsets:i},s,o)=>rPe(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case we.Int:case we.Float:case we.Decimal:case we.Time:case we.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new hi(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return or.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(or.isDictionary(this.type)){const t=new T5(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new hi(n)}return new T5(this)}unmemoize(){if(or.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new hi(n)}return this}}lPe=Symbol.toStringTag;hi[lPe]=(e=>{e.type=or.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(we).map(n=>we[n]).filter(n=>typeof n=="number"&&n!==we.NONE);for(const n of t){const r=ef.getVisitFnByTypeId(n),i=oh.getVisitFnByTypeId(n),s=E5.getVisitFnByTypeId(n),o=G0.getVisitFnByTypeId(n);cPe[n]={get:r,set:i,indexOf:s,byteLength:o},fPe[n]=Object.create(e,{isValid:{value:W2(dne)},get:{value:W2(ef.getVisitFnByTypeId(n))},set:{value:iPe(oh.getVisitFnByTypeId(n))},indexOf:{value:sPe(E5.getVisitFnByTypeId(n))},getByteLength:{value:W2(G0.getVisitFnByTypeId(n))}})}return"Vector"})(hi.prototype);class T5 extends hi{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new T5(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new hi(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function TNt(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${SNt(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function SNt(e){return typeof e!="bigint"?rE(e):`${rE(e)}n`}const tH=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,CNt=(e,t=0)=>e.length>=t?e.subarray(0,t):y5(new e.constructor(t),e,0);class V9{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?tH(r*1,this.BYTES_PER_ELEMENT):tH(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=tH(t*this.stride,this.BYTES_PER_ELEMENT);const n=CNt(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=y5(new this.ArrayType(t),this.buffer)}}V9.prototype.offset=0;class C3 extends V9{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class dPe extends C3{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class hPe extends C3{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let lf=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=Gm(t),this._nulls=new dPe,n&&n.length>0&&(this._isValid=TNt(n))}toVector(){return new hi([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),Xu({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};lf.prototype.length=1;lf.prototype.stride=1;lf.prototype.children=null;lf.prototype.finished=!1;lf.prototype.nullValues=null;lf.prototype._isValid=()=>!0;class C1 extends lf{constructor(t){super(t),this._values=new C3(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class H9 extends lf{constructor(t){super(t),this._pendingLength=0,this._offsets=new hPe}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof U9?n[yp].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class TY{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}const nH=2,n0=4,vy=4,Ki=4,Ov=new Int32Array(2),T0e=new Float32Array(Ov.buffer),S0e=new Float64Array(Ov.buffer),v6=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var SY;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(SY||(SY={}));let S5=class pPe{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new pPe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Ov[0]=this.readInt32(t),T0e[0]}readFloat64(t){return Ov[v6?0:1]=this.readInt32(t),Ov[v6?1:0]=this.readInt32(t+4),S0e[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){T0e[0]=n,this.writeInt32(t,Ov[0])}writeFloat64(t,n){S0e[0]=n,this.writeInt32(t,Ov[v6?0:1]),this.writeInt32(t+4,Ov[v6?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+n0+vy)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<vy;n++)t+=String.fromCharCode(this.readInt8(this.position_+n0+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=n0;const i=this.bytes_.subarray(t,t+r);return n===SY.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+n0}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=vy)throw new Error("FlatBuffers: file identifier must be length "+vy);for(let n=0;n<vy;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+n0+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},mPe=class gPe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=S5.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=gPe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=S5.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(n0,0),this.writeInt32(this.offset()-t+n0)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*nH;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=nH;l<s;l+=nH)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?Ki:0;if(n){const s=n;if(this.prep(this.minalign,n0+vy+i),s.length!=vy)throw new TypeError("FlatBuffers: file identifier must be length "+vy);for(let o=vy-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,n0+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(n0,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};class ra{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new ra).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+Ki),(n||new ra).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return ra.startKeyValue(t),ra.addKey(t,n),ra.addValue(t,r),ra.endKeyValue(t)}}var LC;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(LC||(LC={}));var $C;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})($C||($C={}));var C5;(function(e){e[e.DenseArray=0]="DenseArray"})(C5||(C5={}));class Vf{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new Vf).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+Ki),(n||new Vf).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return Vf.startInt(t),Vf.addBitWidth(t,n),Vf.addIsSigned(t,r),Vf.endInt(t)}}class by{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new by).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+Ki),(n||new by).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Vf).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):C5.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,C5.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class _w{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new _w).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+Ki),(n||new _w).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return _w.startBinary(t),_w.endBinary(t)}}class ww{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new ww).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+Ki),(n||new ww).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return ww.startBool(t),ww.endBool(t)}}var A5;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(A5||(A5={}));let t$=class o2{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new o2).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+Ki),(n||new o2).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):A5.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,A5.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return o2.startDate(t),o2.addUnit(t,n),o2.endDate(t)}};class Lc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new Lc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+Ki),(n||new Lc).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return Lc.startDecimal(t),Lc.addPrecision(t,n),Lc.addScale(t,r),Lc.addBitWidth(t,i),Lc.endDecimal(t)}}var zb;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(zb||(zb={}));class r0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new r0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+Ki),(n||new r0).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):zb.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,zb.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return r0.startDuration(t),r0.addUnit(t,n),r0.endDuration(t)}}class i0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new i0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+Ki),(n||new i0).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return i0.startFixedSizeBinary(t),i0.addByteWidth(t,n),i0.endFixedSizeBinary(t)}}class s0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new s0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+Ki),(n||new s0).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return s0.startFixedSizeList(t),s0.addListSize(t,n),s0.endFixedSizeList(t)}}var I5;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(I5||(I5={}));class o0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new o0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+Ki),(n||new o0).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):I5.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,I5.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return o0.startFloatingPoint(t),o0.addPrecision(t,n),o0.endFloatingPoint(t)}}var k5;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(k5||(k5={}));class a0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new a0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+Ki),(n||new a0).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):k5.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,k5.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return a0.startInterval(t),a0.addUnit(t,n),a0.endInterval(t)}}class Ew{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new Ew).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+Ki),(n||new Ew).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return Ew.startList(t),Ew.endList(t)}}let n$=class a2{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new a2).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+Ki),(n||new a2).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return a2.startMap(t),a2.addKeysSorted(t,n),a2.endMap(t)}};class Tw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new Tw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+Ki),(n||new Tw).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return Tw.startNull(t),Tw.endNull(t)}}class Sw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new Sw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+Ki),(n||new Sw).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return Sw.startStruct_(t),Sw.endStruct_(t)}}let nN=class X_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new X_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+Ki),(n||new X_).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):zb.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,zb.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return X_.startTime(t),X_.addUnit(t,n),X_.addBitWidth(t,r),X_.endTime(t)}};class Gd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new Gd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+Ki),(n||new Gd).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):zb.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,zb.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return Gd.startTimestamp(t),Gd.addUnit(t,n),Gd.addTimezone(t,r),Gd.endTimestamp(t)}}var R5;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(R5||(R5={}));let Q_=class J_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new J_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+Ki),(n||new J_).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):R5.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,R5.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return J_.startUnion(t),J_.addMode(t,n),J_.addTypeIds(t,r),J_.endUnion(t)}};class Cw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new Cw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+Ki),(n||new Cw).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return Cw.startUtf8(t),Cw.endUtf8(t)}}var ks;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(ks||(ks={}));let zd=class r${constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new r$).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+Ki),(n||new r$).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):ks.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new by).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new r$).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new ra).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,ks.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},Hm=class iy{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new iy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+Ki),(n||new iy).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):$C.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new zd).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new ra).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,$C.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return iy.startSchema(t),iy.addEndianness(t,n),iy.addFields(t,r),iy.addCustomMetadata(t,i),iy.addFeatures(t,s),iy.endSchema(t)}};class Bf{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new Bf).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+Ki),(n||new Bf).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):LC.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Hm).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new TY).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new TY).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new ra).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,LC.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class Ii{constructor(t=[],n,r,i=Bl.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=AY(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new Ii(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new Ii(n,this.metadata)}assign(...t){const n=t[0]instanceof Ii?t[0]:Array.isArray(t[0])?new Ii(t[0]):new Ii(t),r=[...this.fields],i=b6(b6(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:b6(b6(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=AY(s,new Map);return new Ii([...r,...s],i,new Map([...this.dictionaries,...o]))}}Ii.prototype.fields=null;Ii.prototype.metadata=null;Ii.prototype.dictionaries=null;let qi=class CY{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new CY(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],CY.new(n,r,i,s)}};qi.prototype.type=null;qi.prototype.name=null;qi.prototype.nullable=null;qi.prototype.metadata=null;function b6(e,t){return new Map([...e||new Map,...t||new Map])}function AY(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(or.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&AY(s.children,t)}return t}var ANt=mPe,INt=S5;class IY{static decode(t){t=new INt(Oi(t));const n=Bf.getRootAsFooter(t),r=Ii.decode(n.schema(),new Map,n.version());return new kNt(r,n)}static encode(t){const n=new ANt,r=Ii.encode(n,t.schema);Bf.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())Vb.encode(n,o);const i=n.endVector();Bf.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())Vb.encode(n,o);const s=n.endVector();return Bf.startFooter(n),Bf.addSchema(n,r),Bf.addVersion(n,Bl.V5),Bf.addRecordBatches(n,i),Bf.addDictionaries(n,s),Bf.finishFooterBuffer(n,Bf.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=Bl.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class kNt extends IY{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return Vb.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return Vb.decode(n)}return null}}class Vb{static decode(t){return new Vb(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return TY.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=jp(r),this.bodyLength=jp(n)}}const x6=Object.freeze({done:!0,value:void 0});class yPe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class RNt extends yPe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return hy(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(x6);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return v0e.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return v0e.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return hy(this,void 0,void 0,function*(){return yield this.abort(t),x6})}return(t){return hy(this,void 0,void 0,function*(){return yield this.close(),x6})}read(t){return hy(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return hy(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(x6)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class rH extends RNt{write(t){if((t=Oi(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?_Y(this.toUint8Array(!0)):this.toUint8Array(!1).then(_Y)}toUint8Array(t=!1){return t?H0(this._values)[0]:hy(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var u=!0,l=wN(this),c;c=yield l.next(),n=c.done,!n;u=!0){s=c.value,u=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!u&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}return H0(o,a)[0]})}}class vPe extends H9{constructor(t){super(t),this._values=new V9(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Oi(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class NNt extends lf{constructor(t){super(t),this._values=new dPe}setValue(t,n){this._values.set(t,+n)}}class q9 extends C1{}q9.prototype._setValue=EDe;class bPe extends q9{}bPe.prototype._setValue=Wte;class xPe extends q9{}xPe.prototype._setValue=Gte;class _Pe extends C1{}_Pe.prototype._setValue=CDe;class DNt extends lf{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new Ub(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=N5({type:this.type.indices,nullValues:n}),this.dictionary=N5({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class wPe extends C1{}wPe.prototype._setValue=wDe;class PNt extends lf{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new MC(this.type.listSize,new qi(n,t.type,!0)),r}}class W9 extends C1{setValue(t,n){this._values.set(t,n)}}class ONt extends W9{setValue(t,n){super.setValue(t,bDe(n))}}class MNt extends W9{}class LNt extends W9{}class G9 extends C1{}G9.prototype._setValue=kDe;class EPe extends G9{}EPe.prototype._setValue=nne;class TPe extends G9{}TPe.prototype._setValue=rne;class iI extends C1{}iI.prototype._setValue=RDe;class SPe extends iI{}SPe.prototype._setValue=ine;class CPe extends iI{}CPe.prototype._setValue=sne;class APe extends iI{}APe.prototype._setValue=one;class IPe extends iI{}IPe.prototype._setValue=ane;class A1 extends C1{setValue(t,n){this._values.set(t,n)}}class $Nt extends A1{}class FNt extends A1{}class BNt extends A1{}class jNt extends A1{}class UNt extends A1{}class zNt extends A1{}class VNt extends A1{}class HNt extends A1{}class qNt extends H9{constructor(t){super(t),this._offsets=new hPe}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new OC(new qi(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,u=n.set(i,a).buffer[i];for(let l=-1;++l<a;)r.set(u+l,o[l])}}}class WNt extends H9{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new tP(new qi(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class GNt extends lf{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class YNt extends lf{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new Zu([...this.type.children,new qi(n,t.type,!0)]),r}}class sI extends C1{}sI.prototype._setValue=TDe;class kPe extends sI{}kPe.prototype._setValue=Yte;class RPe extends sI{}RPe.prototype._setValue=Kte;class NPe extends sI{}NPe.prototype._setValue=Xte;class DPe extends sI{}DPe.prototype._setValue=Qte;class oI extends C1{}oI.prototype._setValue=SDe;class PPe extends oI{}PPe.prototype._setValue=Jte;class OPe extends oI{}OPe.prototype._setValue=Zte;class MPe extends oI{}MPe.prototype._setValue=ene;class LPe extends oI{}LPe.prototype._setValue=tne;class pne extends lf{constructor(t){super(t),this._typeIds=new C3(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new qi(n,t.type)];return this.type=new eP(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class KNt extends pne{}class XNt extends pne{constructor(t){super(t),this._offsets=new C3(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class $Pe extends H9{constructor(t){super(t),this._values=new V9(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Nte(n))}_flushPending(t,n){}}$Pe.prototype._flushPending=vPe.prototype._flushPending;class QNt extends vr{visitNull(){return GNt}visitBool(){return NNt}visitInt(){return A1}visitInt8(){return $Nt}visitInt16(){return FNt}visitInt32(){return BNt}visitInt64(){return jNt}visitUint8(){return UNt}visitUint16(){return zNt}visitUint32(){return VNt}visitUint64(){return HNt}visitFloat(){return W9}visitFloat16(){return ONt}visitFloat32(){return MNt}visitFloat64(){return LNt}visitUtf8(){return $Pe}visitBinary(){return vPe}visitFixedSizeBinary(){return wPe}visitDate(){return q9}visitDateDay(){return bPe}visitDateMillisecond(){return xPe}visitTimestamp(){return sI}visitTimestampSecond(){return kPe}visitTimestampMillisecond(){return RPe}visitTimestampMicrosecond(){return NPe}visitTimestampNanosecond(){return DPe}visitTime(){return oI}visitTimeSecond(){return PPe}visitTimeMillisecond(){return OPe}visitTimeMicrosecond(){return MPe}visitTimeNanosecond(){return LPe}visitDecimal(){return _Pe}visitList(){return qNt}visitStruct(){return YNt}visitUnion(){return pne}visitDenseUnion(){return XNt}visitSparseUnion(){return KNt}visitDictionary(){return DNt}visitInterval(){return G9}visitIntervalDayTime(){return EPe}visitIntervalYearMonth(){return TPe}visitDuration(){return iI}visitDurationSecond(){return SPe}visitDurationMillisecond(){return CPe}visitDurationMicrosecond(){return APe}visistDurationNanosecond(){return IPe}visitFixedSizeList(){return PNt}visitMap(){return WNt}}const JNt=new QNt;class $n extends vr{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function tc(e,t){return t instanceof e.constructor}function A3(e,t){return e===t||tc(e,t)}function I1(e,t){return e===t||tc(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function Y9(e,t){return e===t||tc(e,t)&&e.precision===t.precision}function ZNt(e,t){return e===t||tc(e,t)&&e.byteWidth===t.byteWidth}function mne(e,t){return e===t||tc(e,t)&&e.unit===t.unit}function I3(e,t){return e===t||tc(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function k3(e,t){return e===t||tc(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function eDt(e,t){return e===t||tc(e,t)&&e.children.length===t.children.length&&Hb.compareManyFields(e.children,t.children)}function tDt(e,t){return e===t||tc(e,t)&&e.children.length===t.children.length&&Hb.compareManyFields(e.children,t.children)}function gne(e,t){return e===t||tc(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&Hb.compareManyFields(e.children,t.children)}function nDt(e,t){return e===t||tc(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&Hb.visit(e.indices,t.indices)&&Hb.visit(e.dictionary,t.dictionary)}function yne(e,t){return e===t||tc(e,t)&&e.unit===t.unit}function R3(e,t){return e===t||tc(e,t)&&e.unit===t.unit}function rDt(e,t){return e===t||tc(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&Hb.compareManyFields(e.children,t.children)}function iDt(e,t){return e===t||tc(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&Hb.compareManyFields(e.children,t.children)}$n.prototype.visitNull=A3;$n.prototype.visitBool=A3;$n.prototype.visitInt=I1;$n.prototype.visitInt8=I1;$n.prototype.visitInt16=I1;$n.prototype.visitInt32=I1;$n.prototype.visitInt64=I1;$n.prototype.visitUint8=I1;$n.prototype.visitUint16=I1;$n.prototype.visitUint32=I1;$n.prototype.visitUint64=I1;$n.prototype.visitFloat=Y9;$n.prototype.visitFloat16=Y9;$n.prototype.visitFloat32=Y9;$n.prototype.visitFloat64=Y9;$n.prototype.visitUtf8=A3;$n.prototype.visitBinary=A3;$n.prototype.visitFixedSizeBinary=ZNt;$n.prototype.visitDate=mne;$n.prototype.visitDateDay=mne;$n.prototype.visitDateMillisecond=mne;$n.prototype.visitTimestamp=I3;$n.prototype.visitTimestampSecond=I3;$n.prototype.visitTimestampMillisecond=I3;$n.prototype.visitTimestampMicrosecond=I3;$n.prototype.visitTimestampNanosecond=I3;$n.prototype.visitTime=k3;$n.prototype.visitTimeSecond=k3;$n.prototype.visitTimeMillisecond=k3;$n.prototype.visitTimeMicrosecond=k3;$n.prototype.visitTimeNanosecond=k3;$n.prototype.visitDecimal=A3;$n.prototype.visitList=eDt;$n.prototype.visitStruct=tDt;$n.prototype.visitUnion=gne;$n.prototype.visitDenseUnion=gne;$n.prototype.visitSparseUnion=gne;$n.prototype.visitDictionary=nDt;$n.prototype.visitInterval=yne;$n.prototype.visitIntervalDayTime=yne;$n.prototype.visitIntervalYearMonth=yne;$n.prototype.visitDuration=R3;$n.prototype.visitDurationSecond=R3;$n.prototype.visitDurationMillisecond=R3;$n.prototype.visitDurationMicrosecond=R3;$n.prototype.visitDurationNanosecond=R3;$n.prototype.visitFixedSizeList=rDt;$n.prototype.visitMap=iDt;const Hb=new $n;function kY(e,t){return Hb.compareSchemas(e,t)}function N5(e){const t=e.type,n=new(JNt.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(N5(Object.assign(Object.assign({},l),{type:u})))}}return n}function iH(e,t){return sDt(e,t.map(n=>n.data.concat()))}function sDt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=oDt(n,o,c,t,i),o>0&&(r[s++]=Xu({type:new Zu(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new Hf(e,f))]}function oDt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:Xu({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var FPe;class jc{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new Ii([]),this._offsets=[0],this;let i,s;t[0]instanceof Ii&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof Hf)return[u];if(u instanceof jc)return u.batches;if(u instanceof Pi){if(u.type instanceof Zu)return[new Hf(new Ii(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new hi([u[h]])),f=new Ii(l.map((h,p)=>new qi(String(h),c[p].type))),[,d]=iH(f,c);return d.length===0?[new Hf(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new Ii([]),!(i instanceof Ii))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof Hf))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!kY(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??nPe(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=tPe(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?hne.visit(new hi(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new jc(n,r.map(i=>new Hf(n,i)))}slice(t,n){const r=this.schema;[t,n]=JDe({length:this.numRows},t,n);const i=rPe(this.data,this._offsets,t,n);return new jc(r,i.map(s=>new Hf(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=Xu({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new hi(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new hi([Xu({type:new u1,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=iH(r,a)}return new jc(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new jc(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new jc(...iH(s,o))}}FPe=Symbol.toStringTag;jc[FPe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=W2(dne),e.get=W2(ef.getVisitFn(we.Struct)),e.set=iPe(oh.getVisitFn(we.Struct)),e.indexOf=sPe(E5.getVisitFn(we.Struct)),e.getByteLength=W2(G0.getVisitFn(we.Struct)),"Table"))(jc.prototype);var BPe;let Hf=class rN{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof Ii))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Xu({nullCount:0,type:new Zu(this.schema.fields),children:this.schema.fields.map(n=>Xu({type:n.type,nullCount:0}))})]=t,!(this.data instanceof Pi))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=C0e(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=qi.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new Ii(r),a=Xu({type:new Zu(r),length:s,children:i,nullCount:0});[this.schema,this.data]=C0e(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=jPe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return ef.visit(this.data,t)}set(t,n){return oh.visit(this.data,t,n)}indexOf(t,n){return E5.visit(this.data,t,n)}getByteLength(t){return G0.visit(this.data,t)}[Symbol.iterator](){return hne.visit(new hi([this.data]))}toArray(){return[...this]}concat(...t){return new jc(this.schema,[this,...t])}slice(t,n){const[r]=new hi([this.data]).slice(t,n).data;return new rN(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new hi([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new hi([Xu({type:new u1,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new Ii(s,new Map(this.schema.metadata)),i=Xu({type:new Zu(s),children:o})}return new rN(r,i)}select(t){const n=this.schema.select(t),r=new Zu(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new rN(n,Xu({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=Xu({type:new Zu(n.fields),length:this.numRows,children:r});return new rN(n,i)}};BPe=Symbol.toStringTag;Hf[BPe]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Hf.prototype);function C0e(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:Xu({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),Xu({type:new Zu(i),length:n,children:s})]}function jPe(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],u=t[s];for(const l of[u,...((i=u==null?void 0:u.dictionary)===null||i===void 0?void 0:i.data)||[]])jPe(a.children,l==null?void 0:l.children,n);if(or.isDictionary(a)){const{id:l}=a;if(!n.has(l))u!=null&&u.dictionary&&n.set(l,u.dictionary);else if(n.get(l)!==u.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class aDt extends Hf{constructor(t){const n=t.fields.map(i=>Xu({type:i.type})),r=Xu({type:new Zu(t.fields),nullCount:0,children:n});super(t,r)}}var D5;(function(e){e[e.BUFFER=0]="BUFFER"})(D5||(D5={}));var P5;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(P5||(P5={}));class Mv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Mv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+Ki),(n||new Mv).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):P5.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):D5.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,P5.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,D5.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return Mv.startBodyCompression(t),Mv.addCodec(t,n),Mv.addMethod(t,r),Mv.endBodyCompression(t)}}let UPe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},zPe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},oy=class RY{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new RY).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+Ki),(n||new RY).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new zPe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new UPe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Mv).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},u2=class NY{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new NY).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+Ki),(n||new NY).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new oy).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var O5;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(O5||(O5={}));let Ev=class $m{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new $m).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+Ki),(n||new $m).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):LC.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):O5.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new ra).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,LC.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,O5.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return $m.startMessage(t),$m.addVersion(t,n),$m.addHeaderType(t,r),$m.addHeader(t,i),$m.addBodyLength(t,s),$m.addCustomMetadata(t,o),$m.endMessage(t)}};class uDt extends vr{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return Tw.startNull(n),Tw.endNull(n)}visitInt(t,n){return Vf.startInt(n),Vf.addBitWidth(n,t.bitWidth),Vf.addIsSigned(n,t.isSigned),Vf.endInt(n)}visitFloat(t,n){return o0.startFloatingPoint(n),o0.addPrecision(n,t.precision),o0.endFloatingPoint(n)}visitBinary(t,n){return _w.startBinary(n),_w.endBinary(n)}visitBool(t,n){return ww.startBool(n),ww.endBool(n)}visitUtf8(t,n){return Cw.startUtf8(n),Cw.endUtf8(n)}visitDecimal(t,n){return Lc.startDecimal(n),Lc.addScale(n,t.scale),Lc.addPrecision(n,t.precision),Lc.addBitWidth(n,t.bitWidth),Lc.endDecimal(n)}visitDate(t,n){return t$.startDate(n),t$.addUnit(n,t.unit),t$.endDate(n)}visitTime(t,n){return nN.startTime(n),nN.addUnit(n,t.unit),nN.addBitWidth(n,t.bitWidth),nN.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return Gd.startTimestamp(n),Gd.addUnit(n,t.unit),r!==void 0&&Gd.addTimezone(n,r),Gd.endTimestamp(n)}visitInterval(t,n){return a0.startInterval(n),a0.addUnit(n,t.unit),a0.endInterval(n)}visitDuration(t,n){return r0.startDuration(n),r0.addUnit(n,t.unit),r0.endDuration(n)}visitList(t,n){return Ew.startList(n),Ew.endList(n)}visitStruct(t,n){return Sw.startStruct_(n),Sw.endStruct_(n)}visitUnion(t,n){Q_.startTypeIdsVector(n,t.typeIds.length);const r=Q_.createTypeIdsVector(n,t.typeIds);return Q_.startUnion(n),Q_.addMode(n,t.mode),Q_.addTypeIds(n,r),Q_.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return by.startDictionaryEncoding(n),by.addId(n,BigInt(t.id)),by.addIsOrdered(n,t.isOrdered),r!==void 0&&by.addIndexType(n,r),by.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return i0.startFixedSizeBinary(n),i0.addByteWidth(n,t.byteWidth),i0.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return s0.startFixedSizeList(n),s0.addListSize(n,t.listSize),s0.endFixedSizeList(n)}visitMap(t,n){return n$.startMap(n),n$.addKeysSorted(n,t.keysSorted),n$.endMap(n)}}const sH=new uDt;function lDt(e,t=new Map){return new Ii(fDt(e,t),i$(e.metadata),t)}function VPe(e){return new fd(e.count,HPe(e.columns),qPe(e.columns))}function cDt(e){return new Y0(VPe(e.data),e.id,e.isDelta)}function fDt(e,t){return(e.fields||[]).filter(Boolean).map(n=>qi.fromJSON(n,t))}function A0e(e,t){return(e.children||[]).filter(Boolean).map(n=>qi.fromJSON(n,t))}function HPe(e){return(e||[]).reduce((t,n)=>[...t,new qb(n.count,dDt(n.VALIDITY)),...HPe(n.children)],[])}function qPe(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new p0(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new p0(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new p0(t.length,i.OFFSET.length)),i.DATA&&t.push(new p0(t.length,i.DATA.length)),t=qPe(i.children,t)}return t}function dDt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function hDt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=k0e(e,A0e(e,t)),i=new qi(e.name,o,e.nullable,i$(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?I0e(r):new Bb,a=new Ub(t.get(n),r,n,s.isOrdered),i=new qi(e.name,a,e.nullable,i$(e.metadata))):(r=(r=s.indexType)?I0e(r):new Bb,t.set(n,o=k0e(e,A0e(e,t))),a=new Ub(o,r,n,s.isOrdered),i=new qi(e.name,a,e.nullable,i$(e.metadata))),i||null}function i$(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function I0e(e){return new Jl(e.isSigned,e.bitWidth)}function k0e(e,t){const n=e.type.name;switch(n){case"NONE":return new u1;case"null":return new u1;case"binary":return new JD;case"utf8":return new NC;case"bool":return new ZD;case"list":return new OC((t||[])[0]);case"struct":return new Zu(t||[]);case"struct_":return new Zu(t||[])}switch(n){case"int":{const r=e.type;return new Jl(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new jb(bu[r.precision])}case"decimal":{const r=e.type;return new v5(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new DC(q0[r.unit])}case"time":{const r=e.type;return new l1(Pn[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new b5(Pn[r.unit],r.timezone)}case"interval":{const r=e.type;return new PC(W0[r.unit])}case"duration":{const r=e.type;return new x5(Pn[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new eP(Zc[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new _5(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new MC(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new tP((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var pDt=mPe,mDt=S5;class u0{static fromJSON(t,n){const r=new u0(0,Bl.V5,n);return r._createHeader=gDt(t,n),r}static decode(t){t=new mDt(Oi(t));const n=Ev.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new u0(r,i,s);return o._createHeader=yDt(n,s),o}static encode(t){const n=new pDt;let r=-1;return t.isSchema()?r=Ii.encode(n,t.header()):t.isRecordBatch()?r=fd.encode(n,t.header()):t.isDictionaryBatch()&&(r=Y0.encode(n,t.header())),Ev.startMessage(n),Ev.addVersion(n,Bl.V5),Ev.addHeader(n,r),Ev.addHeaderType(n,t.headerType),Ev.addBodyLength(n,BigInt(t.bodyLength)),Ev.finishMessageBuffer(n,Ev.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof Ii)return new u0(0,Bl.V5,Na.Schema,t);if(t instanceof fd)return new u0(n,Bl.V5,Na.RecordBatch,t);if(t instanceof Y0)return new u0(n,Bl.V5,Na.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Na.Schema}isRecordBatch(){return this.headerType===Na.RecordBatch}isDictionaryBatch(){return this.headerType===Na.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=jp(t)}}class fd{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=jp(t)}}class Y0{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=jp(n)}}class p0{constructor(t,n){this.offset=jp(t),this.length=jp(n)}}class qb{constructor(t,n){this.length=jp(t),this.nullCount=jp(n)}}function gDt(e,t){return()=>{switch(t){case Na.Schema:return Ii.fromJSON(e);case Na.RecordBatch:return fd.fromJSON(e);case Na.DictionaryBatch:return Y0.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Na[t]}, type: ${t} }`)}}function yDt(e,t){return()=>{switch(t){case Na.Schema:return Ii.decode(e.header(new Hm),new Map,e.version());case Na.RecordBatch:return fd.decode(e.header(new oy),e.version());case Na.DictionaryBatch:return Y0.decode(e.header(new u2),e.version())}throw new Error(`Unrecognized Message type: { name: ${Na[t]}, type: ${t} }`)}}qi.encode=IDt;qi.decode=CDt;qi.fromJSON=hDt;Ii.encode=ADt;Ii.decode=vDt;Ii.fromJSON=lDt;fd.encode=kDt;fd.decode=bDt;fd.fromJSON=VPe;Y0.encode=RDt;Y0.decode=xDt;Y0.fromJSON=cDt;qb.encode=NDt;qb.decode=wDt;p0.encode=DDt;p0.decode=_Dt;function vDt(e,t=new Map,n=Bl.V5){const r=SDt(e,t);return new Ii(r,s$(e),t,n)}function bDt(e,t=Bl.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new fd(e.length(),EDt(e),TDt(e,t))}function xDt(e,t=Bl.V5){return new Y0(fd.decode(e.data(),t),e.id(),e.isDelta())}function _Dt(e){return new p0(e.offset(),e.length())}function wDt(e){return new qb(e.length(),e.nullCount())}function EDt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=qb.decode(n));return t}function TDt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<Bl.V4&&(r.bb_pos+=8*(i+1)),n[++s]=p0.decode(r));return n}function SDt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=qi.decode(r,t));return n}function R0e(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=qi.decode(r,t));return n}function CDt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=D0e(e,R0e(e,t)),r=new qi(e.name(),i,e.nullable(),s$(e))):t.has(n=jp(a.id()))?(s=(s=a.indexType())?N0e(s):new Bb,o=new Ub(t.get(n),s,n,a.isOrdered()),r=new qi(e.name(),o,e.nullable(),s$(e))):(s=(s=a.indexType())?N0e(s):new Bb,t.set(n,i=D0e(e,R0e(e,t))),o=new Ub(i,s,n,a.isOrdered()),r=new qi(e.name(),o,e.nullable(),s$(e))),r||null}function s$(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function N0e(e){return new Jl(e.isSigned(),e.bitWidth())}function D0e(e,t){const n=e.typeType();switch(n){case ks.NONE:return new u1;case ks.Null:return new u1;case ks.Binary:return new JD;case ks.Utf8:return new NC;case ks.Bool:return new ZD;case ks.List:return new OC((t||[])[0]);case ks.Struct_:return new Zu(t||[])}switch(n){case ks.Int:{const r=e.type(new Vf);return new Jl(r.isSigned(),r.bitWidth())}case ks.FloatingPoint:{const r=e.type(new o0);return new jb(r.precision())}case ks.Decimal:{const r=e.type(new Lc);return new v5(r.scale(),r.precision(),r.bitWidth())}case ks.Date:{const r=e.type(new t$);return new DC(r.unit())}case ks.Time:{const r=e.type(new nN);return new l1(r.unit(),r.bitWidth())}case ks.Timestamp:{const r=e.type(new Gd);return new b5(r.unit(),r.timezone())}case ks.Interval:{const r=e.type(new a0);return new PC(r.unit())}case ks.Duration:{const r=e.type(new r0);return new x5(r.unit())}case ks.Union:{const r=e.type(new Q_);return new eP(r.mode(),r.typeIdsArray()||[],t||[])}case ks.FixedSizeBinary:{const r=e.type(new i0);return new _5(r.byteWidth())}case ks.FixedSizeList:{const r=e.type(new s0);return new MC(r.listSize(),(t||[])[0])}case ks.Map:{const r=e.type(new n$);return new tP((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${ks[n]}" (${n})`)}function ADt(e,t){const n=t.fields.map(s=>qi.encode(e,s));Hm.startFieldsVector(e,n.length);const r=Hm.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?Hm.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return ra.startKeyValue(e),ra.addKey(e,a),ra.addValue(e,u),ra.endKeyValue(e)})):-1;return Hm.startSchema(e),Hm.addFields(e,r),Hm.addEndianness(e,PDt?$C.Little:$C.Big),i!==-1&&Hm.addCustomMetadata(e,i),Hm.endSchema(e)}function IDt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;or.isDictionary(s)?(o=s.dictionary.typeId,i=sH.visit(s,e),r=sH.visit(s.dictionary,e)):r=sH.visit(s,e);const a=(s.children||[]).map(c=>qi.encode(e,c)),u=zd.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?zd.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return ra.startKeyValue(e),ra.addKey(e,d),ra.addValue(e,h),ra.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),zd.startField(e),zd.addType(e,r),zd.addTypeType(e,o),zd.addChildren(e,u),zd.addNullable(e,!!t.nullable),n!==-1&&zd.addName(e,n),i!==-1&&zd.addDictionary(e,i),l!==-1&&zd.addCustomMetadata(e,l),zd.endField(e)}function kDt(e,t){const n=t.nodes||[],r=t.buffers||[];oy.startNodesVector(e,n.length);for(const o of n.slice().reverse())qb.encode(e,o);const i=e.endVector();oy.startBuffersVector(e,r.length);for(const o of r.slice().reverse())p0.encode(e,o);const s=e.endVector();return oy.startRecordBatch(e),oy.addLength(e,BigInt(t.length)),oy.addNodes(e,i),oy.addBuffers(e,s),oy.endRecordBatch(e)}function RDt(e,t){const n=fd.encode(e,t.data);return u2.startDictionaryBatch(e),u2.addId(e,BigInt(t.id)),u2.addIsDelta(e,t.isDelta),u2.addData(e,n),u2.endDictionaryBatch(e)}function NDt(e,t){return zPe.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function DDt(e,t){return UPe.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const PDt=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),DY="ARROW1",vne=new Uint8Array(DY.length);for(let e=0;e<DY.length;e+=1)vne[e]=DY.codePointAt(e);vne.length;class Ao extends vr{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof Hf?s.data.children:s.data),r=new Ao;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof hi)return this.visitMany(t.data),this;const{type:n}=t;if(!or.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(or.isUnion(n))this.nodes.push(new qb(r,0));else{const{nullCount:i}=t;or.isNull(n)||Np.call(this,i<=0?new Uint8Array(0):w5(t.offset,r,t.nullBitmap)),this.nodes.push(new qb(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Np(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new p0(this._byteLength,t)),this._byteLength+=t,this}function ODt(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(Np.call(this,i),n.mode===Zc.Sparse)return PY.call(this,e);if(n.mode===Zc.Dense){if(e.offset<=0)return Np.call(this,s),PY.call(this,e);{const o=new Int32Array(r),a=Object.create(null),u=Object.create(null);for(let l,c,f=-1;++f<r;)(l=i[f])!==void 0&&((c=a[l])===void 0&&(c=a[l]=s[f]),o[f]=s[f]-c,u[l]=((t=u[l])!==null&&t!==void 0?t:0)+1);Np.call(this,o),this.visitMany(e.children.map((l,c)=>{const f=n.typeIds[c],d=a[f],h=u[f];return l.slice(d,Math.min(r,h))}))}}return this}function MDt(e){let t;return e.nullCount>=e.length?Np.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?Np.call(this,w5(e.offset,e.length,t)):Np.call(this,ePe(e.values))}function k1(e){return Np.call(this,e.values.subarray(0,e.length*e.stride))}function WPe(e){const{length:t,values:n,valueOffsets:r}=e,{[0]:i,[t]:s}=r,o=Math.min(s-i,n.byteLength-i);return Np.call(this,YNe(-i,t+1,r)),Np.call(this,n.subarray(i,i+o)),this}function bne(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return Np.call(this,YNe(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function PY(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}Ao.prototype.visitBool=MDt;Ao.prototype.visitInt=k1;Ao.prototype.visitFloat=k1;Ao.prototype.visitUtf8=WPe;Ao.prototype.visitBinary=WPe;Ao.prototype.visitFixedSizeBinary=k1;Ao.prototype.visitDate=k1;Ao.prototype.visitTimestamp=k1;Ao.prototype.visitTime=k1;Ao.prototype.visitDecimal=k1;Ao.prototype.visitList=bne;Ao.prototype.visitStruct=PY;Ao.prototype.visitUnion=ODt;Ao.prototype.visitInterval=k1;Ao.prototype.visitDuration=k1;Ao.prototype.visitFixedSizeList=bne;Ao.prototype.visitMap=bne;class GPe extends yPe{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new rH,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Tx(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return B9(t)?t.then(n=>this.writeAll(n)):j9(t)?Ene(this,t):wne(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof rH?this._sink=t:(this._sink=new rH,t&&Ukt(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&zkt(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!kY(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof jc&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof Hf&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!kY(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof Hf?t instanceof aDt||this._writeRecordBatch(t):t instanceof jc?this.writeAll(t.batches):Dte(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=u0.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===Na.RecordBatch?this._recordBatchBlocks.push(new Vb(a,t.bodyLength,this._position)):t.headerType===Na.DictionaryBatch&&this._dictionaryBlocks.push(new Vb(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=Oi(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(u0.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(vne)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=Ao.assemble(t),o=new fd(t.numRows,r,i),a=u0.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=Ao.assemble(new hi([t])),u=new fd(t.length,s,o),l=new Y0(u,n,r),c=u0.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class xne extends GPe{static writeAll(t,n){const r=new xne(n);return B9(t)?t.then(i=>r.writeAll(i)):j9(t)?Ene(r,t):wne(r,t)}}class _ne extends GPe{static writeAll(t){const n=new _ne;return B9(t)?t.then(r=>n.writeAll(r)):j9(t)?Ene(n,t):wne(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=IY.encode(new IY(t,Bl.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function wne(e,t){let n=t;t instanceof jc&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function Ene(e,t){var n,r,i,s,o,a,u;return hy(this,void 0,void 0,function*(){try{for(n=!0,r=wN(t);i=yield r.next(),s=i.done,!s;n=!0){u=i.value,n=!1;const l=u;e.write(l)}}catch(l){o={error:l}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function LDt(e,t="stream"){return(t==="stream"?xne:_ne).writeAll(e).toUint8Array(!0)}function Tne(e,t=1){return(e*t+63&-64||64)/t}function Wb(e,t,n=e.BYTES_PER_ELEMENT){return new e(Tne(t,n))}function Sne(e){return e instanceof Pi?e:new Pi(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function $Dt(e){return new hi([Sne(e)])}const Cne=new TextEncoder;function FDt(e,t,n){const r=Cne.encode(n);return e.set(r,t),r.length}function BDt(e,t,n){return Cne.encodeInto(n,e.subarray(t)).written}const jDt=Cne.encodeInto?BDt:FDt;function P0e(e,t){const n=Wb(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function UDt(e,t){const n=Wb(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function zDt(e,t){const n=Wb(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function VDt(e,t){const n=Wb(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function HDt(e){const t=N5({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function qDt(e,t,n){const r=Wb(Int32Array,t+1),i=Wb(Uint8Array,3*n);let s=0;return{set(o,a){s+=jDt(i,s,o),r[a+1]=s},data:()=>{const o=Tne(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function WDt(e,t){const n=[],r=Wb(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:GDt(e.dictionary,n,o)})}}function GDt(e,t,n){const r=qDt(e,t.length,n);return t.forEach(r.set),$Dt(r.data())}function YDt(e,t){const n=Wb(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function KDt(e,t,n=!0){let r;switch(e.typeId){case we.Int:r=e.bitWidth<64?P0e:null;break;case we.Float:r=e.precision>0?P0e:null;break;case we.Dictionary:r=e.dictionary.typeId===we.Utf8&&e.indices.typeId===we.Int&&e.indices.bitWidth<64?WDt:null;break;case we.Bool:r=UDt;break;case we.Date:r=e.unit?VDt:zDt;break}return r==null?HDt(e):n?YDt(r(e,t),t):r(e,t)}function XDt(e,t){const n=e.length,r=Tne(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),Sne({type:t,length:n,buffers:[null,i]})}function YPe(e,t,n,r,i=!0){const s=KDt(r,e,i);return t(n,s.set),Sne(s.data())}function Ane(e){if(e instanceof or||e==null)return e;switch(e){case we.Binary:return new JD;case we.Bool:return new ZD;case we.DateDay:return new rRt;case we.DateMillisecond:case we.Date:return new iRt;case we.Dictionary:return new Ub(new NC,new Bb);case we.Float16:return new gDe;case we.Float32:return new zte;case we.Float64:case we.Float:return new Vte;case we.Int8:return new Mte;case we.Int16:return new Lte;case we.Int32:case we.Int:return new Bb;case we.Int64:return new $te;case we.IntervalDayTime:return new lRt;case we.Interval:case we.IntervalYearMonth:return new cRt;case we.Null:return new u1;case we.TimeMicrosecond:return new aRt;case we.TimeMillisecond:case we.Time:return new oRt;case we.TimeNanosecond:return new uRt;case we.TimeSecond:return new sRt;case we.Uint8:return new Fte;case we.Uint16:return new Bte;case we.Uint32:return new jte;case we.Uint64:return new Ute;case we.Utf8:return new NC;default:gr(`Unsupported type code: ${V0(e)}. Use a data type constructor instead?`)}}function QDt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function KPe(e,t){const n=OY();return e(t,n.add),n}function OY(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(a1(t))++e.dates,QDt(t)&&++e.utcdays;else if(xw(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=OY());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=OY())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return Ane(JDt(e))}};return e}function JDt(e){const t=e.count-e.nulls;if(t===0)return we.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?we.Float64:n<128?we.Int8:n<32768?we.Int16:we.Int32:n>=2**32?we.Float64:n<256?we.Uint8:n<65536?we.Uint16:we.Uint32}else{if(e.nums===t)return we.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?we.Int64:gr(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?we.Uint64:gr(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return we.Bool;if(e.utcdays===t)return we.DateDay;if(e.dates===t)return we.DateMillisecond;if(e.arrays===t){const n=qi.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new MC(e.minlen,n):new OC(n)}else if(e.structs===t){const n=e.struct_prof;return new Zu(Object.keys(n).map(r=>qi.new(r,n[r].type(),!0)))}else{if(e.strings>0)return we.Dictionary;gr("Type inference failure")}}}}function ZDt(e,t,n,r,i,s=!0){if(i=Ane(i),!i){const o=KPe(r,t);s=o.nulls>0,i=o.type()}return YPe(n,r,t,i,s)}function ePt(e,t,n,r,i,s=!0){i=Ane(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=tPt(o);if(u&&a&&O0e(u.type,i))return u;const l=o.data;if(T3(l)){const c=nPt(l);if(a&&c&&O0e(c,i))return XDt(l,c);i=i||c,s=!1}if(!i){const c=KPe(r,o);s=c.nulls>0,i=c.type()}return YPe(n,r,o,i,s)}function tPt(e){return e instanceof hi?e:e.vector instanceof hi?e.vector:null}function nPt(e){const n={Float32Array:zte,Float64Array:Vte,Int8Array:Mte,Int16Array:Lte,Int32Array:Bb,Uint8Array:Fte,Uint16Array:Bte,Uint32Array:jte,BigInt64Array:$te,BigUint64Array:Ute}[e.constructor.name];return n?new n:null}function O0e(e,t){return!e||!t?!0:e.compareTo(t)}function rPt(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function iPt(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&xw(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const sPt=()=>gr("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function oPt(){try{return jc}catch{sPt()}}function XPe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=aPt(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&gr("Column length mismatch"),a[l]=c});const u=oPt();return new u(a)}function aPt(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=ws(n)?n(e):di(n)?n:null;if(di(e))return{dataFrom:ZDt,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:rPt(e,r,i)};if(uPt(e))return{dataFrom:ePt,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:iPt(e,r,i)};gr("Unsupported input data type")}function uPt(e){return e&&ws(e.reify)}function lPt(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return LDt(XPe(e,r),n)}function cPt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function fPt(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&a1(u))++i,cPt(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function K9(e,t){return ws(t)?t(e):t||e.columnNames()}function QPe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=fPt(dPt(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function dPt(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function Ine(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function hPt(e,t={}){const n=K9(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":a1(l)?$9(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return Ine(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function JPe(e,t={}){if(ws(t))return t(e)+"";const n=typeof e;if(n==="object"){if(a1(e))return t.utc?$9(e):xNe(e);{const r=JSON.stringify(e,(s,o)=>T3(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function X9(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function pPt(e,t={}){const n=K9(e,t.columns),{align:r,format:i}=QPe(e,n,t),s=mPt(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,y)=>u(JPe(m,y)),c=o?(m,y)=>m==null?o(m):l(m,y):l;let f=-1,d=-1;const h=(m,y,v)=>{const b=v?a(r[y]):"",w=s[m]&&s[m](y,d,f)||"",E=(b?`text-align: ${b};`+(w?" ":""):"")+w;return`<${m}${E?` style="${E}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return Ine(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,y){p+=h("td",y,1)+c(m,i[y])+"</td>"}}),p+"</tr></tbody></table>"}function mPt(e){return X9(e.style,t=>ws(t)?t:()=>t)}function gPt(e,t=!0,n=!1){return e===void 0||e?t:n}const yPt=e=>a1(e)?$9(e,!0):e;function vPt(e,t={}){const n=gPt(t.schema),r=t.format||{},i=K9(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||yPt;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function bPt(e,t={}){const n=K9(e,t.columns),{align:r,format:i}=QPe(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return Ine(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(JPe(u,i[l]))+"|"}}),a+`
`}function ZPe(e,t){for(const[n,r]of F9(t))e.set(n,r);return e}function xPt(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function c1(e,t,n=new Map){return t=Ql(t)?e.columnName(t):t,Cu(t)?n.set(t,t):di(t)?t.forEach(r=>c1(e,r,n)):ws(t)?c1(e,t(e),n):fl(t)?ZPe(n,t):gr(`Invalid column selection: ${V0(t)}`),n}function Q9(e,t){return e.toObject=t,e}function e3e(e){return di(e)?e.map(e3e):e&&e.toObject?e.toObject():e}function FC(){return Q9(e=>e.columnNames(),()=>({all:[]}))}function t3e(...e){return e=e.flat(),Q9(t=>{const n=c1(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:e3e(e)}))}function _Pt(e,t){return Q9(n=>{let r=Ql(e)?e:n.columnIndex(e),i=Ql(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function wPt(e){return Cu(e)&&(e=RegExp(xPt(e))),Q9(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function EPt(e){return T3(e.data)?e.data.constructor:Array}class xy extends jIt{static from(t,n){return new xy(VIt(t,n),n)}static new(t,n){if(t instanceof xy)return t;const r={},i=[];for(const[s,o]of F9(t))r[s]=o,i.push(s);return new xy(r,n||i)}constructor(t,n,r,i,s,o){X9(t,zIt,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new xy(t||this._data,n||(t?null:this._names),o,i!==void 0?i:vkt(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=gd(r).groupby(r.groups());return t.forEach(s=>{s=xy.new(s),s.numRows()!==n&&gr("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):gr(`Unrecognized column: ${t}`)}object(t=0){return M0e(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=c1(this,t.columns||FC()),o=qNe(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),xkt(this,u,a,n)}return a}*[Symbol.iterator](){const t=M0e(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(EPt(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=bkt(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return XPe(this,t)}toArrowBuffer(t){return lPt(this,t)}toCSV(t){return hPt(this,t)}toHTML(t){return pPt(this,t)}toJSON(t){return vPt(this,t)}toMarkdown(t){return bPt(this,t)}}function M0e(e){let t=e._builder;if(!t){const n=qNe(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class TPt{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function ri(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=SPt[e.type];s&&s(e,t,n)}const _6=(e,t,n)=>{ri(e.argument,t,n,e)},oH=(e,t,n)=>{ri(e.left,t,n,e),ri(e.right,t,n,e)},L0e=(e,t,n)=>{ri(e.test,t,n,e),ri(e.consequent,t,n,e),e.alternate&&ri(e.alternate,t,n,e)},aH=(e,t,n)=>{qm(e.params,t,n,e),ri(e.body,t,n,e)},$0e=(e,t,n)=>{ri(e.callee,t,n,e),qm(e.arguments,t,n,e)},qm=(e,t,n,r)=>{e.forEach(i=>ri(i,t,n,r))},SPt={TemplateLiteral:(e,t,n)=>{qm(e.expressions,t,n,e),qm(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{ri(e.object,t,n,e),ri(e.property,t,n,e)},CallExpression:$0e,NewExpression:$0e,ArrayExpression:(e,t,n)=>{qm(e.elements,t,n,e)},AssignmentExpression:oH,AwaitExpression:_6,BinaryExpression:oH,LogicalExpression:oH,UnaryExpression:_6,UpdateExpression:_6,ConditionalExpression:L0e,ObjectExpression:(e,t,n)=>{qm(e.properties,t,n,e)},Property:(e,t,n)=>{ri(e.key,t,n,e),ri(e.value,t,n,e)},ArrowFunctionExpression:aH,FunctionExpression:aH,FunctionDeclaration:aH,VariableDeclaration:(e,t,n)=>{qm(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{ri(e.id,t,n,e),ri(e.init,t,n,e)},SpreadElement:(e,t,n)=>{ri(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{qm(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{ri(e.expression,t,n,e)},IfStatement:L0e,ForStatement:(e,t,n)=>{ri(e.init,t,n,e),ri(e.test,t,n,e),ri(e.update,t,n,e),ri(e.body,t,n,e)},WhileStatement:(e,t,n)=>{ri(e.test,t,n,e),ri(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{ri(e.body,t,n,e),ri(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{ri(e.discriminant,t,n,e),qm(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&ri(e.test,t,n,e),qm(e.consequent,t,n,e)},ReturnStatement:_6,Program:(e,t,n)=>{ri(e.body[0],t,n,e)}};function n3e(e){delete e.start,delete e.end,delete e.optional}function F0e(e){n3e(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function CPt(e){return ri(e,null,{Column:F0e,Constant:F0e,Default:n3e}),e}function sa(e,t){return t&&t.type===e}function APt(e){return sa(Ekt,e)||sa(wkt,e)}function IPt(e){return ws(e)?e:()=>e}const kPt="Escaped functions are not valid as rollup or pivot values.";function RPt(e,t,n){e.aggronly&&gr(kPt);const r="(row,data)=>fn("+HNe(e.table.columnNames())+",$)";return{escape:Rte.escape(r,IPt(t.expr),n)}}var NPt=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],r3e=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],DPt="-----------------------------------------------------------------------------------------------------------------------------------------------------",i3e="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",uH={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},lH="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",PPt={5:lH,"5module":lH+" export import",6:lH+" const class extends export import super"},OPt=/^in(stanceof)?$/,MPt=new RegExp("["+i3e+"]"),LPt=new RegExp("["+i3e+DPt+"]");function MY(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function f1(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&MPt.test(String.fromCharCode(e)):t===!1?!1:MY(e,r3e)}function BC(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&LPt.test(String.fromCharCode(e)):t===!1?!1:MY(e,r3e)||MY(e,NPt)}var ai=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function Fd(e,t){return new ai(e,{beforeExpr:!0,binop:t})}var Bd={beforeExpr:!0},Rc={startsExpr:!0},kne={};function zr(e,t){return t===void 0&&(t={}),t.keyword=e,kne[e]=new ai(e,t)}var le={num:new ai("num",Rc),regexp:new ai("regexp",Rc),string:new ai("string",Rc),name:new ai("name",Rc),privateId:new ai("privateId",Rc),eof:new ai("eof"),bracketL:new ai("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new ai("]"),braceL:new ai("{",{beforeExpr:!0,startsExpr:!0}),braceR:new ai("}"),parenL:new ai("(",{beforeExpr:!0,startsExpr:!0}),parenR:new ai(")"),comma:new ai(",",Bd),semi:new ai(";",Bd),colon:new ai(":",Bd),dot:new ai("."),question:new ai("?",Bd),questionDot:new ai("?."),arrow:new ai("=>",Bd),template:new ai("template"),invalidTemplate:new ai("invalidTemplate"),ellipsis:new ai("...",Bd),backQuote:new ai("`",Rc),dollarBraceL:new ai("${",{beforeExpr:!0,startsExpr:!0}),eq:new ai("=",{beforeExpr:!0,isAssign:!0}),assign:new ai("_=",{beforeExpr:!0,isAssign:!0}),incDec:new ai("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new ai("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Fd("||",1),logicalAND:Fd("&&",2),bitwiseOR:Fd("|",3),bitwiseXOR:Fd("^",4),bitwiseAND:Fd("&",5),equality:Fd("==/!=/===/!==",6),relational:Fd("</>/<=/>=",7),bitShift:Fd("<</>>/>>>",8),plusMin:new ai("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Fd("%",10),star:Fd("*",10),slash:Fd("/",10),starstar:new ai("**",{beforeExpr:!0}),coalesce:Fd("??",1),_break:zr("break"),_case:zr("case",Bd),_catch:zr("catch"),_continue:zr("continue"),_debugger:zr("debugger"),_default:zr("default",Bd),_do:zr("do",{isLoop:!0,beforeExpr:!0}),_else:zr("else",Bd),_finally:zr("finally"),_for:zr("for",{isLoop:!0}),_function:zr("function",Rc),_if:zr("if"),_return:zr("return",Bd),_switch:zr("switch"),_throw:zr("throw",Bd),_try:zr("try"),_var:zr("var"),_const:zr("const"),_while:zr("while",{isLoop:!0}),_with:zr("with"),_new:zr("new",{beforeExpr:!0,startsExpr:!0}),_this:zr("this",Rc),_super:zr("super",Rc),_class:zr("class",Rc),_extends:zr("extends",Bd),_export:zr("export"),_import:zr("import",Rc),_null:zr("null",Rc),_true:zr("true",Rc),_false:zr("false",Rc),_in:zr("in",{beforeExpr:!0,binop:7}),_instanceof:zr("instanceof",{beforeExpr:!0,binop:7}),_typeof:zr("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:zr("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:zr("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Th=/\r\n?|\n|\u2028|\u2029/,$Pt=new RegExp(Th.source,"g");function aI(e){return e===10||e===13||e===8232||e===8233}function s3e(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(aI(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var o3e=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Yd=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,a3e=Object.prototype,FPt=a3e.hasOwnProperty,BPt=a3e.toString,N3=Object.hasOwn||function(e,t){return FPt.call(e,t)},B0e=Array.isArray||function(e){return BPt.call(e)==="[object Array]"},j0e=Object.create(null);function Qv(e){return j0e[e]||(j0e[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function Gb(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var jPt=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,nP=function(t,n){this.line=t,this.column=n};nP.prototype.offset=function(t){return new nP(this.line,this.column+t)};var J9=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function u3e(e,t){for(var n=1,r=0;;){var i=s3e(e,r,t);if(i<0)return new nP(n,t-r);++n,r=i}}var LY={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},U0e=!1;function UPt(e){var t={};for(var n in LY)t[n]=e&&N3(e,n)?e[n]:LY[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!U0e&&typeof console=="object"&&console.warn&&(U0e=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),B0e(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return B0e(t.onComment)&&(t.onComment=zPt(t,t.onComment)),t}function zPt(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new J9(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var rP=1,uI=2,Rne=4,l3e=8,c3e=16,f3e=32,Nne=64,d3e=128,D3=256,Dne=rP|uI|D3;function Pne(e,t){return uI|(e?Rne:0)|(t?l3e:0)}var M5=0,One=1,R1=2,h3e=3,p3e=4,m3e=5,ha=function(t,n,r){this.options=t=UPt(t),this.sourceFile=t.sourceFile,this.keywords=Qv(PPt[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=uH[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=Qv(i);var s=(i?i+" ":"")+uH.strict;this.reservedWordsStrict=Qv(s),this.reservedWordsStrictBind=Qv(s+" "+uH.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Th).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=le.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(rP),this.regexpState=null,this.privateNameStack=[]},ag={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};ha.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};ag.inFunction.get=function(){return(this.currentVarScope().flags&uI)>0};ag.inGenerator.get=function(){return(this.currentVarScope().flags&l3e)>0&&!this.currentVarScope().inClassFieldInit};ag.inAsync.get=function(){return(this.currentVarScope().flags&Rne)>0&&!this.currentVarScope().inClassFieldInit};ag.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&D3)return!1;if(t.flags&uI)return(t.flags&Rne)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};ag.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&Nne)>0||n||this.options.allowSuperOutsideMethod};ag.allowDirectSuper.get=function(){return(this.currentThisScope().flags&d3e)>0};ag.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};ag.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(uI|D3))>0||n};ag.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&D3)>0};ha.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};ha.parse=function(t,n){return new this(n,t).parse()};ha.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};ha.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(ha.prototype,ag);var nc=ha.prototype,VPt=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;nc.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){Yd.lastIndex=e,e+=Yd.exec(this.input)[0].length;var t=VPt.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){Yd.lastIndex=e+t[0].length;var n=Yd.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||Th.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,Yd.lastIndex=e,e+=Yd.exec(this.input)[0].length,this.input[e]===";"&&e++}};nc.eat=function(e){return this.type===e?(this.next(),!0):!1};nc.isContextual=function(e){return this.type===le.name&&this.value===e&&!this.containsEsc};nc.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};nc.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};nc.canInsertSemicolon=function(){return this.type===le.eof||this.type===le.braceR||Th.test(this.input.slice(this.lastTokEnd,this.start))};nc.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};nc.semicolon=function(){!this.eat(le.semi)&&!this.insertSemicolon()&&this.unexpected()};nc.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};nc.expect=function(e){this.eat(e)||this.unexpected()};nc.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var Z9=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};nc.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};nc.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};nc.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};nc.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var gn=ha.prototype;gn.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==le.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var Mne={kind:"loop"},HPt={kind:"switch"};gn.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Yd.lastIndex=this.pos;var t=Yd.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(f1(r,!0)){for(var i=n+1;BC(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!OPt.test(s))return!0}return!1};gn.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Yd.lastIndex=this.pos;var e=Yd.exec(this.input),t=this.pos+e[0].length,n;return!Th.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(BC(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};gn.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=le._var,s="let"),r){case le._break:case le._continue:return this.parseBreakContinueStatement(i,r.keyword);case le._debugger:return this.parseDebuggerStatement(i);case le._do:return this.parseDoStatement(i);case le._for:return this.parseForStatement(i);case le._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case le._class:return e&&this.unexpected(),this.parseClass(i,!0);case le._if:return this.parseIfStatement(i);case le._return:return this.parseReturnStatement(i);case le._switch:return this.parseSwitchStatement(i);case le._throw:return this.parseThrowStatement(i);case le._try:return this.parseTryStatement(i);case le._const:case le._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case le._while:return this.parseWhileStatement(i);case le._with:return this.parseWithStatement(i);case le.braceL:return this.parseBlock(!0,i);case le.semi:return this.parseEmptyStatement(i);case le._export:case le._import:if(this.options.ecmaVersion>10&&r===le._import){Yd.lastIndex=this.pos;var o=Yd.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===le._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===le.name&&c.type==="Identifier"&&this.eat(le.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};gn.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(le.semi)||this.insertSemicolon()?e.label=null:this.type!==le.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};gn.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};gn.parseDoStatement=function(e){return this.next(),this.labels.push(Mne),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(le._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(le.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};gn.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(Mne),this.enterScope(0),this.expect(le.parenL),this.type===le.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===le._var||this.type===le._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===le._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===le._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new Z9,u=this.parseExpression(t>-1?"await":!0,a);return this.type===le._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===le._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};gn.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,YN|(n?0:$Y),!1,t)};gn.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(le._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};gn.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(le.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};gn.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(le.braceL),this.labels.push(HPt),this.enterScope(0);for(var t,n=!1;this.type!==le.braceR;)if(this.type===le._case||this.type===le._default){var r=this.type===le._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(le.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};gn.parseThrowStatement=function(e){return this.next(),Th.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var qPt=[];gn.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?f3e:0),this.checkLValPattern(e,t?p3e:R1),this.expect(le.parenR),e};gn.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===le._catch){var t=this.startNode();this.next(),this.eat(le.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(le._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};gn.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};gn.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(Mne),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};gn.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};gn.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};gn.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===le._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};gn.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};gn.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(le.braceL),e&&this.enterScope(0);this.type!==le.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};gn.parseFor=function(e,t){return e.init=t,this.expect(le.semi),e.test=this.type===le.semi?null:this.parseExpression(),this.expect(le.semi),e.update=this.type===le.parenR?null:this.parseExpression(),this.expect(le.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};gn.parseForIn=function(e,t){var n=this.type===le._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(le.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};gn.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(le.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===le._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===le._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(le.comma))break}return e};gn.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?One:R1,!1)};var YN=1,$Y=2,g3e=4;gn.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===le.star&&t&$Y&&this.unexpected(),e.generator=this.eat(le.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&YN&&(e.id=t&g3e&&this.type!==le.name?null:this.parseIdent(),e.id&&!(t&$Y)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?One:R1:h3e));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Pne(e.async,e.generator)),t&YN||(e.id=this.type===le.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&YN?"FunctionDeclaration":"FunctionExpression")};gn.parseFunctionParams=function(e){this.expect(le.parenL),e.params=this.parseBindingList(le.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};gn.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(le.braceL);this.type!==le.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&WPt(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};gn.parseClassElement=function(e){if(this.eat(le.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(le.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===le.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===le.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(le.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===le.parenL||o!=="method"||i||s){var l=!n.static&&L5(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};gn.isClassElementNameStart=function(){return this.type===le.name||this.type===le.privateId||this.type===le.num||this.type===le.string||this.type===le.bracketL||this.type.keyword};gn.parseClassElementName=function(e){this.type===le.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};gn.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&L5(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};gn.parseClassField=function(e){if(L5(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&L5(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(le.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};gn.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(D3|Nne);this.type!==le.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};gn.parseClassId=function(e,t){this.type===le.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,R1,!1)):(t===!0&&this.unexpected(),e.id=null)};gn.parseClassSuper=function(e){e.superClass=this.eat(le._extends)?this.parseExprSubscripts(null,!1):null};gn.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};gn.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];N3(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function WPt(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function L5(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}gn.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==le.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};gn.parseExport=function(e,t){if(this.next(),this.eat(le.star))return this.parseExportAllDeclaration(e,t);if(this.eat(le._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==le.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};gn.parseExportDeclaration=function(e){return this.parseStatement(null)};gn.parseExportDefaultDeclaration=function(){var e;if(this.type===le._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,YN|g3e,!1,e)}else if(this.type===le._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};gn.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),N3(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};gn.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};gn.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};gn.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};gn.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};gn.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(le.braceL);!this.eat(le.braceR);){if(n)n=!1;else if(this.expect(le.comma),this.afterTrailingComma(le.braceR))break;t.push(this.parseExportSpecifier(e))}return t};gn.parseImport=function(e){return this.next(),this.type===le.string?(e.specifiers=qPt,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===le.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};gn.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,R1),this.finishNode(e,"ImportSpecifier")};gn.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,R1),this.finishNode(e,"ImportDefaultSpecifier")};gn.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,R1),this.finishNode(e,"ImportNamespaceSpecifier")};gn.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===le.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(le.comma)))return e;if(this.type===le.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(le.braceL);!this.eat(le.braceR);){if(t)t=!1;else if(this.expect(le.comma),this.afterTrailingComma(le.braceR))break;e.push(this.parseImportSpecifier())}return e};gn.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===le.string){var e=this.parseLiteral(this.value);return jPt.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};gn.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};gn.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var Sh=ha.prototype;Sh.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};Sh.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};Sh.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};Sh.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==le.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};Sh.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case le.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(le.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case le.braceL:return this.parseObj(!0)}return this.parseIdent()};Sh.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(le.comma),t&&this.type===le.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===le.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===le.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};Sh.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};Sh.parseBindingListItem=function(e){return e};Sh.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(le.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};Sh.checkLValSimple=function(e,t,n){t===void 0&&(t=M5);var r=t!==M5;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===R1&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(N3(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==m3e&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};Sh.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=M5),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};Sh.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=M5),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var tp=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},Ds={b_stat:new tp("{",!1),b_expr:new tp("{",!0),b_tmpl:new tp("${",!1),p_stat:new tp("(",!1),p_expr:new tp("(",!0),q_tmpl:new tp("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new tp("function",!1),f_expr:new tp("function",!0),f_expr_gen:new tp("function",!0,!1,null,!0),f_gen:new tp("function",!1,!1,null,!0)},lI=ha.prototype;lI.initialContext=function(){return[Ds.b_stat]};lI.curContext=function(){return this.context[this.context.length-1]};lI.braceIsBlock=function(e){var t=this.curContext();return t===Ds.f_expr||t===Ds.f_stat?!0:e===le.colon&&(t===Ds.b_stat||t===Ds.b_expr)?!t.isExpr:e===le._return||e===le.name&&this.exprAllowed?Th.test(this.input.slice(this.lastTokEnd,this.start)):e===le._else||e===le.semi||e===le.eof||e===le.parenR||e===le.arrow?!0:e===le.braceL?t===Ds.b_stat:e===le._var||e===le._const||e===le.name?!1:!this.exprAllowed};lI.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};lI.updateContext=function(e){var t,n=this.type;n.keyword&&e===le.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};lI.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};le.parenR.updateContext=le.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===Ds.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};le.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?Ds.b_stat:Ds.b_expr),this.exprAllowed=!0};le.dollarBraceL.updateContext=function(){this.context.push(Ds.b_tmpl),this.exprAllowed=!0};le.parenL.updateContext=function(e){var t=e===le._if||e===le._for||e===le._with||e===le._while;this.context.push(t?Ds.p_stat:Ds.p_expr),this.exprAllowed=!0};le.incDec.updateContext=function(){};le._function.updateContext=le._class.updateContext=function(e){e.beforeExpr&&e!==le._else&&!(e===le.semi&&this.curContext()!==Ds.p_stat)&&!(e===le._return&&Th.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===le.colon||e===le.braceL)&&this.curContext()===Ds.b_stat)?this.context.push(Ds.f_expr):this.context.push(Ds.f_stat),this.exprAllowed=!1};le.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};le.backQuote.updateContext=function(){this.curContext()===Ds.q_tmpl?this.context.pop():this.context.push(Ds.q_tmpl),this.exprAllowed=!1};le.star.updateContext=function(e){if(e===le._function){var t=this.context.length-1;this.context[t]===Ds.f_expr?this.context[t]=Ds.f_expr_gen:this.context[t]=Ds.f_gen}this.exprAllowed=!0};le.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==le.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var Xn=ha.prototype;Xn.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};Xn.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===le.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(le.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};Xn.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new Z9,r=!0);var a=this.start,u=this.startLoc;(this.type===le.parenL||this.type===le.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===le.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===le.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};Xn.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(le.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(le.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};Xn.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};Xn.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==le._in)&&s>r){var o=this.type===le.logicalOR||this.type===le.logicalAND,a=this.type===le.coalesce;a&&(s=le.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===le.coalesce||a&&(this.type===le.logicalOR||this.type===le.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};Xn.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};Xn.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===le.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&y3e(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===le.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==le._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(le.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function y3e(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&y3e(e.expression)}Xn.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};Xn.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};Xn.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(le.arrow)};Xn.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};Xn.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(le.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(le.bracketL);if(l||u&&this.type!==le.parenL&&this.type!==le.backQuote||this.eat(le.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(le.bracketR)):this.type===le.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(le.parenL)){var f=new Z9,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(le.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var y=this.startNodeAt(t,n);y.callee=e,y.arguments=m,a&&(y.optional=u),e=this.finishNode(y,"CallExpression")}else if(this.type===le.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var v=this.startNodeAt(t,n);v.tag=e,v.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(v,"TaggedTemplateExpression")}return e};Xn.parseExprAtom=function(e,t,n){this.type===le.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case le._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===le.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==le.dot&&this.type!==le.bracketL&&this.type!==le.parenL&&this.unexpected(),this.finishNode(r,"Super");case le._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case le.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(le._function))return this.overrideContext(Ds.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(le.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===le.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(le.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case le.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case le.num:case le.string:return this.parseLiteral(this.value);case le._null:case le._true:case le._false:return r=this.startNode(),r.value=this.type===le._null?null:this.type===le._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case le.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case le.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(le.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case le.braceL:return this.overrideContext(Ds.b_expr),this.parseObj(!1,e);case le._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case le._class:return this.parseClass(this.startNode(),!1);case le._new:return this.parseNew();case le.backQuote:return this.parseTemplate();case le._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};Xn.parseExprAtomDefault=function(){this.unexpected()};Xn.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===le.parenL&&!e)return this.parseDynamicImport(t);if(this.type===le.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};Xn.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(le.parenR)){var t=this.start;this.eat(le.comma)&&this.eat(le.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};Xn.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};Xn.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};Xn.parseParenExpression=function(){this.expect(le.parenL);var e=this.parseExpression();return this.expect(le.parenR),e};Xn.shouldParseArrow=function(e){return!this.canInsertSemicolon()};Xn.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new Z9,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==le.parenR;)if(l?l=!1:this.expect(le.comma),s&&this.afterTrailingComma(le.parenR,!0)){c=!0;break}else if(this.type===le.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===le.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,y=this.lastTokEndLoc;if(this.expect(le.parenR),e&&this.shouldParseArrow(u)&&this.eat(le.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,y)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var v=this.startNodeAt(n,r);return v.expression=i,this.finishNode(v,"ParenthesizedExpression")}else return i};Xn.parseParenItem=function(e){return e};Xn.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var GPt=[];Xn.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===le.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(le.parenL)?e.arguments=this.parseExprList(le.parenR,this.options.ecmaVersion>=8,!1):e.arguments=GPt,this.finishNode(e,"NewExpression")};Xn.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===le.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===le.backQuote,this.finishNode(n,"TemplateElement")};Xn.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===le.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(le.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(le.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};Xn.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===le.name||this.type===le.num||this.type===le.string||this.type===le.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===le.star)&&!Th.test(this.input.slice(this.lastTokEnd,this.start))};Xn.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(le.braceR);){if(r)r=!1;else if(this.expect(le.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(le.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};Xn.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(le.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===le.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===le.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(le.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(le.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};Xn.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};Xn.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===le.colon&&this.unexpected(),this.eat(le.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===le.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==le.comma&&this.type!==le.braceR&&this.type!==le.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===le.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};Xn.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(le.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(le.bracketR),e.key;e.computed=!1}return e.key=this.type===le.num||this.type===le.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};Xn.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};Xn.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Pne(t,r.generator)|Nne|(n?d3e:0)),this.expect(le.parenL),r.params=this.parseBindingList(le.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};Xn.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(Pne(n,!1)|c3e),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};Xn.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==le.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,m3e),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};Xn.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};Xn.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,One,t?null:n)}};Xn.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(le.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===le.comma?o=null:this.type===le.ellipsis?(o=this.parseSpread(r),r&&this.type===le.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};Xn.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};Xn.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};Xn.parseIdentNode=function(){var e=this.startNode();return this.type===le.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=le.name):this.unexpected(),e};Xn.parsePrivateIdent=function(){var e=this.startNode();return this.type===le.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};Xn.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===le.semi||this.canInsertSemicolon()||this.type!==le.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(le.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};Xn.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var $5=ha.prototype;$5.raise=function(e,t){var n=u3e(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};$5.raiseRecoverable=$5.raise;$5.curPosition=function(){if(this.options.locations)return new nP(this.curLine,this.pos-this.lineStart)};var Ax=ha.prototype,YPt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Ax.enterScope=function(e){this.scopeStack.push(new YPt(e))};Ax.exitScope=function(){this.scopeStack.pop()};Ax.treatFunctionsAsVarInScope=function(e){return e.flags&uI||!this.inModule&&e.flags&rP};Ax.declareName=function(e,t,n){var r=!1;if(t===R1){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&rP&&delete this.undefinedExports[e]}else if(t===p3e){var s=this.currentScope();s.lexical.push(e)}else if(t===h3e){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&f3e&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&rP&&delete this.undefinedExports[e],u.flags&Dne)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};Ax.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};Ax.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Ax.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&Dne)return t}};Ax.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&Dne&&!(t.flags&c3e))return t}};var ej=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new J9(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},P3=ha.prototype;P3.startNode=function(){return new ej(this,this.start,this.startLoc)};P3.startNodeAt=function(e,t){return new ej(this,e,t)};function v3e(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}P3.finishNode=function(e,t){return v3e.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};P3.finishNodeAt=function(e,t,n,r){return v3e.call(this,e,t,n,r)};P3.copyNode=function(e){var t=new ej(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var b3e="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",x3e=b3e+" Extended_Pictographic",_3e=x3e,w3e=_3e+" EBase EComp EMod EPres ExtPict",E3e=w3e,KPt=E3e,XPt={9:b3e,10:x3e,11:_3e,12:w3e,13:E3e,14:KPt},QPt="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",JPt={9:"",10:"",11:"",12:"",13:"",14:QPt},z0e="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",T3e="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",S3e=T3e+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",C3e=S3e+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",A3e=C3e+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",I3e=A3e+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",ZPt=I3e+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",e3t={9:T3e,10:S3e,11:C3e,12:A3e,13:I3e,14:ZPt},k3e={};function t3t(e){var t=k3e[e]={binary:Qv(XPt[e]+" "+z0e),binaryOfStrings:Qv(JPt[e]),nonBinary:{General_Category:Qv(z0e),Script:Qv(e3t[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var cH=0,V0e=[9,10,11,12,13,14];cH<V0e.length;cH+=1){var n3t=V0e[cH];t3t(n3t)}var fn=ha.prototype,ug=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=k3e[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};ug.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};ug.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};ug.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};ug.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};ug.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};ug.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};ug.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};ug.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};ug.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};fn.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};fn.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};fn.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};fn.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};fn.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};fn.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};fn.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};fn.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};fn.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};fn.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};fn.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};fn.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};fn.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};fn.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};fn.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};fn.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};fn.regexp_eatSyntaxCharacter=function(e){var t=e.current();return R3e(t)?(e.lastIntValue=t,e.advance(),!0):!1};function R3e(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}fn.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!R3e(n);)e.advance();return e.pos!==t};fn.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};fn.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};fn.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};fn.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=Gb(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=Gb(e.lastIntValue);return!0}return!1};fn.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),r3t(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function r3t(e){return f1(e,!0)||e===36||e===95}fn.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),i3t(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function i3t(e){return BC(e,!0)||e===36||e===95||e===8204||e===8205}fn.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};fn.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};fn.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};fn.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};fn.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};fn.regexp_eatZero=function(e){return e.current()===48&&!tj(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};fn.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};fn.regexp_eatControlLetter=function(e){var t=e.current();return N3e(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function N3e(e){return e>=65&&e<=90||e>=97&&e<=122}fn.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&s3t(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function s3t(e){return e>=0&&e<=1114111}fn.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};fn.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var D3e=0,d1=1,Qd=2;fn.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(o3t(t))return e.lastIntValue=-1,e.advance(),d1;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===Qd&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return D3e};function o3t(e){return e===100||e===68||e===115||e===83||e===119||e===87}fn.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),d1}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return D3e};fn.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){N3(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};fn.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return d1;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return Qd;e.raise("Invalid property name")};fn.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";P3e(t=e.current());)e.lastStringValue+=Gb(t),e.advance();return e.lastStringValue!==""};function P3e(e){return N3e(e)||e===95}fn.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";a3t(t=e.current());)e.lastStringValue+=Gb(t),e.advance();return e.lastStringValue!==""};function a3t(e){return P3e(e)||tj(e)}fn.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};fn.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===Qd&&e.raise("Negated character class may contain strings"),!0}return!1};fn.regexp_classContents=function(e){return e.current()===93?d1:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),d1)};fn.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};fn.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||L3e(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};fn.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};fn.regexp_classSetExpression=function(e){var t=d1,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===Qd&&(t=Qd);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==Qd&&(t=d1);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===Qd&&(t=Qd)}};fn.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};fn.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?d1:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};fn.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===Qd&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};fn.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};fn.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===Qd&&(t=Qd);return t};fn.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?d1:Qd};fn.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&u3t(n)||l3t(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function u3t(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function l3t(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}fn.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return c3t(t)?(e.lastIntValue=t,e.advance(),!0):!1};function c3t(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}fn.regexp_eatClassControlLetter=function(e){var t=e.current();return tj(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};fn.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};fn.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;tj(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function tj(e){return e>=48&&e<=57}fn.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;O3e(n=e.current());)e.lastIntValue=16*e.lastIntValue+M3e(n),e.advance();return e.pos!==t};function O3e(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function M3e(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}fn.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};fn.regexp_eatOctalDigit=function(e){var t=e.current();return L3e(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function L3e(e){return e>=48&&e<=55}fn.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!O3e(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+M3e(i),e.advance()}return!0};var Lne=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new J9(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},$r=ha.prototype;$r.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Lne(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};$r.getToken=function(){return this.next(),new Lne(this)};typeof Symbol<"u"&&($r[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===le.eof,value:t}}}});$r.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(le.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};$r.readToken=function(e){return f1(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};$r.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};$r.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=s3e(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};$r.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!aI(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};$r.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&o3e.test(String.fromCharCode(e)))++this.pos;else break e}}};$r.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};$r.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(le.ellipsis)):(++this.pos,this.finishToken(le.dot))};$r.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(le.assign,2):this.finishOp(le.slash,1)};$r.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?le.star:le.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=le.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(le.assign,n+1):this.finishOp(r,n)};$r.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(le.assign,3)}return this.finishOp(e===124?le.logicalOR:le.logicalAND,2)}return t===61?this.finishOp(le.assign,2):this.finishOp(e===124?le.bitwiseOR:le.bitwiseAND,1)};$r.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(le.assign,2):this.finishOp(le.bitwiseXOR,1)};$r.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Th.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(le.incDec,2):t===61?this.finishOp(le.assign,2):this.finishOp(le.plusMin,1)};$r.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(le.assign,n+1):this.finishOp(le.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(le.relational,n))};$r.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(le.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(le.arrow)):this.finishOp(e===61?le.eq:le.prefix,1)};$r.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(le.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(le.assign,3)}return this.finishOp(le.coalesce,2)}}return this.finishOp(le.question,1)};$r.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),f1(t,!0)||t===92))return this.finishToken(le.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Gb(t)+"'")};$r.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(le.parenL);case 41:return++this.pos,this.finishToken(le.parenR);case 59:return++this.pos,this.finishToken(le.semi);case 44:return++this.pos,this.finishToken(le.comma);case 91:return++this.pos,this.finishToken(le.bracketL);case 93:return++this.pos,this.finishToken(le.bracketR);case 123:return++this.pos,this.finishToken(le.braceL);case 125:return++this.pos,this.finishToken(le.braceR);case 58:return++this.pos,this.finishToken(le.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(le.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(le.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Gb(e)+"'")};$r.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};$r.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(Th.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new ug(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(le.regexp,{pattern:i,flags:o,value:u})};$r.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function f3t(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function $3e(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}$r.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=$3e(this.input.slice(t,this.pos)),++this.pos):f1(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(le.num,n)};$r.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=$3e(this.input.slice(t,this.pos));return++this.pos,f1(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(le.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),f1(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=f3t(this.input.slice(t,this.pos),n);return this.finishToken(le.num,s)};$r.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};$r.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(aI(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(le.string,t)};var F3e={};$r.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===F3e)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};$r.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw F3e;this.raise(e,t)};$r.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===le.template||this.type===le.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(le.dollarBraceL)):(++this.pos,this.finishToken(le.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(le.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(aI(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};$r.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(le.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};$r.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Gb(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return aI(t)?"":String.fromCharCode(t)}};$r.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};$r.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(BC(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?f1:BC)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=Gb(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};$r.readWord=function(){var e=this.readWord1(),t=le.name;return this.keywords.test(e)&&(t=kne[e]),this.finishToken(t,e)};var d3t="8.11.3";ha.acorn={Parser:ha,version:d3t,defaultOptions:LY,Position:nP,SourceLocation:J9,getLineInfo:u3e,Node:ej,TokenType:ai,tokTypes:le,keywordTypes:kne,TokContext:tp,tokContexts:Ds,isIdentifierChar:BC,isIdentifierStart:f1,Token:Lne,isNewLine:aI,lineBreak:Th,lineBreakG:$Pt,nonASCIIwhitespace:o3e};function h3t(e,t){return ha.parse(e,t)}const $ne={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},p3t={ecmaVersion:11},H0e="$",m3t="d",g3t="d1",y3t="d2",au=e=>(t,n)=>n.error(t,e+" not allowed"),v3t=au("Aggregate function"),b3t=au("Window function"),x3t="Invalid argument",Fne="Invalid column reference",_3t=Fne+" (must be input to an aggregate function)",B3e="Invalid function call",w3t="Invalid member expression",E3t="Invalid operator parameter",T3t="Invalid param reference",S3t="Invalid variable reference",C3t="Variable not accessible in operator call",A3t="Unsupported variable declaration",I3t="Unsupported destructuring pattern",j3e="Table expressions do not support closures",U3e="Use aq.escape(fn) to use a function as-is (including closures)",k3t="use table.params({ name: value }) to define dynamic parameters",R3t="use aq.addFunction(name, fn) to add new op functions",N3t=`
Note: ${j3e}. ${U3e}, or ${k3t}.`,z3e=`
Note: ${j3e}. ${U3e}, or ${R3t}.`,D3t=`The ${zNe} method is not valid in multi-table expressions.`;function P3t(e,t){const n=O3t(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,APt(r)?(L3t(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=g3t),e.scope.add(e.tuple2=y3t),e.scope.add(e.$param=H0e)):(e.scope.add(e.tuple=m3t),e.scope.add(e.$param=H0e)),ri(r,e,Bne),e.root}function O3t(e){try{const t=e.field?M3t(e):di(e)?V0(e):e;return h3t(`expr=(${t})`,p3t).body[0].expression.right}catch{gr(`Expression parse error: ${e+""}`)}}function M3t(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const Bne={FunctionDeclaration:au("Function definitions"),ForStatement:au("For loops"),ForOfStatement:au("For-of loops"),ForInStatement:au("For-in loops"),WhileStatement:au("While loops"),DoWhileStatement:au("Do-while loops"),AwaitExpression:au("Await expressions"),ArrowFunctionExpression:au("Function definitions"),AssignmentExpression:au("Assignments"),FunctionExpression:au("Function definitions"),NewExpression:au('Use of "new"'),UpdateExpression:au("Update expressions"),VariableDeclarator(e,t){jY(e.id,t)},Identifier(e,t,n){q3e(e,t,n)&&!t.scope.has(e.name)&&t.error(e,S3t,N3t)},CallExpression(e,t){const n=V3e(e.callee),r=BNe(n)||jNe(n);if(r){if((t.join||t.aggregate===!1)&&Ite(n)&&v3t(e,t),(t.join||t.window===!1)&&kte(n)&&b3t(e,t),t.$op=1,t.ast)BY(e,n,t),e.arguments.forEach(i=>ri(i,t,FY));else{const i=t.op($3t(t,r,n,e.arguments));Object.assign(e,{type:ONe,name:i.id})}return t.$op=0,!1}else FNe(n)?BY(e,n,t):t.error(e,B3e,z3e)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!sa(mb,r))return;const{name:s}=r;if(H3e(e)&&sa(mb,i)&&Bp($ne,i.name)){Y3e(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return q0e(e,o,t,W3e,n);if(s===t.$param)return q0e(e,o,t,B3t);t.paramsRef.has(s)?iP(e,t.paramsRef.get(s)):t.columnRef.has(s)?G3e(r,s,t,e):Bp(t.params,s)&&iP(r,s)}};function q0e(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(sa(nI,s))a=s.value;else try{ri(s,n,Bne,e),a=n.param(s)}catch{n.error(e,w3t)}return r(e,a,t,n,i),!1}const FY={...Bne,VariableDeclarator:au("Variable declaration in operator call"),Identifier(e,t,n){q3e(e,t,n)&&t.error(e,C3t)},CallExpression(e,t){const n=V3e(e.callee);FNe(n)?BY(e,n,t):t.error(e,B3e,z3e)}};function L3t(e,t){e.generator&&au("Generator functions")(e,t),e.async&&au("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(uR(t,n[0],"tuple1",i(1)),r>1&&uR(t,n[1],"tuple2",i(2)),r>2&&uR(t,n[2],"$param",s)):(uR(t,n[0],"tuple",i(0)),r>1&&uR(t,n[1],"$param",s))),t.root=e.body}function uR(e,t,n,r){sa(mb,t)?(e.scope.add(t.name),e[n]=t.name):sa(DNe,t)&&t.properties.forEach(i=>{const s=sa(mb,i.key)?i.key.name:sa(nI,i.key)?i.key.value:e.error(i,x3t);sa(mb,i.value)||e.error(i.value,I3t),r(i.value.name,s)})}function $3t(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(ri(u,e,FY),i.push(e.field(u))):l<a?(ri(u,e,FY),s.push(e.param(u))):e.error(u,E3t)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function V3e(e){return sa(mb,e)?e.name:sa(NNe,e)?H3e(e)?F3t(e.property.name):e.property.name:null}function H3e(e){return sa(mb,e.object)&&e.object.name==="Math"}function F3t(e){return e==="max"?"greatest":e==="min"?"least":e}function q3e(e,t,n){const{name:r}=e;if(!(sa(NNe,n)&&n.property===e)){if(!(sa(PNe,n)&&n.key===e))if(t.paramsRef.has(r))iP(e,t.paramsRef.get(r));else if(t.columnRef.has(r))G3e(e,r,t,n);else if(Bp(t.params,r))iP(e,r);else if(Bp($ne,r))Y3e(e,r);else return!0}}function W3e(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,Fne),r.aggronly&&!r.$op&&r.error(e,_3t),UNe(e,t,n,o,i)}function G3e(e,t,n,r){const[i,s]=n.columnRef.get(t);W3e(e,i,s,n,r)}function B3t(e,t,n,r){r.params&&!Bp(r.params,t)&&r.error(e,T3t),iP(e,t)}function iP(e,t){e.type=Ikt,e.name=t}function Y3e(e,t){e.type=Skt,e.name=t,e.raw=$ne[t]}function BY(e,t,n){if(t===zNe){const r=n.table;r||n.error(e,D3t),VNe(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=Ql(s)?r.columnName(s):s;return r.column(o)||n.error(i,Fne),o}):r.columnNames())}else e.callee={type:Akt,name:t}}function jY(e,t){sa(mb,e)?t.scope.add(e.name):sa(_kt,e)?e.elements.forEach(n=>jY(n,t)):sa(DNe,e)?e.properties.forEach(n=>jY(n.value,t)):t.error(e.id,A3t)}const j3t={[S3]:1,[ONe]:1};function tf(e,t={}){const n=t.generate||m5,r=t.compiler||Rte,i=z3t(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const y=U3t(m);return o[y]||(m.id=++c,o[y]=m)},field(m){const y=n(m);return s[y]||(s[y]=++l)},param(m){return sa(nI,m)?m.value:r.param(n(m),i)},value(m,y){a.push(m);const v=y.escape||(t.ast?CPt(y):f(n(y),i));u.push(v),j3t[y.type]&&v!==y&&fl(v)&&(v.field=y.name)},error(m,y,v=""){const b=m.start-6,w=m.end-6,E=String(d.spec).slice(b,w);gr(`${y}: "${E}"${v}`)}};Object.assign(d,t,{params:i});for(const[m,y]of F9(e))d.value(m+"",y.escape?RPt(d,y,i):P3t(d,y));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(y=>h[y])),{names:a,exprs:u,ops:p}}function U3t(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function z3t(e){return(e.table?fH(e.table):e.join?{...fH(e.join[1]),...fH(e.join[0])}:{})||{}}function fH(e){return e&&ws(e.params)?e.params():{}}const K3e="Expr",np="ExprList",X3e="ExprNumber",iN="ExprObject",v2="JoinKeys",F5="JoinValues",Vd="Options",jne="OrderKeys",Iv="SelectionList",rw="TableRef",b2="TableRefList",V3t="Descending",H3t="Query",q3t="Selection",W3t="Verb",G3t="Window";function nj(e,t){return e&&e.expr?new W0e({...e,...t}):new W0e(t,e)}class W0e{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...ws(this.expr)?{func:!0}:{}}}}function Y3t(e){return nj(e,{desc:!0})}function iE(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return nj(e,t?{expr:t,...r}:r)}function K3t(e,t,n){return nj(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function X3t(e){const t=n=>n;return t.toString=()=>e,t}function G0e(e,t){return t=t&&ws(t.query)?t.query():t,t&&ws(t.evaluate)?t.evaluate(null,e):e(t)}function Q3e(e){return fl(e)&&(di(e.all)||di(e.matches)||di(e.not)||di(e.range))}function sP(e){return e&&ws(e.toObject)?e.toObject():ws(e)?{expr:String(e),func:!0}:di(e)?e.map(sP):fl(e)?X9(e,t=>sP(t)):e}function Une(e){return di(e)?e.map(Une):fl(e)?di(e.verbs)?O3.from(e):di(e.all)?FC():di(e.range)?_Pt(...e.range):di(e.match)?wPt(RegExp(...e.match)):di(e.not)?t3e(e.not.map(sP)):Q3t(e):e}function Q3t(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=iE(n):e.func===!0&&(t=n=X3t(n)),fl(e.window)){const{frame:r,peers:i}=e.window;t=n=K3t(n,r,i)}e.desc===!0&&(t=Y3t(n))}return e===t?X9(e,r=>Une(r)):t}function J3t(e){return di(e)?e.map(Z3t):e}function Z3t(e){const t=[];return Jc(e).forEach(n=>{Ql(n)?t.push(n):Cu(n)?t.push(iE(n,null)):fl(n)&&n.expr||ws(n)?t.push(n):gr(`Invalid key value: ${n+""}`)}),t}function eOt(e){return di(e)?e.map(tOt):e}function tOt(e,t){return t<2?Jc(e):e}function nOt(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(fl(r)&&!ws(r))for(const i in r)t.push(r[i]);else n=Ql(r)?r:Cu(r)?iE(n):ws(r)?n:gr(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const rOt={[K3e]:tOe,[np]:jC,[X3e]:lOt,[iN]:Yb,[v2]:cOt,[F5]:fOt,[jne]:jC,[Iv]:aOt};function iOt(e,t,n){return t===rw?Y0e(e):t===b2?e.map(Y0e):J3e(sP(e),t,n)}function J3e(e,t,n){return t===Vd?e&&sOt(e,n):rOt[t](e)}function sOt(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?J3e(i,t[r]):i}return n}function oOt(e,t){return tf({expr:e},{...t,ast:!0}).exprs[0]}function zne(e){return{type:S3,name:e}}function Z3e(e){return{type:S3,index:e}}function Yb(e,t){if(Cu(e))return oOt(e,t);if(e.expr){let n;if(e.field===!0?n=zne(e.expr):e.func===!0&&(n=Yb(e.expr,t)),n)return e.desc&&(n={type:V3t,expr:n}),e.window&&(n={type:G3t,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...Yb(e[n],t),as:n}))}function eOe(e){const t=q3t;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:jC(e.not)}:e.range?{type:t,operator:"range",arguments:jC(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:gr("Invalid input")}function aOt(e){return Jc(e).map(uOt).flat()}function uOt(e){return Q3e(e)?eOe(e):Ql(e)?Z3e(e):Cu(e)?zne(e):fl(e)?Object.keys(e).map(t=>({type:S3,name:t,as:e[t]})):gr("Invalid input")}function tOe(e){return Q3e(e)?eOe(e):Ql(e)?Z3e(e):Cu(e)?zne(e):fl(e)?Yb(e):gr("Invalid input")}function jC(e){return Jc(e).map(tOe).flat()}function lOt(e){return Ql(e)?e:Yb(e)}function cOt(e){return di(e)?e.map(jC):Yb(e,{join:!0})}function fOt(e){return di(e)?e.map((t,n)=>n<2?jC(t):Yb(t,{join:!0})):Yb(e,{join:!0})}function Y0e(e){return e&&ws(e.toAST)?e.toAST():e}class nOe{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===v2?J3t(a):o===F5?eOt(a):o===jne?nOt(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=UY[t.verb],r=(n.schema||[]).map(({name:i})=>Une(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===rw?G0e(n,o):s===b2?o.map(a=>G0e(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=sP(this[n])}),t}toAST(){const t={type:W3t,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=iOt(this[n],r,i)}),t}}function Ui(e,t){return Object.assign((...n)=>new nOe(e,t,n),{schema:t})}const UY={count:Ui("count",[{name:"options",type:Vd}]),derive:Ui("derive",[{name:"values",type:iN},{name:"options",type:Vd,props:{before:Iv,after:Iv}}]),filter:Ui("filter",[{name:"criteria",type:iN}]),groupby:Ui("groupby",[{name:"keys",type:np}]),orderby:Ui("orderby",[{name:"keys",type:jne}]),relocate:Ui("relocate",[{name:"columns",type:Iv},{name:"options",type:Vd,props:{before:Iv,after:Iv}}]),rename:Ui("rename",[{name:"columns",type:Iv}]),rollup:Ui("rollup",[{name:"values",type:iN}]),sample:Ui("sample",[{name:"size",type:X3e},{name:"options",type:Vd,props:{weight:K3e}}]),select:Ui("select",[{name:"columns",type:Iv}]),ungroup:Ui("ungroup"),unorder:Ui("unorder"),reify:Ui("reify"),dedupe:Ui("dedupe",[{name:"keys",type:np,default:[]}]),impute:Ui("impute",[{name:"values",type:iN},{name:"options",type:Vd,props:{expand:np}}]),fold:Ui("fold",[{name:"values",type:np},{name:"options",type:Vd}]),pivot:Ui("pivot",[{name:"keys",type:np},{name:"values",type:np},{name:"options",type:Vd}]),spread:Ui("spread",[{name:"values",type:np},{name:"options",type:Vd}]),unroll:Ui("unroll",[{name:"values",type:np},{name:"options",type:Vd,props:{drop:np}}]),lookup:Ui("lookup",[{name:"table",type:rw},{name:"on",type:v2},{name:"values",type:np}]),join:Ui("join",[{name:"table",type:rw},{name:"on",type:v2},{name:"values",type:F5},{name:"options",type:Vd}]),cross:Ui("cross",[{name:"table",type:rw},{name:"values",type:F5},{name:"options",type:Vd}]),semijoin:Ui("semijoin",[{name:"table",type:rw},{name:"on",type:v2}]),antijoin:Ui("antijoin",[{name:"table",type:rw},{name:"on",type:v2}]),concat:Ui("concat",[{name:"tables",type:b2}]),union:Ui("union",[{name:"tables",type:b2}]),intersect:Ui("intersect",[{name:"tables",type:b2}]),except:Ui("except",[{name:"tables",type:b2}])};class O3 extends vNe{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new O3(t.map(nOe.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return K0e(this,"toObject")}toJSON(){return this.toObject()}toAST(){return K0e(this,"toAST",{type:H3t})}}function K0e(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function dOt(e,t){return new O3(e._verbs.concat(t),e._params,e._table)}for(const e in UY){const t=UY[e];O3.prototype["__"+e]=function(n,...r){return dOt(n,t(...r))}}function cI(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function hOt(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function Vne(e,t){const n=gd();return t.forEach((r,i)=>{const s=Cu(r)?r:i;if(s){const o=e.column(i)||gr(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function rOe(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||gr("relocate requires a before or after option."),i&&s&&gr("relocate accepts only one of the before or after options."),t=c1(e,t);const o=[...c1(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),Vne(e,u)}function M3(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function Hne(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function pOt(e,t=0,n=e.length){let r=n?e[t++]:ui;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function mOt(e,t=0,n=e.length){let r=n?e[t++]:ui;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function w6(e){return KD(e)?e:+e}function gOt(e,t){const n=e.length;if(!n)return ui;if((t=+t)<=0||n<2)return w6(e[0]);if(t>=1)return w6(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=w6(e[i]);return KD(s)?s:s+(w6(e[i+1])-s)*(r-i)}class yOt{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:pOt(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:mOt(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(Hne)),gOt(this._sorted,t)}}const B5=(e,t,n)=>cI(t,"{"+M3(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function vOt(e,t){const{ops:n,output:r}=bOt(e,t),i=e[0].fields,s=i.length,o=s===0?qne:s===1?xOt:s===2?_Ot:gr("Unsupported field count: "+s);return new o(i,n,r,t)}function bOt(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=BNe(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class qne extends TPt{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new yOt),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class xOt extends qne{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=B5(n,s,"add"),this._rem=B5(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,wp(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,wp(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class _Ot extends qne{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=B5(n,s,"add"),this._rem=B5(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,wp(i)&&wp(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,wp(i)&&wp(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function WE(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=fI(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function fI(e,t,n){if(!t.length)return n;const r=iOe(t),i=e.groups(),s=i?i.size:1;return n=n||L9(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=oOe(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=sOe(e,o);o.write(a,n,0)}),n}function iOe(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(vOt(r[i],t));return n}function sOe(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function oOe(e,t,n){const{keys:r,size:i}=n,s=L9(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function aOe(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function uOe(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const X0e=uOe(Hne);function wOt(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?cI(["w","r","k"],"{"+M3(r,(m,y)=>`r[_${y}.id][k]=_${y}.value(w,_${y}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,y,v,b){p.index=p.i0=p.i1=0,p.size=y.length,s=m,o=y,u=v,l=b,a=i.map(w=>w.init());for(let w=0;w<f;++w)r[w].init();return p},value(m,y){return y(s[m],e)},step(m){const[y,v]=t,b=p.size,w=p.i0,E=p.i1;p.i0=y!=null?Math.max(0,m-Math.abs(y)):0,p.i1=v!=null?Math.min(b,m+Math.abs(v)+1):b,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=X0e.left(o,o[p.i0])),p.i1<b&&c(p.i1)&&(p.i1=X0e.right(o,o[p.i1-1])));for(let T=0;T<d;++T){const A=i[T],I=a[T];for(let R=w;R<p.i0;++R)A.rem(I,s[R],e);for(let R=E;R<p.i1;++R)A.add(I,s[R],e);A.write(I,u,l)}return h(p,u,l),u}};return p}const EOt=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),TOt=e=>!!e.peers;function SOt(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=jNe(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function COt(e,t,n,r={},i){const s=e.data(),o=AOt(i,s),a=o.length,u=cI(["r","d","op"],"{"+M3(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=IOt(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function AOt(e,t){const n={};return e.forEach(r=>{const i=EOt(r),s=TOt(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});Ite(r.name)?a.push(r):u.push(SOt(r))}),Object.values(n).map(r=>wOt(t,r.frame,r.peers,r.winOps,iOe(r.aggOps,r.frame[0]!=null?-1:1)))}function IOt(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function kOt(e){return kte(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function Wne(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=gd(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=ROt(r),c=e.isGrouped()?e.groups().size:1,f=fI(e,u,L9(r.length,()=>Array(c)));return l.length?COt(e,a,n,f,l):NOt(e,a,n,f),e.create(o)}function ROt(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(kOt(s)?n:t).push(s)}return[t,n]}function NOt(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function DOt(e,t,n={}){const r=Wne(e,tf(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:rOe(r,Object.keys(t).filter(i=>!e.column(i)),n)}function POt(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const E6=2147483648,OOt=4294967295;class lOe{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&E6>>>t}set(t){this._bits[t>>5]|=E6>>>t}clear(t){this._bits[t>>5]&=~(E6>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&OOt>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=E6>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function MOt(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new lOe(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function LOt(e,t){const n=tf({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=Wne(e,n,{drop:!0}).column("p");r=s=>i[s]}return MOt(e,r)}function cOe(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=WE(e,r,n),l=gd(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(E=>{if(!a.has(E)){const T=l.add(E,[]);c.has(E)||(f.push(e.column(E)),d.push(T))}}),t.forEach(E=>{a.has(E)||(l.has(E)||l.add(E,[]),h.push(l.data[E]))});const p=o?l.add(o,[]):null;let m=0;const y=f.length,v=h.length,b=(E,T)=>{for(let A=0;A<y;++A)d[A].length=m+T,d[A].fill(f[A].get(E),m,m+T)},w=p?(E,T)=>{for(let A=0;A<T;++A)p[E+A]=A}:()=>{};if(v===1){const E=u[0],T=h[0];e.scan((A,I)=>{const R=Jc(E(A,I)),D=Math.min(R.length,s);b(A,D);for(let M=0;M<D;++M)T[m+M]=R[M];w(m,D),m+=D})}else e.scan((E,T)=>{let A=0;const I=u.map(R=>{const D=Jc(R(E,T));return A=Math.min(Math.max(A,D.length),s),D});b(E,A);for(let R=0;R<v;++R){const D=h[R],M=I[R];for(let $=0;$<A;++$)D[m+$]=M[$]}w(m,A),m+=A});return e.create(l.new())}function $Ot(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=WE(e,r,n);return cOe(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function Up(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=Ql(o)?t.columnName(o):o,Cu(o)?i.set(o,iE(o)):ws(o)?c1(t,o).forEach(s):fl(o)?ZPe(i,o):gr(`Invalid ${e} value: ${o+""}`)};return Jc(n).forEach(s),r.preparse&&r.preparse(i),tf(i,{table:t,...r})}function FOt(e,t,n){return $Ot(e,Up("fold",e,t),n)}function Q0e(e,t,n,r){const i=n&&n.length;return BOt(i?jOt(e,n,r):e,t,i)}function BOt(e,{names:t,exprs:n,ops:r},i){const s=WE(e,r,n),o=i?null:gd(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=wp(p)?p:d(h)})}),i?e:e.create(o)}function jOt(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=g5(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=gd(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const y=i[p],v=f[m];e.scan(b=>v.push(y.get(b)))});const d=g5(o.map((p,m)=>y=>y[m])),h=cI("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((v,b)=>v*b.length,r.size),y=new Uint32Array(m+(p-a.size));y.set(r.keys),J0e(r,n,(v,b)=>{a.has(d(v))||(h(v),y[p++]=b[0])}),c.groupby({...r,keys:y})}else J0e(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function J0e(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let y=0;y<r;++y)h[y]=c[y](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function Gne(e,{names:t,exprs:n,ops:r}){const i=gd(),s=e.groups();return s&&aOe(i,s),UOt(t,n,s,fI(e,r),i),e.create(i.new())}function UOt(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function zOt(e,t,n={}){if(t=tf(t,{table:e}),t.names.forEach(r=>e.column(r)?0:gr(`Invalid impute column ${V0(r)}`)),n.expand){const r={preparse:VOt,aggronly:!0},i=Up("impute",e,n.expand,r),s=Gne(e.ungroup(),i);return Q0e(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return Q0e(e,t)}function VOt(e){e.forEach((t,n)=>t.field?e.set(n,ANe(t+"")):0)}function HOt(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function fOe(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function qOt(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function WOt(e,t){const n=["i","a","j","b"];return cI(n,"{"+M3(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function GOt(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=gd(),y=Array(p),v=Array(p);for(let E=0;E<r.length;++E)y[E]=m.add(r[E],[]),v[E]=i[E];const b=WOt(y,v);if((di(n)?KOt:YOt)(b,n,o,c,a,f,l,h,u,d),s.left)for(let E=0;E<u;++E)l[E]||b(a[E],o,-1,c);if(s.right)for(let E=0;E<d;++E)h[E]||b(-1,o,f[E],c);return e.create(m.new())}function YOt(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function KOt(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,y,v,b,w=e;l>=c?(f=r,d=t,h=a,p=s,m=i,y=n,v=u,b=o):(f=i,d=n,h=u,p=o,m=r,y=t,v=a,b=s,w=(A,I,R,D)=>e(R,D,A,I));const E=qOt(b,m,y),T=p.length;for(let A=0;A<T;++A){const I=p[A],R=E.get(d(I,f));if(R){const D=R.length;for(let M=0;M<D;++M){const $=R[M];w(I,f,b[$],m),v[$]=1}h[A]=1}}}function j5(e,t,n){const r=new Map;Jc(n).forEach((s,o)=>{s=Ql(s)?t.columnName(s):s,Cu(s)?r.set(o,iE(s)):ws(s)||fl(s)&&s.expr?r.set(o,s):gr(`Invalid ${e} key value: ${s+""}`)});const i=tf(r,{table:t,aggregate:!1,window:!1});return g5(i.exprs,!0)}function XOt(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function Yne(e,t,n){if(n)Cu(n)?n=[n,n]:di(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=XOt(e.columnNames(),t.columnNames());r.length||gr("Natural join requires shared column names."),n=[r,r]}return n}function dOe(e,t,n,r){return n.length!==r.length&&gr("Mismatched number of join keys"),[j5("join",e,n),j5("join",t,r)]}const QOt={aggregate:!1,window:!1},JOt={...QOt,index:1};function Z0e(e,t,n,r,i={}){n=Yne(e,t,n);const s={join:[e,t]};let o;if(di(n)){const[a,u]=n.map(Jc);o=dOe(e,t,a,u),r||(r=ZOt(e,a,u,i))}else o=tf({on:n},s).exprs[0],r||(r=[FC(),FC()]);return GOt(e,t,o,e4t(e,t,r,s,i&&i.suffix),i)}function ZOt(e,t,n,r){const i=[];t.forEach((o,a)=>Cu(o)&&o===n[a]?i.push(o):0);const s=t3e(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${V0(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,FC()]:[FC(),s]}function e4t(e,t,n,r,i=[]){if(di(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=Up("join",e,n[0],r)),u--&&(o=Up("join",t,n[1],JOt)),u--&&(a=tf(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(i[0]!==""&&ege(s.names,l,i[0]||"_1"),i[1]!==""&&ege(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return tf(n,r)}function ege(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function t4t(e,t,n,r={}){const i=new lOe(e.totalRows());return(di(n)?n4t:r4t)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function n4t(e,t,n,[r,i]){const s=fOe(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function r4t(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function tge(e,t,n,r){n=Yne(e,t,n);const i=di(n)?dOe(e,t,...n.map(Jc)):tf({on:n},{join:[e,t]}).exprs[0];return t4t(e,t,i,r)}function i4t(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=gd(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(ui)));const l=fOe(t,r),c=cI(["lr","rr","data"],"{"+M3(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),WE(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function s4t(e,t,n,r){return n=Yne(e,t,n),i4t(e,t,[j5("lookup",e,n[0]),j5("lookup",t,n[1])],Up("lookup",t,r))}const zY=(e,t)=>e??t;function o4t(e,t,n,r={}){const{keys:i,keyColumn:s}=a4t(e,t,r),o=zY(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>fI(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(u4t(n,a,e.groups(),u))}function a4t(e,t,n){const r=n.limit>0?+n.limit:1/0,i=zY(n.sort,!0),s=zY(n.keySeparator,"_"),o=WE(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=fI(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function u4t({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=gd(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&aOe(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function l4t(e,t,n,r){return o4t(e,Up("fold",e,t),Up("fold",e,n,{preparse:c4t,aggronly:!0}),r)}function c4t(e){e.forEach((t,n)=>t.field?e.set(n,TNe(t+"")):0)}function f4t(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),Vne(e,c1(e,t,n))}function nge(e,t){return Gne(e,tf(t,{table:e,aggronly:!0,window:!1}))}function d4t(e,t,n,r){return(t?r?p4t:h4t:r?g4t:m4t)(e.length,e,n,r)}function h4t(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*tI()|0];return t}function p4t(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=uOe(Hne).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*tI())];return t}function m4t(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*tI();s<e&&(t[s|0]=n[i])}return t}function g4t(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(tI())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function y4t(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=tI()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function v4t(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):d4t(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&y4t(u),e.reify(u)}function b4t(e,t,n={}){return v4t(e,x4t(e,t),_4t(e,n.weight),n)}const hOe=e=>t=>e.get(t)||0;function x4t(e,t){return Ql(t)?()=>t:hOe(Gne(e,tf({size:t},{table:e,window:!1})).column("size"))}function _4t(e,t){return t==null?null:(t=Ql(t)?e.columnName(t):t,hOe(Cu(t)?e.column(t):Wne(e,tf({w:t},{table:e}),{drop:!0}).column("w")))}function w4t(e,t){return Vne(e,c1(e,t))}function E4t(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=WE(e,r,n),l=gd(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=T4t(e,u[d],a),m=p.length;for(let y=0;y<m;++y)l.add(s[y]||`${h}_${y+1}`,p[y])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function T4t(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=Jc(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(ui));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function S4t(e,t,n){return E4t(e,Up("spread",e,t),n)}function C4t(e,t){return e.concat(t).dedupe()}function A4t(e,t,n){return cOe(e,Up("unroll",e,t),n&&n.drop?{...n,drop:Up("unroll",e,n.drop).names}:n)}function I4t(e,t){return e.create({groups:k4t(e,t)})}function k4t(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=WE(e,r,n);const o=g5(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function R4t(e,t){return I4t(e,Up("groupby",e,t))}function N4t(e,t){return e.create({order:t})}const D4t=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function P4t(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=tf(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=y=>`fn[${i.length}](${y}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([m5(p,{index:"a",op:o}),m5(p,{index:"b",op:a})])},window:!1}),l=fI(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,y]=r[h];d+=D4t(m,y,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function O4t(e,t){return N4t(e,M4t(e,t))}function M4t(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(fl(o)&&!ws(o))for(const a in o)i(o[a]);else i(Ql(o)?iE(s,e.columnName(o)):Cu(o)?iE(s):ws(o)?s:gr(`Invalid orderby field: ${s+""}`))}),P4t(e,r)}function L4t(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=gd();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>ui};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function $4t(e,t){const n=gd(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?oOe(e,t,r):[sOe(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),y=i[p];for(let v=0,b=0;v<a;++v)m.fill(y(o[v],d),b,b+=u[v+1])})}return e.create(n.new())}function F4t(e){return e.isGrouped()?e.create({groups:null}):e}function B4t(e){return e.isOrdered()?e.create({order:null}):e}const j4t={__antijoin:(e,t,n)=>tge(e,t,n,{anti:!0}),__count:(e,t={})=>nge(e,{[t.as||"count"]:SNe()}),__cross:(e,t,n,r)=>Z0e(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:L4t,__dedupe:hOt,__derive:DOt,__except:POt,__filter:LOt,__fold:FOt,__impute:zOt,__intersect:HOt,__join:Z0e,__lookup:s4t,__pivot:l4t,__relocate:rOe,__rename:f4t,__rollup:nge,__sample:b4t,__select:w4t,__semijoin:tge,__spread:S4t,__union:C4t,__unroll:A4t,__groupby:R4t,__orderby:O4t,__ungroup:F4t,__unorder:B4t,__reduce:$4t};Object.assign(xy.prototype,j4t);function U4t(e,t){return xy.from(e,t)}function dH(e){return nj(e,{escape:!0,toString(){gr("Escaped values can not be serialized.")}})}xy.prototype;var hH,rge;function z4t(){if(rge)return hH;rge=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,u=typeof aa=="object"&&aa&&aa.Object===Object&&aa,l=typeof self=="object"&&self&&self.Object===Object&&self,c=u||l||Function("return this")(),f=Object.prototype,d=f.toString,h=Math.max,p=Math.min,m=function(){return c.Date.now()};function y(T,A,I){var R,D,M,$,U,F,H=0,Q=!1,J=!1,ne=!0;if(typeof T!="function")throw new TypeError(e);A=E(A)||0,v(I)&&(Q=!!I.leading,J="maxWait"in I,M=J?h(E(I.maxWait)||0,A):M,ne="trailing"in I?!!I.trailing:ne);function Z(_e){var pe=R,Te=D;return R=D=void 0,H=_e,$=T.apply(Te,pe),$}function ie(_e){return H=_e,U=setTimeout(G,A),Q?Z(_e):$}function q(_e){var pe=_e-F,Te=_e-H,Le=A-pe;return J?p(Le,M-Te):Le}function j(_e){var pe=_e-F,Te=_e-H;return F===void 0||pe>=A||pe<0||J&&Te>=M}function G(){var _e=m();if(j(_e))return V(_e);U=setTimeout(G,q(_e))}function V(_e){return U=void 0,ne&&R?Z(_e):(R=D=void 0,$)}function Y(){U!==void 0&&clearTimeout(U),H=0,R=F=D=U=void 0}function ee(){return U===void 0?$:V(m())}function ae(){var _e=m(),pe=j(_e);if(R=arguments,D=this,F=_e,pe){if(U===void 0)return ie(F);if(J)return U=setTimeout(G,A),Z(F)}return U===void 0&&(U=setTimeout(G,A)),$}return ae.cancel=Y,ae.flush=ee,ae}function v(T){var A=typeof T;return!!T&&(A=="object"||A=="function")}function b(T){return!!T&&typeof T=="object"}function w(T){return typeof T=="symbol"||b(T)&&d.call(T)==n}function E(T){if(typeof T=="number")return T;if(w(T))return t;if(v(T)){var A=typeof T.valueOf=="function"?T.valueOf():T;T=v(A)?A+"":A}if(typeof T!="string")return T===0?T:+T;T=T.replace(r,"");var I=s.test(T);return I||o.test(T)?a(T.slice(2),I?2:8):i.test(T)?t:+T}return hH=y,hH}var V4t=z4t();const Fm=hh(V4t);function pOe({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=O.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=O.useMemo(()=>YA(".2s"),[]);return S.jsxs(S.Fragment,{children:[S.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:S.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:S.jsx(Gl,{children:S.jsx($i,{gap:3,children:S.jsx(gt,{size:"14px",style:{color:"#878E95"},children:r})})})})}),S.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),S.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>S.jsxs("g",{transform:`translate(${n}, ${a})`,children:[S.jsx("line",{x2:"-6",stroke:"currentColor"}),S.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),S.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const H4t=Object.freeze(Object.defineProperty({__proto__:null,YAxis:pOe},Symbol.toStringTag,{value:"Module"})),pH=15;function mOe({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=O.useState([0,0]),[l,c]=O.useState(!1);return O.useEffect(()=>{const f=Vo("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(y=>Math.abs(e(y[r.x])-p[0])<pH&&Math.abs(t(y[r.y])-p[1])<pH);if(h.ctrlKey||h.metaKey||!o){const y=new Set(s.ids);m.forEach(b=>{y.has(b[r.ids])&&y.delete(b[r.ids])});const v=Array.from(y);n([[a[0],a[1]],[a[0],a[1]]],e,t,v.length===0?"clear":"drag",v)}else{const y=Array.from(new Set([...s.ids,...m.map(v=>v[r.ids])]));y.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",y)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),S.jsx("circle",{style:{cursor:l?"pointer":"default"},r:pH,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const q4t=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:mOe},Symbol.toStringTag,{value:"Module"})),As={top:15,left:100,right:15,bottom:70};function VY({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=Ny(),[c]=Ny(),[f]=Ny(),[d,h]=O.useState(!0),p=O.useMemo(()=>l-As.left-As.right,[l]),m=O.useMemo(()=>u-As.top-As.bottom,[u]),y=O.useMemo(()=>{const M=Array.from(new Set(s.map($=>$[i.category])));return XA(kRe).domain(M)},[s,i.category]),{xMin:v,yMin:b,xMax:w,yMax:E}=O.useMemo(()=>{const M=s.map(J=>+J[i.x]).filter(J=>J!==null),[$,U]=lG(M),F=s.map(J=>+J[i.y]).filter(J=>J!==null),[H,Q]=lG(F);return{xMin:$,xMax:U,yMin:H,yMax:Q}},[s,i.x,i.y]),T=O.useMemo(()=>{const M=w-v;return p<=0?null:i.dataType==="date"?ERe([As.left,p+As.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):Fp([As.left,p+As.left]).domain([v-M/10,w+M/10]).nice()},[i.dataType,p,w,v]),A=O.useMemo(()=>{const M=E-b;return m<=0?null:Fp([m+As.top,As.top]).domain([b-M/10,E+M/10]).nice()},[m,E,b]),I=O.useMemo(()=>{if(!T||!A)return()=>null;if(r==="Axis Selection"){const M=J_t().extent([[As.left,As.top+m-5],[As.left+p,As.top+m+5]]).on("brush end",U=>{U.sourceEvent!==void 0&&n([[U.selection[0],null],[U.selection[1],null]],T,A,U.mode)}),$=Z_t().extent([[As.left-5,As.top],[As.left+5,As.top+m]]).on("brush end",U=>{U.sourceEvent!==void 0&&n([[null,U.selection[0]],[null,U.selection[1]]],T,A,U.mode)});return c.current&&f.current&&(Vo(f.current).call($),Vo(c.current).call(M),t.hasBrush||(Vo(f.current).call($.move,[A(E),A(b)]),Vo(c.current).call(M.move,[T(new Date("2015-01-02")),T(new Date("2015-12-31"))]),n([[T(new Date("2015-01-02")),A(E)],[T(new Date("2015-12-31")),A(b)]],T,A,"drag"))),()=>{Vo(f.current).call($.move,[A(E),A(b)]),Vo(c.current).call(M.move,[T(new Date("2015-01-02")),T(new Date("2015-12-31"))]),n([[T(new Date("2015-01-02")),A(E)],[T(new Date("2015-12-31")),A(b)]],T,A,"clear")}}if(r==="Rectangular Selection"){const M=ewt().extent([[As.left,As.top],[As.left+p,As.top+m]]).on("brush",$=>{$.sourceEvent!==void 0&&n([[$.selection[0][0],$.selection[0][1]],[$.selection[1][0],$.selection[1][1]]],T,A,$.mode)}).on("end",$=>{$.selection===null&&$.sourceEvent!==void 0&&(Vo(a.current).call(M.move,null),e(null))});return Vo(a.current).call(M),()=>{Vo(a.current).call(M.move,null),n([[null,null],[null,null]],T,A,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[T(v),A(E)],[T(w),A(b)]],T,A,null),()=>n([[T(v),A(E)],[T(w),A(b)]],T,A,"clear")):r==="Paintbrush Selection"?()=>n([[T(v),A(E)],[T(w),A(b)]],T,A,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,w,v,T,E,b,A]),R=O.useMemo(()=>o.length===0?null:new Set(o),[o]),D=O.useMemo(()=>!T||!A?null:s.map((M,$)=>{if(M[i.x]===null||M[i.y]===null)return null;const U=i.dataType==="date"?T(new Date(M[i.x])):T(M[i.x]);return S.jsx("circle",{opacity:R&&!R.has(M[i.ids])?.3:1,r:3,fill:R&&!R.has(M[i.ids])?"lightgray":y(M[i.category]),cx:U,cy:A(M[i.y])},$)}),[R,y,s,i.category,i.dataType,i.ids,i.x,i.y,T,A]);return O.useEffect(()=>{r==="Axis Selection"&&Hbt(".handle").style("fill","darkgrey")},[t,r]),S.jsxs(mu,{children:[S.jsxs($i,{children:[S.jsx(yn,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),I==null||I()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?S.jsx(dJ,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:M=>h(M==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),S.jsxs($i,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[S.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[T&&A?S.jsxs("g",{children:[S.jsx(pOe,{yScale:A,label:i.y,horizontalPosition:As.left,xRange:T.range()}),S.jsx(Ste,{xScale:T,yRange:A.range(),isDate:i.dataType==="date",vertPosition:m+As.top,label:i.x,ticks:T.ticks(i.brushType==="Axis Selection"?12:5).map(M=>({value:M.toString(),offset:T(M)}))})]}):null,D,S.jsx("g",{id:"brushXRef",ref:c}),S.jsx("g",{id:"brushYRef",ref:f}),T&&A&&r==="Paintbrush Selection"?S.jsx(mOe,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:T,yScale:A}):null]}),r==="Slider Selection"&&T&&A?S.jsxs(mu,{style:{flexGrow:1},gap:50,children:[S.jsxs(mu,{gap:0,children:[S.jsx(gt,{children:i.x}),S.jsx(U$,{minRange:1,label:null,min:T.domain()[0],max:T.domain()[1],labelAlwaysOn:!1,onChange:M=>{n([[T(M[0]),t.y1],[T(M[1]),t.y2]],T,A,"drag")},style:{width:"300px"},marks:T.ticks(5).map(M=>({value:M,label:M})),value:[T.invert(t.x1),T.invert(t.x2)]})]}),S.jsxs(mu,{gap:0,children:[S.jsx(gt,{children:i.y}),S.jsx(U$,{minRange:1,label:null,min:A.domain()[0],max:A.domain()[1],onChange:M=>{n([[t.x1,A(M[1])],[t.x2,A(M[0])]],T,A,"drag")},style:{width:"300px"},marks:A.ticks(5).map(M=>({value:M,label:M})),value:[A.invert(t.y2),A.invert(t.y1)]})]})]}):null]})]})}const W4t=Object.freeze(Object.defineProperty({__proto__:null,Scatter:VY,default:VY},Symbol.toStringTag,{value:"Module"}));function HY({parameters:e,setAnswer:t,provenanceState:n,updateState:r=()=>null}){const[i,s]=O.useState(null),[o,a]=O.useState(n?n.all.brush||n.all:{hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]});O.useEffect(()=>{a(n?n.all.brush||n.all:{hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]})},[n]);const[u,l]=O.useState(null);O.useEffect(()=>{Nwt(`./data/${e.dataset}.csv`).then(b=>{l(b)})},[e]);const c=O.useMemo(()=>u?U4t(u):null,[u]),{actions:f,trrack:d}=O.useMemo(()=>{const b=qE.create(),w=b.register("brush",(R,D)=>(R.all={brush:D},R)),E=b.register("brushMove",(R,D)=>(R.all={brush:D},R)),T=b.register("brushResize",(R,D)=>(R.all={brush:D},R)),A=b.register("brushClear",(R,D)=>(R.all={brush:D},R)),I=E3({registry:b,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:w,brushMove:E,brushResize:T,clearBrush:A},trrack:I}},[]),h=O.useCallback((b,w)=>{b==="drag"?d.apply("Move Brush",f.brushMove(w)):b==="handle"&&d.apply("Brush",f.brush(w))},[f,d]),p=O.useMemo(()=>Fm(h,100,{maxWait:100}),[h]),m=O.useCallback((b,w,E,T,A)=>{if(!w||!E)return;const I=w.invert(b[0][0]||o.x1),R=w.invert(b[1][0]||o.x2),D=E.invert(b[1][1]||o.y2),M=E.invert(b[0][1]||o.y1);let $=null;if(T==="clear")$=c;else if(A){const F=new Set(A);$=c.filter(dH(H=>F.has(H[e.ids])))}else e.brushType==="Axis Selection"?$=c.filter(dH(F=>new Date(F[e.x])>=new Date(I)&&new Date(F[e.x])<=new Date(R)&&F[e.y]>=D&&F[e.y]<=M)):$=c.filter(dH(F=>F[e.x]>=I&&F[e.x]<=R&&F[e.y]>=D&&F[e.y]<=M));const U={x1:b[0][0]||(o==null?void 0:o.x1)||0,x2:b[1][0]||(o==null?void 0:o.x2)||0,y1:b[0][1]||(o==null?void 0:o.y1)||0,y2:b[1][1]||(o==null?void 0:o.y2)||0,hasBrush:T!=="clear",ids:T!=="clear"?$==null?void 0:$.array("id"):[]};a(U),T==="drag"||T==="handle"?p(T,U):T==="clear"&&d.apply("Clear Brush",f.clearBrush(U)),s($),r(U),t({status:!0,provenanceGraph:d.graph.backend,answers:{}})},[o,c,e,d,t,p,f]),y=O.useMemo(()=>i?i==null?void 0:i.groupby(e.category).count():c?c==null?void 0:c.groupby(e.category).count():null,[i,c,e.category]),v=O.useCallback(b=>{s(b)},[]);return u?S.jsxs(mu,{gap:"xs",children:[S.jsx(VY,{brushedPoints:o==null?void 0:o.ids,data:u,params:e,brushType:e.brushType,setBrushedSpace:m,brushState:o,setFilteredTable:v}),S.jsx(xY,{data:u,parameters:e,barsTable:y})]}):S.jsx(mh,{})}const G4t=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:HY,default:HY},Symbol.toStringTag,{value:"Module"})),Y4t=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));function gOe({data:e,xScale:t,yScale:n,height:r}){return S.jsx("g",{children:e.map((i,s)=>S.jsx("rect",{x:t(i.name),y:n(i.value),width:t.bandwidth(),height:r-n(i.value),fill:"transparent",stroke:"currentColor"},s))})}const K4t=Object.freeze(Object.defineProperty({__proto__:null,Bars:gOe},Symbol.toStringTag,{value:"Module"}));function Kne({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=O.useMemo(()=>{const o=Fp().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return S.jsxs("g",{children:[S.jsx("path",{d:["M",0,t[0],"h",r,"V",t[1],"h",-r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>S.jsxs("g",{transform:`translate(0,${a})`,children:[S.jsx("line",{x2:`${r}`,stroke:"currentColor"}),S.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-10px)"},children:o},o)]},o))]})}const X4t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisV:Kne},Symbol.toStringTag,{value:"Module"}));function yOe({domain:e=["A","B","C","D","E"],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=O.useMemo(()=>{const o=v3().domain(e).range(t).padding(.2);return i(e.map(a=>({value:a,xOffset:(o(a)||0)+o.bandwidth()/2-5})))},[e,t,i]);return S.jsxs("g",{children:[S.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>S.jsx("g",{transform:`translate(${a}, 10)`,children:S.jsx("circle",{r:2,cx:0,cy:0,children:o},o)},o))]})}const Q4t=Object.freeze(Object.defineProperty({__proto__:null,OrdinalAxisHWithDotMarks:yOe},Symbol.toStringTag,{value:"Module"})),J4t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,width:400,height:400};function Z4t({parameters:e}){const[n,r]=eI(J4t),i=v3().domain(e.data.map(u=>u.name)).range([0,r.boundedWidth]).padding(.2),s=Fp().domain([100,0]).range([0,r.boundedHeight]),o=u=>u.filter((l,c)=>c===0||c===u.length-1),a=u=>u.filter((l,c)=>e.selectedIndices.includes(c));return S.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:400},children:S.jsx("svg",{width:r.width,height:r.height,children:S.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[S.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:S.jsx(yOe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),S.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:S.jsx(Kne,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),S.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:S.jsx(gOe,{data:e.data,xScale:i,yScale:s,height:r.boundedHeight})})]})})})}const e6t=Object.freeze(Object.defineProperty({__proto__:null,default:Z4t},Symbol.toStringTag,{value:"Module"}));function vOe({data:e}){return S.jsx("g",{children:e.map(({bubble:t},n)=>S.jsx("circle",{cx:t.x,cy:t.y,r:t.r,fill:"transparent",stroke:"currentColor"},n))})}const t6t=Object.freeze(Object.defineProperty({__proto__:null,Bubbles:vOe},Symbol.toStringTag,{value:"Module"}));function Xne({positions:e}){return S.jsx("g",{children:e.map((t,n)=>S.jsx("circle",{cx:t.x,cy:t.y,r:2,fill:"black",stroke:"currentColor"},n))})}const n6t=Object.freeze(Object.defineProperty({__proto__:null,DotMarks:Xne},Symbol.toStringTag,{value:"Module"})),r6t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400},i6t=({data:e},t=100,n=100)=>{const i={children:e.map(a=>+a.value).map(a=>({value:a}))},s=eRe().size([t-10,n-10]).padding(1.5),o=v9(i).sum(a=>a.value);return s(o).descendants().filter(a=>!a.children).map((a,u)=>({bubble:a,data:e[u]}))},s6t=(e,t)=>e.filter((n,r)=>t.includes(r)).map(({bubble:n})=>({x:n.x,y:n.y}));function o6t({parameters:e}){const[t,n]=eI(r6t),r=i6t(e,n.width,n.height),i=s6t(r,e.selectedIndices);return S.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:"400px"},children:S.jsx("svg",{width:n.width,height:n.height,children:S.jsxs("g",{transform:`translate(${[n.marginLeft/2,n.marginTop/2].join(",")})`,children:[S.jsx(vOe,{data:r}),S.jsx(Xne,{positions:i})]})})})}const a6t=Object.freeze(Object.defineProperty({__proto__:null,default:o6t},Symbol.toStringTag,{value:"Module"}));function bOe({arcs:e}){return S.jsx("g",{children:e.map((t,n)=>S.jsx("path",{d:t(),fill:"transparent",stroke:"currentColor"},n))})}const u6t=Object.freeze(Object.defineProperty({__proto__:null,Slices:bOe},Symbol.toStringTag,{value:"Module"}));function xOe({positions:e}){return S.jsx("g",{children:e.map((t,n)=>S.jsx("g",{transform:`translate(${t.centroid()})`,children:S.jsx("circle",{r:2,cx:0,cy:0},n)},n))})}const l6t=Object.freeze(Object.defineProperty({__proto__:null,SlicesDotMarks:xOe},Symbol.toStringTag,{value:"Module"})),c6t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:500},f6t=xCt().value(e=>e.value),lR=150;function d6t({parameters:e}){const[t,n]=eI(c6t),r=f6t(e.data),i=r.map(o=>tY().innerRadius(0).outerRadius(lR).startAngle(o.startAngle).endAngle(o.endAngle)),s=r.map(o=>tY().outerRadius(lR+10).innerRadius(lR+10).startAngle(o.startAngle).endAngle(o.endAngle)).filter((o,a)=>e.selectedIndices.includes(a));return S.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:400},children:S.jsx("svg",{width:n.width,height:n.height,children:S.jsxs("g",{transform:`translate(${[n.marginLeft+lR,n.marginTop+lR].join(",")})`,children:[S.jsx(bOe,{arcs:i}),S.jsx(xOe,{positions:s})]})})})}const h6t=Object.freeze(Object.defineProperty({__proto__:null,default:d6t},Symbol.toStringTag,{value:"Module"}));function _Oe({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=O.useMemo(()=>{const o=Fp().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return S.jsxs("g",{children:[S.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>S.jsxs("g",{transform:`translate(${a}, 0)`,children:[S.jsx("line",{y2:`${r}`,stroke:"currentColor"}),S.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:o},o)]},o))]})}const p6t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisH:_Oe},Symbol.toStringTag,{value:"Module"}));function wOe({data:e,barWidth:t,yScale:n}){return S.jsx("g",{children:e.map((r,i)=>S.jsx("rect",{x:t/2,y:n(r[0][1]),width:t,height:n(r[0][0])-n(r[0][1]),fill:"transparent",stroke:"currentColor"},i))})}const m6t=Object.freeze(Object.defineProperty({__proto__:null,StackedBars:wOe},Symbol.toStringTag,{value:"Module"})),g6t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400};function y6t({parameters:e}){const[n,r]=eI(g6t),i=v3().domain(e.data.map(h=>h.name)).range([0,r.boundedWidth]).padding(.2),s=Fp().domain([100,0]).range([0,r.boundedWidth]),o=h=>h.filter((p,m)=>m===0||m===h.length-1),a=h=>h.filter((p,m)=>e.selectedIndices.includes(m)),u=h=>{const p=h.map(w=>+w.value),y=p.reduce((w,E)=>Number(w)+Number(E))/100,v={};p.forEach((w,E)=>{v[String.fromCharCode(E+65)]=w/y});const b=[v];return zCt().keys(e.data.map(w=>w.name))(b)},l=(h,p,m)=>h.filter((v,b)=>p.includes(b)).map(v=>({x:m,y:s(v[0][1])+.5*(s(v[0][0])-s(v[0][1]))})),c=u(e.data),f=Math.min(r.width,r.height)/2-20,d=l(c,e.selectedIndices,f);return S.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:"400"},children:S.jsx("svg",{width:r.width,height:r.height,children:S.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[S.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:S.jsx(_Oe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),S.jsx("g",{transform:"translate(0, 0)",children:S.jsx(Kne,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),S.jsxs("g",{transform:"translate(0, 0)",children:[S.jsx(wOe,{data:c,barWidth:f,yScale:s}),S.jsx(Xne,{positions:d})]})]})})})}const v6t=Object.freeze(Object.defineProperty({__proto__:null,default:y6t},Symbol.toStringTag,{value:"Module"}));function ige({rankings:e}){return S.jsx("div",{style:{fontFamily:"sans-serif"},children:S.jsx("div",{children:e.map((t,n)=>S.jsx("div",{style:{textAlign:"center",marginBottom:1,padding:2,background:`${t===0?"#AEC7E8":"#FF9896"}`},children:t===0?"Group A":"Group B"},n))})})}function b6t({parameters:e,setAnswer:t}){const n=Eh(),[r,i]=O.useState(""),{goToNextStep:s,isNextDisabled:o}=WAe(),a=O.useMemo(()=>Math.floor(Math.random()*2)===0?"r1":"r2",[]),[u]=O.useState(new URLSearchParams(window.location.search)),l=(u.get("admin")||"f")==="t",c=O.useCallback(h=>{i(h),t({status:!0,answers:{[`${n}/leftARP`]:a==="r1"?e.data.r1ARP:e.data.r2ARP,[`${n}/rightARP`]:a==="r2"?e.data.r1ARP:e.data.r2ARP,[`${n}/leftRanking`]:JSON.stringify(a==="r1"?e.data.r1:e.data.r2),[`${n}/rightRanking`]:JSON.stringify(a==="r2"?e.data.r1:e.data.r2),[`${n}/choice`]:h,[`${n}/correctChoice`]:a==="r1"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)?"left":"right"}})},[n,a,e.data,t]),f=O.useCallback(()=>{o||s()},[o,s]);O.useEffect(()=>{const h=bze([["ArrowLeft",()=>c("left")],["ArrowRight",()=>c("right")],["Enter",f]]);return document.body.addEventListener("keydown",h),()=>{document.body.removeEventListener("keydown",h)}},[c,f]);let d=!1;return a==="r1"?(r==="left"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)||r==="right"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP))&&(d=!0):(r==="left"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP)||r==="right"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP))&&(d=!0),S.jsxs("div",{children:[S.jsxs(Gf,{children:[S.jsxs(Gf.Col,{span:2,children:[S.jsx(ige,{rankings:a==="r1"?e.data.r1:e.data.r2}),S.jsx(yn,{fullWidth:!0,disabled:r==="left",onClick:()=>{c("left")},children:r==="left"?S.jsx(qle,{}):"Select this ranking"}),l&&r&&S.jsx("div",{children:a==="r1"?e.data.r1ARP:e.data.r2ARP})]}),S.jsxs(Gf.Col,{span:2,children:[S.jsx(ige,{rankings:a==="r1"?e.data.r2:e.data.r1}),S.jsx(yn,{fullWidth:!0,disabled:r==="right",onClick:()=>{c("right")},children:r==="right"?S.jsx(qle,{}):"Select this ranking"}),l&&r&&S.jsx("div",{children:a==="r1"?e.data.r2ARP:e.data.r1ARP})]})]}),l&&r&&S.jsx("div",{style:{padding:20,textAlign:"center",width:300},children:d?"CORRECT":"INCORRECT"})]})}const x6t=Object.freeze(Object.defineProperty({__proto__:null,default:b6t},Symbol.toStringTag,{value:"Module"})),_6t=O.createContext(null);function el(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,t||[])).next())})}let L3=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}};const T6={decode:function(e,t){return el(this,void 0,void 0,function*(){const n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally(()=>n.close())})},createBuffer:function(e,t){return typeof e[0]=="number"&&(e=[e]),function(n){const r=n[0];if(r.some(i=>i>1||i<-1)){const i=r.length;let s=0;for(let o=0;o<i;o++){const a=Math.abs(r[o]);a>s&&(s=a)}for(const o of n)for(let a=0;a<i;a++)o[a]/=s}}(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:n=>e==null?void 0:e[n],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function EOe(e,t){const n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(const[r,i]of Object.entries(t))if(r==="children")for(const[s,o]of Object.entries(t))typeof o=="string"?n.appendChild(document.createTextNode(o)):n.appendChild(EOe(s,o));else r==="style"?Object.assign(n.style,i):r==="textContent"?n.textContent=i:n.setAttribute(r,i.toString());return n}function sge(e,t,n){const r=EOe(e,t||{});return n==null||n.appendChild(r),r}var w6t=Object.freeze({__proto__:null,createElement:sge,default:sge});const E6t={fetchBlob:function(e,t,n){return el(this,void 0,void 0,function*(){const r=yield fetch(e,n);if(r.status>=400)throw new Error(`Failed to fetch ${e}: ${r.status} (${r.statusText})`);return function(i,s){el(this,void 0,void 0,function*(){if(!i.body||!i.headers)return;const o=i.body.getReader(),a=Number(i.headers.get("Content-Length"))||0;let u=0;const l=f=>el(this,void 0,void 0,function*(){u+=(f==null?void 0:f.length)||0;const d=Math.round(u/a*100);s(d)}),c=()=>el(this,void 0,void 0,function*(){let f;try{f=yield o.read()}catch{return}f.done||(l(f.value),yield c())});c()})}(r.clone(),t),r.blob()})}};class T6t extends L3{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onMediaEvent("canplay",()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)},{once:!0})}onMediaEvent(t,n,r){return this.media.addEventListener(t,n,r),()=>this.media.removeEventListener(t,n,r)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}canPlayType(t){return this.media.canPlayType(t)!==""}setSrc(t,n){const r=this.getSrc();if(t&&r===t)return;this.revokeSrc();const i=n instanceof Blob&&(this.canPlayType(n.type)||!t)?URL.createObjectURL(n):t;try{this.media.src=i}catch{this.media.src=t}}destroy(){this.media.pause(),this.isExternalMedia||(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return el(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=t}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}}let qY=class WY extends L3{constructor(t,n){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.subscriptions=[],this.options=t;const r=this.parentFromOptionsContainer(t.container);this.parent=r;const[i,s]=this.initHtml();r.appendChild(i),this.container=i,this.scrollContainer=s.querySelector(".scroll"),this.wrapper=s.querySelector(".wrapper"),this.canvasWrapper=s.querySelector(".canvases"),this.progressWrapper=s.querySelector(".progress"),this.cursor=s.querySelector(".cursor"),n&&s.appendChild(n),this.initEvents()}parentFromOptionsContainer(t){let n;if(typeof t=="string"?n=document.querySelector(t):t instanceof HTMLElement&&(n=t),!n)throw new Error("Container not found");return n}initEvents(){const t=n=>{const r=this.wrapper.getBoundingClientRect(),i=n.clientX-r.left,s=n.clientY-r.top;return[i/r.width,s/r.height]};if(this.wrapper.addEventListener("click",n=>{const[r,i]=t(n);this.emit("click",r,i)}),this.wrapper.addEventListener("dblclick",n=>{const[r,i]=t(n);this.emit("dblclick",r,i)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:n,scrollWidth:r,clientWidth:i}=this.scrollContainer,s=n/r,o=(n+i)/r;this.emit("scroll",s,o,n,n+i)}),typeof ResizeObserver=="function"){const n=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{n().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=t,this.reRender())}initDrag(){this.subscriptions.push(function(t,n,r,i,s=3,o=0,a=100){if(!t)return()=>{};const u=matchMedia("(pointer: coarse)").matches;let l=()=>{};const c=f=>{if(f.button!==o)return;f.preventDefault(),f.stopPropagation();let d=f.clientX,h=f.clientY,p=!1;const m=Date.now(),y=T=>{if(T.preventDefault(),T.stopPropagation(),u&&Date.now()-m<a)return;const A=T.clientX,I=T.clientY,R=A-d,D=I-h;if(p||Math.abs(R)>s||Math.abs(D)>s){const M=t.getBoundingClientRect(),{left:$,top:U}=M;p||(r==null||r(d-$,h-U),p=!0),n(R,D,A-$,I-U),d=A,h=I}},v=T=>{if(p){const A=T.clientX,I=T.clientY,R=t.getBoundingClientRect(),{left:D,top:M}=R;i==null||i(A-D,I-M)}l()},b=T=>{T.relatedTarget&&T.relatedTarget!==document.documentElement||v(T)},w=T=>{p&&(T.stopPropagation(),T.preventDefault())},E=T=>{p&&T.preventDefault()};document.addEventListener("pointermove",y),document.addEventListener("pointerup",v),document.addEventListener("pointerout",b),document.addEventListener("pointercancel",b),document.addEventListener("touchmove",E,{passive:!1}),document.addEventListener("click",w,{capture:!0}),l=()=>{document.removeEventListener("pointermove",y),document.removeEventListener("pointerup",v),document.removeEventListener("pointerout",b),document.removeEventListener("pointercancel",b),document.removeEventListener("touchmove",E),setTimeout(()=>{document.removeEventListener("click",w,{capture:!0})},10)}};return t.addEventListener("pointerdown",c),()=>{l(),t.removeEventListener("pointerdown",c)}}(this.wrapper,(t,n,r)=>{this.emit("drag",Math.max(0,Math.min(1,r/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))}))}getHeight(t,n){var r;const i=((r=this.audioData)===null||r===void 0?void 0:r.numberOfChannels)||1;if(t==null)return 128;if(!isNaN(Number(t)))return Number(t);if(t==="auto"){const s=this.parent.clientHeight||128;return n!=null&&n.every(o=>!o.overlay)?s/i:s}return 128}initHtml(){const t=document.createElement("div"),n=t.attachShadow({mode:"open"}),r=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return n.innerHTML=`
      <style${r?` nonce="${r}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,n]}setOptions(t){if(this.options.container!==t.container){const n=this.parentFromOptionsContainer(t.container);n.appendChild(this.container),this.parent=n}t.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:n}=this.scrollContainer,r=n*t;this.setScroll(r)}destroy(){var t,n;this.subscriptions.forEach(r=>r()),this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(n=this.unsubscribeOnScroll)===null||n===void 0||n.forEach(r=>r()),this.unsubscribeOnScroll=[]}createDelay(t=10){let n,r;const i=()=>{n&&clearTimeout(n),r&&r()};return this.timeouts.push(i),()=>new Promise((s,o)=>{i(),r=o,n=setTimeout(()=>{n=void 0,r=void 0,s()},t)})}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const n=document.createElement("canvas"),r=n.getContext("2d"),i=n.height*(window.devicePixelRatio||1),s=r.createLinearGradient(0,0,0,i),o=1/(t.length-1);return t.forEach((a,u)=>{const l=u*o;s.addColorStop(l,a)}),s}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(t,n,r,i){const s=t[0],o=t[1]||t[0],a=s.length,{width:u,height:l}=r.canvas,c=l/2,f=this.getPixelRatio(),d=n.barWidth?n.barWidth*f:1,h=n.barGap?n.barGap*f:n.barWidth?d/2:0,p=n.barRadius||0,m=u/(d+h)/a,y=p&&"roundRect"in r?"roundRect":"rect";r.beginPath();let v=0,b=0,w=0;for(let E=0;E<=a;E++){const T=Math.round(E*m);if(T>v){const R=Math.round(b*c*i),D=R+Math.round(w*c*i)||1;let M=c-R;n.barAlign==="top"?M=0:n.barAlign==="bottom"&&(M=l-D),r[y](v*(d+h),M,d,D,p),v=T,b=0,w=0}const A=Math.abs(s[E]||0),I=Math.abs(o[E]||0);A>b&&(b=A),I>w&&(w=I)}r.fill(),r.closePath()}renderLineWaveform(t,n,r,i){const s=o=>{const a=t[o]||t[0],u=a.length,{height:l}=r.canvas,c=l/2,f=r.canvas.width/u;r.moveTo(0,c);let d=0,h=0;for(let p=0;p<=u;p++){const m=Math.round(p*f);if(m>d){const v=c+(Math.round(h*c*i)||1)*(o===0?-1:1);r.lineTo(d,v),d=m,h=0}const y=Math.abs(a[p]||0);y>h&&(h=y)}r.lineTo(d,c)};r.beginPath(),s(0),s(1),r.fill(),r.closePath()}renderWaveform(t,n,r){if(r.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction)return void n.renderFunction(t,r);let i=n.barHeight||1;if(n.normalize){const s=Array.from(t[0]).reduce((o,a)=>Math.max(o,Math.abs(a)),0);i=s?1/s:1}n.barWidth||n.barGap||n.barAlign?this.renderBarWaveform(t,n,r,i):this.renderLineWaveform(t,n,r,i)}renderSingleCanvas(t,n,r,i,s,o,a){const u=this.getPixelRatio(),l=document.createElement("canvas");l.width=Math.round(r*u),l.height=Math.round(i*u),l.style.width=`${r}px`,l.style.height=`${i}px`,l.style.left=`${Math.round(s)}px`,o.appendChild(l);const c=l.getContext("2d");if(this.renderWaveform(t,n,c),l.width>0&&l.height>0){const f=l.cloneNode(),d=f.getContext("2d");d.drawImage(l,0,0),d.globalCompositeOperation="source-in",d.fillStyle=this.convertColorValues(n.progressColor),d.fillRect(0,0,l.width,l.height),a.appendChild(f)}}renderMultiCanvas(t,n,r,i,s,o){const a=this.getPixelRatio(),{clientWidth:u}=this.scrollContainer,l=r/a;let c=Math.min(WY.MAX_CANVAS_WIDTH,u,l),f={};if(c===0)return;if(n.barWidth||n.barGap){const y=n.barWidth||.5,v=y+(n.barGap||y/2);c%v!=0&&(c=Math.floor(c/v)*v)}const d=y=>{if(y<0||y>=h||f[y])return;f[y]=!0;const v=y*c,b=Math.min(l-v,c);if(b<=0)return;const w=t.map(E=>{const T=Math.floor(v/l*E.length),A=Math.floor((v+b)/l*E.length);return E.slice(T,A)});this.renderSingleCanvas(w,n,b,i,v,s,o)},h=Math.ceil(l/c);if(!this.isScrollable){for(let y=0;y<h;y++)d(y);return}const p=this.scrollContainer.scrollLeft/l,m=Math.floor(p*h);if(d(m-1),d(m),d(m+1),h>1){const y=this.on("scroll",()=>{const{scrollLeft:v}=this.scrollContainer,b=Math.floor(v/l*h);Object.keys(f).length>WY.MAX_NODES&&(s.innerHTML="",o.innerHTML="",f={}),d(b-1),d(b),d(b+1)});this.unsubscribeOnScroll.push(y)}}renderChannel(t,n,r,i){var{overlay:s}=n,o=function(c,f){var d={};for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&f.indexOf(h)<0&&(d[h]=c[h]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var p=0;for(h=Object.getOwnPropertySymbols(c);p<h.length;p++)f.indexOf(h[p])<0&&Object.prototype.propertyIsEnumerable.call(c,h[p])&&(d[h[p]]=c[h[p]])}return d}(n,["overlay"]);const a=document.createElement("div"),u=this.getHeight(o.height,o.splitChannels);a.style.height=`${u}px`,s&&i>0&&(a.style.marginTop=`-${u}px`),this.canvasWrapper.style.minHeight=`${u}px`,this.canvasWrapper.appendChild(a);const l=a.cloneNode();this.progressWrapper.appendChild(l),this.renderMultiCanvas(t,o,r,u,a,l)}render(t){return el(this,void 0,void 0,function*(){var n;this.timeouts.forEach(u=>u()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const r=this.getPixelRatio(),i=this.scrollContainer.clientWidth,s=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrollable=s>i;const o=this.options.fillParent&&!this.isScrollable,a=(o?i:s)*r;if(this.wrapper.style.width=o?"100%":`${s}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=t,this.emit("render"),this.options.splitChannels)for(let u=0;u<t.numberOfChannels;u++){const l=Object.assign(Object.assign({},this.options),(n=this.options.splitChannels)===null||n===void 0?void 0:n[u]);this.renderChannel([t.getChannelData(u)],l,a,u)}else{const u=[t.getChannelData(0)];t.numberOfChannels>1&&u.push(t.getChannelData(1)),this.renderChannel(u,this.options,a,0)}Promise.resolve().then(()=>this.emit("rendered"))})}reRender(){if(this.unsubscribeOnScroll.forEach(r=>r()),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:t}=this.scrollContainer,{right:n}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&t!==this.scrollContainer.scrollWidth){const{right:r}=this.progressWrapper.getBoundingClientRect();let i=r-n;i*=2,i=i<0?Math.floor(i):Math.ceil(i),i/=2,this.scrollContainer.scrollLeft+=i}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,n=!1){const{scrollLeft:r,scrollWidth:i,clientWidth:s}=this.scrollContainer,o=t*i,a=r,u=r+s,l=s/2;if(this.isDragging)o+30>u?this.scrollContainer.scrollLeft+=30:o-30<a&&(this.scrollContainer.scrollLeft-=30);else{(o<a||o>u)&&(this.scrollContainer.scrollLeft=o-(this.options.autoCenter?l:0));const c=o-r-l;n&&this.options.autoCenter&&c>0&&(this.scrollContainer.scrollLeft+=Math.min(c,10))}{const c=this.scrollContainer.scrollLeft,f=c/i,d=(c+s)/i;this.emit("scroll",f,d,c,c+s)}}renderProgress(t,n){if(isNaN(t))return;const r=100*t;this.canvasWrapper.style.clipPath=`polygon(${r}% 0, 100% 0, 100% 100%, ${r}% 100%)`,this.progressWrapper.style.width=`${r}%`,this.cursor.style.left=`${r}%`,this.cursor.style.transform=`translateX(-${Math.round(r)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,n)}exportImage(t,n,r){return el(this,void 0,void 0,function*(){const i=this.canvasWrapper.querySelectorAll("canvas");if(!i.length)throw new Error("No waveform data");if(r==="dataURL"){const s=Array.from(i).map(o=>o.toDataURL(t,n));return Promise.resolve(s)}return Promise.all(Array.from(i).map(s=>new Promise((o,a)=>{s.toBlob(u=>{u?o(u):a(new Error("Could not export image"))},t,n)})))})}};qY.MAX_CANVAS_WIDTH=8e3,qY.MAX_NODES=10;class S6t extends L3{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class oge extends L3{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return el(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit("emptied");fetch(t).then(n=>{if(n.status>=400)throw new Error(`Failed to fetch ${t}: ${n.status} (${n.statusText})`);return n.arrayBuffer()}).then(n=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(n)).then(n=>{this.currentSrc===t&&(this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var t;if(!this.paused)return;this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let n=this.playedDuration*this._playbackRate;n>=this.duration&&(n=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,n),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var t;this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return el(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(t){var n,r;const i=t-this.currentTime;(n=this.bufferNode)===null||n===void 0||n.stop(this.audioContext.currentTime+i),(r=this.bufferNode)===null||r===void 0||r.addEventListener("ended",()=>{this.bufferNode=null,this.pause()},{once:!0})}setSinkId(t){return el(this,void 0,void 0,function*(){return this.audioContext.setSinkId(t)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const n=!this.paused;n&&this._pause(),this.playedDuration=t/this._playbackRate,n&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var t,n;return(t=this._duration)!==null&&t!==void 0?t:((n=this.buffer)===null||n===void 0?void 0:n.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const n=this.buffer.numberOfChannels;for(let r=0;r<n;r++)t.push(this.buffer.getChannelData(r));return t}}const C6t={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class oP extends T6t{static create(t){return new oP(t)}constructor(t){const n=t.media||(t.backend==="WebAudio"?new oge:void 0);super({media:n,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},C6t,t),this.timer=new S6t;const r=n?void 0:this.getMediaElement();this.renderer=new qY(this.options,r),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const i=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");const{peaks:s,duration:o}=this.options;(i||s&&o)&&this.load(i,s,o).catch(()=>null)})}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t)}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const t=this.updateProgress();this.emit("timeupdate",t)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",t=>{var n;this.emit("error",(n=this.getMediaElement().error)!==null&&n!==void 0?n:new Error("Media error"))}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(t,n)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,n))}),this.renderer.on("dblclick",(t,n)=>{this.emit("dblclick",t,n)}),this.renderer.on("scroll",(t,n,r,i)=>{const s=this.getDuration();this.emit("scroll",t*s,n*s,r,i)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",t=>{this.emit("dragstart",t)}),this.renderer.on("dragend",t=>{this.emit("dragend",t)}));{let t;this.subscriptions.push(this.renderer.on("drag",n=>{if(!this.options.interact)return;let r;this.renderer.renderProgress(n),clearTimeout(t),this.isPlaying()?r=0:this.options.dragToSeek===!0?r=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(r=this.options.dragToSeek.debounceTime),t=setTimeout(()=>{this.seekTo(n)},r),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach(n=>{this.registerPlugin(n)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(t=>t()),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),t.duration&&!t.peaks&&(this.decodedData=T6.createBuffer(this.exportPeaks(),t.duration)),t.peaks&&t.duration&&(this.decodedData=T6.createBuffer(t.peaks,t.duration)),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t._init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",()=>{this.plugins=this.plugins.filter(n=>n!==t)})),t}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const n=t/this.getDuration();this.renderer.setScrollPercentage(n)}getActivePlugins(){return this.plugins}loadAudio(t,n,r,i){return el(this,void 0,void 0,function*(){var s;if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!n&&!r){const a=this.options.fetchParams||{};window.AbortController&&!a.signal&&(this.abortController=new AbortController,a.signal=(s=this.abortController)===null||s===void 0?void 0:s.signal);const u=c=>this.emit("loading",c);n=yield E6t.fetchBlob(t,u,a);const l=this.options.blobMimeType;l&&(n=new Blob([n],{type:l}))}this.setSrc(t,n);const o=yield new Promise(a=>{const u=i||this.getDuration();u?a(u):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",()=>a(this.getDuration()),{once:!0}))});if(!t&&!n){const a=this.getMediaElement();a instanceof oge&&(a.duration=o)}if(r)this.decodedData=T6.createBuffer(r,o||0);else if(n){const a=yield n.arrayBuffer();this.decodedData=yield T6.decode(a,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(t,n,r){return el(this,void 0,void 0,function*(){try{return yield this.loadAudio(t,void 0,n,r)}catch(i){throw this.emit("error",i),i}})}loadBlob(t,n,r){return el(this,void 0,void 0,function*(){try{return yield this.loadAudio("",t,n,r)}catch(i){throw this.emit("error",i),i}})}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:n=8e3,precision:r=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const i=Math.min(t,this.decodedData.numberOfChannels),s=[];for(let o=0;o<i;o++){const a=this.decodedData.getChannelData(o),u=[],l=a.length/n;for(let c=0;c<n;c++){const f=a.slice(Math.floor(c*l),Math.ceil((c+1)*l));let d=0;for(let h=0;h<f.length;h++){const p=f[h];Math.abs(p)>Math.abs(d)&&(d=p)}u.push(Math.round(d*r)/r)}s.push(u)}return s}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const n=this.getDuration()*t;this.setTime(n)}playPause(){return el(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return el(this,arguments,void 0,function*(t="image/png",n=1,r="dataURL"){return this.renderer.exportImage(t,n,r)})}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach(n=>n.destroy()),this.subscriptions.forEach(n=>n()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}oP.BasePlugin=class extends L3{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}_init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}},oP.dom=w6t;function A6t(e){return oP.create(e)}function I6t(e){const{plugin:t,options:n,creator:r="create"}=e,i=t[r];if(!t)throw new Error("Please pass a valid plugin in plugin list");if(!r)throw new Error("Please pass the creator function name in 'creator' property.");if(typeof i!="function")throw new Error(`"${r}" is not callable on given plugin. Please pass a valid 'creator' in plugins list.`);return i(n)}const age=e=>e.reduce((t,n)=>(t[n[0]]=n[1],t),{}),k6t=(e,t)=>{const n=Object.entries(e),r=Object.entries(t),i=n.filter(([o])=>r.findIndex(([a])=>a===o)===-1),s=r.filter(([o])=>n.findIndex(([a])=>a===o)===-1);return{disabled:age(i),enabled:age(s)}};function uge(e,t){const n={},r=[...t];for(;r.length>=1;){const i=r.shift();!!e[i.key]?n[i.key]=e[i.key]:n[i.key]=I6t(i)}return n}function R6t({container:e,plugins:t=[],onMount:n,...r}){const i=O.useRef(!1),[s,o]=O.useState({}),a=O.useRef([]),[u,l]=O.useState(null);return O.useEffect(()=>{if(!e)return;const c=e;if(i.current)return;i.current=!0;const f=uge(s,t);a.current=Object.keys(f);const d=A6t({container:e,...r,plugins:Object.values(f)});return n==null||n(d),o(f),l(d),()=>{c!==e&&d.destroy()}},[e]),O.useEffect(()=>{if(u){const c=uge(s,t),{disabled:f,enabled:d}=k6t(s,c);Object.keys(f).forEach(h=>{f[h].destroy()}),Object.keys(d).forEach(h=>{a.current.includes(h)||(console.log("register plugin",h,d[h]),u==null||u.registerPlugin(d[h]))}),a.current=Object.keys(d),o(c)}},[t]),[u,s,Object.values(s)]}function TOe({children:e,plugins:t=[],onMount:n,...r}){const i=R6t({plugins:t,onMount:n,...r});return li.createElement(_6t.Provider,{value:i},e)}const SOe=({id:e="waveform",children:t})=>li.createElement("div",{id:e},t);function mH(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,[])).next())})}class COe{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}}let N6t=class extends COe{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}_init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(t=>t())}};class D6t extends COe{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}const P6t=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];class Qne extends N6t{constructor(t){var n,r,i,s,o,a;super(Object.assign(Object.assign({},t),{audioBitsPerSecond:(n=t.audioBitsPerSecond)!==null&&n!==void 0?n:128e3,scrollingWaveform:(r=t.scrollingWaveform)!==null&&r!==void 0&&r,scrollingWaveformWindow:(i=t.scrollingWaveformWindow)!==null&&i!==void 0?i:5,continuousWaveform:(s=t.continuousWaveform)!==null&&s!==void 0&&s,renderRecordedAudio:(o=t.renderRecordedAudio)===null||o===void 0||o,mediaRecorderTimeslice:(a=t.mediaRecorderTimeslice)!==null&&a!==void 0?a:void 0})),this.stream=null,this.mediaRecorder=null,this.dataWindow=null,this.isWaveformPaused=!1,this.lastStartTime=0,this.lastDuration=0,this.duration=0,this.timer=new D6t,this.subscriptions.push(this.timer.on("tick",()=>{const u=performance.now()-this.lastStartTime;this.duration=this.isPaused()?this.duration:this.lastDuration+u,this.emit("record-progress",this.duration)}))}static create(t){return new Qne(t||{})}renderMicStream(t){var n;const r=new AudioContext,i=r.createMediaStreamSource(t),s=r.createAnalyser();i.connect(s),this.options.continuousWaveform&&(s.fftSize=32);const o=s.frequencyBinCount,a=new Float32Array(o);let u=0;this.wavesurfer&&((n=this.originalOptions)!==null&&n!==void 0||(this.originalOptions=Object.assign({},this.wavesurfer.options)),this.wavesurfer.options.interact=!1,this.options.scrollingWaveform&&(this.wavesurfer.options.cursorWidth=0));const l=setInterval(()=>{var c,f,d,h;if(!this.isWaveformPaused){if(s.getFloatTimeDomainData(a),this.options.scrollingWaveform){const p=Math.floor((this.options.scrollingWaveformWindow||0)*r.sampleRate),m=Math.min(p,this.dataWindow?this.dataWindow.length+o:o),y=new Float32Array(p);if(this.dataWindow){const v=Math.max(0,p-this.dataWindow.length);y.set(this.dataWindow.slice(-m+o),v)}y.set(a,p-o),this.dataWindow=y}else if(this.options.continuousWaveform){if(!this.dataWindow){const m=this.options.continuousWaveformDuration?Math.round(100*this.options.continuousWaveformDuration):((f=(c=this.wavesurfer)===null||c===void 0?void 0:c.getWidth())!==null&&f!==void 0?f:0)*window.devicePixelRatio;this.dataWindow=new Float32Array(m)}let p=0;for(let m=0;m<o;m++){const y=Math.abs(a[m]);y>p&&(p=y)}if(u+1>this.dataWindow.length){const m=new Float32Array(2*this.dataWindow.length);m.set(this.dataWindow,0),this.dataWindow=m}this.dataWindow[u]=p,u++}else this.dataWindow=a;if(this.wavesurfer){const p=((h=(d=this.dataWindow)===null||d===void 0?void 0:d.length)!==null&&h!==void 0?h:0)/100;this.wavesurfer.load("",[this.dataWindow],this.options.scrollingWaveform?this.options.scrollingWaveformWindow:p).then(()=>{this.wavesurfer&&this.options.continuousWaveform&&(this.wavesurfer.setTime(this.getDuration()/1e3),this.wavesurfer.options.minPxPerSec||this.wavesurfer.setOptions({minPxPerSec:this.wavesurfer.getWidth()/this.wavesurfer.getDuration()}))}).catch(m=>{console.error("Error rendering real-time recording data:",m)})}}},10);return{onDestroy:()=>{clearInterval(l),i==null||i.disconnect(),r==null||r.close()},onEnd:()=>{this.isWaveformPaused=!0,clearInterval(l),this.stopMic()}}}startMic(t){return mH(this,void 0,void 0,function*(){let n;try{n=yield navigator.mediaDevices.getUserMedia({audio:!(t!=null&&t.deviceId)||{deviceId:t.deviceId}})}catch(s){throw new Error("Error accessing the microphone: "+s.message)}const{onDestroy:r,onEnd:i}=this.renderMicStream(n);return this.subscriptions.push(this.once("destroy",r)),this.subscriptions.push(this.once("record-end",i)),this.stream=n,n})}stopMic(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(t){return mH(this,void 0,void 0,function*(){const n=this.stream||(yield this.startMic(t));this.dataWindow=null;const r=this.mediaRecorder||new MediaRecorder(n,{mimeType:this.options.mimeType||P6t.find(o=>MediaRecorder.isTypeSupported(o)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=r,this.stopRecording();const i=[];r.ondataavailable=o=>{o.data.size>0&&i.push(o.data),this.emit("record-data-available",o.data)};const s=o=>{var a;const u=new Blob(i,{type:r.mimeType});this.emit(o,u),this.options.renderRecordedAudio&&(this.applyOriginalOptionsIfNeeded(),(a=this.wavesurfer)===null||a===void 0||a.load(URL.createObjectURL(u)))};r.onpause=()=>s("record-pause"),r.onstop=()=>s("record-end"),r.start(this.options.mediaRecorderTimeslice),this.lastStartTime=performance.now(),this.lastDuration=0,this.duration=0,this.isWaveformPaused=!1,this.timer.start(),this.emit("record-start")})}getDuration(){return this.duration}isRecording(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="recording"}isPaused(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="paused"}isActive(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)!=="inactive"}stopRecording(){var t;this.isActive()&&((t=this.mediaRecorder)===null||t===void 0||t.stop(),this.timer.stop())}pauseRecording(){var t,n;this.isRecording()&&(this.isWaveformPaused=!0,(t=this.mediaRecorder)===null||t===void 0||t.requestData(),(n=this.mediaRecorder)===null||n===void 0||n.pause(),this.timer.stop(),this.lastDuration=this.duration)}resumeRecording(){var t;this.isPaused()&&(this.isWaveformPaused=!1,(t=this.mediaRecorder)===null||t===void 0||t.resume(),this.timer.start(),this.lastStartTime=performance.now(),this.emit("record-resume"))}static getAvailableAudioDevices(){return mH(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(t=>t.filter(n=>n.kind==="audioinput"))})}destroy(){this.applyOriginalOptionsIfNeeded(),super.destroy(),this.stopRecording(),this.stopMic()}applyOriginalOptionsIfNeeded(){this.wavesurfer&&this.originalOptions&&(this.wavesurfer.setOptions(this.originalOptions),delete this.originalOptions)}}function AOe({width:e=70,height:t=36}){const n=O.useRef(null),r=O.useRef(null),[i,s]=O.useState(!1);O.useEffect(()=>{if(i&&n.current){const a=n.current.registerPlugin(Qne.create({scrollingWaveform:!0,renderRecordedAudio:!1}));r.current=a,navigator.userAgent.includes("Firefox")||a.startRecording(),n.current.setOptions({height:t,waveColor:"#FA5252"})}return()=>{var a,u;i&&n.current&&((a=r.current)==null||a.stopRecording(),(u=r.current)==null||u.destroy(),n.current.destroy())}},[i]);const o=O.useCallback(a=>{n.current=a,s(!0)},[]);return S.jsx(je,{id:"waveformDiv",style:{width:`${e}px`,height:`${t}px`},children:S.jsx(TOe,{onMount:o,plugins:[],container:"#waveformDiv",height:t,children:S.jsx(SOe,{id:"waveform",height:t})})})}function lge({setAnswer:e}){return O.useEffect(()=>{navigator.mediaDevices.getUserMedia({audio:!0}).then(n=>{new MediaRecorder(n).start();const i=new AudioContext,s=i.createMediaStreamSource(n),o=i.createAnalyser();o.minDecibels=-45,s.connect(o);const a=o.frequencyBinCount,u=new Uint8Array(a);let l=!1;const c=()=>{if(!l){o.getByteFrequencyData(u);for(let f=0;f<a;f+=1)u[f]>0&&(l=!0,e({status:!0,provenanceGraph:void 0,answers:{audioTest:!0}}));window.requestAnimationFrame(c)}};window.requestAnimationFrame(c)})},[e]),S.jsx(Gl,{style:{height:"70%",width:"100%"},children:S.jsxs(mu,{children:[S.jsx(gt,{ta:"center",children:"Please allow us to access your microphone. There may be a popup in your browser window asking for access, click accept."}),S.jsx(gt,{ta:"center",children:"Once we can confirm that your microphone is on and we hear you say something, the continue button will become available."}),S.jsx(gt,{ta:"center",style:{fontWeight:700},children:"If you are not comfortable or able to speak English during this study, please return the study."}),S.jsx(Gl,{children:S.jsx(AOe,{height:200,width:400})})]})})}const O6t=Object.freeze(Object.defineProperty({__proto__:null,AudioTest:lge,default:lge},Symbol.toStringTag,{value:"Module"}));function M6t(){return S.jsx("div",{children:"test react file"})}const L6t=Object.freeze(Object.defineProperty({__proto__:null,default:M6t},Symbol.toStringTag,{value:"Module"}));function Jne({state:e,params:t,onStateChange:n}){return S.jsx(HY,{parameters:t,setAnswer:()=>null,provenanceState:e?{all:e}:void 0,updateState:n||(()=>null)})}const $6t=Object.freeze(Object.defineProperty({__proto__:null,default:Jne},Symbol.toStringTag,{value:"Module"}));function F6t(){return S.jsx(Jne,{params:{dataset:"penguin",x:"Body Mass (g)",y:"Flipper Length (mm)",category:"Species",ids:"id",brushType:"Slider Selection"}})}const B6t=Object.freeze(Object.defineProperty({__proto__:null,default:F6t},Symbol.toStringTag,{value:"Module"}));function j6t({parameters:e,setAnswer:t,provenanceState:n}){const[r,i]=O.useState(),{actions:s,trrack:o}=O.useMemo(()=>{const u=qE.create(),l=u.register("brush",(f,d)=>(f.brush=d,f)),c=E3({registry:u,initialState:{brush:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:l},trrack:c}},[]),a=O.useCallback(u=>{i(u),o.apply("Brush",s.brush(u)),t({answers:{},status:!0,provenanceGraph:o.graph.backend})},[s,t,o]);return S.jsx(Jne,{params:e,state:n||r,onStateChange:a})}const U6t=Object.freeze(Object.defineProperty({__proto__:null,default:j6t},Symbol.toStringTag,{value:"Module"}));class z6t extends li.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}render(){return this.state.hasError?S.jsx(gt,{children:this.state.error.toString()}):this.props.children}}const cge=Object.assign({"../public/demo-click-accuracy-test/assets/ClickAccuracyTest.tsx":MIt,"../public/example-brush-interactions/assets/Bar.tsx":FIt,"../public/example-brush-interactions/assets/BrushPlot.tsx":G4t,"../public/example-brush-interactions/assets/Paintbrush.tsx":q4t,"../public/example-brush-interactions/assets/Scatter.tsx":W4t,"../public/example-brush-interactions/assets/XAxisBar.tsx":LIt,"../public/example-brush-interactions/assets/YAxis.tsx":H4t,"../public/example-brush-interactions/assets/YAxisBar.tsx":$It,"../public/example-brush-interactions/assets/types.ts":Y4t,"../public/example-cleveland/assets/BarChart.tsx":e6t,"../public/example-cleveland/assets/BubbleChart.tsx":a6t,"../public/example-cleveland/assets/PieChart.tsx":h6t,"../public/example-cleveland/assets/StackedBarChart.tsx":v6t,"../public/example-cleveland/assets/chartcomponents/Bars.tsx":K4t,"../public/example-cleveland/assets/chartcomponents/Bubbles.tsx":t6t,"../public/example-cleveland/assets/chartcomponents/DotMarks.tsx":n6t,"../public/example-cleveland/assets/chartcomponents/NumericAxisH.tsx":p6t,"../public/example-cleveland/assets/chartcomponents/NumericAxisV.tsx":X4t,"../public/example-cleveland/assets/chartcomponents/OrdinalAxisHWithDotMarks.tsx":Q4t,"../public/example-cleveland/assets/chartcomponents/Slices.tsx":u6t,"../public/example-cleveland/assets/chartcomponents/SlicesDotMarks.tsx":l6t,"../public/example-cleveland/assets/chartcomponents/StackedBars.tsx":m6t,"../public/example-cleveland/assets/hooks/useChartDimensions.tsx":DIt,"../public/example-fairness-jnd/assets/FairnessJND.tsx":x6t,"../public/libraries/mic-check/assets/AudioTest.tsx":O6t,"../public/libraries/test/assets/test.tsx":L6t,"../public/tutorial/assets/BrushPlotWrapper.tsx":$6t,"../public/tutorial/assets/ReactExample.tsx":B6t,"../public/tutorial/assets/_answers/ReactExample.tsx":U6t});function V6t({currentConfig:e,provState:t}){const n=wh(),r=Eh(),i=`../public/${e.path}`,s=i in cge?cge[i].default:null,o=yl(),{updateResponseBlockValidation:a,setreactiveAnswers:u}=Eu(),l=O.useCallback(({status:c,provenanceGraph:f,answers:d})=>{o(a({location:"sidebar",identifier:`${r}_${n}`,status:c,values:d,provenanceGraph:f})),o(u(d))},[r,n,u,o,a]);return S.jsx(O.Suspense,{fallback:S.jsx("div",{children:"Loading..."}),children:s?S.jsx(z6t,{children:S.jsx(s,{parameters:e.parameters,setAnswer:l,provenanceState:t})}):S.jsx(Nb,{path:e.path})})}function H6t({currentConfig:e}){const[t,n]=O.useState(""),[r,i]=O.useState(!0);return O.useEffect(()=>{async function s(){const o=await _ee(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?S.jsx(ll,{text:t}):S.jsx(Nb,{path:e.path})}function dI(e){return e.baseComponent!==void 0}function IOe(){const e=wh(),{setAlertModal:t}=Eu(),n=yl();O.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var fge=Object.prototype.hasOwnProperty;function dge(e,t,n){for(n of e.keys())if(KN(n,t))return n}function KN(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&KN(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=dge(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=dge(t,i),!i)||!KN(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(fge.call(e,n)&&++r&&!fge.call(t,n)||!(n in t)||!KN(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function q6t(e){var t=O.useRef(e),n=O.useRef(0);return KN(e,t.current)||(t.current=e,n.current+=1),O.useMemo(function(){return t.current},[n.current])}function W6t(e,t){return O.useEffect(e,q6t(t))}const U5=(e,t=null)=>{const[n,r]=O.useState("idle"),[i,s]=O.useState(null),[o,a]=O.useState(null),u=O.useRef(null),l=O.useRef(!1);O.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=O.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(s(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(s(null),a(h),r("error")),h});return u.current=d,d},[e]);return W6t(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}};function kOe(e){const t=e.endTime===-1?void 0:e.endTime-e.startTime,n=(e.windowEvents||[]).filter(o=>o!==void 0).filter(([o,a,u])=>a==="visibility");let r=0,i=0;for(;i<n.length-1;){if(n[i][2]==="hidden"){for(let o=i+1;o<n.length;o+=1)if(n[o][2]==="visible"){r+=n[o][0]-n[i][0],i=o;break}}i+=1}return t?t-r:void 0}const G6t="_root_1spq0_1",Y6t="_description_1spq0_9",K6t="_title_1spq0_10",X6t="_closeButton_1spq0_14",Q6t={root:G6t,description:Y6t,title:K6t,closeButton:X6t},aP=e=>{const{title:t,message:n,color:r}=e;NE.show({title:t,message:n,position:"top-center",classNames:Q6t,color:r||"blue",autoClose:r==="red"||r==="yellow"?!1:5e3})},hge=["status","rejectReason","rejectTime","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","cleanedDuration","meta","configHash"],ROe=["participantId","trialId","trialOrder","responseId"];function Zne(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function J6t(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==-1).length/($p(e.sequence).length-1)*100).toFixed(2);return[{participantId:e.participantId,trialId:"participantTags",trialOrder:null,responseId:"participantTags",answer:JSON.stringify(e.participantTags)},...Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=n.components[o],l=dI(u)&&u.baseComponent&&n.baseComponents?vee({},n.baseComponents[u.baseComponent],u):u,c=s.endTime===-1?void 0:s.endTime-s.startTime,f=kOe(s);return Object.entries(s.answer).map(([h,p])=>{var v,b;const m={participantId:e.participantId,trialId:o,trialOrder:a,responseId:h},y=l.response.find(w=>w.id===h);if(t.includes("status")&&(m.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("rejectReason")&&(m.rejectReason=e.rejected?e.rejected.reason:void 0),t.includes("rejectTime")&&(m.rejectTime=e.rejected?new Date(e.rejected.timestamp).toISOString():void 0),t.includes("configHash")&&(m.configHash=e.participantConfigHash),t.includes("percentComplete")&&(m.percentComplete=r),t.includes("description")&&(m.description=l.description),t.includes("instruction")&&(m.instruction=l.instruction),t.includes("responsePrompt")&&(m.responsePrompt=y==null?void 0:y.prompt),t.includes("answer")&&(m.answer=p),t.includes("correctAnswer")){const w=(b=(v=l.correctAnswer)==null?void 0:v.find(E=>E.id===h))==null?void 0:b.answer;m.correctAnswer=typeof w=="object"?JSON.stringify(w):w}return t.includes("responseMin")&&(m.responseMin=(y==null?void 0:y.type)==="numerical"?y.min:void 0),t.includes("responseMax")&&(m.responseMax=(y==null?void 0:y.type)==="numerical"?y.max:void 0),t.includes("startTime")&&(m.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(m.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(m.duration=c),t.includes("cleanedDuration")&&(m.cleanedDuration=f),t.includes("meta")&&(m.meta=JSON.stringify(l.meta,null,2)),m}).flat()}).flat()]}async function Z6t(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...ROe,...e],s=[...new Set(t.map(c=>c.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,l=(await Promise.all(t.map(async c=>await J6t(c,i,o[c.participantConfigHash])))).flat().sort((c,f)=>c!==f?c.participantId.localeCompare(f.participantId):c.trialOrder-f.trialOrder);return{header:a,rows:l}}function eMt({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=O.useState([...hge].filter(p=>p!=="meta")),a=uo(),{value:u,status:l,error:c}=U5(Z6t,[s,r,a.storageEngine,i]),f=O.useCallback(()=>{if(!u)return;const p=[u.header.join(","),...u.rows.map(m=>u.header.map(y=>`"${`${m[y]}`.replace(/"/g,'""')}"`).join(","))].join(`
`);Zne(p,n)},[n,u]),d=O.useCallback(()=>{u&&(window.parent.postMessage({type:"revisitWidget/PYTHON_EXPORT_TIDY",payload:u},"*"),aP({title:"Success",message:"Data sent to python notebook",color:"green"}))},[u]),h=O.useMemo(()=>{if(!u)return"";const p=u.rows.length>5?5:u.rows.length,m=p===1?"":"s";return`This is a preview of the first ${m?p:""} row${m} of the CSV. The full CSV contains ${u.rows.length} row${m}.`},[u]);return S.jsxs(Us,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[S.jsx(nJ,{searchable:!0,nothingFoundMessage:"Property not found",data:[...hge],value:s,onChange:p=>o(p),label:"Included optional columns:",leftSection:S.jsx(kZe,{}),variant:"filled"}),S.jsx(Zf,{h:"md"}),S.jsxs(je,{mih:300,style:{width:"100%",overflow:"scroll"},children:[l==="success"&&u?S.jsxs(En,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[S.jsx(En.Thead,{children:S.jsx(En.Tr,{children:u.header.map(p=>S.jsx(En.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(p)?200:void 0},children:S.jsxs(an,{direction:"row",justify:"space-between",align:"center",children:[p,!ROe.includes(p)&&S.jsx(dx,{onClick:()=>o(s.filter(m=>m!==p)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:S.jsx(VP,{size:16})})]})},p))})}),S.jsx(En.Tbody,{children:u.rows.slice(0,5).map((p,m)=>S.jsx(En.Tr,{children:u.header.map(y=>S.jsx(En.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(y)?"normal":"nowrap"},children:p[y]},`${m}-${y}`))},m))})]}):l==="error"&&c?S.jsx(Py,{variant:"light",children:c.message}):null,S.jsx(sd,{visible:l==="pending"||l==="idle"})]}),S.jsx(Zf,{h:"sm"}),S.jsx(an,{justify:"center",fz:"sm",c:"dimmed",children:S.jsx(gt,{children:h})}),S.jsx(Zf,{h:"md"}),S.jsxs($i,{justify:"right",children:[S.jsx(yn,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),S.jsx(yn,{leftSection:S.jsx(sTe,{}),onClick:f,"data-autofocus":!0,children:"Download"}),i==="__revisit-widget"&&S.jsx(yn,{onClick:d,children:S.jsx(bZe,{})})]})]})}function tMt(){const e=n1(),{storageEngine:t}=uo(),n=mi(w=>w.answers),r=qA(),[i,s]=O.useState(!1);O.useEffect(()=>{if(r){s(!0);return}const w=setInterval(async()=>{await t.verifyCompletion(n)&&(s(!0),clearInterval(w))},1e3)},[]),IOe();const[o,a]=O.useState(),[u,l]=O.useState(""),c=e.studyMetadata.title.replace(" ","_");O.useEffect(()=>{async function w(){if(t){const E=await t.getCurrentParticipantId(),T=await t.getParticipantData();l(E),a(T)}}w()},[t]);const f=O.useCallback(async()=>{Zne(JSON.stringify(o,null,2),`${c}_${u}.json`)},[c,o,u]),d=e.uiConfig.autoDownloadStudy||!1,h=d&&e.uiConfig.autoDownloadTime||-1,[p,m]=O.useState(Math.floor(h/1e3));O.useEffect(()=>{if(i){const w=setInterval(()=>{m(E=>E-1)},1e3);return p<=0?(d&&f(),clearInterval(w),()=>clearInterval(w)):()=>clearInterval(w)}return()=>{}},[d,i,p,f]);const y=jE(),[v,b]=O.useState(!1);return O.useEffect(()=>{(async()=>{if(t){const E=await t.getModes(y);b(E.dataCollectionEnabled)}})()},[t,y]),S.jsx(Gl,{style:{height:"100%"},children:S.jsx(an,{direction:"column",children:i||!v?e.uiConfig.studyEndMsg?S.jsx(ll,{text:e.uiConfig.studyEndMsg}):S.jsx(gt,{size:"xl",display:"block",children:"Thank you for completing the study. You may close this window now."}):S.jsxs(S.Fragment,{children:[S.jsx(gt,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),S.jsx(Zf,{h:"lg"}),S.jsx(Gl,{children:S.jsx(mh,{color:"blue"})})]})})})}function nMt(){return S.jsx(gt,{children:"Thank you for participating. Unfortunately you have didn't answer the training correctly, which means you are not eligible to participate in the study. You may close this window now."})}function rMt(){return S.jsx(gt,{children:"Thank you for participating. Unfortunately, you have not answered the questions within the given time limit. Because of this, you are no longer eligible to participate in the study. You may close this window now."})}const pge={};function GY(e,t){e===void 0&&(e=pge),t===void 0&&(t=pge);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var iMt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),sMt=Object.prototype.hasOwnProperty;function YY(e,t){return sMt.call(e,t)}function KY(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)YY(e,i)&&r.push(i);return r}function Xf(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function XY(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Z_(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function NOe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function QY(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(QY(e[t]))return!0}else if(typeof e=="object"){for(var r=KY(e),i=r.length,s=0;s<i;s++)if(QY(e[r[s]]))return!0}}return!1}function mge(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var DOe=function(e){iMt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,mge(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=mge(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),eo=DOe,oMt=Xf,x2={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=z5(n,this.path);r&&(r=Xf(r));var i=Mw(n,{op:"remove",path:this.from}).removed;return Mw(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=z5(n,this.from);return Mw(n,{op:"add",path:this.path,value:Xf(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:uP(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},aMt={add:function(e,t,n){return XY(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:x2.move,copy:x2.copy,test:x2.test,_get:x2._get};function z5(e,t){if(t=="")return e;var n={op:"_get",path:t};return Mw(e,n),n.value}function Mw(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):V5(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=z5(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=uP(e,t.value),o.test===!1)throw new eo("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new eo("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Xf(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=V5;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=NOe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!XY(h))throw new eo("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);XY(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new eo("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=aMt[t.op].call(t,l,h,e);if(o.test===!1)throw new eo("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=x2[t.op].call(t,l,h,e);if(o.test===!1)throw new eo("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new eo("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function rj(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new eo("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Xf(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=Mw(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function uMt(e,t,n){var r=Mw(e,t);if(r.test===!1)throw new eo("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function V5(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new eo("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(x2[e.op]){if(typeof e.path!="string")throw new eo("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new eo('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new eo("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new eo("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&QY(e.value))throw new eo("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new eo("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new eo("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=POe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new eo("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new eo("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function POe(e,t,n){try{if(!Array.isArray(e))throw new eo("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)rj(Xf(t),Xf(e),n||!0);else{n=n||V5;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof eo)return i;throw i}}function uP(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!uP(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!uP(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const lMt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:eo,_areEquals:uP,applyOperation:Mw,applyPatch:rj,applyReducer:uMt,deepClone:oMt,getValueByPointer:z5,validate:POe,validator:V5},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var ere=new WeakMap,cMt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),fMt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function dMt(e){return ere.get(e)}function hMt(e,t){return e.observers.get(t)}function pMt(e,t){e.observers.delete(t.callback)}function mMt(e,t){t.unobserve()}function gMt(e,t){var n=[],r,i=dMt(e);if(!i)i=new cMt(e),ere.set(e,i);else{var s=hMt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Xf(e),t){r.callback=t,r.next=null;var o=function(){JY(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){JY(r),clearTimeout(r.next),pMt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new fMt(t,r)),r}function JY(e,t){t===void 0&&(t=!1);var n=ere.get(e.object);tre(n.value,e.object,e.patches,"",t),e.patches.length&&rj(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function tre(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=KY(t),o=KY(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(YY(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?tre(c,f,n,r+"/"+Z_(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Z_(l),value:Xf(c)}),n.push({op:"replace",path:r+"/"+Z_(l),value:Xf(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Z_(l),value:Xf(c)}),n.push({op:"remove",path:r+"/"+Z_(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!YY(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Z_(l),value:Xf(t[l])})}}}function yMt(e,t,n){n===void 0&&(n=!1);var r=[];return tre(e,t,r,"",n),r}const vMt=Object.freeze(Object.defineProperty({__proto__:null,compare:yMt,generate:JY,observe:gMt,unobserve:mMt},Symbol.toStringTag,{value:"Module"}));Object.assign({},lMt,vMt,{JsonPatchError:DOe,deepClone:Xf,escapePathComponent:Z_,unescapePathComponent:NOe});var gH,gge;function bMt(){if(gge)return gH;gge=1;var e=/("(?:[^\\"]|\\.)*")|[:,]/g;return gH=function(n,r){var i,s,o;return r=r||{},i=JSON.stringify([1],void 0,r.indent===void 0?2:r.indent).slice(2,-3),s=i===""?1/0:r.maxLength===void 0?80:r.maxLength,o=r.replacer,function a(u,l,c){var f,d,h,p,m,y,v,b,w,E,T,A;if(u&&typeof u.toJSON=="function"&&(u=u.toJSON()),T=JSON.stringify(u,o),T===void 0)return T;if(v=s-l.length-c,T.length<=v&&(w=T.replace(e,function(I,R){return R||I+" "}),w.length<=v))return w;if(o!=null&&(u=JSON.parse(T),o=void 0),typeof u=="object"&&u!==null){if(b=l+i,h=[],d=0,Array.isArray(u))for(E="[",f="]",v=u.length;d<v;d++)h.push(a(u[d],b,d===v-1?0:1)||"null");else for(E="{",f="}",y=Object.keys(u),v=y.length;d<v;d++)p=y[d],m=JSON.stringify(p)+": ",A=a(u[p],b,m.length+(d===v-1?0:1)),A!==void 0&&h.push(m+A);if(h.length>0)return[E,i+h.join(`,
`+b),f].join(`
`+l)}return T}(n,"",0)},gH}var xMt=bMt();const yH=hh(xMt);function cf(e,t,n){return e.fields=t||[],e.fname=n,e}function oo(e){return e==null?null:e.fname}function sl(e){return e==null?null:e.fields}function OOe(e){return e.length===1?_Mt(e[0]):wMt(e)}const _Mt=e=>function(t){return t[e]},wMt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function ut(e){throw Error(e)}function lg(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||ut("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&ut("Access path missing closing bracket: "+e),r&&ut("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function ah(e,t,n){const r=lg(e);return e=r.length===1?r[0]:e,cf((n&&n.get||OOe)(r),[e],t||e)}const $3=ah("id"),dl=cf(e=>e,[],"identity"),Gv=cf(()=>0,[],"zero"),hI=cf(()=>1,[],"one"),uh=cf(()=>!0,[],"true"),kv=cf(()=>!1,[],"false");function EMt(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const MOe=0,nre=1,rre=2,LOe=3,$Oe=4;function ire(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:EMt,r=e||MOe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=nre&&n(t||"error","ERROR",arguments),this},warn(){return r>=rre&&n(t||"warn","WARN",arguments),this},info(){return r>=LOe&&n(t||"log","INFO",arguments),this},debug(){return r>=$Oe&&n(t||"log","DEBUG",arguments),this}}}var ct=Array.isArray;function Ht(e){return e===Object(e)}const yge=e=>e!=="__proto__";function pI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=TMt(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;mI(r,s,i[s],o)}return r},{})}function mI(e,t,n,r){if(!yge(t))return;let i,s;if(Ht(n)&&!ct(n)){s=Ht(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?mI(s,i,n[i]):yge(i)&&(s[i]=n[i])}else e[t]=n}function TMt(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Yr(e){return e[e.length-1]}function rl(e){return e==null||e===""?null:+e}const FOe=e=>t=>e*Math.exp(t),BOe=e=>t=>Math.log(e*t),jOe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),UOe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,H5=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function ij(e,t,n,r){const i=n(e[0]),s=n(Yr(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function zOe(e,t){return ij(e,t,rl,dl)}function VOe(e,t){var n=Math.sign(e[0]);return ij(e,t,BOe(n),FOe(n))}function HOe(e,t,n){return ij(e,t,H5(n),H5(1/n))}function qOe(e,t,n){return ij(e,t,jOe(n),UOe(n))}function sj(e,t,n,r,i){const s=r(e[0]),o=r(Yr(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function sre(e,t,n){return sj(e,t,n,rl,dl)}function ore(e,t,n){const r=Math.sign(e[0]);return sj(e,t,n,BOe(r),FOe(r))}function q5(e,t,n,r){return sj(e,t,n,H5(r),H5(1/r))}function are(e,t,n,r){return sj(e,t,n,jOe(r),UOe(r))}function WOe(e){return 1+~~(new Date(e).getMonth()/3)}function GOe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Wt(e){return e!=null?ct(e)?e:[e]:[]}function YOe(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function cr(e){return typeof e=="function"}const SMt="descending";function ure(e,t,n){n=n||{},t=Wt(t)||[];const r=[],i=[],s={},o=n.comparator||CMt;return Wt(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===SMt?-1:1),i.push(a=cr(a)?a:ah(a,null,n)),(sl(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:cf(o(i,r),Object.keys(s))}const oj=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),CMt=(e,t)=>e.length===1?AMt(e[0],t[0]):IMt(e,t,e.length),AMt=(e,t)=>function(n,r){return oj(e(n),e(r))*t},IMt=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=oj(s(r),s(i));return o*t[a]});function hl(e){return cr(e)?e:()=>e}function lre(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function lr(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function K0(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function KOe(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const kMt=Object.prototype.hasOwnProperty;function Jt(e,t){return kMt.call(e,t)}const S6={};function gI(e){let t={},n;function r(s){return Jt(t,s)&&t[s]!==S6}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===S6&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=S6),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==S6&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function XOe(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Yr(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function zt(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),lr(r,n)}function _2(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function Ix(e){return typeof e=="boolean"}function gb(e){return Object.prototype.toString.call(e)==="[object Date]"}function QOe(e){return e&&cr(e[Symbol.iterator])}function yi(e){return typeof e=="number"}function JOe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Gt(e){return typeof e=="string"}function cre(e,t,n){e&&(e=t?Wt(e).map(a=>a.replace(/\\(.)/g,"$1")):Wt(e));const r=e&&e.length,i=n&&n.get||OOe,s=a=>i(t?[a]:lg(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return cf(o,e,"key")}function ZOe(e,t){const n=e[0],r=Yr(e),i=+t;return i?i===1?r:n+i*(r-n):n}const RMt=1e4;function e4e(e){e=+e||RMt;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>Jt(t,o)||Jt(n,o),get:o=>Jt(t,o)?t[o]:Jt(n,o)?s(o,n[o]):void 0,set:(o,a)=>Jt(t,o)?t[o]=a:s(o,a)}}function t4e(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function sN(e,t){let n="";for(;--t>=0;)n+=e;return n}function n4e(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?sN(i,o)+s:r==="center"?sN(i,~~(o/2))+s+sN(i,Math.ceil(o/2)):s+sN(i,o)}function F3(e){return e&&Yr(e)-e[0]||0}function jt(e){return ct(e)?"["+e.map(jt)+"]":Ht(e)||Gt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function fre(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const NMt=e=>yi(e)||gb(e)?e:Date.parse(e);function dre(e,t){return t=t||NMt,e==null||e===""?null:t(e)}function hre(e){return e==null||e===""?null:e+""}function zp(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function r4e(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function Lv(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function DMt(e){return e}function PMt(e){if(e==null)return DMt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function OMt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function MMt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return vge(e,n)})}:vge(e,t)}function vge(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=i4e(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function i4e(e,t){var n=PMt(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&OMt(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function LMt(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var y=p===h?h:p.concat(h);r[y.start=p.start]=i[y.end=h.end]=y}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function $Mt(e){return i4e(e,FMt.apply(this,arguments))}function FMt(e,t,n){var r,i,s;if(arguments.length>1)r=BMt(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:LMt(e,r)}}function BMt(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const xu="year",nf="quarter",ol="month",ua="week",rf="date",tl="day",X0="dayofyear",dd="hours",hd="minutes",lh="seconds",Vp="milliseconds",pre=[xu,nf,ol,ua,rf,tl,X0,dd,hd,lh,Vp],vH=pre.reduce((e,t,n)=>(e[t]=1+n,e),{});function mre(e){const t=Wt(e).slice(),n={};return t.length||ut("Missing time unit."),t.forEach(i=>{Jt(vH,i)?n[i]=1:ut(`Invalid time unit: ${i}.`)}),(n[ua]||n[tl]?1:0)+(n[nf]||n[ol]||n[rf]?1:0)+(n[X0]?1:0)>1&&ut(`Incompatible time units: ${e}`),t.sort((i,s)=>vH[i]-vH[s]),t}const jMt={[xu]:"%Y ",[nf]:"Q%q ",[ol]:"%b ",[rf]:"%d ",[ua]:"W%U ",[tl]:"%a ",[X0]:"%j ",[dd]:"%H:00",[hd]:"00:%M",[lh]:":%S",[Vp]:".%L",[`${xu}-${ol}`]:"%Y-%m ",[`${xu}-${ol}-${rf}`]:"%Y-%m-%d ",[`${dd}-${hd}`]:"%H:%M"};function s4e(e,t){const n=lr({},jMt,t),r=mre(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const iw=new Date;function gre(e){return iw.setFullYear(e),iw.setMonth(0),iw.setDate(1),iw.setHours(0,0,0,0),iw}function o4e(e){return u4e(new Date(e))}function a4e(e){return ZY(new Date(e))}function u4e(e){return jy.count(gre(e.getFullYear())-1,e)}function ZY(e){return QA.count(gre(e.getFullYear())-1,e)}function eK(e){return gre(e).getDay()}function UMt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function l4e(e){return f4e(new Date(e))}function c4e(e){return tK(new Date(e))}function f4e(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return hb.count(t-1,e)}function tK(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return JA.count(t-1,e)}function nK(e){return iw.setTime(Date.UTC(e,0,1)),iw.getUTCDay()}function zMt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function d4e(e,t,n,r,i){const s=t||1,o=Yr(e),a=(v,b,w)=>(w=w||v,VMt(n[w],r[w],v===o&&s,b)),u=new Date,l=zp(e),c=l[xu]?a(xu):hl(2012),f=l[ol]?a(ol):l[nf]?a(nf):Gv,d=l[ua]&&l[tl]?a(tl,1,ua+tl):l[ua]?a(ua,1):l[tl]?a(tl,1):l[rf]?a(rf,1):l[X0]?a(X0,1):hI,h=l[dd]?a(dd):Gv,p=l[hd]?a(hd):Gv,m=l[lh]?a(lh):Gv,y=l[Vp]?a(Vp):Gv;return function(v){u.setTime(+v);const b=c(u);return i(b,f(u),d(u,b),h(u),p(u),m(u),y(u))}}function VMt(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function UC(e,t,n){return t+e*7-(n+6)%7}const HMt={[xu]:e=>e.getFullYear(),[nf]:e=>Math.floor(e.getMonth()/3),[ol]:e=>e.getMonth(),[rf]:e=>e.getDate(),[dd]:e=>e.getHours(),[hd]:e=>e.getMinutes(),[lh]:e=>e.getSeconds(),[Vp]:e=>e.getMilliseconds(),[X0]:e=>u4e(e),[ua]:e=>ZY(e),[ua+tl]:(e,t)=>UC(ZY(e),e.getDay(),eK(t)),[tl]:(e,t)=>UC(1,e.getDay(),eK(t))},qMt={[nf]:e=>3*e,[ua]:(e,t)=>UC(e,0,eK(t))};function h4e(e,t){return d4e(e,t||1,HMt,qMt,UMt)}const WMt={[xu]:e=>e.getUTCFullYear(),[nf]:e=>Math.floor(e.getUTCMonth()/3),[ol]:e=>e.getUTCMonth(),[rf]:e=>e.getUTCDate(),[dd]:e=>e.getUTCHours(),[hd]:e=>e.getUTCMinutes(),[lh]:e=>e.getUTCSeconds(),[Vp]:e=>e.getUTCMilliseconds(),[X0]:e=>f4e(e),[ua]:e=>tK(e),[tl]:(e,t)=>UC(1,e.getUTCDay(),nK(t)),[ua+tl]:(e,t)=>UC(tK(e),e.getUTCDay(),nK(t))},GMt={[nf]:e=>3*e,[ua]:(e,t)=>UC(e,0,nK(t))};function p4e(e,t){return d4e(e,t||1,WMt,GMt,zMt)}const YMt={[xu]:U0,[nf]:zD.every(3),[ol]:zD,[ua]:QA,[rf]:jy,[tl]:jy,[X0]:jy,[dd]:E9,[hd]:_9,[lh]:Iy,[Vp]:TC},KMt={[xu]:z0,[nf]:VD.every(3),[ol]:VD,[ua]:JA,[rf]:hb,[tl]:hb,[X0]:hb,[dd]:T9,[hd]:w9,[lh]:Iy,[Vp]:TC};function yI(e){return YMt[e]}function vI(e){return KMt[e]}function m4e(e,t,n){return e?e.offset(t,n):void 0}function g4e(e,t,n){return m4e(yI(e),t,n)}function y4e(e,t,n){return m4e(vI(e),t,n)}function v4e(e,t,n,r){return e?e.range(t,n,r):void 0}function b4e(e,t,n,r){return v4e(yI(e),t,n,r)}function x4e(e,t,n,r){return v4e(vI(e),t,n,r)}const oN=1e3,aN=oN*60,uN=aN*60,aj=uN*24,XMt=aj*7,bge=aj*30,rK=aj*365,_4e=[xu,ol,rf,dd,hd,lh,Vp],lN=_4e.slice(0,-1),cN=lN.slice(0,-1),fN=cN.slice(0,-1),QMt=fN.slice(0,-1),JMt=[xu,ua],xge=[xu,ol],w4e=[xu],cR=[[lN,1,oN],[lN,5,5*oN],[lN,15,15*oN],[lN,30,30*oN],[cN,1,aN],[cN,5,5*aN],[cN,15,15*aN],[cN,30,30*aN],[fN,1,uN],[fN,3,3*uN],[fN,6,6*uN],[fN,12,12*uN],[QMt,1,aj],[JMt,1,XMt],[xge,1,bge],[xge,3,3*bge],[w4e,1,rK]];function E4e(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(F3(t))/n;let i=WA(a=>a[2]).right(cR,r),s,o;return i===cR.length?(s=w4e,o=Pb(t[0]/rK,t[1]/rK,n)):i?(i=cR[r/cR[i-1][2]<cR[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=_4e,o=Math.max(Pb(t[0],t[1],n),1)),{units:s,step:o}}function dN(e){const t={};return n=>t[n]||(t[n]=e(n))}function ZMt(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=eLt(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function eLt(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function T4e(e){const t=dN(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=Qw(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return ZMt(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=Qw(o??",f");const a=Pb(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=ake(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=uke(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=oke(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let iK;S4e();function S4e(){return iK=T4e({format:YA,formatPrefix:jee})}function C4e(e){return T4e(ske(e))}function W5(e){return arguments.length?iK=C4e(e):iK}function _ge(e,t,n){n=n||{},Ht(n)||ut(`Invalid time multi-format specifier: ${n}`);const r=t(lh),i=t(hd),s=t(dd),o=t(rf),a=t(ua),u=t(ol),l=t(nf),c=t(xu),f=e(n[Vp]||".%L"),d=e(n[lh]||":%S"),h=e(n[hd]||"%I:%M"),p=e(n[dd]||"%I %p"),m=e(n[rf]||n[tl]||"%a %d"),y=e(n[ua]||"%b %d"),v=e(n[ol]||"%B"),b=e(n[nf]||"%B"),w=e(n[xu]||"%Y");return E=>(r(E)<E?f:i(E)<E?d:s(E)<E?h:o(E)<E?p:u(E)<E?a(E)<E?m:y:c(E)<E?l(E)<E?v:b:w)(E)}function A4e(e){const t=dN(e.format),n=dN(e.utcFormat);return{timeFormat:r=>Gt(r)?t(r):_ge(t,yI,r),utcFormat:r=>Gt(r)?n(r):_ge(n,vI,r),timeParse:dN(e.parse),utcParse:dN(e.utcParse)}}let sK;I4e();function I4e(){return sK=A4e({format:Zee,parse:_Re,utcFormat:S9,utcParse:wRe})}function k4e(e){return A4e(gRe(e))}function lP(e){return arguments.length?sK=k4e(e):sK}const oK=(e,t)=>lr({},e,t);function R4e(e,t){const n=e?C4e(e):W5(),r=t?k4e(t):lP();return oK(n,r)}function yre(e,t){const n=arguments.length;return n&&n!==2&&ut("defaultLocale expects either zero or two arguments."),n?oK(W5(e),lP(t)):oK(W5(),lP())}function tLt(){return S4e(),I4e(),yre()}const nLt=/^(data:|([A-Za-z]+:)?\/\/)/,rLt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,iLt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,wge="file://";function sLt(e,t){return n=>({options:n||{},sanitize:aLt,load:oLt,fileAccess:!1,file:uLt(t),http:cLt(e)})}async function oLt(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function aLt(e,t){t=lr({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=rLt.test(e.replace(iLt,""));(e==null||typeof e!="string"||!a)&&ut("Sanitize failure, invalid URI: "+jt(e));const u=nLt.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(wge))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(wge.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function uLt(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):lLt}async function lLt(){ut("No file system access.")}function cLt(e){return e?async function(t,n){const r=lr({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?cr(s[i])?s[i]():s.text():ut(s.status+""+s.statusText)}:fLt}async function fLt(){ut("No HTTP fetch method available.")}const dLt=e=>e!=null&&e===e,hLt=e=>e==="true"||e==="false"||e===!0||e===!1,pLt=e=>!Number.isNaN(Date.parse(e)),N4e=e=>!Number.isNaN(+e)&&!(e instanceof Date),mLt=e=>N4e(e)&&Number.isInteger(+e),aK={boolean:fre,integer:rl,number:rl,date:dre,string:hre,unknown:dl},C6=[hLt,mLt,N4e,pLt],gLt=["boolean","integer","number","date"];function D4e(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=C6.length,i=C6.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&dLt(u)&&!C6[a](u)&&(i[a]=0,++o,o===C6.length))return"string";return gLt[i.reduce((s,o)=>s===0?o:s,0)-1]}function P4e(e,t){return t.reduce((n,r)=>(n[r]=D4e(e,r),n),{})}function Ege(e){const t=function(n,r){const i={delimiter:e};return vre(n,r?lr(r,i):i)};return t.responseType="text",t}function vre(e,t){return t.header&&(e=t.header.map(jt).join(t.delimiter)+`
`+e),nke(t.delimiter).parse(e+"")}vre.responseType="text";function yLt(e){return typeof Buffer=="function"&&cr(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function bre(e,t){const n=t&&t.property?ah(t.property):dl;return Ht(e)&&!yLt(e)?vLt(n(e),t):n(JSON.parse(e))}bre.responseType="json";function vLt(e,t){return!ct(e)&&QOe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const bLt={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function O4e(e,t){let n,r,i,s;return e=bre(e,t),t&&t.feature?(n=MMt,i=t.feature):t&&t.mesh?(n=$Mt,i=t.mesh,s=bLt[t.filter]):ut("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):ut("Invalid TopoJSON object: "+i),r&&r.features||[r]}O4e.responseType="json";const o$={dsv:vre,csv:Ege(","),tsv:Ege("	"),json:bre,topojson:O4e};function xre(e,t){return arguments.length>1?(o$[e]=t,this):Jt(o$,e)?o$[e]:null}function M4e(e){const t=xre(e);return t&&t.responseType||"text"}function L4e(e,t,n,r){t=t||{};const i=xre(t.type||"json");return i||ut("Unknown data format type: "+t.type),e=i(e,t),t.parse&&xLt(e,t.parse,n,r),Jt(e,"columns")&&delete e.columns,e}function xLt(e,t,n,r){if(!e.length)return;const i=lP();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=P4e(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,y;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),y=m[1],(y[0]==="'"&&y[y.length-1]==="'"||y[0]==='"'&&y[y.length-1]==='"')&&(y=y.slice(1,-1)),(m[0]==="utc"?r:n)(y);if(!aK[p])throw Error("Illegal format pattern: "+h+":"+p);return aK[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const uj=sLt(typeof fetch<"u"&&fetch,null);function lj(e){const t=e||dl,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function a$(e,t){try{await t(e)}catch(n){e.error(n)}}const $4e=Symbol("vega_id");let _Lt=1;function cj(e){return!!(e&&bn(e))}function bn(e){return e[$4e]}function F4e(e,t){return e[$4e]=t,e}function Ei(e){const t=e===Object(e)?e:{data:e};return bn(t)?t:F4e(t,_Lt++)}function _re(e){return fj(e,Ei({}))}function fj(e,t){for(const n in e)t[n]=e[n];return t}function B4e(e,t){return F4e(t,bn(e))}function GE(e,t){return e?t?(n,r)=>e(n,r)||bn(t(n))-bn(t(r)):(n,r)=>e(n,r)||bn(n)-bn(r):null}function j4e(e){return e&&e.constructor===YE}function YE(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:YE,insert(a){const u=Wt(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=cr(a)?r:t,l=Wt(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:hl(l)};return cr(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return cr(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,y;for(f=0,d=u.length;f<d;++f)l[bn(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[bn(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(b=>{p(b)&&(l[bn(b)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],y=bn(m),l[y]?l[y]=1:a.add.push(Ei(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[bn(m)]<0&&a.rem.push(m);function v(b,w,E){E?b[w]=E(b):a.encode=w,o||(c[bn(b)]=b)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,y=l[bn(m)],y>0&&(v(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(b=>{p(b)&&l[bn(b)]>0&&v(b,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(b=>l[bn(b)]>0):u.slice();else for(y in c)a.mod.push(c[y]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const u$="_:mod:_";function dj(){Object.defineProperty(this,u$,{writable:!0,value:{}})}dj.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[u$];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=ct(n)?1+n.length:-1),i},modified(e,t){const n=this[u$];if(arguments.length){if(ct(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[u$]={},this}};let wLt=0;const ELt="pulse",TLt=new dj,SLt=1,CLt=2;function is(e,t,n,r){this.id=++wLt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Tge(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}is.prototype={targets(){return this._targets||(this._targets=lj($3))},set(e){return this.value!==e?(this.value=e,1):0},skip:Tge(SLt),modified:Tge(CLt),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new dj,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof is?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===ELt)Wt(a).forEach(f=>{f instanceof is?f!==this&&(f.targets().add(this),s.push(f)):ut("Pulse parameters must be operator instances.")}),this.source=a;else if(ct(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||TLt,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function ALt(e,t,n,r){let i=1,s;return e instanceof is?s=e:e&&e.prototype instanceof is?s=new e:cr(e)?s=new is(null,e):(i=0,s=new is(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function ILt(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let kLt=0;function hj(e,t,n){this.id=++kLt,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Rv(e,t,n){return new hj(e,t,n)}hj.prototype={_filter:uh,_apply:dl,targets(){return this._targets||(this._targets=lj($3))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Rv(e);return this.targets().add(t),t},apply(e){const t=Rv(null,e);return this.targets().add(t),t},merge(){const e=Rv();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Rv();return this.targets().add(Rv(null,null,lre(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Rv(null,null,()=>n=!0)),t.targets().add(Rv(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=uh,this._targets=null}};function RLt(e,t,n,r){const i=this,s=Rv(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=Wt(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function NLt(e,t){const n=this.locale();return L4e(e,t,n.timeParse,n.utcParse)}function DLt(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function PLt(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:M4e(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function OLt(e,t,n){const r=this,i=r._pending||MLt(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(uh).insert(s.data||[])),i.done(),s}function MLt(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const LLt={skip:!0};function $Lt(e,t,n,r,i){return(e instanceof is?BLt:FLt)(this,e,t,n,r,i),this}function FLt(e,t,n,r,i,s){const o=lr({},s,LLt);let a,u;cr(n)||(n=hl(n)),r===void 0?a=l=>e.touch(n(l)):cr(r)?(u=new is(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;j4e(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function BLt(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new is(null,jLt(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function jLt(e,t){return t=cr(t)?t:hl(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function ULt(e){e.rank=++this._rank}function zLt(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&ut("Cycle detected in dataflow graph.")}const G5={},Ym=1,$v=2,ay=4,VLt=Ym|$v,Sge=Ym|ay,$S=Ym|$v|ay,Cge=8,fR=16,Age=32,Ige=64;function yb(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function bH(e,t){const n=[];return Lv(e,t,r=>n.push(r)),n}function kge(e,t){const n={};return e.visit(t,r=>{n[bn(r)]=1}),r=>n[bn(r)]?null:r}function A6(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}yb.prototype={StopPropagation:G5,ADD:Ym,REM:$v,MOD:ay,ADD_REM:VLt,ADD_MOD:Sge,ALL:$S,REFLOW:Cge,SOURCE:fR,NO_SOURCE:Age,NO_FIELDS:Ige,fork(e){return new yb(this.dataflow).init(this,e)},clone(){const e=this.fork($S);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize($S|fR)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new yb(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&Ige)&&(n.fields=e.fields),t&Ym?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&$v?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&ay?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&Age?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||$S;return t&Ym&&this.add.length||t&$v&&this.rem.length||t&ay&&this.mod.length},reflow(e){if(e)return this.fork($S).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(ay,kge(this,Ym))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return ct(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?ct(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Ym&&(n.addF=A6(n.addF,t)),e&$v&&(n.remF=A6(n.remF,t)),e&ay&&(n.modF=A6(n.modF,t)),e&fR&&(n.srcF=A6(n.srcF,t)),n},materialize(e){e=e||$S;const t=this;return e&Ym&&t.addF&&(t.add=bH(t.add,t.addF),t.addF=null),e&$v&&t.remF&&(t.rem=bH(t.rem,t.remF),t.remF=null),e&ay&&t.modF&&(t.mod=bH(t.mod,t.modF),t.modF=null),e&fR&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&fR)return Lv(n.source,n.srcF,r),n;e&Ym&&Lv(n.add,n.addF,r),e&$v&&Lv(n.rem,n.remF,r),e&ay&&Lv(n.mod,n.modF,r);const i=n.source;if(e&Cge&&i){const s=n.add.length+n.mod.length;s===i.length||(s?Lv(i,kge(n,Sge),r):Lv(i,n.srcF,r))}return n}};function wre(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}zt(wre,yb,{fork(e){const t=new yb(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?ct(e)?e.some(r=>n[r]):n[e]:0},filter(){ut("MultiPulse does not support filtering.")},materialize(){ut("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function HLt(e,t,n){const r=this,i=[];if(r._pulse)return U4e(r);if(r._pending&&await r._pending,t&&await a$(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new yb(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=lj($3);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=G5),u!==G5&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await a$(r,c[f].callback)}return n&&await a$(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function qLt(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function WLt(e,t,n){return this._pulse?U4e(this):(this.evaluate(e,t,n),this)}function GLt(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function U4e(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function YLt(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function KLt(e,t){const n=e.source,r=this._clock;return n&&ct(n)?new wre(this,r,n.map(i=>i.pulse),t):this._input[e.id]||XLt(this._pulse,n&&n.pulse)}function XLt(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==G5&&(e.source=t.source),e)}const Ere={skip:!1,force:!1};function QLt(e,t){const n=t||Ere;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function JLt(e,t,n){const r=n||Ere;return(e.set(t)||r.force)&&this.touch(e,r),this}function ZLt(e,t,n){this.touch(e,n||Ere);const r=new yb(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function e$t(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),z4e(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,t$t(t,0,e)):r=n,r}}}function z4e(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function t$t(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,z4e(e,r,t,n)}function G2(){this.logger(ire()),this.logLevel(nre),this._clock=0,this._rank=0,this._locale=yre();try{this._loader=uj()}catch{}this._touched=lj($3),this._input={},this._pulse=null,this._heap=e$t((e,t)=>e.qrank-t.qrank),this._postrun=[]}function dR(e){return function(){return this._log[e].apply(this,arguments)}}G2.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:dR("error"),warn:dR("warn"),info:dR("info"),debug:dR("debug"),logLevel:dR("level"),cleanThreshold:1e4,add:ALt,connect:ILt,rank:ULt,rerank:zLt,pulse:ZLt,touch:QLt,update:JLt,changeset:YE,ingest:DLt,parse:NLt,preload:OLt,request:PLt,events:RLt,on:$Lt,evaluate:HLt,run:WLt,runAsync:qLt,runAfter:GLt,_enqueue:YLt,_getPulse:KLt};function nt(e,t){is.call(this,e,null,t)}zt(nt,is,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const zC={};function V4e(e){const t=H4e(e);return t&&t.Definition||null}function H4e(e){return e=e&&e.toLowerCase(),Jt(zC,e)?zC[e]:null}function*q4e(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function Tre(e,t,n){const r=Float64Array.from(q4e(e,n));return r.sort(Fy),t.map(i=>sIe(r,i))}function Sre(e,t){return Tre(e,[.25,.5,.75],t)}function Cre(e,t){const n=e.length,r=J1t(e,t),i=Sre(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function W4e(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var ch=Math.random;function n$t(e){ch=e}function G4e(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(q4e(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(ch()*s)];c[l]=a/s}return c.sort(Fy),[pG(c,n/2),pG(c,1-n/2)]}function Y4e(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?r$t(s,t+t/4):s}function r$t(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function i$t(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function s$t(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*ch())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const K4e=Math.sqrt(2*Math.PI),o$t=Math.SQRT2;let hR=NaN;function pj(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(hR===hR)n=hR,hR=NaN;else{do n=ch()*2-1,r=ch()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,hR=r*s}return e+n*t}function Are(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*K4e)}function mj(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function gj(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*o$t*a$t(2*e-1)}function a$t(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function Ire(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>pj(n,r),pdf:s=>Are(s,n,r),cdf:s=>mj(s,n,r),icdf:s=>gj(s,n,r)};return i.mean(e).stdev(t)}function kre(e,t){const n=Ire();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=Cre(e)),i):t},sample(){return e[~~(ch()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function Rre(e,t){return e=e||0,t=t??1,Math.exp(e+pj()*t)}function Nre(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*K4e*e)}function Dre(e,t,n){return mj(Math.log(e),t,n)}function Pre(e,t,n){return Math.exp(gj(e,t,n))}function X4e(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>Rre(n,r),pdf:s=>Nre(s,n,r),cdf:s=>Dre(s,n,r),icdf:s=>Pre(s,n,r)};return i.mean(e).stdev(t)}function Q4e(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=ch();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function Ore(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*ch()}function Mre(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function Lre(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function $re(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function J4e(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>Ore(n,r),pdf:s=>Mre(s,n,r),cdf:s=>Lre(s,n,r),icdf:s=>$re(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function Fre(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function B3(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function yj(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function j3(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function bI(e,t,n,r,i){let s=0,o=0;return j3(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function Bre(e,t,n){let r=0,i=0,s=0,o=0,a=0;j3(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=B3(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:bI(e,t,n,i,l)}}function Z4e(e,t,n){let r=0,i=0,s=0,o=0,a=0;j3(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=B3(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:bI(e,t,n,i,l)}}function e6e(e,t,n){const[r,i,s,o]=yj(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;j3(e,t,n,(b,w)=>{d=r[f++],h=Math.log(w),p=d*w,a+=(w*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,y]=B3(u/o,a/o,l/o,c/o),v=b=>Math.exp(m+y*(b-s));return{coef:[Math.exp(m-y*s),y],predict:v,rSquared:bI(e,t,n,o,v)}}function t6e(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;j3(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=B3(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:bI(e,t,n,a,c)}}function jre(e,t,n){const[r,i,s,o]=yj(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,y;for(h=0;h<a;)p=r[h],m=i[h++],y=p*p,u+=(y-u)/h,l+=(y*p-l)/h,c+=(y*y-c)/h,f+=(p*m-f)/h,d+=(y*m-d)/h;const v=c-u*u,b=u*v-l*l,w=(d*u-f*l)/b,E=(f*v-d*l)/b,T=-w*u,A=I=>(I=I-s,w*I*I+E*I+T+o);return{coef:[T-E*s+w*s*s+o,E-2*w*s,w],predict:A,rSquared:bI(e,t,n,o,A)}}function n6e(e,t,n,r){if(r===0)return Fre(e,t,n);if(r===1)return Bre(e,t,n);if(r===2)return jre(e,t,n);const[i,s,o,a]=yj(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,y;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),y=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);y[h]=m}c.push(y)}c.push(l);const v=l$t(c),b=w=>{w-=o;let E=a+v[0]+v[1]*w+v[2]*w*w;for(d=3;d<f;++d)E+=v[d]*Math.pow(w,d);return E};return{coef:u$t(f,v,-o,a),predict:b,rSquared:bI(e,t,n,a,b)}}function u$t(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function l$t(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const Rge=2,Nge=1e-12;function r6e(e,t,n,r){const[i,s,o,a]=yj(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=Rge;){const p=[0,l-1];for(let y=0;y<u;++y){const v=i[y],b=p[0],w=p[1],E=v-i[b]>i[w]-v?b:w;let T=0,A=0,I=0,R=0,D=0;const M=1/Math.abs(i[E]-v||1);for(let F=b;F<=w;++F){const H=i[F],Q=s[F],J=c$t(Math.abs(v-H)*M)*d[F],ne=H*J;T+=J,A+=ne,I+=Q*J,R+=Q*ne,D+=H*ne}const[$,U]=B3(A/T,I/T,R/T,D/T);c[y]=$+U*v,f[y]=Math.abs(s[y]-c[y]),f$t(i,y+1,p)}if(h===Rge)break;const m=oIe(f);if(Math.abs(m)<Nge)break;for(let y=0,v,b;y<u;++y)v=f[y]/(6*m),d[y]=v>=1?Nge:(b=1-v*v)*b}return d$t(i,c,o,a)}function c$t(e){return(e=1-e*e*e)*e*e}function f$t(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function d$t(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const h$t=.5*Math.PI/180;function vj(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=p$t(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&m$t(f,m,d,h,p)>h$t?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function p$t(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function m$t(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function g$t(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function uK(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:g$t(e)}function i6e(e,t,n){return n||e+(t?"_"+t:"")}const xH=()=>{},y$t={init:xH,add:xH,rem:xH,idx:0},cP={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},U3=Object.keys(cP).filter(e=>e!=="__count__");function v$t(e,t){return(n,r)=>lr({name:e,aggregate_param:r,out:n||e},y$t,t)}[...U3,"__count__"].forEach(e=>{cP[e]=v$t(e,cP[e])});function s6e(e,t,n){return cP[e](n,t)}function o6e(e,t){return e.idx-t.idx}function b$t(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=cP[i]())})};return e.forEach(n),Object.values(t).sort(o6e)}function x$t(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function _$t(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function w$t(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function E$t(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function a6e(e,t){const n=t||dl,r=b$t(e),i=e.slice().sort(o6e);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=x$t,s.prototype.add=_$t,s.prototype.rem=w$t,s.prototype.set=E$t,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function Ure(e){this._key=e?ah(e):bn,this.reset()}const Au=Ure.prototype;Au.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Au.add=function(e){this._add.push(e)};Au.rem=function(e){this._rem.push(e)};Au.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};Au.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",Jt(n,s)||(n[s]=1,++i);return i};Au.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=KOe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Au.argmin=function(e){return this.extent(e)[0]||{}};Au.argmax=function(e){return this.extent(e)[1]||{}};Au.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Au.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Au.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=Sre(this.values(),e),this._get=e),this._q};Au.q1=function(e){return this.quartile(e)[0]};Au.q2=function(e){return this.quartile(e)[1]};Au.q3=function(e){return this.quartile(e)[2]};Au.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=G4e(this.values(),1e3,.05,e),this._get=e),this._ci};Au.ci0=function(e){return this.ci(e)[0]};Au.ci1=function(e){return this.ci(e)[1]};function Kb(e){nt.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Kb.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:U3},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};zt(Kb,nt,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(b){const w=Wt(sl(b)),E=w.length;let T=0,A;for(;T<E;++T)r[A=w[T]]||(r[A]=1,t.push(A))}this._dims=Wt(e.groupby),this._dnames=this._dims.map(b=>{const w=oo(b);return i(b),n.push(w),w}),this.cellkey=e.key?e.key:uK(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,y,v;for(l!==o.length&&ut("Unmatched number of fields and aggregate ops."),v=0;v<l;++v){if(f=s[v],d=o[v],h=a[v]||null,f==null&&d!=="count"&&ut("Null aggregate field specified."),m=oo(f),y=i6e(d,m,u[v]),n.push(y),d==="count"){this._counts.push(y);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(s6e(d,h,y))}return this._measures=this._measures.map(b=>a6e(b,b.field)),Object.create(null)},cellkey:uK(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new Ure),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?B4e(t.tuple,s):Ei(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const T$t=1e-14;function zre(e){nt.call(this,null,e)}zre.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};zt(zre,nt,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(sl(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=W4e(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=rl(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(T$t+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=cf(u,sl(t),e.name||"bin_"+oo(t))}});function u6e(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?t4e(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function Vre(e){nt.call(this,[],e)}Vre.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};zt(Vre,nt,{transform(e,t){const n=t.fork(t.ALL),r=u6e(bn,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(GE(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function l6e(e){is.call(this,null,S$t,e)}zt(l6e,is);function S$t(e){return this.value&&!e.modified()?this.value:ure(e.fields,e.orders)}function Hre(e){nt.call(this,null,e)}Hre.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function C$t(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}zt(Hre,nt,{transform(e,t){const n=f=>d=>{for(var h=C$t(a(d),e.case,s)||[],p,m=0,y=h.length;m<y;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=Ei({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function qre(e){nt.call(this,null,e)}qre.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};zt(qre,nt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=A$t(a,i,s,e.filter||uh)):n.mod=a,n.source=this.value,n.modifies(r)}});function A$t(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(Ei(s)),s={},s[t]=l);return i}const Dge={kde:kre,mixture:Q4e,normal:Ire,lognormal:X4e,uniform:J4e},I$t="distributions",Pge="function",k$t="field";function c6e(e,t){const n=e[Pge];Jt(Dge,n)||ut("Unknown distribution function: "+n);const r=Dge[n]();for(const i in e)i===k$t?r.data((e.from||t()).map(e[i])):i===I$t?r[i](e[i].map(s=>c6e(s,t))):typeof r[i]===Pge&&r[i](e[i]);return r}function Wre(e){nt.call(this,null,e)}const f6e=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],R$t={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:f6e},{name:"weights",type:"number",array:!0}]};Wre.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:f6e.concat(R$t)},{name:"as",type:"string",array:!0,default:["value","density"]}]};zt(Wre,nt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=c6e(e.distribution,N$t(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&ut("Invalid density method: "+o),!e.extent&&!r.data&&ut("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||K0(r.data()),l=vj(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],Ei(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function N$t(e){return()=>e.materialize(e.SOURCE).source}function d6e(e,t){return e?e.map((n,r)=>t[r]||oo(n)):null}function Gre(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const h6e="bin";function Yre(e){nt.call(this,null,e)}Yre.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:h6e}]};const D$t=(e,t)=>F3(K0(e,t))/30;zt(Yre,nt,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=Gre(t.source,e.groupby,dl),i=e.smooth||!1,s=e.field,o=e.step||D$t(n,s),a=GE((p,m)=>s(p)-s(m)),u=e.as||h6e,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of Y4e(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function p6e(e){is.call(this,null,P$t,e),this.modified(!0)}zt(p6e,is);function P$t(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:cf(n=>t(n,e),sl(t),oo(t))}function Kre(e){nt.call(this,[void 0,void 0],e)}Kre.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};zt(Kre,nt,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=rl(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=oo(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function Xre(e,t){is.call(this,e),this.parent=t,this.count=0}zt(Xre,is,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function bj(e){nt.call(this,{},e),this._keys=gI();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}zt(bj,nt,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=Jt(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new Xre(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=bn(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(bn(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=bn(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(bn(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=bn(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function m6e(e){is.call(this,null,O$t,e)}zt(m6e,is);function O$t(e){return this.value&&!e.modified()?this.value:ct(e.name)?Wt(e.name).map(t=>ah(t)):ah(e.name,e.as)}function Qre(e){nt.call(this,gI(),e)}Qre.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};zt(Qre,nt,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=bn(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(bn(f),1)});function c(f){const d=bn(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function Jre(e){nt.call(this,[],e)}Jre.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};zt(Jre,nt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=d6e(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=_re(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function Zre(e){nt.call(this,[],e)}Zre.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};zt(Zre,nt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(oo),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=_re(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function eie(e){nt.call(this,null,e)}eie.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};zt(eie,nt,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function g6e(e){nt.call(this,[],e)}zt(g6e,nt,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=Ei(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const I6={value:"value",median:oIe,mean:ivt,min:hG,max:db},M$t=[];function tie(e){nt.call(this,[],e)}tie.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function L$t(e){var t=e.method||I6.value,n;if(I6[t]==null)ut("Unrecognized imputation method: "+t);else return t===I6.value?(n=e.value!==void 0?e.value:0,()=>n):I6[t]}function $$t(e){const t=e.field;return n=>n?t(n):NaN}zt(tie,nt,{transform(e,t){var n=t.fork(t.ALL),r=L$t(e),i=$$t(e),s=oo(e.field),o=oo(e.key),a=(e.groupby||[]).map(oo),u=F$t(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,y,v,b,w,E,T;for(y=0,w=u.length;y<w;++y)for(d=u[y],p=d.values,h=NaN,b=0;b<f;++b)if(d[b]==null){for(m=u.domain[b],T={_impute:!0},v=0,E=p.length;v<E;++v)T[a[v]]=p[v];T[o]=m,T[s]=Number.isNaN(h)?h=r(d,i):h,l.push(Ei(T))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function F$t(e,t,n,r){var i=v=>v(y),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,y;for(o.forEach((v,b)=>a[v]=b+1),d=0,m=e.length;d<m;++d)y=e[d],p=n(y),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):M$t)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=y;return s.domain=o,s}function nie(e){Kb.call(this,e)}nie.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:U3},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};zt(nie,Kb,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{lr(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function rie(e){nt.call(this,null,e)}rie.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};zt(rie,nt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=Gre(r,e.groupby,e.field),s=(e.groupby||[]).map(oo),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&ut("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=K0(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=kre(h,o)[a],m=e.counts?h.length:1,y=c||K0(h);vj(p,y,f,d).forEach(v=>{const b={};for(let w=0;w<s.length;++w)b[s[w]]=h.dims[w];b[u[0]]=v[0],b[u[1]]=v[1]*m,l.push(Ei(b))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function y6e(e){is.call(this,null,B$t,e)}zt(y6e,is);function B$t(e){return this.value&&!e.modified()?this.value:cre(e.fields,e.flat)}function v6e(e){nt.call(this,[],e),this._pending=null}zt(v6e,nt,{transform(e,t){const n=t.dataflow;return this._pending?_H(this,t,this._pending):j$t(e)?t.StopPropagation:e.values?_H(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=Wt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>_H(this,t,Wt(r.data)))}});function j$t(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function _H(e,t,n){n.forEach(Ei);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function iie(e){nt.call(this,{},e)}iie.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};zt(iie,nt,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&ut('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&ut('The "as" parameter has too few output field names.'),c=c||i.map(oo),f=function(p){for(var m=0,y=0,v,b;m<a;++m)if(b=r.get(n[m](p)),b==null)for(v=0;v<d;++v,++y)p[c[y]]=s;else for(v=0;v<d;++v,++y)p[c[y]]=i[v](b)}):(c||ut("Missing output field names."),f=function(p){for(var m=0,y;m<a;++m)y=r.get(n[m](p)),p[c[m]]=y??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function b6e(e){is.call(this,null,U$t,e)}zt(b6e,is);function U$t(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function x6e(e){is.call(this,null,z$t,e)}zt(x6e,is);function z$t(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function _6e(e){nt.call(this,null,e)}zt(_6e,nt,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function sie(e){Kb.call(this,e)}sie.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:U3,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};zt(sie,Kb,{_transform:Kb.prototype.transform,transform(e,t){return this._transform(V$t(e,t),t)}});function V$t(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=sl(n).concat(sl(r)),o=q$t(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>H$t(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function H$t(e,t,n,r){return cf(i=>t(i)===e?n(i):NaN,r,e+"")}function q$t(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(oj),t?i.slice(0,t):i}function w6e(e){bj.call(this,e)}zt(w6e,bj,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(bn(s),n,t,s);return(e.modified("field")||r&&t.modified(sl(r)))&&ut("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(Ei(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function oie(e){nt.call(this,null,e)}oie.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};zt(oie,nt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=d6e(e.fields,e.as||[]),s=r?(a,u)=>W$t(a,u,r,i):fj;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=bn(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,Ei({}));o[bn(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[bn(a)]))}),n}});function W$t(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function E6e(e){nt.call(this,null,e)}zt(E6e,nt,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function aie(e){nt.call(this,null,e)}aie.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const G$t=1e-14;zt(aie,nt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=Gre(i,e.groupby,e.field),o=(e.groupby||[]).map(oo),a=[],u=e.step||.01,l=e.probs||Hc(u/2,1-G$t,u),c=l.length;return s.forEach(f=>{const d=Tre(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(Ei(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function T6e(e){nt.call(this,null,e)}zt(T6e,nt,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=bn(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=_re(i);r[bn(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[bn(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function uie(e){nt.call(this,[],e),this.count=0}uie.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};zt(uie,nt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[bn(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*ch()),d<o.length&&d>=u&&(f=o[d],s[bn(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=bn(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[bn(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[bn(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[bn(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[bn(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[bn(c)])),this.count=a,this.value=n.source=o,n}});function lie(e){nt.call(this,null,e)}lie.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};zt(lie,nt,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Hc(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,Ei(s)}),n.add=t.add.concat(this.value),n}});function S6e(e){nt.call(this,null,e),this.modified(!0)}zt(S6e,nt,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function cie(e){nt.call(this,null,e)}const C6e=["unit0","unit1"];cie.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:pre,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:C6e}]};zt(cie,nt,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?vI:yI)(s.unit).offset,a=e.as||C6e,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(sl(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let y,v;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=y=v=s(m),r&&(p[l]=v=o(y,c)),y<f&&(f=y),v>d&&(d=v))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:E4e({extent:e.extent||K0(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=mre(r),o=this.value||{},a=(n?p4e:h4e)(s,i);return a.unit=Yr(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function A6e(e){nt.call(this,gI(),e)}zt(A6e,nt,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function I6e(e){nt.call(this,null,e)}zt(I6e,nt,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(GE(e.sort)):t.source).map(e.field))}});function Y$t(e,t,n,r){const i=fP[e](t,n);return{init:i.init||Gv,update:function(s,o){o[r]=i.next(s)}}}const fP={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=fP.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||ut("ntile num must be greater than zero.");const n=fP.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||ut("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=K$t(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function K$t(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const X$t=Object.keys(fP);function k6e(e){const t=Wt(e.ops),n=Wt(e.fields),r=Wt(e.params),i=Wt(e.aggregate_params),s=Wt(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){Wt(sl(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const y=n[m],v=r[m],b=i[m]||null,w=oo(y),E=i6e(p,w,s[m]);if(h(y),o.push(E),Jt(fP,p))a.push(Y$t(p,y,v,E));else{if(y==null&&p!=="count"&&ut("Null aggregate field specified."),p==="count"){c.push(E);return}d=!1;let T=l[w];T||(T=l[w]=[],T.field=y,f.push(T)),T.push(s6e(p,b,E))}}),(c.length||f.length)&&(this.cell=Q$t(f,c,d)),this.inputs=Object.keys(u)}const R6e=k6e.prototype;R6e.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};R6e.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function Q$t(e,t,n){e=e.map(u=>a6e(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new Ure;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function fie(e){nt.call(this,{},e),this._mlen=0,this._mods=[]}fie.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:X$t.concat(U3)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};zt(fie,nt,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=GE(e.sort),i=uK(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new k6e(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)J$t(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=u6e(bn),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function J$t(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?WA(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||hl(-1)};t.init();for(let f=0;f<u;++f)Z$t(c,o,f,u),s&&eFt(c,l),t.update(c,a[f])}function Z$t(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function eFt(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const tFt=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Kb,bin:zre,collect:Vre,compare:l6e,countpattern:Hre,cross:qre,density:Wre,dotbin:Yre,expression:p6e,extent:Kre,facet:bj,field:m6e,filter:Qre,flatten:Jre,fold:Zre,formula:eie,generate:g6e,impute:tie,joinaggregate:nie,kde:rie,key:y6e,load:v6e,lookup:iie,multiextent:b6e,multivalues:x6e,params:_6e,pivot:sie,prefacet:w6e,project:oie,proxy:E6e,quantile:aie,relay:T6e,sample:uie,sequence:lie,sieve:S6e,subflow:Xre,timeunit:cie,tupleindex:A6e,values:I6e,window:fie},Symbol.toStringTag,{value:"Module"}));function vb(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const nFt=()=>typeof Image<"u"?Image:null;function die(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const rFt="identity",VC="linear",h1="log",z3="pow",V3="sqrt",xj="symlog",sE="time",oE="utc",I0="sequential",xI="diverging",HC="quantile",_j="quantize",wj="threshold",hie="ordinal",lK="point",N6e="band",pie="bin-ordinal",ma="continuous",H3="discrete",q3="discretizing",Ch="interpolating",mie="temporal";function iFt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function sFt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function gie(){const e=XA().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=die(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const y=Hc(f).map(v=>m+i*v);return n(d?y.reverse():y)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],y=+f[1],v,b,w;if(!(m!==m||y!==y)&&(y<m&&(w=m,m=y,y=w),!(y<h[0]||m>r[1-d])))return v=Math.max(0,Db(h,m)-1),b=m===y?v:Db(h,y)-1,m-h[v]>s+1e-10&&++v,d&&(w=v,v=p-b,b=p-w),v>b?void 0:t().slice(v,b+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return gie().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function D6e(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return D6e(t())},e}function oFt(){return D6e(gie().paddingInner(1))}var aFt=Array.prototype.map;function uFt(e){return aFt.call(e,rl)}const lFt=Array.prototype.slice;function P6e(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(Db(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=uFt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=lFt.call(r),n):t.slice()},n.tickFormat=function(r,i){return oRe(e[0],Yr(e),r??10,i)},n.copy=function(){return P6e().domain(n.domain()).range(n.range())},n}const Y5=new Map,O6e=Symbol("vega_scale");function M6e(e){return e[O6e]=!0,e}function cFt(e){return e&&e[O6e]===!0}function fFt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?iFt(s):s.invertExtent?sFt(s):void 0),s.type=e,M6e(s)};return r.metadata=zp(Wt(n)),r}function vi(e,t,n){return arguments.length>1?(Y5.set(e,fFt(e,t,n)),this):L6e(e)?Y5.get(e):void 0}vi(rFt,aRe);vi(VC,Fp,ma);vi(h1,lRe,[ma,h1]);vi(z3,Qee,ma);vi(V3,LSt,ma);vi(xj,cRe,ma);vi(sE,ERe,[ma,mie]);vi(oE,Q2t,[ma,mie]);vi(I0,tte,[ma,Ch]);vi(`${I0}-${VC}`,tte,[ma,Ch]);vi(`${I0}-${h1}`,TRe,[ma,Ch,h1]);vi(`${I0}-${z3}`,nte,[ma,Ch]);vi(`${I0}-${V3}`,J2t,[ma,Ch]);vi(`${I0}-${xj}`,SRe,[ma,Ch]);vi(`${xI}-${VC}`,CRe,[ma,Ch]);vi(`${xI}-${h1}`,ARe,[ma,Ch,h1]);vi(`${xI}-${z3}`,rte,[ma,Ch]);vi(`${xI}-${V3}`,Z2t,[ma,Ch]);vi(`${xI}-${xj}`,IRe,[ma,Ch]);vi(HC,fRe,[q3,HC]);vi(_j,dRe,q3);vi(wj,hRe,q3);vi(pie,P6e,[H3,q3]);vi(hie,XA,H3);vi(N6e,gie,H3);vi(lK,oFt,H3);function L6e(e){return Y5.has(e)}function KE(e,t){const n=Y5.get(e);return n&&n.metadata[t]}function yie(e){return KE(e,ma)}function qC(e){return KE(e,H3)}function cK(e){return KE(e,q3)}function $6e(e){return KE(e,h1)}function dFt(e){return KE(e,mie)}function F6e(e){return KE(e,Ch)}function B6e(e){return KE(e,HC)}const hFt=["clamp","base","constant","exponent"];function j6e(e,t){const n=t[0],r=Yr(t)-n;return function(i){return e(n+i*r)}}function Ej(e,t,n){return Ree(vie(t||"rgb",n),e)}function U6e(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function z6e(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?hl(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=vi(s)().domain([t,n]).range([0,1]),hFt.forEach(a=>e[a]?o[a](e[a]()):0),o)}function vie(e,t){const n=kxt[pFt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function pFt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const mFt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},gFt={accent:tCt,category10:eCt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:nCt,observable10:rCt,paired:iCt,pastel1:sCt,pastel2:oCt,set1:aCt,set2:uCt,set3:lCt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function V6e(e){if(ct(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function H6e(e,t){for(const n in e)bie(n,t(e[n]))}const Oge={};H6e(gFt,V6e);H6e(mFt,e=>Ej(V6e(e)));function bie(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(Oge[e]=t,this):Oge[e]}const l$="symbol",yFt="discrete",vFt="gradient",bFt=e=>ct(e)?e.map(t=>String(t)):String(e),xFt=(e,t)=>e[1]-t[1],_Ft=(e,t)=>t[1]-e[1];function xie(e,t,n){let r;return yi(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(F3(e.domain())/n||1)+1))),Ht(t)&&(r=t.step,t=t.interval),Gt(t)&&(t=e.type===sE?yI(t):e.type==oE?vI(t):ut("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function q6e(e,t,n){let r=e.range(),i=r[0],s=Yr(r),o=xFt;if(i>s&&(r=s,s=i,i=r,o=_Ft),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Yr(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function _ie(e,t){return e.bins?q6e(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function W6e(e,t,n,r,i,s){const o=t.type;let a=bFt;if(o===sE||i===sE)a=e.timeFormat(r);else if(o===oE||i===oE)a=e.utcFormat(r);else if($6e(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=G6e(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function G6e(e,t,n){const r=_ie(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const fK={[HC]:"quantiles",[_j]:"thresholds",[wj]:"domain"},Y6e={[HC]:"quantiles",[_j]:"domain"};function K6e(e,t){return e.bins?TFt(e.bins):e.type===h1?G6e(e,t,!0):fK[e.type]?EFt(e[fK[e.type]]()):_ie(e,t)}function wFt(e,t,n){const r=t[Y6e[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function EFt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function TFt(e){const t=e.slice(0,-1);return t.max=Yr(e),t}const SFt=e=>fK[e.type]||e.bins;function X6e(e,t,n,r,i,s,o){const a=Y6e[t.type]&&s!==sE&&s!==oE?wFt(e,t,i):W6e(e,t,n,i,s,o);return r===l$&&SFt(t)?CFt(a):r===yFt?AFt(a):IFt(a)}const CFt=e=>(t,n,r)=>{const i=Mge(r[n+1],Mge(r.max,1/0)),s=Lge(t,e),o=Lge(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},Mge=(e,t)=>e??t,AFt=e=>(t,n)=>n?e(t):null,IFt=e=>t=>e(t),Lge=(e,t)=>Number.isFinite(e)?t(e):null;function kFt(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Yr(t),s=i-r;if(e.type===wj){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function RFt(e,t,n,r){const i=r||t.type;return Gt(n)&&dFt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===sE?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===oE?e.utcFormat("%A, %d %B %Y, %X UTC"):X6e(e,t,5,null,n,r,!0)}function Q6e(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=RFt(e,t,n.format,n.formatType);if(cK(t.type)){const s=K6e(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(qC(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Yr(s))}`}}let J6e=0;function NFt(){J6e=0}const K5="p_";function wie(e){return e&&e.gradient}function Z6e(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?K5:"";return i||(i=e.id="gradient_"+J6e++,r==="radial"?(e.x1=Lm(e.x1,.5),e.y1=Lm(e.y1,.5),e.r1=Lm(e.r1,0),e.x2=Lm(e.x2,.5),e.y2=Lm(e.y2,.5),e.r2=Lm(e.r2,.5),s=K5):(e.x1=Lm(e.x1,0),e.y1=Lm(e.y1,0),e.x2=Lm(e.x2,1),e.y2=Lm(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function Lm(e,t){return e??t}function eMe(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const $ge={basis:{curve:ECt},"basis-closed":{curve:TCt},"basis-open":{curve:SCt},bundle:{curve:CCt,tension:"beta",value:.85},cardinal:{curve:ACt,tension:"tension",value:0},"cardinal-open":{curve:kCt,tension:"tension",value:0},"cardinal-closed":{curve:ICt,tension:"tension",value:0},"catmull-rom":{curve:RCt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:NCt,tension:"alpha",value:.5},"catmull-rom-open":{curve:DCt,tension:"alpha",value:.5},linear:{curve:ite},"linear-closed":{curve:PCt},monotone:{horizontal:MCt,vertical:OCt},natural:{curve:LCt},step:{curve:$Ct},"step-after":{curve:BCt},"step-before":{curve:FCt}};function Eie(e,t,n){var r=Jt($ge,e)&&$ge[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const DFt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},PFt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,OFt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,MFt=/^((\s+,?\s*)|(,\s*))/,LFt=/^[01]/;function WC(e){const t=[];return(e.match(PFt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=DFt[s],a=$Ft(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function $Ft(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?LFt:OFt,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(MFt);u!==null&&(i+=u[0].length)}return r}const Xb=Math.PI/180,FFt=1e-14,sw=Math.PI/2,l0=Math.PI*2,FS=Math.sqrt(3)/2;var wH={},EH={},tMe=[].join;function BFt(e,t,n,r,i,s,o,a,u){const l=tMe.call(arguments);if(wH[l])return wH[l];const c=o*Xb,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const y=d/n,v=f/n,b=-f/r,w=d/r,E=y*a+v*u,T=b*a+w*u,A=y*e+v*t,I=b*e+w*t;let D=1/((A-E)*(A-E)+(I-T)*(I-T))-.25;D<0&&(D=0);let M=Math.sqrt(D);s==i&&(M=-M);const $=.5*(E+A)-M*(I-T),U=.5*(T+I)+M*(A-E),F=Math.atan2(T-U,E-$);let Q=Math.atan2(I-U,A-$)-F;Q<0&&s===1?Q+=l0:Q>0&&s===0&&(Q-=l0);const J=Math.ceil(Math.abs(Q/(sw+.001))),ne=[];for(let Z=0;Z<J;++Z){const ie=F+Z*Q/J,q=F+(Z+1)*Q/J;ne[Z]=[$,U,ie,q,n,r,f,d]}return wH[l]=ne}function jFt(e){const t=tMe.call(e);if(EH[t])return EH[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),y=Math.cos(s),v=Math.sin(s),b=.5*(s-i),w=Math.sin(b*.5),E=8/3*w*w/Math.sin(b),T=n+p-E*m,A=r+m+E*p,I=n+y,R=r+v,D=I+E*v,M=R-E*y;return EH[t]=[c*T+f*A,d*T+h*A,c*D+f*M,d*D+h*M,c*I+f*R,d*I+h*R]}const jd=["l",0,0,0,0,0,0,0];function UFt(e,t,n){const r=jd[0]=e[0];if(r==="a"||r==="A")jd[1]=t*e[1],jd[2]=n*e[2],jd[3]=e[3],jd[4]=e[4],jd[5]=e[5],jd[6]=t*e[6],jd[7]=n*e[7];else if(r==="h"||r==="H")jd[1]=t*e[1];else if(r==="v"||r==="V")jd[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)jd[i]=(i%2==1?t:n)*e[i];return jd}function dP(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,y=0,v=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var b=0,w=t.length;b<w;++b){switch(o=t[b],(i!==1||s!==1)&&(o=UFt(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],y=u,v=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],y=u,v=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":Fge(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":Fge(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=y,l=v,e.closePath();break}a=o}}function Fge(e,t,n,r){const i=BFt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=jFt(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const Bge=.5773502691896257,jge={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,l0)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=FS*n,i=r-n*Bge,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=FS*n,i=r-n*Bge;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=FS*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=FS*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=FS*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=FS*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function nMe(e){return Jt(jge,e)?jge[e]:zFt(e)}var TH={};function zFt(e){if(!Jt(TH,e)){const t=WC(e);TH[e]={draw:function(n,r){dP(n,t,0,0,Math.sqrt(r)/2)}}}return TH[e]}const Tv=.448084975506;function VFt(e){return e.x}function HFt(e){return e.y}function qFt(e){return e.width}function WFt(e){return e.height}function Qg(e){return typeof e=="function"?e:()=>+e}function k6(e,t,n){return Math.max(t,Math.min(e,n))}function rMe(){var e=VFt,t=HFt,n=qFt,r=WFt,i=Qg(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),y=+n.call(this,c),v=+r.call(this,c),b=Math.min(y,v)/2,w=k6(+i.call(this,c),0,b),E=k6(+s.call(this,c),0,b),T=k6(+o.call(this,c),0,b),A=k6(+a.call(this,c),0,b);if(u||(u=h=p9()),w<=0&&E<=0&&T<=0&&A<=0)u.rect(p,m,y,v);else{var I=p+y,R=m+v;u.moveTo(p+w,m),u.lineTo(I-E,m),u.bezierCurveTo(I-Tv*E,m,I,m+Tv*E,I,m+E),u.lineTo(I,R-A),u.bezierCurveTo(I,R-Tv*A,I-Tv*A,R,I-A,R),u.lineTo(p+T,R),u.bezierCurveTo(p+Tv*T,R,p,R-Tv*T,p,R-T),u.lineTo(p,m+w),u.bezierCurveTo(p,m+Tv*w,p+Tv*w,m,p+w,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=Qg(c),l):e},l.y=function(c){return arguments.length?(t=Qg(c),l):t},l.width=function(c){return arguments.length?(n=Qg(c),l):n},l.height=function(c){return arguments.length?(r=Qg(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=Qg(c),s=f!=null?Qg(f):i,a=d!=null?Qg(d):i,o=h!=null?Qg(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function iMe(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,y=f-o;if(m||y){var v=Math.hypot(m,y),b=(m/=v)*u,w=(y/=v)*u,E=Math.atan2(y,m);i.moveTo(o-b,a-w),i.lineTo(f-m*p,d-y*p),i.arc(f,d,p,E-Math.PI,E),i.lineTo(o+b,a+w),i.arc(o,a,u,E,E+Math.PI)}else i.arc(f,d,p,0,l0);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,y;for(i==null&&(i=y=p9()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(y)return i=null,y+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function W3(e,t){return e??t}const G3=e=>e.x||0,Y3=e=>e.y||0,GFt=e=>e.width||0,YFt=e=>e.height||0,KFt=e=>(e.x||0)+(e.width||0),XFt=e=>(e.y||0)+(e.height||0),QFt=e=>e.startAngle||0,JFt=e=>e.endAngle||0,ZFt=e=>e.padAngle||0,e5t=e=>e.innerRadius||0,t5t=e=>e.outerRadius||0,n5t=e=>e.cornerRadius||0,r5t=e=>W3(e.cornerRadiusTopLeft,e.cornerRadius)||0,i5t=e=>W3(e.cornerRadiusTopRight,e.cornerRadius)||0,s5t=e=>W3(e.cornerRadiusBottomRight,e.cornerRadius)||0,o5t=e=>W3(e.cornerRadiusBottomLeft,e.cornerRadius)||0,a5t=e=>W3(e.size,64),u5t=e=>e.size||1,Tj=e=>e.defined!==!1,l5t=e=>nMe(e.shape||"circle"),c5t=tY().startAngle(QFt).endAngle(JFt).padAngle(ZFt).innerRadius(e5t).outerRadius(t5t).cornerRadius(n5t),f5t=ORe().x(G3).y1(Y3).y0(XFt).defined(Tj),d5t=ORe().y(Y3).x1(G3).x0(KFt).defined(Tj),h5t=PRe().x(G3).y(Y3).defined(Tj),p5t=rMe().x(G3).y(Y3).width(GFt).height(YFt).cornerRadius(r5t,i5t,s5t,o5t),m5t=wCt().type(l5t).size(a5t),g5t=iMe().x(G3).y(Y3).defined(Tj).size(u5t);function Tie(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function y5t(e,t){return c5t.context(e)(t)}function v5t(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?d5t:f5t).curve(Eie(r,n.orient,n.tension)).context(e)(t)}function b5t(e,t){const n=t[0],r=n.interpolate||"linear";return h5t.curve(Eie(r,n.orient,n.tension)).context(e)(t)}function _I(e,t,n,r){return p5t.context(e)(t,n,r)}function x5t(e,t){return(t.mark.shape||t.shape).context(e)(t)}function _5t(e,t){return m5t.context(e)(t)}function w5t(e,t){return g5t.context(e)(t)}var sMe=1;function oMe(){sMe=1}function Sie(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+sMe++),o=i.clipping[s]||(i.clipping[s]={id:s});return cr(r)?o.path=r(null):Tie(n)?o.path=_I(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function Go(e){this.clear(),e&&this.union(e)}Go.prototype={clone(){return new Go(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function Sj(e){this.mark=e,this.bounds=this.bounds||new Go}function Cj(e){Sj.call(this,e),this.items=this.items||[]}zt(Cj,Sj);class aMe{constructor(t){this._pending=0,this._loader=t||uj()}pending(){return this._pending}sanitizeURL(t){const n=this;return Uge(n),n._loader.sanitize(t,{context:"href"}).then(r=>(pR(n),r)).catch(()=>(pR(n),null))}loadImage(t){const n=this,r=nFt();return Uge(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=Jt(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>pR(n),o.onerror=()=>pR(n),o.src=s,o}).catch(i=>(pR(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function Uge(e){e._pending+=1}function pR(e){e._pending-=1}function N1(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?E5t(t,r):0))}return e}function E5t(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const T5t=l0-1e-8;let Aj,c$,f$,Aw,dK,d$,hK,pK;const Jv=(e,t)=>Aj.add(e,t),h$=(e,t)=>Jv(c$=e,f$=t),zge=e=>Jv(e,Aj.y1),Vge=e=>Jv(Aj.x1,e),ow=(e,t)=>dK*e+hK*t,aw=(e,t)=>d$*e+pK*t,SH=(e,t)=>Jv(ow(e,t),aw(e,t)),CH=(e,t)=>h$(ow(e,t),aw(e,t));function K3(e,t){return Aj=e,t?(Aw=t*Xb,dK=pK=Math.cos(Aw),d$=Math.sin(Aw),hK=-d$):(dK=pK=1,Aw=d$=hK=0),S5t}const S5t={beginPath(){},closePath(){},moveTo:CH,lineTo:CH,rect(e,t,n,r){Aw?(SH(e+n,t),SH(e+n,t+r),SH(e,t+r),CH(e,t)):(Jv(e+n,t+r),h$(e,t))},quadraticCurveTo(e,t,n,r){const i=ow(e,t),s=aw(e,t),o=ow(n,r),a=aw(n,r);Hge(c$,i,o,zge),Hge(f$,s,a,Vge),h$(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=ow(e,t),a=aw(e,t),u=ow(n,r),l=aw(n,r),c=ow(i,s),f=aw(i,s);qge(c$,o,u,c,zge),qge(f$,a,l,f,Vge),h$(c,f)},arc(e,t,n,r,i,s){if(r+=Aw,i+=Aw,c$=n*Math.cos(i)+e,f$=n*Math.sin(i)+t,Math.abs(i-r)>T5t)Jv(e-n,t-n),Jv(e+n,t+n);else{const o=l=>Jv(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%l0,r<0&&(r+=l0),i=i%l0,i<0&&(i+=l0),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=l0,a=r-r%sw,u=0;u<4&&a>i;++u,a-=sw)o(a);else for(a=r-r%sw+sw,u=0;u<4&&a<i;++u,a=a+sw)o(a)}}};function Hge(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function qge(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>FFt?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(Wge(u,e,t,n,r)),0<l&&l<1&&i(Wge(l,e,t,n,r))}function Wge(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var bb=(bb=vb(1,1))?bb.getContext("2d"):null;const mK=new Go;function Cie(e){return function(t,n){if(!bb)return!0;e(bb,t),mK.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=mK;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(bb.isPointInPath(u,a))return!0;return!1}}function Aie(e,t){return t.contains(e.x||0,e.y||0)}function uMe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(mK.set(n,r,n+i,r+s))}function lMe(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return w2(t,n,r,i,s)}function w2(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,y;for(y=0;y<4;++y){if(y===0&&(h=-l,p=-(s-t)),y===1&&(h=l,p=a-t),y===2&&(h=-c,p=-(o-n)),y===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function GC(e,t){e.globalCompositeOperation=t.blend||"source-over"}function rp(e,t){return e??t}function Gge(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function C5t(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+rp(t.x1,.5)*r,n.y1+rp(t.y1,.5)*i,Math.max(r,i)*rp(t.r1,0),n.x1+rp(t.x2,.5)*r,n.y1+rp(t.y2,.5)*i,Math.max(r,i)*rp(t.r2,.5));else{const o=rp(t.x1,0),a=rp(t.y1,0),u=rp(t.x2,1),l=rp(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=vb(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=Gge(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return Gge(s,t.stops)}function cMe(e,t,n){return wie(n)?C5t(e,n,t.bounds):n}function X5(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=cMe(e,t,t.fill),!0):!1}var A5t=[];function YC(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=cMe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||A5t),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function I5t(e,t){return e.zindex-t.zindex||e.index-t.index}function Iie(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(I5t)}function Hp(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=Iie(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function Q5(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=Iie(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function kie(e){return function(t,n,r){Hp(n,i=>{(!r||r.intersects(i.bounds))&&fMe(e,t,i,i)})}}function k5t(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&fMe(e,t,n.items[0],n.items)}}function fMe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(GC(t,n),n.fill&&X5(t,n,i)&&t.fill(),n.stroke&&YC(t,n,i)&&t.stroke()))}function Ij(e){return e=e||uh,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,Q5(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function X3(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function Rie(e){return Ij(X3(e))}function Lw(e,t){return"translate("+e+","+t+")"}function Nie(e){return"rotate("+e+")"}function R5t(e,t){return"scale("+e+","+t+")"}function dMe(e){return Lw(e.x||0,e.y||0)}function N5t(e){return Lw(e.x||0,e.y||0)+(e.angle?" "+Nie(e.angle):"")}function D5t(e){return Lw(e.x||0,e.y||0)+(e.angle?" "+Nie(e.angle):"")+(e.scaleX||e.scaleY?" "+R5t(e.scaleX||1,e.scaleY||1):"")}function Die(e,t,n){function r(o,a){o("transform",N5t(a)),o("d",t(null,a))}function i(o,a){return t(K3(o,a.angle),a),N1(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=Xb),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:kie(s),pick:Rie(s),isect:n||Cie(s)}}var P5t=Die("arc",y5t);function O5t(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function M5t(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function L5t(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function Pie(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(K3(u),c),N1(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=X3(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:k5t(s),pick:a,isect:Aie,tip:n}}var $5t=Pie("area",v5t,O5t);function F5t(e,t){var n=t.clip;e.save(),cr(n)?(e.beginPath(),n(e),e.clip()):hMe(e,t.group)}function hMe(e,t){e.beginPath(),Tie(t)?_I(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function pMe(e){const t=rp(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function B5t(e,t){e("transform",dMe(t))}function mMe(e,t){const n=pMe(t);e("d",_I(null,t,n,n))}function j5t(e,t){e("class","background"),e("aria-hidden",!0),mMe(e,t)}function U5t(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?mMe(e,t):e("d","")}function z5t(e,t,n){const r=t.clip?Sie(n,t,t):null;e("clip-path",r)}function V5t(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),N1(e,t),e.translate(t.x||0,t.y||0)}function hP(e,t,n,r){const i=pMe(t);e.beginPath(),_I(e,t,(n||0)+i,(r||0)+i)}const H5t=X3(hP),q5t=X3(hP,!1),W5t=X3(hP,!0);function G5t(e,t,n,r){Hp(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(hP(e,i,s,o),GC(e,i),i.fill&&X5(e,i,u)&&e.fill(),i.stroke&&!a&&YC(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&hMe(e,i),n&&n.translate(-s,-o),Hp(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(hP(e,i,s,o),GC(e,i),YC(e,i,u)&&e.stroke())})}function Y5t(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return Q5(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&Tie(u)&&!W5t(e,u,o,a))return e.restore(),null;const y=u.strokeForeground,v=t.interactive!==!1;return v&&y&&u.stroke&&q5t(e,u,o,a)?(e.restore(),u):(l=Q5(u,b=>K5t(b,c,f)?this.pick(b,n,r,c,f):null),!l&&v&&(u.fill||!y&&u.stroke)&&H5t(e,u,o,a)&&(l=u),e.restore(),l||null)})}function K5t(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var X5t={type:"group",tag:"g",nested:!1,attr:B5t,bound:V5t,draw:G5t,pick:Y5t,isect:uMe,content:z5t,background:j5t,foreground:U5t},pP={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function Oie(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function Mie(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function Lie(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function kj(e,t){return e==="center"?t/2:e==="right"?t:0}function Rj(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function Q5t(e,t,n){const r=Oie(t,n),i=Mie(t,r),s=Lie(t,r),o=(t.x||0)-kj(t.align,i),a=(t.y||0)-Rj(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,pP["xmlns:xlink"],"xlink:href"),e("transform",Lw(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function J5t(e,t){const n=t.image,r=Mie(t,n),i=Lie(t,n),s=(t.x||0)-kj(t.align,r),o=(t.y||0)-Rj(t.baseline,i);return e.set(s,o,s+r,o+i)}function Z5t(e,t,n){Hp(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=Oie(r,this);let s=Mie(r,i),o=Lie(r,i);if(s===0||o===0)return;let a=(r.x||0)-kj(r.align,s),u=(r.y||0)-Rj(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(GC(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var e8t={type:"image",tag:"image",nested:!1,attr:Q5t,bound:J5t,draw:Z5t,pick:Ij(),isect:uh,get:Oie,xOffset:kj,yOffset:Rj},t8t=Pie("line",b5t,M5t);function n8t(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",D5t(t)),e("d",t.path)}function p$(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*Xb,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=WC(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),dP(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):dP(e,u,r,i,s,o)}function r8t(e,t){return p$(K3(e,t.angle),t)?e.set(0,0,0,0):N1(e,t,!0)}var i8t={type:"path",tag:"path",nested:!1,attr:n8t,bound:r8t,draw:kie(p$),pick:Rie(p$),isect:Cie(p$)};function s8t(e,t){e("d",_I(null,t))}function o8t(e,t){var n,r;return N1(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function Yge(e,t){e.beginPath(),_I(e,t)}var a8t={type:"rect",tag:"path",nested:!1,attr:s8t,bound:o8t,draw:kie(Yge),pick:Rie(Yge),isect:uMe};function u8t(e,t){e("transform",dMe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function l8t(e,t){var n,r;return N1(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function gMe(e,t,n){var r,i,s,o;return t.stroke&&YC(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function c8t(e,t,n){Hp(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&gMe(e,r,i)&&(GC(e,r),e.stroke())}})}function f8t(e,t,n,r){return e.isPointInStroke?gMe(e,t,1)&&e.isPointInStroke(n,r):!1}var d8t={type:"rule",tag:"line",nested:!1,attr:u8t,bound:l8t,draw:c8t,pick:Ij(f8t),isect:lMe},h8t=Die("shape",x5t),p8t=Die("symbol",_5t,Aie);const Kge=e4e();var td={height:cg,measureWidth:$ie,estimateWidth:J5,width:J5,canvas:yMe};yMe(!0);function yMe(e){td.width=e&&bb?$ie:J5}function J5(e,t){return vMe(Jb(e,t),cg(e))}function vMe(e,t){return~~(.8*e.length*t)}function $ie(e,t){return cg(e)<=0||!(t=Jb(e,t))?0:bMe(t,Nj(e))}function bMe(e,t){const n=`(${t}) ${e}`;let r=Kge.get(n);return r===void 0&&(bb.font=t,r=bb.measureText(e).width,Kge.set(n,r)),r}function cg(e){return e.fontSize!=null?+e.fontSize||0:11}function Qb(e){return e.lineHeight!=null?e.lineHeight:cg(e)+2}function m8t(e){return ct(e)?e.length>1?e:e[0]:e}function Q3(e){return m8t(e.lineBreak&&e.text&&!ct(e.text)?e.text.split(e.lineBreak):e.text)}function Fie(e){const t=Q3(e);return(ct(t)?t.length-1:0)*Qb(e)}function Jb(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?y8t(e,n):n}function g8t(e){if(td.width===$ie){const t=Nj(e);return n=>bMe(n,t)}else if(td.width===J5){const t=cg(e);return n=>vMe(n,t)}else return t=>td.width(e,t)}function y8t(e,t){var n=+e.limit,r=g8t(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function J3(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function Nj(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+cg(e)+"px "+J3(e,t)}function Bie(e){var t=e.baseline,n=cg(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Qb(e):t==="line-bottom"?.29*n-.5*Qb(e):0)}const v8t={left:"start",center:"middle",right:"end"},XN=new Go;function Dj(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-sw,t+=r*Math.cos(i),n+=r*Math.sin(i)),XN.x1=t,XN.y1=n,XN}function b8t(e,t){var n=t.dx||0,r=(t.dy||0)+Bie(t),i=Dj(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",v8t[t.align]||"start"),a?(u=Lw(s,o)+" "+Nie(a),(n||r)&&(u+=" "+Lw(n,r))):u=Lw(s+n,o+r),e("transform",u)}function jie(e,t,n){var r=td.height(t),i=t.align,s=Dj(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+Bie(t)-Math.round(.8*r),c=Q3(t),f;if(ct(c)?(r+=Qb(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,td.width(t,h)),0)):f=td.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*Xb,o,a);else if(n===2)return e.rotatedPoints(t.angle*Xb,o,a);return e}function x8t(e,t,n){Hp(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=Nj(r),e.textAlign=r.align||"left",s=Dj(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*Xb),o=a=0),o+=r.dx||0,a+=(r.dy||0)+Bie(r),c=Q3(r),GC(e,r),ct(c))for(l=Qb(r),u=0;u<c.length;++u)f=Jb(r,c[u]),r.fill&&X5(e,r,i)&&e.fillText(f,o,a),r.stroke&&YC(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=Jb(r,c),r.fill&&X5(e,r,i)&&e.fillText(f,o,a),r.stroke&&YC(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function _8t(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=Dj(t),a=o.x1,u=o.y1,l=jie(XN,t,1),c=-t.angle*Xb,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function w8t(e,t){const n=jie(XN,e,2);return w2(t,n[0],n[1],n[2],n[3])||w2(t,n[0],n[1],n[4],n[5])||w2(t,n[4],n[5],n[6],n[7])||w2(t,n[2],n[3],n[6],n[7])}var E8t={type:"text",tag:"text",nested:!1,attr:b8t,bound:jie,draw:x8t,pick:Ij(_8t),isect:w8t},T8t=Pie("trail",w5t,L5t),pd={arc:P5t,area:$5t,group:X5t,image:e8t,line:t8t,path:i8t,rect:a8t,rule:d8t,shape:h8t,symbol:p8t,text:E8t,trail:T8t};function gK(e,t,n){var r=pd[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Go),e,n)}var Xge={mark:null};function xMe(e,t,n){var r=pd[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(Xge.mark=e,l=Xge),c=gK(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Go,o)for(a=0,u=s.length;a<u;++a)t.union(gK(s[a],i,n));return e.bounds=t}const S8t=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function _Me(e,t){return JSON.stringify(e,S8t,t)}function wMe(e){const t=typeof e=="string"?JSON.parse(e):e;return EMe(t)}function EMe(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&EMe(n[i]);return t&&xMe(e),e}class TMe{constructor(t){arguments.length?this.root=wMe(t):(this.root=Qge({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Cj(this.root)])}toJSON(t){return _Me(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=Qge(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function Qge(e,t){const n={bounds:new Go,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Zv(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function Uie(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function oa(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=Zv(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function Kd(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function SMe(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function Pj(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function C8t(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=pd[i.marktype]).tip){for(o=Pj(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let zie=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||uj(),this._tooltip=n||A8t}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=Zv(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=C8t(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function A8t(e,t,n,r){e.element().setAttribute("title",r||"")}class Z3{constructor(t){this._el=null,this._bgcolor=null,this._loader=new aMe(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const I8t="keydown",k8t="keypress",R8t="keyup",CMe="dragenter",m$="dragleave",AMe="dragover",yK="pointerdown",N8t="pointerup",Z5="pointermove",g$="pointerout",IMe="pointerover",vK="mousedown",D8t="mouseup",kMe="mousemove",e8="mouseout",RMe="mouseover",t8="click",P8t="dblclick",O8t="wheel",NMe="mousewheel",n8="touchstart",r8="touchmove",i8="touchend",M8t=[I8t,k8t,R8t,CMe,m$,AMe,yK,N8t,Z5,g$,IMe,vK,D8t,kMe,e8,RMe,t8,P8t,O8t,NMe,n8,r8,i8],bK=Z5,QN=e8,xK=t8;class eO extends zie{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=M8t,this.pointermove=Zge([Z5,kMe],[IMe,RMe],[g$,e8]),this.dragover=Zge([AMe],[CMe],[m$]),this.pointerout=eye([g$,e8]),this.dragleave=eye([m$])}initialize(t,n,r){return this._canvas=t&&Uie(t,"canvas"),[t8,vK,yK,Z5,g$,m$].forEach(i=>Jge(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(NMe,t)}pointerdown(t){this._down=this._active,this.fire(yK,t)}mousedown(t){this._down=this._active,this.fire(vK,t)}click(t){this._down===this._active&&(this.fire(t8,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(n8,t,!0)}touchmove(t){this.fire(r8,t,!0)}touchend(t){this.fire(i8,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===xK&&i&&i.href?this.handleHref(n,i,i.href):(t===bK||t===QN)&&this.handleTooltip(n,i,t!==QN),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(Jge(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=Pj(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return pd[t.marktype].pick.call(this,o,t,n,r,i,s)}}const L8t=e=>e===n8||e===r8||e===i8?[n8,r8,i8]:[e];function Jge(e,t){L8t(t).forEach(n=>$8t(e,n))}function $8t(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function hN(e,t,n){t.forEach(r=>e.fire(r,n))}function Zge(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?hN(this,e,r):((!i||!i.exit)&&hN(this,n,r),this._active=s,hN(this,t,r),hN(this,e,r))}}function eye(e){return function(t){hN(this,e,t),this._active=null}}function F8t(){return typeof window<"u"&&window.devicePixelRatio||1}function B8t(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?F8t():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class s8 extends Z3{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Go,this._tempb=new Go}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:vb(1,1,this._options.type),t&&this._canvas&&(Kd(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)B8t(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||ut("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=j8t(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):U8t(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=pd[n.marktype];n.clip&&F5t(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const j8t=(e,t,n)=>new Go().set(0,0,t,n).translate(-e[0],-e[1]);function U8t(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class DMe extends zie{constructor(t,n){super(t,n);const r=this;r._hrefHandler=AH(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=AH(r,(i,s)=>{r.handleTooltip(i,s,i.type!==QN)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(xK,this._hrefHandler),i.removeEventListener(bK,this._tooltipHandler),i.removeEventListener(QN,this._tooltipHandler)),this._svg=i=t&&Uie(t,"svg"),i&&(i.addEventListener(xK,this._hrefHandler),i.addEventListener(bK,this._tooltipHandler),i.addEventListener(QN,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:AH(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const AH=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},PMe="aria-hidden",Vie="aria-label",Hie="role",qie="aria-roledescription",OMe="graphics-object",Wie="graphics-symbol",MMe=(e,t,n)=>({[Hie]:e,[qie]:t,[Vie]:n||void 0}),z8t=zp(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),tye={axis:{desc:"axis",caption:q8t},legend:{desc:"legend",caption:W8t},"title-text":{desc:"title",caption:e=>`Title text '${rye(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${rye(e)}'`}},nye={ariaRole:Hie,ariaRoleDescription:qie,description:Vie};function LMe(e,t){const n=t.aria===!1;if(e(PMe,n||void 0),n||t.description==null)for(const r in nye)e(nye[r],void 0);else{const r=t.mark.marktype;e(Vie,t.description),e(Hie,t.ariaRole||(r==="group"?OMe:Wie)),e(qie,t.ariaRoleDescription||`${r} mark`)}}function $Me(e){return e.aria===!1?{[PMe]:!0}:z8t[e.role]?null:tye[e.role]?H8t(e,tye[e.role]):V8t(e)}function V8t(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return MMe(n?OMe:Wie,`${t} mark container`,e.description)}function H8t(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return MMe(t.role||Wie,t.desc,n.description||r(n))}catch{return null}}function rye(e){return Wt(e.text).join(" ")}function q8t(e){const t=e.datum,n=e.orient,r=t.title?FMe(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${qC(a)?"discrete":a} scale with ${Q6e(o,s,e)}`}function W8t(e){const t=e.datum,n=t.title?FMe(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return Y8t(r)+(n?` titled '${n}'`:"")+` for ${G8t(s)} with ${Q6e(u,a,e)}`}function FMe(e){try{return Wt(Yr(e.items).items[0].text).join(" ")}catch{return null}}function G8t(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Yr(e)}function Y8t(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const BMe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),K8t=e=>BMe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function Gie(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${K8t(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=BMe(u),a),toString:()=>e};return a}const jMe=e=>UMe(Gie(),e)+"";function UMe(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):UMe(e,r)}return e.close()}const o8={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},a8={blend:"mix-blend-mode"},zMe={fill:"none","stroke-miterlimit":10},mR=0,iye="http://www.w3.org/2000/xmlns/",ia=pP.xmlns;class Yie extends Z3{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=oa(t,0,"svg",ia),this._svg.setAttributeNS(iye,"xmlns",ia),this._svg.setAttributeNS(iye,"xmlns:xlink",pP["xmlns:xlink"]),this._svg.setAttribute("version",pP.version),this._svg.setAttribute("class","marks"),Kd(t,1),this._root=oa(this._svg,mR,"g",ia),eb(this._root,zMe),Kd(this._svg,mR+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(eb(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=oa(t,mR,"rect",ia),eb(r,{width:this._width,height:this._height,fill:n}));const i=jMe(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Kd(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=pd[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,sye(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,sye(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=pd[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=oye(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return Kd(c,0),n._svg;c.setAttribute("class",SMe(n));const f=$Me(n);for(const m in f)Dl(c,m,f[m]);l||Dl(c,"pointer-events",u),Dl(c,"clip-path",n.clip?Sie(this,n,n.group):null);let d=null,h=0;const p=m=>{const y=this.isDirty(m),v=oye(m,c,d,a.tag,s);y&&(this._update(a,v,m),l&&J8t(this,v,m,i)),d=v,++h};return a.nested?n.items.length&&p(n.items[0]):Hp(n,p),Kd(c,h),c}_update(t,n,r){ky=n,Yu=n.__values__,LMe(JN,r),t.attr(JN,r,this);const i=eBt[t.type];i&&i.call(this,t,n,r),ky&&this.style(ky,r)}style(t,n){if(n!=null){for(const r in o8){let i=r==="font"?J3(n):n[r];if(i===Yu[r])continue;const s=o8[r];i==null?t.removeAttribute(s):(wie(i)&&(i=Z6e(i,this._defs.gradient,VMe())),t.setAttribute(s,i+"")),Yu[r]=i}for(const r in a8)y$(t,a8[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=oa(t,mR+1,"defs",ia)),i=X8t(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=oa(t,mR+1,"defs",ia)),i=Q8t(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):Kd(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function sye(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function X8t(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=oa(e,n++,"pattern",ia);eb(o,{id:K5+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=oa(o,0,"rect",ia),eb(o,{width:1,height:1,fill:`url(${VMe()}#${t.id})`}),e=oa(e,n++,"radialGradient",ia),eb(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=oa(e,n++,"linearGradient",ia),eb(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=oa(e,r,"stop",ia),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return Kd(e,r),n}function Q8t(e,t,n){let r;return e=oa(e,n,"clipPath",ia),e.setAttribute("id",t.id),t.path?(r=oa(e,0,"path",ia),r.setAttribute("d",t.path)):(r=oa(e,0,"rect",ia),eb(r,{x:0,y:0,width:t.width,height:t.height})),Kd(e,1),n+1}function J8t(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;Hp(n,o=>{i=e.mark(t,o,i,r),++s}),Kd(t,1+s)}function oye(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=Zv(o,r,ia),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=Zv(o,"path",ia);s.appendChild(a),a.__data__=e;const u=Zv(o,"g",ia);s.appendChild(u),u.__data__=e;const l=Zv(o,"path",ia);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||Z8t(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function Z8t(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let ky=null,Yu=null;const eBt={group(e,t,n){const r=ky=t.childNodes[2];Yu=r.__values__,e.foreground(JN,n,this),Yu=t.__values__,ky=t.childNodes[1],e.content(JN,n,this);const i=ky=t.childNodes[0];e.background(JN,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==Yu.events&&(Dl(r,"pointer-events",s),Dl(i,"pointer-events",s),Yu.events=s),n.strokeForeground&&n.stroke){const o=n.fill;Dl(r,"display",null),this.style(i,n),Dl(i,"stroke",null),o&&(n.fill=null),Yu=r.__values__,this.style(r,n),o&&(n.fill=o),ky=null}else Dl(r,"display","none")},image(e,t,n){n.smooth===!1?(y$(t,"image-rendering","optimizeSpeed"),y$(t,"image-rendering","pixelated")):y$(t,"image-rendering",null)},text(e,t,n){const r=Q3(n);let i,s,o,a;ct(r)?(s=r.map(u=>Jb(n,u)),i=s.join(`
`),i!==Yu.text&&(Kd(t,0),o=t.ownerDocument,a=Qb(n),s.forEach((u,l)=>{const c=Zv(o,"tspan",ia);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),Yu.text=i)):(s=Jb(n,r),s!==Yu.text&&(t.textContent=s,Yu.text=s)),Dl(t,"font-family",J3(n)),Dl(t,"font-size",cg(n)+"px"),Dl(t,"font-style",n.fontStyle),Dl(t,"font-variant",n.fontVariant),Dl(t,"font-weight",n.fontWeight)}};function JN(e,t,n){t!==Yu[e]&&(n?tBt(ky,e,t,n):Dl(ky,e,t),Yu[e]=t)}function y$(e,t,n){n!==Yu[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Yu[t]=n)}function eb(e,t){for(const n in t)Dl(e,n,t[n])}function Dl(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function tBt(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function VMe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class HMe extends Z3{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=Gie();n.open("svg",lr({},pP,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",zMe,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=pd[n.marktype],i=r.tag,s=[LMe,r.attr];t.open("g",{class:SMe(n),"clip-path":n.clip?Sie(this,n,n.group):null},$Me(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=Q3(a);if(ct(l)){const c={x:0,dy:Qb(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(Jb(a,l[f])).close()}else t.text(Jb(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),Hp(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):Hp(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&nBt(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:K5+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function nBt(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=J3(t),e["font-size"]=cg(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in o8){let a=t[o];const u=o8[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(wie(a)&&(a=Z6e(a,i.gradient,"")),e[u]=a)}for(const o in a8){const a=t[o];a!=null&&(s=s||[],s.push(`${a8[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const up={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function rBt(e){up.svgMarkTypes=e.svgMarkTypes??["text"],up.svgOnTop=e.svgOnTop??!0,up.debug=e.debug??!1}class _K extends Z3{constructor(t){super(t),this._svgRenderer=new Yie(t),this._canvasRenderer=new s8(t)}initialize(t,n,r,i,s){this._root_el=oa(t,0,"div");const o=oa(this._root_el,0,"div"),a=oa(this._root_el,1,"div");return this._root_el.style.position="relative",up.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=up.svgOnTop?a:o,this._canvasEl=up.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return up.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!up.svgMarkTypes.includes(s));this._svgRenderer.render(t,up.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return up.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class qMe extends eO{constructor(t,n){super(t,n)}initialize(t,n,r){const i=oa(oa(t,0,"div"),up.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const WMe="canvas",GMe="hybrid",YMe="png",KMe="svg",XMe="none",tb={Canvas:WMe,PNG:YMe,SVG:KMe,Hybrid:GMe,None:XMe},aE={};aE[WMe]=aE[YMe]={renderer:s8,headless:s8,handler:eO};aE[KMe]={renderer:Yie,headless:HMe,handler:DMe};aE[GMe]={renderer:_K,headless:_K,handler:qMe};aE[XMe]={};function Oj(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(aE[e]=t,this):aE[e]}function QMe(e,t,n){const r=[],i=new Go().union(t),s=e.marktype;return s?JMe(e,i,n,r):s==="group"?ZMe(e,i,n,r):ut("Intersect scene must be mark node or group item.")}function JMe(e,t,n,r){if(iBt(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)ZMe(i[a],t,n,r);else for(const u=pd[s].isect;a<o;++a){const l=i[a];eLe(l,t,u)&&r.push(l)}}return r}function iBt(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function ZMe(e,t,n,r){n&&n(e.mark)&&eLe(e,t,pd.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)JMe(i[u],t,n,r);t.translate(o,a)}return r}function eLe(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const IH=new Go;function tLe(e){const t=e.clip;if(cr(t))t(K3(IH.clear()));else if(t)IH.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(IH)}const sBt=1e-9;function Kie(e,t,n){return e===t?!0:n==="path"?nLe(e,t):e instanceof Date&&t instanceof Date?+e==+t:yi(e)&&yi(t)?Math.abs(e-t)<=sBt:!e||!t||!Ht(e)&&!Ht(t)?e==t:oBt(e,t)}function nLe(e,t){return Kie(WC(e),WC(t))}function oBt(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!Kie(e[i],t[i],i))return!1;return typeof e==typeof t}function aBt(){oMe(),NFt()}const KC="top",vp="left",Ep="right",Zb="bottom",uBt="top-left",lBt="top-right",cBt="bottom-left",fBt="bottom-right",Xie="start",wK="middle",Ol="end",dBt="x",hBt="y",Mj="group",Qie="axis",Jie="title",pBt="frame",mBt="scope",Zie="legend",rLe="row-header",iLe="row-footer",sLe="row-title",oLe="column-header",aLe="column-footer",uLe="column-title",gBt="padding",yBt="symbol",lLe="fit",cLe="fit-x",fLe="fit-y",vBt="pad",ese="none",R6="all",EK="each",tse="flush",nb="column",rb="row";function dLe(e){nt.call(this,null,e)}zt(dLe,nt,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=pd[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=N6(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===Mj||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(N6(l,o))),r.role){case Qie:case Zie:case Jie:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(N6(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(N6(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return tLe(r),t.modifies("bounds")}});function N6(e,t,n){return t(e.bounds.clear(),e,n)}const aye=":vega_identifier:";function nse(e){nt.call(this,0,e)}nse.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};zt(nse,nt,{transform(e,t){const n=bBt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function bBt(e){return e._signals[aye]||(e._signals[aye]=e.add(0))}function hLe(e){nt.call(this,null,e)}zt(hLe,nt,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,xBt(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===Mj?Cj:Sj;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function xBt(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function pLe(e){nt.call(this,null,e)}const uye={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!mLe(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},mLe=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),lye=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(mLe(i,s=e[n].bounds,t))return!0},_Bt=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},wBt=(e,t,n)=>{var r=e.range(),i=new Go;return t===KC||t===Zb?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},cye=e=>(e.forEach(t=>t.opacity=1),e),fye=(e,t)=>e.reflow(t.modified()).modifies("opacity");zt(pLe,nt,{transform(e,t){const n=uye[e.method]||uye.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(cye(i),t=fye(t,e)),t;if(i=i.filter(_Bt),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=cye(i),t=fye(t,e),s.length>=3&&lye(s,r)){do s=n(s,r);while(s.length>=3&&lye(s,r));s.length<3&&!Yr(i).opacity&&(s.length>1&&(Yr(s).opacity=0),Yr(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=wBt(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function gLe(e){nt.call(this,null,e)}zt(gLe,nt,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const Wu=new Go;function E2(e,t,n){return e[t]===n?0:(e[t]=n,1)}function EBt(e){var t=e.items[0].orient;return t===vp||t===Ep}function TBt(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function SBt(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=TBt(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,y=i.bounds,v=p&&Fie(p),b=0,w=0,E,T;switch(Wu.clear().union(y),y.clear(),(E=u[0])>-1&&y.union(i.items[E].bounds),(E=u[1])>-1&&y.union(i.items[E].bounds),a){case KC:b=f||0,w=-c,T=Math.max(d,Math.min(h,-y.y1)),y.add(0,-T).add(l,0),p&&D6(e,p,T,m,v,0,-1,y);break;case vp:b=-c,w=f||0,T=Math.max(d,Math.min(h,-y.x1)),y.add(-T,0).add(0,l),p&&D6(e,p,T,m,v,1,-1,y);break;case Ep:b=n+c,w=f||0,T=Math.max(d,Math.min(h,y.x2)),y.add(0,0).add(T,l),p&&D6(e,p,T,m,v,1,1,y);break;case Zb:b=f||0,w=r+c,T=Math.max(d,Math.min(h,y.y2)),y.add(0,0).add(l,T),p&&D6(e,p,T,m,0,0,1,y);break;default:b=i.x,w=i.y}return N1(y.translate(b,w),i),E2(i,"x",b+o)|E2(i,"y",w+o)&&(i.bounds=Wu,e.dirty(i),i.bounds=y,e.dirty(i)),i.mark.bounds.clear().union(y)}function D6(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const dye=(e,t)=>Math.floor(Math.min(e,t)),hye=(e,t)=>Math.ceil(Math.max(e,t));function CBt(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===Mj)switch(i.role){case Qie:case Zie:case Jie:break;case rLe:o.rowheaders.push(...s);break;case iLe:o.rowfooters.push(...s);break;case oLe:o.colheaders.push(...s);break;case aLe:o.colfooters.push(...s);break;case sLe:o.rowtitle=s[0];break;case uLe:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function ABt(e){return new Go().set(0,0,e.width||0,e.height||0)}function IBt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Rs(e,t,n){const r=Ht(e)?e[t]:e;return r??(n!==void 0?n:0)}function pye(e){return e<0?Math.ceil(-e):0}function yLe(e,t,n){var r=!n.nodirty,i=n.bounds===tse?ABt:IBt,s=Wu.set(0,0,0,0),o=Rs(n.align,nb),a=Rs(n.align,rb),u=Rs(n.padding,nb),l=Rs(n.padding,rb),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,y=Array(d),v=Array(f),b=0,w=Array(d),E=Array(d),T=Array(d),A,I,R,D,M,$,U,F,H,Q,J;for(I=0;I<c;++I)p[I]=0;for(I=0;I<f;++I)v[I]=0;for(I=0;I<d;++I)$=t[I],M=T[I]=i($),$.x=$.x||0,w[I]=0,$.y=$.y||0,E[I]=0,R=I%c,D=~~(I/c),m=Math.max(m,U=Math.ceil(M.x2)),b=Math.max(b,F=Math.ceil(M.y2)),p[R]=Math.max(p[R],U),v[D]=Math.max(v[D],F),h[I]=u+pye(M.x1),y[I]=l+pye(M.y1),r&&e.dirty(t[I]);for(I=0;I<d;++I)I%c===0&&(h[I]=0),I<c&&(y[I]=0);if(o===EK)for(R=1;R<c;++R){for(J=0,I=R;I<d;I+=c)J<h[I]&&(J=h[I]);for(I=R;I<d;I+=c)h[I]=J+p[R-1]}else if(o===R6){for(J=0,I=0;I<d;++I)I%c&&J<h[I]&&(J=h[I]);for(I=0;I<d;++I)I%c&&(h[I]=J+m)}else for(o=!1,R=1;R<c;++R)for(I=R;I<d;I+=c)h[I]+=p[R-1];if(a===EK)for(D=1;D<f;++D){for(J=0,I=D*c,A=I+c;I<A;++I)J<y[I]&&(J=y[I]);for(I=D*c;I<A;++I)y[I]=J+v[D-1]}else if(a===R6){for(J=0,I=c;I<d;++I)J<y[I]&&(J=y[I]);for(I=c;I<d;++I)y[I]=J+b}else for(a=!1,D=1;D<f;++D)for(I=D*c,A=I+c;I<A;++I)y[I]+=v[D-1];for(H=0,I=0;I<d;++I)H=h[I]+(I%c?H:0),w[I]+=H-t[I].x;for(R=0;R<c;++R)for(Q=0,I=R;I<d;I+=c)Q+=y[I],E[I]+=Q-t[I].y;if(o&&Rs(n.center,nb)&&f>1)for(I=0;I<d;++I)M=o===R6?m:p[I%c],H=M-T[I].x2-t[I].x-w[I],H>0&&(w[I]+=H/2);if(a&&Rs(n.center,rb)&&c!==1)for(I=0;I<d;++I)M=a===R6?b:v[~~(I/c)],Q=M-T[I].y2-t[I].y-E[I],Q>0&&(E[I]+=Q/2);for(I=0;I<d;++I)s.union(T[I].translate(w[I],E[I]));switch(H=Rs(n.anchor,dBt),Q=Rs(n.anchor,hBt),Rs(n.anchor,nb)){case Ol:H-=s.width();break;case wK:H-=s.width()/2}switch(Rs(n.anchor,rb)){case Ol:Q-=s.height();break;case wK:Q-=s.height()/2}for(H=Math.round(H),Q=Math.round(Q),s.clear(),I=0;I<d;++I)t[I].mark.bounds.clear();for(I=0;I<d;++I)$=t[I],$.x+=w[I]+=H,$.y+=E[I]+=Q,s.union($.mark.bounds.union($.bounds.translate(w[I],E[I]))),r&&e.dirty($);return s}function kBt(e,t,n){var r=CBt(t),i=r.marks,s=n.bounds===tse?RBt:NBt,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,y;const v=yLe(e,i,n);v.empty()&&v.set(0,0,0,0),r.rowheaders&&(m=Rs(n.headerBand,rb,null),c=P6(e,r.rowheaders,i,a,u,-Rs(o,"rowHeader"),dye,0,s,"x1",0,a,1,m)),r.colheaders&&(m=Rs(n.headerBand,nb,null),f=P6(e,r.colheaders,i,a,a,-Rs(o,"columnHeader"),dye,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=Rs(n.footerBand,rb,null),d=P6(e,r.rowfooters,i,a,u,Rs(o,"rowFooter"),hye,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=Rs(n.footerBand,nb,null),h=P6(e,r.colfooters,i,a,a,Rs(o,"columnFooter"),hye,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=Rs(n.titleAnchor,rb),y=Rs(o,"rowTitle"),y=p===Ol?d+y:c-y,m=Rs(n.titleBand,rb,.5),mye(e,r.rowtitle,y,0,v,m)),r.coltitle&&(p=Rs(n.titleAnchor,nb),y=Rs(o,"columnTitle"),y=p===Ol?h+y:f-y,m=Rs(n.titleBand,nb,.5),mye(e,r.coltitle,y,1,v,m))}function RBt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function NBt(e,t){return e.bounds[t]}function P6(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,y=0,v,b,w,E,T,A,I,R,D;if(!p)return m;for(v=c;v<p;v+=f)n[v]&&(m=o(m,u(n[v],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,b=0,E=t.length;b<E;++b)e.dirty(t[b]),t[b].mark.bounds.clear();for(v=c,b=0,E=t.length;b<E;++b,v+=f){for(A=t[b],T=A.mark.bounds,w=v;w>=0&&(I=n[w])==null;w-=d);a?(R=h==null?I.x:Math.round(I.bounds.x1+h*I.bounds.width()),D=m):(R=m,D=h==null?I.y:Math.round(I.bounds.y1+h*I.bounds.height())),T.union(A.bounds.translate(R-(A.x||0),D-(A.y||0))),A.x=R,A.y=D,e.dirty(A),y=o(y,T[l])}return y}function mye(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function DBt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function PBt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function OBt(e,t,n,r,i,s,o){const a=DBt(n,t),u=PBt(e,a("offset",0)),l=a("anchor",Xie),c=l===Ol?1:l===wK?.5:0,f={align:EK,bounds:a("bounds",tse),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case vp:f.anchor={x:Math.floor(r.x1)-u,column:Ol,y:c*(o||r.height()+2*r.y1),row:l};break;case Ep:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case KC:f.anchor={y:Math.floor(i.y1)-u,row:Ol,x:c*(s||i.width()+2*i.x1),column:l};break;case Zb:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case uBt:f.anchor={x:u,y:u};break;case lBt:f.anchor={x:s-u,y:u,column:Ol};break;case cBt:f.anchor={x:u,y:o-u,row:Ol};break;case fBt:f.anchor={x:s-u,y:o-u,column:Ol,row:Ol};break}return f}function MBt(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),$Bt(e,n,n.items[0].items[0]),s=LBt(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===yBt&&FBt(n.items[0].items[0].items[0].items),i!==ese&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,N1(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function LBt(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function $Bt(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&gR(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case vp:i+=Math.ceil(o.bounds.width())+u;break;case Ep:case Zb:break;default:s+=o.bounds.height()+u}switch((i||s)&&gR(e,n,i,s),o.orient){case vp:c+=BS(t,n,o,a,1,1);break;case Ep:l+=BS(t,n,o,Ol,0,0)+u,c+=BS(t,n,o,a,1,1);break;case Zb:l+=BS(t,n,o,a,0,0),c+=BS(t,n,o,Ol,-1,0,1)+u;break;default:l+=BS(t,n,o,a,0,0)}(l||c)&&gR(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(gR(e,n,-l,0),gR(e,o,-l,0))}}function BS(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:Fie(n);return Math.round(r===Xie?f:r===Ol?d-h:.5*(c-h))}function gR(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function FBt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function BBt(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===vp||a===Ep?r:n,p=0,m=0,y=0,v=0,b=0,w;if(o!==Mj?a===vp?(p=i.y2,h=i.y1):a===Ep?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===vp&&(p=r,h=0),w=u===Xie?p:u===Ol?h:(p+h)/2,d&&d.text){switch(a){case KC:case Zb:b=f.bounds.height()+c;break;case vp:v=f.bounds.width()+c;break;case Ep:v=-f.bounds.width()-c;break}Wu.clear().union(d.bounds),Wu.translate(v-(d.x||0),b-(d.y||0)),E2(d,"x",v)|E2(d,"y",b)&&(e.dirty(d),d.bounds.clear().union(Wu),d.mark.bounds.clear().union(Wu),e.dirty(d)),Wu.clear().union(d.bounds)}else Wu.clear();switch(Wu.union(f.bounds),a){case KC:m=w,y=i.y1-Wu.height()-l;break;case vp:m=i.x1-Wu.width()-l,y=w;break;case Ep:m=i.x2+Wu.width()+l,y=w;break;case Zb:m=w,y=i.y2+l;break;default:m=s.x,y=s.y}return E2(s,"x",m)|E2(s,"y",y)&&(Wu.translate(m,y),e.dirty(s),s.bounds.clear().union(Wu),t.bounds.clear().union(Wu),e.dirty(s)),s.bounds}function vLe(e){nt.call(this,null,e)}zt(vLe,nt,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&kBt(n,r,e.layout),UBt(n,r,e)}),jBt(e.mark.group)?t.reflow():t}});function jBt(e){return e&&e.mark.role!=="legend-entry"}function UBt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new Go().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case Qie:h=EBt(f)?a:u,h.union(SBt(e,f,i,s));break;case Jie:c=f;break;case Zie:l.push(MBt(e,f));break;case pBt:case mBt:case rLe:case iLe:case sLe:case oLe:case aLe:case uLe:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const y={};l.forEach(v=>{d=v.orient||Ep,d!==ese&&(y[d]||(y[d]=[])).push(v)});for(const v in y){const b=y[v];yLe(e,b,OBt(b,v,n.legends,a,u,i,s))}l.forEach(v=>{const b=v.bounds;if(b.equals(v._bounds)||(v.bounds=v._bounds,e.dirty(v),v.bounds=b,e.dirty(v)),n.autosize&&(n.autosize.type===lLe||n.autosize.type===cLe||n.autosize.type===fLe))switch(v.orient){case vp:case Ep:o.add(b.x1,0).add(b.x2,0);break;case KC:case Zb:o.add(0,b.y1).add(0,b.y2)}else o.union(b)})}o.union(a).union(u),c&&o.union(BBt(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),zBt(e,t,o,n)}function zBt(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===gBt){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===ese?(l=0,f=0,u=o,c=a):s===lLe?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===cLe?(u=Math.max(0,o-l-d),a=c+f+h):s===fLe?(o=u+l+d,c=Math.max(0,a-f-h)):s===vBt&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const VBt=Object.freeze(Object.defineProperty({__proto__:null,bound:dLe,identifier:nse,mark:hLe,overlap:pLe,render:gLe,viewlayout:vLe},Symbol.toStringTag,{value:"Module"}));function bLe(e){nt.call(this,null,e)}zt(bLe,nt,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=xie(s,o,e.minstep),u=e.format||W6e(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?q6e(s,e.values,a):_ie(s,a);return i&&(r.rem=i),i=l.map((c,f)=>Ei({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(Ei({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function xLe(e){nt.call(this,null,e)}function HBt(){return Ei({})}function qBt(e){const t=gI().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}zt(xLe,nt,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||HBt,s=e.key||bn,o=this.value;return ct(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&ut("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=qBt(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function _Le(e){nt.call(this,null,e)}zt(_Le,nt,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(ct(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||kv,u=i.enter||kv,l=i.exit||kv,c=(s&&!o?i[s]:a)||kv;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==kv&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==kv&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==kv){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function wLe(e){nt.call(this,[],e)}zt(wLe,nt,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||l$,o=e.scale,a=+e.limit,u=xie(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===l$,c=e.format||X6e(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||K6e(o,u),d,h,p,m,y;return i&&(r.rem=i),s===l$?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),y=!0):i=f,cr(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((v,b)=>Math.max(v,p(b,e)),0)):p=hl(m=p||8),i=i.map((v,b)=>Ei({index:b,label:c(v,b,i),value:v,offset:m,size:p(v,e)})),y&&(y=f[i.length],i.push(Ei({index:i.length,label:`${f.length-i.length} entries`,value:y,offset:m,size:p(y,e)})))):s===vFt?(d=o.domain(),h=z6e(o,d[0],Yr(d)),f.length<3&&!e.values&&d[0]!==Yr(d)&&(f=[d[0],Yr(d)]),i=f.map((v,b)=>Ei({index:b,label:c(v,b,f),value:v,perc:h(v)}))):(p=f.length-1,h=kFt(o),i=f.map((v,b)=>Ei({index:b,label:c(v,b,f),value:v,perc:b?h(v):0,perc2:b===p?1:h(f[b+1])}))),r.source=i,r.add=i,this.value=i,r}});const WBt=e=>e.source.x,GBt=e=>e.source.y,YBt=e=>e.target.x,KBt=e=>e.target.y;function rse(e){nt.call(this,{},e)}rse.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};zt(rse,nt,{transform(e,t){var n=e.sourceX||WBt,r=e.sourceY||GBt,i=e.targetX||YBt,s=e.targetY||KBt,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=gye.get(u+"-"+a)||gye.get(u);return l||ut("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const ELe=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,XBt=(e,t,n,r)=>ELe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),TLe=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},QBt=(e,t,n,r)=>TLe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),SLe=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},JBt=(e,t,n,r)=>SLe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),ZBt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,e9t=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,t9t=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},n9t=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},r9t=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},i9t=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},gye=gI({line:ELe,"line-radial":XBt,arc:TLe,"arc-radial":QBt,curve:SLe,"curve-radial":JBt,"orthogonal-horizontal":ZBt,"orthogonal-vertical":e9t,"orthogonal-radial":t9t,"diagonal-horizontal":n9t,"diagonal-vertical":r9t,"diagonal-radial":i9t});function ise(e){nt.call(this,null,e)}ise.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};zt(ise,nt,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||hI,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/uIe(l),h=Hc(c),p,m,y;for(e.sort&&h.sort((v,b)=>l[v]-l[b]),p=0;p<c;++p)y=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=y*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const s9t=5;function o9t(e){const t=e.type;return!e.bins&&(t===VC||t===z3||t===V3)}function CLe(e){return yie(e)&&e!==I0}const a9t=zp(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function ALe(e){nt.call(this,null,e),this.modified(!0)}zt(ALe,nt,{transform(e,t){var n=t.dataflow,r=this.value,i=u9t(e);(!r||i!==r.type)&&(this.value=r=vi(i)());for(i in e)if(!a9t[i]){if(i==="padding"&&CLe(r.type))continue;cr(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return p9t(r,e,h9t(r,e,c9t(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function u9t(e){var t=e.type,n="",r;return t===I0?I0+"-"+VC:(l9t(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?I0+"-":r===3?xI+"-":""),(n+t||VC).toLowerCase())}function l9t(e){const t=e.type;return yie(t)&&t!==sE&&t!==oE&&(e.scheme||e.range&&e.range.length&&e.range.every(Gt))}function c9t(e,t,n){const r=f9t(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&o9t(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return CLe(s)&&t.padding&&i[0]!==Yr(i)&&(i=d9t(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(ILe(s,i,n)),s===hie&&e.unknown(t.domainImplicit?JG:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&xie(e,t.nice)||null),i.length}function f9t(e,t,n){return t?(e.domain(ILe(e.type,t,n)),t.length):-1}function d9t(e,t,n,r,i,s){var o=Math.abs(Yr(n)-n[0]),a=o/(o-2*r),u=e===h1?ore(t,null,a):e===V3?q5(t,null,a,.5):e===z3?q5(t,null,a,i||1):e===xj?are(t,null,a,s||1):sre(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function ILe(e,t,n){if($6e(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+jt(t))}return t}function h9t(e,t,n){let r=t.bins;if(r&&!ct(r)){const i=e.domain(),s=i[0],o=Yr(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||ut("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=Hc(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===pie&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function p9t(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=m9t(r,t,n);else if(t.scheme&&(s=g9t(r,t,n),cr(s))){if(e.interpolator)return e.interpolator(s);ut(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&F6e(r))return e.interpolator(Ej(TK(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(vie(t.interpolate,t.interpolateGamma)):cr(e.round)?e.round(i):cr(e.rangeRound)&&e.interpolate(i?h3:T1),s&&e.range(TK(s,t.reverse))}function m9t(e,t,n){e!==N6e&&e!==lK&&ut("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===lK?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*die(n,i,r)]}function g9t(e,t,n){var r=t.schemeExtent,i,s;return ct(t.scheme)?s=Ej(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=bie(i),s||ut(`Unrecognized scheme name: ${t.scheme}`)),n=e===wj?n+1:e===pie?n-1:e===HC||e===_j?+t.schemeCount||s9t:n,F6e(e)?yye(s,r,t.reverse):cr(s)?U6e(yye(s,r),n):e===hie?s:s.slice(0,n)}function yye(e,t,n){return cr(e)&&(t||n)?j6e(e,TK(t||[0,1],n)):e}function TK(e,t){return t?e.slice().reverse():e}function kLe(e){nt.call(this,null,e)}zt(kLe,nt,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(GE(e.sort)),this.modified(n),t}});const vye="zero",RLe="center",NLe="normalize",DLe=["y0","y1"];function sse(e){nt.call(this,null,e)}sse.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:vye,values:[vye,RLe,NLe]},{name:"as",type:"string",array:!0,length:2,default:DLe}]};zt(sse,nt,{transform(e,t){var n=e.as||DLe,r=n[0],i=n[1],s=GE(e.sort),o=e.field||hI,a=e.offset===RLe?y9t:e.offset===NLe?v9t:b9t,u,l,c,f;for(u=x9t(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function y9t(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function v9t(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function b9t(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function x9t(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const _9t=Object.freeze(Object.defineProperty({__proto__:null,axisticks:bLe,datajoin:xLe,encode:_Le,legendentries:wLe,linkpath:rse,pie:ise,scale:ALe,sortitems:kLe,stack:sse},Symbol.toStringTag,{value:"Module"}));var w9t=Math.abs,SK=Math.cos,u8=Math.sin,E9t=1e-6,PLe=Math.PI,CK=PLe/2,bye=T9t(2);function xye(e){return e>1?CK:e<-1?-CK:Math.asin(e)}function T9t(e){return e>0?Math.sqrt(e):0}function S9t(e,t){var n=e*u8(t),r=30,i;do t-=i=(t+u8(t)-n)/(1+SK(t));while(w9t(i)>E9t&&--r>0);return t/2}function C9t(e,t,n){function r(i,s){return[e*i*SK(s=S9t(n,s)),t*u8(s)]}return r.invert=function(i,s){return s=xye(s/t),[i/(e*SK(s)),xye((2*s+u8(2*s))/n)]},r}var A9t=C9t(bye/CK,bye,PLe);function I9t(){return og(A9t).scale(169.529)}const k9t=$ke(),AK=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function R9t(e,t){return function n(){const r=t();return r.type=e,r.path=$ke().projection(r),r.copy=r.copy||function(){const i=n();return AK.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},M6e(r)}}function ose(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(l8[e]=R9t(e,t),this):l8[e]||null}function OLe(e){return e&&e.path||k9t}const l8={albers:Bke,albersusa:lTt,azimuthalequalarea:cTt,azimuthalequidistant:fTt,conicconformal:pTt,conicequalarea:YF,conicequidistant:yTt,equalEarth:bTt,equirectangular:mTt,gnomonic:xTt,identity:_Tt,mercator:dTt,mollweide:I9t,naturalEarth1:wTt,orthographic:ETt,stereographic:TTt,transversemercator:STt};for(const e in l8)ose(e,l8[e]);function N9t(){}const Jg=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function MLe(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),D9t(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(P9t((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=[],d=[],h,p,m,y,v,b;for(h=p=-1,y=u[0]>=l,Jg[y<<1].forEach(w);++h<e-1;)m=y,y=u[h+1]>=l,Jg[m|y<<1].forEach(w);for(Jg[y<<0].forEach(w);++p<t-1;){for(h=-1,y=u[p*e+e]>=l,v=u[p*e]>=l,Jg[y<<1|v<<2].forEach(w);++h<e-1;)m=y,y=u[p*e+e+h+1]>=l,b=v,v=u[p*e+h+1]>=l,Jg[m|y<<1|v<<2|b<<3].forEach(w);Jg[y|v<<3].forEach(w)}for(h=-1,v=u[p*e]>=l,Jg[v<<2].forEach(w);++h<e-1;)b=v,v=u[p*e+h+1]>=l,Jg[v<<2|b<<3].forEach(w);Jg[v<<3].forEach(w);function w(E){var T=[E[0][0]+h,E[0][1]+p],A=[E[1][0]+h,E[1][1]+p],I=o(T),R=o(A),D,M;(D=d[I])?(M=f[R])?(delete d[D.end],delete f[M.start],D===M?(D.ring.push(A),c(D.ring)):f[D.start]=d[M.end]={start:D.start,end:M.end,ring:D.ring.concat(M.ring)}):(delete d[D.end],D.ring.push(A),d[D.end=R]=D):(D=f[R])?(M=d[I])?(delete f[D.start],delete d[M.end],D===M?(D.ring.push(A),c(D.ring)):f[M.start]=d[D.end]={start:M.start,end:D.end,ring:M.ring.concat(D.ring)}):(delete f[D.start],D.ring.unshift(T),f[D.start=I]=D):f[I]=d[R]={start:I,end:R,ring:[T,A]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,y,v=l[m*e+p];d>0&&d<e&&p===d&&(y=l[m*e+p-1],f[0]=d+(c-y)/(v-y)-.5),h>0&&h<t&&m===h&&(y=l[(m-1)*e+p],f[1]=h+(c-y)/(v-y)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||ut("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:N9t,r):n===a},r}function D9t(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function P9t(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=O9t(e,t[n]))return i;return 0}function O9t(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(M9t(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function M9t(e,t,n){var r;return L9t(e,t,n)&&$9t(e[r=+(e[0]===t[0])],n[r],t[r])}function L9t(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function $9t(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function LLe(e,t,n){return function(r){var i=K0(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?Pb(s,o,e):a/(e+1);return Hc(s+u,o,u)}}function ase(e){nt.call(this,null,e)}ase.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};zt(ase,nt,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||dl,s=MLe().smooth(e.smooth!==!1),o=e.thresholds||F9t(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,ct(o)?o:o(c.values));B9t(f,c,l,e),f.forEach(d=>{u.push(fj(l,Ei(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function F9t(e,t,n){const r=LLe(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>db(t(i).values)))}function B9t(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(cr(i)&&(i=i(n,r)),cr(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(yi(i)?i:i[0])||1,a=(yi(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach($Le(t,o,a,u,l))}function $Le(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function _ye(e,t,n){const r=e>=0?e:Cre(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function kH(e){return cr(e)?e:hl(+e)}function FLe(){var e=u=>u[0],t=u=>u[1],n=hI,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=_ye(r[0],u,e)>>o,f=_ye(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),y=new Float32Array(p*m),v=new Float32Array(p*m);let b=y;u.forEach(E=>{const T=d+(+e(E)>>o),A=h+(+t(E)>>o);T>=0&&T<p&&A>=0&&A<m&&(y[T+A*p]+=+n(E))}),c>0&&f>0?(jS(p,m,y,v,c),US(p,m,v,y,f),jS(p,m,y,v,c),US(p,m,v,y,f),jS(p,m,y,v,c),US(p,m,v,y,f)):c>0?(jS(p,m,y,v,c),jS(p,m,v,y,c),jS(p,m,y,v,c),b=v):f>0&&(US(p,m,y,v,f),US(p,m,v,y,f),US(p,m,y,v,f),b=v);const w=l?Math.pow(2,-2*o):1/uIe(b);for(let E=0,T=p*m;E<T;++E)b[E]*=w;return{values:b,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=kH(u),a):e},a.y=function(u){return arguments.length?(t=kH(u),a):t},a.weight=function(u){return arguments.length?(n=kH(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||ut("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||ut("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=Wt(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&ut("invalid bandwidth"),r=u,a):r},a}function jS(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function US(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function use(e){nt.call(this,null,e)}use.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const j9t=["x","y","weight","size","cellSize","bandwidth"];function BLe(e,t){return j9t.forEach(n=>t[n]!=null?e[n](t[n]):0),e}zt(use,nt,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=U9t(r,e.groupby),s=(e.groupby||[]).map(oo),o=BLe(FLe(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>Ei(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function U9t(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function lse(e){nt.call(this,null,e)}lse.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};zt(lse,nt,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=MLe().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||LLe(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=BLe(FLe(),e)(i,!0),u=$Le(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=ct(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(Ei),n}});const IK="Feature",cse="FeatureCollection",z9t="MultiPoint";function fse(e){nt.call(this,null,e)}fse.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};zt(fse,nt,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&dl,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(sl(a))||s&&t.modified(sl(s))||o&&t.modified(sl(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:IK,geometry:{type:z9t,coordinates:r}})),this.value={type:cse,features:n}}});function dse(e){nt.call(this,null,e)}dse.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};zt(dse,nt,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||dl,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=OLe(e.projection),n.materialize().reflow()):o=i===dl||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=V9t(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function V9t(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function hse(e){nt.call(this,null,e)}hse.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};zt(hse,nt,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function pse(e){nt.call(this,null,e)}pse.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};zt(pse,nt,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=H9t(OLe(e.projection),e.field||ah("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function H9t(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function mse(e){nt.call(this,[],e),this.generator=zEt()}mse.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};zt(mse,nt,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)cr(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(B4e(n[0],i)):t.add.push(Ei(i)),n[0]=i,t}});function gse(e){nt.call(this,null,e)}gse.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};zt(gse,nt,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||dl,s=W9t(e.opacity,e),o=q9t(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?db(n.map(l=>db(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=lr({},l,u);r||(f.$max=db(c.values||[])),l[a]=G9t(c,f,o.dep?o:hl(o(f)),s.dep?s:hl(s(f)))}),t.reflow(!0).modifies(a)}});function q9t(e,t){let n;return cr(e)?(n=r=>Ob(e(r,t)),n.dep=jLe(e)):n=hl(Ob(e||"#888")),n}function W9t(e,t){let n;return cr(e)?(n=r=>e(r,t),n.dep=jLe(e)):e?n=hl(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function jLe(e){if(!cr(e))return!1;const t=zp(sl(e));return t.$x||t.$y||t.$value||t.$max}function G9t(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?y=>c[y]:Gv,d=vb(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let y=a,v=0;y<l;++y){t.$y=y-a;for(let b=o,w=y*i;b<u;++b,v+=4){t.$x=b-o,t.$value=f(b+w);const E=n(t);m[v+0]=E.r,m[v+1]=E.g,m[v+2]=E.b,m[v+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function ULe(e){nt.call(this,null,e),this.modified(!0)}zt(ULe,nt,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=K9t(e.type),AK.forEach(r=>{e[r]!=null&&wye(n,r,e[r])})):AK.forEach(r=>{e.modified(r)&&wye(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&Y9t(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Y9t(e,t){const n=X9t(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function K9t(e){const t=ose((e||"mercator").toLowerCase());return t||ut("Unrecognized projection type: "+e),t()}function wye(e,t,n){cr(e[t])&&e[t](n)}function X9t(e){return e=Wt(e),e.length===1?e[0]:{type:cse,features:e.reduce((t,n)=>t.concat(Q9t(n)),[])}}function Q9t(e){return e.type===cse?e.features:Wt(e).filter(t=>t!=null).map(t=>t.type===IK?t:{type:IK,geometry:t})}const J9t=Object.freeze(Object.defineProperty({__proto__:null,contour:lse,geojson:fse,geopath:dse,geopoint:hse,geoshape:pse,graticule:mse,heatmap:gse,isocontour:ase,kde2d:use,projection:ULe},Symbol.toStringTag,{value:"Module"})),Eye={center:Dwt,collide:Qwt,nbody:uEt,link:Zwt,x:lEt,y:cEt},pN="forces",kK=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],Z9t=["static","iterations"],zLe=["x","y","vx","vy"];function yse(e){nt.call(this,null,e)}yse.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:zLe}]};zt(yse,nt,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(kK),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&VLe(n,e,0,t)):(this.value=n=tjt(t.source,e),n.on("tick",ejt(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(Z9t)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==pN||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(zLe)}});function ejt(e,t){return()=>e.touch(t).run()}function tjt(e,t){const n=aEt(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),VLe(n,t,!0).on("end",()=>s=!0)}function VLe(e,t,n,r){var i=Wt(t.forces),s,o,a,u;for(s=0,o=kK.length;s<o;++s)a=kK[s],a!==pN&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=pN+s,a=n||t.modified(pN,s)?rjt(i[s]):r&&njt(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(pN+s,null);return e.numForces=i.length,e}function njt(e,t){var n,r;for(n in e)if(cr(r=e[n])&&t.modified(sl(r)))return 1;return 0}function rjt(e){var t,n;Jt(Eye,e.force)||ut("Unrecognized force: "+e.force),t=Eye[e.force]();for(n in e)cr(t[n])&&ijt(t[n],e[n],e);return t}function ijt(e,t,n){e(cr(t)?r=>t(r,n):t)}const sjt=Object.freeze(Object.defineProperty({__proto__:null,force:yse},Symbol.toStringTag,{value:"Module"}));function RK(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function vse(e){nt.call(this,null,e)}vse.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const ojt=e=>e.values;zt(vse,nt,{transform(e,t){t.source||ut("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&cj(o.data)&&i.rem.push(o.data)}),this.value=s=v9({values:Wt(e.keys).reduce((o,a)=>(o.key(a),o),ajt()).entries(i.source)},ojt),n&&s.each(o=>{o.children&&(o=Ei(o.data),i.add.push(o),i.source.push(o))}),RK(s,bn,bn)),i.source.root=s,i}});function ajt(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function D1(e){nt.call(this,null,e)}const ujt=(e,t)=>e.parent===t.parent?1:2;zt(D1,nt,{transform(e,t){(!t.source||!t.source.root)&&ut(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(GE(e.sort,o=>o.data)),ljt(n,this.params,e),n.separation&&n.separation(e.separation!==!1?ujt:hI);try{this.value=n(i)}catch(o){ut(o)}return i.each(o=>cjt(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function ljt(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function cjt(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const NK=["x","y","r","depth","children"];function bse(e){D1.call(this,e)}bse.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:NK.length,default:NK}]};zt(bse,D1,{layout:eRe,params:["radius","size","padding"],fields:NK});const DK=["x0","y0","x1","y1","depth","children"];function xse(e){D1.call(this,e)}xse.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:DK.length,default:DK}]};zt(xse,D1,{layout:cSt,params:["size","round","padding"],fields:DK});function _se(e){nt.call(this,null,e)}_se.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};zt(_se,nt,{transform(e,t){t.source||ut("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?RK(ame().id(e.key).parentId(e.parentKey)(i.source),e.key,uh):RK(ame()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const Tye={tidy:xSt,cluster:PTt},PK=["x","y","depth","children"];function wse(e){D1.call(this,e)}wse.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:PK.length,default:PK}]};zt(wse,D1,{layout(e){const t=e||"tidy";if(Jt(Tye,t))return Tye[t]();ut("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:PK});function Ese(e){nt.call(this,[],e)}Ese.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};zt(Ese,nt,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||ut("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[bn(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[bn(a)]&&s[bn(u)]&&i.add.push(Ei({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[bn(o)]=1),n.forEach(o=>{(s[bn(o.source)]||s[bn(o.target)])&&i.mod.push(o)})),i}});const Sye={binary:wSt,dice:y3,slice:b9,slicedice:ESt,squarify:iRe,resquarify:TSt},OK=["x0","y0","x1","y1","depth","children"];function Tse(e){D1.call(this,e)}Tse.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:OK.length,default:OK}]};zt(Tse,D1,{layout(){const e=_St();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Jt(Sye,t)?e.tile(Sye[t]):ut("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:OK});const fjt=Object.freeze(Object.defineProperty({__proto__:null,nest:vse,pack:bse,partition:xse,stratify:_se,tree:wse,treelinks:Ese,treemap:Tse},Symbol.toStringTag,{value:"Module"})),RH=4278190080;function djt(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function hjt(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=vb(s,o).getContext("2d"),l=vb(s,o).getContext("2d"),c=a&&vb(s,o).getContext("2d");n.forEach(R=>v$(u,R,!1)),v$(l,t,!1),a&&v$(c,t,!0);const f=NH(u,s,o),d=NH(l,s,o),h=a&&NH(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let y,v,b,w,E,T,A,I;for(v=0;v<o;++v)for(y=0;y<s;++y)E=v*s+y,T=f[E]&RH,I=d[E]&RH,A=a&&h[E]&RH,(T||A||I)&&(b=e(y),w=e(v),!i&&(T||I)&&p.set(b,w),a&&(T||A)&&m.set(b,w));return[p,m]}function NH(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function v$(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>v$(e,s.items,n))}):pd[r].draw(e,{items:n?t.map(pjt):t})}function pjt(e){const t=fj(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Zg=5,Rl=31,mP=32,Fv=new Uint32Array(mP+1),dp=new Uint32Array(mP+1);dp[0]=0;Fv[0]=~dp[0];for(let e=1;e<=mP;++e)dp[e]=dp[e-1]<<1|1,Fv[e]=~dp[e];function mjt(e,t){const n=new Uint32Array(~~((e*t+mP)/mP));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>Zg]&1<<(a&Rl)},set:(s,o)=>{const a=o*e+s;r(a>>>Zg,1<<(a&Rl))},clear:(s,o)=>{const a=o*e+s;i(a>>>Zg,~(1<<(a&Rl)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>Zg,h=f>>>Zg,d===h){if(n[d]&Fv[c&Rl]&dp[(f&Rl)+1])return!0}else{if(n[d]&Fv[c&Rl]||n[h]&dp[(f&Rl)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Zg,d=c>>>Zg,f===d)r(f,Fv[l&Rl]&dp[(c&Rl)+1]);else for(r(f,Fv[l&Rl]),r(d,dp[(c&Rl)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Zg,d=c>>>Zg,f===d)i(f,dp[l&Rl]|Fv[(c&Rl)+1]);else for(i(f,dp[l&Rl]),i(d,Fv[(c&Rl)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function gjt(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>mjt(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function yjt(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=td.width(o.datum,o.datum.text);let f=0,d,h,p,m,y,v,b;for(let w=0;w<u;++w)d=a[w].x,p=a[w].y,h=a[w].x2===void 0?d:a[w].x2,m=a[w].y2===void 0?p:a[w].y2,y=(d+h)/2,v=(p+m)/2,b=Math.abs(h-d+m-p),b>=f&&(f=b,o.x=y,o.y=v);return y=c/2,v=l/2,d=o.x-y,h=o.x+y,p=o.y-v,m=o.y+v,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function c8(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function ib(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function vjt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let y=f,v=s,b;if(!c8(p,m,d,h,i,s)&&!ib(e,p,m,h,d,y,o,a)&&!ib(e,p,m,h,d,h,o,null)){for(;v-y>=1;)b=(y+v)/2,ib(e,p,m,h,d,b,o,a)?v=b:y=b;if(y>f)return[p,m,y,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=td.width(l.datum,l.datum.text);let p=n?d:0,m=!1,y=!1,v=0,b,w,E,T,A,I,R,D,M,$,U,F,H,Q,J,ne,Z;for(let ie=0;ie<f;++ie){for(b=c[ie].x,E=c[ie].y,w=c[ie].x2===void 0?b:c[ie].x2,T=c[ie].y2===void 0?E:c[ie].y2,b>w&&(Z=b,b=w,w=Z),E>T&&(Z=E,E=T,T=Z),M=e(b),U=e(w),$=~~((M+U)/2),F=e(E),Q=e(T),H=~~((F+Q)/2),R=$;R>=M;--R)for(D=H;D>=F;--D)ne=u(R,D,p,h,d),ne&&([l.x,l.y,p,m]=ne);for(R=$;R<=U;++R)for(D=H;D<=Q;++D)ne=u(R,D,p,h,d),ne&&([l.x,l.y,p,m]=ne);!m&&!n&&(J=Math.abs(w-b+T-E),A=(b+w)/2,I=(E+T)/2,J>=v&&!c8(A,I,h,d,i,s)&&!ib(e,A,I,d,h,d,o,null)&&(v=J,l.x=A,l.y=I,y=!0))}return m||y?(A=h/2,I=d/2,o.setRange(e(l.x-A),e(l.y-I),e(l.x+A),e(l.y+I)),l.align="center",l.baseline="middle",!0):!1}}const bjt=[-1,-1,1,1],xjt=[-1,1,-1,1];function _jt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=td.width(l.datum,l.datum.text),p=[];let m=n?d:0,y=!1,v=!1,b=0,w,E,T,A,I,R,D,M,$,U,F,H;for(let Q=0;Q<f;++Q){for(w=c[Q].x,T=c[Q].y,E=c[Q].x2===void 0?w:c[Q].x2,A=c[Q].y2===void 0?T:c[Q].y2,p.push([e((w+E)/2),e((T+A)/2)]);p.length;)if([D,M]=p.pop(),!(o.get(D,M)||a.get(D,M)||u.get(D,M))){u.set(D,M);for(let J=0;J<4;++J)I=D+bjt[J],R=M+xjt[J],u.outOfBounds(I,R,I,R)||p.push([I,R]);if(I=e.invert(D),R=e.invert(M),$=m,U=s,!c8(I,R,h,d,i,s)&&!ib(e,I,R,d,h,$,o,a)&&!ib(e,I,R,d,h,d,o,null)){for(;U-$>=1;)F=($+U)/2,ib(e,I,R,d,h,F,o,a)?U=F:$=F;$>m&&(l.x=I,l.y=R,m=$,y=!0)}}!y&&!n&&(H=Math.abs(E-w+A-T),I=(w+E)/2,R=(T+A)/2,H>=b&&!c8(I,R,h,d,i,s)&&!ib(e,I,R,d,h,d,o,null)&&(b=H,l.x=I,l.y=R,v=!0))}return y||v?(I=h/2,R=d/2,o.setRange(e(l.x-I),e(l.y-R),e(l.x+I),e(l.y+R)),l.align="center",l.baseline="middle",!0):!1}}const wjt=["right","center","left"],Ejt=["bottom","middle","top"];function Tjt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,y,v,b,w,E,T,A,I,R,D,M,$;for(let U=0;U<u;++U){if(h=(n[U]&3)-1,p=(n[U]>>>2&3)-1,m=h===0&&p===0||r[U]<0,y=h&&p?Math.SQRT1_2:1,v=r[U]<0?-1:1,b=c[1+h]+r[U]*h*y,I=c[4+p]+v*f*p/2+r[U]*p*y,E=I-f/2,T=I+f/2,R=e(b),M=e(E),$=e(T),!d)if(Cye(R,R,M,$,o,a,b,b,E,T,c,m))d=td.width(l.datum,l.datum.text);else continue;if(A=b+v*d*h/2,b=A-d/2,w=A+d/2,R=e(b),D=e(w),Cye(R,D,M,$,o,a,b,w,E,T,c,m))return l.x=h?h*v<0?w:b:A,l.y=p?p*v<0?T:E:I,l.align=wjt[h*v+1],l.baseline=Ejt[p*v+1],o.setRange(R,M,D,$),!0}return!1}}function Cye(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const DH=0,PH=4,OH=8,MH=0,LH=1,$H=2,Sjt={"top-left":DH+MH,top:DH+LH,"top-right":DH+$H,left:PH+MH,middle:PH+LH,right:PH+$H,"bottom-left":OH+MH,bottom:OH+LH,"bottom-right":OH+$H},Cjt={naive:yjt,"reduced-search":vjt,floodfill:_jt};function Ajt(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=Ijt(r,f),h=kjt(i,f),p=Rjt(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,y=m==="area",v=Njt(p,m,a,u),b=l===null||l===1/0,w=y&&c==="naive";let E=-1,T=-1;const A=e.map(M=>{const $=b?td.width(M,M.text):void 0;return E=Math.max(E,$),T=Math.max(T,M.fontSize),{datum:M,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:v(M),textWidth:$}});l=l===null||l===1/0?Math.max(E,T)+Math.max(...r):l;const I=gjt(t[0],t[1],l);let R;if(!w){n&&A.sort((U,F)=>n(U.datum,F.datum));let M=!1;for(let U=0;U<h.length&&!M;++U)M=h[U]===5||d[U]<0;const $=(p&&o||y)&&e.map(U=>U.datum);R=s.length||$?hjt(I,$||[],s,M,y):djt(I,o&&A)}const D=y?Cjt[c](I,R,o,u):Tjt(I,R,h,d);return A.forEach(M=>M.opacity=+D(M)),A}function Ijt(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function kjt(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=Sjt[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function Rjt(e){return e&&e.mark&&e.mark.marktype}function Njt(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const MK=["x","y","opacity","align","baseline"],HLe=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function Sse(e){nt.call(this,null,e)}Sse.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:HLe},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:MK.length,default:MK}]};zt(Sse,nt,{transform(e,t){function n(s){const o=e[s];return cr(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&ut("Size parameter should be specified as a [width, height] array.");const i=e.as||MK;return Ajt(t.materialize(t.SOURCE).source||[],e.size,e.sort,Wt(e.offset==null?1:e.offset),Wt(e.anchor||HLe),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const Djt=Object.freeze(Object.defineProperty({__proto__:null,label:Sse},Symbol.toStringTag,{value:"Module"}));function qLe(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Cse(e){nt.call(this,null,e)}Cse.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};zt(Cse,nt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=qLe(r,e.groupby),s=(e.groupby||[]).map(oo),o=s.length,a=e.as||[oo(e.x),oo(e.y)],u=[];i.forEach(l=>{r6e(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(Ei(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const LK={constant:Fre,linear:Bre,log:Z4e,exp:e6e,pow:t6e,quad:jre,poly:n6e},Pjt=(e,t)=>e==="poly"?t:e==="quad"?2:1;function Ase(e){nt.call(this,null,e)}Ase.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(LK)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};zt(Ase,nt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=qLe(r,e.groupby),s=(e.groupby||[]).map(oo),o=e.method||"linear",a=e.order==null?3:e.order,u=Pjt(o,a),l=e.as||[oo(e.x),oo(e.y)],c=LK[o],f=[];let d=e.extent;Jt(LK,o)||ut("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(Ei({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const y=d||K0(h,e.x),v=b=>{const w={};for(let E=0;E<s.length;++E)w[s[E]]=h.dims[E];w[l[0]]=b[0],w[l[1]]=b[1],f.push(Ei(w))};o==="linear"||o==="constant"?y.forEach(b=>v([b,m.predict(b)])):vj(m.predict,y,25,200).forEach(v)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const Ojt=Object.freeze(Object.defineProperty({__proto__:null,loess:Cse,regression:Ase},Symbol.toStringTag,{value:"Module"}));function Ise(e){nt.call(this,null,e)}Ise.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const Mjt=[-1e5,-1e5,1e5,1e5];zt(Ise,nt,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:Mjt;const s=this.value=Lee.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!$jt(u)?Ljt(u):null}return t.reflow(e.modified()).modifies(n)}});function Ljt(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function $jt(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const Fjt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:Ise},Symbol.toStringTag,{value:"Module"}));var FH=Math.PI/180,mN=64,b$=2048;function Bjt(){var e=[256,256],t,n,r,i,s,o,a,u=WLe,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(vb()),m=qjt((e[0]>>5)*e[1]),y=null,v=l.length,b=-1,w=[],E=l.map(A=>({text:t(A),font:n(A),style:i(A),weight:s(A),rotate:o(A),size:~~(r(A)+1e-14),padding:a(A),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:A})).sort((A,I)=>I.size-A.size);++b<v;){var T=E[b];T.x=e[0]*(c()+.5)>>1,T.y=e[1]*(c()+.5)>>1,jjt(p,T,E,b),T.hasText&&h(m,T,y)&&(w.push(T),y?zjt(y,T):y=[{x:T.x+T.x0,y:T.y+T.y0},{x:T.x+T.x1,y:T.y+T.y1}],T.x-=e[0]>>1,T.y-=e[1]>>1)}return w};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(mN<<5)/m,p.height=b$/m;var y=p.getContext("2d");return y.fillStyle=y.strokeStyle="red",y.textAlign="center",{context:y,ratio:m}}function h(p,m,y){for(var v=m.x,b=m.y,w=Math.hypot(e[0],e[1]),E=u(e),T=c()<.5?1:-1,A=-T,I,R,D;(I=E(A+=T))&&(R=~~I[0],D=~~I[1],!(Math.min(Math.abs(R),Math.abs(D))>=w));)if(m.x=v+R,m.y=b+D,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!y||!Ujt(m,p,e[0]))&&(!y||Vjt(m,y))){for(var M=m.sprite,$=m.width>>5,U=e[0]>>5,F=m.x-($<<4),H=F&127,Q=32-H,J=m.y1-m.y0,ne=(m.y+m.y0)*U+(F>>5),Z,ie=0;ie<J;ie++){Z=0;for(var q=0;q<=$;q++)p[ne+q]|=Z<<Q|(q<$?(Z=M[ie*$+q])>>>H:0);ne+=U}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=A_(p),f):n},f.fontStyle=function(p){return arguments.length?(i=A_(p),f):i},f.fontWeight=function(p){return arguments.length?(s=A_(p),f):s},f.rotate=function(p){return arguments.length?(o=A_(p),f):o},f.text=function(p){return arguments.length?(t=A_(p),f):t},f.spiral=function(p){return arguments.length?(u=Wjt[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=A_(p),f):r},f.padding=function(p){return arguments.length?(a=A_(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function jjt(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(mN<<5)/s,b$/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*FH),y=Math.cos(t.rotate*FH),v=c*y,b=c*m,w=d*y,E=d*m;c=Math.max(Math.abs(v+E),Math.abs(v-E))+31>>5<<5,d=~~Math.max(Math.abs(b+w),Math.abs(b-w))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=mN<<5&&(o=0,a+=u,u=0),a+d>=b$)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*FH),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var T=i.getImageData(0,0,(mN<<5)/s,b$/s).data,A=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)A[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var I=0,R=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var D=f*p+(h>>5),M=T[(a+p)*(mN<<5)+(o+h)<<2]?1<<31-h%32:0;A[D]|=M,I|=M}I?R=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+R,t.sprite=A.slice(0,(t.y1-t.y0)*f)}}}function Ujt(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function zjt(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function Vjt(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function WLe(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Hjt(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function qjt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function A_(e){return typeof e=="function"?e:function(){return e}}var Wjt={archimedean:WLe,rectangular:Hjt};const GLe=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Gjt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function kse(e){nt.call(this,Bjt(),e)}kse.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:GLe}]};zt(kse,nt,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&ut("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return cr(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||Gjt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||GLe;let a=e.fontSize||14,u;if(cr(a)?u=e.fontSizeRange:a=hl(a),u){const p=a,m=vi("sqrt")().domain(K0(i,p)).range(u);a=y=>m(p(y))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(ch).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,y;p<h;++p)m=l[p],y=m.datum,y[o[0]]=m.x+f,y[o[1]]=m.y+d,y[o[2]]=m.font,y[o[3]]=m.size,y[o[4]]=m.style,y[o[5]]=m.weight,y[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const Yjt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:kse},Symbol.toStringTag,{value:"Module"})),Kjt=e=>new Uint8Array(e),Xjt=e=>new Uint16Array(e),ZN=e=>new Uint32Array(e);function Qjt(){let e=8,t=[],n=ZN(0),r=O6(0,e),i=O6(0,e);return{data:()=>t,seen:()=>n=Jjt(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=O6(s,e,r),i=O6(s,e))}}}function Jjt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function O6(e,t,n){const r=(t<257?Kjt:t<65537?Xjt:ZN)(e);return n&&r.set(n),r}function Aye(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function Iye(){let e=ZN(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=ZN(f);let h=Array(f),p,m,y;for(y=0;y<f;++y)h[y]=a(u[y]),d[y]=y;if(h=Zjt(h,d),c)p=t,m=e,t=Array(c+f),e=ZN(c+f),e7t(l,p,m,c,h,d,f,t,e);else{if(l>0)for(y=0;y<f;++y)d[y]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[X1t(u,a[0],0,l),Db(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function Zjt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),Z1t(e,t)}function e7t(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function Rse(e){nt.call(this,Qjt(),e),this._indices=null,this._dims=null}Rse.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};zt(Rse,nt,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=Iye()),s.push(Aye(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,y,v,b,w,E,T,A,I;if(l.set(u),t.rem.length&&(w=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(E={},b=t.mod,T=0,A=b.length;T<A;++T)E[b[T]._index]=1;for(T=0;T<h;++T)I=r[T],(!o[T]||e.modified("fields",T)||t.modified(I.fields))&&(v=I.fname,(m=p[v])||(s[v]=y=Iye(),p[v]=m=y.insert(I,t.source,0)),o[T]=Aye(y,T,i[T]).onAdd(m,u));for(T=0,A=a.data().length;T<A;++T)w[T]||(l[T]!==u[T]?f.push(T):E[T]&&u[T]!==c&&d.push(T));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const y=i.curr(),v=i.prev(),b=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,y);for(;d<c;++d)v[d]=b,y[d]!==b&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let y,v,b;if(f<h)for(y=f,v=Math.min(h,d);y<v;++y)b=u[y],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=m;else if(f>h)for(y=h,v=Math.min(f,p);y<v;++y)b=u[y],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=m;if(d>p)for(y=Math.max(f,p),v=d;y<v;++y)b=u[y],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=m;else if(d<p)for(y=Math.max(h,d),v=p;y<v;++y)b=u[y],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,y;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)y=o[p],s[y]^=h,n.push(y);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)y=o[p],s[y]^=h,r.push(y);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)y=o[p],s[y]^=h,n.push(y);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)y=o[p],s[y]^=h,r.push(y);e.range=t.slice()}});function Nse(e){nt.call(this,null,e)}Nse.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};zt(Nse,nt,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const t7t=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:Rse,resolvefilter:Nse},Symbol.toStringTag,{value:"Module"})),n7t="RawCode",XC="Literal",r7t="Property",i7t="Identifier",s7t="ArrayExpression",o7t="BinaryExpression",YLe="CallExpression",a7t="ConditionalExpression",u7t="LogicalExpression",l7t="MemberExpression",c7t="ObjectExpression",f7t="UnaryExpression";function nm(e){this.type=e}nm.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=d7t(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function d7t(e){switch(e.type){case s7t:return e.elements;case o7t:case u7t:return[e.left,e.right];case YLe:return[e.callee].concat(e.arguments);case a7t:return[e.test,e.consequent,e.alternate];case l7t:return[e.object,e.property];case c7t:return e.properties;case r7t:return[e.key,e.value];case f7t:return[e.argument];case i7t:case XC:case n7t:default:return[]}}var fg,hn,ot,al,Li,Lj=1,tO=2,uE=3,kx=4,$j=5,XE=6,$c=7,nO=8,h7t=9;fg={};fg[Lj]="Boolean";fg[tO]="<end>";fg[uE]="Identifier";fg[kx]="Keyword";fg[$j]="Null";fg[XE]="Numeric";fg[$c]="Punctuator";fg[nO]="String";fg[h7t]="RegularExpression";var p7t="ArrayExpression",m7t="BinaryExpression",g7t="CallExpression",y7t="ConditionalExpression",KLe="Identifier",v7t="Literal",b7t="LogicalExpression",x7t="MemberExpression",_7t="ObjectExpression",w7t="Property",E7t="UnaryExpression",La="Unexpected token %0",T7t="Unexpected number",S7t="Unexpected string",C7t="Unexpected identifier",A7t="Unexpected reserved word",I7t="Unexpected end of input",$K="Invalid regular expression",BH="Invalid regular expression: missing /",XLe="Octal literals are not allowed in strict mode.",k7t="Duplicate data property in object literal not allowed in strict mode",yu="ILLEGAL",gP="Disabled.",R7t=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),N7t=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function Fj(e,t){if(!e)throw new Error("ASSERT: "+t)}function fy(e){return e>=48&&e<=57}function Dse(e){return"0123456789abcdefABCDEF".includes(e)}function eD(e){return"01234567".includes(e)}function D7t(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function yP(e){return e===10||e===13||e===8232||e===8233}function rO(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&R7t.test(String.fromCharCode(e))}function f8(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&N7t.test(String.fromCharCode(e))}const P7t={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function QLe(){for(;ot<al;){const e=hn.charCodeAt(ot);if(D7t(e)||yP(e))++ot;else break}}function FK(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)ot<al&&Dse(hn[ot])?(r=hn[ot++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):pi({},La,yu);return String.fromCharCode(i)}function O7t(){var e,t,n,r;for(e=hn[ot],t=0,e==="}"&&pi({},La,yu);ot<al&&(e=hn[ot++],!!Dse(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&pi({},La,yu),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function JLe(){var e,t;for(e=hn.charCodeAt(ot++),t=String.fromCharCode(e),e===92&&(hn.charCodeAt(ot)!==117&&pi({},La,yu),++ot,e=FK("u"),(!e||e==="\\"||!rO(e.charCodeAt(0)))&&pi({},La,yu),t=e);ot<al&&(e=hn.charCodeAt(ot),!!f8(e));)++ot,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),hn.charCodeAt(ot)!==117&&pi({},La,yu),++ot,e=FK("u"),(!e||e==="\\"||!f8(e.charCodeAt(0)))&&pi({},La,yu),t+=e);return t}function M7t(){var e,t;for(e=ot++;ot<al;){if(t=hn.charCodeAt(ot),t===92)return ot=e,JLe();if(f8(t))++ot;else break}return hn.slice(e,ot)}function L7t(){var e,t,n;return e=ot,t=hn.charCodeAt(ot)===92?JLe():M7t(),t.length===1?n=uE:P7t.hasOwnProperty(t)?n=kx:t==="null"?n=$j:t==="true"||t==="false"?n=Lj:n=uE,{type:n,value:t,start:e,end:ot}}function jH(){var e=ot,t=hn.charCodeAt(ot),n,r=hn[ot],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ot,{type:$c,value:String.fromCharCode(t),start:e,end:ot};default:if(n=hn.charCodeAt(ot+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ot+=2,{type:$c,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:ot};case 33:case 61:return ot+=2,hn.charCodeAt(ot)===61&&++ot,{type:$c,value:hn.slice(e,ot),start:e,end:ot}}}if(o=hn.substr(ot,4),o===">>>=")return ot+=4,{type:$c,value:o,start:e,end:ot};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return ot+=3,{type:$c,value:s,start:e,end:ot};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return ot+=2,{type:$c,value:i,start:e,end:ot};if(i==="//"&&pi({},La,yu),"<>=!+-*%&|^/".includes(r))return++ot,{type:$c,value:r,start:e,end:ot};pi({},La,yu)}function $7t(e){let t="";for(;ot<al&&Dse(hn[ot]);)t+=hn[ot++];return t.length===0&&pi({},La,yu),rO(hn.charCodeAt(ot))&&pi({},La,yu),{type:XE,value:parseInt("0x"+t,16),start:e,end:ot}}function F7t(e){let t="0"+hn[ot++];for(;ot<al&&eD(hn[ot]);)t+=hn[ot++];return(rO(hn.charCodeAt(ot))||fy(hn.charCodeAt(ot)))&&pi({},La,yu),{type:XE,value:parseInt(t,8),octal:!0,start:e,end:ot}}function kye(){var e,t,n;if(n=hn[ot],Fj(fy(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=ot,e="",n!=="."){if(e=hn[ot++],n=hn[ot],e==="0"){if(n==="x"||n==="X")return++ot,$7t(t);if(eD(n))return F7t(t);n&&fy(n.charCodeAt(0))&&pi({},La,yu)}for(;fy(hn.charCodeAt(ot));)e+=hn[ot++];n=hn[ot]}if(n==="."){for(e+=hn[ot++];fy(hn.charCodeAt(ot));)e+=hn[ot++];n=hn[ot]}if(n==="e"||n==="E")if(e+=hn[ot++],n=hn[ot],(n==="+"||n==="-")&&(e+=hn[ot++]),fy(hn.charCodeAt(ot)))for(;fy(hn.charCodeAt(ot));)e+=hn[ot++];else pi({},La,yu);return rO(hn.charCodeAt(ot))&&pi({},La,yu),{type:XE,value:parseFloat(e),start:t,end:ot}}function B7t(){var e="",t,n,r,i,s=!1;for(t=hn[ot],Fj(t==="'"||t==='"',"String literal must starts with a quote"),n=ot,++ot;ot<al;)if(r=hn[ot++],r===t){t="";break}else if(r==="\\")if(r=hn[ot++],!r||!yP(r.charCodeAt(0)))switch(r){case"u":case"x":hn[ot]==="{"?(++ot,e+=O7t()):e+=FK(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:eD(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),ot<al&&eD(hn[ot])&&(s=!0,i=i*8+"01234567".indexOf(hn[ot++]),"0123".includes(r)&&ot<al&&eD(hn[ot])&&(i=i*8+"01234567".indexOf(hn[ot++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&hn[ot]===`
`&&++ot;else{if(yP(r.charCodeAt(0)))break;e+=r}return t!==""&&pi({},La,yu),{type:nO,value:e,octal:s,start:n,end:ot}}function j7t(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";pi({},$K)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{pi({},$K)}try{return new RegExp(e,t)}catch{return null}}function U7t(){var e,t,n,r,i;for(e=hn[ot],Fj(e==="/","Regular expression literal must start with a slash"),t=hn[ot++],n=!1,r=!1;ot<al;)if(e=hn[ot++],t+=e,e==="\\")e=hn[ot++],yP(e.charCodeAt(0))&&pi({},BH),t+=e;else if(yP(e.charCodeAt(0)))pi({},BH);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||pi({},BH),i=t.substr(1,t.length-2),{value:i,literal:t}}function z7t(){var e,t,n;for(t="",n="";ot<al&&(e=hn[ot],!!f8(e.charCodeAt(0)));)++ot,e==="\\"&&ot<al?pi({},La,yu):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&pi({},$K,n),{value:n,literal:t}}function V7t(){var e,t,n,r;return Li=null,QLe(),e=ot,t=U7t(),n=z7t(),r=j7t(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:ot}}function H7t(e){return e.type===uE||e.type===kx||e.type===Lj||e.type===$j}function ZLe(){if(QLe(),ot>=al)return{type:tO,start:ot,end:ot};const e=hn.charCodeAt(ot);return rO(e)?L7t():e===40||e===41||e===59?jH():e===39||e===34?B7t():e===46?fy(hn.charCodeAt(ot+1))?kye():jH():fy(e)?kye():jH()}function zc(){const e=Li;return ot=e.end,Li=ZLe(),ot=e.end,e}function e$e(){const e=ot;Li=ZLe(),ot=e}function q7t(e){const t=new nm(p7t);return t.elements=e,t}function Rye(e,t,n){const r=new nm(e==="||"||e==="&&"?b7t:m7t);return r.operator=e,r.left=t,r.right=n,r}function W7t(e,t){const n=new nm(g7t);return n.callee=e,n.arguments=t,n}function G7t(e,t,n){const r=new nm(y7t);return r.test=e,r.consequent=t,r.alternate=n,r}function Pse(e){const t=new nm(KLe);return t.name=e,t}function gN(e){const t=new nm(v7t);return t.value=e.value,t.raw=hn.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Nye(e,t,n){const r=new nm(x7t);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function Y7t(e){const t=new nm(_7t);return t.properties=e,t}function Dye(e,t,n){const r=new nm(w7t);return r.key=t,r.value=n,r.kind=e,r}function K7t(e,t){const n=new nm(E7t);return n.operator=e,n.argument=t,n.prefix=!0,n}function pi(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(Fj(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=ot,n.description=i,n}function Bj(e){e.type===tO&&pi(e,I7t),e.type===XE&&pi(e,T7t),e.type===nO&&pi(e,S7t),e.type===uE&&pi(e,C7t),e.type===kx&&pi(e,A7t),pi(e,La,e.value)}function ul(e){const t=zc();(t.type!==$c||t.value!==e)&&Bj(t)}function xs(e){return Li.type===$c&&Li.value===e}function UH(e){return Li.type===kx&&Li.value===e}function X7t(){const e=[];for(ot=Li.start,ul("[");!xs("]");)xs(",")?(zc(),e.push(null)):(e.push(lE()),xs("]")||ul(","));return zc(),q7t(e)}function Pye(){ot=Li.start;const e=zc();return e.type===nO||e.type===XE?(e.octal&&pi(e,XLe),gN(e)):Pse(e.value)}function Q7t(){var e,t,n,r;if(ot=Li.start,e=Li,e.type===uE)return n=Pye(),ul(":"),r=lE(),Dye("init",n,r);if(e.type===tO||e.type===$c)Bj(e);else return t=Pye(),ul(":"),r=lE(),Dye("init",t,r)}function J7t(){var e=[],t,n,r,i={},s=String;for(ot=Li.start,ul("{");!xs("}");)t=Q7t(),t.key.type===KLe?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?pi({},k7t):i[r]=!0,e.push(t),xs("}")||ul(",");return ul("}"),Y7t(e)}function Z7t(){ul("(");const e=Ose();return ul(")"),e}const eUt={if:1};function tUt(){var e,t,n;if(xs("("))return Z7t();if(xs("["))return X7t();if(xs("{"))return J7t();if(e=Li.type,ot=Li.start,e===uE||eUt[Li.value])n=Pse(zc().value);else if(e===nO||e===XE)Li.octal&&pi(Li,XLe),n=gN(zc());else{if(e===kx)throw new Error(gP);e===Lj?(t=zc(),t.value=t.value==="true",n=gN(t)):e===$j?(t=zc(),t.value=null,n=gN(t)):xs("/")||xs("/=")?(n=gN(V7t()),e$e()):Bj(zc())}return n}function nUt(){const e=[];if(ul("("),!xs(")"))for(;ot<al&&(e.push(lE()),!xs(")"));)ul(",");return ul(")"),e}function rUt(){ot=Li.start;const e=zc();return H7t(e)||Bj(e),Pse(e.value)}function iUt(){return ul("."),rUt()}function sUt(){ul("[");const e=Ose();return ul("]"),e}function oUt(){var e,t,n;for(e=tUt();;)if(xs("."))n=iUt(),e=Nye(".",e,n);else if(xs("("))t=nUt(),e=W7t(e,t);else if(xs("["))n=sUt(),e=Nye("[",e,n);else break;return e}function Oye(){const e=oUt();if(Li.type===$c&&(xs("++")||xs("--")))throw new Error(gP);return e}function x$(){var e,t;if(Li.type!==$c&&Li.type!==kx)t=Oye();else{if(xs("++")||xs("--"))throw new Error(gP);if(xs("+")||xs("-")||xs("~")||xs("!"))e=zc(),t=x$(),t=K7t(e.value,t);else{if(UH("delete")||UH("void")||UH("typeof"))throw new Error(gP);t=Oye()}}return t}function Mye(e){let t=0;if(e.type!==$c&&e.type!==kx)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function aUt(){var e,t,n,r,i,s,o,a,u,l;if(e=Li,u=x$(),r=Li,i=Mye(r),i===0)return u;for(r.prec=i,zc(),t=[e,Li],o=x$(),s=[u,r,o];(i=Mye(Li))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=Rye(a,u,o),s.push(n);r=zc(),r.prec=i,s.push(r),t.push(Li),n=x$(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=Rye(s[l-1].value,s[l-2],n),l-=2;return n}function lE(){var e,t,n;return e=aUt(),xs("?")&&(zc(),t=lE(),ul(":"),n=lE(),e=G7t(e,t,n)),e}function Ose(){const e=lE();if(xs(","))throw new Error(gP);return e}function Mse(e){hn=e,ot=0,al=hn.length,Li=null,e$e();const t=Ose();if(Li.type!==tO)throw new Error("Unexpect token after expression.");return t}var t$e={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function n$e(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&ut("Missing arguments to clamp function."),o.length>3&&ut("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&ut("Missing arguments to if function."),o.length>3&&ut("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function uUt(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function r$e(e){e=e||{};const t=e.allowed?zp(e.allowed):{},n=e.forbidden?zp(e.forbidden):{},r=e.constants||t$e,i=(e.functions||n$e)(f),s=e.globalvar,o=e.fieldvar,a=cr(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(Gt(p))return p;const m=d[p.type];return m==null&&ut("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:Jt(n,m)?ut("Illegal identifier: "+m):Jt(r,m)?r[m]:Jt(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,y=f(p.object);m&&(c+=1);const v=f(p.property);return y===o&&(l[uUt(v)]=1),m&&(c-=1),y+(m?"."+v:"["+v+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&ut("Illegal callee type: "+p.callee.type);const m=p.callee.name,y=p.arguments,v=Jt(i,m)&&i[m];return v||ut("Unrecognized function: "+m),cr(v)?v(y):v+"("+y.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const lUt="Literal";var dg,cUt=1,fUt=2,dUt=3,hUt=4,pUt=5,mUt=6,gUt=7,yUt=8,vUt=9;dg={};dg[cUt]="Boolean";dg[fUt]="<end>";dg[dUt]="Identifier";dg[hUt]="Keyword";dg[pUt]="Null";dg[mUt]="Numeric";dg[gUt]="Punctuator";dg[yUt]="String";dg[vUt]="RegularExpression";const Lye=Symbol("vega_selection_getter");function i$e(e){return(!e.getter||!e.getter[Lye])&&(e.getter=ah(e.field),e.getter[Lye]=!0),e.getter}const Lse="intersect",$ye="union",bUt="vlMulti",xUt="vlPoint",Fye="or",_Ut="and",Xm="_vgsid_",vP=ah(Xm),wUt="E",EUt="R",TUt="R-E",SUt="R-LE",CUt="R-RE",d8="index:unit";function Bye(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=i$e(a)(e),gb(o)&&(o=rl(o)),gb(r[s])&&(r[s]=rl(r[s])),ct(r[s])&&gb(r[s][0])&&(r[s]=r[s].map(rl)),a.type===wUt){if(ct(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===EUt){if(!_2(o,r[s]))return!1}else if(a.type===CUt){if(!_2(o,r[s],!0,!1))return!1}else if(a.type===TUt){if(!_2(o,r[s],!1,!1))return!1}else if(a.type===SUt&&!_2(o,r[s],!1,!0))return!1;return!0}function AUt(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[d8]&&r[d8].value:void 0,o=n===Lse,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=Bye(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=Bye(t,l),o^h)return h;return a&&o}const s$e=WA(vP),IUt=s$e.left,kUt=s$e.right;function RUt(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[d8]&&r[d8].value:void 0,o=n===Lse,a=vP(t),u=IUt(i,a);if(u===i.length||vP(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(kUt(i,a)-u<s.size)return!1}return!0}function NUt(e,t){return e.map(n=>lr(t.fields?{values:t.fields.map(r=>i$e(r)(n.datum))}:{[Xm]:vP(n.datum)},t))}function DUt(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,y,v,b,w=s.length,E=0,T,A;E<w;++E)if(l=s[E],d=l.unit,c=l.fields,f=l.values,c&&f){for(T=0,A=c.length;T<A;++T)h=c[T],m=o[h.field]||(o[h.field]={}),y=m[d]||(m[d]=[]),u[h.field]=v=h.type.charAt(0),b=zH[`${v}_union`],m[d]=b(y,Wt(f[T]));n&&(y=a[d]||(a[d]=[]),y.push(Wt(f).reduce((I,R,D)=>(I[c[D].field]=R,I),{})))}else h=Xm,p=vP(l),m=o[h]||(o[h]={}),y=m[d]||(m[d]=[]),y.push(p),n&&(y=a[d]||(a[d]=[]),y.push({[Xm]:p}));if(t=t||$ye,o[Xm]?o[Xm]=zH[`${Xm}_${t}`](...Object.values(o[Xm])):Object.keys(o).forEach(I=>{o[I]=Object.keys(o[I]).map(R=>o[I][R]).reduce((R,D)=>R===void 0?D:zH[`${u[I]}_${t}`](R,D))}),s=Object.keys(a),n&&s.length){const I=r?xUt:bUt;o[I]=t===$ye?{[Fye]:s.reduce((R,D)=>(R.push(...a[D]),R),[])}:{[_Ut]:s.map(R=>({[Fye]:a[R]}))}}return o}var zH={[`${Xm}_union`]:uvt,[`${Xm}_intersect`]:ovt,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=rl(t[0]),r=rl(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=rl(t[0]),r=rl(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const PUt=":",OUt="@";function $se(e,t,n,r){t[0].type!==lUt&&ut("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Yr(t).value,o="unit",a=OUt+o,u=PUt+i;s===Lse&&!Jt(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),Jt(r,u)||(r[u]=n.getData(i).tuplesRef())}function o$e(e){const t=this.context.data[e];return t?t.values.value:[]}function MUt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function LUt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(uh).insert(t)),1}function $Ut(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const iO=e=>function(t,n){const r=this.context.dataflow.locale();return t===null?"null":r[e](n)(t)},FUt=iO("format"),a$e=iO("timeFormat"),BUt=iO("utcFormat"),jUt=iO("timeParse"),UUt=iO("utcParse"),M6=new Date(2e3,0,1);function jj(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(M6.setYear(2e3),M6.setMonth(e),M6.setDate(t),a$e.call(this,M6,n))}function zUt(e){return jj.call(this,e,1,"%B")}function VUt(e){return jj.call(this,e,1,"%b")}function HUt(e){return jj.call(this,0,2+e,"%A")}function qUt(e){return jj.call(this,0,2+e,"%a")}const WUt=":",GUt="@",BK="%",u$e="$";function Fse(e,t,n,r){t[0].type!==XC&&ut("First argument to data functions must be a string literal.");const i=t[0].value,s=WUt+i;if(!Jt(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function YUt(e,t,n,r){t[0].type!==XC&&ut("First argument to indata must be a string literal."),t[1].type!==XC&&ut("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=GUt+s;Jt(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function Wl(e,t,n,r){if(t[0].type===XC)jye(n,r,t[0].value);else for(e in n.scales)jye(n,r,e)}function jye(e,t,n){const r=BK+n;if(!Jt(t,r))try{t[r]=e.scaleRef(n)}catch{}}function hg(e,t){if(cr(e))return e;if(Gt(e)){const n=t.scales[e];return n&&cFt(n.value)?n.value:void 0}}function KUt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Wl,n._range=Wl,n._scale=Wl;const r=i=>"_["+(i.type===XC?jt(BK+i.value):jt(BK)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function Bse(e,t){return function(n,r,i){if(n){const s=hg(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const XUt=Bse("area",_Et),QUt=Bse("bounds",SEt),JUt=Bse("centroid",NEt);function ZUt(e,t){const n=hg(e,(t||this).context);return n&&n.scale()}function ezt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function jse(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function tzt(){return jse(this.context.dataflow,"warn",arguments)}function nzt(){return jse(this.context.dataflow,"info",arguments)}function rzt(){return jse(this.context.dataflow,"debug",arguments)}function VH(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function jK(e){const t=Ob(e),n=VH(t.r),r=VH(t.g),i=VH(t.b);return .2126*n+.7152*r+.0722*i}function izt(e,t){const n=jK(e),r=jK(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function szt(){const e=[].slice.call(arguments);return e.unshift({}),lr(...e)}function l$e(e,t){return e===t||e!==e&&t!==t?!0:ct(e)?ct(t)&&e.length===t.length?ozt(e,t):!1:Ht(e)&&Ht(t)?c$e(e,t):!1}function ozt(e,t){for(let n=0,r=e.length;n<r;++n)if(!l$e(e[n],t[n]))return!1;return!0}function c$e(e,t){for(const n in e)if(!l$e(e[n],t[n]))return!1;return!0}function Uye(e){return t=>c$e(e,t)}function azt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?uh:ct(n)||cj(n)?n:Uye(n),c.remove(f)),t&&c.insert(t),r&&(f=Uye(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function uzt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function lzt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const zye={};function czt(e,t){const n=zye[t]||(zye[t]=ah(t));return ct(e)?e.map(n):n(e)}function Use(e){return ct(e)||ArrayBuffer.isView(e)?e:null}function zse(e){return Use(e)||(Gt(e)?e:null)}function fzt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Use(e).join(...n)}function dzt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return zse(e).indexOf(...n)}function hzt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return zse(e).lastIndexOf(...n)}function pzt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return zse(e).slice(...n)}function mzt(e,t,n){return cr(n)&&ut("Function argument passed to replace."),String(e).replace(t,n)}function gzt(e){return Use(e).slice().reverse()}function yzt(e,t,n){return die(e||0,t||0,n||0)}function vzt(e,t){const n=hg(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function bzt(e,t){const n=hg(e,(t||this).context);return n?n.copy():void 0}function xzt(e,t){const n=hg(e,(t||this).context);return n?n.domain():[]}function _zt(e,t,n){const r=hg(e,(n||this).context);return r?ct(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function wzt(e,t){const n=hg(e,(t||this).context);return n&&n.range?n.range():[]}function Ezt(e,t,n){const r=hg(e,(n||this).context);return r?r(t):void 0}function Tzt(e,t,n,r,i){e=hg(e,(i||this).context);const s=eMe(t,n);let o=e.domain(),a=o[0],u=Yr(o),l=dl;return u-a?l=z6e(e,a,u):e=(e.interpolator?vi("sequential")().interpolator(e.interpolator()):vi("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==Yr(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function Szt(e,t,n){const r=hg(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function Czt(e){let t=null;return function(n){return n?dP(n,t=t||WC(e)):e}}const f$e=e=>e.data;function d$e(e,t){const n=o$e.call(t,e);return n.root&&n.root.lookup||{}}function Azt(e,t,n){const r=d$e(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(f$e):void 0}function Izt(e,t){const n=d$e(e,this)[t];return n?n.ancestors().map(f$e):void 0}const h$e=()=>typeof window<"u"&&window||null;function kzt(){const e=h$e();return e?e.screen:{}}function Rzt(){const e=h$e();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function Nzt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function p$e(e,t,n){if(!e)return[];const[r,i]=e,s=new Go().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return QMe(o,s,Dzt(t))}function Dzt(e){let t=null;if(e){const n=Wt(e.marktype),r=Wt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function Pzt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=Wt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function Ozt(e){return Wt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function Mzt(e,t,n){const{x:r,y:i,mark:s}=n,o=new Go().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),p$e([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>Lzt(u.x,u.y,t))}function Lzt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const bP={random(){return ch()},cumulativeNormal:mj,cumulativeLogNormal:Dre,cumulativeUniform:Lre,densityNormal:Are,densityLogNormal:Nre,densityUniform:Mre,quantileNormal:gj,quantileLogNormal:Pre,quantileUniform:$re,sampleNormal:pj,sampleLogNormal:Rre,sampleUniform:Ore,isArray:ct,isBoolean:Ix,isDate:gb,isDefined(e){return e!==void 0},isNumber:yi,isObject:Ht,isRegExp:JOe,isString:Gt,isTuple:cj,isValid(e){return e!=null&&e===e},toBoolean:fre,toDate(e){return dre(e)},toNumber:rl,toString:hre,indexof:dzt,join:fzt,lastindexof:hzt,replace:mzt,reverse:gzt,slice:pzt,flush:XOe,lerp:ZOe,merge:szt,pad:n4e,peek:Yr,pluck:czt,span:F3,inrange:_2,truncate:r4e,rgb:Ob,lab:wF,hcl:EF,hsl:xF,luminance:jK,contrast:izt,sequence:Hc,format:FUt,utcFormat:BUt,utcParse:UUt,utcOffset:y4e,utcSequence:x4e,timeFormat:a$e,timeParse:jUt,timeOffset:g4e,timeSequence:b4e,timeUnitSpecifier:s4e,monthFormat:zUt,monthAbbrevFormat:VUt,dayFormat:HUt,dayAbbrevFormat:qUt,quarter:WOe,utcquarter:GOe,week:a4e,utcweek:c4e,dayofyear:o4e,utcdayofyear:l4e,warn:tzt,info:nzt,debug:rzt,extent(e){return K0(e)},inScope:ezt,intersect:p$e,clampRange:YOe,pinchDistance:uzt,pinchAngle:lzt,screen:kzt,containerSize:Nzt,windowSize:Rzt,bandspace:yzt,setdata:LUt,pathShape:Czt,panLinear:zOe,panLog:VOe,panPow:HOe,panSymlog:qOe,zoomLinear:sre,zoomLog:ore,zoomPow:q5,zoomSymlog:are,encode:$Ut,modify:azt,lassoAppend:Pzt,lassoPath:Ozt,intersectLasso:Mzt},$zt=["view","item","group","xy","x","y"],Fzt="event.vega.",m$e="this.",Vse={},g$e={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${jt(u$e+e)}]`,functions:Bzt,constants:t$e,visitors:Vse},y$e=r$e(g$e);function Bzt(e){const t=n$e(e);$zt.forEach(n=>t[n]=Fzt+n);for(const n in bP)t[n]=m$e+n;return lr(t,KUt(e,bP,Vse)),t}function Do(e,t,n){return arguments.length===1?bP[e]:(bP[e]=t,n&&(Vse[e]=n),y$e.functions[e]=m$e+e,this)}Do("bandwidth",vzt,Wl);Do("copy",bzt,Wl);Do("domain",xzt,Wl);Do("range",wzt,Wl);Do("invert",_zt,Wl);Do("scale",Ezt,Wl);Do("gradient",Tzt,Wl);Do("geoArea",XUt,Wl);Do("geoBounds",QUt,Wl);Do("geoCentroid",JUt,Wl);Do("geoShape",Szt,Wl);Do("geoScale",ZUt,Wl);Do("indata",MUt,YUt);Do("data",o$e,Fse);Do("treePath",Azt,Fse);Do("treeAncestors",Izt,Fse);Do("vlSelectionTest",AUt,$se);Do("vlSelectionIdTest",RUt,$se);Do("vlSelectionResolve",DUt,$se);Do("vlSelectionTuples",NUt);function Q0(e,t){const n={};let r;try{e=Gt(e)?e:jt(e)+"",r=Mse(e)}catch{ut("Expression parse error: "+e)}r.visit(s=>{if(s.type!==YLe)return;const o=s.callee.name,a=g$e.visitors[o];a&&a(o,s.arguments,t,n)});const i=y$e(r);return i.globals.forEach(s=>{const o=u$e+s;!Jt(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:lr({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function jzt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const Uzt=zp(["rule"]),Vye=zp(["group","image","rect"]);function zzt(e,t){let n="";return Uzt[t]||(e.x2&&(e.x?(Vye[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(Vye[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function Hse(e){return(e+"").toLowerCase()}function Vzt(e){return Hse(e)==="operator"}function Hzt(e){return Hse(e)==="collect"}function yR(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function qzt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var Wzt={operator:(e,t)=>yR(e,["_"],t.code),parameter:(e,t)=>yR(e,["datum","_"],t.code),event:(e,t)=>yR(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return yR(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+jt(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=zzt(r,n),i+="return m;",yR(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(jt).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),qzt(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function Gzt(e){const t=this;Vzt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function Yzt(e){const t=this;if(e.params){const n=t.get(e.id);n||ut("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function Kzt(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=ct(i)?i.map(s=>Hye(s,n,t)):Hye(i,n,t)}return t}function Hye(e,t,n){if(!e||!Ht(e))return e;for(let r=0,i=qye.length,s;r<i;++r)if(s=qye[r],Jt(e,s.key))return s.parse(e,t,n);return e}var qye=[{key:"$ref",parse:Xzt},{key:"$key",parse:Jzt},{key:"$expr",parse:Qzt},{key:"$field",parse:Zzt},{key:"$encode",parse:tVt},{key:"$compare",parse:eVt},{key:"$context",parse:nVt},{key:"$subflow",parse:rVt},{key:"$tupleid",parse:iVt}];function Xzt(e,t){return t.get(e.$ref)||ut("Operator not defined: "+e.$ref)}function Qzt(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=cf(t.parameterExpression(e.$expr),e.$fields))}function Jzt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=cre(e.$key,e.$flat,t.expr.codegen))}function Zzt(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=ah(e.$field,e.$name,t.expr.codegen))}function eVt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=Wt(e.$compare).map(i=>i&&i.$tupleid?bn:i);return t.fn[n]||(t.fn[n]=ure(r,e.$order,t.expr.codegen))}function tVt(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=cf(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function nVt(e,t){return t}function rVt(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function iVt(){return bn}function sVt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&ut("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function oVt(e){var t=this,n=Ht(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||ut("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const aVt={skip:!0};function uVt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function lVt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],aVt)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(uh).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function v$e(e,t,n,r){return new b$e(e,t,n,r)}function b$e(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||Wzt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Wye(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}b$e.prototype=Wye.prototype={fork(){const e=new Wye(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),Hzt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[Hse(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:jzt,parseOperator:Gzt,parseOperatorParameters:Yzt,parseParameters:Kzt,parseStream:sVt,parseUpdate:oVt,getState:uVt,setState:lVt};function cVt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),x$e(t,e.description()))}function x$e(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function fVt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const HH="default";function dVt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:HH,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?Gt(i)?i:i.user:HH,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return Gt(r)||(i=r.item,r=r.user),UK(e,r&&r!==HH?r:i||r),i},{cursor:t})}function UK(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function h8(e,t){var n=e._runtime.data;return Jt(n,t)||ut("Unrecognized data set: "+t),n[t]}function hVt(e,t){return arguments.length<2?h8(this,e).values.value:Uj.call(this,e,YE().remove(uh).insert(t))}function Uj(e,t){j4e(t)||ut("Second argument to changes must be a changeset.");const n=h8(this,e);return n.modified=!0,this.pulse(n.input,t)}function pVt(e,t){return Uj.call(this,e,YE().insert(t))}function mVt(e,t){return Uj.call(this,e,YE().remove(t))}function _$e(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function w$e(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function zj(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function gVt(e){var t=zj(e),n=_$e(e),r=w$e(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function yVt(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=zj(e),o=t.changedTouches?t.changedTouches[0]:t,s=Pj(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=vVt(e,n,s),t}function vVt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;Gt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:hl(e),item:hl(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const Gye="view",bVt="timer",xVt="window",_Vt={trap:!1};function wVt(e){const t=lr({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{ct(r[s])&&(r[s]=zp(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function E$e(e,t,n,r){e._eventListeners.push({type:n,sources:Wt(t),handler:r})}function EVt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function L6(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||Ht(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function TVt(e,t,n){var r=this,i=new hj(n),s=function(l,c){r.runAsync(null,()=>{e===Gye&&EVt(r,t)&&l.preventDefault(),i.receive(yVt(r,l,c))})},o;if(e===bVt)L6(r,"timer",t)&&r.timer(s,t);else if(e===Gye)L6(r,"view",t)&&r.addEventListener(t,s,_Vt);else if(e===xVt?L6(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&L6(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);E$e(r,o,t,s)}return i}function Yye(e){return e.item}function Kye(e){return e.item.mark.source}function Xye(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function SVt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",Yye),Kye,Xye(e)),this.on(this.events("view","pointerout",Yye),Kye,Xye(t)),this}function CVt(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function nd(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const AVt="vega-bind",IVt="vega-bind-name",kVt="vega-bind-radio";function RVt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=lre(r.debounce,i.update))),(r.input==null&&r.element?NVt:PVt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function NVt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),E$e(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(DVt(i))}}function DVt(e){return typeof Event<"u"?new Event(e):{type:e}}function PVt(e,t,n,r){const i=r.signal(n.signal),s=nd("div",{class:AVt}),o=n.input==="radio"?s:s.appendChild(nd("label"));o.appendChild(nd("span",{class:IVt},n.name||n.signal)),t.appendChild(s);let a=OVt;switch(n.input){case"checkbox":a=MVt;break;case"select":a=LVt;break;case"radio":a=$Vt;break;case"range":a=FVt;break}a(e,o,n,i)}function OVt(e,t,n,r){const i=nd("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function MVt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=nd("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function LVt(e,t,n,r){const i=nd("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};p8(o,r)&&(u.selected=!0),i.appendChild(nd("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(p8(n.options[a],o)){i.selectedIndex=a;return}}}function $Vt(e,t,n,r){const i=nd("span",{class:kVt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};p8(o,r)&&(u.checked=!0);const l=nd("input",u);l.addEventListener("change",()=>e.update(o));const c=nd("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)p8(a[l].value,o)&&(a[l].checked=!0)}}function FVt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||Pb(s,i,100),a=nd("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=nd("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function p8(e,t){return e===t||e+""==t+""}function T$e(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,_$e(e),w$e(e),zj(e),i,s).background(e.background())}function qse(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function BVt(e,t,n,r){const i=new r(e.loader(),qse(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,zj(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function jVt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=Oj(r);e=n._el=e?qH(n,e,!0):null,cVt(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||eO,a=e?s.renderer:s.headless;return n._renderer=a?T$e(n,n._renderer,e,a):null,n._handler=BVt(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=qH(n,t,!0):e.appendChild(nd("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=qH(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{RVt(n,u.element||t,u)})),n}function qH(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const vR=e=>+e||0,UVt=e=>({top:e,bottom:e,left:e,right:e});function Qye(e){return Ht(e)?{top:vR(e.top),bottom:vR(e.bottom),left:vR(e.left),right:vR(e.right)}:UVt(vR(e))}async function Wse(e,t,n,r){const i=Oj(t),s=i&&i.headless;return s||ut("Unrecognized renderer type: "+t),await e.runAsync(),T$e(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function zVt(e,t){e!==tb.Canvas&&e!==tb.SVG&&e!==tb.PNG&&ut("Unrecognized image type: "+e);const n=await Wse(this,e,t);return e===tb.SVG?VVt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function VVt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function HVt(e,t){return(await Wse(this,tb.Canvas,e,t)).canvas()}async function qVt(e){return(await Wse(this,tb.SVG,e)).svg()}function WVt(e,t,n){return v$e(e,zC,bP,n).parse(t)}function GVt(e){var t=this._runtime.scales;return Jt(t,e)||ut("Unrecognized scale or projection: "+e),t[e].value}var S$e="width",C$e="height",Gse="padding",Jye={skip:!0};function A$e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Gse?r.left+r.right:0)}function I$e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Gse?r.top+r.bottom:0)}function YVt(e){var t=e._signals,n=t[S$e],r=t[C$e],i=t[Gse];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=A$e(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=I$e(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function KVt(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(S$e,n,Jye),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(C$e,r,Jye),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function XVt(e){return this._runtime.getState(e||{data:QVt,signals:JVt,recurse:!0})}function QVt(e,t){return t.modified&&ct(t.input.value)&&!e.startsWith("_:vega:_")}function JVt(e,t){return!(e==="parent"||t instanceof zC.proxy)}function ZVt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function eHt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(Oxt(n,t))}function tHt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",nHt(r))}function nHt(e){return e==null?"":ct(e)?k$e(e):Ht(e)&&!gb(e)?rHt(e):e+""}function rHt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(ct(n)?k$e(n):R$e(n))}).join(`
`)}function k$e(e){return"["+e.map(R$e).join(", ")+"]"}function R$e(e){return ct(e)?"[]":Ht(e)&&!gb(e)?"{}":e}function iHt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function N$e(e,t){const n=this;if(t=t||{},G2.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=lr({},e.locale,t.locale);n.locale(R4e(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||tb.Canvas,n._scenegraph=new TMe;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||tHt,n._redraw=!0,n._handler=new eO().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=wVt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=WVt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:lr({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=A$e(n,n._width),n._viewHeight=I$e(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,YVt(n),fVt(n),dVt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function $6(e,t){return Jt(e._signals,t)?e._signals[t]:ut("Unrecognized signal name: "+jt(t))}function D$e(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function Zye(e,t,n,r){let i=D$e(n,r);return i||(i=qse(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function e1e(e,t,n){const r=D$e(t,n);return r&&t._targets.remove(r),e}zt(N$e,G2,{async evaluate(e,t,n){if(await G2.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,gVt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&a$(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&x$e(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=$6(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",Qye(e)):Qye(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(Oj(e)||ut("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(G2.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch($6(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:KVt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=qse(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Zye(this,e,$6(this,e),t)},removeSignalListener(e,t){return e1e(this,$6(this,e),t)},addDataListener(e,t){return Zye(this,e,h8(this,e).values,t)},removeDataListener(e,t){return e1e(this,h8(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=UK(this,null);this._globalCursor=!!e,t&&UK(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:eHt,events:TVt,finalize:CVt,hover:SVt,data:hVt,change:Uj,insert:pVt,remove:mVt,scale:GVt,initialize:jVt,toImageURL:zVt,toCanvas:HVt,toSVG:qVt,getState:XVt,setState:ZVt,_watchPixelRatio:iHt});const sHt="view",m8="[",g8="]",P$e="{",O$e="}",oHt=":",M$e=",",aHt="@",uHt=">",lHt=/[[\]{}]/,cHt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let L$e,$$e;function Rx(e,t,n){return L$e=t||sHt,$$e=n||cHt,F$e(e.trim()).map(zK)}function fHt(e){return $$e[e]}function tD(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function F$e(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=tD(e,i,M$e,m8+P$e,g8+O$e),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function zK(e){return e[0]==="["?dHt(e):hHt(e)}function dHt(e){const t=e.length;let n=1,r;if(n=tD(e,n,g8,m8,g8),n===t)throw"Empty between selector: "+e;if(r=F$e(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==uHt)throw"Expected '>' after between selector: "+e;r=r.map(zK);const i=zK(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function hHt(e){const t={source:L$e},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===O$e){if(a=e.lastIndexOf(P$e),a>=0){try{r=pHt(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===aHt&&(i=++a),u=tD(e,a,oHt),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=tD(e,a,m8),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=tD(e,a,g8),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==m8)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||lHt.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):fHt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function pHt(e){const t=e.split(M$e);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function mHt(e){return Ht(e)?e:{type:e||"pad"}}const bR=e=>+e||0,gHt=e=>({top:e,bottom:e,left:e,right:e});function yHt(e){return Ht(e)?e.signal?e:{top:bR(e.top),bottom:bR(e.bottom),left:bR(e.left),right:bR(e.right)}:gHt(bR(e))}const $a=e=>Ht(e)&&!ct(e)?lr({},e):{value:e};function t1e(e,t,n,r){return n!=null?(Ht(n)&&!ct(n)||ct(n)&&n.length&&Ht(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function Tu(e,t,n){for(const r in t)t1e(e,r,t[r]);for(const r in n)t1e(e,r,n[r],"update")}function wI(e,t,n){for(const r in t)n&&Jt(n,r)||(e[r]=lr(e[r]||{},t[r]));return e}function l2(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const Yse="mark",Kse="frame",Xse="scope",vHt="axis",bHt="axis-domain",xHt="axis-grid",_Ht="axis-label",wHt="axis-tick",EHt="axis-title",THt="legend",SHt="legend-band",CHt="legend-entry",AHt="legend-gradient",B$e="legend-label",IHt="legend-symbol",kHt="legend-title",RHt="title",NHt="title-text",DHt="title-subtitle";function PHt(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!l2(u,e)&&WH(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===Kse?i.group:n===Yse?lr({},i.mark,i[t]):null;for(u in c)l=l2(u,e)||(u==="fill"||u==="stroke")&&(l2("fill",e)||l2("stroke",e)),l||WH(s,u,c[u]);Wt(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)l2(h,e)||WH(s,h,d[h])}),e=lr({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=lr(o,e.enter),a&&(e.update=lr(a,e.update)),e}function WH(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const j$e=e=>Gt(e)?jt(e):e.signal?`(${e.signal})`:U$e(e);function Vj(e){if(e.gradient!=null)return MHt(e);let t=e.signal?`(${e.signal})`:e.color?OHt(e.color):e.field!=null?U$e(e.field):e.value!==void 0?jt(e.value):void 0;return e.scale!=null&&(t=LHt(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${_$(e.exponent)})`),e.mult!=null&&(t+=`*${_$(e.mult)}`),e.offset!=null&&(t+=`+${_$(e.offset)}`),e.round&&(t=`round(${t})`),t}const F6=(e,t,n,r)=>`(${e}(${[t,n,r].map(Vj).join(",")})+'')`;function OHt(e){return e.c?F6("hcl",e.h,e.c,e.l):e.h||e.s?F6("hsl",e.h,e.s,e.l):e.l||e.a?F6("lab",e.l,e.a,e.b):e.r||e.g||e.b?F6("rgb",e.r,e.g,e.b):null}function MHt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:jt(n));for(;t.length&&Yr(t)==null;)t.pop();return t.unshift(j$e(e.gradient)),`gradient(${t.join(",")})`}function _$(e){return Ht(e)?"("+Vj(e)+")":e}function U$e(e){return z$e(Ht(e)?e:{datum:e})}function z$e(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):ut("Invalid field reference: "+jt(e));return e.signal||(r=Gt(r)?lg(r).map(jt).join("]["):z$e(r)),t+"["+r+"]"}function LHt(e,t){const n=j$e(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+_$(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function $Ht(e){let t="";return e.forEach(n=>{const r=Vj(n);t+=n.test?`(${n.test})?${r}:`:r}),Yr(t)===":"&&(t+="null"),t}function V$e(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=PHt(e,t,n,r,i.config);for(const a in e)o[a]=FHt(e[a],t,s,i);return s}function FHt(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=jHt(BHt(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function BHt(e){return ct(e)?$Ht(e):Vj(e)}function jHt(e,t,n,r){const i=Q0(e,t);return i.$fields.forEach(s=>r[s]=1),lr(n,i.$params),i.$expr}const UHt="outer",zHt=["value","update","init","react","bind"];function n1e(e,t){ut(e+' for "outer" push: '+jt(t))}function H$e(e,t){const n=e.name;if(e.push===UHt)t.signals[n]||n1e("No prior signal definition",n),zHt.forEach(r=>{e[r]!==void 0&&n1e("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function VK(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function Hj(e,t,n,r){return new VK(e,t,n,r)}function y8(e,t){return Hj("operator",e,t)}function vn(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function xP(e,t){return t?{$field:e,$name:t}:{$field:e}}const HK=xP("key");function r1e(e,t){return{$compare:e,$order:t}}function VHt(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const HHt="ascending",qHt="descending";function WHt(e){return Ht(e)?(e.order===qHt?"-":"+")+qj(e.op,e.field):""}function qj(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const Qse="scope",qK="view";function da(e){return e&&e.signal}function GHt(e){return e&&e.expr}function w$(e){if(da(e))return!0;if(Ht(e)){for(const t in e)if(w$(e[t]))return!0}return!1}function lp(e,t){return e??t}function $w(e){return e&&e.signal||e}const i1e="timer";function _P(e,t){return(e.merge?KHt:e.stream?XHt:e.type?QHt:ut("Invalid stream specification: "+jt(e)))(e,t)}function YHt(e){return e===Qse?qK:e||qK}function KHt(e,t){const n=e.merge.map(i=>_P(i,t)),r=Jse({merge:n},e,t);return t.addStream(r).id}function XHt(e,t){const n=_P(e.stream,t),r=Jse({stream:n},e,t);return t.addStream(r).id}function QHt(e,t){let n;e.type===i1e?(n=t.event(i1e,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(YHt(e.source),e.type);const r=Jse({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function Jse(e,t,n){let r=t.between;return r&&(r.length!==2&&ut('Stream "between" parameter must have 2 entries: '+jt(t)),e.between=[_P(r[0],n),_P(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(JHt(t.marktype,t.markname,t.markrole)),t.source===Qse&&r.push("inScope(event.item)"),r.length&&(e.filter=Q0("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function JHt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const ZHt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function eqt(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||ut("Signal update missing events specification."),Gt(s)&&(s=Rx(s,t.isSubscope()?Qse:qK)),s=Wt(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[nqt(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&ut("Signal encode and update are mutually exclusive."),o="encode(item(),"+jt(r)+")"),i.update=Gt(o)?Q0(o,t):o.expr!=null?Q0(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:ZHt,$params:{$value:t.signalRef(o.signal)}}:ut("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(lr(tqt(u,t),i)))}function tqt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):_P(e,t)}}function nqt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function rqt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?ut("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Q0(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>eqt(i,t,n.id))}const Xi=e=>(t,n,r)=>Hj(e,n,t||void 0,r),q$e=Xi("aggregate"),iqt=Xi("axisticks"),W$e=Xi("bound"),rm=Xi("collect"),s1e=Xi("compare"),sqt=Xi("datajoin"),G$e=Xi("encode"),oqt=Xi("expression"),aqt=Xi("facet"),uqt=Xi("field"),lqt=Xi("key"),cqt=Xi("legendentries"),fqt=Xi("load"),dqt=Xi("mark"),hqt=Xi("multiextent"),pqt=Xi("multivalues"),mqt=Xi("overlap"),gqt=Xi("params"),Y$e=Xi("prefacet"),yqt=Xi("projection"),vqt=Xi("proxy"),bqt=Xi("relay"),K$e=Xi("render"),xqt=Xi("scale"),QE=Xi("sieve"),_qt=Xi("sortitems"),X$e=Xi("viewlayout"),wqt=Xi("values");let Eqt=0;const Q$e={min:"min",max:"max",count:"sum"};function Tqt(e,t){const n=e.type||"linear";L6e(n)||ut("Unrecognized scale type: "+jt(n)),t.addScale(e.name,{type:n,domain:void 0})}function Sqt(e,t){const n=t.getScale(e.name).params;let r;n.domain=J$e(e.domain,e,t),e.range!=null&&(n.range=eFe(e,t,n)),e.interpolate!=null&&Mqt(e.interpolate,n),e.nice!=null&&(n.nice=Oqt(e.nice,t)),e.bins!=null&&(n.bins=Pqt(e.bins,t));for(r in e)Jt(n,r)||r==="name"||(n[r]=eh(e[r],t))}function eh(e,t){return Ht(e)?e.signal?t.signalRef(e.signal):ut("Unsupported object: "+jt(e)):e}function E$(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>eh(n,t))}function Wj(e){ut("Can not find data set: "+jt(e))}function J$e(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&ut("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(ct(e)?Cqt:e.fields?Iqt:Aqt)(e,t,n)}function Cqt(e,t,n){return e.map(r=>eh(r,n))}function Aqt(e,t,n){const r=n.getData(e.data);return r||Wj(e.data),qC(t.type)?r.valuesRef(n,e.field,Z$e(e.sort,!1)):B6e(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function Iqt(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=Gt(o)?{data:r,field:o}:ct(o)||o.signal?kqt(o,n):o,s.push(o),s),[]);return(qC(t.type)?Rqt:B6e(t.type)?Nqt:Dqt)(e,n,i)}function kqt(e,t){const n="_:vega:_"+Eqt++,r=rm({});if(ct(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+jt(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,QE({})]),{data:n,field:"data"}}function Rqt(e,t,n){const r=Z$e(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||Wj(l.data),c.countsRef(t,l.field,r)}),a={groupby:HK,pulse:o};r&&(i=r.op||"count",s=r.field?qj(i,r.field):"count",a.ops=[Q$e[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(q$e(a));const u=t.add(rm({pulse:vn(i)}));return s=t.add(wqt({field:HK,sort:t.sortRef(r),pulse:vn(u)})),vn(s)}function Z$e(e,t){return e&&(!e.field&&!e.op?Ht(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?ut("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!Q$e[e.op]&&ut("Multiple domain scales can not be sorted using "+e.op)),e}function Nqt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||Wj(i.data),s.domainRef(t,i.field)});return vn(t.add(pqt({values:r})))}function Dqt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||Wj(i.data),s.extentRef(t,i.field)});return vn(t.add(hqt({extents:r})))}function Pqt(e,t){return e.signal||ct(e)?E$(e,t):t.objectProperty(e)}function Oqt(e,t){return e.signal?t.signalRef(e.signal):Ht(e)?{interval:eh(e.interval),step:eh(e.step)}:eh(e)}function Mqt(e,t){t.interpolate=eh(e.type||e),e.gamma!=null&&(t.interpolateGamma=eh(e.gamma))}function eFe(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(Gt(i)){if(r&&Jt(r,i))return e=lr({},e,{range:r[i]}),eFe(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=qC(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:ut("Unrecognized scale range value: "+jt(i))}else if(i.scheme){n.scheme=ct(i.scheme)?E$(i.scheme,t):eh(i.scheme,t),i.extent&&(n.schemeExtent=E$(i.extent,t)),i.count&&(n.schemeCount=eh(i.count,t));return}else if(i.step){n.rangeStep=eh(i.step,t);return}else{if(qC(e.type)&&!ct(i))return J$e(i,e,t);ct(i)||ut("Unsupported range type: "+jt(i))}return i.map(s=>(ct(s)?E$:eh)(s,t))}function Lqt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=WK(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=WK(n[i],i,t));t.addProjection(e.name,r)}function WK(e,t,n){return ct(e)?e.map(r=>WK(r,t,n)):Ht(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:ut("Unsupported parameter object: "+jt(e)):e}const im="top",EI="left",TI="right",ex="bottom",tFe="center",$qt="vertical",Fqt="start",Bqt="middle",jqt="end",GK="index",Zse="label",Uqt="offset",QC="perc",zqt="perc2",nh="value",sO="guide-label",eoe="guide-title",Vqt="group-title",Hqt="group-subtitle",o1e="symbol",T$="gradient",YK="discrete",KK="size",qqt="shape",Wqt="fill",Gqt="stroke",Yqt="strokeWidth",Kqt="strokeDash",Xqt="opacity",toe=[KK,qqt,Wqt,Gqt,Yqt,Kqt,Xqt],oO={name:1,style:1,interactive:1},ii={value:0},rh={value:1},Gj="group",nFe="rect",noe="rule",Qqt="symbol",JE="text";function wP(e){return e.type=Gj,e.interactive=e.interactive||!1,e}function ff(e,t){const n=(r,i)=>lp(e[r],lp(t[r],i));return n.isVertical=r=>$qt===lp(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>lp(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>lp(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>lp(e.columns,lp(t.columns,+n.isVertical(!0))),n}function rFe(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function Jqt(e,t,n){const r=t.config.style[n];return r&&r[e]}function Yj(e,t,n){return`item.anchor === '${Fqt}' ? ${e} : item.anchor === '${jqt}' ? ${t} : ${n}`}const roe=Yj(jt(EI),jt(TI),jt(tFe));function Zqt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},Ht(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function iFe(e,t){return t?e?Ht(e)?Object.assign({},e,{offset:iFe(e.offset,t)}):{value:e,offset:t}:t:e}function md(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=wI(e.encode,t,oO)):e.interactive=!1,e}function eWt(e,t,n,r){const i=ff(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:ii,x:ii,y:ii,width:$a(f),height:$a(d)},update:lr({},u,{opacity:rh,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:ii}};return Tu(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),md({type:nFe,role:AHt,encode:h},r)}function tWt(e,t,n,r,i){const s=ff(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:ii,fill:{scale:t,field:nh}};p[l]={signal:h+"datum."+QC,mult:u},p[c]=ii,p[f]={signal:h+"datum."+zqt,mult:u},p[d]=$a(a);const m={enter:p,update:lr({},p,{opacity:rh}),exit:{opacity:ii}};return Tu(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),md({type:nFe,role:SHt,key:nh,from:i,encode:m},r)}const nWt=`datum.${QC}<=0?"${EI}":datum.${QC}>=1?"${TI}":"${tFe}"`,rWt=`datum.${QC}<=0?"${ex}":datum.${QC}>=1?"${im}":"${Bqt}"`;function a1e(e,t,n,r){const i=ff(e,t),s=i.isVertical(),o=$a(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:ii},update:c={opacity:rh,text:{field:Zse}},exit:{opacity:ii}};return Tu(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:lp(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:rWt},f="y",d="x",h="1-"):(l.align=c.align={signal:nWt},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+QC,mult:a},l[d]=c[d]=o,o.offset=lp(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+GK}:void 0,md({type:JE,role:B$e,style:sO,key:nh,from:r,encode:p,overlap:u},n)}function iWt(e,t,n,r,i){const s=ff(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${Uqt} : datum.${KK}`,h=l?$a(l):{field:KK},p=`datum.${GK}`,m=`max(1, ${i})`;let y,v,b,w,E;h.mult=.5,y={enter:v={opacity:ii,x:{signal:d,mult:.5,offset:c},y:h},update:b={opacity:rh,x:v.x,y:v.y},exit:{opacity:ii}};let T=null,A=null;e.fill||(T=t.symbolBaseFillColor,A=t.symbolBaseStrokeColor),Tu(y,{fill:s("symbolFillColor",T),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",A),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),toe.forEach(M=>{e[M]&&(b[M]=v[M]={scale:e[M],field:nh})});const I=md({type:Qqt,role:IHt,key:nh,from:f,clip:l?!0:void 0,encode:y},n.symbols),R=$a(c);R.offset=s("labelOffset"),y={enter:v={opacity:ii,x:{signal:d,offset:R},y:h},update:b={opacity:rh,text:{field:Zse},x:v.x,y:v.y},exit:{opacity:ii}},Tu(y,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const D=md({type:JE,role:B$e,style:sO,key:nh,from:f,encode:y},n.labels);return y={enter:{noBound:{value:!l},width:ii,height:l?$a(l):ii,opacity:ii},exit:{opacity:ii},update:b={opacity:rh,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(w=`ceil(item.mark.items.length / ${m})`,b.row.signal=`${p}%${w}`,b.column.signal=`floor(${p} / ${w})`,E={field:["row",p]}):(b.row.signal=`floor(${p} / ${m})`,b.column.signal=`${p} % ${m}`,E={field:p}),b.column.signal=`(${i})?${b.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:GK}},wP({role:Xse,from:r,encode:wI(y,o,oO),marks:[I,D],name:u,interactive:a,sort:E})}function sWt(e,t){const n=ff(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const ioe='item.orient === "left"',soe='item.orient === "right"',Kj=`(${ioe} || ${soe})`,oWt=`datum.vgrad && ${Kj}`,aWt=Yj('"top"','"bottom"','"middle"'),uWt=Yj('"right"','"left"','"center"'),lWt=`datum.vgrad && ${soe} ? (${uWt}) : (${Kj} && !(datum.vgrad && ${ioe})) ? "left" : ${roe}`,cWt=`item._anchor || (${Kj} ? "middle" : "start")`,fWt=`${oWt} ? (${ioe} ? -90 : 90) : 0`,dWt=`${Kj} ? (datum.vgrad ? (${soe} ? "bottom" : "top") : ${aWt}) : "top"`;function hWt(e,t,n,r){const i=ff(e,t),s={enter:{opacity:ii},update:{opacity:rh,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:ii}};return Tu(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:cWt},angle:{signal:fWt},align:{signal:lWt},baseline:{signal:dWt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),md({type:JE,role:kHt,style:eoe,from:r,encode:s},n)}function pWt(e,t){let n;return Ht(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+u1e(e.path)+")":e.sphere&&(n="geoShape("+u1e(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function u1e(e){return Ht(e)&&e.signal?e.signal:jt(e)}function sFe(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===Gj?Xse:t||Yse}function mWt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||sFe(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function gWt(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function ooe(e,t){const n=V4e(e.type);n||ut("Unrecognized transform type: "+jt(e.type));const r=Hj(n.type.toLowerCase(),null,oFe(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function oFe(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=yWt(o,t,n)}return r}function yWt(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return vWt(e,t,n);if(i===void 0){e.required&&ut("Missing required "+jt(t.type)+" parameter: "+jt(e.name));return}else{if(r==="param")return bWt(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!da(i)?i.map(s=>l1e(e,s,n)):l1e(e,i,n)}function l1e(e,t,n){const r=e.type;if(da(t))return f1e(r)?ut("Expression references can not be signals."):GH(r)?n.fieldRef(t):d1e(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||GH(r);return i&&xWt(t)?n.exprRef(t.expr,t.as):i&&_Wt(t)?xP(t.field,t.as):f1e(r)?Q0(t,n):wWt(r)?vn(n.getData(t).values):GH(r)?xP(t):d1e(r)?n.compareRef(t):t}}function vWt(e,t,n){return Gt(t.from)||ut('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function bWt(e,t,n){const r=t[e.name];return e.array?(ct(r)||ut("Expected an array of sub-parameters. Instead: "+jt(r)),r.map(i=>c1e(e,i,n))):c1e(e,r,n)}function c1e(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||ut("Unsupported parameter: "+jt(t));const s=lr(oFe(i,t,n),i.key);return vn(n.add(gqt(s)))}const xWt=e=>e&&e.expr,_Wt=e=>e&&e.field,wWt=e=>e==="data",f1e=e=>e==="expr",GH=e=>e==="field",d1e=e=>e==="compare";function EWt(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||ut("Only group marks can be faceted."),r.field!=null?o=a=S$(r,n):(e.data?a=vn(n.getData(e.data).aggregate):(s=ooe(lr({type:"aggregate",groupby:Wt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=S$(r,n),o=a=vn(n.add(s))),i=n.keyRef(r.groupby,!0))):o=vn(n.add(rm(null,[{}]))),o||(o=S$(e,n)),{key:i,pulse:o,parent:a}}function S$(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:vn(t.getData(e.data).output)}function cE(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}cE.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=vn(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new cE(e,s,i,r,o)};function aFe(e){return Gt(e)?e:null}function h1e(e,t,n){const r=qj(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function xR(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=WHt(s);let l=aFe(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:HK,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:vn(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(Hj(r,void 0,d)),o&&(t.index[i]=f),c=vn(f),l!=null&&(a[l]=c)}return c}cE.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=aFe(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&h1e(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:vn(r.output)},n&&n.field&&h1e(e,u,n),a=e.add(q$e(u)),o=e.add(rm({pulse:vn(a)})),o={agg:a,ref:vn(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return vn(this.values)},extentRef(e,t){return xR(e,this,"extent","extent",t,!1)},domainRef(e,t){return xR(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return xR(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return xR(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return xR(e,this,"indata","tupleindex",t,!0,!0)}};function TWt(e,t,n){const r=e.from.facet,i=r.name,s=S$(r,t);let o;r.name||ut("Facet must have a name: "+jt(r)),r.data||ut("Facet must reference a data set: "+jt(r)),r.field?o=t.add(Y$e({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(aqt({key:t.keyRef(r.groupby),group:vn(t.proxy(n.parent)),pulse:s})):ut("Facet must specify groupby or field: "+jt(r));const a=t.fork(),u=a.add(rm()),l=a.add(QE({pulse:vn(u)}));a.addData(i,new cE(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function SWt(e,t,n){const r=t.add(Y$e({pulse:n.pulse})),i=t.fork();i.add(QE()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function uFe(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(y8()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=Q0(l,t);u.update=c.$expr,u.params=c.$params}function Xj(e,t){const n=sFe(e),r=e.type===Gj,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===Xse||n===Kse,a,u,l,c,f,d,h;const p=n===Yse||o||i,m=EWt(e.from,r,t);u=t.add(sqt({key:m.key||(e.key?xP(e.key):void 0),pulse:m.pulse,clean:!r}));const y=vn(u);u=l=t.add(rm({pulse:y})),u=t.add(dqt({markdef:mWt(e),interactive:gWt(e.interactive,t),clip:pWt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:vn(u)}));const v=vn(u);u=c=t.add(G$e(V$e(e.encode,e.type,n,e.style,t,{mod:!1,pulse:v}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(A=>{const I=ooe(A,t),R=I.metadata;(R.generates||R.changes)&&ut("Mark transforms should not generate new data."),R.nomod||(c.params.mod=!0),I.params.pulse=vn(u),t.add(u=I)}),e.sort&&(u=t.add(_qt({sort:t.compareRef(e.sort),pulse:vn(u)})));const b=vn(u);(i||o)&&(o=t.add(X$e({layout:t.objectProperty(e.layout),legends:t.legends,mark:v,pulse:b})),d=vn(o));const w=t.add(W$e({mark:v,pulse:d||b}));h=vn(w),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(b,d||h,y),i?TWt(e,t,m):p?SWt(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(w))),s&&(h=CWt(s,h,t));const E=t.add(K$e({pulse:h})),T=t.add(QE({pulse:vn(E)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new cE(t,l,E,T)),e.on&&e.on.forEach(A=>{(A.insert||A.remove||A.toggle)&&ut("Marks only support modify triggers."),uFe(A,t,f)}))}function CWt(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:da(s)?n.signalRef(s.signal):s,method:da(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=da(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return vn(n.add(mqt(o)))}function AWt(e,t){const n=t.config.legend,r=e.encode||{},i=ff(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;toe.forEach(w=>e[w]?(l[w]=e[w],c=c||e[w]):0),c||ut("Missing valid scale for legend.");const p=IWt(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},y=vn(t.add(rm(null,[m]))),v={enter:{x:{value:0},y:{value:0}}},b=vn(t.add(cqt(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===T$?(h=[eWt(e,c,n,r.gradient),a1e(e,n,r.labels,b)],d.count=d.count||t.signalRef(`max(2,2*floor((${$w(i.gradientLength())})/100))`)):p===YK?h=[tWt(e,c,n,r.gradient,b),a1e(e,n,r.labels,b)]:(f=sWt(e,n),h=[iWt(e,n,r,b,$w(f.columns))],d.size=NWt(e,t,h[0].marks)),h=[wP({role:CHt,from:y,encode:v,marks:h,layout:f,interactive:a})],m.title&&h.push(hWt(e,n,r.title,y)),Xj(wP({role:THt,from:y,encode:wI(RWt(i,e,n),s,oO),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function IWt(e,t){let n=e.type||o1e;return!e.type&&kWt(e)===1&&(e.fill||e.stroke)&&(n=yie(t)?T$:cK(t)?YK:o1e),n!==T$?n:cK(t)?YK:T$}function kWt(e){return toe.reduce((t,n)=>t+(e[n]?1:0),0)}function RWt(e,t,n){const r={enter:{},update:{}};return Tu(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function NWt(e,t,n){const r=$w(p1e("size",e,n)),i=$w(p1e("strokeWidth",e,n)),s=$w(DWt(n[1].encode,t,sO));return Q0(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function p1e(e,t,n){return t[e]?`scale("${t[e]}",datum)`:rFe(e,n[0].encode)}function DWt(e,t,n){return rFe("fontSize",e)||Jqt("fontSize",t,n)}const PWt=`item.orient==="${EI}"?-90:item.orient==="${TI}"?90:0`;function OWt(e,t){e=Gt(e)?{text:e}:e;const n=ff(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=vn(t.add(rm(null,[l])));return u.push($Wt(e,n,MWt(e),c)),e.subtitle&&u.push(FWt(e,n,r.subtitle,c)),Xj(wP({role:RHt,from:c,encode:LWt(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function MWt(e){const t=e.encode;return t&&t.title||lr({name:e.name,interactive:e.interactive,style:e.style},t)}function LWt(e,t){const n={enter:{},update:{}};return Tu(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:roe},angle:{signal:PWt},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),wI(n,t,oO)}function $Wt(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Tu(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),md({type:JE,role:NHt,style:Vqt,from:r,encode:o},n)}function FWt(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Tu(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),md({type:JE,role:DHt,style:Hqt,from:r,encode:o},n)}function BWt(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(ooe(r,t))}),e.on&&e.on.forEach(r=>{uFe(r,t,e.name)}),t.addDataPipeline(e.name,jWt(e,t,n))}function jWt(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?da(e.values)||w$(e.format)?(r.push(m1e(t,e)),r.push(i=I_())):r.push(i=I_({$ingest:e.values,$format:e.format})):e.url?w$(e.url)||w$(e.format)?(r.push(m1e(t,e)),r.push(i=I_())):r.push(i=I_({$request:e.url,$format:e.format})):e.source&&(i=a=Wt(e.source).map(d=>vn(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=I_()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=bqt({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,I_())),i||r.push(I_()),r.push(QE({})),r}function I_(e){const t=rm({},e);return t.metadata={source:!0},t}function m1e(e,t){return fqt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const lFe=e=>e===ex||e===im,Qj=(e,t,n)=>da(e)?HWt(e.signal,t,n):e===EI||e===im?t:n,Fa=(e,t,n)=>da(e)?zWt(e.signal,t,n):lFe(e)?t:n,Dp=(e,t,n)=>da(e)?VWt(e.signal,t,n):lFe(e)?n:t,cFe=(e,t,n)=>da(e)?qWt(e.signal,t,n):e===im?{value:t}:{value:n},UWt=(e,t,n)=>da(e)?WWt(e.signal,t,n):e===TI?{value:t}:{value:n},zWt=(e,t,n)=>fFe(`${e} === '${im}' || ${e} === '${ex}'`,t,n),VWt=(e,t,n)=>fFe(`${e} !== '${im}' && ${e} !== '${ex}'`,t,n),HWt=(e,t,n)=>aoe(`${e} === '${EI}' || ${e} === '${im}'`,t,n),qWt=(e,t,n)=>aoe(`${e} === '${im}'`,t,n),WWt=(e,t,n)=>aoe(`${e} === '${TI}'`,t,n),fFe=(e,t,n)=>(t=t!=null?$a(t):t,n=n!=null?$a(n):n,g1e(t)&&g1e(n)?(t=t?t.signal||jt(t.value):null,n=n?n.signal||jt(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[lr({test:e},t)].concat(n||[])),g1e=e=>e==null||Object.keys(e).length===1,aoe=(e,t,n)=>({signal:`${e} ? (${T2(t)}) : (${T2(n)})`}),GWt=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${EI}' ? (${T2(r)}) : `:"")+(n!=null?`${e} === '${ex}' ? (${T2(n)}) : `:"")+(i!=null?`${e} === '${TI}' ? (${T2(i)}) : `:"")+(t!=null?`${e} === '${im}' ? (${T2(t)}) : `:"")+"(null)"}),T2=e=>da(e)?e.signal:e==null?null:jt(e),YWt=(e,t)=>t===0?0:da(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Y2=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function zS(e,t,n,r){let i;if(t&&Jt(t,e))return t[e];if(Jt(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[eoe][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[sO][i]}return null}function y1e(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function KWt(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(da(o)){const f=y1e([n.axisX,n.axisY]),d=y1e([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=Fa(o,zS(l,n.axisX,i,r),zS(l,n.axisY,i,r));u={};for(l of d)u[l]=GWt(o.signal,zS(l,n.axisTop,i,r),zS(l,n.axisBottom,i,r),zS(l,n.axisLeft,i,r),zS(l,n.axisRight,i,r))}else a=o===im||o===ex?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?lr({},i,a,u,s):i}function XWt(e,t,n,r){const i=ff(e,t),s=e.orient;let o,a;const u={enter:o={opacity:ii},update:a={opacity:rh},exit:{opacity:ii}};Tu(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=v1e(e,0),c=v1e(e,1);return o.x=a.x=Fa(s,l,ii),o.x2=a.x2=Fa(s,c),o.y=a.y=Dp(s,l,ii),o.y2=a.y2=Dp(s,c),md({type:noe,role:bHt,from:r,encode:u},n)}function v1e(e,t){return{scale:e.scale,range:t}}function QWt(e,t,n,r,i){const s=ff(e,t),o=e.orient,a=e.gridScale,u=Qj(o,1,-1),l=JWt(e.offset,u);let c,f,d;const h={enter:c={opacity:ii},update:d={opacity:rh},exit:f={opacity:ii}};Tu(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:nh,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=Fa(o,{signal:"height"},{signal:"width"}),y=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},v=a?{scale:a,range:1,mult:u,offset:l}:lr(m,{mult:u,offset:l});return c.x=d.x=Fa(o,p,y),c.y=d.y=Dp(o,p,y),c.x2=d.x2=Dp(o,v),c.y2=d.y2=Fa(o,v),f.x=Fa(o,p),f.y=Dp(o,p),md({type:noe,role:xHt,key:nh,from:r,encode:h},n)}function JWt(e,t){if(t!==1)if(!Ht(e))e=da(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=lr({},e);for(;n.mult!=null;)if(Ht(n.mult))n=n.mult=lr({},n.mult);else return n.mult=da(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function ZWt(e,t,n,r,i,s){const o=ff(e,t),a=e.orient,u=Qj(a,-1,1);let l,c,f;const d={enter:l={opacity:ii},update:f={opacity:rh},exit:c={opacity:ii}};Tu(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=$a(i);h.mult=u;const p={scale:e.scale,field:nh,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=Fa(a,ii,p),f.y2=l.y2=Fa(a,h),c.x=Fa(a,p),f.x=l.x=Dp(a,ii,p),f.x2=l.x2=Dp(a,h),c.y=Dp(a,p),md({type:noe,role:wHt,key:nh,from:r,encode:d},n)}function YH(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function eGt(e,t,n,r,i,s){const o=ff(e,t),a=e.orient,u=e.scale,l=Qj(a,-1,1),c=$w(o("labelFlush")),f=$w(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const y=$a(i);y.mult=l,y.offset=$a(o("labelPadding")||0),y.offset.mult=l;const v={scale:u,field:nh,band:.5,offset:iFe(s.offset,o("labelOffset"))},b=Fa(a,p?YH(u,c,'"left"','"right"','"center"'):{value:"center"},UWt(a,"left","right")),w=Fa(a,cFe(a,"bottom","top"),p?YH(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),E=YH(u,c,`-(${f})`,f,0);p=p&&f;const T={opacity:ii,x:Fa(a,v,y),y:Dp(a,v,y)},A={enter:T,update:m={opacity:rh,text:{field:Zse},x:T.x,y:T.y,align:b,baseline:w},exit:{opacity:ii,x:T.x,y:T.y}};Tu(A,{dx:!d&&p?Fa(a,E):null,dy:!h&&p?Dp(a,E):null}),Tu(A,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const I=o("labelBound");let R=o("labelOverlap");return R=R||I?{separation:o("labelSeparation"),method:R,order:"datum.index",bound:I?{scale:u,orient:a,tolerance:I}:null}:void 0,m.align!==b&&(m.align=Y2(m.align,b)),m.baseline!==w&&(m.baseline=Y2(m.baseline,w)),md({type:JE,role:_Ht,style:sO,key:nh,from:r,encode:A,overlap:R},n)}function tGt(e,t,n,r){const i=ff(e,t),s=e.orient,o=Qj(s,-1,1);let a,u;const l={enter:a={opacity:ii,anchor:$a(i("titleAnchor",null)),align:{signal:roe}},update:u=lr({},a,{opacity:rh,text:$a(e.title)}),exit:{opacity:ii}},c={signal:`lerp(range("${e.scale}"), ${Yj(0,1,.5)})`};return u.x=Fa(s,c),u.y=Dp(s,c),a.angle=Fa(s,ii,YWt(o,90)),a.baseline=Fa(s,cFe(s,ex,im),{value:ex}),u.angle=a.angle,u.baseline=a.baseline,Tu(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),nGt(i,s,l,n),l.update.align=Y2(l.update.align,a.align),l.update.angle=Y2(l.update.angle,a.angle),l.update.baseline=Y2(l.update.baseline,a.baseline),md({type:JE,role:EHt,style:eoe,from:r,encode:l},n)}function nGt(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=Y2($a(a),n.update[u]),!1):!l2(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?$a(o):Fa(t,$a(o),$a(s))}function rGt(e,t){const n=KWt(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=ff(e,n),l=Zqt(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=vn(t.add(rm({},[c]))),d=vn(t.add(iqt({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(QWt(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(ZWt(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(eGt(e,n,r.labels,d,p,l))),c.domain&&h.push(XWt(e,n,r.domain,f)),c.title&&h.push(tGt(e,n,r.title,f)),Xj(wP({role:vHt,from:f,encode:wI(iGt(u,e),i,oO),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function iGt(e,t){const n={enter:{},update:{}};return Tu(n,{orient:e("orient"),offset:e("offset")||0,position:lp(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function dFe(e,t,n){const r=Wt(e.signals),i=Wt(e.scales);return n||r.forEach(s=>H$e(s,t)),Wt(e.projections).forEach(s=>Lqt(s,t)),i.forEach(s=>Tqt(s,t)),Wt(e.data).forEach(s=>BWt(s,t)),i.forEach(s=>Sqt(s,t)),(n||r).forEach(s=>rqt(s,t)),Wt(e.axes).forEach(s=>rGt(s,t)),Wt(e.marks).forEach(s=>Xj(s,t)),Wt(e.legends).forEach(s=>AWt(s,t)),e.title&&OWt(e.title,t),t.parseLambdas(),t}const sGt=e=>wI({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function oGt(e,t){const n=t.config,r=vn(t.root=t.add(y8())),i=aGt(e,n);i.forEach(l=>H$e(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(rm()),o=t.add(G$e(V$e(sGt(e.encode),Gj,Kse,e.style,t,{pulse:vn(s)}))),a=t.add(X$e({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:vn(o)}));t.operators.pop(),t.pushState(vn(o),vn(a),null),dFe(e,t,i),t.operators.push(a);let u=t.add(W$e({mark:r,pulse:vn(a)}));return u=t.add(K$e({pulse:vn(u)})),u=t.add(QE({pulse:vn(u)})),t.addData("root",new cE(t,s,s,u)),t}function _R(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function aGt(e,t){const n=o=>lp(e[o],t[o]),r=[_R("background",n("background")),_R("autosize",mHt(n("autosize"))),_R("padding",yHt(n("padding"))),_R("width",n("width")||0),_R("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return Wt(e.signals).forEach(o=>{Jt(i,o.name)?o=lr(i[o.name],o):r.push(o),s[o.name]=o}),Wt(t.signals).forEach(o=>{!Jt(s,o.name)&&!Jt(i,o.name)&&r.push(o)}),r}function hFe(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function b1e(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}hFe.prototype=b1e.prototype={parse(e){return dFe(e,this)},fork(){return new b1e(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof VK?vn(e):e;return this.add(vqt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(vn(this.add(QE({pulse:e})))),this._parent.push(t),this._lookup.push(n?vn(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Yr(this._parent)},encode(){return Yr(this._encode)},lookup(){return Yr(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Gt(e))return xP(e,t);e.signal||ut("Unsupported field reference: "+jt(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=vn(this.add(uqt(i)))}return r},compareRef(e){let t=!1;const n=s=>da(s)?(t=!0,this.signalRef(s.signal)):GHt(s)?(t=!0,this.exprRef(s.expr)):s,r=Wt(e.field).map(n),i=Wt(e.order).map(n);return t?vn(this.add(s1e({fields:r,orders:i}))):r1e(r,i)},keyRef(e,t){let n=!1;const r=s=>da(s)?(n=!0,vn(i[s.signal])):s,i=this.signals;return e=Wt(e).map(r),n?vn(this.add(lqt({fields:e,flat:t}))):VHt(e,t)},sortRef(e){if(!e)return e;const t=qj(e.op,e.field),n=e.order||HHt;return n.signal?vn(this.add(s1e({fields:t,orders:this.signalRef(n.signal)}))):r1e(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return Jt(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&ut("Duplicate signal name: "+jt(e));const n=t instanceof VK?t:this.add(y8(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||ut("Unrecognized signal name: "+jt(e)),this.signals[e]},signalRef(e){return this.signals[e]?vn(this.signals[e]):(Jt(this.lambdas,e)||(this.lambdas[e]=this.add(y8(null))),vn(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Q0(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!Ht(e)?e:this.signalRef(e.signal||uoe(e))},exprRef(e,t){const n={expr:Q0(e,this)};return t&&(n.expr.$name=t),vn(this.add(oqt(n)))},addBinding(e,t){this.bindings||ut("Nested signals do not support binding: "+jt(e)),this.bindings.push(lr({signal:e},t))},addScaleProj(e,t){Jt(this.scales,e)&&ut("Duplicate scale or projection name: "+jt(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,xqt(t))},addProjection(e,t){this.addScaleProj(e,yqt(t))},getScale(e){return this.scales[e]||ut("Unrecognized scale name: "+jt(e)),this.scales[e]},scaleRef(e){return vn(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Jt(this.data,e)&&ut("Duplicate data set name: "+jt(e)),this.data[e]=t},getData(e){return this.data[e]||ut("Undefined data set name: "+jt(e)),this.data[e]},addDataPipeline(e,t){return Jt(this.data,e)&&ut("Duplicate data set name: "+jt(e)),this.addData(e,cE.fromEntries(this,t))}};function uoe(e){return(ct(e)?uGt:lGt)(e)}function uGt(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(Ht(i)?i.signal||uoe(i):jt(i))}return n+"]"}function lGt(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+jt(r)+":"+(Ht(i)?i.signal||uoe(i):jt(i));return t+"}"}function cGt(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function fGt(e,t,n){return Ht(e)||ut("Input Vega specification must be an object."),t=pI(cGt(),t,e.config),oGt(e,new hFe(t,n)).toRuntime()}var dGt="5.30.0";lr(zC,tFt,VBt,_9t,J9t,sjt,Djt,fjt,Ojt,Fjt,Yjt,t7t);const hGt=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Go,CanvasHandler:eO,CanvasRenderer:s8,DATE:rf,DAY:tl,DAYOFYEAR:X0,Dataflow:G2,Debug:$Oe,Error:nre,EventStream:hj,Gradient:eMe,GroupItem:Cj,HOURS:dd,Handler:zie,HybridHandler:qMe,HybridRenderer:_K,Info:LOe,Item:Sj,MILLISECONDS:Vp,MINUTES:hd,MONTH:ol,Marks:pd,MultiPulse:wre,None:MOe,Operator:is,Parameters:dj,Pulse:yb,QUARTER:nf,RenderType:tb,Renderer:Z3,ResourceLoader:aMe,SECONDS:lh,SVGHandler:DMe,SVGRenderer:Yie,SVGStringRenderer:HMe,Scenegraph:TMe,TIME_UNITS:pre,Transform:nt,View:N$e,WEEK:ua,Warn:rre,YEAR:xu,accessor:cf,accessorFields:sl,accessorName:oo,array:Wt,ascending:oj,bandwidthNRD:Cre,bin:W4e,bootstrapCI:G4e,boundClip:tLe,boundContext:K3,boundItem:gK,boundMark:xMe,boundStroke:N1,changeset:YE,clampRange:YOe,codegenExpression:r$e,compare:ure,constant:hl,cumulativeLogNormal:Dre,cumulativeNormal:mj,cumulativeUniform:Lre,dayofyear:o4e,debounce:lre,defaultLocale:yre,definition:V4e,densityLogNormal:Nre,densityNormal:Are,densityUniform:Mre,domChild:oa,domClear:Kd,domCreate:Zv,domFind:Uie,dotbin:Y4e,error:ut,expressionFunction:Do,extend:lr,extent:K0,extentIndex:KOe,falsy:kv,fastmap:gI,field:ah,flush:XOe,font:Nj,fontFamily:J3,fontSize:cg,format:o$,formatLocale:W5,formats:xre,hasOwnProperty:Jt,id:$3,identity:dl,inferType:D4e,inferTypes:P4e,ingest:Ei,inherits:zt,inrange:_2,interpolate:vie,interpolateColors:Ej,interpolateRange:j6e,intersect:QMe,intersectBoxLine:w2,intersectPath:Cie,intersectPoint:Aie,intersectRule:lMe,isArray:ct,isBoolean:Ix,isDate:gb,isFunction:cr,isIterable:QOe,isNumber:yi,isObject:Ht,isRegExp:JOe,isString:Gt,isTuple:cj,key:cre,lerp:ZOe,lineHeight:Qb,loader:uj,locale:R4e,logger:ire,lruCache:e4e,markup:Gie,merge:t4e,mergeConfig:pI,multiLineOffset:Fie,one:hI,pad:n4e,panLinear:zOe,panLog:VOe,panPow:HOe,panSymlog:qOe,parse:fGt,parseExpression:Mse,parseSelector:Rx,path:p9,pathCurves:Eie,pathEqual:nLe,pathParse:WC,pathRectangle:rMe,pathRender:dP,pathSymbols:nMe,pathTrail:iMe,peek:Yr,point:Pj,projection:ose,quantileLogNormal:Pre,quantileNormal:gj,quantileUniform:$re,quantiles:Tre,quantizeInterpolator:U6e,quarter:WOe,quartiles:Sre,get random(){return ch},randomInteger:s$t,randomKDE:kre,randomLCG:i$t,randomLogNormal:X4e,randomMixture:Q4e,randomNormal:Ire,randomUniform:J4e,read:L4e,regressionConstant:Fre,regressionExp:e6e,regressionLinear:Bre,regressionLoess:r6e,regressionLog:Z4e,regressionPoly:n6e,regressionPow:t6e,regressionQuad:jre,renderModule:Oj,repeat:sN,resetDefaultLocale:tLt,resetSVGClipId:oMe,resetSVGDefIds:aBt,responseType:M4e,runtimeContext:v$e,sampleCurve:vj,sampleLogNormal:Rre,sampleNormal:pj,sampleUniform:Ore,scale:vi,sceneEqual:Kie,sceneFromJSON:wMe,scenePickVisit:Q5,sceneToJSON:_Me,sceneVisit:Hp,sceneZOrder:Iie,scheme:bie,serializeXML:jMe,setHybridRendererOptions:rBt,setRandom:n$t,span:F3,splitAccessPath:lg,stringValue:jt,textMetrics:td,timeBin:E4e,timeFloor:h4e,timeFormatLocale:lP,timeInterval:yI,timeOffset:g4e,timeSequence:b4e,timeUnitSpecifier:s4e,timeUnits:mre,toBoolean:fre,toDate:dre,toNumber:rl,toSet:zp,toString:hre,transform:H4e,transforms:zC,truncate:r4e,truthy:uh,tupleid:bn,typeParsers:aK,utcFloor:p4e,utcInterval:vI,utcOffset:y4e,utcSequence:x4e,utcdayofyear:l4e,utcquarter:GOe,utcweek:c4e,version:dGt,visitArray:Lv,week:a4e,writeConfig:mI,zero:Gv,zoomLinear:sre,zoomLog:ore,zoomPow:q5,zoomSymlog:are},Symbol.toStringTag,{value:"Module"}));function pGt(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var mGt={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},gGt={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},yGt={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const vGt=Array.prototype.slice,k_=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,vGt.call(t,1))},bGt=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var xGt={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:bGt,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return k_("join",arguments)},indexof:function(){return k_("indexOf",arguments)},lastindexof:function(){return k_("lastIndexOf",arguments)},slice:function(){return k_("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return k_("substring",arguments,String)},split:function(){return k_("split",arguments,String)},replace:function(){return k_("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const _Gt=["view","item","group","xy","x","y"],XK=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&XK.add(setImmediate);const wGt={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:mGt[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),XK.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||xGt[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>gGt[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>yGt[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,XK.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function wR(e,t,n,r,i,s){const o=a=>wGt[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,_Gt.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var EGt={operator(e,t){const n=t.ast,r=e.functions;return i=>wR(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>wR(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>wR(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return wR(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=wR(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&pGt(o,r,s),l}}};const TGt="vega-lite",SGt='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',CGt="5.23.0",AGt=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],IGt="https://vega.github.io/vega-lite/",kGt="Vega-Lite is a concise high-level language for interactive visualization.",RGt=["vega","chart","visualization"],NGt="build/vega-lite.js",DGt="build/vega-lite.min.js",PGt="build/vega-lite.min.js",OGt="build/src/index",MGt="build/src/index.d.ts",LGt={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},$Gt=["bin","build","src","vega-lite*","tsconfig.json"],FGt={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},BGt={type:"git",url:"https://github.com/vega/vega-lite.git"},jGt="BSD-3-Clause",UGt={url:"https://github.com/vega/vega-lite/issues"},zGt={"@babel/core":"^7.26.0","@babel/preset-env":"^7.26.0","@babel/preset-typescript":"^7.26.0","@release-it/conventional-changelog":"^9.0.3","@rollup/plugin-alias":"^5.1.1","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^28.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.3.0","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.14","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.17.0","@typescript-eslint/parser":"^7.17.0",ajv:"^8.17.1","ajv-formats":"^3.0.1",cheerio:"^1.0.0","conventional-changelog-cli":"^5.0.0",d3:"^7.9.0","del-cli":"^6.0.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.2.1","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.10.0",jest:"^29.7.0","jest-dev-server":"^10.1.4",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.3.3",puppeteer:"^15.0.0","release-it":"17.10.0",rollup:"^4.27.3","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.4",terser:"^5.36.0","ts-jest":"^29.2.5","ts-json-schema-generator":"^2.3.0",typescript:"~5.7.2","vega-cli":"^5.30.0","vega-datasets":"^2.11.0","vega-embed":"^6.28.0","vega-tooltip":"^0.35.2","yaml-front-matter":"^4.1.1"},VGt={"json-stringify-pretty-compact":"~4.0.0",tslib:"~2.8.1","vega-event-selector":"~3.0.1","vega-expression":"~5.1.1","vega-util":"~1.17.2",yargs:"~17.7.2"},HGt={vega:"^5.24.0"},qGt={node:">=18"},WGt="yarn@1.22.22",GGt={name:TGt,author:SGt,version:CGt,collaborators:AGt,homepage:IGt,description:kGt,keywords:RGt,main:NGt,unpkg:DGt,jsdelivr:PGt,module:OGt,types:MGt,bin:LGt,files:$Gt,scripts:FGt,repository:BGt,license:jGt,bugs:UGt,devDependencies:zGt,dependencies:VGt,peerDependencies:HGt,engines:qGt,packageManager:WGt};function loe(e){return Rt(e,"or")}function coe(e){return Rt(e,"and")}function foe(e){return Rt(e,"not")}function C$(e,t){if(foe(e))C$(e.not,t);else if(coe(e))for(const n of e.and)C$(n,t);else if(loe(e))for(const n of e.or)C$(n,t);else t(e)}function K2(e,t){return foe(e)?{not:K2(e.not,t)}:coe(e)?{and:e.and.map(n=>K2(n,t))}:loe(e)?{or:e.or.map(n=>K2(n,t))}:t(e)}const qn=structuredClone;function pFe(e){throw new Error(e)}function JC(e,t){const n={};for(const r of t)Jt(e,r)&&(n[r]=e[r]);return n}function Yc(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Gi(e)).join(",")})`};function Lr(e){if(yi(e))return e;const t=Gt(e)?e:Gi(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function QK(e){return e===!1||e===null}function Ir(e,t){return e.includes(t)}function ZC(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function doe(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function mFe(e,...t){for(const n of t)YGt(e,n??{});return e}function YGt(e,t){for(const n of It(t))mI(e,n,t[n],!0)}function m0(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function KGt(e,t){const n=It(e),r=It(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function gFe(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function hoe(e,t){for(const n of e)if(t.has(n))return!0;return!1}function JK(e){const t=new Set;for(const n of e){const i=lg(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function poe(e,t){return e===void 0||t===void 0?!0:hoe(JK(e),JK(t))}function Wi(e){return It(e).length===0}const It=Object.keys,_u=Object.values,tx=Object.entries;function EP(e){return e===!0||e===!1}function Ps(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function nD(e,t){return foe(e)?`!(${nD(e.not,t)})`:coe(e)?`(${e.and.map(n=>nD(n,t)).join(") && (")})`:loe(e)?`(${e.or.map(n=>nD(n,t)).join(") || (")})`:t(e)}function v8(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&v8(e[n],t)&&delete e[n],Wi(e)}function aO(e){return e.charAt(0).toUpperCase()+e.substr(1)}function moe(e,t="datum"){const n=lg(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(jt).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function yFe(e,t="datum"){return`${t}[${jt(lg(e).join("."))}]`}function Mi(e){return`datum['${e.replaceAll("'","\\'")}']`}function XGt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function fh(e){return`${lg(e).map(XGt).join("\\.")}`}function fE(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function SI(e){return`${lg(e).join(".")}`}function eA(e){return e?lg(e).length:0}function Io(...e){return e.find(t=>t!==void 0)}let vFe=42;function bFe(e){const t=++vFe;return e?String(e)+t:t}function QGt(){vFe=42}function xFe(e){return _Fe(e)?e:`__${e}`}function _Fe(e){return e.startsWith("__")}function TP(e){if(e!==void 0)return(e%360+360)%360}function Jj(e){return yi(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const x1e=Object.getPrototypeOf(structuredClone({}));function Qf(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Qf(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const s of e.entries())if(!t.has(s[0]))return!1;for(const s of e.entries())if(!Qf(s[1],t.get(s[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const s of e.entries())if(!t.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==x1e.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==x1e.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!Qf(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Gi(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}function Rt(e,t){return Ht(e)&&Jt(e,t)&&e[t]!==void 0}const Uy="row",zy="column",Zj="facet",Ms="x",qa="y",sm="x2",pg="y2",Nx="xOffset",CI="yOffset",om="radius",P1="radius2",Ah="theta",O1="theta2",am="latitude",um="longitude",lm="latitude2",dh="longitude2",Dx="time",sf="color",mg="fill",gg="stroke",of="shape",M1="size",ZE="angle",L1="opacity",Px="fillOpacity",Ox="strokeOpacity",Mx="strokeWidth",Lx="strokeDash",uO="text",tA="order",lO="detail",e7="key",dE="tooltip",t7="href",n7="url",r7="description",JGt={x:1,y:1,x2:1,y2:1},wFe={theta:1,theta2:1,radius:1,radius2:1};function EFe(e){return Jt(wFe,e)}const goe={longitude:1,longitude2:1,latitude:1,latitude2:1};function TFe(e){switch(e){case am:return"y";case lm:return"y2";case um:return"x";case dh:return"x2"}}function SFe(e){return Jt(goe,e)}const ZGt=It(goe),yoe={...JGt,...wFe,...goe,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function X2(e){return e===sf||e===mg||e===gg}const CFe={row:1,column:1,facet:1},th=It(CFe),voe={...yoe,...CFe},eYt=It(voe),{order:eun,detail:tun,tooltip:nun,...tYt}=voe,{row:run,column:iun,facet:sun,...nYt}=tYt;function rYt(e){return Jt(nYt,e)}function AFe(e){return Jt(voe,e)}const iYt=[sm,pg,lm,dh,O1,P1];function IFe(e){return eT(e)!==e}function eT(e){switch(e){case sm:return Ms;case pg:return qa;case lm:return am;case dh:return um;case O1:return Ah;case P1:return om}return e}function nx(e){if(EFe(e))switch(e){case Ah:return"startAngle";case O1:return"endAngle";case om:return"outerRadius";case P1:return"innerRadius"}return e}function yg(e){switch(e){case Ms:return sm;case qa:return pg;case am:return lm;case um:return dh;case Ah:return O1;case om:return P1}}function af(e){switch(e){case Ms:case sm:return"width";case qa:case pg:return"height"}}function kFe(e){switch(e){case Ms:return"xOffset";case qa:return"yOffset";case sm:return"x2Offset";case pg:return"y2Offset";case Ah:return"thetaOffset";case om:return"radiusOffset";case O1:return"theta2Offset";case P1:return"radius2Offset"}}function boe(e){switch(e){case Ms:return"xOffset";case qa:return"yOffset"}}function sYt(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const oYt=It(yoe),{x:oun,y:aun,x2:uun,y2:lun,xOffset:cun,yOffset:fun,latitude:dun,longitude:hun,latitude2:pun,longitude2:mun,theta:gun,theta2:yun,radius:vun,radius2:bun,...xoe}=yoe,aYt=It(xoe),_oe={x:1,y:1},$1=It(_oe);function ko(e){return Jt(_oe,e)}const woe={theta:1,radius:1},uYt=It(woe);function i7(e){return e==="width"?Ms:qa}const RFe={xOffset:1,yOffset:1};function cO(e){return Jt(RFe,e)}const lYt={time:1};function KH(e){return e in lYt}const{text:xun,tooltip:_un,href:wun,url:Eun,description:Tun,detail:Sun,key:Cun,order:Aun,...NFe}=xoe,cYt=It(NFe);function fYt(e){return Jt(xoe,e)}function dYt(e){switch(e){case sf:case mg:case gg:case M1:case of:case L1:case Mx:case Lx:return!0;case Px:case Ox:case ZE:case Dx:return!1}}const DFe={..._oe,...woe,...RFe,...NFe},Eoe=It(DFe);function vg(e){return Jt(DFe,e)}function hYt(e,t){return mYt(e)[t]}const PFe={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:Iun,...pYt}=PFe;function mYt(e){switch(e){case sf:case mg:case gg:case r7:case lO:case e7:case dE:case t7:case tA:case L1:case Px:case Ox:case Mx:case Zj:case Uy:case zy:return PFe;case Ms:case qa:case Nx:case CI:case am:case um:case Dx:return pYt;case sm:case pg:case lm:case dh:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case M1:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Lx:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case of:return{point:"always",geoshape:"always"};case uO:return{text:"always"};case ZE:return{point:"always",square:"always",text:"always"};case n7:return{image:"always"};case Ah:return{text:"always",arc:"always"};case om:return{text:"always",arc:"always"};case O1:case P1:return{arc:"always"}}}function XH(e){switch(e){case Ms:case qa:case Ah:case om:case Nx:case CI:case M1:case ZE:case Mx:case L1:case Px:case Ox:case Dx:case sm:case pg:case O1:case P1:return;case Zj:case Uy:case zy:case of:case Lx:case uO:case dE:case t7:case n7:case r7:return"discrete";case sf:case mg:case gg:return"flexible";case am:case um:case lm:case dh:case lO:case e7:case tA:return}}const gYt={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},yYt={count:1,min:1,max:1};function p1(e){return Rt(e,"argmin")}function $x(e){return Rt(e,"argmax")}function Toe(e){return Gt(e)&&Jt(gYt,e)}const vYt=new Set(["count","valid","missing","distinct"]);function s7(e){return Gt(e)&&vYt.has(e)}function bYt(e){return Gt(e)&&Ir(["min","max"],e)}const xYt=new Set(["count","sum","distinct","valid","missing"]),_Yt=new Set(["mean","average","median","q1","q3","min","max"]);function OFe(e){return Ix(e)&&(e=y7(e,void 0)),"bin"+It(e).map(t=>o7(e[t])?Ps(`_${t}_${tx(e[t])}`):Ps(`_${t}_${e[t]}`)).join("")}function hs(e){return e===!0||tT(e)&&!e.binned}function lu(e){return e==="binned"||tT(e)&&e.binned===!0}function tT(e){return Ht(e)}function o7(e){return Rt(e,"param")}function _1e(e){switch(e){case Uy:case zy:case M1:case sf:case mg:case gg:case Mx:case L1:case Px:case Ox:case of:return 6;case Lx:return 4;default:return 10}}function fO(e){return Rt(e,"expr")}function cu(e,{level:t}={level:0}){const n=It(e||{}),r={};for(const i of n)r[i]=t===0?qf(e[i]):cu(e[i],{level:t-1});return r}function MFe(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,y={...m,...a?{fill:a}:{}},v={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},b={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},w=JC(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:y,subtitleMarkConfig:w,nonMarkTitleProperties:v,subtitle:b}}function Bv(e){return Gt(e)||ct(e)&&Gt(e[0])}function pn(e){return Rt(e,"signal")}function nT(e){return Rt(e,"step")}function wYt(e){return ct(e)?!1:Rt(e,"fields")&&!Rt(e,"data")}function EYt(e){return ct(e)?!1:Rt(e,"fields")&&Rt(e,"data")}function Ry(e){return ct(e)?!1:Rt(e,"field")&&Rt(e,"data")}const TYt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},SYt=It(TYt),CYt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},ZK=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function LFe(e){const t=ct(e.condition)?e.condition.map(w1e):w1e(e.condition);return{...qf(e),condition:t}}function qf(e){if(fO(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function w1e(e){if(fO(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function _s(e){if(fO(e)){const{expr:t,...n}=e;return{signal:t,...n}}return pn(e)?e:e!==void 0?{value:e}:void 0}function AYt(e){return pn(e)?e.signal:jt(e)}function E1e(e){return pn(e)?e.signal:jt(e.value)}function Tp(e){return pn(e)?e.signal:e==null?null:jt(e)}function IYt(e,t,n){for(const r of n){const i=J0(r,t.markDef,t.config);i!==void 0&&(e[r]=_s(i))}return e}function $Fe(e){return[].concat(e.type,e.style??[])}function Vi(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&Rt(t,i)?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:J0(e,t,n,r)}function J0(e,t,n,{vgChannel:r}={}){const i=eX(e,t,n.style);return Io(r?i:void 0,i,r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function eX(e,t,n){return FFe(e,$Fe(t),n)}function FFe(e,t,n){t=Wt(t);let r;for(const i of t){const s=n[i];Rt(s,e)&&(r=s[e])}return r}function BFe(e,t){return Wt(e).reduce((n,r)=>(n.field.push(Vt(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function jFe(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Qf(i,r))return;n.push(r)}),n}function UFe(e,t){return Qf(e,t)||!t?e:e?[...Wt(e),...Wt(t)].join(", "):t}function zFe(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((Bv(n)||pn(n))&&(Bv(r)||pn(r)))return{explicit:e.explicit,value:UFe(n,r)};if(Bv(n)||pn(n))return{explicit:e.explicit,value:n};if(Bv(r)||pn(r))return{explicit:e.explicit,value:r};if(!Bv(n)&&!pn(n)&&!Bv(r)&&!pn(r))return{explicit:e.explicit,value:jFe(n,r)};throw new Error("It should never reach here")}function Soe(e){return`Invalid specification ${Gi(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const kYt='Autosize "fit" only works for single views and layered views.';function T1e(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function S1e(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function C1e(e){return e?`Dropping "fit-${e}" because spec has discrete ${af(e)}.`:'Dropping "fit" because spec has discrete size.'}function Coe(e){return`Unknown field for ${e}. Cannot calculate view size.`}function A1e(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function RYt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function NYt(e){return`The "nearest" transform is not supported for ${e} marks.`}function VFe(e){return`Selection not supported for ${e} yet.`}function DYt(e){return`Cannot find a selection named "${e}".`}const PYt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",OYt="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",MYt="Legend bindings are only supported for selections over an individual field or encoding channel.";function LYt(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function $Yt(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const FYt="The same selection must be used to override scale domains in a layered view.",BYt='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function jYt(e){return`Unknown repeated value "${e}".`}function I1e(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const UYt="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",Aoe="Animation involving facet, layer, or concat is currently unsupported.";function zYt(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${jt(e)}.`}function VYt(e,t,n,r){return(e.length?"Multiple ":"No ")+`matching ${jt(t)} encoding found for selection ${jt(n.param)}. Using "field": ${jt(r)}.`}const HYt="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function qYt(e){return`Unrecognized parse "${e}".`}function k1e(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const WYt="Attempt to add the same child twice.";function GYt(e){return`Ignoring an invalid transform: ${Gi(e)}.`}const YYt='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function R1e(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function KYt(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Gi(t)} is overridden by a child projection ${Gi(n)}.`}const XYt="Arc marks uses theta channel rather than angle, replacing angle with theta.";function QYt(e){return`${e}Offset dropped because ${e} is continuous`}function JYt(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Gi(n)}}.`}function HFe(e){return`Invalid field type "${e}".`}function ZYt(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function eKt(e){return`Invalid aggregation operator "${e}".`}function qFe(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function tKt(e){return`Position range does not support relative band size for ${e}.`}function tX(e,t){return`Dropping ${Gi(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const nKt="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function a7(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function rKt(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function iKt(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function sKt(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function oKt(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function QH(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function aKt(e){return`The ${e} for range marks cannot be an expression`}function uKt(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function lKt(e,t){return`Specified orient "${e}" overridden with "${t}".`}function cKt(e){return`Cannot use the scale property "${e}" with non-color channel.`}function fKt(e){return`Cannot use the relative band size with ${e} scale.`}function dKt(e){return`Using unaggregated domain with raw field has no effect (${Gi(e)}).`}function hKt(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function pKt(e){return`Unaggregated domain is currently unsupported for log scale (${Gi(e)}).`}function mKt(e){return`Cannot apply size to non-oriented mark "${e}".`}function gKt(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function yKt(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function WFe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function GFe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function vKt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Gi(n)} and ${Gi(r)}). Using ${Gi(n)}.`}function bKt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Gi(n)} and ${Gi(r)}). Using the union of the two domains.`}function xKt(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function _Kt(e){return`Dropping sort property ${Gi(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const N1e="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",wKt="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",EKt="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",TKt="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function SKt(e){return`Cannot stack "${e}" if there is already "${e}2".`}function CKt(e){return`Stack is applied to a non-linear scale (${e}).`}function AKt(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function b8(e,t){return`Invalid ${e}: ${Gi(t)}.`}function IKt(e){return`Dropping day from datetime ${Gi(e)} as day cannot be combined with other units.`}function kKt(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function RKt(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function NKt(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function D1e(e){return`1D error band does not support ${e}.`}function YFe(e){return`Channel ${e} is required for "binned" bin.`}function DKt(e){return`Channel ${e} should not be used with "binned" bin.`}function PKt(e){return`Domain for ${e} is required for threshold scale.`}const KFe=ire(rre);let hE=KFe;function OKt(e){return hE=e,hE}function MKt(){return hE=KFe,hE}function Ioe(...e){hE.error(...e)}function Pt(...e){hE.warn(...e)}function LKt(...e){hE.debug(...e)}function rT(e){if(e&&Ht(e)){for(const t of Roe)if(Rt(e,t))return!0}return!1}const XFe=["january","february","march","april","may","june","july","august","september","october","november","december"],$Kt=XFe.map(e=>e.substr(0,3)),QFe=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],FKt=QFe.map(e=>e.substr(0,3));function BKt(e){if(Jj(e)&&(e=+e),yi(e))return e>4&&Pt(b8("quarter",e)),e-1;throw new Error(b8("quarter",e))}function jKt(e){if(Jj(e)&&(e=+e),yi(e))return e-1;{const t=e.toLowerCase(),n=XFe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=$Kt.indexOf(r);if(i!==-1)return i;throw new Error(b8("month",e))}}function UKt(e){if(Jj(e)&&(e=+e),yi(e))return e%7;{const t=e.toLowerCase(),n=QFe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=FKt.indexOf(r);if(i!==-1)return i;throw new Error(b8("day",e))}}function koe(e,t){const n=[];if(t&&e.day!==void 0&&It(e).length>1&&(Pt(IKt(e)),e=qn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?jKt(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?BKt(e.quarter):e.quarter;n.push(yi(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?UKt(e.day):e.day;n.push(yi(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function pE(e){const n=koe(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function zKt(e){const n=koe(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function VKt(e){const t=koe(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const JFe={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Roe=It(JFe);function HKt(e){return Jt(JFe,e)}function iT(e){return Ht(e)?e.binned:ZFe(e)}function ZFe(e){return e&&e.startsWith("binned")}function Noe(e){return e.startsWith("utc")}function qKt(e){return e.substring(3)}const WKt={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function u7(e){return Roe.filter(t=>t5e(e,t))}function e5e(e){const t=u7(e);return t[t.length-1]}function t5e(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function GKt(e,t,{end:n}={end:!1}){const r=moe(t),i=Noe(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of Roe)t5e(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),zKt(a)}function n5e(e){if(!e)return;const t=u7(e);return`timeUnitSpecifier(${Gi(t)}, ${Gi(WKt)})`}function YKt(e,t,n){if(!e)return;const r=n5e(e);return`${n||Noe(e)?"utc":"time"}Format(${t}, ${r})`}function ja(e){if(!e)return;let t;return Gt(e)?ZFe(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:Ht(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),Noe(t.unit)&&(t.utc=!0,t.unit=qKt(t.unit)),t}function KKt(e){const{utc:t,...n}=ja(e);return n.unit?(t?"utc":"")+It(n).map(r=>Ps(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+It(n).map(r=>Ps(`_${r}_${n[r]}`)).join("")}function r5e(e,t=n=>n){const n=ja(e),r=e5e(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=i5e(r,n.step),a={...i,[o]:+i[o]+s};return`${t(pE(a))} - ${t(pE(i))}`}}const XKt={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function QKt(e){return Jt(XKt,e)}function i5e(e,t=1){if(QKt(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function JKt(e){return Rt(e,"param")}function Doe(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function Poe(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function Ooe(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function Moe(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function Loe(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function $oe(e){if(e!=null&&e.field){if(ct(e.range)&&e.range.length===2)return!0;if(pn(e.range))return!0}return!1}function Foe(e){return!!(e!=null&&e.field)&&(ct(e.oneOf)||ct(e.in))}function ZKt(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function s5e(e){return Foe(e)||Doe(e)||$oe(e)||Poe(e)||Moe(e)||Ooe(e)||Loe(e)}function Bm(e,t){return v7(e,{timeUnit:t,wrapTime:!0})}function eXt(e,t){return e.map(n=>Bm(n,t))}function o5e(e,t=!0){const{field:n}=e,r=ja(e.timeUnit),{unit:i,binned:s}=r||{},o=Vt(e,{expr:"datum"}),a=i?`time(${s?o:GKt(i,n)})`:o;if(Doe(e))return`${a}===${Bm(e.equal,i)}`;if(Poe(e)){const u=e.lt;return`${a}<${Bm(u,i)}`}else if(Moe(e)){const u=e.gt;return`${a}>${Bm(u,i)}`}else if(Ooe(e)){const u=e.lte;return`${a}<=${Bm(u,i)}`}else if(Loe(e)){const u=e.gte;return`${a}>=${Bm(u,i)}`}else{if(Foe(e))return`indexof([${eXt(e.oneOf,i).join(",")}], ${a}) !== -1`;if(ZKt(e))return l7(a,e.valid);if($oe(e)){const{range:u}=cu(e),l=pn(u)?{signal:`${u.signal}[0]`}:u[0],c=pn(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+Bm(l,i)+", "+Bm(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${Bm(l,i)}`),c!==null&&f.push(`${a} <= ${Bm(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Gi(e)}`)}function l7(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function tXt(e){return s5e(e)&&e.timeUnit?{...e,timeUnit:ja(e.timeUnit)}:e}const dO={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function nXt(e){return e==="quantitative"||e==="temporal"}function a5e(e){return e==="ordinal"||e==="nominal"}const mE=dO.quantitative,Boe=dO.ordinal,nA=dO.temporal,joe=dO.nominal,AI=dO.geojson;function rXt(e){if(e)switch(e=e.toLowerCase(),e){case"q":case mE:return"quantitative";case"t":case nA:return"temporal";case"o":case Boe:return"ordinal";case"n":case joe:return"nominal";case AI:return"geojson"}}const fu={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},nX={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function iXt(e,t){const n=nX[e],r=nX[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const sXt={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function P1e(e){return sXt[e]}const u5e=new Set(["linear","log","pow","sqrt","symlog"]),l5e=new Set([...u5e,"time","utc"]);function c5e(e){return u5e.has(e)}const f5e=new Set(["quantile","quantize","threshold"]),oXt=new Set([...l5e,...f5e,"sequential","identity"]),aXt=new Set(["ordinal","bin-ordinal","point","band"]);function za(e){return aXt.has(e)}function qp(e){return oXt.has(e)}function g0(e){return l5e.has(e)}function rA(e){return f5e.has(e)}const uXt={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function lXt(e){return!Gt(e)&&Rt(e,"name")}function d5e(e){return Rt(e,"param")}function cXt(e){return Rt(e,"unionWith")}function fXt(e){return Ht(e)&&"field"in e}const dXt={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:kun,domain:Run,range:Nun,rangeMax:Dun,rangeMin:Pun,scheme:Oun,...hXt}=dXt,pXt=It(hXt);function rX(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return g0(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return g0(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return g0(e);case"nice":return g0(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return qp(e)&&!Ir(["log","time","utc","threshold","quantile"],e)}}function h5e(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return X2(e)?void 0:cKt(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function mXt(e,t){return Ir([Boe,joe],t)?e===void 0||za(e):t===nA?Ir([fu.TIME,fu.UTC,void 0],e):t===mE?c5e(e)||rA(e)||e===void 0:!0}function gXt(e,t,n=!1){if(!vg(e))return!1;switch(e){case Ms:case qa:case Nx:case CI:case Ah:case om:return g0(t)||t==="band"?!0:t==="point"?!n:!1;case Dx:return Ir(["linear","band"],t);case M1:case Mx:case L1:case Px:case Ox:case ZE:return g0(t)||rA(t)||Ir(["band","point","ordinal"],t);case sf:case mg:case gg:return t!=="band";case Lx:case of:return t==="ordinal"||rA(t)}}function yXt(e){return Ht(e)&&"value"in e}const rc={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},p5e=rc.arc,c7=rc.area,f7=rc.bar,vXt=rc.image,d7=rc.line,h7=rc.point,bXt=rc.rect,x8=rc.rule,m5e=rc.text,Uoe=rc.tick,xXt=rc.trail,zoe=rc.circle,Voe=rc.square,g5e=rc.geoshape;function Fx(e){return["line","area","trail"].includes(e)}function SP(e){return["rect","bar","image","arc","tick"].includes(e)}const _Xt=new Set(It(rc));function Z0(e){return Rt(e,"type")}const wXt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],EXt=["fill","fillOpacity"],TXt=[...wXt,...EXt],SXt={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},O1e=It(SXt),JH=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],CXt={area:["line","point"],bar:JH,rect:JH,line:["point"],tick:["bandSize","thickness",...JH]},AXt={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},IXt={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},y5e=It(IXt);function gE(e){return Rt(e,"band")}const kXt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},RXt=5,Hoe={binSpacing:0,continuousBandSize:RXt,minBandSize:.25,timeUnitBandPosition:.5},NXt={...Hoe,binSpacing:1},DXt={...Hoe,thickness:1};function PXt(e){return Z0(e)?e.type:e}function v5e(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function qoe({markDef:e,config:t,scaleChannel:n,scaleType:r,isCountAggregate:i}){var a,u;if(!r||!qp(r)||i)return"always-valid";const s=v5e(Vi("invalid",e,t),{isPath:Fx(e.type)});return((u=(a=t.scale)==null?void 0:a.invalid)==null?void 0:u[n])!==void 0?"show":s}function OXt(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function b5e({scaleName:e,scale:t,mode:n}){const r=`domain('${e}')`;if(!t||!e)return;const i=`${r}[0]`,s=`peek(${r})`,o=t.domainHasZero();return o==="definitely"?{scale:e,value:0}:o==="maybe"?{signal:`scale('${e}', inrange(0, ${r}) ? 0 : ${n==="zeroOrMin"?i:s})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?i:s})`}}function x5e({scaleChannel:e,channelDef:t,scale:n,scaleName:r,markDef:i,config:s}){var c;const o=n==null?void 0:n.get("type"),a=Gp(t),u=s7(a==null?void 0:a.aggregate),l=qoe({scaleChannel:e,markDef:i,config:s,scaleType:o,isCountAggregate:u});if(a&&l==="show"){const f=((c=s.scale.invalid)==null?void 0:c[e])??"zero-or-min";return{test:l7(Vt(a,{expr:"datum"}),!1),...MXt(f,n,r)}}}function MXt(e,t,n){if(yXt(e)){const{value:r}=e;return pn(r)?{signal:r.signal}:{value:r}}return b5e({scale:t,scaleName:n,mode:"zeroOrMin"})}function Woe(e){const{channel:t,channelDef:n,markDef:r,scale:i,scaleName:s,config:o}=e,a=eT(t),u=Goe(e),l=x5e({scaleChannel:a,channelDef:n,scale:i,scaleName:s,markDef:r,config:o});return l!==void 0?[l,u]:u}function LXt(e){const{datum:t}=e;return rT(t)?pE(t):`${Gi(t)}`}function Fw(e,t,n,r){const i={};if(t&&(i.scale=t),bg(e)){const{datum:s}=e;rT(s)?i.signal=pE(s):pn(s)?i.signal=s.signal:fO(s)?i.signal=s.expr:i.value=s}else i.field=Vt(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function _8({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!pn(o)&&0<o&&o<1?"datum":void 0,u=Vt(t,{expr:a,suffix:i}),l=n!==void 0?Vt(n,{expr:a}):Vt(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=pn(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function $Xt({scaleName:e,fieldDef:t}){const n=Vt(t,{expr:"datum"}),r=Vt(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function Goe({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(Qn(t)){const f=o==null?void 0:o.get("type");if(Zl(t)){c??(c=rx({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(hs(d)||c&&h&&p===nA)return a!=null&&a.impute?Fw(t,s,{binSuffix:"mid"},{offset:u}):c&&!za(f)?_8({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):Fw(t,s,yO(t,e)?{binSuffix:"range"}:{},{offset:u});if(lu(d)){if($t(n))return _8({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});Pt(YFe(e===Ms?sm:pg))}}return Fw(t,s,za(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(Wp(t)){const f=t.value,d=u?{offset:u}:{};return{...rD(e,f),...d}}}return cr(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function rD(e,t){return Ir(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Ir(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:_s(t)}function yE(e){return e&&e!=="number"&&e!=="time"}function _5e(e,t,n){return`${e}(${t}${n?`, ${Gi(n)}`:""})`}const FXt="  ";function Yoe({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(yE(n))return Sp({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=w5e(e,r,i),a=iA(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return Sp({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return Sp({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&$t(e)&&e.timeUnit===void 0)return Sp({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(oA(e)){const c=jXt({field:o,timeUnit:$t(e)?(u=ja(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:sT(e)&&((l=e.scale)==null?void 0:l.type)===fu.UTC});return c?{signal:c}:void 0}if(t=iX({type:a,specifiedFormat:t,config:s,normalizeStack:i}),$t(e)&&hs(e.bin)){const c=Vt(e,{expr:r,binSuffix:"end"});return{signal:hO(o,c,t,n,s)}}else return t||iA(e)==="quantitative"?{signal:`${S5e(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function w5e(e,t,n){return $t(e)?n?`${Vt(e,{expr:t,suffix:"end"})}-${Vt(e,{expr:t,suffix:"start"})}`:Vt(e,{expr:t}):LXt(e)}function Sp({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=w5e(e,r,i)),o!=="datum.value"&&$t(e)&&hs(e.bin)){const a=Vt(e,{expr:r,binSuffix:"end"});return{signal:hO(o,a,t,n,s)}}return{signal:_5e(n,o,t)}}function E5e(e,t,n,r,i,s){var o;if(!(Gt(r)&&yE(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&iA(e)==="quantitative"&&(i.normalizedNumberFormatType&&sA(e)&&e.stack==="normalize"||i.numberFormatType))){if(sA(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return iX({type:"quantitative",config:i,normalizeStack:!0});if(oA(e)){const a=$t(e)?(o=ja(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:BXt({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return iX({type:t,specifiedFormat:n,config:i})}}function T5e(e,t,n){var r;if(e&&(pn(e)||e==="number"||e==="time"))return e;if(oA(t)&&n!=="time"&&n!=="utc")return $t(t)&&((r=ja(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function iX({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(Gt(t))return t;if(e===mE)return r?n.normalizedNumberFormat:n.numberFormat}function BXt({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:n5e(t)}:r?void 0:n.timeFormat)}function S5e(e,t){return`format(${e}, "${t||""}")`}function M1e(e,t,n,r){return yE(n)?_5e(n,e,t):S5e(e,(Gt(t)?t:void 0)??r.numberFormat)}function hO(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return hO(e,t,i.numberFormat,i.numberFormatType,i);const s=M1e(e,n,r,i),o=M1e(t,n,r,i);return`${l7(e,!1)} ? "null" : ${s} + "${FXt}" + ${o}`}function jXt({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=Gt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):YKt(t,e,s)}const p7="min",UXt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function L1e(e){return Jt(UXt,e)}function zXt(e){return Rt(e,"encoding")}function Vy(e){return e&&(e.op==="count"||Rt(e,"field"))}function C5e(e){return e&&ct(e)}function pO(e){return Rt(e,"row")||Rt(e,"column")}function Koe(e){return Rt(e,"header")}function m7(e){return Rt(e,"facet")}function VXt(e){return Rt(e,"param")}function HXt(e){return!Gt(e)&&Rt(e,"repeat")}function $1e(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function Xoe(e){return Rt(e,"sort")}function rx({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Qn(e)&&e.bandPosition!==void 0)return e.bandPosition;if($t(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return J0("timeUnitBandPosition",n,r);if(hs(s))return .5}}function A5e({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=af(e),u=Vi(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if($t(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:J0("timeUnitBandSize",r,i)};if(hs(h)&&!za(s))return{band:1}}if(SP(r.type))return s?za(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function I5e(e,t,n,r){return hs(e.bin)||e.timeUnit&&Zl(e)&&e.type==="temporal"?rx({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function k5e(e){return Rt(e,"sort")&&!Rt(e,"field")}function mO(e){return Rt(e,"condition")}function g7(e){const t=e==null?void 0:e.condition;return!!t&&!ct(t)&&$t(t)}function gO(e){const t=e==null?void 0:e.condition;return!!t&&!ct(t)&&Qn(t)}function qXt(e){const t=e==null?void 0:e.condition;return!!t&&(ct(t)||Wp(t))}function $t(e){return Rt(e,"field")||(e==null?void 0:e.aggregate)==="count"}function iA(e){return e==null?void 0:e.type}function bg(e){return Rt(e,"datum")}function sb(e){return Zl(e)&&!E8(e)||w8(e)}function F1e(e){return Zl(e)&&e.type==="quantitative"&&!e.bin||w8(e)}function w8(e){return bg(e)&&yi(e.datum)}function Qn(e){return $t(e)||bg(e)}function Zl(e){return e&&(Rt(e,"field")||e.aggregate==="count")&&Rt(e,"type")}function Wp(e){return Rt(e,"value")}function sT(e){return Rt(e,"scale")||Rt(e,"sort")}function sA(e){return Rt(e,"axis")||Rt(e,"stack")||Rt(e,"impute")}function R5e(e){return Rt(e,"legend")}function N5e(e){return Rt(e,"format")||Rt(e,"formatType")}function WXt(e){return Yc(e,["legend","axis","header","scale"])}function GXt(e){return Rt(e,"op")}function Vt(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(KXt(e))n=xFe("count");else{let o;if(!t.nofn)if(GXt(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;hs(a)?(o=OFe(a),i=(t.binSuffix??"")+(t.suffix??"")):u?$x(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):p1(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!iT(l)&&(o=KKt(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?SI(n):t.expr?yFe(n,t.expr)+s:fh(n)+s}function E8(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return $t(e)&&!!e.bin;case"temporal":return!1}throw new Error(HFe(e.type))}function YXt(e){var t;return sT(e)&&rA((t=e.scale)==null?void 0:t.type)}function KXt(e){return e.aggregate==="count"}function XXt(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(hs(r))return`${n} (binned)`;if(i&&!iT(i)){const a=(o=ja(i))==null?void 0:o.unit;if(a)return`${n} (${u7(a).join("-")})`}else if(s)return $x(s)?`${n} for max ${s.argmax}`:p1(s)?`${n} for min ${s.argmin}`:`${aO(s)} of ${n}`;return n}function QXt(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if($x(t))return`${i} for argmax(${t.argmax})`;if(p1(t))return`${i} for argmin(${t.argmin})`;const s=r&&!iT(r)?ja(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||hs(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const D5e=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return QXt(e);default:return XXt(e,t)}};let P5e=D5e;function O5e(e){P5e=e}function JXt(){O5e(D5e)}function Q2(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=Qoe(e))==null?void 0:a.title;if(!$t(e))return i??e.title;const s=e,o=r?Joe(s,t):void 0;return n?Io(i,s.title,o):i??s.title??o}function Qoe(e){if(sA(e)&&e.axis)return e.axis;if(R5e(e)&&e.legend)return e.legend;if(Koe(e)&&e.header)return e.header}function Joe(e,t){return P5e(e,t)}function T8(e){if(N5e(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=Qoe(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function ZXt(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Xoe(e)&&ct(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!$x(n)&&!p1(n))return"quantitative";if(sT(e)&&((s=e.scale)!=null&&s.type))switch(nX[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Gp(e){if($t(e))return e;if(g7(e))return e.condition}function la(e){if(Qn(e))return e;if(gO(e))return e.condition}function M5e(e,t,n,r={}){if(Gt(e)||yi(e)||Ix(e)){const i=Gt(e)?"string":yi(e)?"number":"boolean";return Pt(JYt(t,i,e)),{value:e}}return Qn(e)?S8(e,t,n,r):gO(e)?{...e,condition:S8(e.condition,t,n,r)}:e}function S8(e,t,n,r){if(N5e(e)){const{format:i,formatType:s,...o}=e;if(yE(s)&&!n.customFormatTypes)return Pt(R1e(t)),S8(o,t,n,r)}else{const i=sA(e)?"axis":R5e(e)?"legend":Koe(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(yE(o)&&!n.customFormatTypes)return Pt(R1e(t)),S8({...e,[i]:a},t,n,r)}}return $t(e)?Zoe(e,t,r):eQt(e)}function eQt(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=yi(n)?"quantitative":Gt(n)?"nominal":rT(n)?"temporal":void 0,{...e,type:t}}function Zoe(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!Toe(r)&&!$x(r)&&!p1(r)&&(Pt(eKt(r)),delete a.aggregate),i&&(a.timeUnit=ja(i)),o&&(a.field=`${o}`),hs(s)&&(a.bin=y7(s,t)),lu(s)&&!ko(t)&&Pt(DKt(t)),Zl(a)){const{type:u}=a,l=rXt(u);u!==l&&(a.type=l),u!=="quantitative"&&s7(r)&&(Pt(ZYt(u,r)),a.type="quantitative")}else if(!IFe(t)){const u=ZXt(a,t);a.type=u}if(Zl(a)){const{compatible:u,warning:l}=tQt(a,t)||{};u===!1&&Pt(l)}if(Xoe(a)&&Gt(a.sort)){const{sort:u}=a;if(L1e(u))return{...a,sort:{encoding:u}};const l=u.substring(1);if(u.charAt(0)==="-"&&L1e(l))return{...a,sort:{encoding:l,order:"descending"}}}if(Koe(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function y7(e,t){return Ix(e)?{maxbins:_1e(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:_1e(t)}:e}const VS={compatible:!0};function tQt(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Uy:case zy:case Zj:return E8(e)?VS:{compatible:!1,warning:iKt(t)};case Ms:case qa:case Nx:case CI:case sf:case mg:case gg:case uO:case lO:case e7:case dE:case t7:case n7:case ZE:case Ah:case om:case r7:return VS;case um:case dh:case am:case lm:return n!==mE?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:VS;case L1:case Px:case Ox:case Mx:case M1:case O1:case P1:case sm:case pg:case Dx:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:VS;case of:case Lx:return!E8(e)&&!YXt(e)?{compatible:!1,warning:sKt(t)}:VS;case tA:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:VS}}function oA(e){const{formatType:t}=T8(e);return t==="time"||!t&&nQt(e)}function nQt(e){return e&&(e.type==="temporal"||$t(e)&&!!e.timeUnit)}function v7(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=ja(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return fO(e)?a=e.expr:pn(e)?a=e.signal:rT(e)?(o=!0,a=pE(e)):(Gt(e)||yi(e))&&o&&(a=`datetime(${Gi(e)})`,HKt(s)&&(yi(e)&&e<1e4||Gt(e)&&isNaN(Date.parse(e)))&&(a=pE({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Gi(e)}function L5e(e,t){const{type:n}=e;return t.map(r=>{const i=$t(e)&&!iT(e.timeUnit)?e.timeUnit:void 0,s=v7(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function yO(e,t){return hs(e.bin)?vg(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const B1e={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function vO(e){return e==null?void 0:e.condition}const $5e=["domain","grid","labels","ticks","title"],rQt={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},F5e={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},iQt={...F5e,style:1,labelExpr:1,encoding:1};function j1e(e){return Jt(iQt,e)}const sQt={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},B5e=It(sQt);function F1(e){return Rt(e,"mark")}class b7{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return F1(t)?PXt(t.mark)===this.name:!1}}function Bw(e,t){const n=e&&e[t];return n?ct(n)?ZC(n,r=>!!r.field):$t(n)||g7(n):!1}function j5e(e,t){const n=e&&e[t];return n?ct(n)?ZC(n,r=>!!r.field):$t(n)||bg(n)||gO(n):!1}function U5e(e,t){if(ko(t)){const n=e[t];if(($t(n)||bg(n))&&(a5e(n.type)||$t(n)&&n.timeUnit)){const r=boe(t);return j5e(e,r)}}return!1}function z5e(e){return ZC(eYt,t=>{if(Bw(e,t)){const n=e[t];if(ct(n))return ZC(n,r=>!!r.aggregate);{const r=Gp(n);return r&&!!r.aggregate}}return!1})}function V5e(e,t){const n=[],r=[],i=[],s=[],o={};return eae(e,(a,u)=>{if($t(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=Qoe(a),m=p==null?void 0:p.title;let y=Vt(a,{forAs:!0});const v={...m?[]:{title:Q2(a,t,{allowDisabling:!0})},...h,field:y};if(c){let b;if($x(c)?(b="argmax",y=Vt({op:"argmax",field:c.argmax},{forAs:!0}),v.field=`${y}.${l}`):p1(c)?(b="argmin",y=Vt({op:"argmin",field:c.argmin},{forAs:!0}),v.field=`${y}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(b=c),b){const w={op:b,as:y};l&&(w.field=l),s.push(w)}}else if(n.push(y),Zl(a)&&hs(f)){if(r.push({bin:f,field:l,as:y}),n.push(Vt(a,{binSuffix:"end"})),yO(a,u)&&n.push(Vt(a,{binSuffix:"range"})),ko(u)){const b={field:`${y}_end`};o[`${u}2`]=b}v.bin="binned",IFe(u)||(v.type=mE)}else if(d&&!iT(d)){i.push({timeUnit:d,field:l,as:y});const b=Zl(a)&&a.type!==nA&&"time";b&&(u===uO||u===dE?v.formatType=b:fYt(u)?v.legend={formatType:b,...v.legend}:ko(u)&&(v.axis={formatType:b,...v.axis}))}o[u]=v}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function oQt(e,t,n){const r=hYt(t,n);if(r){if(r==="binned"){const i=e[t===sm?Ms:qa];return!!($t(i)&&$t(e[t])&&lu(i.bin))}}else return!1;return!0}function aQt(e,t,n,r){const i={};for(const s of It(e))AFe(s)||Pt(rKt(s));for(let s of oYt){if(!e[s])continue;const o=e[s];if(cO(s)){const a=sYt(s),u=i[a];if($t(u)&&nXt(u.type)&&$t(o)&&!u.timeUnit){Pt(QYt(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(Pt(XYt),s=Ah),!oQt(e,s,t)){Pt(a7(s,t));continue}if(s===M1&&t==="line"){const a=Gp(e[s]);if(a!=null&&a.aggregate){Pt(nKt);continue}}if(s===sf&&(n?"fill"in e:"stroke"in e)){Pt(qFe("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===lO||s===tA&&!ct(o)&&!Wp(o)||s===dE&&ct(o)){if(o){if(s===tA){const a=e[s];if(k5e(a)){i[s]=a;continue}}i[s]=Wt(o).reduce((a,u)=>($t(u)?a.push(Zoe(u,s)):Pt(tX(u,s)),a),[])}}else{if(s===dE&&o===null)i[s]=null;else if(!$t(o)&&!bg(o)&&!Wp(o)&&!mO(o)&&!pn(o)){Pt(tX(o,s));continue}i[s]=M5e(o,s,r)}}return i}function x7(e,t){const n={};for(const r of It(e)){const i=M5e(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function uQt(e){const t=[];for(const n of It(e))if(Bw(e,n)){const r=e[n],i=Wt(r);for(const s of i)$t(s)?t.push(s):g7(s)&&t.push(s.condition)}return t}function eae(e,t,n){if(e)for(const r of It(e)){const i=e[r];if(ct(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function lQt(e,t,n,r){return e?It(e).reduce((i,s)=>{const o=e[s];return ct(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function H5e(e,t){return It(t).reduce((n,r)=>{switch(r){case Ms:case qa:case t7:case r7:case n7:case sm:case pg:case Nx:case CI:case Ah:case O1:case om:case P1:case Dx:case am:case um:case lm:case dh:case uO:case of:case ZE:case dE:return n;case tA:if(e==="line"||e==="trail")return n;case lO:case e7:{const i=t[r];if(ct(i)||$t(i))for(const s of Wt(i))s.aggregate||n.push(Vt(s,{}));return n}case M1:if(e==="trail")return n;case sf:case mg:case gg:case L1:case Px:case Ox:case Lx:case Mx:{const i=Gp(t[r]);return i&&!i.aggregate&&n.push(Vt(i,{})),n}}},[])}function cQt(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(ct(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return ct(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function sX(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${tae(t)}`:"";return{field:o+t.field,type:t.type,title:pn(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=uQt(n).map(WXt);return{tooltip:[...i,...m0(s,Lr)]}}function tae(e){const{title:t,field:n}=e;return Io(t,n)}function nae(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=tae(n);return q5e(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...Gt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function q5e(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...Z0(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...Ix(e[t])?{}:e[t]}}]:[]}function W5e(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:B6(s,n),continuousAxisChannelDef2:B6(o,n),continuousAxisChannelDefError:B6(a,n),continuousAxisChannelDefError2:B6(u,n),continuousAxis:i}}function B6(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Pt(NKt(n,t)),r}else return e}function G5e(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(Z0(n)&&n.orient)return n.orient;if(sb(i)){if(sb(s)){const o=$t(i)&&i.aggregate,a=$t(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return oA(s)&&!oA(i)?"horizontal":"vertical"}return"horizontal"}else{if(sb(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const C8="boxplot",fQt=["box","median","outliers","rule","ticks"],dQt=new b7(C8,K5e);function Y5e(e){return yi(e)?"tukey":e}function K5e(e,{config:t}){e={...e,encoding:x7(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=Z0(n)?n:{type:n};i&&Pt(VFe("boxplot"));const u=a.extent??t.boxplot.extent,l=Vi("size",a,t),c=a.invalid,f=Y5e(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:y,groupby:v,aggregate:b,encodingWithoutContinuousAxis:w,ticksOrient:E,boxOrient:T,customTooltipWithoutAggregatedField:A}=hQt(e,u,t),I=SI(m.field),{color:R,size:D,...M}=w,$=Ge=>nae(a,y,m,Ge,t.boxplot),U=$(M),F=$(w),H=(Ht(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",Q=$({...M,...D?{size:D}:{},color:{condition:{test:`${Mi(`lower_box_${m.field}`)} >= ${Mi(`upper_box_${m.field}`)}`,...R||{value:H}}}}),J=sX([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,w),ne={type:"tick",color:"black",opacity:1,orient:E,invalid:c,aria:!1},Z=f==="min-max"?J:sX([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,w),ie=[...U({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:Z}),...U({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:Z}),...U({partName:"ticks",mark:ne,positionPrefix:"lower_whisker",extraEncoding:Z}),...U({partName:"ticks",mark:ne,positionPrefix:"upper_whisker",extraEncoding:Z})],q=[...f!=="tukey"?ie:[],...F({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:T,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:J}),...Q({partName:"median",mark:{type:"tick",invalid:c,...Ht(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:E,aria:!1},positionPrefix:"mid_box",extraEncoding:J})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:q};const j=Mi(`lower_box_${m.field}`),G=Mi(`upper_box_${m.field}`),V=`(${G} - ${j})`,Y=`${j} - ${u} * ${V}`,ee=`${G} + ${u} * ${V}`,ae=Mi(m.field),_e={joinaggregate:X5e(m.field),groupby:v},pe={transform:[{filter:`(${Y} <= ${ae}) && (${ae} <= ${ee})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${I}`},{op:"max",field:m.field,as:`upper_whisker_${I}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${I}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${I}`},...b],groupby:v}],layer:ie},{tooltip:Te,...Le}=M,{scale:ye,axis:he}=m,$e=tae(m),Ne=Yc(he,["title"]),tt=q5e(a,"outliers",t.boxplot,{transform:[{filter:`(${ae} < ${Y}) || (${ae} > ${ee})`}],mark:"point",encoding:{[y]:{field:m.field,type:m.type,...$e!==void 0?{title:$e}:{},...ye!==void 0?{scale:ye}:{},...Wi(Ne)?{}:{axis:Ne}},...Le,...R?{color:R}:{},...A?{tooltip:A}:{}}})[0];let it;const Me=[...d,...h,_e];return tt?it={transform:Me,layer:[tt,pe]}:(it=pe,it.transform.unshift(...Me)),{...o,layer:[it,{transform:p,layer:q}]}}function X5e(e){const t=SI(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function hQt(e,t,n){const r=G5e(e,C8),{continuousAxisChannelDef:i,continuousAxis:s}=W5e(e,r,C8),o=i.field,a=SI(o),u=Y5e(t),l=[...X5e(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`${Mi(`upper_box_${a}`)} - ${Mi(`lower_box_${a}`)}`,as:`iqr_${a}`},{calculate:`min(${Mi(`upper_box_${a}`)} + ${Mi(`iqr_${a}`)} * ${t}, ${Mi(`max_${a}`)})`,as:`upper_whisker_${a}`},{calculate:`max(${Mi(`lower_box_${a}`)} - ${Mi(`iqr_${a}`)} * ${t}, ${Mi(`min_${a}`)})`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=cQt(d),{bins:m,timeUnits:y,aggregate:v,groupby:b,encoding:w}=V5e(p,n),E=r==="vertical"?"horizontal":"vertical",T=r,A=[...m,...y,{aggregate:[...v,...l],groupby:b},...c];return{bins:m,timeUnits:y,transform:A,groupby:b,aggregate:v,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:w,ticksOrient:E,boxOrient:T,customTooltipWithoutAggregatedField:h}}const rae="errorbar",pQt=["ticks","rule"],mQt=new b7(rae,Q5e);function Q5e(e,{config:t}){e={...e,encoding:x7(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=J5e(e,rae,t);delete s.size;const c=nae(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function gQt(e,t){const{encoding:n}=e;if(yQt(n))return{orient:G5e(e,t),inputType:"raw"};const r=vQt(n),i=bQt(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(Qn(a)&&Qn(u))throw new Error(`${t} cannot have both x2 and y2`);if(Qn(a)){if(sb(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Qn(u)){if(sb(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(Qn(u)&&!Qn(a))throw new Error(`${t} cannot have xError2 without xError`);if(Qn(c)&&!Qn(l))throw new Error(`${t} cannot have yError2 without yError`);if(Qn(a)&&Qn(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Qn(a)){if(sb(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Qn(l)){if(sb(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function yQt(e){return(Qn(e.x)||Qn(e.y))&&!Qn(e.x2)&&!Qn(e.y2)&&!Qn(e.xError)&&!Qn(e.xError2)&&!Qn(e.yError)&&!Qn(e.yError2)}function vQt(e){return Qn(e.x2)||Qn(e.y2)}function bQt(e){return Qn(e.xError)||Qn(e.xError2)||Qn(e.yError)||Qn(e.yError2)}function J5e(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=Z0(r)?r:{type:r};s&&Pt(VFe(t));const{orient:l,inputType:c}=gQt(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=W5e(e,l,t),{errorBarSpecificAggregate:y,postAggregateCalculates:v,tooltipSummary:b,tooltipTitleWithFieldName:w}=xQt(u,f,d,h,p,c,t,n),{[m]:E,[m==="x"?"x2":"y2"]:T,[m==="x"?"xError":"yError"]:A,[m==="x"?"xError2":"yError2"]:I,...R}=i,{bins:D,timeUnits:M,aggregate:$,groupby:U,encoding:F}=V5e(R,n),H=[...$,...y],Q=c!=="raw"?[]:U,J=sX(b,f,F,w);return{transform:[...a.transform??[],...D,...M,...H.length===0?[]:[{aggregate:H,groupby:Q}],...v],groupby:Q,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:F,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:J}}function xQt(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Pt(RKt(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`${Mi(`center_${c}`)} + ${Mi(`extent_${c}`)}`,as:`upper_${c}`},{calculate:`${Mi(`center_${c}`)} - ${Mi(`extent_${c}`)}`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:aO(h)},{fieldPrefix:"upper_",titlePrefix:U1e(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:U1e(h,p,"-")}],d=!0;else{let m,y,v;p==="ci"?(m="mean",y="ci0",v="ci1"):(m="median",y="q1",v="q3"),u=[{op:y,field:c,as:`lower_${c}`},{op:v,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:Q2({field:c,aggregate:v,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Q2({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Q2({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Pt(kKt(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:Mi(n.field),as:`upper_${c}`},{calculate:Mi(c),as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`${Mi(c)} + ${Mi(r.field)}`,as:`upper_${c}`}],i?l.push({calculate:`${Mi(c)} + ${Mi(i.field)}`,as:`lower_${c}`}):l.push({calculate:`${Mi(c)} - ${Mi(r.field)}`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:fE(fE(h.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function U1e(e,t,n){return`${aO(e)} ${n} ${t}`}const iae="errorband",_Qt=["band","borders"],wQt=new b7(iae,Z5e);function Z5e(e,{config:t}){e={...e,encoding:x7(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=J5e(e,iae,t),l=o,c=nae(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?Pt(D1e("interpolate")):l.tension&&Pt(D1e("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const e8e={};function sae(e,t,n){const r=new b7(e,t);e8e[e]={normalizer:r,parts:n}}function EQt(){return It(e8e)}sae(C8,K5e,fQt);sae(rae,Q5e,pQt);sae(iae,Z5e,_Qt);const TQt=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],t8e={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},n8e={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},SQt=It(t8e),CQt=It(n8e),AQt={header:1,headerRow:1,headerColumn:1,headerFacet:1},r8e=It(AQt),i8e=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],IQt={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},kQt={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Yp="_vgsid_",RQt={point:{on:"click",fields:[Yp],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function oae(e){return e==="legend"||!!(e!=null&&e.legend)}function ZH(e){return oae(e)&&Ht(e)}function aae(e){return!!(e!=null&&e.select)}function s8e(e){const t=[];for(const n of e||[]){if(aae(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function NQt(e){return _7(e)||lae(e)||uae(e)}function uae(e){return Rt(e,"concat")}function _7(e){return Rt(e,"vconcat")}function lae(e){return Rt(e,"hconcat")}function o8e({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function eg(e){return Rt(e,"step")}function z1e(e){return Rt(e,"view")||Rt(e,"width")||Rt(e,"height")}const V1e=20,DQt={align:1,bounds:1,center:1,columns:1,spacing:1},PQt=It(DQt);function OQt(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(m7(e)&&!pO(e.facet)||uae(e))&&(i.columns=o),_7(e)&&(i.columns=1);for(const a of PQt)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=yi(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function oX(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function aX(e,t){const n=A8(e,t);return eg(n)?n.step:a8e}function A8(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Io(n,{step:e.step})}const a8e=20,MQt={continuousWidth:200,continuousHeight:200,step:a8e},LQt={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:MQt,mark:AXt,arc:{},area:{},bar:NXt,circle:{},geoshape:{},image:{},line:{},point:{},rect:Hoe,rule:{color:"black"},square:{},text:{color:"black"},tick:DXt,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:uXt,projection:{},legend:IQt,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:RQt,style:{},title:{},facet:{spacing:V1e},concat:{spacing:V1e},normalizedNumberFormat:".0%"},ey=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],H1e={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},q1e={blue:ey[0],orange:ey[1],red:ey[2],teal:ey[3],green:ey[4],yellow:ey[5],purple:ey[6],pink:ey[7],brown:ey[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function $Qt(e={}){return{signals:[{name:"color",value:Ht(e)?{...q1e,...e}:q1e}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function FQt(e){return{signals:[{name:"fontSize",value:Ht(e)?{...H1e,...e}:H1e}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function BQt(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function u8e(e){const t=It(e||{}),n={};for(const r of t){const i=e[r];n[r]=vO(i)?LFe(i):qf(i)}return n}function jQt(e){const t=It(e),n={};for(const r of t)n[r]=u8e(e[r]);return n}const UQt=[...y5e,...B5e,...r8e,"background","padding","legend","lineBreak","scale","style","title","view"];function l8e(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=pI({},qn(LQt),n?BQt(n):{},t?$Qt(t):{},r?FQt(r):{},s||{});i&&mI(o,"selection",i,!0);const a=Yc(o,UQt);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=qf(o[u]));for(const u of y5e)o[u]&&(a[u]=cu(o[u]));for(const u of B5e)o[u]&&(a[u]=u8e(o[u]));for(const u of r8e)o[u]&&(a[u]=cu(o[u]));if(o.legend&&(a.legend=cu(o.legend)),o.scale){const{invalid:u,...l}=o.scale,c=cu(u,{level:1});a.scale={...cu(l),...It(c).length>0?{invalid:c}:{}}}return o.style&&(a.style=jQt(o.style)),o.title&&(a.title=cu(o.title)),o.view&&(a.view=cu(o.view)),a}const zQt=new Set(["view",..._Xt]),VQt=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],HQt={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...CXt};function qQt(e){e=qn(e);for(const t of VQt)delete e[t];if(e.axis)for(const t in e.axis)vO(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of TQt)delete e.legend[t];if(e.mark){for(const t of O1e)delete e.mark[t];e.mark.tooltip&&Ht(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(s8e(e.params)),delete e.params);for(const t of zQt){for(const r of O1e)delete e[t][r];const n=HQt[t];if(n)for(const r of n)delete e[t][r];GQt(e,t)}for(const t of EQt())delete e[t];WQt(e);for(const t in e)Ht(e[t])&&Wi(e[t])&&delete e[t];return Wi(e)?void 0:e}function WQt(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=MFe(e.title);Wi(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Wi(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Wi(r)?delete e.title:e.title=r}function GQt(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Wi(s)||(e.style[n??t]=s),delete e[t]}function w7(e){return Rt(e,"layer")}function YQt(e){return Rt(e,"repeat")}function KQt(e){return!ct(e.repeat)&&Rt(e.repeat,"layer")}class cae{map(t,n){return m7(t)?this.mapFacet(t,n):YQt(t)?this.mapRepeat(t,n):lae(t)?this.mapHConcat(t,n):_7(t)?this.mapVConcat(t,n):uae(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(w7(t))return this.mapLayer(t,n);if(F1(t))return this.mapUnit(t,n);throw new Error(Soe(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const XQt={zero:1,center:1,normalize:1};function QQt(e){return Jt(XQt,e)}const JQt=new Set([p5e,f7,c7,x8,h7,zoe,Voe,d7,m5e,Uoe]),ZQt=new Set([f7,c7,p5e]);function HS(e){return $t(e)&&iA(e)==="quantitative"&&!e.bin}function W1e(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if($t(o)&&$t(a))if(HS(o)&&HS(a)){if(o.stack)return t;if(a.stack)return i;const u=$t(o)&&!!o.aggregate,l=$t(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(HS(o))return t;if(HS(a))return i}else{if(HS(o))return s&&n==="vertical"?void 0:t;if(HS(a))return s&&n==="horizontal"?void 0:i}}function eJt(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function c8e(e,t){var m,y;const n=Z0(e)?e:{type:e},r=n.type;if(!JQt.has(r))return null;const i=W1e(t,"x",n)||W1e(t,"theta",n);if(!i)return null;const s=t[i],o=$t(s)?Vt(s,{}):void 0,a=eJt(i),u=[],l=new Set;if(t[a]){const v=t[a],b=$t(v)?Vt(v,{}):void 0;b&&b!==o&&(u.push(a),l.add(b))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=$t(f)?Vt(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=aYt.reduce((v,b)=>{if(b!=="tooltip"&&Bw(t,b)){const w=t[b];for(const E of Wt(w)){const T=Gp(E);if(T.aggregate)continue;const A=Vt(T,{});(!A||!l.has(A))&&v.push({channel:b,fieldDef:T})}}return v},[]);let p;return s.stack!==void 0?Ix(s.stack)?p=s.stack?"zero":null:p=s.stack:ZQt.has(r)&&(p="zero"),!p||!QQt(p)||z5e(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((y=s==null?void 0:s.scale)==null?void 0:y.type)!==fu.LINEAR&&s!=null&&s.stack&&Pt(CKt(s.scale.type)),Qn(t[yg(i)])?(s.stack!==void 0&&Pt(SKt(i)),null):($t(s)&&s.aggregate&&!xYt.has(s.aggregate)&&Pt(AKt(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:Fx(r),stackBy:h,offset:p}))}function f8e(e,t,n){const r=cu(e),i=Vi("orient",r,n);if(r.orient=iJt(r.type,t,i),i!==void 0&&i!==r.orient&&Pt(lKt(r.orient,i)),r.type==="bar"&&r.orient){const u=Vi("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:kXt[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=Vi("opacity",r,n),o=Vi("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=nJt(r.type,t)),Vi("cursor",r,n)===void 0&&(r.cursor=tJt(r,t,n)),r}function tJt(e,t,n){return t.href||e.href||Vi("href",e,n)?"pointer":e.cursor}function nJt(e,t){if(Ir([h7,Uoe,zoe,Voe],e)&&!z5e(t))return .7}function rJt(e,t,{graticule:n}){if(n)return!1;const r=J0("filled",e,t),i=e.type;return Io(r,i!==h7&&i!==d7&&i!==x8)}function iJt(e,t,n){switch(e){case h7:case zoe:case Voe:case m5e:case bXt:case vXt:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case f7:if($t(r)&&(lu(r.bin)||$t(i)&&i.aggregate&&!r.aggregate))return"vertical";if($t(i)&&(lu(i.bin)||$t(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return($t(r)&&r.type===mE&&!hs(r.bin)||w8(r))&&$t(i)&&lu(i.bin)?"horizontal":"vertical";if(!o)return($t(i)&&i.type===mE&&!hs(i.bin)||w8(i))&&$t(r)&&lu(r.bin)?"vertical":"horizontal"}case x8:if(s&&!($t(r)&&lu(r.bin))&&o&&!($t(i)&&lu(i.bin)))return;case c7:if(o)return $t(i)&&lu(i.bin)?"horizontal":"vertical";if(s)return $t(r)&&lu(r.bin)?"vertical":"horizontal";if(e===x8){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case d7:case Uoe:{const a=F1e(r),u=F1e(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=Zl(r)&&r.type===nA,c=Zl(i)&&i.type===nA;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function sJt(e){const{point:t,line:n,...r}=e;return It(r).length>1?r:r.type}function oJt(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Yc(e[t],["point","line"])});return e}function eq(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?Ht(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?Ht(t.point)?t.point:{}:void 0}function G1e(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class aJt{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(F1(t)){const{mark:r,encoding:i}=t,s=Z0(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!eq(s,n[s.type],i);case"area":return!!eq(s,n[s.type],i)||!!G1e(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=x7(l,i),d=Z0(a)?a:{type:a},h=eq(d,i[d.type],f),p=d.type==="area"&&G1e(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:sJt({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:Yc(f,["shape"])}],y=c8e(f8e(d,f,i),f);let v=f;if(y){const{fieldChannel:b,offset:w}=y;v={...f,[b]:{...f[b],...w?{stack:w}:{}}}}return v=Yc(v,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...JC(d,["clip","interpolate","tension","tooltip"]),...p},encoding:v}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...JC(d,["clip","tooltip"]),...h},encoding:v}),r({...c,layer:m},{...n,config:oJt(i)})}}function uJt(e,t){return t?pO(e)?h8e(e,t):d8e(e,t):e}function tq(e,t){return t?h8e(e,t):e}function uX(e,t,n){const r=t[e];if(HXt(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Pt(jYt(r.repeat));return}return t}function d8e(e,t){if(e=uX("field",e,t),e!==void 0){if(e===null)return null;if(Xoe(e)&&Vy(e.sort)){const n=uX("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function Y1e(e,t){if($t(e))return d8e(e,t);{const n=uX("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function K1e(e,t){if(Qn(e)){const n=Y1e(e,t);if(n)return n;if(mO(e))return{condition:e.condition}}else{if(gO(e)){const n=Y1e(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function h8e(e,t){const n={};for(const r in e)if(Rt(e,r)){const i=e[r];if(ct(i))n[r]=i.map(s=>K1e(s,t)).filter(s=>s);else{const s=K1e(i,t);s!==void 0&&(n[r]=s)}}return n}class lJt{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(F1(t)){const{encoding:n,mark:r}=t;if(r==="line"||Z0(r)&&r.type==="line")for(const i of iYt){const s=eT(i),o=n[s];if(n[i]&&($t(o)&&!lu(o.bin)||bg(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return Pt(uKt(!!i.x2,!!i.y2)),r({...t,mark:Ht(s)?{...s,type:"rule"}:"rule"},n)}}class cJt extends cae{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[dQt,mQt,wQt,new aJt,new lJt]}map(t,n){if(F1(t)){const r=Bw(t.encoding,Uy),i=Bw(t.encoding,zy),s=Bw(t.encoding,Zj);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=tq(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return KQt(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${Ps(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!ct(r)&&t.columns&&(t=Yc(t,["columns"]),Pt(I1e("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!ct(r)&&r.row||[u?u.row:null],f=!ct(r)&&r.column||[u?u.column:null],d=ct(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const y of f){const v={repeat:p,row:m,column:y,layer:u.layer},b=(i.name?`${i.name}_`:"")+l+"child__"+(ct(r)?`${Ps(p)}`:(r.row?`row_${Ps(m)}`:"")+(r.column?`column_${Ps(y)}`:"")),w=this.map(i,{...n,repeater:v,repeaterPrefix:b});w.name=b,a.push(Yc(w,["data"]))}const h=ct(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return pO(r)&&t.columns&&(t=Yc(t,["columns"]),Pt(I1e("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=Q1e({parentProjection:o,projection:i}),l=X1e({parentEncoding:s,encoding:tq(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:y}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),v=tq(o,n.repeater);return this.mapFacet({...p,...y,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:v,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&Pt(oKt([...r?[Uy]:[],...i?[zy]:[]]));const o={},a={};for(const u of[Uy,zy]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:uJt(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:X1e({parentEncoding:n,encoding:s,layer:!0}),parentProjection:Q1e({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function X1e({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...It(e),...It(t)]);for(const s of i){const o=t[s],a=e[s];if(Qn(o)){const u={...a,...o};r[s]=u}else gO(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||Wp(a)||pn(a)||Qn(a)||ct(a))&&(r[s]=a)}}else r=t;return!r||Wi(r)?void 0:r}function Q1e(e){const{parentProjection:t,projection:n}=e;return t&&n&&Pt(KYt({parentProjection:t,projection:n})),n??t}function fae(e){return Rt(e,"filter")}function fJt(e){return Rt(e,"stop")}function p8e(e){return Rt(e,"lookup")}function dJt(e){return Rt(e,"data")}function hJt(e){return Rt(e,"param")}function pJt(e){return Rt(e,"pivot")}function mJt(e){return Rt(e,"density")}function gJt(e){return Rt(e,"quantile")}function yJt(e){return Rt(e,"regression")}function vJt(e){return Rt(e,"loess")}function bJt(e){return Rt(e,"sample")}function xJt(e){return Rt(e,"window")}function _Jt(e){return Rt(e,"joinaggregate")}function wJt(e){return Rt(e,"flatten")}function EJt(e){return Rt(e,"calculate")}function m8e(e){return Rt(e,"bin")}function TJt(e){return Rt(e,"impute")}function SJt(e){return Rt(e,"timeUnit")}function CJt(e){return Rt(e,"aggregate")}function AJt(e){return Rt(e,"stack")}function IJt(e){return Rt(e,"fold")}function kJt(e){return Rt(e,"extent")&&!Rt(e,"density")&&!Rt(e,"regression")}function RJt(e){return e.map(t=>fae(t)?{filter:K2(t.filter,tXt)}:t)}class NJt extends cae{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=J1e(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=J1e(t,n),t.encoding){const r={};for(const[i,s]of tx(t.encoding))r[i]=g8e(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:tx(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of _u(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function J1e(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(fae(s))return{filter:lX(s,t)};if(m8e(s)&&tT(s.bin))return{...s,bin:y8e(s.bin)};if(p8e(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function g8e(e,t){var r,i;const n=qn(e);if($t(n)&&tT(n.bin)&&(n.bin=y8e(n.bin)),sT(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(mO(n))if(ct(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:lX(s,t)}});else{const{selection:s,param:o,test:a,...u}=g8e(n.condition,t);n.condition=o?n.condition:{...u,test:lX(n.condition,t)}}return n}function y8e(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function lX(e,t){const n=r=>K2(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):K2(e.test||e.filter,r=>r.selection?n(r.selection):r)}class cX extends cae{map(t,n){const r=n.selections??[];if(t.params&&!F1(t)){const i=[];for(const s of t.params)aae(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(Gt(a)&&(a===t.name||i.includes(a))||ct(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=cX.prototype[e];cX.prototype[e]=function(n,r){return t.call(this,n,DJt(n,r))}}function DJt(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function v8e(e,t){t===void 0&&(t=l8e(e.config));const n=LJt(e,t),{width:r,height:i}=e,s=$Jt(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const PJt=new cJt,OJt=new NJt,MJt=new cX;function LJt(e,t={}){const n={config:t};return MJt.map(PJt.map(OJt.map(e,n),n),n)}function Z1e(e){return Gt(e)?{type:e}:e??{}}function $Jt(e,t,n){let{width:r,height:i}=t;const s=F1(e)||w7(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(Pt(T1e("width")),r=void 0),i=="container"&&(Pt(T1e("height")),i=void 0));const a={type:"pad",...o,...n?Z1e(n.autosize):{},...Z1e(e.autosize)};if(a.type==="fit"&&!s&&(Pt(kYt),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Pt(S1e("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Pt(S1e("height")),!Qf(a,{type:"pad"}))return a}function FJt(e){return["fit","fit-x","fit-y"].includes(e)}function BJt(e){return e?`fit-${i7(e)}`:"fit"}const jJt=["background","padding"];function eve(e,t){const n={};for(const r of jJt)e&&e[r]!==void 0&&(n[r]=qf(e[r]));return t&&(n.params=e.params),n}class B1{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new B1(qn(this.explicit),qn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Io(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of It(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Km(e){return{explicit:!0,value:e}}function Ff(e){return{explicit:!1,value:e}}function b8e(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:E7(t,n,r,i)}}function E7(e,t,n,r){return e.explicit&&t.explicit&&Pt(vKt(n,r,e.value,t.value)),e}function ix(e,t,n,r,i=E7){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Qf(e.value,t.value)?e:i(e,t,n,r)}class UJt extends B1{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function aA(e){return Rt(e,"url")}function CP(e){return Rt(e,"values")}function x8e(e){return Rt(e,"name")&&!aA(e)&&!CP(e)&&!xb(e)}function xb(e){return e&&(_8e(e)||w8e(e)||dae(e))}function _8e(e){return Rt(e,"sequence")}function w8e(e){return Rt(e,"sphere")}function dae(e){return Rt(e,"graticule")}var zs;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(zs||(zs={}));function E8e({invalid:e,isPath:t}){switch(v5e(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function zJt(e){const{marks:t,scales:n}=E8e(e);return t===n?zs.Main:n==="include-invalid-values"?zs.PreFilterInvalid:zs.PostFilterInvalid}class Fi{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Pt(WYt);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Kc extends Fi{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${bFe()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function nq(e){return e.as!==void 0}function tve(e){return`${e}_end`}class k0 extends Fi{clone(){return new k0(null,qn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(iT(u)){if(js(n)){const{mark:c,markDef:f,config:d}=n,h=rx({fieldDef:s,markDef:f,config:d});(SP(c)||h)&&(l={timeUnit:ja(u),field:a})}}else l={as:Vt(s,{forAs:!0}),field:a,timeUnit:u};if(js(n)){const{mark:c,markDef:f,config:d}=n,h=rx({fieldDef:s,markDef:f,config:d});SP(c)&&ko(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[Lr(l)]=l)}return i},{});return Wi(r)?null:new k0(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=ja(r),o={...i,timeUnit:s};return new k0(t,{[Lr(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of tx(this.timeUnits)){const s=nq(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(_u(this.timeUnits).map(t=>nq(t)?t.as:tve(t.field)))}dependentFields(){return new Set(_u(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Lr(this.timeUnits)}`}assemble(){const t=[];for(const n of _u(this.timeUnits)){const{rectBandPosition:r}=n,i=ja(n.timeUnit);if(nq(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:fh(s),type:"timeunit",...a?{units:u7(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...nve(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=T8e({timeUnit:i,field:o}),u=tve(o);t.push({type:"formula",expr:a,as:u}),t.push(...nve([o,u],r,i))}}return t}}const T7="offsetted_rect_start",S7="offsetted_rect_end";function T8e({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=e5e(r),{part:o,step:a}=i5e(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', ${Mi(t)}, ${n?-a:a})`}function nve([e,t],n,r){if(n!==void 0&&n!==.5){const i=Mi(e),s=Mi(t);return[{type:"formula",expr:rve([T8e({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${T7}`},{type:"formula",expr:rve([i,s],n+.5),as:`${e}_${S7}`}]}return[]}function rve([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const bO="_tuple_fields";class VJt{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const HJt={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new VJt),s={},o={},a=new Set,u=(p,m)=>{const y=m==="visual"?p.channel:p.field;let v=Ps(`${r}_${y}`);for(let b=1;a.has(v);b++)v=Ps(`${r}_${y}_${b}`);return a.add(v),{[m]:v}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?Wt(n.value):null;let{fields:d,encodings:h}=Ht(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(Ht(p))for(const m of It(p))rYt(m)?(h||(h=[])).push(m):l==="interval"?(Pt(BYt),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let y=m.field;if(m.aggregate){Pt(RYt(p,m.aggregate));continue}else if(!y){Pt(A1e(p));continue}if(m.timeUnit&&!iT(m.timeUnit)){y=e.vgField(p);const v={timeUnit:m.timeUnit,as:y,field:m.field};o[Lr(v)]=v}if(!s[y]){const v=l==="interval"&&vg(p)&&qp(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",b={field:y,channel:p,type:v,index:i.items.length};b.signals={...u(b,"data"),...u(b,"visual")},i.items.push(s[y]=b),i.hasField[y]=s[y],i.hasSelectionId=i.hasSelectionId||y===Yp,SFe(p)?(b.geoChannel=p,b.channel=TFe(p),i.hasChannel[b.channel]=s[y]):i.hasChannel[p]=s[y]}}else Pt(A1e(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===Yp}f&&(t.init=f.map(p=>i.items.map(m=>Ht(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Wi(o)||(i.timeUnit=new k0(null,o))},signals:(e,t,n)=>{const r=t.name+bO;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(I8e)})}},S8e="_curr",A$="anim_value",c2="anim_clock",fX="eased_anim_clock",C8e="min_extent",A8e="max_range_extent",rq="last_tick_at",iq="is_playing",qJt=1/60*1e3,WJt=(e,t)=>[{name:fX,update:c2},{name:`${e}_domain`,init:`domain('${t}')`},{name:C8e,init:`extent(${e}_domain)[0]`},{name:A8e,init:`extent(range('${t}'))[1]`},{name:A$,update:`invert('${t}', ${fX})`}],GJt={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(R0(t)&&(n=n.concat([{name:c2,init:"0",on:[{events:{type:"timer",throttle:qJt},update:`${iq} ? (${c2} + (now() - ${rq}) > ${A8e} ? 0 : ${c2} + (now() - ${rq})) : ${c2}`}]},{name:rq,init:"now()",on:[{events:[{signal:c2},{signal:iq}],update:"now()"}]},{name:iq,init:"true"}])),n),signals:(e,t,n)=>{const r=t.name,i=r+bO,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=_u(e.component.selection??{}).reduce((c,f)=>f.type==="interval"?c.concat(f.name+J2):c,[]).map(c=>`indexof(item().mark.name, '${c}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${jw(e)}, `;if(t.project.hasSelectionId)l+=`${Yp}: ${o}[${jt(Yp)}]`;else if(R0(t))l+=`fields: ${i}, values: [${A$} ? ${A$} : ${C8e}]`;else{const c=s.items.map(f=>{const d=e.fieldDef(f.channel);return d!=null&&d.bin?`[${o}[${jt(e.vgField(f.channel,{}))}], ${o}[${jt(e.vgField(f.channel,{binSuffix:"end"}))}]]`:`${o}[${jt(f.field)}]`}).join(", ");l+=`fields: ${i}, values: [${c}]`}if(R0(t))return n.concat(WJt(t.name,e.scaleName(Dx)),[{name:r+g1,on:[{events:[{signal:fX},{signal:A$}],update:`{${l}}`,force:!0}]}]);{const c=t.events;return n.concat([{name:r+g1,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}}};function I8e(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=fh(i.field),i}function vE(e,t=!0,n=dl){if(ct(e)){const r=e.map(i=>vE(i,t,n));return t?`[${r.join(", ")}]`:r}else if(rT(e))return n(t?pE(e):VKt(e));return t?n(Gi(e)):e}function YJt(e,t){for(const n of _u(e.component.selection??{})){const r=n.name;let i=`${r}${g1}, ${n.resolve==="global"?"true":`{unit: ${jw(e)}}`}`;for(const s of A7)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+_Zt,on:[{events:{signal:n.name+g1},update:`modify(${jt(n.name+bE)}, ${i})`}]})}return hae(t)}function KJt(e,t){if(e.component.selection&&It(e.component.selection).length){const n=jt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Rx("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return hae(t)}function XJt(e,t){let n=!1;for(const r of _u(e.component.selection??{})){const i=r.name,s=jt(i+bE);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${q8e}(${s}, ${jt(a)}${u}`})}n=!0;for(const a of A7)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),hae(t)}function QJt(e,t){const n=[],r=[],i=jw(e,{escape:!1});for(const s of _u(e.component.selection??{})){const o={name:s.name+bE};if(s.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:Yp}}]),s.init){const u=s.project.items.map(I8e);o.values=s.project.hasSelectionId?s.init.map(l=>({unit:i,[Yp]:vE(l,!1)[0]})):s.init.map(l=>({unit:i,fields:u,values:vE(l,!1)}))}if([...n,...t].filter(u=>u.name===s.name+bE).length||n.push(o),R0(s)&&t.length){const u=e.lookupDataSource(e.getDataName(zs.Main)),l=t.find(f=>f.name===u),c=l.transform.find(f=>f.type==="filter"&&f.expr.includes("vlSelectionTest"));if(c){l.transform=l.transform.filter(d=>d!==c);const f={name:l.name+S8e,source:l.name,transform:[c]};r.push(f)}}}return n.concat(t,r)}function k8e(e,t){for(const n of _u(e.component.selection??{}))for(const r of A7)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function JJt(e,t){for(const n of e.children)js(n)&&(t=k8e(n,t));return t}function ZJt(e,t,n,r){const i=X8e(e,t.param,t);return{signal:qp(n.get("type"))&&ct(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function hae(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const Hy={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!vg(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&Pt(OYt),!s||!qp(o)){Pt(PYt);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||hX(e)||r.length===0)return n;const i=n.find(o=>o.name===t.name);let s=i.update;if(s.includes(q8e))i.update=`{${r.map(o=>`${jt(fh(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${jt(fh(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!hX(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function dX(e,t){return`domain(${jt(e.scaleName(t))})`}function hX(e){return e.parent&&DI(e.parent)&&(!e.parent.parent||hX(e.parent.parent))}const J2="_brush",R8e="_scale_trigger",ER="geo_interval_init_tick",N8e="_init",eZt="_center",tZt={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...Ht(n.select)?n.select:{}};i.fields=[Yp],i.encodings||(i.encodings=n.value?It(n.value):[um,am]),n.select={type:"interval",...i}}if(t.translate&&!Hy.defined(t)){const i=`!event.item || event.item.mark.name !== ${jt(t.name+J2)}`;for(const s of t.events){if(!s.between){Pt(`${s} is not an ordered event stream for interval selections.`);continue}const o=Wt((r=s.between[0]).filter??(r.filter=[]));o.includes(i)||o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+g1,s=_u(t.project.hasChannel).filter(a=>a.channel===Ms||a.channel===qa),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(nZt(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=jt(e.projectionName()),u=e.projectionName()+eZt,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=T=>e.getSizeSignalRef(T).signal,y=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+N8e,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(A=>A.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const v=`intersect(${y}, {markname: ${jt(e.getName("marks"))}}, unit.mark)`,b=`{unit: ${jw(e)}}`,w=`vlSelectionTuples(${v}, ${b})`,E=s.map(T=>T.signals.visual);return n.concat({name:i,on:[{events:[...E.length?[{signal:E.join(" || ")}]:[],...o?[{signal:ER}]:[]],update:w}]})}else{if(!Hy.defined(t)){const l=r+R8e,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=jt(e.scaleName(d)),y=e.getScaleComponent(d).get("type"),v=qp(y)?"+":"";return`(!isArray(${h}) || (${v}invert(${m}, ${p})[0] === ${v}${h}[0] && ${v}invert(${m}, ${p})[1] === ${v}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${jw(e)}, fields: ${r+bO}, values`;return n.concat({name:i,...o?{init:`{${u}: ${vE(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(js(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===ER).length||n.unshift({name:ER,value:null,on:[{events:"timer{1}",update:`${ER} === null ? {} : ${ER}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${jt(t.name+bE)})`;if(Hy.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const y of It(l))l[y]=[{test:`${u}.length && ${u}[0].unit === ${jw(e)}`,...l[y]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=It(h).reduce((y,v)=>(y[v]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(b=>b).join(" && "),value:h[v]},{value:null}],y),{}),m=d??(t.translate?"move":null);return[{name:`${r+J2}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+J2,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function nZt(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=jt(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===Ms?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=Hy.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,y=r?{init:vE(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+R8e},update:qp(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...y,on:f},{name:d,...r?{init:vE(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===Ms?0:1,h=t.name+N8e,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}function II({model:e,channelDef:t,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const s=mO(t)&&t.condition;let o=[];s&&(o=Wt(s).map(l=>{const c=i(l);if(VXt(l)){const{param:f,empty:d}=l;return{test:K8e(e,{param:f,empty:d}),...c}}else return{test:R8(e,l.test),...c}})),r!==void 0&&o.push(r);const a=i(t);return a!==void 0&&o.push(a),o.length>1||o.length===1&&o[0].test?{[n]:o}:o.length===1?{[n]:o[0]}:{}}function pae(e,t="text"){const n=e.encoding[t];return II({model:e,channelDef:n,vgChannel:t,mainRefFn:r=>C7(r,e.config),invalidValueRef:void 0})}function C7(e,t,n="datum"){if(e){if(Wp(e))return _s(e.value);if(Qn(e)){const{format:r,formatType:i}=T8(e);return Yoe({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function D8e(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(ct(o))return{tooltip:ive({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return II({model:e,channelDef:o,vgChannel:"tooltip",mainRefFn:l=>{const c=C7(l,i,a);if(c)return c;if(l===null)return;let f=Vi("tooltip",r,i);if(f===!0&&(f={content:"encoding"}),Gt(f))return{value:f};if(Ht(f))return pn(f)?f:f.content==="encoding"?ive(n,s,i,t):{signal:a}},invalidValueRef:void 0})}}function P8e(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s=new Set,o=r?"datum.datum":"datum",a=[];function u(c,f){const d=eT(f),h=Zl(c)?c:{...c,type:e[d].type},p=h.title||Joe(h,i),m=Wt(p).join(", ").replaceAll(/"/g,'\\"');let y;if(ko(f)){const v=f==="x"?"x2":"y2",b=Gp(e[v]);if(lu(h.bin)&&b){const w=Vt(h,{expr:o}),E=Vt(b,{expr:o}),{format:T,formatType:A}=T8(h);y=hO(w,E,T,A,i),s.add(v)}}if((ko(f)||f===Ah||f===om)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:v,formatType:b}=T8(h);y=Yoe({fieldOrDatumDef:h,format:v,formatType:b,expr:o,config:i,normalizeStack:!0}).signal}y??(y=C7(h,i,o).signal),a.push({channel:f,key:m,value:y})}eae(e,(c,f)=>{$t(c)?u(c,f):g7(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s.has(c)&&!l[f]&&(l[f]=d);return l}function ive(e,t,n,{reactiveGeom:r}={}){const i=P8e(e,t,n,{reactiveGeom:r}),s=tx(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function rZt(e){const{markDef:t,config:n}=e,r=Vi("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...iZt(e),...sZt(e)}}function iZt(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=Vi("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:Jt(CYt,t)?{}:{ariaRoleDescription:{value:t}}}function sZt(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return II({model:e,channelDef:s,vgChannel:"description",mainRefFn:u=>C7(u,e.config),invalidValueRef:void 0});const o=Vi("description",n,r);if(o!=null)return{description:_s(o)};if(r.aria===!1)return{};const a=P8e(t,i,r);if(!Wi(a))return{description:{signal:tx(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function pu(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;const l=i[e];a===void 0&&(u??(u=Vi(e,r,s,{vgChannel:o,ignoreVgConfig:!mO(l)})),u!==void 0&&(a=_s(u)));const c={markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},f=x5e({...c,scaleChannel:e,channelDef:l});return II({model:t,channelDef:l,vgChannel:o??e,invalidValueRef:f,mainRefFn:h=>Goe({...c,channel:e,channelDef:h,stack:null,defaultRef:a})})}function O8e(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??Vi("filled",n,i),a=Ir(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=Vi(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=Vi(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:_s(u)}:{},...l?{stroke:_s(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&Pt(qFe("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...pu("color",e,{vgChannel:c,defaultValue:o?u:l}),...pu("fill",e,{defaultValue:r.fill?u:void 0}),...pu("stroke",e,{defaultValue:r.stroke?l:void 0})}}function oZt(e){const{encoding:t,mark:n}=e,r=t.order;return!Fx(n)&&Wp(r)?II({model:e,channelDef:r,vgChannel:"zindex",mainRefFn:i=>_s(i.value),invalidValueRef:void 0}):{}}function uA({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:Goe({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:_s(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function zl(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[yg(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=uA({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=mae({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&ko(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:aZt({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function aZt(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(Qn(n)&&i&&t===i.fieldChannel){if($t(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return _8({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return Fw(n,r,{suffix:"end"},{offset:s})}return Woe(e)}function mae({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=eT(n),u=nx(n),l=Vi(n,s,o,{vgChannel:u});if(l!==void 0)return rD(n,l);switch(t){case"zeroOrMin":return sve({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:a,config:o});case"zeroOrMax":return sve({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:a,config:o});case"mid":return{...e[af(n)],mult:.5}}}}function sve({mainChannel:e,config:t,...n}){const r=b5e(n),{mode:i}=n;if(r)return r;switch(e){case"radius":{if(i==="zeroOrMin")return{value:0};const{widthSignal:s,heightSignal:o}=i.zeroOrMax;return{signal:`min(${s},${o})/2`}}case"theta":return i==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return i==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return i==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const uZt={left:"x",center:"xc",right:"x2"},lZt={top:"y",middle:"yc",bottom:"y2"};function M8e(e,t,n,r="middle"){if(e==="radius"||e==="theta")return nx(e);const i=e==="x"?"align":"baseline",s=Vi(i,t,n);let o;return pn(s)?(Pt(aKt(i)),o=void 0):o=s,e==="x"?uZt[o||(r==="top"?"left":"center")]:lZt[o||r]}function I8(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?L8e(e,t,{defaultPos:n,defaultPos2:r}):zl(e,t,{defaultPos:n})}function L8e(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=yg(e),a=af(e),u=cZt(t,r,o),l=u[a]?M8e(e,i,s):nx(e);return{...zl(e,t,{defaultPos:n,vgChannel:l}),...u}}function cZt(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=eT(n),l=af(n),c=nx(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?uA({channel:n,markDef:s,encoding:r,model:e}):uA({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const y=af(n),v=e.markDef[y];return v!=null?{[y]:{value:v}}:{[c]:{field:e.getName(n)}}}const m=fZt({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:j6(n,s)||j6(n,{[n]:eX(n,s,a.style),[l]:eX(l,s,a.style)})||j6(n,a[i])||j6(n,a.mark)||{[c]:mae({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function fZt({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return Qn(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?Fw(t,s,{suffix:"start"},{offset:u}):Woe({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function j6(e,t){const n=af(e),r=nx(e);if(t[r]!==void 0)return{[r]:rD(e,t[r])};if(t[e]!==void 0)return{[r]:rD(e,t[e])};if(t[n]){const i=t[n];if(gE(i))Pt(tKt(n));else return{[n]:rD(e,i)}}}function m1(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=yg(t),a=af(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??Vi("size",i,n,{vgChannel:a}),p=kFe(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal")||s==="tick"&&(t==="y"?d==="vertical":d==="horizontal");return $t(u)&&(hs(u.bin)||lu(u.bin)||u.timeUnit&&!l)&&!(h&&!gE(h))&&!r[p]&&!za(f)?pZt({fieldDef:u,fieldDef2:l,channel:t,model:e}):(Qn(u)&&za(f)||m)&&!l?hZt(u,t,e):L8e(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function dZt(e,t,n,r,i,s,o){if(gE(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=J0("minBandSize",{type:o},r);return{signal:c?`max(${Tp(c)}, ${l})`:l}}else i.band!==1&&(Pt(fKt(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(pn(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(nT(u)&&yi(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c,tickBandPaddingInner:f}=r.scale,d=Io(u,o==="tick"?f:o==="bar"?l:c);if(pn(d))return{signal:`(1 - (${d.signal})) * ${e}`};if(yi(d))return{signal:`${1-d} * ${e}`}}return{value:aX(r.view,e)-2}}function hZt(e,t,n){var D,M;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=af(t),f=yg(t),d=kFe(t),h=n.scaleName(d),p=n.getScaleComponent(boe(t)),m=r.type==="tick"||a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let y;(i.size||r.size)&&(m?y=pu("size",n,{vgChannel:c,defaultRef:_s(r.size)}):Pt(mKt(r.type)));const v=!!y,b=A5e({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(D=l||p)==null?void 0:D.get("type"),useVlSizeChannel:m});y=y||{[c]:dZt(c,h||u,p||l,s,b,!!e,r.type)};const w=((M=l||p)==null?void 0:M.get("type"))==="band"&&gE(b)&&!v?"top":"middle",E=M8e(t,r,s,w),T=E==="xc"||E==="yc",{offset:A,offsetType:I}=uA({channel:t,markDef:r,encoding:i,model:n,bandPosition:T?.5:0}),R=Woe({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:A,defaultRef:mae({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:T?I==="encoding"?0:.5:pn(b)?{signal:`(1-${b})/2`}:gE(b)?(1-b.band)/2:0});if(c)return{[E]:R,...y};{const $=nx(f),U=y[c],F=A?{...U,offset:A}:U;return{[E]:R,[$]:ct(R)?[R[0],{...R[1],offset:F}]:{...R,offset:F}}}}function ove(e,t,n,r,i,s,o){if(EFe(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(pn(n)||pn(i)||pn(r)||s){const l=Tp(n),c=Tp(i),f=Tp(r),d=Tp(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",y=l?`(${l} ? -1 : 1) * `:"",v=c?`(${c} + ${p})`:p;return{signal:m+y+v}}else return i=i||0,r+(n?-i-u:+i+u)}function pZt({fieldDef:e,fieldDef2:t,channel:n,model:r}){var M;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=A5e({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(M=r.component.axes[n])==null?void 0:M[0],h=(d==null?void 0:d.get("translate"))??.5,p=ko(n)?Vi("binSpacing",s,i)??0:0,m=yg(n),y=nx(n),v=nx(m),b=J0("minBandSize",s,i),{offset:w}=uA({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:E}=uA({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),T=$Xt({fieldDef:e,scaleName:u}),A=ove(n,p,c,h,w,b,T),I=ove(m,p,c,h,E??w,b,T),R=pn(f)?{signal:`(1-${f.signal})/2`}:gE(f)?(1-f.band)/2:.5,D=rx({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(hs(e.bin)||e.timeUnit){const $=e.timeUnit&&D!==.5;return{[v]:ave({fieldDef:e,scaleName:u,bandPosition:R,offset:I,useRectOffsetField:$}),[y]:ave({fieldDef:e,scaleName:u,bandPosition:pn(R)?{signal:`1-${R.signal}`}:1-R,offset:A,useRectOffsetField:$})}}else if(lu(e.bin)){const $=Fw(e,u,{},{offset:I});if($t(t))return{[v]:$,[y]:Fw(t,u,{},{offset:A})};if(tT(e.bin)&&e.bin.step)return{[v]:$,[y]:{signal:`scale("${u}", ${Vt(e,{expr:"datum"})} + ${e.bin.step})`,offset:A}}}Pt(YFe(m))}function ave({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return _8({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:T7,endSuffix:S7}:{}})}const mZt=new Set(["aria","width","height"]);function Ih(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?O8e(e):{};return{...gZt(e.markDef,t),...uve("fill",n),...uve("stroke",r),...pu("opacity",e),...pu("fillOpacity",e),...pu("strokeOpacity",e),...pu("strokeWidth",e),...pu("strokeDash",e),...oZt(e),...D8e(e),...pae(e,"href"),...rZt(e)}}function uve(e,t){return t?{[e]:t}:{}}function gZt(e,t){return SYt.reduce((n,r)=>(!mZt.has(r)&&Rt(e,r)&&t[r]!=="ignore"&&(n[r]=_s(e[r])),n),{})}function gae(e){const{config:t,markDef:n}=e,r=new Set;if(e.forEachFieldDef((i,s)=>{var l;let o;if(!vg(s)||!(o=e.getScaleType(s)))return;const a=s7(i.aggregate),u=qoe({scaleChannel:s,markDef:n,config:t,scaleType:o,isCountAggregate:a});if(OXt(u)){const c=e.vgField(s,{expr:"datum",binSuffix:(l=e.stack)!=null&&l.impute?"mid":void 0});c&&r.add(c)}}),r.size>0)return{defined:{signal:[...r].map(s=>l7(s,!0)).join(" && ")}}}function lve(e,t){if(t!==void 0)return{[e]:_s(t)}}const sq="voronoi",$8e={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(sq)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(Fx(s))return Pt(NYt(s)),n;const o={name:e.getName(sq),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...D8e(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.includes(sq)&&(u=!0)}),u||n.splice(a+1,0,o),n}},F8e={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!oae(e.bind),parse:(e,t,n)=>W8e(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=$8e.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=Ps(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:vE(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${jt(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(l=>l.name===r+g1),o=r+bO,a=i.items.map(l=>Ps(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},k8="_toggle",B8e={defined:e=>e.type==="point"&&!R0(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+k8,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+g1,r=t.name+k8;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${jw(e)}}, `)+`${r} ? ${n} : null`}},yZt={defined:e=>e.clear!==void 0&&e.clear!==!1&&!R0(e),parse:(e,t)=>{t.clear&&(t.clear=Gt(t.clear)?Rx(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(F8e.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===Ps(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+g1);r(i,"null"),B8e.defined(t)&&(i=n.findIndex(s=>s.name===t.name+k8),r(i,"false"))}return n}},j8e={defined:e=>{const t=e.resolve==="global"&&e.bind&&oae(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Yp;return t&&!n&&Pt(MYt),t&&n},parse:(e,t,n)=>{const r=qn(n);if(r.select=Gt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},W8e(t,r),Ht(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=Wt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=ZH(t.bind)?t.bind.legend:"click",s=Gt(i)?Rx(i,"view"):Wt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=ZH(t.bind)&&t.bind.legend,s=o=>a=>{const u=qn(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${Ps(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+g1),o=r+bO,a=i.items.filter(d=>d.hasLegend).map(d=>Ps(`${r}_${Ps(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+k8),f=ZH(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function vZt(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of _u(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&j8e.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const U8e="_translate_anchor",z8e="_translate_delta",bZt={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=Hy.defined(t),s=r+U8e,{x:o,y:a}=t.project.hasChannel;let u=Rx(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+J2,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?dX(e,Ms):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?dX(e,qa):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+z8e,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&cve(e,t,o,"width",n),a!==void 0&&cve(e,t,a,"height",n),n}};function cve(e,t,n,r,i){const s=t.name,o=s+U8e,a=s+z8e,u=n.channel,l=Hy.defined(t),c=i.find(T=>T.name===n.signals[l?"data":"visual"]),f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===Ms?p?"":"-":p?"-":"":"",y=`${o}.extent_${u}`,v=`${m}${a}.${u} / ${l?`${f}`:`span(${y})`}`,b=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",w=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",E=`${b}(${y}, ${v}${w})`;c.on.push({events:{signal:a},update:l?E:`clampRange(${E}, 0, ${f})`})}const V8e="_zoom_anchor",H8e="_zoom_delta",xZt={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=Hy.defined(t),s=r+H8e,{x:o,y:a}=t.project.hasChannel,u=jt(e.scaleName(Ms)),l=jt(e.scaleName(qa));let c=Rx(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+J2,f))),n.push({name:r+V8e,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&fve(e,t,o,"width",n),a!==void 0&&fve(e,t,a,"height",n),n}};function fve(e,t,n,r,i){const s=t.name,o=n.channel,a=Hy.defined(t),u=i.find(b=>b.name===n.signals[a?"data":"visual"]),l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?dX(e,o):u.name,h=s+H8e,p=`${s}${V8e}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",y=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",v=`${m}(${d}, ${p}, ${h}${y})`;u.on.push({events:{signal:h},update:a?v:`clampRange(${v}, 0, ${l})`})}const bE="_store",g1="_tuple",_Zt="_modify",q8e="vlSelectionResolve",A7=[GJt,tZt,HJt,B8e,F8e,Hy,j8e,yZt,bZt,xZt,$8e];function wZt(e){let t=e.parent;for(;t&&!rd(t);)t=t.parent;return t}function jw(e,{escape:t}={escape:!0}){let n=t?jt(e.name):e.name;const r=wZt(e);if(r){const{facet:i}=r;for(const s of th)i[s]&&(n+=` + '__facet_${s}_' + (facet[${jt(r.vgField(s))}])`)}return n}function yae(e){return _u(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function W8e(e,t){(Gt(t.select)||!t.select.on)&&delete e.events,(Gt(t.select)||!t.select.clear)&&delete e.clear,(Gt(t.select)||!t.select.toggle)&&delete e.toggle}function R0(e){var t;return(t=e.events)==null?void 0:t.find(n=>"type"in n&&n.type==="timer")}function pX(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...pX(e.object)),t.push(...pX(e.property))),t)}function G8e(e){return e.object.type==="MemberExpression"?G8e(e.object):e.object.name==="datum"}function Y8e(e){const t=Mse(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&G8e(r)&&n.add(pX(r).slice(1).join("."))}),n}class kI extends Fi{clone(){return new kI(null,this.model,qn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=R8(this.model,this.filter,this),this._dependentFields=Y8e(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function EZt(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;let i=0;for(const s of t){const o=Ps(s.name),a=s.select,u=Gt(a)?a:a.type,l=Ht(a)?qn(a):{type:u},c=r[u];for(const h in c)h==="fields"||h==="encodings"||(h==="mark"&&(l.mark={...c.mark,...l.mark}),(l[h]===void 0||l[h]===!0)&&(l[h]=qn(c[h]??l[h])));const f=n[o]={...l,name:o,type:u,init:s.value,bind:s.bind,events:Gt(l.on)?Rx(l.on,"scope"):Wt(qn(l.on))};if(R0(f)&&(i++,i>1)){delete n[o];continue}const d=qn(s);for(const h of A7)h.defined(f)&&h.parse&&h.parse(e,f,d)}return i>1&&Pt(UYt),n}function K8e(e,t,n,r="datum"){const i=Gt(t)?t:t.param,s=Ps(i),o=jt(s+bE);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${jt(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function X8e(e,t,n){const r=Ps(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&Pt(zYt(s));else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,Pt(VYt(a,i,n,s))):s=a[0].field}return`${o.name}[${jt(fh(s))}]`}function TZt(e,t){for(const[n,r]of tx(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Kc(new kI(t,e,{param:n}),i,zs.Lookup,e.component.data.outputNodeRefCounts)}}function R8(e,t,n){return nD(t,r=>Gt(r)?r:JKt(r)?K8e(e,r,n):o5e(r))}function SZt(e,t){if(e)return ct(e)&&!Bv(e)?e.map(n=>Joe(n,t)).join(", "):e}function oq(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function yN(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=h,m=rQt[p],y=c[p];if(m&&m!==t&&m!=="both")delete c[p];else if(vO(y)){const{condition:v,...b}=y,w=Wt(v),E=B1e[p];if(E){const{vgProp:T,part:A}=E,I=[...w.map(R=>{const{test:D,...M}=R;return{test:R8(null,D),...M}}),b];oq(c,A,T,I),delete c[p]}else if(E===null){const T={signal:w.map(A=>{const{test:I,...R}=A;return`${R8(null,I)} ? ${E1e(R)} : `}).join("")+E1e(b)};c[p]=T}}else if(pn(y)){const v=B1e[p];if(v){const{vgProp:b,part:w}=v;oq(c,w,b,y),delete c[p]}}Ir(["labelAlign","labelBaseline"],p)&&c[p]===null&&delete c[p]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Wi(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Io(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&pn(c.encode.labels.update.text)&&(p=fE(a,"datum.label",c.encode.labels.update.text.signal)),oq(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of $5e)e.hasAxisPart(p)||delete c.encode[p];Wi(c.encode)&&delete c.encode}const h=SZt(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:Io(l,0)}}}}function Q8e(e){const{axes:t}=e.component,n=[];for(const r of $1)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function CZt(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>yN(i,"grid",t)),...r.map(i=>yN(i,"grid",t)),...n.map(i=>yN(i,"main",t)),...r.map(i=>yN(i,"main",t))].filter(i=>i)}function dve(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...It(o),...It(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${Tp(o[c])} : ${Tp(a[c])}`};return l}return t[i]})])}function AZt(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:c5e(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=pn(n)?"axisOrient":`axis${aO(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:dve(a,r,e,n),vgAxisConfig:dve(u,r,e,n),axisConfigStyle:IZt([...u,...a],r)}}function IZt(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=Wt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function mX(e,t,n,r={}){var s;const i=FFe(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const hve={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??kZt(n,e),gridScale:({model:e,channel:t})=>RZt(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||Z8e(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||J8e(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??DZt(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??PZt(t.type,n,$t(t)&&!!t.timeUnit,$t(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??MZt({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:LZt,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=eBe(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return jFe(i?[$1e(i)]:[],$t(o)?[$1e(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>$Zt(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??FZt(n,t)};function kZt(e,t){return!za(e)&&$t(t)&&!hs(t==null?void 0:t.bin)&&!lu(t==null?void 0:t.bin)}function RZt(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function NZt(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return pn(s)?s:TP(s);{const{configValue:o}=mX("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?TP(o):n===Ms&&Ir([joe,Boe],e.type)&&!($t(e)&&e.timeUnit)?270:void 0}}function gX(e){return`(((${e.signal} % 360) + 360) % 360)`}function J8e(e,t,n,r){if(e!==void 0)if(n==="x"){if(pn(e)){const i=gX(e),s=pn(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(pn(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(pn(e)){const i=gX(e),s=pn(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(pn(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function Z8e(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(pn(e)){const o=gX(e),a=pn(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(pn(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function DZt(e,t){if(t==="x"&&Ir(["quantitative","temporal"],e))return!0}function PZt(e,t,n,r){if(n&&!Ht(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function OZt(e){return e==="x"?"bottom":"left"}function MZt({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!za(t)&&t!=="log"){if($t(e)){if(hs(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Ir(["month","hours","day","quarter"],(i=ja(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function LZt({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if($t(t)){const{timeUnit:n}=t;if(n){const r=r5e(n);if(r)return{signal:r}}}}function eBe(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return UFe(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function $Zt(e,t){const n=e.values;if(ct(n))return L5e(t,n);if(pn(n))return n}function FZt(e,t){return e==="rect"&&E8(t)?1:0}class lA extends Fi{clone(){return new lA(null,qn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=Y8e(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(sT(r)&&C5e(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${o5e({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new lA(t,{calculate:u,as:cA(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Lr(this.transform)}`}}function cA(e,t,n){return Vt(e,{prefix:t,suffix:"sort_index",...n})}function I7(e,t){return Ir(["top","bottom"],t)?"column":Ir(["left","right"],t)||e==="row"?"row":"column"}function fA(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return Io((t||{})[e],i[e],n.header[e])}function k7(e,t,n,r){const i={};for(const s of e){const o=fA(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const vae=["row","column"],bae=["header","footer"];function BZt(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=k7(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=I7(t,a),l=TP(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...nBe(l,u),...tBe(u,l,s),...rBe(r,i,t,SQt,t8e)}}}function tBe(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=Z8e(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function nBe(e,t){const n=J8e(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function jZt(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of bae)if(n[i])for(const s of n[i]){const o=zZt(e,t,i,n,s);o!=null&&r.push(o)}return r}function UZt(e,t){const{sort:n}=e;return Vy(n)?{field:Vt(n,{expr:"datum"}),order:n.order??"ascending"}:ct(n)?{field:cA(e,t,{expr:"datum"}),order:"ascending"}:{field:Vt(e,{expr:"datum"}),order:n??"ascending"}}function yX(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=k7(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=Yoe({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=I7(t,a);return{text:{signal:u?fE(fE(u,"datum.label",l),"datum.value",Vt(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...nBe(s,c),...tBe(c,s,o),...rBe(n,e,t,CQt,n8e)}}function zZt(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=k7(["labelOrient"],o.header,a,t);(t==="row"&&!Ir(["top","bottom"],f)||t==="column"&&!Ir(["left","right"],f))&&(s=yX(o,t,a))}const u=rd(e)&&!pO(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:UZt(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const VZt={column:{start:0,end:1},row:{start:1,end:0}};function HZt(e,t){return VZt[t][e]}function qZt(e,t){const n={};for(const r of th){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=k7(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=I7(r,o),u=HZt(s,a);u!==void 0&&(n[a]=u)}}return Wi(n)?void 0:n}function rBe(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=fA(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function xae(e){return[...U6(e,"width"),...U6(e,"height"),...U6(e,"childWidth"),...U6(e,"childHeight")]}function U6(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(za(o)&&nT(a)){const u=e.scaleName(n);return rd(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[pve(u,a)]:[pve(u,a),{name:i,update:iBe(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=oX(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function pve(e,t){const n=`${e}_step`;return pn(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function iBe(e,t,n){const r=t.get("type"),i=t.get("padding"),s=Io(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${Tp(o)}, ${Tp(s)}) * ${e}_step`}function sBe(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function oBe(e,t){return It(e).reduce((n,r)=>({...n,...II({model:t,channelDef:e[r],vgChannel:r,mainRefFn:i=>_s(i.value),invalidValueRef:void 0})}),{})}function aBe(e,t){if(rd(t))return e==="theta"?"independent":"shared";if(DI(t))return"shared";if(Aae(t))return ko(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function _ae(e,t){const n=e.scale[t],r=ko(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Pt(xKt(t)),"independent"):e[r][t]||"shared"}const WZt={...kQt,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},uBe=It(WZt);class GZt extends B1{}const mve={symbols:YZt,gradient:KZt,labels:XZt,entries:QZt};function YZt(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...IYt({},n,TXt),...O8e(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?lBe(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===sf)delete f.fill;else if(Rt(f.fill,"field"))h?delete f.fill:(f.fill=_s(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=_s(m??1));else if(ct(f.fill)){const y=vX(a.fill??a.color)??o.fill??(c&&o.color);y&&(f.fill=_s(y))}}if(f.stroke){if(r==="stroke"||!c&&r===sf)delete f.stroke;else if(Rt(f.stroke,"field")||p)delete f.stroke;else if(ct(f.stroke)){const y=Io(vX(a.stroke||a.color),o.stroke,c?o.color:void 0);y&&(f.stroke={value:y})}}if(r!==L1){const y=$t(t)&&fBe(n,i,t);y?f.opacity=[{test:y,..._s(m??1)},_s(u.legend.unselectedOpacity)]:m&&(f.opacity=_s(m))}return f={...f,...e},Wi(f)?void 0:f}function KZt(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?lBe(o.opacity)||s.opacity:void 0;return l&&(a.opacity=_s(l)),a={...a,...e},Wi(a)?void 0:a}function XZt(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=$t(t)?fBe(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;yE(c)?f=Sp({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=Sp({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&$t(t)&&t.timeUnit===void 0&&(f=Sp({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return Wi(d)?void 0:d}function QZt(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function lBe(e){return cBe(e,(t,n)=>Math.max(t,n.value))}function vX(e){return cBe(e,(t,n)=>Io(t,n.value))}function cBe(e,t){if(qXt(e))return Wt(e.condition).reduce(t,e.value);if(Wp(e))return e.value}function fBe(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=jt(n.field);return r.map(s=>`(!length(data(${jt(Ps(s)+bE)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const gve={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return E5e(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return T5e(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??ien(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??sen(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??ZZt(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Q2(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(X2(n)&&g0(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>JZt(t,e)};function JZt(e,t){const n=e.values;if(ct(n))return L5e(t,n);if(pn(n))return n}function ZZt(e,t,n,r){if(t!=="shape"){const i=vX(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function een(e){const{legend:t}=e;return Io(t.type,ten(e))}function ten({channel:e,timeUnit:t,scaleType:n}){if(X2(e)){if(Ir(["quarter","month","day"],t))return"symbol";if(g0(n))return"gradient"}return"symbol"}function nen({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??ren(n,t)}function ren(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function ien({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(g0(i))return n==="horizontal"?r==="top"||r==="bottom"?yve(t,"width",o,s):o:yve(t,"height",u,a)}function yve(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function sen(e){if(Ir(["quantile","threshold","log","symlog"],e))return"greedy"}function dBe(e){const t=js(e)?oen(e):cen(e);return e.component.legends=t,t}function oen(e){const{encoding:t}=e,n={};for(const r of[sf,...i8e]){const i=la(t[r]);!i||!e.getScaleComponent(r)||r===of&&$t(i)&&i.type===AI||(n[r]=len(e,r))}return n}function aen(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function uen(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function len(e,t){var E;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new GZt({},aen(e,t));vZt(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=la(i[t]),f=$t(c)?(E=ja(c.timeUnit))==null?void 0:E.unit:void 0,d=n.orient||s.legend.orient||"right",h=een({legend:n,channel:t,timeUnit:f,scaleType:l}),p=nen({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const T of uBe){if(h==="gradient"&&T.startsWith("symbol")||h==="symbol"&&T.startsWith("gradient"))continue;const A=T in gve?gve[T](m):n[T];if(A!==void 0){const I=uen(A,T,n,e.fieldDef(t));(I||s.legend[T]===void 0)&&a.set(T,A,I)}}const y=(n==null?void 0:n.encoding)??{},v=a.get("selections"),b={},w={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const T of["labels","legend","title","symbols","gradient","entries"]){const A=oBe(y[T]??{},e),I=T in mve?mve[T](A,w):A;I!==void 0&&!Wi(I)&&(b[T]={...v!=null&&v.length&&$t(c)?{name:`${Ps(c.field)}_legend_${T}`}:{},...v!=null&&v.length?{interactive:!!v}:{},update:I})}return Wi(b)||a.set("encode",b,!!(n!=null&&n.encoding)),a}function cen(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){dBe(r);for(const i of It(r.component.legends))n.legend[i]=_ae(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=hBe(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of It(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function hBe(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of uBe){const c=ix(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return fen(f,d);case"title":return zFe(f,d);case"type":return i=!0,Ff("symbol")}return E7(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&v8(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&v8(e.explicit,["encode","gradient"])),e}function fen(e,t){return t.value==="circle"?t:e}function den(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function pBe(e){const t=e.component.legends,n={};for(const i of It(t)){const s=e.getScaleComponent(i),o=Gi(s.get("domains"));if(n[o])for(const a of n[o])hBe(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return _u(n).flat().map(i=>hen(i,e.config)).filter(i=>i!==void 0)}function hen(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of i8e)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&pn(s.encode.labels.update.text)&&(l=fE(r,"datum.label",s.encode.labels.update.text.signal)),den(s,"labels","text",{signal:l})}return s}}function pen(e){return DI(e)||Aae(e)?men(e):mBe(e)}function men(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),mBe(e))}function mBe(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=pn(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Ir(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const gen=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class gBe extends B1{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function yBe(e){e.component.projection=js(e)?yen(e):xen(e)}function yen(e){if(e.hasProjection){const t=cu(e.specifiedProjection),n=!(t.scale!=null||t.translate!=null),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?ven(e):void 0,s=new gBe(e.projectionName(!0),{...cu(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function ven(e){const t=[],{encoding:n}=e;for(const r of[[um,am],[dh,lm]])(la(n[r[0]])||la(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(of)&&e.typedFieldDef(of).type===AI&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(zs.Main)),t}function ben(e,t){const n=doe(gen,i=>!!(!Jt(e.explicit,i)&&!Jt(t.explicit,i)||Jt(e.explicit,i)&&Jt(t.explicit,i)&&Qf(e.get(i),t.get(i))));if(Qf(e.size,t.size)){if(n)return e;if(Qf(e.explicit,{}))return t;if(Qf(t.explicit,{}))return e}return null}function xen(e){if(e.children.length===0)return;let t;for(const r of e.children)yBe(r);const n=doe(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=ben(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new gBe(r,t.specifiedProjection,t.size,qn(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function _en(e,t,n,r){if(yO(t,n)){const i=js(e)?e.axis(n)??e.legend(n)??{}:{},s=Vt(t,{expr:"datum"}),o=Vt(t,{expr:"datum",binSuffix:"end"});return{formulaAs:Vt(t,{binSuffix:"range",forAs:!0}),formula:hO(s,o,i.format,i.formatType,r)}}return{}}function vBe(e,t){return`${OFe(e)}_${t}`}function wen(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function wae(e,t,n){const r=y7(n,void 0)??{},i=vBe(r,t);return e.getName(`${i}_bins`)}function Een(e){return"as"in e}function vve(e,t,n){let r,i;Een(e)?r=Gt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[Vt(e,{forAs:!0}),Vt(e,{binSuffix:"end",forAs:!0})];const s={...y7(t,void 0)},o=vBe(s,e.field),{signal:a,extentSignal:u}=wen(n,o);if(o7(s.extent)){const c=s.extent;i=X8e(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class N0 extends Fi{clone(){return new N0(null,qn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(Zl(s)&&hs(s.bin)){const{key:a,binComponent:u}=vve(s,s.bin,n);i[a]={...u,...i[a],..._en(n,s,o,n.config)}}return i},{});return Wi(r)?null:new N0(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=vve(n,n.bin,r);return new N0(t,{[i]:s})}merge(t,n){for(const r of It(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=m0([...this.bins[r].as,...t.bins[r].as],Lr)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(_u(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(_u(this.bins).map(t=>t.field))}hash(){return`Bin ${Lr(this.bins)}`}assemble(){return _u(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:fh(t.field),as:r,signal:t.signal,...o7(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:fh(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:Vt({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function Ten(e,t,n,r){var s;const i=js(r)?r.encoding[yg(t)]:void 0;if(Zl(n)&&js(r)&&I5e(n,i,r.markDef,r.config)){e.add(Vt(n,{})),e.add(Vt(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=rx({fieldDef:n,markDef:a,config:u});SP(o)&&l!==.5&&ko(t)&&(e.add(Vt(n,{suffix:T7})),e.add(Vt(n,{suffix:S7}))),n.bin&&yO(n,t)&&e.add(Vt(n,{binSuffix:"range"}))}else if(SFe(t)){const o=TFe(t);e.add(r.getName(o))}else e.add(Vt(n));return sT(n)&&fXt((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function Sen(e,t){for(const n of It(t)){const r=t[n];for(const i of It(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class Pp extends Fi{clone(){return new Pp(null,new Set(this.dimensions),qn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([Vt(o,{forAs:!0})]);else{if(p1(u)||$x(u)){const c=p1(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([Vt({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([Vt(o,{forAs:!0})]);vg(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([Vt({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([Vt({field:l,aggregate:"max"},{forAs:!0})]))}else Ten(s,a,o,n)}),s.size+It(i).length===0)?null:new Pp(t,s,i)}static makeFromTransform(t,n){var r;const i=new Set,s={};for(const o of n.aggregate){const{op:a,field:u,as:l}=o;a&&(a==="count"?(s["*"]??(s["*"]={}),s["*"].count=new Set([l||Vt(o,{forAs:!0})])):(s[u]??(s[u]={}),(r=s[u])[a]??(r[a]=new Set),s[u][a].add(l||Vt(o,{forAs:!0}))))}for(const o of n.groupby??[])i.add(o);return i.size+It(s).length===0?null:new Pp(t,i,s)}merge(t){return gFe(this.dimensions,t.dimensions)?(Sen(this.measures,t.measures),!0):(LKt("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...It(this.measures)])}producedFields(){const t=new Set;for(const n of It(this.measures))for(const r of It(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Lr({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of It(this.measures))for(const o of It(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:fh(s));return{type:"aggregate",groupby:[...this.dimensions].map(fh),ops:t,fields:n,as:r}}}class RI extends Fi{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of th){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[Vt(o),...hs(a)?[Vt(o,{binSuffix:"end"})]:[]],...Vy(u)?{sortField:u}:ct(u)?{sortIndexField:cA(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of th)this[n]&&(t+=` ${n.charAt(0)}:${Lr(this[n])}`);return t}get fields(){var n;const t=[];for(const r of th)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of th)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of $1){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(za(i)&&nT(s)){const o=R7(this.childModel,n),a=Cae(o);a?t[n]=a:Pt(Coe(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=p7,field:f}=u;s.push(f),o.push(c),a.push(Vt(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of vae){for(const c of bae){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[zy,Uy])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function bve(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function Cen(e,t){const n=moe(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=bve(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=bve(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Pt(qYt(t)),null}function Aen(e){const t={};return C$(e.filter,n=>{if(s5e(n)){let r=null;Doe(n)?r=qf(n.equal):Ooe(n)?r=qf(n.lte):Poe(n)?r=qf(n.lt):Moe(n)?r=qf(n.gt):Loe(n)?r=qf(n.gte):$oe(n)?r=n.range[0]:Foe(n)&&(r=(n.oneOf??n.in)[0]),r&&(rT(r)?t[n.field]="date":yi(r)?t[n.field]="number":Gt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function Ien(e){const t={};function n(r){oA(r)?t[r.field]="date":r.type==="quantitative"&&bYt(r.aggregate)?t[r.field]="number":eA(r.field)>1?r.field in t||(t[r.field]="flatten"):sT(r)&&Vy(r.sort)&&eA(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((js(e)||rd(e))&&e.forEachFieldDef((r,i)=>{if(Zl(r))n(r);else{const s=eT(i),o=e.fieldDef(s);n({...r,type:o.type})}}),js(e)){const{mark:r,markDef:i,encoding:s}=e;if(Fx(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];$t(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function ken(e){const t={};if(js(e)&&e.component.selection)for(const n of It(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&eA(i.field)>1&&(t[i.field]="flatten")}return t}class il extends Fi{clone(){return new il(null,qn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Lr(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!xb(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of It(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:Pt(k1e(a,r[a],u.value)))}for(const a of It(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:Pt(k1e(a,n[a],u)))}const s=new B1(n,r);i.copyAll(s);const o={};for(const a of It(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return It(o).length===0||i.parseNothing?null:new il(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of It(this._parse)){const r=this._parse[n];eA(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(It(this._parse))}dependentFields(){return new Set(It(this._parse))}assembleTransforms(t=!1){return It(this._parse).filter(n=>t?eA(n)>1:!0).map(n=>{const r=Cen(n,this._parse[n]);return r?{type:"formula",expr:r,as:SI(n)}:null}).filter(n=>n!==null)}}class sx extends Fi{clone(){return new sx(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Yp])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Yp}}}class xO extends Fi{clone(){return new xO(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Lr(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class _O extends Fi{clone(){return new _O(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Lr(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class xE extends Fi{constructor(t){super(null),t??(t={name:"source"});let n;if(xb(t)||(n=t.format?{...Yc(t.format,["parse"])}:{}),CP(t))this._data={values:t.values};else if(aA(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Ir(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else w8e(t)?this._data={values:[{type:"Sphere"}]}:(x8e(t)||xb(t))&&(this._data={});this._generator=xb(t),t.name&&(this._name=t.name),n&&!Wi(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var xve=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Ren=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},vN;function Eae(e){return e instanceof xE||e instanceof xO||e instanceof _O}class Tae{constructor(){vN.set(this,void 0),xve(this,vN,!1,"f")}setModified(){xve(this,vN,!0,"f")}get modifiedFlag(){return Ren(this,vN,"f")}}vN=new WeakMap;class oT extends Tae{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class Sae extends Tae{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class Nen extends Sae{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of It(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class Den extends Sae{constructor(t){super(),this.requiresSelectionId=t&&yae(t)}run(t){t instanceof sx&&(this.requiresSelectionId&&(Eae(t.parent)||t.parent instanceof Pp||t.parent instanceof il)||(this.setModified(),t.remove()))}}class Pen extends Tae{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof k0&&(r=t.producedFields(),hoe(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class Oen extends Sae{constructor(){super()}run(t){t instanceof Kc&&!t.isRequired()&&(this.setModified(),t.remove())}}class Men extends oT{run(t){if(!Eae(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof il)if(t instanceof il)this.setModified(),t.merge(n);else{if(poe(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class Len extends oT{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof il);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of It(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!Wi(i)){this.setModified();const o=new il(t,i);for(const a of n){if(a instanceof il)for(const u of It(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof il&&It(a.parse).length===0&&a.remove()}}}}}class $en extends oT{run(t){t instanceof Kc||t.numChildren()>0||t instanceof RI||t instanceof xE||(this.setModified(),t.remove())}}class Fen extends oT{run(t){const n=t.children.filter(i=>i instanceof k0),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class Ben extends oT{run(t){const n=t.children.filter(i=>i instanceof Pp),r={};for(const i of n){const s=Lr(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of It(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class jen extends oT{constructor(t){super(),this.model=t}run(t){const n=!(Eae(t)||t instanceof kI||t instanceof il||t instanceof sx),r=[],i=[];for(const s of t.children)s instanceof N0&&(n&&!poe(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof N0?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class Uen extends oT{run(t){const n=[...t.children];if(!ZC(n,o=>o instanceof Kc)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof Kc){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof Kc)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class aT extends Fi{clone(){return new aT(null,qn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=m0(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??Vt(t)}hash(){return`JoinAggregateTransform ${Lr(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}class dA extends Fi{clone(){return new dA(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,r){const{config:i,markDef:s}=n,{marks:o,scales:a}=r;if(o==="include-invalid-values"&&a==="include-invalid-values")return null;const u=n.reduceFieldDef((l,c,f)=>{const d=vg(f)&&n.getScaleComponent(f);if(d){const h=d.get("type"),{aggregate:p}=c,m=qoe({scaleChannel:f,markDef:s,config:i,scaleType:h,isCountAggregate:s7(p)});m!=="show"&&m!=="always-valid"&&(l[c.field]=c)}return l},{});return It(u).length?new dA(t,u):null}dependentFields(){return new Set(It(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Lr(this.filter)}`}assemble(){const t=It(this.filter).reduce((n,r)=>{const i=this.filter[r],s=Vt(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (${bX(s)}))`):i.type==="quantitative"&&n.push(bX(s))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function bX(e){return`isValid(${e}) && isFinite(+${e})`}function zen(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=Vt(r);return i&&t.push(i),t},[])}function Ven(e){return ct(e)&&e.every(t=>Gt(t))&&e.length>1}class qy extends Fi{clone(){return new qy(null,qn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(Io(f.order,"ascending"));const l={field:a,order:u};let c;return Ven(s)?c=s:Gt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new qy(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return Gp(p)}).filter(h=>!!h),c=zen(n),f=n.encoding.order;let d;if(ct(f)||$t(f))d=BFe(f);else{const h=k5e(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new qy(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Lr(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[Vt(i,{binSuffix:"mid"})]:[Vt(i,{}),Vt(i,{binSuffix:"end"})]:[Vt(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=Vt(c,{expr:"datum"}),p=Vt(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${bX(h)} ? ${f}*${h}+${1-f}*${p} : ${h}`,as:Vt(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:Vt(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class NI extends Fi{clone(){return new NI(null,qn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=m0(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??Vt(t)}hash(){return`WindowTransform ${Lr(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>Toe(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function Hen(e){function t(n){if(!(n instanceof RI)){const r=n.clone();if(r instanceof Kc){const i=_X+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Pp||r instanceof qy||r instanceof NI||r instanceof aT)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function xX(e){if(e instanceof RI)if(e.numChildren()===1&&!(e.children[0]instanceof Kc)){const t=e.children[0];(t instanceof Pp||t instanceof qy||t instanceof NI||t instanceof aT)&&t.addDimensions(e.fields),t.swapWithParent(),xX(e)}else{const t=e.model.component.data.main;bBe(t);const n=Hen(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(xX)}function bBe(e){if(e instanceof Kc&&e.type===zs.Main&&e.numChildren()===1){const t=e.children[0];t instanceof RI||(t.swapWithParent(),bBe(e))}}const _X="scale_",z6=5;function wX(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!wX(t.children))return!1}return!0}function Zh(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function _ve(e,t,n){let r=e.sources,i=!1;return i=Zh(new Oen,r)||i,i=Zh(new Den(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=Zh(new $en,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=Zh(new Men,r)||i,i=Zh(new jen(t),r)||i,i=Zh(new Pen,r)||i,i=Zh(new Len,r)||i,i=Zh(new Ben,r)||i,i=Zh(new Fen,r)||i,i=Zh(new Nen,r)||i,i=Zh(new Uen,r)||i),e.sources=r,i}function qen(e,t){wX(e.sources);let n=0,r=0;for(let i=0;i<z6&&_ve(e,t,!0);i++)n++;e.sources.map(xX);for(let i=0;i<z6&&_ve(e,t,!1);i++)r++;wX(e.sources),Math.max(n,r)===z6&&Pt(`Maximum optimization runs(${z6}) reached.`)}class Da{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Da(()=>t(n))}}function xBe(e){js(e)?Wen(e):Gen(e)}function Wen(e){const t=e.component.scales;for(const n of It(t)){const r=Ken(e,n);if(t[n].setWithExplicit("domains",r),Qen(e,n),e.component.data.isFaceted){let s=e;for(;!rd(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)Ry(a)&&(a.data=_X+a.data.replace(_X,""))}}}function Gen(e){for(const n of e.children)xBe(n);const t=e.component.scales;for(const n of It(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=ix(r,o.getWithExplicit("domains"),"domains","scale",EX);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&Pt(FYt),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function Yen(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=wve(t,n);if(!i){Pt(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=wve(t,n);if(i)return"unaggregated"}return e}function Ken(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=Yen(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&la(r.x2)?la(r.x)?ix(Nv(n,i,e,"x"),Nv(n,i,e,"x2"),"domain","scale",EX):Nv(n,i,e,"x2"):t==="y"&&la(r.y2)?la(r.y)?ix(Nv(n,i,e,"y"),Nv(n,i,e,"y2"),"domain","scale",EX):Nv(n,i,e,"y2"):Nv(n,i,e,t)}function Xen(e,t,n){return e.map(r=>({signal:`{data: ${v7(r,{timeUnit:n,type:t})}}`}))}function aq(e,t,n){var i;const r=(i=ja(n))==null?void 0:i.unit;return t==="temporal"||r?Xen(e,t,r):[e]}function Nv(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=la(i[r]),{type:c}=l,f=l.timeUnit,d=zJt({invalid:J0("invalid",s,a),isPath:Fx(o)});if(cXt(t)){const m=Nv(e,void 0,n,r),y=aq(t.unionWith,c,f);return Km([...y,...m.value])}else{if(pn(t))return Km([t]);if(t&&t!=="unaggregated"&&!d5e(t))return Km(aq(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return Ff([[0,1]]);const m=n.requestDataName(d);return Ff([{data:m,field:n.vgField(r,{suffix:"start"})},{data:m,field:n.vgField(r,{suffix:"end"})}])}const h=vg(r)&&$t(l)?Jen(n,r,e):void 0;if(bg(l)){const m=aq([l.datum],c,f);return Ff(m)}const p=l;if(t==="unaggregated"){const{field:m}=l;return Ff([{data:n.requestDataName(d),field:Vt({field:m,aggregate:"min"})},{data:n.requestDataName(d),field:Vt({field:m,aggregate:"max"})}])}else if(hs(p.bin)){if(za(e))return Ff(e==="bin-ordinal"?[]:[{data:EP(h)?n.requestDataName(d):n.requestDataName(zs.Raw),field:n.vgField(r,yO(p,r)?{binSuffix:"range"}:{}),sort:h===!0||!Ht(h)?{field:n.vgField(r,{}),op:"min"}:h}]);{const{bin:m}=p;if(hs(m)){const y=wae(n,p.field,m);return Ff([new Da(()=>{const v=n.getSignalName(y);return`[${v}.start, ${v}.stop]`})])}else return Ff([{data:n.requestDataName(d),field:n.vgField(r,{})}])}}else if(p.timeUnit&&Ir(["time","utc"],e)){const m=i[yg(r)];if(I5e(p,m,s,a)){const y=n.requestDataName(d),v=rx({fieldDef:p,fieldDef2:m,markDef:s,config:a}),b=SP(o)&&v!==.5&&ko(r);return Ff([{data:y,field:n.vgField(r,b?{suffix:T7}:{})},{data:y,field:n.vgField(r,{suffix:b?S7:"end"})}])}}return Ff(h?[{data:EP(h)?n.requestDataName(d):n.requestDataName(zs.Raw),field:n.vgField(r),sort:h}]:[{data:n.requestDataName(d),field:n.vgField(r)}])}function uq(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":p7),...r?{field:fh(r)}:{},...i?{order:i}:{}}}function Qen(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=d5e(r)?r:void 0,o=tT(i)&&o7(i.extent)?i.extent:void 0;(s||o)&&n.set("selectionExtent",s??o,!0)}function Jen(e,t,n){if(!za(n))return;const r=e.fieldDef(t),i=r.sort;if(C5e(i))return{op:"min",field:cA(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Vy(i)){const a=s&&!o.has(i.field);return uq(i,a)}else if(zXt(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(p1(c)||$x(c))return uq({field:Vt(l),order:u},d);if(Toe(c)||!c)return uq({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Ir(["ascending",void 0],i))return!0}}function wve(e,t){const{aggregate:n,type:r}=e;return n?Gt(n)&&!_Yt.has(n)?{valid:!1,reason:hKt(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:pKt(e)}:{valid:!0}:{valid:!1,reason:dKt(e)}}function EX(e,t,n,r){return e.explicit&&t.explicit&&Pt(bKt(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function Zen(e){const t=m0(e.map(o=>{if(Ry(o)){const{sort:a,...u}=o;return u}return o}),Lr),n=m0(e.map(o=>{if(Ry(o)){const a=o.sort;return a!==void 0&&!EP(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),Lr);if(t.length===0)return;if(t.length===1){const o=e[0];if(Ry(o)&&n.length>0){let a=n[0];if(n.length>1){Pt(N1e);const u=n.filter(l=>Ht(l)&&"op"in l&&l.op!=="min");n.every(l=>Ht(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(Ht(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=m0(n.map(o=>EP(o)||!("op"in o)||Gt(o.op)&&Jt(yYt,o.op)?o:(Pt(_Kt(o)),!0)),Lr);let i;r.length===1?i=r[0]:r.length>1&&(Pt(N1e),i=!0);const s=m0(e.map(o=>Ry(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function Cae(e){if(Ry(e)&&Gt(e.field))return e.field;if(wYt(e)){let t;for(const n of e.fields)if(Ry(n)&&Gt(n.field)){if(!t)t=n.field;else if(t!==n.field)return Pt(wKt),t}return Pt(EKt),t}else if(EYt(e)){Pt(TKt);const t=e.fields[0];return Gt(t)?t:void 0}}function R7(e,t){const r=e.component.scales[t].get("domains").map(i=>(Ry(i)&&(i.data=e.lookupDataSource(i.data)),i));return Zen(r)}function _Be(e){return DI(e)||Aae(e)?e.children.reduce((t,n)=>t.concat(_Be(n)),Eve(e)):Eve(e)}function Eve(e){return It(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=etn(i.range,s,n,e),h=R7(e,n),p=a?ZJt(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function etn(e,t,n,r){if(ko(n)){if(nT(e))return{step:{signal:`${t}_step`}}}else if(Ht(e)&&Ry(e))return{...e,data:r.lookupDataSource(e.data)};return e}class wBe extends B1{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(Ir([fu.LOG,fu.TIME,fu.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&Ir([fu.LINEAR,fu.SQRT,fu.POW],t))return"definitely";const r=this.get("domains");if(r.length>0){let i=!1,s=!1,o=!1;for(const a of r){if(ct(a)){const u=a[0],l=a[a.length-1];if(yi(u)&&yi(l))if(u<=0&&l>=0){i=!0;continue}else{s=!0;continue}}o=!0}if(i)return"definitely";if(s&&!o)return"definitely-not"}return"maybe"}}const ttn=["range","scheme"];function ntn(e){const t=e.component.scales;for(const n of Eoe){const r=t[n];if(!r)continue;const i=rtn(n,e);r.setWithExplicit("range",i)}}function Tve(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=af(t),o=e.getName(s);if(Ht(r)&&r.binned&&r.step!==void 0)return new Da(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(hs(r)){const a=wae(e,i,r);return new Da(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function rtn(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of ttn)if(n[f]!==void 0){const d=rX(s,f),h=h5e(e,f);if(!d)Pt(WFe(s,f,e));else if(h)Pt(h);else switch(f){case"range":{const p=n.range;if(ct(p)){if(ko(e))return Km(p.map(m=>{if(m==="width"||m==="height"){const y=t.getName(m),v=t.getSignalName.bind(t);return Da.fromName(v,y)}return m}))}else if(Ht(p))return Km({data:t.requestDataName(zs.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Km(p)}case"scheme":return Km(itn(n[f]))}}const o=e===Ms||e==="xOffset"?"width":"height",a=r[o];if(eg(a)){if(ko(e))if(za(s)){const f=TBe(a,t,e);if(f)return Km({step:f})}else Pt(GFe(o));else if(cO(e)){const f=e===Nx?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=SBe(a,s);if(p)return Km(p)}}}const{rangeMin:u,rangeMax:l}=n,c=stn(e,t);return(u!==void 0||l!==void 0)&&rX(s,"rangeMin")&&ct(c)&&c.length===2?Km([u??c[0],l??c[1]]):Ff(c)}function itn(e){return lXt(e)?{scheme:e.name,...Yc(e,["name"])}:{scheme:e}}function EBe(e,t,n,{center:r}={}){const i=af(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===qa&&qp(n)?r?[Da.fromName(a=>`${o(a)}/2`,s),Da.fromName(a=>`-${o(a)}/2`,s)]:[Da.fromName(o,s),0]:r?[Da.fromName(a=>`-${o(a)}/2`,s),Da.fromName(a=>`${o(a)}/2`,s)]:[0,Da.fromName(o,s)]}function stn(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=la(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case Ms:case qa:{if(Ir(["point","band"],u)){const f=CBe(e,n,r.view);if(eg(f))return{step:TBe(f,t,e)}}return EBe(e,t,u)}case Nx:case CI:return otn(e,t,u);case M1:{const f=ltn(i,r),d=ctn(i,n,t,r);return rA(u)?utn(f,d,atn(u,r,l,e)):[f,d]}case Ah:return[0,Math.PI*2];case ZE:return[0,360];case om:return[0,new Da(()=>{const f=t.getSignalName(rd(t.parent)?"child_width":"width"),d=t.getSignalName(rd(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case Dx:return{step:1e3/r.scale.framesPerSecond};case Mx:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Lx:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case of:return"symbol";case sf:case mg:case gg:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case L1:case Px:case Ox:return[r.scale.minOpacity,r.scale.maxOpacity]}}function TBe(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=boe(n),o=r[s];if(o8e({step:e,offsetIsDiscrete:Qn(o)&&a5e(o.type)})==="offset"&&j5e(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${AYt(f)})`}}else return e.step}function SBe(e,t){if(o8e({step:e,offsetIsDiscrete:za(t)})==="offset")return{step:e.step}}function otn(e,t,n){const r=e===Nx?"x":"y",i=t.getScaleComponent(r);if(!i)return EBe(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=CBe(r,t.size,t.config.view);if(eg(l)){const c=SBe(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if($t(l)&&l.timeUnit){const c=r5e(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=rx({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=pn(f)?`${f.signal}/2`+h:`${f/2+d}`,m=pn(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return pFe(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function CBe(e,t,n){const r=e===Ms?"width":"height",i=t[r];return i||A8(n,r)}function atn(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&ct(n)?n.length+1:(Pt(PKt(r)),3)}}function utn(e,t,n){const r=()=>{const i=Tp(t),s=Tp(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return pn(t)?new Da(r):{signal:r()}}function ltn(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(a7("size",e))}const Sve=.95;function ctn(e,t,n,r){const i={x:Tve(n,"x"),y:Tve(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=Cve(t,i,r.view);return yi(s)?s-1:new Da(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=Cve(t,i,r.view);return yi(s)?Math.pow(Sve*s,2):new Da(()=>`pow(${Sve} * ${s.signal}, 2)`)}}throw new Error(a7("size",e))}function Cve(e,t,n){const r=eg(e.width)?e.width.step:aX(n,"width"),i=eg(e.height)?e.height.step:aX(n,"height");return t.x||t.y?new Da(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function ABe(e,t){js(e)?ftn(e,t):kBe(e,t)}function ftn(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of It(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=la(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),y=rX(h,t),v=h5e(a,t);if(d!==void 0&&(y?v&&Pt(v):Pt(WFe(h,t,a))),y&&v===void 0)if(d!==void 0){const b=f.timeUnit,w=f.type;switch(t){case"domainMax":case"domainMin":rT(u[t])||w==="temporal"||b?l.set(t,{signal:v7(u[t],{type:w,timeUnit:b})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const b=Rt(Ave,t)?Ave[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:U5e(i,a),hasSecondaryRangeChannel:!!i[yg(a)]}):r.scale[t];b!==void 0&&l.set(t,b,!1)}}}const Ave={bins:({model:e,fieldOrDatumDef:t})=>$t(t)?dtn(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>htn(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>ptn(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>mtn(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>gtn(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>ytn(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=$t(e)?e.sort:void 0;return vtn(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>btn(e,t,n,r,i,s.scale,o)};function IBe(e){js(e)?ntn(e):kBe(e,"range")}function kBe(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?IBe(r):ABe(r,t);for(const r of It(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=ix(i,a,t,"scale",b8e((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function dtn(e,t){const n=t.bin;if(hs(n)){const r=wae(e,t.field,n);return new Da(()=>e.getSignalName(r))}else if(lu(n)&&tT(n)&&n.step!==void 0)return{step:n.step}}function htn(e,t){if(Ir([sf,mg,gg],e)&&t!=="nominal")return"hcl"}function ptn(e,t,n,r,i,s){var o;if(!((o=Gp(s))!=null&&o.bin||ct(n)||i!=null||r!=null||Ir([fu.TIME,fu.UTC],e)))return ko(t)?!0:void 0}function mtn(e,t,n,r,i,s){if(ko(e)){if(g0(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!($t(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===fu.POINT)return n.pointPadding}}function gtn(e,t,n,r,i,s=!1){if(e===void 0){if(ko(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,tickBandPaddingInner:l,bandWithNestedOffsetPaddingInner:c}=i;return s?c:Io(o,n==="bar"?a:n==="tick"?l:u)}else if(cO(t)&&r===fu.BAND)return i.offsetBandPaddingInner}}function ytn(e,t,n,r,i,s=!1){if(e===void 0){if(ko(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===fu.BAND)return Io(o,pn(r)?{signal:`${r.signal}/2`}:r/2)}else if(cO(t)){if(n===fu.POINT)return .5;if(n===fu.BAND)return i.offsetBandPaddingOuter}}}function vtn(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return qp(e)&&t==="descending"?pn(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(qp(e)&&t==="descending")return!0}function btn(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&qp(i)){if(ct(n)){const u=n[0],l=n[n.length-1];if(yi(u)&&u<=0&&yi(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!rA(i))return!0;if(!($t(t)&&t.bin)&&Ir([...$1,...uYt],e)){const{orient:u,type:l}=r;return Ir(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:Ir(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function xtn(e,t,n,r,i=!1){const s=_tn(t,n,r,i),{type:o}=e;return vg(t)?o!==void 0?gXt(t,o)?$t(n)&&!mXt(o,n.type)?(Pt(yKt(o,s)),s):o:(Pt(gKt(t,o,s)),s):s:null}function _tn(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(X2(e)||XH(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Pt(QH(e,"ordinal")),"ordinal";if(KH(e))return"band";if(ko(e)||cO(e)){if(Ir(["rect","bar","image","rule","tick"],n.type)||r)return"band"}else if(n.type==="arc"&&e in woe)return"band";const s=n[af(e)];return gE(s)||sA(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return X2(e)?"time":XH(e)==="discrete"?(Pt(QH(e,"temporal")),"ordinal"):$t(t)&&t.timeUnit&&ja(t.timeUnit).utc?"utc":KH(e)?"band":"time";case"quantitative":return X2(e)?$t(t)&&hs(t.bin)?"bin-ordinal":"linear":XH(e)==="discrete"?(Pt(QH(e,"quantitative")),"ordinal"):KH(e)?"band":"linear";case"geojson":return}throw new Error(HFe(t.type))}function wtn(e,{ignoreRange:t}={}){RBe(e),xBe(e);for(const n of pXt)ABe(e,n);t||IBe(e)}function RBe(e){js(e)?e.component.scales=Etn(e):e.component.scales=Stn(e)}function Etn(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of Eoe){const o=la(t[s]);if(o&&n===g5e&&s===of&&o.type===AI)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=U5e(t,s),l=xtn(a,s,o,r,u);i[s]=new wBe(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const Ttn=b8e((e,t)=>P1e(e)-P1e(t));function Stn(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){RBe(s);for(const o of It(s.component.scales))if((t=i.scale)[o]??(t[o]=aBe(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?iXt(a.value,u.value)?r[o]=ix(a,u,"type","scale",Ttn):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of It(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new wBe(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class lq{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function js(e){return(e==null?void 0:e.type)==="unit"}function rd(e){return(e==null?void 0:e.type)==="facet"}function Aae(e){return(e==null?void 0:e.type)==="concat"}function DI(e){return(e==null?void 0:e.type)==="layer"}class Iae{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.parent=r,this.config=s,this.view=cu(a),this.name=t.name??i,this.title=Bv(t.title)?{text:t.title}:t.title?cu(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new lq,this.projectionNameMap=r?r.projectionNameMap:new lq,this.signalNameMap=r?r.signalNameMap:new lq,this.data=t.data,this.description=t.description,this.transforms=RJt(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:OQt(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:m7(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new B1,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?qn(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){wtn(this)}parseProjection(){yBe(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){dBe(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of It(r)){const o=r[s];o!==void 0&&(i[s]=_s(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=_s(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Wi(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=qZt(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of th)t[r].title&&n.push(BZt(this,r));for(const r of vae)n=n.concat(jZt(this,r));return n}assembleAxes(){return CZt(this.component.axes,this.config)}assembleLegends(){return pBe(this)}assembleProjections(){return pen(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...MFe(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Ir(["unit","layer"],this.type)?Ir(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Wi(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||rd(this.parent)?_Be(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return Ps((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(zs[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(rd(this.parent)){const n=sBe(t),r=i7(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(za(s)&&nT(o)){const a=i.get("name"),u=R7(this,r),l=Cae(u);if(l){const c=Vt({aggregate:"distinct",field:l},{expr:"datum"});return{signal:iBe(a,i,c)}}else return Pt(Coe(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(AFe(t)&&vg(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(DYt(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class NBe extends Iae{vgField(t,n={}){const r=this.fieldDef(t);if(r)return Vt(r,n)}reduceFieldDef(t,n){return lQt(this.getMapping(),(r,i,s)=>{const o=Gp(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){eae(this.getMapping(),(r,i)=>{const s=Gp(r);s&&t(s,i)},n)}}class N7 extends Fi{clone(){return new N7(null,qn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Lr(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class D7 extends Fi{clone(){return new D7(null,qn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Lr(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class P7 extends Fi{clone(){return new P7(this.parent,qn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Lr(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class O7 extends Fi{clone(){return new O7(null,qn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Lr(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class Z2 extends Fi{clone(){return new Z2(null,qn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[um,am],[dh,lm]]){const s=i.map(o=>{const a=la(n.encoding[o]);return $t(a)?a.field:bg(a)?{expr:`${a.datum}`}:Wp(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new Z2(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(of)){const i=n.typedFieldDef(of);i.type===AI&&(t=new Z2(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(Gt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Lr(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class AP extends Fi{clone(){return new AP(null,this.projection,qn(this.fields),qn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[um,am],[dh,lm]]){const i=r.map(o=>{const a=la(n.encoding[o]);return $t(a)?a.field:bg(a)?{expr:`${a.datum}`}:Wp(a)?{expr:`${a.value}`}:void 0}),s=r[0]===dh?"2":"";(i[0]||i[1])&&(t=new AP(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Gt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Lr(this.fields)} ${Lr(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Uw extends Fi{clone(){return new Uw(null,qn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new Uw(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if($t(i)&&$t(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=H5e(n.mark,r);return new Uw(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${Lr(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:fJt(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class M7 extends Fi{clone(){return new M7(null,qn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Lr(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class IP extends Fi{clone(){return new IP(null,qn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(dJt(o)){let u=OBe(o.data,s);u||(u=new xE(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new Kc(u,l,zs.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(hJt(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(Ps(u),u)}catch{throw new Error(LYt(u))}if(a=l.materialized,!a)throw new Error($Yt(u))}return new IP(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Wt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Lr({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:Wt(this.transform.as)}:{}};else{let n=this.transform.as;Gt(n)||(Pt(YYt),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class L7 extends Fi{clone(){return new L7(null,qn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Lr(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class $7 extends Fi{clone(){return new $7(null,qn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Lr(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class F7 extends Fi{clone(){return new F7(null,qn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=m0((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Lr(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class B7 extends Fi{clone(){return new B7(null,qn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Lr(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function DBe(e){let t=0;function n(r,i){if(r instanceof xE&&!r.isGenerator&&!aA(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof il&&(r.parent instanceof xE&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof RI){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof xO||r instanceof _O||r instanceof dA||r instanceof kI||r instanceof lA||r instanceof AP||r instanceof Pp||r instanceof IP||r instanceof NI||r instanceof aT||r instanceof O7||r instanceof P7||r instanceof N7||r instanceof M7||r instanceof L7||r instanceof $7||r instanceof sx||r instanceof B7||r instanceof F7||r instanceof D7)&&i.transform.push(r.assemble()),(r instanceof N0||r instanceof k0||r instanceof Uw||r instanceof qy||r instanceof Z2)&&i.transform.push(...r.assemble()),r instanceof Kc&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Kc?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Kc&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function Ctn(e){const t=[],n=DBe(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function Atn(e,t){const n=[],r=DBe(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function Itn(e){return e==="top"||e==="left"||pn(e)?"header":"footer"}function ktn(e){for(const t of th)Rtn(e,t);Ive(e,"x"),Ive(e,"y")}function Rtn(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=fA("title",null,r,t);let l=Q2(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=ct(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=fA("labelOrient",a.header,r,t),f=a.header!==null?Io((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=Ir(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[PBe(e,t,f)]}}}function PBe(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function Ive(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=_ae(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=Itn(a.get("orient"));o[u]??(o[u]=[PBe(e,s,!1)]);const l=yN(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function Ntn(e){kae(e),N8(e,"width"),N8(e,"height")}function Dtn(e){kae(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";N8(e,t),N8(e,n)}function kae(e){for(const t of e.children)t.parseLayoutSize()}function N8(e,t){const n=sBe(t),r=i7(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??aBe(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=ix(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function Ptn(e){const{size:t,component:n}=e;for(const r of $1){const i=af(r);if(t[i]){const s=t[i];n.layoutSize.set(i,eg(s)?"step":s,!0)}else{const s=Otn(e,i);n.layoutSize.set(i,s,!1)}}}function Otn(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(za(s)){const a=A8(r.view,t);return nT(o)||eg(a)?"step":a}else return oX(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return oX(r.view,t);{const s=A8(r.view,t);return eg(s)?s.step:s}}}function TX(e,t,n){return Vt(t,{suffix:`by_${Vt(e)}`,...n})}class iD extends NBe{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=Oae(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!pO(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=It(t),r={};for(const i of n){if(![Uy,zy].includes(i)){Pt(a7(i,"facet"));break}const s=t[i];if(s.field===void 0){Pt(tX(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=Zoe(t,n);return r.header?r.header=cu(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return Rt(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=j7(this),this.child.parseData()}parseLayoutSize(){kae(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,Object.values(this.component.selection).some(t=>R0(t))&&Ioe(Aoe)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),ktn(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of th)for(const r of bae){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=fA("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=I7(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof iD))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof iD?{...this.channelHasField("column")?{encode:{update:{columns:{field:Vt(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof iD){if(this.child.channelHasField("column")){const i=Vt(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of $1){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(za(o)&&nT(a)){const u=R7(this.child,i),l=Cae(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):Pt(Coe(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of th){const f=this.facet[c];if(f){u.push(Vt(f));const{bin:d,sort:h}=f;if(hs(d)&&u.push(Vt(f,{binSuffix:"end"})),Vy(h)){const{field:p,op:m=p7}=h,y=TX(f,h);r&&i?(s.push(y),o.push("max"),a.push(y)):(s.push(p),o.push(m),a.push(y))}else if(ct(h)){const p=cA(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Vy(r.sort)?[TX(r,r.sort,{expr:"datum"})]:ct(r.sort)?[cA(r,t,{expr:"datum"})]:[Vt(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Vy(i)?i.order:!ct(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return yX(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of vae)if(t[s]){const o=fA("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return yX(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=Ctn(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:th.map(u=>this.facetSortFields(u)).flat(),order:th.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(KJt(this,[]))}]}getMapping(){return this.facet}}function Mtn(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(Vy(s.sort)){const{field:o,op:a=p7}=s.sort;e=i=new aT(e,{joinaggregate:[{op:a,field:o,as:TX(s,s.sort,{forAs:!0})}],groupby:[Vt(s)]})}return i}return null}function OBe(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(CP(e)&&CP(a)){if(Qf(e.values,a.values))return o}else if(aA(e)&&aA(a)){if(e.url===a.url)return o}else if(x8e(e)&&e.name===o.dataName)return o}}return null}function Ltn(e,t){if(e.data||!e.parent){if(e.data===null){const r=new xE({values:[]});return t.push(r),r}const n=OBe(e.data,t);if(n)return xb(e.data)||(n.data.format=mFe({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new xE(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function $tn(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(EJt(i))o=e=new lA(e,i),s="derived";else if(fae(i)){const a=Aen(i);o=e=il.makeWithAncestors(e,{},a,n)??e,e=new kI(e,t,i.filter)}else if(m8e(i))o=e=N0.makeFromTransform(e,i,t),s="number";else if(SJt(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new il(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=k0.makeFromTransform(e,i);else if(CJt(i))o=e=Pp.makeFromTransform(e,i),s="number",yae(t)&&(e=new sx(e));else if(p8e(i))o=e=IP.make(e,t,i,r++),s="derived";else if(xJt(i))o=e=new NI(e,i),s="number";else if(_Jt(i))o=e=new aT(e,i),s="number";else if(AJt(i))o=e=qy.makeFromTransform(e,i),s="derived";else if(IJt(i))o=e=new O7(e,i),s="derived";else if(kJt(i))o=e=new D7(e,i),s="derived";else if(wJt(i))o=e=new P7(e,i),s="derived";else if(pJt(i))o=e=new F7(e,i),s="derived";else if(bJt(i))e=new B7(e,i);else if(TJt(i))o=e=Uw.makeFromTransform(e,i),s="derived";else if(mJt(i))o=e=new N7(e,i),s="derived";else if(gJt(i))o=e=new L7(e,i),s="derived";else if(yJt(i))o=e=new $7(e,i),s="derived";else if(vJt(i))o=e=new M7(e,i),s="derived";else{Pt(GYt(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function j7(e){var y;let t=Ltn(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(xb(i)||aA(i)||CP(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new UJt;xb(i)?(_8e(i)?t=new _O(t,i.sequence):dae(i)&&(t=new xO(t,i.graticule)),o.parseNothing=!0):((y=i==null?void 0:i.format)==null?void 0:y.parse)===null&&(o.parseNothing=!0),t=il.makeExplicit(t,e,o)??t,t=new sx(t);const a=e.parent&&DI(e.parent);(js(e)||rd(e))&&a&&(t=N0.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=$tn(t,e,o));const u=ken(e),l=Ien(e);t=il.makeWithAncestors(t,{},{...u,...l},o)??t,js(e)&&(t=Z2.parseAll(t,e),t=AP.parseAll(t,e)),(js(e)||rd(e))&&(a||(t=N0.makeFromEncoding(t,e)??t),t=k0.makeFromEncoding(t,e)??t,t=lA.parseAllForSortIndex(t,e));const c=t=V6(zs.Raw,e,t);if(js(e)){const v=Pp.makeFromEncoding(t,e);v&&(t=v,yae(e)&&(t=new sx(t))),t=Uw.makeFromEncoding(t,e)??t,t=qy.makeFromEncoding(t,e)??t}let f,d;if(js(e)){const{markDef:v,mark:b,config:w}=e,E=Vi("invalid",v,w),{marks:T,scales:A}=d=E8e({invalid:E,isPath:Fx(b)});T!==A&&A==="include-invalid-values"&&(f=t=V6(zs.PreFilterInvalid,e,t)),T==="exclude-invalid-values"&&(t=dA.make(t,e,d)??t)}const h=t=V6(zs.Main,e,t);let p;if(js(e)&&d){const{marks:v,scales:b}=d;v==="include-invalid-values"&&b==="exclude-invalid-values"&&(t=dA.make(t,e,d)??t,p=t=V6(zs.PostFilterInvalid,e,t))}js(e)&&TZt(e,h);let m=null;if(rd(e)){const v=e.getName("facet");t=Mtn(t,e.facet)??t,m=new RI(t,e,v,h.getSource()),n[v]=m}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:h,facetRoot:m,ancestorParse:o,preFilterInvalid:f,postFilterInvalid:p}}function V6(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new Kc(n,s,e,i);return r[s]=o,o}class Ftn extends Iae{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&Pt(HYt),this.children=this.getChildren(t).map((l,c)=>Oae(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=j7(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of It(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>R0(t))&&Ioe(Aoe)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return _7(t)?t.vconcat:lae(t)?t.hconcat:t.concat}parseLayoutSize(){Dtn(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=xae(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function Btn(e){return e===!1||e===null}const jtn={disable:1,gridScale:1,scale:1,...F5e,labelExpr:1,encode:1},MBe=It(jtn);class Rae extends B1{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new Rae(qn(this.explicit),qn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!Btn(this.get(t))}hasOrientSignalRef(){return pn(this.explicit.orient)}}function Utn(e,t,n){const{encoding:r,config:i}=e,s=la(r[t])??la(r[yg(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(yE(u))return{text:Sp({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(iA(s)==="quantitative"){if(sA(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:Sp({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:Sp({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(iA(s)==="temporal"&&i.timeFormatType&&$t(s)&&!s.timeUnit)return{text:Sp({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function ztn(e){return $1.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[Ktn(n,e)]),t),{})}const Vtn={bottom:"top",top:"bottom",left:"right",right:"left"};function Htn(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of It(i.component.axes))n.axis[s]=_ae(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=qtn(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of $1){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!pn(a)){if(r[a]>0&&!u){const l=Vtn[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function qtn(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=Wtn(i,s)}}}else return t.map(n=>n.clone());return e}function Wtn(e,t){for(const n of MBe){const r=ix(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return zFe(i,s);case"gridScale":return{explicit:i.explicit,value:Io(i.value,s.value)}}return E7(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function Gtn(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(pn(n.labelAngle)?n.labelAngle:TP(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===eBe(r,i))return!0}return e===n[t]}const Ytn=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function Ktn(e,t){var v,b;let n=t.axis(e);const r=new Rae,i=la(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((v=o[e==="x"?"axisX":"axisY"])==null?void 0:v.orient)||((b=o.axis)==null?void 0:b.orient)||OZt(e),u=t.getScaleComponent(e).get("type"),l=AZt(e,u,a,t.config),c=n!==void 0?!n:mX("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=NZt(i,n,e,o.style,l),d=T5e(n.formatType,i,u),h=E5e(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const w of MBe){const E=w in hve?hve[w](p):j1e(w)?n[w]:void 0,T=E!==void 0,A=Gtn(E,w,n,t,e);if(T&&A)r.set(w,E,A);else{const{configValue:I=void 0,configFrom:R=void 0}=j1e(w)&&w!=="values"?mX(w,o.style,n.style,l):{},D=I!==void 0;T&&!D?r.set(w,E,A):(R!=="vgAxisConfig"||Ytn.has(w)&&D||vO(I)||pn(I))&&r.set(w,I,!1)}}const m=n.encoding??{},y=$5e.reduce((w,E)=>{if(!r.hasAxisPart(E))return w;const T=oBe(m[E]??{},t),A=E==="labels"?Utn(t,e,T):T;return A!==void 0&&!Wi(A)&&(w[E]={update:A}),w},{});return Wi(y)||r.set("encode",y,!!n.encoding||n.labelAngle!==void 0),r}function Xtn({encoding:e,size:t}){for(const n of $1){const r=af(n);eg(t[r])&&sb(e[n])&&(delete t[r],Pt(GFe(r)))}return t}const Qtn={vgMark:"arc",encodeEntry:e=>({...Ih(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...zl("x",e,{defaultPos:"mid"}),...zl("y",e,{defaultPos:"mid"}),...m1(e,"radius"),...m1(e,"theta")})},Jtn={vgMark:"area",encodeEntry:e=>({...Ih(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...I8("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...I8("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...gae(e)})},Ztn={vgMark:"rect",encodeEntry:e=>({...Ih(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...m1(e,"x"),...m1(e,"y")})},enn={vgMark:"shape",encodeEntry:e=>({...Ih(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&$t(n)&&n.type===AI?{field:Vt(n,{expr:"datum"})}:{}}]}},tnn={vgMark:"image",encodeEntry:e=>({...Ih(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...m1(e,"x"),...m1(e,"y"),...pae(e,"url")})},nnn={vgMark:"line",encodeEntry:e=>({...Ih(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...zl("x",e,{defaultPos:"mid"}),...zl("y",e,{defaultPos:"mid"}),...pu("size",e,{vgChannel:"strokeWidth"}),...gae(e)})},rnn={vgMark:"trail",encodeEntry:e=>({...Ih(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...zl("x",e,{defaultPos:"mid"}),...zl("y",e,{defaultPos:"mid"}),...pu("size",e),...gae(e)})};function Nae(e,t){const{config:n}=e;return{...Ih(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...zl("x",e,{defaultPos:"mid"}),...zl("y",e,{defaultPos:"mid"}),...pu("size",e),...pu("angle",e),...inn(e,n,t)}}function inn(e,t,n){return n?{shape:{value:n}}:pu("shape",e)}const snn={vgMark:"symbol",encodeEntry:e=>Nae(e)},onn={vgMark:"symbol",encodeEntry:e=>Nae(e,"circle")},ann={vgMark:"symbol",encodeEntry:e=>Nae(e,"square")},unn={vgMark:"rect",encodeEntry:e=>({...Ih(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...m1(e,"x"),...m1(e,"y")})},lnn={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Ih(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...I8("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...I8("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...pu("size",e,{vgChannel:"strokeWidth"})}}},cnn={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Ih(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...zl("x",e,{defaultPos:"mid"}),...zl("y",e,{defaultPos:"mid"}),...pae(e),...pu("size",e,{vgChannel:"fontSize"}),...pu("angle",e),...lve("align",fnn(e.markDef,n,t)),...lve("baseline",dnn(e.markDef,n,t)),...zl("radius",e,{defaultPos:null}),...zl("theta",e,{defaultPos:null})}}};function fnn(e,t,n){if(Vi("align",e,n)===void 0)return"center"}function dnn(e,t,n){if(Vi("baseline",e,n)===void 0)return"middle"}const hnn={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"x":"y",s=r==="horizontal"?"y":"x",o=r==="horizontal"?"height":"width";return{...Ih(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...m1(e,i),...zl(s,e,{defaultPos:"mid",vgChannel:s==="y"?"yc":"xc"}),[o]:_s(Vi("thickness",n,t))}}},H6={arc:Qtn,area:Jtn,bar:Ztn,circle:onn,geoshape:enn,image:tnn,line:nnn,point:snn,rect:unn,rule:lnn,square:ann,text:cnn,tick:hnn,trail:rnn};function pnn(e){if(Ir([d7,c7,xXt],e.mark)){const t=H5e(e.mark,e.encoding);if(t.length>0)return mnn(e,t)}else if(e.mark===f7){const t=ZK.some(n=>Vi(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return gnn(e)}return Dae(e)}const kve="faceted_path_";function mnn(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:kve+e.requestDataName(zs.Main),data:e.requestDataName(zs.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Dae(e,{fromPrefix:kve})}]}const Rve="stack_group_";function gnn(e){var l;const[t]=Dae(e,{fromPrefix:Rve}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...JC(t.encode.update,["y","yc","y2","height",...ZK]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Yc(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...JC(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Yc(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of ZK){const f=J0(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=_s(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=Vt(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(Vt(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=J0(f,e.markDef,e.config);return d!==void 0?{...c,[f]:_s(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(zs.Main),name:Rve+e.requestDataName(zs.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function ynn(e){const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!ct(o)&&Wp(o)&&QK(o.value)||!o&&QK(Vi("order",i,s)))){if((ct(o)||$t(o))&&!n)return BFe(o,{expr:"datum"});if(Fx(r)){const a=i.orient==="horizontal"?"y":"x",u=t[a];if($t(u))return{field:a}}}}function Dae(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=Io(r.clip,vnn(e),bnn(e)),a=$Fe(r),u=i.key,l=ynn(e),c=xnn(e),f=Vi("aria",r,s),d=H6[n].postEncodingTransform?H6[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:H6[n].vgMark,...o?{clip:o}:{},style:a,...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(zs.Main)},encode:{update:H6[n].encodeEntry(e)},...d?{transform:d}:{}}]}function vnn(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function bnn(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function xnn(e){if(!e.component.selection)return null;const t=It(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=It(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class LBe extends NBe{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,z1e(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[],this.correctDataNames=l=>{var c,f,d;return(c=l.from)!=null&&c.data&&(l.from.data=this.lookupDataSource(l.from.data),"time"in this.encoding&&(l.from.data=l.from.data+S8e)),(d=(f=l.from)==null?void 0:f.facet)!=null&&d.data&&(l.from.facet.data=this.lookupDataSource(l.from.facet.data)),l};const o=Z0(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=rJt(o,s,{graticule:t.data&&dae(t.data)}));const u=this.encoding=aQt(t.encoding||{},a,o.filled,s);this.markDef=f8e(o,u,s),this.size=Xtn({encoding:u,size:z1e(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=c8e(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>aae(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===g5e,r=t&&ZGt.some(i=>Qn(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return Eoe.reduce((r,i)=>{const s=la(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=cu(t);return ct(n)&&(i.domain=n.map(qf)),ct(r)&&(i.range=r.map(qf)),i}initAxes(t){return $1.reduce((n,r)=>{const i=t[r];if(Qn(i)||r===Ms&&Qn(t.x2)||r===qa&&Qn(t.y2)){const s=Qn(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=It(t),r={};for(const i of n){const s=t[i];r[i]=vO(s)?LFe(s):qf(s)}return r}initLegends(t){return cYt.reduce((n,r)=>{const i=la(t[r]);if(i&&dYt(r)){const s=i.legend;n[r]=s&&cu(s)}return n},{})}parseData(){this.component.data=j7(this)}parseLayoutSize(){Ptn(this)}parseSelections(){this.component.selection=EZt(this,this.selection)}parseMarkGroup(){this.component.mark=pnn(this)}parseAxesAndHeaders(){this.component.axes=ztn(this)}assembleSelectionTopLevelSignals(t){return XJt(this,t)}assembleSignals(){return[...Q8e(this),...YJt(this,[])]}assembleSelectionData(t){return QJt(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return xae(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!DI(this.parent))&&(t=k8e(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Bw(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Gp(n)}typedFieldDef(t){const n=this.fieldDef(t);return Zl(n)?n:null}}class Pae extends Iae{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(w7(a))return new Pae(a,this,this.getName(`layer_${u}`),o,s);if(F1(a))return new LBe(a,this,this.getName(`layer_${u}`),o,s);throw new Error(Soe(a))})}parseData(){this.component.data=j7(this);for(const t of this.children)t.parseData()}parseLayoutSize(){Ntn(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of It(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>R0(t))&&Ioe(Aoe)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){Htn(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),Q8e(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),xae(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of Wt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return JJt(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),pBe(this))}}function Oae(e,t,n,r,i){if(m7(e))return new iD(e,t,n,i);if(w7(e))return new Pae(e,t,n,r,i);if(F1(e))return new LBe(e,t,n,r,i);if(NQt(e))return new Ftn(e,t,n,i);throw new Error(Soe(e))}function _nn(e,t={}){t.logger&&OKt(t.logger),t.fieldTitle&&O5e(t.fieldTitle);try{const n=l8e(pI(t.config,e.config)),r=v8e(e,n),i=Oae(r,null,"",void 0,n);return i.parse(),qen(i.component.data,i),{spec:Enn(i,wnn(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&MKt(),t.fieldTitle&&JXt()}}function wnn(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):Gt(t)&&(t={type:t}),i&&s&&FJt(t.type)){if(i==="step"&&s==="step")Pt(C1e()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";Pt(C1e(i7(o)));const a=o==="width"?"height":"width";t.type=BJt(a)}}return{...It(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...eve(n,!1),...eve(e,!0)}}function Enn(e,t,n={},r){const i=e.config?qQt(e.config):void 0,s=Atn(e.component.data,n),o=e.assembleSelectionData(s),a=e.assembleProjections(),u=e.assembleTitle(),l=e.assembleGroupStyle(),c=e.assembleGroupEncodeEntry(!0);let f=e.assembleLayoutSignals();f=f.filter(p=>(p.name==="width"||p.name==="height")&&p.value!==void 0?(t[p.name]=+p.value,!1):!0);const{params:d,...h}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...h,...u?{title:u}:{},...l?{style:l}:{},...c?{encode:{update:c}}:{},data:o,...a.length>0?{projections:a}:{},...e.assembleGroup([...f,...e.assembleSelectionTopLevelSignals([]),...s8e(d)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const Tnn=GGt.version,Snn=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:eA,accessPathWithDatum:moe,accessWithDatumToUnescapedPath:Mi,compile:_nn,contains:Ir,deepEqual:Qf,deleteNestedProperty:v8,duplicate:qn,entries:tx,every:doe,fieldIntersection:poe,flatAccessWithDatum:yFe,getFirstDefined:Io,hasIntersection:hoe,hasProperty:Rt,hash:Lr,internalField:xFe,isBoolean:EP,isEmpty:Wi,isEqual:KGt,isInternalField:_Fe,isNullOrFalse:QK,isNumeric:Jj,keys:It,logicalExpr:nD,mergeDeep:mFe,never:pFe,normalize:v8e,normalizeAngle:TP,omit:Yc,pick:JC,prefixGenerator:JK,removePathFromField:SI,replaceAll:fE,replacePathInField:fh,resetIdCounter:QGt,setEqual:gFe,some:ZC,stringify:Gi,titleCase:aO,unique:m0,uniqueId:bFe,vals:_u,varName:Ps,version:Tnn},Symbol.toStringTag,{value:"Module"}));function $Be(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var Cnn="vega-themes",Ann="2.15.0",Inn="Themes for stylized Vega and Vega-Lite visualizations.",knn=["vega","vega-lite","themes","style"],Rnn="BSD-3-Clause",Nnn={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},Dnn=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],Pnn="build/vega-themes.js",Mae="build/vega-themes.module.js",Onn="build/vega-themes.min.js",Mnn="build/vega-themes.min.js",Lnn="build/vega-themes.module.d.ts",$nn={type:"git",url:"https://github.com/vega/vega-themes.git"},Fnn=["src","build"],Bnn={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},jnn={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},Unn={vega:"*","vega-lite":"*"},znn={},Vnn={name:Cnn,version:Ann,description:Inn,keywords:knn,license:Rnn,author:Nnn,contributors:Dnn,main:Pnn,module:Mae,unpkg:Onn,jsdelivr:Mnn,types:Lnn,repository:$nn,files:Fnn,scripts:Bnn,devDependencies:jnn,peerDependencies:Unn,dependencies:znn};const qS="#fff",Nve="#888",Hnn={background:"#333",view:{stroke:Nve},title:{color:qS,subtitleColor:qS},style:{"guide-label":{fill:qS},"guide-title":{fill:qS}},axis:{domainColor:qS,gridColor:Nve,tickColor:qS}},R_="#4572a7",qnn={background:"#fff",arc:{fill:R_},area:{fill:R_},line:{stroke:R_,strokeWidth:2},path:{stroke:R_},rect:{fill:R_},shape:{stroke:R_},symbol:{fill:R_,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},N_="#30a2da",cq="#cbcbcb",Wnn="#999",Gnn="#333",Dve="#f0f0f0",Pve="#333",Ynn={arc:{fill:N_},area:{fill:N_},axis:{domainColor:cq,grid:!0,gridColor:cq,gridWidth:1,labelColor:Wnn,labelFontSize:10,titleColor:Gnn,tickColor:cq,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:Dve,group:{fill:Dve},legend:{labelColor:Pve,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:Pve,titleFontSize:14,titlePadding:10},line:{stroke:N_,strokeWidth:2},path:{stroke:N_,strokeWidth:.5},rect:{fill:N_},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:N_},bar:{binSpacing:2,fill:N_,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},D_="#000",Knn={group:{fill:"#e5e5e5"},arc:{fill:D_},area:{fill:D_},line:{stroke:D_},path:{stroke:D_},rect:{fill:D_},shape:{stroke:D_},symbol:{fill:D_,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},Xnn=22,Qnn="normal",Ove="Benton Gothic, sans-serif",Mve=11.5,Jnn="normal",P_="#82c6df",fq="Benton Gothic Bold, sans-serif",Lve="normal",$ve=13,TR={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Znn={background:"#ffffff",title:{anchor:"start",color:"#000000",font:fq,fontSize:Xnn,fontWeight:Qnn},arc:{fill:P_},area:{fill:P_},line:{stroke:P_,strokeWidth:2},path:{stroke:P_},rect:{fill:P_},shape:{stroke:P_},symbol:{fill:P_,size:30},axis:{labelFont:Ove,labelFontSize:Mve,labelFontWeight:Jnn,titleFont:fq,titleFontSize:$ve,titleFontWeight:Lve},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:Ove,labelFontSize:Mve,symbolType:"square",titleFont:fq,titleFontSize:$ve,titleFontWeight:Lve},range:{category:TR["category-6"],diverging:TR["fireandice-6"],heatmap:TR["fire-7"],ordinal:TR["fire-7"],ramp:TR["fire-7"]}},O_="#ab5787",q6="#979797",ern={background:"#f9f9f9",arc:{fill:O_},area:{fill:O_},line:{stroke:O_},path:{stroke:O_},rect:{fill:O_},shape:{stroke:O_},symbol:{fill:O_,size:30},axis:{domainColor:q6,domainWidth:.5,gridWidth:.2,labelColor:q6,tickColor:q6,tickWidth:.2,titleColor:q6},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},M_="#3e5c69",trn={background:"#fff",arc:{fill:M_},area:{fill:M_},line:{stroke:M_},path:{stroke:M_},rect:{fill:M_},shape:{stroke:M_},symbol:{fill:M_},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Ud="#1696d2",Fve="#000000",nrn="#FFFFFF",W6="Lato",dq="Lato",rrn="Lato",irn="#DEDDDD",srn=18,SR={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},orn={background:nrn,title:{anchor:"start",fontSize:srn,font:W6},axisX:{domain:!0,domainColor:Fve,domainWidth:1,grid:!1,labelFontSize:12,labelFont:dq,labelAngle:0,tickColor:Fve,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:W6},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:irn,gridWidth:1,labelFontSize:12,labelFont:dq,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:W6,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:dq,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:W6,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:SR["six-groups-cat-1"],diverging:SR["diverging-colors"],heatmap:SR["diverging-colors"],ordinal:SR["six-groups-seq"],ramp:SR["shades-blue"]},area:{fill:Ud},rect:{fill:Ud},line:{color:Ud,stroke:Ud,strokeWidth:5},trail:{color:Ud,stroke:Ud,strokeWidth:0,size:1},path:{stroke:Ud,strokeWidth:.5},point:{filled:!0},text:{font:rrn,color:Ud,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Ud,stroke:null}},arc:{fill:Ud},shape:{stroke:Ud},symbol:{fill:Ud,size:30}},L_="#3366CC",Bve="#ccc",G6="Arial, sans-serif",arn={arc:{fill:L_},area:{fill:L_},path:{stroke:L_},rect:{fill:L_},shape:{stroke:L_},symbol:{stroke:L_},circle:{fill:L_},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:G6,fontSize:12},"guide-title":{font:G6,fontSize:12},"group-title":{font:G6,fontSize:12}},title:{font:G6,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:Bve,tickColor:Bve,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},Lae=e=>e*(1/3+1),jve=Lae(9),Uve=Lae(10),zve=Lae(12),CR="Segoe UI",Vve="wf_standard-font, helvetica, arial, sans-serif",Hve="#252423",AR="#605E5C",qve="transparent",urn="#C8C6C4",ip="#118DFF",lrn="#12239E",crn="#E66C37",frn="#6B007B",drn="#E044A7",hrn="#744EC2",prn="#D9B300",mrn="#D64550",FBe=ip,BBe="#DEEFFF",Wve=[BBe,FBe],grn=[BBe,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",FBe],yrn={view:{stroke:qve},background:qve,font:CR,header:{titleFont:Vve,titleFontSize:zve,titleColor:Hve,labelFont:CR,labelFontSize:Uve,labelColor:AR},axis:{ticks:!1,grid:!1,domain:!1,labelColor:AR,labelFontSize:jve,titleFont:Vve,titleColor:Hve,titleFontSize:zve,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:urn,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:ip},line:{stroke:ip,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:CR,fontSize:jve,fill:AR},arc:{fill:ip},area:{fill:ip,line:!0,opacity:.6},path:{stroke:ip},rect:{fill:ip},point:{fill:ip,filled:!0,size:75},shape:{stroke:ip},symbol:{fill:ip,strokeWidth:1.5,size:50},legend:{titleFont:CR,titleFontWeight:"bold",titleColor:AR,labelFont:CR,labelFontSize:Uve,labelColor:AR,symbolType:"circle",symbolSize:75},range:{category:[ip,lrn,crn,frn,drn,hrn,prn,mrn],diverging:Wve,heatmap:Wve,ordinal:grn}},hq='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',vrn='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',pq=400,Y6={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},brn=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],xrn=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function U7({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=Y6.gridBg[e],i=Y6.textPrimary[e],s=Y6.textSecondary[e],o=n==="dark"?brn:xrn,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:hq,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:vrn,labelFontWeight:pq,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:Y6.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:hq,fill:s,fontWeight:pq},"guide-title":{font:hq,fill:s,fontWeight:pq}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const _rn=U7({theme:"white",background:"#ffffff"}),wrn=U7({theme:"g10",background:"#f4f4f4"}),Ern=U7({theme:"g90",background:"#262626"}),Trn=U7({theme:"g100",background:"#161616"}),Srn=Vnn.version,Crn=Object.freeze(Object.defineProperty({__proto__:null,carbong10:wrn,carbong100:Trn,carbong90:Ern,carbonwhite:_rn,dark:Hnn,excel:qnn,fivethirtyeight:Ynn,ggplot2:Knn,googlecharts:arn,latimes:Znn,powerbi:yrn,quartz:ern,urbaninstitute:orn,version:Srn,vox:trn},Symbol.toStringTag,{value:"Module"}));function Arn(e,t,n,r){if(ct(e))return`[${e.map(i=>t(Gt(i)?i:Gve(i,n))).join(", ")}]`;if(Ht(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(Ht(c)&&(c=Gve(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function Irn(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function Gve(e,t){return JSON.stringify(e,Irn(t))}var krn=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const jBe="vg-tooltip-element",Rrn={offsetX:10,offsetY:10,id:jBe,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:Nrn,maxDepth:2,formatTooltip:Arn,baseURL:""};function Nrn(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function Drn(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return krn.toString().replace(jBe,e)}function Prn(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class Orn{constructor(t){this.options={...Rrn,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=Drn(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=Prn(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var mq={};function Mrn(e){return e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var gq,Yve;function Lrn(){return Yve||(Yve=1,gq=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),gq}var $rn=bi;bi.Node=_E;bi.create=bi;function bi(e){var t=this;if(t instanceof bi||(t=new bi),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}bi.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};bi.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};bi.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};bi.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)Brn(this,arguments[e]);return this.length};bi.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)jrn(this,arguments[e]);return this.length};bi.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};bi.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};bi.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};bi.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};bi.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};bi.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};bi.prototype.map=function(e,t){t=t||this;for(var n=new bi,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};bi.prototype.mapReverse=function(e,t){t=t||this;for(var n=new bi,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};bi.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};bi.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};bi.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};bi.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};bi.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new bi;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};bi.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new bi;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};bi.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=Frn(this,i,n[r]);return s};bi.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function Frn(e,t,n){var r=t===e.head?new _E(n,null,t,e):new _E(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function Brn(e,t){e.tail=new _E(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function jrn(e,t){e.head=new _E(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function _E(e,t,n,r){if(!(this instanceof _E))return new _E(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{Lrn()(bi)}catch{}const Urn=$rn,uw=Symbol("max"),dy=Symbol("length"),WS=Symbol("lengthCalculator"),sD=Symbol("allowStale"),Iw=Symbol("maxAge"),uy=Symbol("dispose"),Kve=Symbol("noDisposeOnSet"),Ia=Symbol("lruList"),sp=Symbol("cache"),UBe=Symbol("updateAgeOnGet"),yq=()=>1;class zrn{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[uw]=t.max||1/0;const n=t.length||yq;if(this[WS]=typeof n!="function"?yq:n,this[sD]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[Iw]=t.maxAge||0,this[uy]=t.dispose,this[Kve]=t.noDisposeOnSet||!1,this[UBe]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[uw]=t||1/0,IR(this)}get max(){return this[uw]}set allowStale(t){this[sD]=!!t}get allowStale(){return this[sD]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[Iw]=t,IR(this)}get maxAge(){return this[Iw]}set lengthCalculator(t){typeof t!="function"&&(t=yq),t!==this[WS]&&(this[WS]=t,this[dy]=0,this[Ia].forEach(n=>{n.length=this[WS](n.value,n.key),this[dy]+=n.length})),IR(this)}get lengthCalculator(){return this[WS]}get length(){return this[dy]}get itemCount(){return this[Ia].length}rforEach(t,n){n=n||this;for(let r=this[Ia].tail;r!==null;){const i=r.prev;Xve(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Ia].head;r!==null;){const i=r.next;Xve(this,t,r,n),r=i}}keys(){return this[Ia].toArray().map(t=>t.key)}values(){return this[Ia].toArray().map(t=>t.value)}reset(){this[uy]&&this[Ia]&&this[Ia].length&&this[Ia].forEach(t=>this[uy](t.key,t.value)),this[sp]=new Map,this[Ia]=new Urn,this[dy]=0}dump(){return this[Ia].map(t=>D8(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Ia]}set(t,n,r){if(r=r||this[Iw],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[WS](n,t);if(this[sp].has(t)){if(s>this[uw])return eC(this,this[sp].get(t)),!1;const u=this[sp].get(t).value;return this[uy]&&(this[Kve]||this[uy](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[dy]+=s-u.length,u.length=s,this.get(t),IR(this),!0}const o=new Vrn(t,n,s,i,r);return o.length>this[uw]?(this[uy]&&this[uy](t,n),!1):(this[dy]+=o.length,this[Ia].unshift(o),this[sp].set(t,this[Ia].head),IR(this),!0)}has(t){if(!this[sp].has(t))return!1;const n=this[sp].get(t).value;return!D8(this,n)}get(t){return vq(this,t,!0)}peek(t){return vq(this,t,!1)}pop(){const t=this[Ia].tail;return t?(eC(this,t),t.value):null}del(t){eC(this,this[sp].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[sp].forEach((t,n)=>vq(this,n,!1))}}const vq=(e,t,n)=>{const r=e[sp].get(t);if(r){const i=r.value;if(D8(e,i)){if(eC(e,r),!e[sD])return}else n&&(e[UBe]&&(r.value.now=Date.now()),e[Ia].unshiftNode(r));return i.value}},D8=(e,t)=>{if(!t||!t.maxAge&&!e[Iw])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[Iw]&&n>e[Iw]},IR=e=>{if(e[dy]>e[uw])for(let t=e[Ia].tail;e[dy]>e[uw]&&t!==null;){const n=t.prev;eC(e,t),t=n}},eC=(e,t)=>{if(t){const n=t.value;e[uy]&&e[uy](n.key,n.value),e[dy]-=n.length,e[sp].delete(n.key),e[Ia].removeNode(t)}};class Vrn{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const Xve=(e,t,n,r)=>{let i=n.value;D8(e,i)&&(eC(e,n),e[sD]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var Hrn=zrn;const qrn=Object.freeze({loose:!0}),Wrn=Object.freeze({}),Grn=e=>e?typeof e!="object"?qrn:e:Wrn;var $ae=Grn,SX={exports:{}};const Yrn="2.0.0",zBe=256,Krn=Number.MAX_SAFE_INTEGER||9007199254740991,Xrn=16,Qrn=zBe-6,Jrn=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Fae={MAX_LENGTH:zBe,MAX_SAFE_COMPONENT_LENGTH:Xrn,MAX_SAFE_BUILD_LENGTH:Qrn,MAX_SAFE_INTEGER:Krn,RELEASE_TYPES:Jrn,SEMVER_SPEC_VERSION:Yrn,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const Zrn=typeof process=="object"&&mq&&mq.NODE_DEBUG&&/\bsemver\b/i.test(mq.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var z7=Zrn;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=Fae,s=z7;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[y,v]of d)m=m.split(`${y}*`).join(`${y}{0,${v}}`).split(`${y}+`).join(`${y}{1,${v}}`);return m},p=(m,y,v)=>{const b=h(y),w=c++;s(m,w,y),l[m]=w,u[w]=y,o[w]=new RegExp(y,v?"g":void 0),a[w]=new RegExp(b,v?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(SX,SX.exports);var Bae=SX.exports;const Qve=/^[0-9]+$/,VBe=(e,t)=>{const n=Qve.test(e),r=Qve.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},ein=(e,t)=>VBe(t,e);var tin={compareIdentifiers:VBe,rcompareIdentifiers:ein};const K6=z7,{MAX_LENGTH:Jve,MAX_SAFE_INTEGER:X6}=Fae,{safeRe:Zve,t:ebe}=Bae,nin=$ae,{compareIdentifiers:GS}=tin;let rin=class jm{constructor(t,n){if(n=nin(n),t instanceof jm){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Jve)throw new TypeError(`version is longer than ${Jve} characters`);K6("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?Zve[ebe.LOOSE]:Zve[ebe.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>X6||this.major<0)throw new TypeError("Invalid major version");if(this.minor>X6||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>X6||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<X6)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(K6("SemVer.compare",this.version,this.options,t),!(t instanceof jm)){if(typeof t=="string"&&t===this.version)return 0;t=new jm(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof jm||(t=new jm(t,this.options)),GS(this.major,t.major)||GS(this.minor,t.minor)||GS(this.patch,t.patch)}comparePre(t){if(t instanceof jm||(t=new jm(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(K6("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return GS(r,i)}while(++n)}compareBuild(t){t instanceof jm||(t=new jm(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(K6("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return GS(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),GS(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var jae=rin;const tbe=jae,iin=(e,t,n)=>new tbe(e,n).compare(new tbe(t,n));var PI=iin;const sin=PI,oin=(e,t,n)=>sin(e,t,n)===0;var ain=oin;const uin=PI,lin=(e,t,n)=>uin(e,t,n)!==0;var cin=lin;const fin=PI,din=(e,t,n)=>fin(e,t,n)>0;var hin=din;const pin=PI,min=(e,t,n)=>pin(e,t,n)>=0;var gin=min;const yin=PI,vin=(e,t,n)=>yin(e,t,n)<0;var bin=vin;const xin=PI,_in=(e,t,n)=>xin(e,t,n)<=0;var win=_in;const Ein=ain,Tin=cin,Sin=hin,Cin=gin,Ain=bin,Iin=win,kin=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return Ein(e,n,r);case"!=":return Tin(e,n,r);case">":return Sin(e,n,r);case">=":return Cin(e,n,r);case"<":return Ain(e,n,r);case"<=":return Iin(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var Rin=kin,bq,nbe;function Nin(){if(nbe)return bq;nbe=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}bq=t;const n=$ae,{safeRe:r,t:i}=Bae,s=Rin,o=z7,a=jae,u=HBe();return bq}var xq,rbe;function HBe(){if(rbe)return xq;rbe=1;class e{constructor(H,Q){if(Q=r(Q),H instanceof e)return H.loose===!!Q.loose&&H.includePrerelease===!!Q.includePrerelease?H:new e(H.raw,Q);if(H instanceof i)return this.raw=H.value,this.set=[[H]],this.format(),this;if(this.options=Q,this.loose=!!Q.loose,this.includePrerelease=!!Q.includePrerelease,this.raw=H.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(J=>this.parseRange(J.trim())).filter(J=>J.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const J=this.set[0];if(this.set=this.set.filter(ne=>!p(ne[0])),this.set.length===0)this.set=[J];else if(this.set.length>1){for(const ne of this.set)if(ne.length===1&&m(ne[0])){this.set=[ne];break}}}this.format()}format(){return this.range=this.set.map(H=>H.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(H){const J=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+H,ne=n.get(J);if(ne)return ne;const Z=this.options.loose,ie=Z?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];H=H.replace(ie,$(this.options.includePrerelease)),s("hyphen replace",H),H=H.replace(a[u.COMPARATORTRIM],l),s("comparator trim",H),H=H.replace(a[u.TILDETRIM],c),s("tilde trim",H),H=H.replace(a[u.CARETTRIM],f),s("caret trim",H);let q=H.split(" ").map(Y=>v(Y,this.options)).join(" ").split(/\s+/).map(Y=>M(Y,this.options));Z&&(q=q.filter(Y=>(s("loose invalid filter",Y,this.options),!!Y.match(a[u.COMPARATORLOOSE])))),s("range list",q);const j=new Map,G=q.map(Y=>new i(Y,this.options));for(const Y of G){if(p(Y))return[Y];j.set(Y.value,Y)}j.size>1&&j.has("")&&j.delete("");const V=[...j.values()];return n.set(J,V),V}intersects(H,Q){if(!(H instanceof e))throw new TypeError("a Range is required");return this.set.some(J=>y(J,Q)&&H.set.some(ne=>y(ne,Q)&&J.every(Z=>ne.every(ie=>Z.intersects(ie,Q)))))}test(H){if(!H)return!1;if(typeof H=="string")try{H=new o(H,this.options)}catch{return!1}for(let Q=0;Q<this.set.length;Q++)if(U(this.set[Q],H,this.options))return!0;return!1}}xq=e;const t=Hrn,n=new t({max:1e3}),r=$ae,i=Nin(),s=z7,o=jae,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=Bae,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=Fae,p=F=>F.value==="<0.0.0-0",m=F=>F.value==="",y=(F,H)=>{let Q=!0;const J=F.slice();let ne=J.pop();for(;Q&&J.length;)Q=J.every(Z=>ne.intersects(Z,H)),ne=J.pop();return Q},v=(F,H)=>(s("comp",F,H),F=T(F,H),s("caret",F),F=w(F,H),s("tildes",F),F=I(F,H),s("xrange",F),F=D(F,H),s("stars",F),F),b=F=>!F||F.toLowerCase()==="x"||F==="*",w=(F,H)=>F.trim().split(/\s+/).map(Q=>E(Q,H)).join(" "),E=(F,H)=>{const Q=H.loose?a[u.TILDELOOSE]:a[u.TILDE];return F.replace(Q,(J,ne,Z,ie,q)=>{s("tilde",F,J,ne,Z,ie,q);let j;return b(ne)?j="":b(Z)?j=`>=${ne}.0.0 <${+ne+1}.0.0-0`:b(ie)?j=`>=${ne}.${Z}.0 <${ne}.${+Z+1}.0-0`:q?(s("replaceTilde pr",q),j=`>=${ne}.${Z}.${ie}-${q} <${ne}.${+Z+1}.0-0`):j=`>=${ne}.${Z}.${ie} <${ne}.${+Z+1}.0-0`,s("tilde return",j),j})},T=(F,H)=>F.trim().split(/\s+/).map(Q=>A(Q,H)).join(" "),A=(F,H)=>{s("caret",F,H);const Q=H.loose?a[u.CARETLOOSE]:a[u.CARET],J=H.includePrerelease?"-0":"";return F.replace(Q,(ne,Z,ie,q,j)=>{s("caret",F,ne,Z,ie,q,j);let G;return b(Z)?G="":b(ie)?G=`>=${Z}.0.0${J} <${+Z+1}.0.0-0`:b(q)?Z==="0"?G=`>=${Z}.${ie}.0${J} <${Z}.${+ie+1}.0-0`:G=`>=${Z}.${ie}.0${J} <${+Z+1}.0.0-0`:j?(s("replaceCaret pr",j),Z==="0"?ie==="0"?G=`>=${Z}.${ie}.${q}-${j} <${Z}.${ie}.${+q+1}-0`:G=`>=${Z}.${ie}.${q}-${j} <${Z}.${+ie+1}.0-0`:G=`>=${Z}.${ie}.${q}-${j} <${+Z+1}.0.0-0`):(s("no pr"),Z==="0"?ie==="0"?G=`>=${Z}.${ie}.${q}${J} <${Z}.${ie}.${+q+1}-0`:G=`>=${Z}.${ie}.${q}${J} <${Z}.${+ie+1}.0-0`:G=`>=${Z}.${ie}.${q} <${+Z+1}.0.0-0`),s("caret return",G),G})},I=(F,H)=>(s("replaceXRanges",F,H),F.split(/\s+/).map(Q=>R(Q,H)).join(" ")),R=(F,H)=>{F=F.trim();const Q=H.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return F.replace(Q,(J,ne,Z,ie,q,j)=>{s("xRange",F,J,ne,Z,ie,q,j);const G=b(Z),V=G||b(ie),Y=V||b(q),ee=Y;return ne==="="&&ee&&(ne=""),j=H.includePrerelease?"-0":"",G?ne===">"||ne==="<"?J="<0.0.0-0":J="*":ne&&ee?(V&&(ie=0),q=0,ne===">"?(ne=">=",V?(Z=+Z+1,ie=0,q=0):(ie=+ie+1,q=0)):ne==="<="&&(ne="<",V?Z=+Z+1:ie=+ie+1),ne==="<"&&(j="-0"),J=`${ne+Z}.${ie}.${q}${j}`):V?J=`>=${Z}.0.0${j} <${+Z+1}.0.0-0`:Y&&(J=`>=${Z}.${ie}.0${j} <${Z}.${+ie+1}.0-0`),s("xRange return",J),J})},D=(F,H)=>(s("replaceStars",F,H),F.trim().replace(a[u.STAR],"")),M=(F,H)=>(s("replaceGTE0",F,H),F.trim().replace(a[H.includePrerelease?u.GTE0PRE:u.GTE0],"")),$=F=>(H,Q,J,ne,Z,ie,q,j,G,V,Y,ee,ae)=>(b(J)?Q="":b(ne)?Q=`>=${J}.0.0${F?"-0":""}`:b(Z)?Q=`>=${J}.${ne}.0${F?"-0":""}`:ie?Q=`>=${Q}`:Q=`>=${Q}${F?"-0":""}`,b(G)?j="":b(V)?j=`<${+G+1}.0.0-0`:b(Y)?j=`<${G}.${+V+1}.0-0`:ee?j=`<=${G}.${V}.${Y}-${ee}`:F?j=`<${G}.${V}.${+Y+1}-0`:j=`<=${j}`,`${Q} ${j}`.trim()),U=(F,H,Q)=>{for(let J=0;J<F.length;J++)if(!F[J].test(H))return!1;if(H.prerelease.length&&!Q.includePrerelease){for(let J=0;J<F.length;J++)if(s(F[J].semver),F[J].semver!==i.ANY&&F[J].semver.prerelease.length>0){const ne=F[J].semver;if(ne.major===H.major&&ne.minor===H.minor&&ne.patch===H.patch)return!0}return!1}return!0};return xq}const Din=HBe(),Pin=(e,t,n)=>{try{t=new Din(t,n)}catch{return!1}return t.test(e)};var Oin=Pin,qBe=Mrn(Oin);function Min(e,t,n){const r=e.open(t),i=250,{origin:s}=new URL(t);let o=40;function a(l){l.source===r&&(o=0,e.removeEventListener("message",a,!1))}e.addEventListener("message",a,!1);function u(){o<=0||(r.postMessage(n,s),setTimeout(u,i),o-=1)}setTimeout(u,i)}var Lin=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function WBe(e,...t){for(const n of t)$in(e,n);return e}function $in(e,t){for(const n of Object.keys(t))mI(e,n,t[n],!0)}const op=hGt;let kP=Snn;const Q6=typeof window<"u"?window:void 0;var Lxe;kP===void 0&&((Lxe=Q6==null?void 0:Q6.vl)!=null&&Lxe.compile)&&(kP=Q6.vl);const Fin={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Bin={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},bN={vega:"Vega","vega-lite":"Vega-Lite"},P8={vega:op.version,"vega-lite":kP?kP.version:"not available"},jin={vega:e=>e,"vega-lite":(e,t)=>kP.compile(e,{config:t}).spec},Uin=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,zin="chart-wrapper";function Vin(e){return typeof e=="function"}function ibe(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${bN[r]} JSON Source`}function Hin(e,t){if(e.$schema){const n=$Be(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${bN[n.library]}, but mode argument sets ${bN[t]??t}.`);const r=n.library;return qBe(P8[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${bN[r]} ${n.version}, but the current version of ${bN[r]} is v${P8[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function GBe(e){return!!(e&&"load"in e)}function sbe(e){return GBe(e)?e:op.loader(e)}function qin(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return Gt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function Win(e,t,n={}){let r,i;Gt(t)?(i=sbe(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=qin(r),o=s.loader;(!i||o)&&(i=sbe(n.loader??o));const a=await obe(s,i),u=await obe(n,i),l={...WBe(u,a),config:pI(u.config??{},a.config??{})};return await Yin(e,r,l,i)}async function obe(e,t){const n=Gt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=Gt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function Gin(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function Yin(e,t,n={},r){const i=n.theme?pI(Crn[n.theme],n.config??{}):n.config,s=Ix(n.actions)?n.actions:WBe({},Fin,n.actions??{}),o={...Bin,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??op.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const T="vega-embed-style",{root:A,rootContainer:I}=Gin(c);if(!A.getElementById(T)){const R=document.createElement("style");R.id=T,R.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?Lin.toString():n.defaultStyle,I.appendChild(R)}}const f=Hin(t,n.mode);let d=jin[f](t,i);if(f==="vega-lite"&&d.$schema){const T=$Be(d.$schema);qBe(P8.vega,`^${T.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${T.version}, but current version is v${P8.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const T=document.createElement("div");T.classList.add(zin),c.appendChild(T),h=T}const p=n.patch;if(p&&(d=p instanceof Function?p(d):rj(d,p,!0,!1).newDocument),n.formatLocale&&op.formatLocale(n.formatLocale),n.timeFormatLocale&&op.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const T in n.expressionFunctions){const A=n.expressionFunctions[T];"fn"in A?op.expressionFunction(T,A.fn,A.visitor):A instanceof Function&&op.expressionFunction(T,A)}const{ast:m}=n,y=op.parse(d,f==="vega-lite"?{}:i,{ast:m}),v=new(n.viewClass||op.View)(y,{loader:r,logLevel:u,renderer:a,...m?{expr:op.expressionInterpreter??n.expr??EGt}:{}});if(v.addSignalListener("autosize",(T,A)=>{const{type:I}=A;I=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):I=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):I=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:T,tooltip:A}=n,I=T&&!GBe(T)?T==null?void 0:T.baseURL:void 0,R=Vin(A)?A:new Orn({baseURL:I,...A===!0?{}:A}).call;v.tooltip(R)}let{hover:b}=n;if(b===void 0&&(b=f==="vega"),b){const{hoverSet:T,updateSet:A}=typeof b=="boolean"?{}:b;v.hover(T,A)}n&&(n.width!=null&&v.width(n.width),n.height!=null&&v.height(n.height),n.padding!=null&&v.padding(n.padding)),await v.initialize(h,n.bind).runAsync();let w;if(s!==!1){let T=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const I=document.createElement("details");I.title=o.CLICK_TO_VIEW_ACTIONS,c.append(I),T=I;const R=document.createElement("summary");R.innerHTML=Uin,I.append(R),w=D=>{I.contains(D.target)||I.removeAttribute("open")},document.addEventListener("click",w)}const A=document.createElement("div");if(T.append(A),A.classList.add("vega-actions"),s===!0||s.export!==!1){for(const I of["svg","png"])if(s===!0||s.export===!0||s.export[I]){const R=o[`${I.toUpperCase()}_ACTION`],D=document.createElement("a"),M=Ht(n.scaleFactor)?n.scaleFactor[I]:n.scaleFactor;D.text=R,D.href="#",D.target="_blank",D.download=`${l}.${I}`,D.addEventListener("mousedown",async function($){$.preventDefault();const U=await v.toImageURL(I,M);this.href=U}),A.append(D)}}if(s===!0||s.source!==!1){const I=document.createElement("a");I.text=o.SOURCE_ACTION,I.href="#",I.addEventListener("click",function(R){ibe(yH(t),n.sourceHeader??"",n.sourceFooter??"",f),R.preventDefault()}),A.append(I)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const I=document.createElement("a");I.text=o.COMPILED_ACTION,I.href="#",I.addEventListener("click",function(R){ibe(yH(d),n.sourceHeader??"",n.sourceFooter??"","vega"),R.preventDefault()}),A.append(I)}if(s===!0||s.editor!==!1){const I=n.editorUrl??"https://vega.github.io/editor/",R=document.createElement("a");R.text=o.EDITOR_ACTION,R.href="#",R.addEventListener("click",function(D){Min(window,I,{config:i,mode:f,renderer:a,spec:yH(t)}),D.preventDefault()}),A.append(R)}}function E(){w&&document.removeEventListener("click",w),v.finalize()}return{view:v,spec:t,vgSpec:d,finalize:E,embedOptions:n}}function Kin(e){return!!e&&{}.toString.call(e)==="[object Function]"}function Xin(e,t,n){n&&(Kin(n)?n(e.data(t)):e.change(t,op.changeset().remove(()=>!0).insert(n)))}function Qin(e,t){Object.keys(t).forEach(n=>{Xin(e,n,t[n])})}function YBe(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const KBe=()=>{};function _q(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function Jin(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=YBe([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!VR(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function abe(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function wq(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function xN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class XBe extends li.PureComponent{constructor(){super(...arguments),xN(this,"containerRef",li.createRef()),xN(this,"resultPromise",void 0),xN(this,"handleError",t=>{const{onError:n=KBe}=this.props;n(t,this.containerRef.current),console.warn(t)}),xN(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=YBe([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=Jin(wq(this.props),wq(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!GY(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&abe(a,s),i&&_q(a,i)),a.run()})}else GY(i,s)||this.modifyView(o=>{s&&abe(o,s),i&&_q(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=wq(this.props);this.resultPromise=Win(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;_q(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return li.createElement("div",{ref:this.containerRef,className:t,style:n})}}xN(XBe,"propTypes",{className:Dle.string,onError:Dle.func});function CX(){return CX=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CX.apply(this,arguments)}function AX(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Zin={};class Uae extends li.PureComponent{constructor(){super(...arguments),AX(this,"vegaEmbed",li.createRef()),AX(this,"handleNewView",t=>{this.update();const{onNewView:n=KBe}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){GY(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{Qin(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return li.createElement(XBe,CX({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}AX(Uae,"defaultProps",{data:Zin});function IX(){return IX=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IX.apply(this,arguments)}function ube(e){return li.createElement(Uae,IX({},e,{mode:"vega-lite"}))}function esn({currentConfig:e,provState:t}){const n=wh(),r=Eh(),i=yl(),[s,o]=O.useState(null),[a,u]=O.useState(!0),{updateResponseBlockValidation:l,setreactiveAnswers:c}=Eu(),[f,d]=O.useState(),{actions:h,trrack:p}=O.useMemo(()=>{const w=qE.create(),E=w.register("signal",(A,I)=>(A.event=I,A)),T=E3({registry:w,initialState:{event:{}}});return{actions:{signalAction:E},trrack:T}},[]),m=O.useCallback(({status:w,provenanceGraph:E,answers:T})=>{i(l({location:"sidebar",identifier:`${r}_${n}`,status:w,values:T,provenanceGraph:E})),i(c(T))},[r,n,i,c,l]),y=O.useCallback((w,E)=>{p.apply(w,h.signalAction({key:w,value:E}))},[h,p]),v=O.useCallback((w,E)=>{const{responseId:T,response:A}=E;m({status:!0,provenanceGraph:p.graph.backend,answers:{[T]:A}})},[m,p.graph.backend]),b=O.useMemo(()=>{var E;const w=(E=s==null?void 0:s.config)==null?void 0:E.signals;return w?w.reduce((T,A)=>(A.name==="revisitAnswer"?T[A.name]=v:T[A.name]=y,T),{}):{}},[v,y,s]);return O.useEffect(()=>{async function w(){u(!0);let E;"path"in e?E=await H1t(e.path):E=e.config,E!==void 0&&o(E),u(!1)}e&&w()},[e]),O.useEffect(()=>{f&&t&&t.event&&t.event.key&&f.signal(t.event.key,t.event.value).run()},[f,t]),a?S.jsx("div",{children:"Loading..."}):"path"in e&&!s?S.jsx(Nb,{path:e.path}):s?S.jsx(Uae,{spec:structuredClone(s),signalListeners:b,onNewView:w=>d(w)}):S.jsx("div",{children:"Failed to load vega config"})}function tsn(){const e=n1(),t=wh(),n=Eh()||"Notfound",r=e.components[n],{storageEngine:i}=uo(),s=O.useRef(null),[o,a]=O.useState(null),{setIsRecording:u}=Eu(),l=mi(D=>D.analysisProvState),c=qA(),f=bee(),d=mi(D=>D.sequence),[h]=E1(),p=mi(D=>D.participantId),m=O.useMemo(()=>h.get("participantId"),[h]);IOe();const y=yl(),{setAlertModal:v}=Eu();O.useEffect(()=>{(i==null?void 0:i.getEngine())!==void 0&&y(v({show:!0,message:"There was an issue connecting to the undefined database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[v,i,y]),O.useEffect(()=>{!e||!e.uiConfig.recordStudyAudio||!i||i.getEngine()!=="firebase"||f&&f.endTime>0||c||(s.current&&o&&i.saveAudio(s.current,o),s.current&&(s.current.stream.getTracks().forEach(D=>{var M;D.stop(),(M=s.current)==null||M.stream.removeTrack(D)}),s.current.stream.getAudioTracks().forEach(D=>{var M;D.stop(),(M=s.current)==null||M.stream.removeTrack(D)}),s.current.stop(),s.current=null),r&&r.recordAudio!==void 0&&!r.recordAudio||n==="end"?(a(null),y(u(!1))):navigator.mediaDevices.getUserMedia({audio:!0}).then(D=>{const M=new MediaRecorder(D);s.current=M,s.current.start(),y(u(!0)),a(`${n}_${t}`)}))},[n,t]);const[b,w]=O.useState([]),E=O.useRef([]);O.useEffect(()=>{async function D(){var U;const $=((U=hee(d,t))==null?void 0:U.map(F=>F.currentBlock.id).filter(F=>F!==void 0))||[];w($)}async function M(){const $=E.current;JSON.stringify($)!==JSON.stringify(b)&&b.length>0&&i&&await i.addParticipantTags(b),E.current=b}D().then(M)},[t,i,d]);const T=O.useMemo(()=>{var D;return n!=="end"&&!n.startsWith("__")&&dI(r)&&e.baseComponents?vee({},(D=e.baseComponents)==null?void 0:D[r.baseComponent],r):r},[r,e]);if(n==="end")return S.jsx(tMt,{});if(n==="__trainingFailed")return S.jsx(nMt,{});if(n==="__timedOut")return S.jsx(rMt,{});if(n==="Notfound")return S.jsx(Nb,{email:e.uiConfig.contactEmail});if(m&&p!==m)return S.jsx(Gl,{style:{height:"80vh"},children:S.jsx(mh,{})});const A=T.instruction||"",{instructionLocation:I}=T,R=e.uiConfig.sidebar&&(I==="sidebar"||I===void 0);return S.jsxs(S.Fragment,{children:[I==="aboveStimulus"&&S.jsx(ll,{text:A}),S.jsx(mF,{status:f,config:T,location:"aboveStimulus"},`${t}-above-response-block`),S.jsxs(O.Suspense,{fallback:S.jsx("div",{children:"Loading..."}),children:[T.type==="markdown"&&S.jsx(H6t,{currentConfig:T}),T.type==="website"&&S.jsx(V1t,{currentConfig:T}),T.type==="image"&&S.jsx(W1t,{currentConfig:T}),T.type==="react-component"&&S.jsx(V6t,{currentConfig:T,provState:l}),T.type==="vega"&&S.jsx(esn,{currentConfig:T,provState:l})]},`${t}-stimulus`),(I==="belowStimulus"||I===void 0&&!R)&&S.jsx(ll,{text:A}),S.jsx(mF,{status:f,config:T,location:"belowStimulus"},`${t}-below-response-block`)]})}function QBe(e){const[t]=E1();return S.jsx(NJ,{...e,to:{pathname:e.to,search:t.toString()}})}function JBe(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=JBe(o,t,n,r),r.includes(o.orderPath))break}return i}function ZBe(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=ZBe(s,r)}}),n}function nsn(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function rsn({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,participantView:s,studyConfig:o,subSequence:a,analysisNavigation:u}){const l=jE(),c=Xp(),f=wh(),[d,{close:h,open:p}]=OX(!1),m=e in o.components&&o.components[e],y=a&&a.components.slice(r).includes(e)?JBe(n,e,r,a.orderPath):-1,{trialId:v}=M0(),[b]=E1(),w=O.useMemo(()=>b.get("participantId"),[b]),E=v===e,T=s?f===y:f===`reviewer-${e}`,A=u?E:T,I=O.useCallback(()=>c(v?`./../${e}`:`./${e}`),[c,e,v]),D=u?I:()=>c(s?w?`/${l}/${pp(y)}?participantId=${w}`:`/${l}/${pp(y)}`:`/${l}/reviewer-${e}`),M=e.includes(".co.")?".co.":e.includes(".components.")?".components.":!1,$=e.includes("$")&&M&&e.includes(M)?e.split(M).at(-1):e;return S.jsxs(vu,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:d,offset:20,children:[S.jsx(vu.Target,{children:S.jsx(je,{onMouseEnter:p,onMouseLeave:h,children:S.jsx(cB,{active:A,style:{lineHeight:"32px",height:"32px"},label:S.jsxs(je,{children:[i&&S.jsx(vZe,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),e!==$&&S.jsx(DZe,{size:16,style:{marginRight:4,marginBottom:-2},color:"var(--mantine-color-blue-outline)"}),S.jsx(gt,{size:"sm",span:A,fw:A?"700":void 0,display:"inline",children:$})]}),onClick:D,disabled:t})})}),m&&(m.description||m.meta)&&S.jsx(vu.Dropdown,{onMouseLeave:h,children:S.jsxs(je,{children:[m.description&&S.jsxs(je,{children:[S.jsx(gt,{fw:900,display:"inline-block",mr:2,children:"Description:"}),S.jsx(gt,{fw:400,component:"span",children:m.description})]}),m.meta&&S.jsxs(je,{children:[S.jsx(gt,{fw:"900",component:"span",children:"Task Meta: "}),S.jsx(gt,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(m.meta,null,2)}`})]})]})})]})}function O8({configSequence:e,fullSequence:t,participantSequence:n,participantView:r,studyConfig:i,analysisNavigation:s}){var a;let o=$y(e.components);return n&&r&&(o=nsn($y(e.components),$y(n.components))),r||(o=[...((a=e.interruptions)==null?void 0:a.flatMap(u=>u.components))||[],...o]),S.jsx(S.Fragment,{children:o.map((u,l)=>{if(typeof u=="string")return S.jsx(rsn,{step:u,disabled:r&&(n==null?void 0:n.components[l])!==u,fullSequence:t,startIndex:l,interruption:e.interruptions&&e.interruptions.findIndex(h=>h.components.includes(u))>-1||!1,participantView:r,studyConfig:i,subSequence:n,analysisNavigation:s},l);const c=n==null?void 0:n.components.find(h=>typeof h!="string"&&h.orderPath===u.orderPath),f=c?$p(c).length-ZBe(u,c):0,d=$p(u);return S.jsx(cB,{label:S.jsxs(je,{style:{opacity:f>0?1:.5},children:[S.jsx(gt,{size:"sm",display:"inline",fw:700,children:u.id?u.id:u.order}),u.order==="random"||u.order==="latinSquare"?S.jsx(cs,{label:u.order,position:"right",withArrow:!0,children:S.jsx(gZe,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}})}):null,r&&S.jsxs(Cp,{ml:5,variant:"light",children:[f,"/",d.length]}),r&&u.interruptions&&S.jsx(Cp,{ml:5,color:"orange",variant:"light",children:(c==null?void 0:c.components.filter(h=>{var p;return typeof h=="string"&&((p=u.interruptions)==null?void 0:p.flatMap(m=>m.components).includes(h))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:S.jsx(je,{style:{borderLeft:"1px solid #e9ecef"},children:S.jsx(O8,{configSequence:u,participantSequence:c,fullSequence:t,participantView:r,studyConfig:i,analysisNavigation:s})})},l)})})}function e9e(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function lbe({text:e}){return S.jsx(cs,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:S.jsx(LJ,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function isn(){const e=mi(h=>h.sequence),t=mi(h=>h.metadata),{toggleStudyBrowser:n}=Eu(),r=n1(),i=yl(),s=jE(),o=IJ(`/${s}`),{storageEngine:a}=uo(),u=qA(),l=O.useMemo(()=>{let h=$y(r.sequence);return h=pee(h,"root"),h.components.push("end"),h},[r.sequence]),[c,f]=O.useState("participant"),d=O.useMemo(()=>c==="allTrials"||u,[c,u]);return S.jsxs(zi.Aside,{p:"0",children:[S.jsx(zi.Section,{p:"md",children:S.jsxs(an,{direction:"row",justify:"space-between",children:[S.jsx(gt,{size:"md",fw:700,pt:3,children:"Study Browser"}),S.jsx(cs,{label:"Go to the sequence of the next participant in the experiment. Sequences can be different between participants due to randomization, etc.",w:280,multiline:!0,disabled:d,children:S.jsx(yn,{variant:"light",leftSection:S.jsx($J,{size:14}),onClick:()=>e9e(a,r,t,o),size:"xs",disabled:d,children:"Next Participant"})}),S.jsx(hx,{onClick:()=>i(n()),mt:1})]})}),S.jsx(zi.Section,{grow:!0,component:Wy,p:"md",children:S.jsxs(Vr,{value:c,onChange:f,children:[S.jsx(je,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:S.jsxs(Vr.List,{grow:!0,children:[S.jsxs(Vr.Tab,{value:"participant",children:["Participant View",S.jsx(lbe,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),S.jsxs(Vr.Tab,{value:"allTrials",disabled:u,children:["All Trials View",S.jsx(lbe,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),S.jsx(Vr.Panel,{value:"participant",children:S.jsx(O8,{configSequence:l,participantSequence:e,fullSequence:e,participantView:!0,studyConfig:r})}),S.jsx(Vr.Panel,{value:"allTrials",children:S.jsx(O8,{configSequence:l,participantSequence:e,fullSequence:e,participantView:!1,studyConfig:r})})]})})]})}function ssn({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const n=mi(R=>R.config),r=mi(R=>R.metadata),i=mee(),s=yl(),{toggleShowHelpText:o,toggleStudyBrowser:a,incrementHelpCounter:u}=Eu(),{storageEngine:l}=uo(),c=Eh(),f=wh(),d=i.length-1,h=typeof f=="number"?f/d*100:0,[p,m]=O.useState(!1),y=n==null?void 0:n.uiConfig.logoPath,v=n==null?void 0:n.uiConfig.withProgressBar,b=jE(),w=IJ(`/${b}`),E=O.useRef(null),[T,A]=O.useState(!1),I=mi(R=>R.isRecording);return O.useEffect(()=>{const R=E.current;R&&A(R.scrollWidth>R.offsetWidth)},[n]),S.jsx(zi.Header,{p:"md",children:S.jsxs(Gf,{mt:-7,align:"center",children:[S.jsx(Gf.Col,{span:4,children:S.jsxs(an,{align:"center",children:[S.jsx(mx,{w:40,src:`${Ua}${y}`,alt:"Study Logo"}),S.jsx(Zf,{w:"md"}),S.jsx(io,{ref:E,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:T?n==null?void 0:n.studyMetadata.title:void 0,children:n==null?void 0:n.studyMetadata.title})]})}),S.jsx(Gf.Col,{span:4,children:v&&S.jsx(SA,{radius:"md",size:"lg",value:h})}),S.jsx(Gf.Col,{span:4,children:S.jsxs($i,{wrap:"nowrap",justify:"right",children:[I?S.jsxs($i,{ml:"xl",gap:20,wrap:"nowrap",children:[S.jsx(gt,{color:"red",children:"Recording audio"}),S.jsx(AOe,{})]}):null,!t&&S.jsx(cs,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, were not collecting any data.",children:S.jsx(Cp,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&S.jsx(yn,{variant:"outline",onClick:()=>{s(o()),s(u({identifier:`${c}_${f}`}))},children:"Help"}),S.jsxs(Pl,{shadow:"md",width:200,withinPortal:!0,opened:p,onChange:m,children:[S.jsx(Pl.Target,{children:S.jsx(dx,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:S.jsx(SZe,{})})}),S.jsxs(Pl.Dropdown,{children:[e&&S.jsx(Pl.Item,{leftSection:S.jsx($Ze,{size:14}),onClick:()=>s(a()),children:"Study Browser"}),S.jsx(Pl.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:S.jsx(RZe,{size:14}),children:"Contact"}),e&&S.jsx(Pl.Item,{leftSection:S.jsx($J,{size:14}),onClick:()=>e9e(l,n,r,w),children:"Next Participant"}),e&&S.jsx(Pl.Item,{leftSection:S.jsx(eTe,{size:14}),component:"a",href:`${Ua}analysis/stats/${b}`,children:"Analyze & Manage"})]})]})]})})]})})}function t9e(e,t){var n;return dI(e)&&t.baseComponents?vee({},(n=t.baseComponents)==null?void 0:n[e.baseComponent],e):e}function osn(){var u;const e=(u=n1())==null?void 0:u.uiConfig.sidebar,t=n1(),n=Eh(),r=t.components[n],i=O.useMemo(()=>r?t9e(r,t):null,[r,t]),s=bee(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?S.jsxs(zi.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&S.jsxs(zi.Section,{bg:"gray.3",p:"md",children:[S.jsx(gt,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),S.jsx(ll,{text:o})]}),S.jsx(zi.Section,{p:"md",children:S.jsx(mF,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):S.jsx(zi.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:S.jsx(mF,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function asn(){const e=mi(u=>u.showHelpText),t=mi(u=>u.config),n=yl(),{toggleShowHelpText:r}=Eu(),[i,s]=O.useState(""),[o,a]=O.useState(!0);return O.useEffect(()=>{async function u(){if(!t.uiConfig.helpTextPath){a(!1);return}const l=await _ee(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),S.jsx(Us,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?S.jsx(ll,{text:i}):S.jsx(Nb,{path:t.uiConfig.helpTextPath})})}function usn(){const e=mi(o=>o.alertModal),{setAlertModal:t}=Eu(),n=yl(),[r,i]=O.useState(e.show),s=O.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return O.useEffect(()=>i(e.show),[e.show]),S.jsx(Us,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:S.jsxs(Py,{color:"red",radius:"xs",title:"Alert",icon:S.jsx(mZe,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[S.jsx(gt,{my:"md",children:e.message}),S.jsx($i,{w:"100%",justify:"end",children:S.jsx(yn,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}const cbe=15,fbe=3;function lsn({xScale:e,answer:t,height:n,currentNode:r,setCurrentNode:i,taskName:s}){const o=["var(--mantine-color-yellow-8)","var(--mantine-color-green-8)","var(--mantine-color-indigo-8)","var(--mantine-color-violet-8)","var(--mantine-color-cyan-8)","var(--mantine-color-orange-3)","var(--mantine-color-lime-3)","var(--mantine-color-teal-3)","var(--mantine-color-pink-3)"],a=new Map;if(a.set("Root","var(--mantine-color-grape-3)"),t.provenanceGraph){let u=0;Object.entries(t.provenanceGraph.nodes).forEach(l=>{const[,c]=l;a.has(c.label)||(a.set(c.label,o[u]),u=(u+1)%o.length)})}return S.jsxs("g",{style:{cursor:"pointer"},children:[t.provenanceGraph?Object.entries(t.provenanceGraph.nodes).map(u=>{const[l,c]=u;return S.jsx("g",{onClick:()=>i(l,c.createdOn,s),children:S.jsx("rect",{fill:l===r?"#e15759":a.get(c.label),x:e(c.createdOn)-fbe/2,y:n/2-cbe/2,width:fbe,height:cbe})},l)}):null,r&&t.provenanceGraph&&t.provenanceGraph.nodes[r]?S.jsx("rect",{fill:"var(--mantine-color-blue-filled)",cx:e(t.provenanceGraph.nodes[r].createdOn),cy:n/2,r:5}):null,S.jsx(yQ,{position:{bottom:10,left:10},children:S.jsxs(vu,{width:200,position:"bottom",withArrow:!0,shadow:"md",children:[S.jsx(vu.Target,{children:S.jsx(yn,{children:"Show Legend"})}),S.jsx(vu.Dropdown,{children:S.jsx(mu,{children:Array.from(a.keys()).map(u=>S.jsxs($i,{children:[S.jsx(VQ,{color:a.get(u)}),S.jsx("span",{children:u})]},u))})})]})})]})}const dbe={left:5,top:0,right:5,bottom:0};function csn({xScale:e,participantData:t,width:n,height:r,currentNode:i,setCurrentNode:s,setPlayTime:o,trialName:a}){const u=O.useMemo(()=>e.domain()[1]-e.domain()[0],[e]),l=O.useCallback((f,d)=>{o(d,(d-e.domain()[0])/u),s(f)},[s,o,u,e]),c=O.useMemo(()=>Object.entries(t.answers).filter(f=>a?a===f[0]:!0).map(f=>{const[d,h]=f;return S.jsx(lsn,{taskName:d,answer:h,height:r,currentNode:i,setCurrentNode:l,xScale:e},d)}),[i,l,r,t.answers,a,e]);return S.jsxs("svg",{style:{width:n,height:r},children:[S.jsx("line",{stroke:"black",strokeWidth:1,x1:dbe.left,x2:n+dbe.left,y1:r/2,y2:r/2}),c]})}function fsn(e){const t=O.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return O.useLayoutEffect(()=>{t.current=e}),O.useCallback((...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function dsn({width:e,height:t,updateTimer:n,duration:r,isPlaying:i,xScale:s,startTime:o}){const a=O.useRef(0),u=O.useRef(Date.now()),[l,c]=O.useState(0);O.useEffect(()=>{o&&(a.current=0,n(o,0))},[o,n]);const f=fsn(()=>{if(a.current>=r)return;const h=Date.now();a.current=h-u.current,n(o+a.current,void 0),c(l+1)});O.useEffect(()=>{i&&a.current>=r&&(n(o,0),u.current=Date.now()-a.current,a.current=0)},[o,i,r,n]),O.useEffect(()=>{let h=null;return i&&a.current<r&&(u.current=Date.now()-a.current,h=setInterval(()=>{i&&f()},30)),()=>{h&&clearInterval(h)}},[r,f,i]);const d=O.useCallback(h=>{a.current=s.invert(h.clientX-10)-s.domain()[0],u.current=Date.now()-a.current,c(l+1),n(o+a.current,a.current/r)},[r,l,o,n,s]);return S.jsx("svg",{onClick:d,style:{width:e,height:t,position:"absolute",zIndex:1e4},children:S.jsx("line",{stroke:"#e15759",strokeWidth:3,y1:0,y2:t,x1:s(o+a.current),x2:s(o+a.current)})})}function kX(e){const t=Math.floor(e/1e3/60/60),n=Math.floor((e/1e3/60/60-t)*60),r=Math.floor(((e/1e3/60/60-t)*60-n)*60),i=r<10?`0${r}`:`${r}`,s=n<10?`0${n}`:`${n}`,o=t<10?`0${t}`:`${t}`;return`${t>0?`${o}h`:""} ${n>0?`${s}m`:""} ${i}s`}const Eq={left:0,top:0,right:0,bottom:0};function hsn(e,t){return t?t.getParticipantData(e):null}function psn({setTimeString:e}){const[t]=E1(),n=O.useMemo(()=>t.get("participantId")||void 0,[t]),{storageEngine:r}=uo(),i=mi(G=>G.analysisIsPlaying),s=mi(G=>G.analysisHasAudio),o=mi(G=>G.analysisHasProvenance),{saveAnalysisState:a,setAnalysisHasAudio:u,setAnalysisHasProvenance:l,setAnalysisIsPlaying:c}=Eu(),f=yl(),d=Eh(),h=wh();O.useEffect(()=>{f(a(null))},[h,a,f]);const[p,{width:m}]=Ny(),[y,v]=O.useState(0),[b,w]=O.useState(null),[E,T]=O.useState(0),{value:A,status:I}=U5(hsn,[n,r]),[R,D]=Sze(0,100),M=O.useRef(null),[$,U]=O.useState(!0),F=O.useRef(null),H=O.useMemo(()=>`${d}_${h}`,[d,h]);O.useEffect(()=>{f(c(!1))},[n,d,h,f,c]),O.useEffect(()=>{var G;if(H&&A&&((G=A.answers[H])!=null&&G.provenanceGraph)){const V=qE.create(),Y=E3({registry:V,initialState:{}});A.answers[H].provenanceGraph&&(Y.importObject($y(A.answers[H].provenanceGraph)),f(l(!0)),F.current=Y)}else f(l(!1))},[A,H,f,l]);const Q=O.useCallback(G=>{var V;G&&(H&&A&&F.current&&(f(a(F.current.getState((V=A.answers[H].provenanceGraph)==null?void 0:V.nodes[G]))),F.current.to(G)),w(G))},[A,a,f,H]);O.useEffect(()=>{var Y;if(!H||!A||!F.current||!((Y=A.answers[H])!=null&&Y.provenanceGraph))return;const G=A.answers[H].provenanceGraph;if(!G)return;if(!b||!G.nodes[b]){Q(G.root);return}let V=G.nodes[b];for(;;)if(R<V.createdOn){if(XAt(V))break;{const ee=V.parent;V=G.nodes[ee]}}else if(V.children.length>0){const ee=V.children[0];if(R>G.nodes[ee].createdOn)V=G.nodes[ee];else break}else break;V.id!==b&&Q(V.id)},[Q,b,A,n,R,H]);const J=O.useMemo(()=>(A==null?void 0:A.answers[H].startTime)||0,[A,H]);O.useEffect(()=>{E===0?e(""):R!==0&&e(`${kX(R-J)} / ${kX(E*1e3)}`)},[H,A,R,e,J,E]),O.useEffect(()=>{if(!s&&o&&A){const G=A.answers[H].endTime-A.answers[H].startTime;T(G>-1?G/1e3:0)}},[s,o,H,A]);const ne=qA(),Z=O.useRef(null),ie=O.useCallback(async G=>{if(Z.current=G,G&&A&&ne&&H&&r)try{const V=await r.getAudio(H,n);await G.load(V),U(!1),f(u(!0)),T(G.getDuration()),v(G.getWidth()),G.seekTo(0),G.on("redrawcomplete",()=>v(G.getWidth()))}catch(V){throw f(u(!1)),new Error(V)}else f(u(!1)),T(0)},[A,ne,H,r,n,f,u]),q=O.useCallback((G,V)=>{if(G>E*1e3+J){f(c(!1)),D(G);return}D(G),Z.current&&V!==void 0&&setTimeout(()=>{var Y;(Y=Z.current)==null||Y.seekTo(V)})},[c,D,J,f,E]);O.useEffect(()=>{Z.current&&(i?Z.current.play():Z.current.pause())},[Z,i,E,J,D]);const j=O.useMemo(()=>{var Y,ee;if(!A||!((Y=A.answers[H])!=null&&Y.startTime)||!((ee=A.answers[H])!=null&&ee.endTime))return null;const G=E>0?A.answers[H].startTime+E*1e3:A.answers[H].endTime;return Fp([Eq.left,m+Eq.left+Eq.right]).domain([A.answers[H].startTime,G]).clamp(!0)},[A,H,m,E]);return O.useEffect(()=>{ie(Z.current)},[q,ie,A,n,Z]),S.jsx($i,{wrap:"nowrap",gap:10,mx:10,children:S.jsxs(mu,{ref:p,style:{width:"100%"},gap:0,children:[S.jsx(Gl,{}),A!==null&&H?S.jsxs(je,{ref:M,style:{overflow:"hidden",width:"100%",pointerEvents:"none"},display:s?"block":"none",id:"waveformDiv",children:[S.jsx(TOe,{onMount:ie,plugins:[],container:"#waveformDiv",height:50,waveColor:"#484848",progressColor:"#e15759",barHeight:0,cursorColor:"rgba(0, 0, 0, 0)",children:S.jsx(SOe,{id:"waveform",height:50})}),$?S.jsx(mh,{}):null]}):null,I==="success"&&A&&j&&H&&A.answers[H].provenanceGraph?S.jsx(csn,{xScale:j,trialName:H,setPlayTime:q,currentNode:b,setCurrentNode:Q,participantData:A,width:y||m,height:25}):null,j&&A&&(s||o)?S.jsx(dsn,{duration:E*1e3,height:(s?50:0)+(o?25:0),isPlaying:i,startTime:J,width:m,xScale:j,updateTimer:q}):null]})})}function msn(e,t){return t?t.getParticipantData(e):null}function gsn(e){return e?e.getAllParticipantsData():null}function ysn(){const[e]=E1(),t=O.useMemo(()=>e.get("participantId")||void 0,[e]),n=Eh(),r=wh(),i=Xp(),{setAnalysisIsPlaying:s}=Eu(),o=yl(),a=mi(v=>v.analysisIsPlaying),{storageEngine:u}=uo(),{value:l,status:c}=U5(msn,[t,u]),{value:f}=U5(gsn,[u]),[d,h]=O.useMemo(()=>{if(f&&l&&t&&n){const v=f.filter(T=>T.participantConfigHash===l.participantConfigHash),b=v.findIndex(T=>T.participantId===t),w=b<v.length-1?v[b+1]:v[0],E=b>0?v[b-1]:v[v.length-1];return[[w.participantId,$p(w.sequence).indexOf(n)],[E.participantId,$p(E.sequence).indexOf(n)]]}return[["",0],["",0]]},[f,n,l,t]),p=O.useMemo(()=>{const v={};return f==null||f.forEach(b=>{v[b.participantConfigHash]||(v[b.participantConfigHash]=new Set),v[b.participantConfigHash].add(b.participantId)}),Object.keys(v).sort((b,w)=>b===(l==null?void 0:l.participantConfigHash)?-1:w===(l==null?void 0:l.participantConfigHash)?1:0).map(b=>({group:`Config version: ${b}`,items:[...v[b]].map(w=>({value:w,label:w,disabled:b!==(l==null?void 0:l.participantConfigHash)}))}))},[f,l==null?void 0:l.participantConfigHash]),[m,y]=O.useState("");return S.jsx(zi.Footer,{zIndex:101,withBorder:!1,children:S.jsxs(je,{style:{backgroundColor:"var(--mantine-color-blue-1)",height:"150px"},children:[S.jsx(sd,{visible:c!=="success",overlayProps:{backgroundOpacity:.4}}),S.jsx(psn,{setTimeString:y}),S.jsx(Gl,{children:S.jsxs($i,{gap:"xs",style:{height:"50px"},children:[S.jsx(gt,{size:"sm",ff:"monospace",children:m}),S.jsx(dx,{variant:"filled",size:30,onClick:()=>o(s(!a)),children:a?S.jsx(VZe,{}):S.jsx(HZe,{})}),S.jsx(gt,{mx:"0",children:"Participant:"}),S.jsx(CA,{style:{width:"300px"},value:(l==null?void 0:l.participantId)||"",onChange:v=>{i(`./../${pp(0)}?participantId=${v}`)},data:p}),S.jsx(yn,{onClick:()=>i(`../${pp(+r-1)}?participantId=${t}`,{relative:"path"}),children:S.jsx(Vle,{})}),S.jsx(yn,{onClick:()=>i(`../${pp(+r+1)}?participantId=${t}`,{relative:"path"}),children:S.jsx(Hle,{})}),S.jsxs(yn,{px:"xs",disabled:!l||d[0]===l.participantId,onClick:()=>i(`./../${pp(h[1])}?participantId=${h[0]}`),children:[S.jsx(Vle,{}),S.jsx(Wle,{})]}),S.jsxs(yn,{px:"xs",disabled:!l||d[0]===l.participantId,onClick:()=>i(`./../${pp(d[1])}?participantId=${d[0]}`),children:[S.jsx(Wle,{}),S.jsx(Hle,{})]})]})})]})})}function vsn(){const e=O.useRef([]),t=n1(),n=t.uiConfig.windowEventDebounceTime??100,r=mi(d=>d.showStudyBrowser),i=mi(d=>d.analysisHasAudio),s=mi(d=>d.analysisHasProvenance),o=mi(d=>d.modes);O.useEffect(()=>{const d=Fm(T=>{e.current.push([Date.now(),"focus",T.target instanceof HTMLElement?T.target.tagName:""])},n,{maxWait:n}),h=Fm(T=>{e.current.push([Date.now(),"input",T.data??""])},n,{maxWait:n}),p=Fm(T=>{e.current.push([Date.now(),"keypress",T.key])},n,{maxWait:n}),m=Fm(T=>{e.current.push([Date.now(),"mousedown",[T.clientX,T.clientY]])},n,{maxWait:n}),y=Fm(T=>{e.current.push([Date.now(),"mouseup",[T.clientX,T.clientY]])},n,{maxWait:n}),v=Fm(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),b=Fm(T=>{e.current.push([Date.now(),"mousemove",[T.clientX,T.clientY]])},n,{maxWait:n}),w=Fm(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),E=Fm(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",d,!0),window.addEventListener("input",h),window.addEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",y),window.addEventListener("resize",v),window.addEventListener("mousemove",b),window.addEventListener("scroll",w),document.addEventListener("visibilitychange",E),()=>{window.removeEventListener("focus",d,!0),window.removeEventListener("input",h),window.removeEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",y),window.removeEventListener("resize",v),window.removeEventListener("mousemove",b),window.removeEventListener("scroll",w),document.removeEventListener("visibilitychange",E)}},[]);const a=t.uiConfig.sidebarWidth??300,{studyNavigatorEnabled:u,dataCollectionEnabled:l}=O.useMemo(()=>o,[o]),c=O.useMemo(()=>u&&r,[u,r]),f=qA();return S.jsx(qAe.Provider,{value:e,children:S.jsxs(zi,{padding:"md",header:{height:70},navbar:{width:a,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!c,mobile:!c}},footer:{height:(f?50:0)+(i?50:0)+(s?25:0)},children:[S.jsx(osn,{}),S.jsx(isn,{}),S.jsx(ssn,{studyNavigatorEnabled:u,dataCollectionEnabled:l}),S.jsx(asn,{}),S.jsx(usn,{}),S.jsx(zi.Main,{children:S.jsx(TJe,{})}),f&&S.jsx(ysn,{})]})})}function bsn(e,t=!1){return typeof e=="number"?hbe(e,t):hbe(e.length,t).map(r=>r.map(i=>e[i]))}function hbe(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function n9e(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=n9e(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function xsn(e,t){const n=$y(e);return n9e(n,t,"root")}function r9e(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&r9e(s,t,i,o)})}function _sn(e){const t=[];return r9e(e,t,"",0),t}function pbe(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return bsn(i.sort(()=>.5-Math.random()),!0)}function mbe(e){const n=_sn(e.sequence).map(s=>({[s]:pbe(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=xsn(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=pbe(e,o))})}),i}var J6={exports:{}},Tq={},ty={},$_={},Sq={},Cq={},Aq={},gbe;function M8(){return gbe||(gbe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(b){if(super(),!e.IDENTIFIER.test(b))throw new Error("CodeGen: name must be a valid identifier");this.str=b}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(b){super(),this._items=typeof b=="string"?[b]:b}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const b=this._items[0];return b===""||b==='""'}get str(){var b;return(b=this._str)!==null&&b!==void 0?b:this._str=this._items.reduce((w,E)=>`${w}${E}`,"")}get names(){var b;return(b=this._names)!==null&&b!==void 0?b:this._names=this._items.reduce((w,E)=>(E instanceof n&&(w[E.str]=(w[E.str]||0)+1),w),{})}}e._Code=r,e.nil=new r("");function i(v,...b){const w=[v[0]];let E=0;for(;E<b.length;)a(w,b[E]),w.push(v[++E]);return new r(w)}e._=i;const s=new r("+");function o(v,...b){const w=[h(v[0])];let E=0;for(;E<b.length;)w.push(s),a(w,b[E]),w.push(s,h(v[++E]));return u(w),new r(w)}e.str=o;function a(v,b){b instanceof r?v.push(...b._items):b instanceof n?v.push(b):v.push(f(b))}e.addCodeArg=a;function u(v){let b=1;for(;b<v.length-1;){if(v[b]===s){const w=l(v[b-1],v[b+1]);if(w!==void 0){v.splice(b-1,3,w);continue}v[b++]="+"}b++}}function l(v,b){if(b==='""')return v;if(v==='""')return b;if(typeof v=="string")return b instanceof n||v[v.length-1]!=='"'?void 0:typeof b!="string"?`${v.slice(0,-1)}${b}"`:b[0]==='"'?v.slice(0,-1)+b.slice(1):void 0;if(typeof b=="string"&&b[0]==='"'&&!(v instanceof n))return`"${v}${b.slice(1)}`}function c(v,b){return b.emptyStr()?v:v.emptyStr()?b:o`${v}${b}`}e.strConcat=c;function f(v){return typeof v=="number"||typeof v=="boolean"||v===null?v:h(Array.isArray(v)?v.join(","):v)}function d(v){return new r(h(v))}e.stringify=d;function h(v){return JSON.stringify(v).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(v){return typeof v=="string"&&e.IDENTIFIER.test(v)?new r(`.${v}`):i`[${v}]`}e.getProperty=p;function m(v){if(typeof v=="string"&&e.IDENTIFIER.test(v))return new r(`${v}`);throw new Error(`CodeGen: invalid export name: ${v}, use explicit $id name mapping`)}e.getEsmExportName=m;function y(v){return new r(v.toString())}e.regexpCode=y}(Aq)),Aq}var Iq={},ybe;function vbe(){return ybe||(ybe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=M8();class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const b=m.get(p);if(b)return b}else m=this._values[h]=new Map;m.set(p,d);const y=this._scope[h]||(this._scope[h]=[]),v=y.length;return y[v]=c.ref,d.setValue(c,{property:h,itemIndex:v}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const y=f[p]=f[p]||new Map;m.forEach(v=>{if(y.has(v))return;y.set(v,r.Started);let b=c(v);if(b){const w=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${w} ${v} = ${b};${this.opts._n}`}else if(b=d==null?void 0:d(v))h=(0,t._)`${h}${b}${this.opts._n}`;else throw new n(v);y.set(v,r.Completed)})}return h}}e.ValueScope=a}(Iq)),Iq}var bbe;function Dr(){return bbe||(bbe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=M8(),n=vbe();var r=M8();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=vbe();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(Y,ee){return this}}class o extends s{constructor(Y,ee,ae){super(),this.varKind=Y,this.name=ee,this.rhs=ae}render({es5:Y,_n:ee}){const ae=Y?n.varKinds.var:this.varKind,_e=this.rhs===void 0?"":` = ${this.rhs}`;return`${ae} ${this.name}${_e};`+ee}optimizeNames(Y,ee){if(Y[this.name.str])return this.rhs&&(this.rhs=H(this.rhs,Y,ee)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(Y,ee,ae){super(),this.lhs=Y,this.rhs=ee,this.sideEffects=ae}render({_n:Y}){return`${this.lhs} = ${this.rhs};`+Y}optimizeNames(Y,ee){if(!(this.lhs instanceof t.Name&&!Y[this.lhs.str]&&!this.sideEffects))return this.rhs=H(this.rhs,Y,ee),this}get names(){const Y=this.lhs instanceof t.Name?{}:{...this.lhs.names};return F(Y,this.rhs)}}class u extends a{constructor(Y,ee,ae,_e){super(Y,ae,_e),this.op=ee}render({_n:Y}){return`${this.lhs} ${this.op}= ${this.rhs};`+Y}}class l extends s{constructor(Y){super(),this.label=Y,this.names={}}render({_n:Y}){return`${this.label}:`+Y}}class c extends s{constructor(Y){super(),this.label=Y,this.names={}}render({_n:Y}){return`break${this.label?` ${this.label}`:""};`+Y}}class f extends s{constructor(Y){super(),this.error=Y}render({_n:Y}){return`throw ${this.error};`+Y}get names(){return this.error.names}}class d extends s{constructor(Y){super(),this.code=Y}render({_n:Y}){return`${this.code};`+Y}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(Y,ee){return this.code=H(this.code,Y,ee),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(Y=[]){super(),this.nodes=Y}render(Y){return this.nodes.reduce((ee,ae)=>ee+ae.render(Y),"")}optimizeNodes(){const{nodes:Y}=this;let ee=Y.length;for(;ee--;){const ae=Y[ee].optimizeNodes();Array.isArray(ae)?Y.splice(ee,1,...ae):ae?Y[ee]=ae:Y.splice(ee,1)}return Y.length>0?this:void 0}optimizeNames(Y,ee){const{nodes:ae}=this;let _e=ae.length;for(;_e--;){const pe=ae[_e];pe.optimizeNames(Y,ee)||(Q(Y,pe.names),ae.splice(_e,1))}return ae.length>0?this:void 0}get names(){return this.nodes.reduce((Y,ee)=>U(Y,ee.names),{})}}class p extends h{render(Y){return"{"+Y._n+super.render(Y)+"}"+Y._n}}class m extends h{}class y extends p{}y.kind="else";class v extends p{constructor(Y,ee){super(ee),this.condition=Y}render(Y){let ee=`if(${this.condition})`+super.render(Y);return this.else&&(ee+="else "+this.else.render(Y)),ee}optimizeNodes(){super.optimizeNodes();const Y=this.condition;if(Y===!0)return this.nodes;let ee=this.else;if(ee){const ae=ee.optimizeNodes();ee=this.else=Array.isArray(ae)?new y(ae):ae}if(ee)return Y===!1?ee instanceof v?ee:ee.nodes:this.nodes.length?this:new v(J(Y),ee instanceof v?[ee]:ee.nodes);if(!(Y===!1||!this.nodes.length))return this}optimizeNames(Y,ee){var ae;if(this.else=(ae=this.else)===null||ae===void 0?void 0:ae.optimizeNames(Y,ee),!!(super.optimizeNames(Y,ee)||this.else))return this.condition=H(this.condition,Y,ee),this}get names(){const Y=super.names;return F(Y,this.condition),this.else&&U(Y,this.else.names),Y}}v.kind="if";class b extends p{}b.kind="for";class w extends b{constructor(Y){super(),this.iteration=Y}render(Y){return`for(${this.iteration})`+super.render(Y)}optimizeNames(Y,ee){if(super.optimizeNames(Y,ee))return this.iteration=H(this.iteration,Y,ee),this}get names(){return U(super.names,this.iteration.names)}}class E extends b{constructor(Y,ee,ae,_e){super(),this.varKind=Y,this.name=ee,this.from=ae,this.to=_e}render(Y){const ee=Y.es5?n.varKinds.var:this.varKind,{name:ae,from:_e,to:pe}=this;return`for(${ee} ${ae}=${_e}; ${ae}<${pe}; ${ae}++)`+super.render(Y)}get names(){const Y=F(super.names,this.from);return F(Y,this.to)}}class T extends b{constructor(Y,ee,ae,_e){super(),this.loop=Y,this.varKind=ee,this.name=ae,this.iterable=_e}render(Y){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(Y)}optimizeNames(Y,ee){if(super.optimizeNames(Y,ee))return this.iterable=H(this.iterable,Y,ee),this}get names(){return U(super.names,this.iterable.names)}}class A extends p{constructor(Y,ee,ae){super(),this.name=Y,this.args=ee,this.async=ae}render(Y){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(Y)}}A.kind="func";class I extends h{render(Y){return"return "+super.render(Y)}}I.kind="return";class R extends p{render(Y){let ee="try"+super.render(Y);return this.catch&&(ee+=this.catch.render(Y)),this.finally&&(ee+=this.finally.render(Y)),ee}optimizeNodes(){var Y,ee;return super.optimizeNodes(),(Y=this.catch)===null||Y===void 0||Y.optimizeNodes(),(ee=this.finally)===null||ee===void 0||ee.optimizeNodes(),this}optimizeNames(Y,ee){var ae,_e;return super.optimizeNames(Y,ee),(ae=this.catch)===null||ae===void 0||ae.optimizeNames(Y,ee),(_e=this.finally)===null||_e===void 0||_e.optimizeNames(Y,ee),this}get names(){const Y=super.names;return this.catch&&U(Y,this.catch.names),this.finally&&U(Y,this.finally.names),Y}}class D extends p{constructor(Y){super(),this.error=Y}render(Y){return`catch(${this.error})`+super.render(Y)}}D.kind="catch";class M extends p{render(Y){return"finally"+super.render(Y)}}M.kind="finally";class ${constructor(Y,ee={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...ee,_n:ee.lines?`
`:""},this._extScope=Y,this._scope=new n.Scope({parent:Y}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(Y){return this._scope.name(Y)}scopeName(Y){return this._extScope.name(Y)}scopeValue(Y,ee){const ae=this._extScope.value(Y,ee);return(this._values[ae.prefix]||(this._values[ae.prefix]=new Set)).add(ae),ae}getScopeValue(Y,ee){return this._extScope.getValue(Y,ee)}scopeRefs(Y){return this._extScope.scopeRefs(Y,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(Y,ee,ae,_e){const pe=this._scope.toName(ee);return ae!==void 0&&_e&&(this._constants[pe.str]=ae),this._leafNode(new o(Y,pe,ae)),pe}const(Y,ee,ae){return this._def(n.varKinds.const,Y,ee,ae)}let(Y,ee,ae){return this._def(n.varKinds.let,Y,ee,ae)}var(Y,ee,ae){return this._def(n.varKinds.var,Y,ee,ae)}assign(Y,ee,ae){return this._leafNode(new a(Y,ee,ae))}add(Y,ee){return this._leafNode(new u(Y,e.operators.ADD,ee))}code(Y){return typeof Y=="function"?Y():Y!==t.nil&&this._leafNode(new d(Y)),this}object(...Y){const ee=["{"];for(const[ae,_e]of Y)ee.length>1&&ee.push(","),ee.push(ae),(ae!==_e||this.opts.es5)&&(ee.push(":"),(0,t.addCodeArg)(ee,_e));return ee.push("}"),new t._Code(ee)}if(Y,ee,ae){if(this._blockNode(new v(Y)),ee&&ae)this.code(ee).else().code(ae).endIf();else if(ee)this.code(ee).endIf();else if(ae)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(Y){return this._elseNode(new v(Y))}else(){return this._elseNode(new y)}endIf(){return this._endBlockNode(v,y)}_for(Y,ee){return this._blockNode(Y),ee&&this.code(ee).endFor(),this}for(Y,ee){return this._for(new w(Y),ee)}forRange(Y,ee,ae,_e,pe=this.opts.es5?n.varKinds.var:n.varKinds.let){const Te=this._scope.toName(Y);return this._for(new E(pe,Te,ee,ae),()=>_e(Te))}forOf(Y,ee,ae,_e=n.varKinds.const){const pe=this._scope.toName(Y);if(this.opts.es5){const Te=ee instanceof t.Name?ee:this.var("_arr",ee);return this.forRange("_i",0,(0,t._)`${Te}.length`,Le=>{this.var(pe,(0,t._)`${Te}[${Le}]`),ae(pe)})}return this._for(new T("of",_e,pe,ee),()=>ae(pe))}forIn(Y,ee,ae,_e=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(Y,(0,t._)`Object.keys(${ee})`,ae);const pe=this._scope.toName(Y);return this._for(new T("in",_e,pe,ee),()=>ae(pe))}endFor(){return this._endBlockNode(b)}label(Y){return this._leafNode(new l(Y))}break(Y){return this._leafNode(new c(Y))}return(Y){const ee=new I;if(this._blockNode(ee),this.code(Y),ee.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(I)}try(Y,ee,ae){if(!ee&&!ae)throw new Error('CodeGen: "try" without "catch" and "finally"');const _e=new R;if(this._blockNode(_e),this.code(Y),ee){const pe=this.name("e");this._currNode=_e.catch=new D(pe),ee(pe)}return ae&&(this._currNode=_e.finally=new M,this.code(ae)),this._endBlockNode(D,M)}throw(Y){return this._leafNode(new f(Y))}block(Y,ee){return this._blockStarts.push(this._nodes.length),Y&&this.code(Y).endBlock(ee),this}endBlock(Y){const ee=this._blockStarts.pop();if(ee===void 0)throw new Error("CodeGen: not in self-balancing block");const ae=this._nodes.length-ee;if(ae<0||Y!==void 0&&ae!==Y)throw new Error(`CodeGen: wrong number of nodes: ${ae} vs ${Y} expected`);return this._nodes.length=ee,this}func(Y,ee=t.nil,ae,_e){return this._blockNode(new A(Y,ee,ae)),_e&&this.code(_e).endFunc(),this}endFunc(){return this._endBlockNode(A)}optimize(Y=1){for(;Y-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(Y){return this._currNode.nodes.push(Y),this}_blockNode(Y){this._currNode.nodes.push(Y),this._nodes.push(Y)}_endBlockNode(Y,ee){const ae=this._currNode;if(ae instanceof Y||ee&&ae instanceof ee)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${ee?`${Y.kind}/${ee.kind}`:Y.kind}"`)}_elseNode(Y){const ee=this._currNode;if(!(ee instanceof v))throw new Error('CodeGen: "else" without "if"');return this._currNode=ee.else=Y,this}get _root(){return this._nodes[0]}get _currNode(){const Y=this._nodes;return Y[Y.length-1]}set _currNode(Y){const ee=this._nodes;ee[ee.length-1]=Y}}e.CodeGen=$;function U(V,Y){for(const ee in Y)V[ee]=(V[ee]||0)+(Y[ee]||0);return V}function F(V,Y){return Y instanceof t._CodeOrName?U(V,Y.names):V}function H(V,Y,ee){if(V instanceof t.Name)return ae(V);if(!_e(V))return V;return new t._Code(V._items.reduce((pe,Te)=>(Te instanceof t.Name&&(Te=ae(Te)),Te instanceof t._Code?pe.push(...Te._items):pe.push(Te),pe),[]));function ae(pe){const Te=ee[pe.str];return Te===void 0||Y[pe.str]!==1?pe:(delete Y[pe.str],Te)}function _e(pe){return pe instanceof t._Code&&pe._items.some(Te=>Te instanceof t.Name&&Y[Te.str]===1&&ee[Te.str]!==void 0)}}function Q(V,Y){for(const ee in Y)V[ee]=(V[ee]||0)-(Y[ee]||0)}function J(V){return typeof V=="boolean"||typeof V=="number"||V===null?!V:(0,t._)`!${G(V)}`}e.not=J;const ne=j(e.operators.AND);function Z(...V){return V.reduce(ne)}e.and=Z;const ie=j(e.operators.OR);function q(...V){return V.reduce(ie)}e.or=q;function j(V){return(Y,ee)=>Y===t.nil?ee:ee===t.nil?Y:(0,t._)`${G(Y)} ${V} ${G(ee)}`}function G(V){return V instanceof t.Name?V:(0,t._)`(${V})`}}(Cq)),Cq}var _r={},xbe;function xi(){if(xbe)return _r;xbe=1,Object.defineProperty(_r,"__esModule",{value:!0}),_r.checkStrictMode=_r.getErrorPath=_r.Type=_r.useFunc=_r.setEvaluated=_r.evaluatedPropsToName=_r.mergeEvaluated=_r.eachItem=_r.unescapeJsonPointer=_r.escapeJsonPointer=_r.escapeFragment=_r.unescapeFragment=_r.schemaRefOrVal=_r.schemaHasRulesButRef=_r.schemaHasRules=_r.checkUnknownRules=_r.alwaysValidSchema=_r.toHash=void 0;const e=Dr(),t=M8();function n(T){const A={};for(const I of T)A[I]=!0;return A}_r.toHash=n;function r(T,A){return typeof A=="boolean"?A:Object.keys(A).length===0?!0:(i(T,A),!s(A,T.self.RULES.all))}_r.alwaysValidSchema=r;function i(T,A=T.schema){const{opts:I,self:R}=T;if(!I.strictSchema||typeof A=="boolean")return;const D=R.RULES.keywords;for(const M in A)D[M]||E(T,`unknown keyword: "${M}"`)}_r.checkUnknownRules=i;function s(T,A){if(typeof T=="boolean")return!T;for(const I in T)if(A[I])return!0;return!1}_r.schemaHasRules=s;function o(T,A){if(typeof T=="boolean")return!T;for(const I in T)if(I!=="$ref"&&A.all[I])return!0;return!1}_r.schemaHasRulesButRef=o;function a({topSchemaRef:T,schemaPath:A},I,R,D){if(!D){if(typeof I=="number"||typeof I=="boolean")return I;if(typeof I=="string")return(0,e._)`${I}`}return(0,e._)`${T}${A}${(0,e.getProperty)(R)}`}_r.schemaRefOrVal=a;function u(T){return f(decodeURIComponent(T))}_r.unescapeFragment=u;function l(T){return encodeURIComponent(c(T))}_r.escapeFragment=l;function c(T){return typeof T=="number"?`${T}`:T.replace(/~/g,"~0").replace(/\//g,"~1")}_r.escapeJsonPointer=c;function f(T){return T.replace(/~1/g,"/").replace(/~0/g,"~")}_r.unescapeJsonPointer=f;function d(T,A){if(Array.isArray(T))for(const I of T)A(I);else A(T)}_r.eachItem=d;function h({mergeNames:T,mergeToName:A,mergeValues:I,resultToName:R}){return(D,M,$,U)=>{const F=$===void 0?M:$ instanceof e.Name?(M instanceof e.Name?T(D,M,$):A(D,M,$),$):M instanceof e.Name?(A(D,$,M),M):I(M,$);return U===e.Name&&!(F instanceof e.Name)?R(D,F):F}}_r.mergeEvaluated={props:h({mergeNames:(T,A,I)=>T.if((0,e._)`${I} !== true && ${A} !== undefined`,()=>{T.if((0,e._)`${A} === true`,()=>T.assign(I,!0),()=>T.assign(I,(0,e._)`${I} || {}`).code((0,e._)`Object.assign(${I}, ${A})`))}),mergeToName:(T,A,I)=>T.if((0,e._)`${I} !== true`,()=>{A===!0?T.assign(I,!0):(T.assign(I,(0,e._)`${I} || {}`),m(T,I,A))}),mergeValues:(T,A)=>T===!0?!0:{...T,...A},resultToName:p}),items:h({mergeNames:(T,A,I)=>T.if((0,e._)`${I} !== true && ${A} !== undefined`,()=>T.assign(I,(0,e._)`${A} === true ? true : ${I} > ${A} ? ${I} : ${A}`)),mergeToName:(T,A,I)=>T.if((0,e._)`${I} !== true`,()=>T.assign(I,A===!0?!0:(0,e._)`${I} > ${A} ? ${I} : ${A}`)),mergeValues:(T,A)=>T===!0?!0:Math.max(T,A),resultToName:(T,A)=>T.var("items",A)})};function p(T,A){if(A===!0)return T.var("props",!0);const I=T.var("props",(0,e._)`{}`);return A!==void 0&&m(T,I,A),I}_r.evaluatedPropsToName=p;function m(T,A,I){Object.keys(I).forEach(R=>T.assign((0,e._)`${A}${(0,e.getProperty)(R)}`,!0))}_r.setEvaluated=m;const y={};function v(T,A){return T.scopeValue("func",{ref:A,code:y[A.code]||(y[A.code]=new t._Code(A.code))})}_r.useFunc=v;var b;(function(T){T[T.Num=0]="Num",T[T.Str=1]="Str"})(b||(_r.Type=b={}));function w(T,A,I){if(T instanceof e.Name){const R=A===b.Num;return I?R?(0,e._)`"[" + ${T} + "]"`:(0,e._)`"['" + ${T} + "']"`:R?(0,e._)`"/" + ${T}`:(0,e._)`"/" + ${T}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return I?(0,e.getProperty)(T).toString():"/"+c(T)}_r.getErrorPath=w;function E(T,A,I=T.opts.strictSchema){if(I){if(A=`strict mode: ${A}`,I===!0)throw new Error(A);T.self.logger.warn(A)}}return _r.checkStrictMode=E,_r}var Z6={},_be;function Bx(){if(_be)return Z6;_be=1,Object.defineProperty(Z6,"__esModule",{value:!0});const e=Dr(),t={data:new e.Name("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};return Z6.default=t,Z6}var wbe;function V7(){return wbe||(wbe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Dr(),n=xi(),r=Bx();e.keywordError={message:({keyword:y})=>(0,t.str)`must pass "${y}" keyword validation`},e.keyword$DataError={message:({keyword:y,schemaType:v})=>v?(0,t.str)`"${y}" keyword must be ${v} ($data)`:(0,t.str)`"${y}" keyword is invalid ($data)`};function i(y,v=e.keywordError,b,w){const{it:E}=y,{gen:T,compositeRule:A,allErrors:I}=E,R=f(y,v,b);w??(A||I)?u(T,R):l(E,(0,t._)`[${R}]`)}e.reportError=i;function s(y,v=e.keywordError,b){const{it:w}=y,{gen:E,compositeRule:T,allErrors:A}=w,I=f(y,v,b);u(E,I),T||A||l(w,r.default.vErrors)}e.reportExtraError=s;function o(y,v){y.assign(r.default.errors,v),y.if((0,t._)`${r.default.vErrors} !== null`,()=>y.if(v,()=>y.assign((0,t._)`${r.default.vErrors}.length`,v),()=>y.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:y,keyword:v,schemaValue:b,data:w,errsCount:E,it:T}){if(E===void 0)throw new Error("ajv implementation error");const A=y.name("err");y.forRange("i",E,r.default.errors,I=>{y.const(A,(0,t._)`${r.default.vErrors}[${I}]`),y.if((0,t._)`${A}.instancePath === undefined`,()=>y.assign((0,t._)`${A}.instancePath`,(0,t.strConcat)(r.default.instancePath,T.errorPath))),y.assign((0,t._)`${A}.schemaPath`,(0,t.str)`${T.errSchemaPath}/${v}`),T.opts.verbose&&(y.assign((0,t._)`${A}.schema`,b),y.assign((0,t._)`${A}.data`,w))})}e.extendErrors=a;function u(y,v){const b=y.const("err",v);y.if((0,t._)`${r.default.vErrors} === null`,()=>y.assign(r.default.vErrors,(0,t._)`[${b}]`),(0,t._)`${r.default.vErrors}.push(${b})`),y.code((0,t._)`${r.default.errors}++`)}function l(y,v){const{gen:b,validateName:w,schemaEnv:E}=y;E.$async?b.throw((0,t._)`new ${y.ValidationError}(${v})`):(b.assign((0,t._)`${w}.errors`,v),b.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(y,v,b){const{createErrors:w}=y.it;return w===!1?(0,t._)`{}`:d(y,v,b)}function d(y,v,b={}){const{gen:w,it:E}=y,T=[h(E,b),p(y,b)];return m(y,v,T),w.object(...T)}function h({errorPath:y},{instancePath:v}){const b=v?(0,t.str)`${y}${(0,n.getErrorPath)(v,n.Type.Str)}`:y;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,b)]}function p({keyword:y,it:{errSchemaPath:v}},{schemaPath:b,parentSchema:w}){let E=w?v:(0,t.str)`${v}/${y}`;return b&&(E=(0,t.str)`${E}${(0,n.getErrorPath)(b,n.Type.Str)}`),[c.schemaPath,E]}function m(y,{params:v,message:b},w){const{keyword:E,data:T,schemaValue:A,it:I}=y,{opts:R,propertyName:D,topSchemaRef:M,schemaPath:$}=I;w.push([c.keyword,E],[c.params,typeof v=="function"?v(y):v||(0,t._)`{}`]),R.messages&&w.push([c.message,typeof b=="function"?b(y):b]),R.verbose&&w.push([c.schema,A],[c.parentSchema,(0,t._)`${M}${$}`],[r.default.data,T]),D&&w.push([c.propertyName,D])}}(Sq)),Sq}var Ebe;function wsn(){if(Ebe)return $_;Ebe=1,Object.defineProperty($_,"__esModule",{value:!0}),$_.boolOrEmptySchema=$_.topBoolOrEmptySchema=void 0;const e=V7(),t=Dr(),n=Bx(),r={message:"boolean schema is false"};function i(a){const{gen:u,schema:l,validateName:c}=a;l===!1?o(a,!1):typeof l=="object"&&l.$async===!0?u.return(n.default.data):(u.assign((0,t._)`${c}.errors`,null),u.return(!0))}$_.topBoolOrEmptySchema=i;function s(a,u){const{gen:l,schema:c}=a;c===!1?(l.var(u,!1),o(a)):l.var(u,!0)}$_.boolOrEmptySchema=s;function o(a,u){const{gen:l,data:c}=a,f={gen:l,keyword:"false schema",data:c,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:a};(0,e.reportError)(f,r,void 0,u)}return $_}var ru={},F_={},Tbe;function i9e(){if(Tbe)return F_;Tbe=1,Object.defineProperty(F_,"__esModule",{value:!0}),F_.getRules=F_.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],t=new Set(e);function n(i){return typeof i=="string"&&t.has(i)}F_.isJSONType=n;function r(){const i={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...i,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},i.number,i.string,i.array,i.object],post:{rules:[]},all:{},keywords:{}}}return F_.getRules=r,F_}var ny={},Sbe;function s9e(){if(Sbe)return ny;Sbe=1,Object.defineProperty(ny,"__esModule",{value:!0}),ny.shouldUseRule=ny.shouldUseGroup=ny.schemaHasRulesForType=void 0;function e({schema:r,self:i},s){const o=i.RULES.types[s];return o&&o!==!0&&t(r,o)}ny.schemaHasRulesForType=e;function t(r,i){return i.rules.some(s=>n(r,s))}ny.shouldUseGroup=t;function n(r,i){var s;return r[i.keyword]!==void 0||((s=i.definition.implements)===null||s===void 0?void 0:s.some(o=>r[o]!==void 0))}return ny.shouldUseRule=n,ny}var Cbe;function L8(){if(Cbe)return ru;Cbe=1,Object.defineProperty(ru,"__esModule",{value:!0}),ru.reportTypeError=ru.checkDataTypes=ru.checkDataType=ru.coerceAndCheckDataType=ru.getJSONTypes=ru.getSchemaTypes=ru.DataType=void 0;const e=i9e(),t=s9e(),n=V7(),r=Dr(),i=xi();var s;(function(b){b[b.Correct=0]="Correct",b[b.Wrong=1]="Wrong"})(s||(ru.DataType=s={}));function o(b){const w=a(b.type);if(w.includes("null")){if(b.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!w.length&&b.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');b.nullable===!0&&w.push("null")}return w}ru.getSchemaTypes=o;function a(b){const w=Array.isArray(b)?b:b?[b]:[];if(w.every(e.isJSONType))return w;throw new Error("type must be JSONType or JSONType[]: "+w.join(","))}ru.getJSONTypes=a;function u(b,w){const{gen:E,data:T,opts:A}=b,I=c(w,A.coerceTypes),R=w.length>0&&!(I.length===0&&w.length===1&&(0,t.schemaHasRulesForType)(b,w[0]));if(R){const D=p(w,T,A.strictNumbers,s.Wrong);E.if(D,()=>{I.length?f(b,w,I):y(b)})}return R}ru.coerceAndCheckDataType=u;const l=new Set(["string","number","integer","boolean","null"]);function c(b,w){return w?b.filter(E=>l.has(E)||w==="array"&&E==="array"):[]}function f(b,w,E){const{gen:T,data:A,opts:I}=b,R=T.let("dataType",(0,r._)`typeof ${A}`),D=T.let("coerced",(0,r._)`undefined`);I.coerceTypes==="array"&&T.if((0,r._)`${R} == 'object' && Array.isArray(${A}) && ${A}.length == 1`,()=>T.assign(A,(0,r._)`${A}[0]`).assign(R,(0,r._)`typeof ${A}`).if(p(w,A,I.strictNumbers),()=>T.assign(D,A))),T.if((0,r._)`${D} !== undefined`);for(const $ of E)(l.has($)||$==="array"&&I.coerceTypes==="array")&&M($);T.else(),y(b),T.endIf(),T.if((0,r._)`${D} !== undefined`,()=>{T.assign(A,D),d(b,D)});function M($){switch($){case"string":T.elseIf((0,r._)`${R} == "number" || ${R} == "boolean"`).assign(D,(0,r._)`"" + ${A}`).elseIf((0,r._)`${A} === null`).assign(D,(0,r._)`""`);return;case"number":T.elseIf((0,r._)`${R} == "boolean" || ${A} === null
              || (${R} == "string" && ${A} && ${A} == +${A})`).assign(D,(0,r._)`+${A}`);return;case"integer":T.elseIf((0,r._)`${R} === "boolean" || ${A} === null
              || (${R} === "string" && ${A} && ${A} == +${A} && !(${A} % 1))`).assign(D,(0,r._)`+${A}`);return;case"boolean":T.elseIf((0,r._)`${A} === "false" || ${A} === 0 || ${A} === null`).assign(D,!1).elseIf((0,r._)`${A} === "true" || ${A} === 1`).assign(D,!0);return;case"null":T.elseIf((0,r._)`${A} === "" || ${A} === 0 || ${A} === false`),T.assign(D,null);return;case"array":T.elseIf((0,r._)`${R} === "string" || ${R} === "number"
              || ${R} === "boolean" || ${A} === null`).assign(D,(0,r._)`[${A}]`)}}}function d({gen:b,parentData:w,parentDataProperty:E},T){b.if((0,r._)`${w} !== undefined`,()=>b.assign((0,r._)`${w}[${E}]`,T))}function h(b,w,E,T=s.Correct){const A=T===s.Correct?r.operators.EQ:r.operators.NEQ;let I;switch(b){case"null":return(0,r._)`${w} ${A} null`;case"array":I=(0,r._)`Array.isArray(${w})`;break;case"object":I=(0,r._)`${w} && typeof ${w} == "object" && !Array.isArray(${w})`;break;case"integer":I=R((0,r._)`!(${w} % 1) && !isNaN(${w})`);break;case"number":I=R();break;default:return(0,r._)`typeof ${w} ${A} ${b}`}return T===s.Correct?I:(0,r.not)(I);function R(D=r.nil){return(0,r.and)((0,r._)`typeof ${w} == "number"`,D,E?(0,r._)`isFinite(${w})`:r.nil)}}ru.checkDataType=h;function p(b,w,E,T){if(b.length===1)return h(b[0],w,E,T);let A;const I=(0,i.toHash)(b);if(I.array&&I.object){const R=(0,r._)`typeof ${w} != "object"`;A=I.null?R:(0,r._)`!${w} || ${R}`,delete I.null,delete I.array,delete I.object}else A=r.nil;I.number&&delete I.integer;for(const R in I)A=(0,r.and)(A,h(R,w,E,T));return A}ru.checkDataTypes=p;const m={message:({schema:b})=>`must be ${b}`,params:({schema:b,schemaValue:w})=>typeof b=="string"?(0,r._)`{type: ${b}}`:(0,r._)`{type: ${w}}`};function y(b){const w=v(b);(0,n.reportError)(w,m)}ru.reportTypeError=y;function v(b){const{gen:w,data:E,schema:T}=b,A=(0,i.schemaRefOrVal)(b,T,"type");return{gen:w,keyword:"type",data:E,schema:T.type,schemaCode:A,schemaValue:A,parentSchema:T,params:{},it:b}}return ru}var kR={},Abe;function Esn(){if(Abe)return kR;Abe=1,Object.defineProperty(kR,"__esModule",{value:!0}),kR.assignDefaults=void 0;const e=Dr(),t=xi();function n(i,s){const{properties:o,items:a}=i.schema;if(s==="object"&&o)for(const u in o)r(i,u,o[u].default);else s==="array"&&Array.isArray(a)&&a.forEach((u,l)=>r(i,l,u.default))}kR.assignDefaults=n;function r(i,s,o){const{gen:a,compositeRule:u,data:l,opts:c}=i;if(o===void 0)return;const f=(0,e._)`${l}${(0,e.getProperty)(s)}`;if(u){(0,t.checkStrictMode)(i,`default is ignored for: ${f}`);return}let d=(0,e._)`${f} === undefined`;c.useDefaults==="empty"&&(d=(0,e._)`${d} || ${f} === null || ${f} === ""`),a.if(d,(0,e._)`${f} = ${(0,e.stringify)(o)}`)}return kR}var ep={},Di={},Ibe;function cm(){if(Ibe)return Di;Ibe=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.validateUnion=Di.validateArray=Di.usePattern=Di.callValidateCode=Di.schemaProperties=Di.allSchemaProperties=Di.noPropertyInData=Di.propertyInData=Di.isOwnProperty=Di.hasPropFunc=Di.reportMissingProp=Di.checkMissingProp=Di.checkReportMissingProp=void 0;const e=Dr(),t=xi(),n=Bx(),r=xi();function i(b,w){const{gen:E,data:T,it:A}=b;E.if(c(E,T,w,A.opts.ownProperties),()=>{b.setParams({missingProperty:(0,e._)`${w}`},!0),b.error()})}Di.checkReportMissingProp=i;function s({gen:b,data:w,it:{opts:E}},T,A){return(0,e.or)(...T.map(I=>(0,e.and)(c(b,w,I,E.ownProperties),(0,e._)`${A} = ${I}`)))}Di.checkMissingProp=s;function o(b,w){b.setParams({missingProperty:w},!0),b.error()}Di.reportMissingProp=o;function a(b){return b.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,e._)`Object.prototype.hasOwnProperty`})}Di.hasPropFunc=a;function u(b,w,E){return(0,e._)`${a(b)}.call(${w}, ${E})`}Di.isOwnProperty=u;function l(b,w,E,T){const A=(0,e._)`${w}${(0,e.getProperty)(E)} !== undefined`;return T?(0,e._)`${A} && ${u(b,w,E)}`:A}Di.propertyInData=l;function c(b,w,E,T){const A=(0,e._)`${w}${(0,e.getProperty)(E)} === undefined`;return T?(0,e.or)(A,(0,e.not)(u(b,w,E))):A}Di.noPropertyInData=c;function f(b){return b?Object.keys(b).filter(w=>w!=="__proto__"):[]}Di.allSchemaProperties=f;function d(b,w){return f(w).filter(E=>!(0,t.alwaysValidSchema)(b,w[E]))}Di.schemaProperties=d;function h({schemaCode:b,data:w,it:{gen:E,topSchemaRef:T,schemaPath:A,errorPath:I},it:R},D,M,$){const U=$?(0,e._)`${b}, ${w}, ${T}${A}`:w,F=[[n.default.instancePath,(0,e.strConcat)(n.default.instancePath,I)],[n.default.parentData,R.parentData],[n.default.parentDataProperty,R.parentDataProperty],[n.default.rootData,n.default.rootData]];R.opts.dynamicRef&&F.push([n.default.dynamicAnchors,n.default.dynamicAnchors]);const H=(0,e._)`${U}, ${E.object(...F)}`;return M!==e.nil?(0,e._)`${D}.call(${M}, ${H})`:(0,e._)`${D}(${H})`}Di.callValidateCode=h;const p=(0,e._)`new RegExp`;function m({gen:b,it:{opts:w}},E){const T=w.unicodeRegExp?"u":"",{regExp:A}=w.code,I=A(E,T);return b.scopeValue("pattern",{key:I.toString(),ref:I,code:(0,e._)`${A.code==="new RegExp"?p:(0,r.useFunc)(b,A)}(${E}, ${T})`})}Di.usePattern=m;function y(b){const{gen:w,data:E,keyword:T,it:A}=b,I=w.name("valid");if(A.allErrors){const D=w.let("valid",!0);return R(()=>w.assign(D,!1)),D}return w.var(I,!0),R(()=>w.break()),I;function R(D){const M=w.const("len",(0,e._)`${E}.length`);w.forRange("i",0,M,$=>{b.subschema({keyword:T,dataProp:$,dataPropType:t.Type.Num},I),w.if((0,e.not)(I),D)})}}Di.validateArray=y;function v(b){const{gen:w,schema:E,keyword:T,it:A}=b;if(!Array.isArray(E))throw new Error("ajv implementation error");if(E.some(M=>(0,t.alwaysValidSchema)(A,M))&&!A.opts.unevaluated)return;const R=w.let("valid",!1),D=w.name("_valid");w.block(()=>E.forEach((M,$)=>{const U=b.subschema({keyword:T,schemaProp:$,compositeRule:!0},D);w.assign(R,(0,e._)`${R} || ${D}`),b.mergeValidEvaluated(U,D)||w.if((0,e.not)(R))})),b.result(R,()=>b.reset(),()=>b.error(!0))}return Di.validateUnion=v,Di}var kbe;function Tsn(){if(kbe)return ep;kbe=1,Object.defineProperty(ep,"__esModule",{value:!0}),ep.validateKeywordUsage=ep.validSchemaType=ep.funcKeywordCode=ep.macroKeywordCode=void 0;const e=Dr(),t=Bx(),n=cm(),r=V7();function i(d,h){const{gen:p,keyword:m,schema:y,parentSchema:v,it:b}=d,w=h.macro.call(b.self,y,v,b),E=l(p,m,w);b.opts.validateSchema!==!1&&b.self.validateSchema(w,!0);const T=p.name("valid");d.subschema({schema:w,schemaPath:e.nil,errSchemaPath:`${b.errSchemaPath}/${m}`,topSchemaRef:E,compositeRule:!0},T),d.pass(T,()=>d.error(!0))}ep.macroKeywordCode=i;function s(d,h){var p;const{gen:m,keyword:y,schema:v,parentSchema:b,$data:w,it:E}=d;u(E,h);const T=!w&&h.compile?h.compile.call(E.self,v,b,E):h.validate,A=l(m,y,T),I=m.let("valid");d.block$data(I,R),d.ok((p=h.valid)!==null&&p!==void 0?p:I);function R(){if(h.errors===!1)$(),h.modifying&&o(d),U(()=>d.error());else{const F=h.async?D():M();h.modifying&&o(d),U(()=>a(d,F))}}function D(){const F=m.let("ruleErrs",null);return m.try(()=>$((0,e._)`await `),H=>m.assign(I,!1).if((0,e._)`${H} instanceof ${E.ValidationError}`,()=>m.assign(F,(0,e._)`${H}.errors`),()=>m.throw(H))),F}function M(){const F=(0,e._)`${A}.errors`;return m.assign(F,null),$(e.nil),F}function $(F=h.async?(0,e._)`await `:e.nil){const H=E.opts.passContext?t.default.this:t.default.self,Q=!("compile"in h&&!w||h.schema===!1);m.assign(I,(0,e._)`${F}${(0,n.callValidateCode)(d,A,H,Q)}`,h.modifying)}function U(F){var H;m.if((0,e.not)((H=h.valid)!==null&&H!==void 0?H:I),F)}}ep.funcKeywordCode=s;function o(d){const{gen:h,data:p,it:m}=d;h.if(m.parentData,()=>h.assign(p,(0,e._)`${m.parentData}[${m.parentDataProperty}]`))}function a(d,h){const{gen:p}=d;p.if((0,e._)`Array.isArray(${h})`,()=>{p.assign(t.default.vErrors,(0,e._)`${t.default.vErrors} === null ? ${h} : ${t.default.vErrors}.concat(${h})`).assign(t.default.errors,(0,e._)`${t.default.vErrors}.length`),(0,r.extendErrors)(d)},()=>d.error())}function u({schemaEnv:d},h){if(h.async&&!d.$async)throw new Error("async keyword in sync schema")}function l(d,h,p){if(p===void 0)throw new Error(`keyword "${h}" failed to compile`);return d.scopeValue("keyword",typeof p=="function"?{ref:p}:{ref:p,code:(0,e.stringify)(p)})}function c(d,h,p=!1){return!h.length||h.some(m=>m==="array"?Array.isArray(d):m==="object"?d&&typeof d=="object"&&!Array.isArray(d):typeof d==m||p&&typeof d>"u")}ep.validSchemaType=c;function f({schema:d,opts:h,self:p,errSchemaPath:m},y,v){if(Array.isArray(y.keyword)?!y.keyword.includes(v):y.keyword!==v)throw new Error("ajv implementation error");const b=y.dependencies;if(b!=null&&b.some(w=>!Object.prototype.hasOwnProperty.call(d,w)))throw new Error(`parent schema must have dependencies of ${v}: ${b.join(",")}`);if(y.validateSchema&&!y.validateSchema(d[v])){const E=`keyword "${v}" value is invalid at path "${m}": `+p.errorsText(y.validateSchema.errors);if(h.validateSchema==="log")p.logger.error(E);else throw new Error(E)}}return ep.validateKeywordUsage=f,ep}var ry={},Rbe;function Ssn(){if(Rbe)return ry;Rbe=1,Object.defineProperty(ry,"__esModule",{value:!0}),ry.extendSubschemaMode=ry.extendSubschemaData=ry.getSubschema=void 0;const e=Dr(),t=xi();function n(s,{keyword:o,schemaProp:a,schema:u,schemaPath:l,errSchemaPath:c,topSchemaRef:f}){if(o!==void 0&&u!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(o!==void 0){const d=s.schema[o];return a===void 0?{schema:d,schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(o)}`,errSchemaPath:`${s.errSchemaPath}/${o}`}:{schema:d[a],schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(o)}${(0,e.getProperty)(a)}`,errSchemaPath:`${s.errSchemaPath}/${o}/${(0,t.escapeFragment)(a)}`}}if(u!==void 0){if(l===void 0||c===void 0||f===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:u,schemaPath:l,topSchemaRef:f,errSchemaPath:c}}throw new Error('either "keyword" or "schema" must be passed')}ry.getSubschema=n;function r(s,o,{dataProp:a,dataPropType:u,data:l,dataTypes:c,propertyName:f}){if(l!==void 0&&a!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:d}=o;if(a!==void 0){const{errorPath:p,dataPathArr:m,opts:y}=o,v=d.let("data",(0,e._)`${o.data}${(0,e.getProperty)(a)}`,!0);h(v),s.errorPath=(0,e.str)`${p}${(0,t.getErrorPath)(a,u,y.jsPropertySyntax)}`,s.parentDataProperty=(0,e._)`${a}`,s.dataPathArr=[...m,s.parentDataProperty]}if(l!==void 0){const p=l instanceof e.Name?l:d.let("data",l,!0);h(p),f!==void 0&&(s.propertyName=f)}c&&(s.dataTypes=c);function h(p){s.data=p,s.dataLevel=o.dataLevel+1,s.dataTypes=[],o.definedProperties=new Set,s.parentData=o.data,s.dataNames=[...o.dataNames,p]}}ry.extendSubschemaData=r;function i(s,{jtdDiscriminator:o,jtdMetadata:a,compositeRule:u,createErrors:l,allErrors:c}){u!==void 0&&(s.compositeRule=u),l!==void 0&&(s.createErrors=l),c!==void 0&&(s.allErrors=c),s.jtdDiscriminator=o,s.jtdMetadata=a}return ry.extendSubschemaMode=i,ry}var Nl={},kq={exports:{}},Nbe;function Csn(){if(Nbe)return kq.exports;Nbe=1;var e=kq.exports=function(r,i,s){typeof i=="function"&&(s=i,i={}),s=i.cb||s;var o=typeof s=="function"?s:s.pre||function(){},a=s.post||function(){};t(i,o,a,r,"",r)};e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function t(r,i,s,o,a,u,l,c,f,d){if(o&&typeof o=="object"&&!Array.isArray(o)){i(o,a,u,l,c,f,d);for(var h in o){var p=o[h];if(Array.isArray(p)){if(h in e.arrayKeywords)for(var m=0;m<p.length;m++)t(r,i,s,p[m],a+"/"+h+"/"+m,u,a,h,o,m)}else if(h in e.propsKeywords){if(p&&typeof p=="object")for(var y in p)t(r,i,s,p[y],a+"/"+h+"/"+n(y),u,a,h,o,y)}else(h in e.keywords||r.allKeys&&!(h in e.skipKeywords))&&t(r,i,s,p,a+"/"+h,u,a,h,o)}s(o,a,u,l,c,f,d)}}function n(r){return r.replace(/~/g,"~0").replace(/\//g,"~1")}return kq.exports}var Dbe;function H7(){if(Dbe)return Nl;Dbe=1,Object.defineProperty(Nl,"__esModule",{value:!0}),Nl.getSchemaRefs=Nl.resolveUrl=Nl.normalizeId=Nl._getFullPath=Nl.getFullPath=Nl.inlineRef=void 0;const e=xi(),t=xee(),n=Csn(),r=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function i(m,y=!0){return typeof m=="boolean"?!0:y===!0?!o(m):y?a(m)<=y:!1}Nl.inlineRef=i;const s=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function o(m){for(const y in m){if(s.has(y))return!0;const v=m[y];if(Array.isArray(v)&&v.some(o)||typeof v=="object"&&o(v))return!0}return!1}function a(m){let y=0;for(const v in m){if(v==="$ref")return 1/0;if(y++,!r.has(v)&&(typeof m[v]=="object"&&(0,e.eachItem)(m[v],b=>y+=a(b)),y===1/0))return 1/0}return y}function u(m,y="",v){v!==!1&&(y=f(y));const b=m.parse(y);return l(m,b)}Nl.getFullPath=u;function l(m,y){return m.serialize(y).split("#")[0]+"#"}Nl._getFullPath=l;const c=/#\/?$/;function f(m){return m?m.replace(c,""):""}Nl.normalizeId=f;function d(m,y,v){return v=f(v),m.resolve(y,v)}Nl.resolveUrl=d;const h=/^[a-z_][-a-z0-9._]*$/i;function p(m,y){if(typeof m=="boolean")return{};const{schemaId:v,uriResolver:b}=this.opts,w=f(m[v]||y),E={"":w},T=u(b,w,!1),A={},I=new Set;return n(m,{allKeys:!0},(M,$,U,F)=>{if(F===void 0)return;const H=T+$;let Q=E[F];typeof M[v]=="string"&&(Q=J.call(this,M[v])),ne.call(this,M.$anchor),ne.call(this,M.$dynamicAnchor),E[$]=Q;function J(Z){const ie=this.opts.uriResolver.resolve;if(Z=f(Q?ie(Q,Z):Z),I.has(Z))throw D(Z);I.add(Z);let q=this.refs[Z];return typeof q=="string"&&(q=this.refs[q]),typeof q=="object"?R(M,q.schema,Z):Z!==f(H)&&(Z[0]==="#"?(R(M,A[Z],Z),A[Z]=M):this.refs[Z]=H),Z}function ne(Z){if(typeof Z=="string"){if(!h.test(Z))throw new Error(`invalid anchor "${Z}"`);J.call(this,`#${Z}`)}}}),A;function R(M,$,U){if($!==void 0&&!t(M,$))throw D(U)}function D(M){return new Error(`reference "${M}" resolves to more than one schema`)}}return Nl.getSchemaRefs=p,Nl}var Pbe;function q7(){if(Pbe)return ty;Pbe=1,Object.defineProperty(ty,"__esModule",{value:!0}),ty.getData=ty.KeywordCxt=ty.validateFunctionCode=void 0;const e=wsn(),t=L8(),n=s9e(),r=L8(),i=Esn(),s=Tsn(),o=Ssn(),a=Dr(),u=Bx(),l=H7(),c=xi(),f=V7();function d(ye){if(T(ye)&&(I(ye),E(ye))){y(ye);return}h(ye,()=>(0,e.topBoolOrEmptySchema)(ye))}ty.validateFunctionCode=d;function h({gen:ye,validateName:he,schema:$e,schemaEnv:Ne,opts:tt},it){tt.code.es5?ye.func(he,(0,a._)`${u.default.data}, ${u.default.valCxt}`,Ne.$async,()=>{ye.code((0,a._)`"use strict"; ${b($e,tt)}`),m(ye,tt),ye.code(it)}):ye.func(he,(0,a._)`${u.default.data}, ${p(tt)}`,Ne.$async,()=>ye.code(b($e,tt)).code(it))}function p(ye){return(0,a._)`{${u.default.instancePath}="", ${u.default.parentData}, ${u.default.parentDataProperty}, ${u.default.rootData}=${u.default.data}${ye.dynamicRef?(0,a._)`, ${u.default.dynamicAnchors}={}`:a.nil}}={}`}function m(ye,he){ye.if(u.default.valCxt,()=>{ye.var(u.default.instancePath,(0,a._)`${u.default.valCxt}.${u.default.instancePath}`),ye.var(u.default.parentData,(0,a._)`${u.default.valCxt}.${u.default.parentData}`),ye.var(u.default.parentDataProperty,(0,a._)`${u.default.valCxt}.${u.default.parentDataProperty}`),ye.var(u.default.rootData,(0,a._)`${u.default.valCxt}.${u.default.rootData}`),he.dynamicRef&&ye.var(u.default.dynamicAnchors,(0,a._)`${u.default.valCxt}.${u.default.dynamicAnchors}`)},()=>{ye.var(u.default.instancePath,(0,a._)`""`),ye.var(u.default.parentData,(0,a._)`undefined`),ye.var(u.default.parentDataProperty,(0,a._)`undefined`),ye.var(u.default.rootData,u.default.data),he.dynamicRef&&ye.var(u.default.dynamicAnchors,(0,a._)`{}`)})}function y(ye){const{schema:he,opts:$e,gen:Ne}=ye;h(ye,()=>{$e.$comment&&he.$comment&&F(ye),M(ye),Ne.let(u.default.vErrors,null),Ne.let(u.default.errors,0),$e.unevaluated&&v(ye),R(ye),H(ye)})}function v(ye){const{gen:he,validateName:$e}=ye;ye.evaluated=he.const("evaluated",(0,a._)`${$e}.evaluated`),he.if((0,a._)`${ye.evaluated}.dynamicProps`,()=>he.assign((0,a._)`${ye.evaluated}.props`,(0,a._)`undefined`)),he.if((0,a._)`${ye.evaluated}.dynamicItems`,()=>he.assign((0,a._)`${ye.evaluated}.items`,(0,a._)`undefined`))}function b(ye,he){const $e=typeof ye=="object"&&ye[he.schemaId];return $e&&(he.code.source||he.code.process)?(0,a._)`/*# sourceURL=${$e} */`:a.nil}function w(ye,he){if(T(ye)&&(I(ye),E(ye))){A(ye,he);return}(0,e.boolOrEmptySchema)(ye,he)}function E({schema:ye,self:he}){if(typeof ye=="boolean")return!ye;for(const $e in ye)if(he.RULES.all[$e])return!0;return!1}function T(ye){return typeof ye.schema!="boolean"}function A(ye,he){const{schema:$e,gen:Ne,opts:tt}=ye;tt.$comment&&$e.$comment&&F(ye),$(ye),U(ye);const it=Ne.const("_errs",u.default.errors);R(ye,it),Ne.var(he,(0,a._)`${it} === ${u.default.errors}`)}function I(ye){(0,c.checkUnknownRules)(ye),D(ye)}function R(ye,he){if(ye.opts.jtd)return J(ye,[],!1,he);const $e=(0,t.getSchemaTypes)(ye.schema),Ne=(0,t.coerceAndCheckDataType)(ye,$e);J(ye,$e,!Ne,he)}function D(ye){const{schema:he,errSchemaPath:$e,opts:Ne,self:tt}=ye;he.$ref&&Ne.ignoreKeywordsWithRef&&(0,c.schemaHasRulesButRef)(he,tt.RULES)&&tt.logger.warn(`$ref: keywords ignored in schema at path "${$e}"`)}function M(ye){const{schema:he,opts:$e}=ye;he.default!==void 0&&$e.useDefaults&&$e.strictSchema&&(0,c.checkStrictMode)(ye,"default is ignored in the schema root")}function $(ye){const he=ye.schema[ye.opts.schemaId];he&&(ye.baseId=(0,l.resolveUrl)(ye.opts.uriResolver,ye.baseId,he))}function U(ye){if(ye.schema.$async&&!ye.schemaEnv.$async)throw new Error("async schema in sync schema")}function F({gen:ye,schemaEnv:he,schema:$e,errSchemaPath:Ne,opts:tt}){const it=$e.$comment;if(tt.$comment===!0)ye.code((0,a._)`${u.default.self}.logger.log(${it})`);else if(typeof tt.$comment=="function"){const Me=(0,a.str)`${Ne}/$comment`,Ge=ye.scopeValue("root",{ref:he.root});ye.code((0,a._)`${u.default.self}.opts.$comment(${it}, ${Me}, ${Ge}.schema)`)}}function H(ye){const{gen:he,schemaEnv:$e,validateName:Ne,ValidationError:tt,opts:it}=ye;$e.$async?he.if((0,a._)`${u.default.errors} === 0`,()=>he.return(u.default.data),()=>he.throw((0,a._)`new ${tt}(${u.default.vErrors})`)):(he.assign((0,a._)`${Ne}.errors`,u.default.vErrors),it.unevaluated&&Q(ye),he.return((0,a._)`${u.default.errors} === 0`))}function Q({gen:ye,evaluated:he,props:$e,items:Ne}){$e instanceof a.Name&&ye.assign((0,a._)`${he}.props`,$e),Ne instanceof a.Name&&ye.assign((0,a._)`${he}.items`,Ne)}function J(ye,he,$e,Ne){const{gen:tt,schema:it,data:Me,allErrors:Ge,opts:at,self:yt}=ye,{RULES:Tt}=yt;if(it.$ref&&(at.ignoreKeywordsWithRef||!(0,c.schemaHasRulesButRef)(it,Tt))){tt.block(()=>_e(ye,"$ref",Tt.all.$ref.definition));return}at.jtd||Z(ye,he),tt.block(()=>{for(const qe of Tt.rules)Ot(qe);Ot(Tt.post)});function Ot(qe){(0,n.shouldUseGroup)(it,qe)&&(qe.type?(tt.if((0,r.checkDataType)(qe.type,Me,at.strictNumbers)),ne(ye,qe),he.length===1&&he[0]===qe.type&&$e&&(tt.else(),(0,r.reportTypeError)(ye)),tt.endIf()):ne(ye,qe),Ge||tt.if((0,a._)`${u.default.errors} === ${Ne||0}`))}}function ne(ye,he){const{gen:$e,schema:Ne,opts:{useDefaults:tt}}=ye;tt&&(0,i.assignDefaults)(ye,he.type),$e.block(()=>{for(const it of he.rules)(0,n.shouldUseRule)(Ne,it)&&_e(ye,it.keyword,it.definition,he.type)})}function Z(ye,he){ye.schemaEnv.meta||!ye.opts.strictTypes||(ie(ye,he),ye.opts.allowUnionTypes||q(ye,he),j(ye,ye.dataTypes))}function ie(ye,he){if(he.length){if(!ye.dataTypes.length){ye.dataTypes=he;return}he.forEach($e=>{V(ye.dataTypes,$e)||ee(ye,`type "${$e}" not allowed by context "${ye.dataTypes.join(",")}"`)}),Y(ye,he)}}function q(ye,he){he.length>1&&!(he.length===2&&he.includes("null"))&&ee(ye,"use allowUnionTypes to allow union type keyword")}function j(ye,he){const $e=ye.self.RULES.all;for(const Ne in $e){const tt=$e[Ne];if(typeof tt=="object"&&(0,n.shouldUseRule)(ye.schema,tt)){const{type:it}=tt.definition;it.length&&!it.some(Me=>G(he,Me))&&ee(ye,`missing type "${it.join(",")}" for keyword "${Ne}"`)}}}function G(ye,he){return ye.includes(he)||he==="number"&&ye.includes("integer")}function V(ye,he){return ye.includes(he)||he==="integer"&&ye.includes("number")}function Y(ye,he){const $e=[];for(const Ne of ye.dataTypes)V(he,Ne)?$e.push(Ne):he.includes("integer")&&Ne==="number"&&$e.push("integer");ye.dataTypes=$e}function ee(ye,he){const $e=ye.schemaEnv.baseId+ye.errSchemaPath;he+=` at "${$e}" (strictTypes)`,(0,c.checkStrictMode)(ye,he,ye.opts.strictTypes)}class ae{constructor(he,$e,Ne){if((0,s.validateKeywordUsage)(he,$e,Ne),this.gen=he.gen,this.allErrors=he.allErrors,this.keyword=Ne,this.data=he.data,this.schema=he.schema[Ne],this.$data=$e.$data&&he.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,c.schemaRefOrVal)(he,this.schema,Ne,this.$data),this.schemaType=$e.schemaType,this.parentSchema=he.schema,this.params={},this.it=he,this.def=$e,this.$data)this.schemaCode=he.gen.const("vSchema",Le(this.$data,he));else if(this.schemaCode=this.schemaValue,!(0,s.validSchemaType)(this.schema,$e.schemaType,$e.allowUndefined))throw new Error(`${Ne} value must be ${JSON.stringify($e.schemaType)}`);("code"in $e?$e.trackErrors:$e.errors!==!1)&&(this.errsCount=he.gen.const("_errs",u.default.errors))}result(he,$e,Ne){this.failResult((0,a.not)(he),$e,Ne)}failResult(he,$e,Ne){this.gen.if(he),Ne?Ne():this.error(),$e?(this.gen.else(),$e(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(he,$e){this.failResult((0,a.not)(he),void 0,$e)}fail(he){if(he===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(he),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(he){if(!this.$data)return this.fail(he);const{schemaCode:$e}=this;this.fail((0,a._)`${$e} !== undefined && (${(0,a.or)(this.invalid$data(),he)})`)}error(he,$e,Ne){if($e){this.setParams($e),this._error(he,Ne),this.setParams({});return}this._error(he,Ne)}_error(he,$e){(he?f.reportExtraError:f.reportError)(this,this.def.error,$e)}$dataError(){(0,f.reportError)(this,this.def.$dataError||f.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,f.resetErrorsCount)(this.gen,this.errsCount)}ok(he){this.allErrors||this.gen.if(he)}setParams(he,$e){$e?Object.assign(this.params,he):this.params=he}block$data(he,$e,Ne=a.nil){this.gen.block(()=>{this.check$data(he,Ne),$e()})}check$data(he=a.nil,$e=a.nil){if(!this.$data)return;const{gen:Ne,schemaCode:tt,schemaType:it,def:Me}=this;Ne.if((0,a.or)((0,a._)`${tt} === undefined`,$e)),he!==a.nil&&Ne.assign(he,!0),(it.length||Me.validateSchema)&&(Ne.elseIf(this.invalid$data()),this.$dataError(),he!==a.nil&&Ne.assign(he,!1)),Ne.else()}invalid$data(){const{gen:he,schemaCode:$e,schemaType:Ne,def:tt,it}=this;return(0,a.or)(Me(),Ge());function Me(){if(Ne.length){if(!($e instanceof a.Name))throw new Error("ajv implementation error");const at=Array.isArray(Ne)?Ne:[Ne];return(0,a._)`${(0,r.checkDataTypes)(at,$e,it.opts.strictNumbers,r.DataType.Wrong)}`}return a.nil}function Ge(){if(tt.validateSchema){const at=he.scopeValue("validate$data",{ref:tt.validateSchema});return(0,a._)`!${at}(${$e})`}return a.nil}}subschema(he,$e){const Ne=(0,o.getSubschema)(this.it,he);(0,o.extendSubschemaData)(Ne,this.it,he),(0,o.extendSubschemaMode)(Ne,he);const tt={...this.it,...Ne,items:void 0,props:void 0};return w(tt,$e),tt}mergeEvaluated(he,$e){const{it:Ne,gen:tt}=this;Ne.opts.unevaluated&&(Ne.props!==!0&&he.props!==void 0&&(Ne.props=c.mergeEvaluated.props(tt,he.props,Ne.props,$e)),Ne.items!==!0&&he.items!==void 0&&(Ne.items=c.mergeEvaluated.items(tt,he.items,Ne.items,$e)))}mergeValidEvaluated(he,$e){const{it:Ne,gen:tt}=this;if(Ne.opts.unevaluated&&(Ne.props!==!0||Ne.items!==!0))return tt.if($e,()=>this.mergeEvaluated(he,a.Name)),!0}}ty.KeywordCxt=ae;function _e(ye,he,$e,Ne){const tt=new ae(ye,$e,he);"code"in $e?$e.code(tt,Ne):tt.$data&&$e.validate?(0,s.funcKeywordCode)(tt,$e):"macro"in $e?(0,s.macroKeywordCode)(tt,$e):($e.compile||$e.validate)&&(0,s.funcKeywordCode)(tt,$e)}const pe=/^\/(?:[^~]|~0|~1)*$/,Te=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Le(ye,{dataLevel:he,dataNames:$e,dataPathArr:Ne}){let tt,it;if(ye==="")return u.default.rootData;if(ye[0]==="/"){if(!pe.test(ye))throw new Error(`Invalid JSON-pointer: ${ye}`);tt=ye,it=u.default.rootData}else{const yt=Te.exec(ye);if(!yt)throw new Error(`Invalid JSON-pointer: ${ye}`);const Tt=+yt[1];if(tt=yt[2],tt==="#"){if(Tt>=he)throw new Error(at("property/index",Tt));return Ne[he-Tt]}if(Tt>he)throw new Error(at("data",Tt));if(it=$e[he-Tt],!tt)return it}let Me=it;const Ge=tt.split("/");for(const yt of Ge)yt&&(it=(0,a._)`${it}${(0,a.getProperty)((0,c.unescapeJsonPointer)(yt))}`,Me=(0,a._)`${Me} && ${it}`);return Me;function at(yt,Tt){return`Cannot access ${yt} ${Tt} levels up, current level is ${he}`}}return ty.getData=Le,ty}var eM={},Obe;function zae(){if(Obe)return eM;Obe=1,Object.defineProperty(eM,"__esModule",{value:!0});class e extends Error{constructor(n){super("validation failed"),this.errors=n,this.ajv=this.validation=!0}}return eM.default=e,eM}var tM={},Mbe;function W7(){if(Mbe)return tM;Mbe=1,Object.defineProperty(tM,"__esModule",{value:!0});const e=H7();class t extends Error{constructor(r,i,s,o){super(o||`can't resolve reference ${s} from id ${i}`),this.missingRef=(0,e.resolveUrl)(r,i,s),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(r,this.missingRef))}}return tM.default=t,tM}var Lf={},Lbe;function Vae(){if(Lbe)return Lf;Lbe=1,Object.defineProperty(Lf,"__esModule",{value:!0}),Lf.resolveSchema=Lf.getCompilingSchema=Lf.resolveRef=Lf.compileSchema=Lf.SchemaEnv=void 0;const e=Dr(),t=zae(),n=Bx(),r=H7(),i=xi(),s=q7();class o{constructor(v){var b;this.refs={},this.dynamicAnchors={};let w;typeof v.schema=="object"&&(w=v.schema),this.schema=v.schema,this.schemaId=v.schemaId,this.root=v.root||this,this.baseId=(b=v.baseId)!==null&&b!==void 0?b:(0,r.normalizeId)(w==null?void 0:w[v.schemaId||"$id"]),this.schemaPath=v.schemaPath,this.localRefs=v.localRefs,this.meta=v.meta,this.$async=w==null?void 0:w.$async,this.refs={}}}Lf.SchemaEnv=o;function a(y){const v=c.call(this,y);if(v)return v;const b=(0,r.getFullPath)(this.opts.uriResolver,y.root.baseId),{es5:w,lines:E}=this.opts.code,{ownProperties:T}=this.opts,A=new e.CodeGen(this.scope,{es5:w,lines:E,ownProperties:T});let I;y.$async&&(I=A.scopeValue("Error",{ref:t.default,code:(0,e._)`require("ajv/dist/runtime/validation_error").default`}));const R=A.scopeName("validate");y.validateName=R;const D={gen:A,allErrors:this.opts.allErrors,data:n.default.data,parentData:n.default.parentData,parentDataProperty:n.default.parentDataProperty,dataNames:[n.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:A.scopeValue("schema",this.opts.code.source===!0?{ref:y.schema,code:(0,e.stringify)(y.schema)}:{ref:y.schema}),validateName:R,ValidationError:I,schema:y.schema,schemaEnv:y,rootId:b,baseId:y.baseId||b,schemaPath:e.nil,errSchemaPath:y.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,e._)`""`,opts:this.opts,self:this};let M;try{this._compilations.add(y),(0,s.validateFunctionCode)(D),A.optimize(this.opts.code.optimize);const $=A.toString();M=`${A.scopeRefs(n.default.scope)}return ${$}`,this.opts.code.process&&(M=this.opts.code.process(M,y));const F=new Function(`${n.default.self}`,`${n.default.scope}`,M)(this,this.scope.get());if(this.scope.value(R,{ref:F}),F.errors=null,F.schema=y.schema,F.schemaEnv=y,y.$async&&(F.$async=!0),this.opts.code.source===!0&&(F.source={validateName:R,validateCode:$,scopeValues:A._values}),this.opts.unevaluated){const{props:H,items:Q}=D;F.evaluated={props:H instanceof e.Name?void 0:H,items:Q instanceof e.Name?void 0:Q,dynamicProps:H instanceof e.Name,dynamicItems:Q instanceof e.Name},F.source&&(F.source.evaluated=(0,e.stringify)(F.evaluated))}return y.validate=F,y}catch($){throw delete y.validate,delete y.validateName,M&&this.logger.error("Error compiling schema, function code:",M),$}finally{this._compilations.delete(y)}}Lf.compileSchema=a;function u(y,v,b){var w;b=(0,r.resolveUrl)(this.opts.uriResolver,v,b);const E=y.refs[b];if(E)return E;let T=d.call(this,y,b);if(T===void 0){const A=(w=y.localRefs)===null||w===void 0?void 0:w[b],{schemaId:I}=this.opts;A&&(T=new o({schema:A,schemaId:I,root:y,baseId:v}))}if(T!==void 0)return y.refs[b]=l.call(this,T)}Lf.resolveRef=u;function l(y){return(0,r.inlineRef)(y.schema,this.opts.inlineRefs)?y.schema:y.validate?y:a.call(this,y)}function c(y){for(const v of this._compilations)if(f(v,y))return v}Lf.getCompilingSchema=c;function f(y,v){return y.schema===v.schema&&y.root===v.root&&y.baseId===v.baseId}function d(y,v){let b;for(;typeof(b=this.refs[v])=="string";)v=b;return b||this.schemas[v]||h.call(this,y,v)}function h(y,v){const b=this.opts.uriResolver.parse(v),w=(0,r._getFullPath)(this.opts.uriResolver,b);let E=(0,r.getFullPath)(this.opts.uriResolver,y.baseId,void 0);if(Object.keys(y.schema).length>0&&w===E)return m.call(this,b,y);const T=(0,r.normalizeId)(w),A=this.refs[T]||this.schemas[T];if(typeof A=="string"){const I=h.call(this,y,A);return typeof(I==null?void 0:I.schema)!="object"?void 0:m.call(this,b,I)}if(typeof(A==null?void 0:A.schema)=="object"){if(A.validate||a.call(this,A),T===(0,r.normalizeId)(v)){const{schema:I}=A,{schemaId:R}=this.opts,D=I[R];return D&&(E=(0,r.resolveUrl)(this.opts.uriResolver,E,D)),new o({schema:I,schemaId:R,root:y,baseId:E})}return m.call(this,b,A)}}Lf.resolveSchema=h;const p=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function m(y,{baseId:v,schema:b,root:w}){var E;if(((E=y.fragment)===null||E===void 0?void 0:E[0])!=="/")return;for(const I of y.fragment.slice(1).split("/")){if(typeof b=="boolean")return;const R=b[(0,i.unescapeFragment)(I)];if(R===void 0)return;b=R;const D=typeof b=="object"&&b[this.opts.schemaId];!p.has(I)&&D&&(v=(0,r.resolveUrl)(this.opts.uriResolver,v,D))}let T;if(typeof b!="boolean"&&b.$ref&&!(0,i.schemaHasRulesButRef)(b,this.RULES)){const I=(0,r.resolveUrl)(this.opts.uriResolver,v,b.$ref);T=h.call(this,w,I)}const{schemaId:A}=this.opts;if(T=T||new o({schema:b,schemaId:A,root:w,baseId:v}),T.schema!==T.root.schema)return T}return Lf}const Asn="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Isn="Meta-schema for $data reference (JSON AnySchema extension proposal)",ksn="object",Rsn=["$data"],Nsn={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Dsn=!1,Psn={$id:Asn,description:Isn,type:ksn,required:Rsn,properties:Nsn,additionalProperties:Dsn};var nM={},RR={exports:{}},Rq,$be;function Osn(){return $be||($be=1,Rq={HEX:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15}}),Rq}var Nq,Fbe;function Msn(){if(Fbe)return Nq;Fbe=1;const{HEX:e}=Osn(),t=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function n(m){if(a(m,".")<3)return{host:m,isIPV4:!1};const y=m.match(t)||[],[v]=y;return v?{host:o(v,"."),isIPV4:!0}:{host:m,isIPV4:!1}}function r(m,y=!1){let v="",b=!0;for(const w of m){if(e[w]===void 0)return;w!=="0"&&b===!0&&(b=!1),b||(v+=w)}return y&&v.length===0&&(v="0"),v}function i(m){let y=0;const v={error:!1,address:"",zone:""},b=[],w=[];let E=!1,T=!1,A=!1;function I(){if(w.length){if(E===!1){const R=r(w);if(R!==void 0)b.push(R);else return v.error=!0,!1}w.length=0}return!0}for(let R=0;R<m.length;R++){const D=m[R];if(!(D==="["||D==="]"))if(D===":"){if(T===!0&&(A=!0),!I())break;if(y++,b.push(":"),y>7){v.error=!0;break}R-1>=0&&m[R-1]===":"&&(T=!0);continue}else if(D==="%"){if(!I())break;E=!0}else{w.push(D);continue}}return w.length&&(E?v.zone=w.join(""):A?b.push(w.join("")):b.push(r(w))),v.address=b.join(""),v}function s(m){if(a(m,":")<2)return{host:m,isIPV6:!1};const y=i(m);if(y.error)return{host:m,isIPV6:!1};{let v=y.address,b=y.address;return y.zone&&(v+="%"+y.zone,b+="%25"+y.zone),{host:v,escapedHost:b,isIPV6:!0}}}function o(m,y){let v="",b=!0;const w=m.length;for(let E=0;E<w;E++){const T=m[E];T==="0"&&b?(E+1<=w&&m[E+1]===y||E+1===w)&&(v+=T,b=!1):(T===y?b=!0:b=!1,v+=T)}return v}function a(m,y){let v=0;for(let b=0;b<m.length;b++)m[b]===y&&v++;return v}const u=/^\.\.?\//u,l=/^\/\.(?:\/|$)/u,c=/^\/\.\.(?:\/|$)/u,f=/^\/?(?:.|\n)*?(?=\/|$)/u;function d(m){const y=[];for(;m.length;)if(m.match(u))m=m.replace(u,"");else if(m.match(l))m=m.replace(l,"/");else if(m.match(c))m=m.replace(c,"/"),y.pop();else if(m==="."||m==="..")m="";else{const v=m.match(f);if(v){const b=v[0];m=m.slice(b.length),y.push(b)}else throw new Error("Unexpected dot segment condition")}return y.join("")}function h(m,y){const v=y!==!0?escape:unescape;return m.scheme!==void 0&&(m.scheme=v(m.scheme)),m.userinfo!==void 0&&(m.userinfo=v(m.userinfo)),m.host!==void 0&&(m.host=v(m.host)),m.path!==void 0&&(m.path=v(m.path)),m.query!==void 0&&(m.query=v(m.query)),m.fragment!==void 0&&(m.fragment=v(m.fragment)),m}function p(m){const y=[];if(m.userinfo!==void 0&&(y.push(m.userinfo),y.push("@")),m.host!==void 0){let v=unescape(m.host);const b=n(v);if(b.isIPV4)v=b.host;else{const w=s(b.host);w.isIPV6===!0?v=`[${w.escapedHost}]`:v=m.host}y.push(v)}return(typeof m.port=="number"||typeof m.port=="string")&&(y.push(":"),y.push(String(m.port))),y.length?y.join(""):void 0}return Nq={recomposeAuthority:p,normalizeComponentEncoding:h,removeDotSegments:d,normalizeIPv4:n,normalizeIPv6:s,stringArrayToHexStripped:r},Nq}var Dq,Bbe;function Lsn(){if(Bbe)return Dq;Bbe=1;const e=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,t=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function n(b){return typeof b.secure=="boolean"?b.secure:String(b.scheme).toLowerCase()==="wss"}function r(b){return b.host||(b.error=b.error||"HTTP URIs must have a host."),b}function i(b){const w=String(b.scheme).toLowerCase()==="https";return(b.port===(w?443:80)||b.port==="")&&(b.port=void 0),b.path||(b.path="/"),b}function s(b){return b.secure=n(b),b.resourceName=(b.path||"/")+(b.query?"?"+b.query:""),b.path=void 0,b.query=void 0,b}function o(b){if((b.port===(n(b)?443:80)||b.port==="")&&(b.port=void 0),typeof b.secure=="boolean"&&(b.scheme=b.secure?"wss":"ws",b.secure=void 0),b.resourceName){const[w,E]=b.resourceName.split("?");b.path=w&&w!=="/"?w:void 0,b.query=E,b.resourceName=void 0}return b.fragment=void 0,b}function a(b,w){if(!b.path)return b.error="URN can not be parsed",b;const E=b.path.match(t);if(E){const T=w.scheme||b.scheme||"urn";b.nid=E[1].toLowerCase(),b.nss=E[2];const A=`${T}:${w.nid||b.nid}`,I=v[A];b.path=void 0,I&&(b=I.parse(b,w))}else b.error=b.error||"URN can not be parsed.";return b}function u(b,w){const E=w.scheme||b.scheme||"urn",T=b.nid.toLowerCase(),A=`${E}:${w.nid||T}`,I=v[A];I&&(b=I.serialize(b,w));const R=b,D=b.nss;return R.path=`${T||w.nid}:${D}`,w.skipEscape=!0,R}function l(b,w){const E=b;return E.uuid=E.nss,E.nss=void 0,!w.tolerant&&(!E.uuid||!e.test(E.uuid))&&(E.error=E.error||"UUID is not valid."),E}function c(b){const w=b;return w.nss=(b.uuid||"").toLowerCase(),w}const f={scheme:"http",domainHost:!0,parse:r,serialize:i},d={scheme:"https",domainHost:f.domainHost,parse:r,serialize:i},h={scheme:"ws",domainHost:!0,parse:s,serialize:o},p={scheme:"wss",domainHost:h.domainHost,parse:h.parse,serialize:h.serialize},v={http:f,https:d,ws:h,wss:p,urn:{scheme:"urn",parse:a,serialize:u,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:l,serialize:c,skipNormalize:!0}};return Dq=v,Dq}var jbe;function $sn(){if(jbe)return RR.exports;jbe=1;const{normalizeIPv6:e,normalizeIPv4:t,removeDotSegments:n,recomposeAuthority:r,normalizeComponentEncoding:i}=Msn(),s=Lsn();function o(y,v){return typeof y=="string"?y=c(p(y,v),v):typeof y=="object"&&(y=p(c(y,v),v)),y}function a(y,v,b){const w=Object.assign({scheme:"null"},b),E=u(p(y,w),p(v,w),w,!0);return c(E,{...w,skipEscape:!0})}function u(y,v,b,w){const E={};return w||(y=p(c(y,b),b),v=p(c(v,b),b)),b=b||{},!b.tolerant&&v.scheme?(E.scheme=v.scheme,E.userinfo=v.userinfo,E.host=v.host,E.port=v.port,E.path=n(v.path||""),E.query=v.query):(v.userinfo!==void 0||v.host!==void 0||v.port!==void 0?(E.userinfo=v.userinfo,E.host=v.host,E.port=v.port,E.path=n(v.path||""),E.query=v.query):(v.path?(v.path.charAt(0)==="/"?E.path=n(v.path):((y.userinfo!==void 0||y.host!==void 0||y.port!==void 0)&&!y.path?E.path="/"+v.path:y.path?E.path=y.path.slice(0,y.path.lastIndexOf("/")+1)+v.path:E.path=v.path,E.path=n(E.path)),E.query=v.query):(E.path=y.path,v.query!==void 0?E.query=v.query:E.query=y.query),E.userinfo=y.userinfo,E.host=y.host,E.port=y.port),E.scheme=y.scheme),E.fragment=v.fragment,E}function l(y,v,b){return typeof y=="string"?(y=unescape(y),y=c(i(p(y,b),!0),{...b,skipEscape:!0})):typeof y=="object"&&(y=c(i(y,!0),{...b,skipEscape:!0})),typeof v=="string"?(v=unescape(v),v=c(i(p(v,b),!0),{...b,skipEscape:!0})):typeof v=="object"&&(v=c(i(v,!0),{...b,skipEscape:!0})),y.toLowerCase()===v.toLowerCase()}function c(y,v){const b={host:y.host,scheme:y.scheme,userinfo:y.userinfo,port:y.port,path:y.path,query:y.query,nid:y.nid,nss:y.nss,uuid:y.uuid,fragment:y.fragment,reference:y.reference,resourceName:y.resourceName,secure:y.secure,error:""},w=Object.assign({},v),E=[],T=s[(w.scheme||b.scheme||"").toLowerCase()];T&&T.serialize&&T.serialize(b,w),b.path!==void 0&&(w.skipEscape?b.path=unescape(b.path):(b.path=escape(b.path),b.scheme!==void 0&&(b.path=b.path.split("%3A").join(":")))),w.reference!=="suffix"&&b.scheme&&E.push(b.scheme,":");const A=r(b);if(A!==void 0&&(w.reference!=="suffix"&&E.push("//"),E.push(A),b.path&&b.path.charAt(0)!=="/"&&E.push("/")),b.path!==void 0){let I=b.path;!w.absolutePath&&(!T||!T.absolutePath)&&(I=n(I)),A===void 0&&(I=I.replace(/^\/\//u,"/%2F")),E.push(I)}return b.query!==void 0&&E.push("?",b.query),b.fragment!==void 0&&E.push("#",b.fragment),E.join("")}const f=Array.from({length:127},(y,v)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(v)));function d(y){let v=0;for(let b=0,w=y.length;b<w;++b)if(v=y.charCodeAt(b),v>126||f[v])return!0;return!1}const h=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function p(y,v){const b=Object.assign({},v),w={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},E=y.indexOf("%")!==-1;let T=!1;b.reference==="suffix"&&(y=(b.scheme?b.scheme+":":"")+"//"+y);const A=y.match(h);if(A){if(w.scheme=A[1],w.userinfo=A[3],w.host=A[4],w.port=parseInt(A[5],10),w.path=A[6]||"",w.query=A[7],w.fragment=A[8],isNaN(w.port)&&(w.port=A[5]),w.host){const R=t(w.host);if(R.isIPV4===!1){const D=e(R.host);w.host=D.host.toLowerCase(),T=D.isIPV6}else w.host=R.host,T=!0}w.scheme===void 0&&w.userinfo===void 0&&w.host===void 0&&w.port===void 0&&!w.path&&w.query===void 0?w.reference="same-document":w.scheme===void 0?w.reference="relative":w.fragment===void 0?w.reference="absolute":w.reference="uri",b.reference&&b.reference!=="suffix"&&b.reference!==w.reference&&(w.error=w.error||"URI is not a "+b.reference+" reference.");const I=s[(b.scheme||w.scheme||"").toLowerCase()];if(!b.unicodeSupport&&(!I||!I.unicodeSupport)&&w.host&&(b.domainHost||I&&I.domainHost)&&T===!1&&d(w.host))try{w.host=URL.domainToASCII(w.host.toLowerCase())}catch(R){w.error=w.error||"Host's domain name can not be converted to ASCII: "+R}(!I||I&&!I.skipNormalize)&&(E&&w.scheme!==void 0&&(w.scheme=unescape(w.scheme)),E&&w.host!==void 0&&(w.host=unescape(w.host)),w.path&&w.path.length&&(w.path=escape(unescape(w.path))),w.fragment&&w.fragment.length&&(w.fragment=encodeURI(decodeURIComponent(w.fragment)))),I&&I.parse&&I.parse(w,b)}else w.error=w.error||"URI can not be parsed.";return w}const m={SCHEMES:s,normalize:o,resolve:a,resolveComponents:u,equal:l,serialize:c,parse:p};return RR.exports=m,RR.exports.default=m,RR.exports.fastUri=m,RR.exports}var Ube;function Fsn(){if(Ube)return nM;Ube=1,Object.defineProperty(nM,"__esModule",{value:!0});const e=$sn();return e.code='require("ajv/dist/runtime/uri").default',nM.default=e,nM}var zbe;function Bsn(){return zbe||(zbe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=q7();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Dr();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=zae(),i=W7(),s=i9e(),o=Vae(),a=Dr(),u=H7(),l=L8(),c=xi(),f=Psn,d=Fsn(),h=(q,j)=>new RegExp(q,j);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),y={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},v={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},b=200;function w(q){var j,G,V,Y,ee,ae,_e,pe,Te,Le,ye,he,$e,Ne,tt,it,Me,Ge,at,yt,Tt,Ot,qe,ft,wt;const ke=q.strict,Oe=(j=q.code)===null||j===void 0?void 0:j.optimize,dt=Oe===!0||Oe===void 0?1:Oe||0,Lt=(V=(G=q.code)===null||G===void 0?void 0:G.regExp)!==null&&V!==void 0?V:h,Ft=(Y=q.uriResolver)!==null&&Y!==void 0?Y:d.default;return{strictSchema:(ae=(ee=q.strictSchema)!==null&&ee!==void 0?ee:ke)!==null&&ae!==void 0?ae:!0,strictNumbers:(pe=(_e=q.strictNumbers)!==null&&_e!==void 0?_e:ke)!==null&&pe!==void 0?pe:!0,strictTypes:(Le=(Te=q.strictTypes)!==null&&Te!==void 0?Te:ke)!==null&&Le!==void 0?Le:"log",strictTuples:(he=(ye=q.strictTuples)!==null&&ye!==void 0?ye:ke)!==null&&he!==void 0?he:"log",strictRequired:(Ne=($e=q.strictRequired)!==null&&$e!==void 0?$e:ke)!==null&&Ne!==void 0?Ne:!1,code:q.code?{...q.code,optimize:dt,regExp:Lt}:{optimize:dt,regExp:Lt},loopRequired:(tt=q.loopRequired)!==null&&tt!==void 0?tt:b,loopEnum:(it=q.loopEnum)!==null&&it!==void 0?it:b,meta:(Me=q.meta)!==null&&Me!==void 0?Me:!0,messages:(Ge=q.messages)!==null&&Ge!==void 0?Ge:!0,inlineRefs:(at=q.inlineRefs)!==null&&at!==void 0?at:!0,schemaId:(yt=q.schemaId)!==null&&yt!==void 0?yt:"$id",addUsedSchema:(Tt=q.addUsedSchema)!==null&&Tt!==void 0?Tt:!0,validateSchema:(Ot=q.validateSchema)!==null&&Ot!==void 0?Ot:!0,validateFormats:(qe=q.validateFormats)!==null&&qe!==void 0?qe:!0,unicodeRegExp:(ft=q.unicodeRegExp)!==null&&ft!==void 0?ft:!0,int32range:(wt=q.int32range)!==null&&wt!==void 0?wt:!0,uriResolver:Ft}}class E{constructor(j={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,j=this.opts={...j,...w(j)};const{es5:G,lines:V}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:G,lines:V}),this.logger=U(j.logger);const Y=j.validateFormats;j.validateFormats=!1,this.RULES=(0,s.getRules)(),T.call(this,y,j,"NOT SUPPORTED"),T.call(this,v,j,"DEPRECATED","warn"),this._metaOpts=M.call(this),j.formats&&R.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),j.keywords&&D.call(this,j.keywords),typeof j.meta=="object"&&this.addMetaSchema(j.meta),I.call(this),j.validateFormats=Y}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:j,meta:G,schemaId:V}=this.opts;let Y=f;V==="id"&&(Y={...f},Y.id=Y.$id,delete Y.$id),G&&j&&this.addMetaSchema(Y,Y[V],!1)}defaultMeta(){const{meta:j,schemaId:G}=this.opts;return this.opts.defaultMeta=typeof j=="object"?j[G]||j:void 0}validate(j,G){let V;if(typeof j=="string"){if(V=this.getSchema(j),!V)throw new Error(`no schema with key or ref "${j}"`)}else V=this.compile(j);const Y=V(G);return"$async"in V||(this.errors=V.errors),Y}compile(j,G){const V=this._addSchema(j,G);return V.validate||this._compileSchemaEnv(V)}compileAsync(j,G){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:V}=this.opts;return Y.call(this,j,G);async function Y(Le,ye){await ee.call(this,Le.$schema);const he=this._addSchema(Le,ye);return he.validate||ae.call(this,he)}async function ee(Le){Le&&!this.getSchema(Le)&&await Y.call(this,{$ref:Le},!0)}async function ae(Le){try{return this._compileSchemaEnv(Le)}catch(ye){if(!(ye instanceof i.default))throw ye;return _e.call(this,ye),await pe.call(this,ye.missingSchema),ae.call(this,Le)}}function _e({missingSchema:Le,missingRef:ye}){if(this.refs[Le])throw new Error(`AnySchema ${Le} is loaded but ${ye} cannot be resolved`)}async function pe(Le){const ye=await Te.call(this,Le);this.refs[Le]||await ee.call(this,ye.$schema),this.refs[Le]||this.addSchema(ye,Le,G)}async function Te(Le){const ye=this._loading[Le];if(ye)return ye;try{return await(this._loading[Le]=V(Le))}finally{delete this._loading[Le]}}}addSchema(j,G,V,Y=this.opts.validateSchema){if(Array.isArray(j)){for(const ae of j)this.addSchema(ae,void 0,V,Y);return this}let ee;if(typeof j=="object"){const{schemaId:ae}=this.opts;if(ee=j[ae],ee!==void 0&&typeof ee!="string")throw new Error(`schema ${ae} must be string`)}return G=(0,u.normalizeId)(G||ee),this._checkUnique(G),this.schemas[G]=this._addSchema(j,V,G,Y,!0),this}addMetaSchema(j,G,V=this.opts.validateSchema){return this.addSchema(j,G,!0,V),this}validateSchema(j,G){if(typeof j=="boolean")return!0;let V;if(V=j.$schema,V!==void 0&&typeof V!="string")throw new Error("$schema must be a string");if(V=V||this.opts.defaultMeta||this.defaultMeta(),!V)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const Y=this.validate(V,j);if(!Y&&G){const ee="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(ee);else throw new Error(ee)}return Y}getSchema(j){let G;for(;typeof(G=A.call(this,j))=="string";)j=G;if(G===void 0){const{schemaId:V}=this.opts,Y=new o.SchemaEnv({schema:{},schemaId:V});if(G=o.resolveSchema.call(this,Y,j),!G)return;this.refs[j]=G}return G.validate||this._compileSchemaEnv(G)}removeSchema(j){if(j instanceof RegExp)return this._removeAllSchemas(this.schemas,j),this._removeAllSchemas(this.refs,j),this;switch(typeof j){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const G=A.call(this,j);return typeof G=="object"&&this._cache.delete(G.schema),delete this.schemas[j],delete this.refs[j],this}case"object":{const G=j;this._cache.delete(G);let V=j[this.opts.schemaId];return V&&(V=(0,u.normalizeId)(V),delete this.schemas[V],delete this.refs[V]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(j){for(const G of j)this.addKeyword(G);return this}addKeyword(j,G){let V;if(typeof j=="string")V=j,typeof G=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),G.keyword=V);else if(typeof j=="object"&&G===void 0){if(G=j,V=G.keyword,Array.isArray(V)&&!V.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(H.call(this,V,G),!G)return(0,c.eachItem)(V,ee=>Q.call(this,ee)),this;ne.call(this,G);const Y={...G,type:(0,l.getJSONTypes)(G.type),schemaType:(0,l.getJSONTypes)(G.schemaType)};return(0,c.eachItem)(V,Y.type.length===0?ee=>Q.call(this,ee,Y):ee=>Y.type.forEach(ae=>Q.call(this,ee,Y,ae))),this}getKeyword(j){const G=this.RULES.all[j];return typeof G=="object"?G.definition:!!G}removeKeyword(j){const{RULES:G}=this;delete G.keywords[j],delete G.all[j];for(const V of G.rules){const Y=V.rules.findIndex(ee=>ee.keyword===j);Y>=0&&V.rules.splice(Y,1)}return this}addFormat(j,G){return typeof G=="string"&&(G=new RegExp(G)),this.formats[j]=G,this}errorsText(j=this.errors,{separator:G=", ",dataVar:V="data"}={}){return!j||j.length===0?"No errors":j.map(Y=>`${V}${Y.instancePath} ${Y.message}`).reduce((Y,ee)=>Y+G+ee)}$dataMetaSchema(j,G){const V=this.RULES.all;j=JSON.parse(JSON.stringify(j));for(const Y of G){const ee=Y.split("/").slice(1);let ae=j;for(const _e of ee)ae=ae[_e];for(const _e in V){const pe=V[_e];if(typeof pe!="object")continue;const{$data:Te}=pe.definition,Le=ae[_e];Te&&Le&&(ae[_e]=ie(Le))}}return j}_removeAllSchemas(j,G){for(const V in j){const Y=j[V];(!G||G.test(V))&&(typeof Y=="string"?delete j[V]:Y&&!Y.meta&&(this._cache.delete(Y.schema),delete j[V]))}}_addSchema(j,G,V,Y=this.opts.validateSchema,ee=this.opts.addUsedSchema){let ae;const{schemaId:_e}=this.opts;if(typeof j=="object")ae=j[_e];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof j!="boolean")throw new Error("schema must be object or boolean")}let pe=this._cache.get(j);if(pe!==void 0)return pe;V=(0,u.normalizeId)(ae||V);const Te=u.getSchemaRefs.call(this,j,V);return pe=new o.SchemaEnv({schema:j,schemaId:_e,meta:G,baseId:V,localRefs:Te}),this._cache.set(pe.schema,pe),ee&&!V.startsWith("#")&&(V&&this._checkUnique(V),this.refs[V]=pe),Y&&this.validateSchema(j,!0),pe}_checkUnique(j){if(this.schemas[j]||this.refs[j])throw new Error(`schema with key or id "${j}" already exists`)}_compileSchemaEnv(j){if(j.meta?this._compileMetaSchema(j):o.compileSchema.call(this,j),!j.validate)throw new Error("ajv implementation error");return j.validate}_compileMetaSchema(j){const G=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,j)}finally{this.opts=G}}}E.ValidationError=r.default,E.MissingRefError=i.default,e.default=E;function T(q,j,G,V="error"){for(const Y in q){const ee=Y;ee in j&&this.logger[V](`${G}: option ${Y}. ${q[ee]}`)}}function A(q){return q=(0,u.normalizeId)(q),this.schemas[q]||this.refs[q]}function I(){const q=this.opts.schemas;if(q)if(Array.isArray(q))this.addSchema(q);else for(const j in q)this.addSchema(q[j],j)}function R(){for(const q in this.opts.formats){const j=this.opts.formats[q];j&&this.addFormat(q,j)}}function D(q){if(Array.isArray(q)){this.addVocabulary(q);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const j in q){const G=q[j];G.keyword||(G.keyword=j),this.addKeyword(G)}}function M(){const q={...this.opts};for(const j of p)delete q[j];return q}const $={log(){},warn(){},error(){}};function U(q){if(q===!1)return $;if(q===void 0)return console;if(q.log&&q.warn&&q.error)return q;throw new Error("logger must implement log, warn and error methods")}const F=/^[a-z_$][a-z0-9_$:-]*$/i;function H(q,j){const{RULES:G}=this;if((0,c.eachItem)(q,V=>{if(G.keywords[V])throw new Error(`Keyword ${V} is already defined`);if(!F.test(V))throw new Error(`Keyword ${V} has invalid name`)}),!!j&&j.$data&&!("code"in j||"validate"in j))throw new Error('$data keyword must have "code" or "validate" function')}function Q(q,j,G){var V;const Y=j==null?void 0:j.post;if(G&&Y)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:ee}=this;let ae=Y?ee.post:ee.rules.find(({type:pe})=>pe===G);if(ae||(ae={type:G,rules:[]},ee.rules.push(ae)),ee.keywords[q]=!0,!j)return;const _e={keyword:q,definition:{...j,type:(0,l.getJSONTypes)(j.type),schemaType:(0,l.getJSONTypes)(j.schemaType)}};j.before?J.call(this,ae,_e,j.before):ae.rules.push(_e),ee.all[q]=_e,(V=j.implements)===null||V===void 0||V.forEach(pe=>this.addKeyword(pe))}function J(q,j,G){const V=q.rules.findIndex(Y=>Y.keyword===G);V>=0?q.rules.splice(V,0,j):(q.rules.push(j),this.logger.warn(`rule ${G} is not defined`))}function ne(q){let{metaSchema:j}=q;j!==void 0&&(q.$data&&this.opts.$data&&(j=ie(j)),q.validateSchema=this.compile(j,!0))}const Z={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ie(q){return{anyOf:[q,Z]}}}(Tq)),Tq}var rM={},iM={},sM={},Vbe;function jsn(){if(Vbe)return sM;Vbe=1,Object.defineProperty(sM,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return sM.default=e,sM}var Sv={},Hbe;function Usn(){if(Hbe)return Sv;Hbe=1,Object.defineProperty(Sv,"__esModule",{value:!0}),Sv.callRef=Sv.getValidate=void 0;const e=W7(),t=cm(),n=Dr(),r=Bx(),i=Vae(),s=xi(),o={keyword:"$ref",schemaType:"string",code(l){const{gen:c,schema:f,it:d}=l,{baseId:h,schemaEnv:p,validateName:m,opts:y,self:v}=d,{root:b}=p;if((f==="#"||f==="#/")&&h===b.baseId)return E();const w=i.resolveRef.call(v,b,h,f);if(w===void 0)throw new e.default(d.opts.uriResolver,h,f);if(w instanceof i.SchemaEnv)return T(w);return A(w);function E(){if(p===b)return u(l,m,p,p.$async);const I=c.scopeValue("root",{ref:b});return u(l,(0,n._)`${I}.validate`,b,b.$async)}function T(I){const R=a(l,I);u(l,R,I,I.$async)}function A(I){const R=c.scopeValue("schema",y.code.source===!0?{ref:I,code:(0,n.stringify)(I)}:{ref:I}),D=c.name("valid"),M=l.subschema({schema:I,dataTypes:[],schemaPath:n.nil,topSchemaRef:R,errSchemaPath:f},D);l.mergeEvaluated(M),l.ok(D)}}};function a(l,c){const{gen:f}=l;return c.validate?f.scopeValue("validate",{ref:c.validate}):(0,n._)`${f.scopeValue("wrapper",{ref:c})}.validate`}Sv.getValidate=a;function u(l,c,f,d){const{gen:h,it:p}=l,{allErrors:m,schemaEnv:y,opts:v}=p,b=v.passContext?r.default.this:n.nil;d?w():E();function w(){if(!y.$async)throw new Error("async schema referenced by sync schema");const I=h.let("valid");h.try(()=>{h.code((0,n._)`await ${(0,t.callValidateCode)(l,c,b)}`),A(c),m||h.assign(I,!0)},R=>{h.if((0,n._)`!(${R} instanceof ${p.ValidationError})`,()=>h.throw(R)),T(R),m||h.assign(I,!1)}),l.ok(I)}function E(){l.result((0,t.callValidateCode)(l,c,b),()=>A(c),()=>T(c))}function T(I){const R=(0,n._)`${I}.errors`;h.assign(r.default.vErrors,(0,n._)`${r.default.vErrors} === null ? ${R} : ${r.default.vErrors}.concat(${R})`),h.assign(r.default.errors,(0,n._)`${r.default.vErrors}.length`)}function A(I){var R;if(!p.opts.unevaluated)return;const D=(R=f==null?void 0:f.validate)===null||R===void 0?void 0:R.evaluated;if(p.props!==!0)if(D&&!D.dynamicProps)D.props!==void 0&&(p.props=s.mergeEvaluated.props(h,D.props,p.props));else{const M=h.var("props",(0,n._)`${I}.evaluated.props`);p.props=s.mergeEvaluated.props(h,M,p.props,n.Name)}if(p.items!==!0)if(D&&!D.dynamicItems)D.items!==void 0&&(p.items=s.mergeEvaluated.items(h,D.items,p.items));else{const M=h.var("items",(0,n._)`${I}.evaluated.items`);p.items=s.mergeEvaluated.items(h,M,p.items,n.Name)}}}return Sv.callRef=u,Sv.default=o,Sv}var qbe;function zsn(){if(qbe)return iM;qbe=1,Object.defineProperty(iM,"__esModule",{value:!0});const e=jsn(),t=Usn(),n=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,t.default];return iM.default=n,iM}var oM={},aM={},Wbe;function Vsn(){if(Wbe)return aM;Wbe=1,Object.defineProperty(aM,"__esModule",{value:!0});const e=Dr(),t=e.operators,n={maximum:{okStr:"<=",ok:t.LTE,fail:t.GT},minimum:{okStr:">=",ok:t.GTE,fail:t.LT},exclusiveMaximum:{okStr:"<",ok:t.LT,fail:t.GTE},exclusiveMinimum:{okStr:">",ok:t.GT,fail:t.LTE}},r={message:({keyword:s,schemaCode:o})=>(0,e.str)`must be ${n[s].okStr} ${o}`,params:({keyword:s,schemaCode:o})=>(0,e._)`{comparison: ${n[s].okStr}, limit: ${o}}`},i={keyword:Object.keys(n),type:"number",schemaType:"number",$data:!0,error:r,code(s){const{keyword:o,data:a,schemaCode:u}=s;s.fail$data((0,e._)`${a} ${n[o].fail} ${u} || isNaN(${a})`)}};return aM.default=i,aM}var uM={},Gbe;function Hsn(){if(Gbe)return uM;Gbe=1,Object.defineProperty(uM,"__esModule",{value:!0});const e=Dr(),n={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must be multiple of ${r}`,params:({schemaCode:r})=>(0,e._)`{multipleOf: ${r}}`},code(r){const{gen:i,data:s,schemaCode:o,it:a}=r,u=a.opts.multipleOfPrecision,l=i.let("res"),c=u?(0,e._)`Math.abs(Math.round(${l}) - ${l}) > 1e-${u}`:(0,e._)`${l} !== parseInt(${l})`;r.fail$data((0,e._)`(${o} === 0 || (${l} = ${s}/${o}, ${c}))`)}};return uM.default=n,uM}var lM={},cM={},Ybe;function qsn(){if(Ybe)return cM;Ybe=1,Object.defineProperty(cM,"__esModule",{value:!0});function e(t){const n=t.length;let r=0,i=0,s;for(;i<n;)r++,s=t.charCodeAt(i++),s>=55296&&s<=56319&&i<n&&(s=t.charCodeAt(i),(s&64512)===56320&&i++);return r}return cM.default=e,e.code='require("ajv/dist/runtime/ucs2length").default',cM}var Kbe;function Wsn(){if(Kbe)return lM;Kbe=1,Object.defineProperty(lM,"__esModule",{value:!0});const e=Dr(),t=xi(),n=qsn(),i={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:s,schemaCode:o}){const a=s==="maxLength"?"more":"fewer";return(0,e.str)`must NOT have ${a} than ${o} characters`},params:({schemaCode:s})=>(0,e._)`{limit: ${s}}`},code(s){const{keyword:o,data:a,schemaCode:u,it:l}=s,c=o==="maxLength"?e.operators.GT:e.operators.LT,f=l.opts.unicode===!1?(0,e._)`${a}.length`:(0,e._)`${(0,t.useFunc)(s.gen,n.default)}(${a})`;s.fail$data((0,e._)`${f} ${c} ${u}`)}};return lM.default=i,lM}var fM={},Xbe;function Gsn(){if(Xbe)return fM;Xbe=1,Object.defineProperty(fM,"__esModule",{value:!0});const e=cm(),t=Dr(),r={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:i})=>(0,t.str)`must match pattern "${i}"`,params:({schemaCode:i})=>(0,t._)`{pattern: ${i}}`},code(i){const{data:s,$data:o,schema:a,schemaCode:u,it:l}=i,c=l.opts.unicodeRegExp?"u":"",f=o?(0,t._)`(new RegExp(${u}, ${c}))`:(0,e.usePattern)(i,a);i.fail$data((0,t._)`!${f}.test(${s})`)}};return fM.default=r,fM}var dM={},Qbe;function Ysn(){if(Qbe)return dM;Qbe=1,Object.defineProperty(dM,"__esModule",{value:!0});const e=Dr(),n={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:i}){const s=r==="maxProperties"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${i} properties`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:i,data:s,schemaCode:o}=r,a=i==="maxProperties"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`Object.keys(${s}).length ${a} ${o}`)}};return dM.default=n,dM}var hM={},Jbe;function Ksn(){if(Jbe)return hM;Jbe=1,Object.defineProperty(hM,"__esModule",{value:!0});const e=cm(),t=Dr(),n=xi(),i={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:s}})=>(0,t.str)`must have required property '${s}'`,params:({params:{missingProperty:s}})=>(0,t._)`{missingProperty: ${s}}`},code(s){const{gen:o,schema:a,schemaCode:u,data:l,$data:c,it:f}=s,{opts:d}=f;if(!c&&a.length===0)return;const h=a.length>=d.loopRequired;if(f.allErrors?p():m(),d.strictRequired){const b=s.parentSchema.properties,{definedProperties:w}=s.it;for(const E of a)if((b==null?void 0:b[E])===void 0&&!w.has(E)){const T=f.schemaEnv.baseId+f.errSchemaPath,A=`required property "${E}" is not defined at "${T}" (strictRequired)`;(0,n.checkStrictMode)(f,A,f.opts.strictRequired)}}function p(){if(h||c)s.block$data(t.nil,y);else for(const b of a)(0,e.checkReportMissingProp)(s,b)}function m(){const b=o.let("missing");if(h||c){const w=o.let("valid",!0);s.block$data(w,()=>v(b,w)),s.ok(w)}else o.if((0,e.checkMissingProp)(s,a,b)),(0,e.reportMissingProp)(s,b),o.else()}function y(){o.forOf("prop",u,b=>{s.setParams({missingProperty:b}),o.if((0,e.noPropertyInData)(o,l,b,d.ownProperties),()=>s.error())})}function v(b,w){s.setParams({missingProperty:b}),o.forOf(b,u,()=>{o.assign(w,(0,e.propertyInData)(o,l,b,d.ownProperties)),o.if((0,t.not)(w),()=>{s.error(),o.break()})},t.nil)}}};return hM.default=i,hM}var pM={},Zbe;function Xsn(){if(Zbe)return pM;Zbe=1,Object.defineProperty(pM,"__esModule",{value:!0});const e=Dr(),n={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:i}){const s=r==="maxItems"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${i} items`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:i,data:s,schemaCode:o}=r,a=i==="maxItems"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`${s}.length ${a} ${o}`)}};return pM.default=n,pM}var mM={},gM={},exe;function Hae(){if(exe)return gM;exe=1,Object.defineProperty(gM,"__esModule",{value:!0});const e=xee();return e.code='require("ajv/dist/runtime/equal").default',gM.default=e,gM}var txe;function Qsn(){if(txe)return mM;txe=1,Object.defineProperty(mM,"__esModule",{value:!0});const e=L8(),t=Dr(),n=xi(),r=Hae(),s={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:o,j:a}})=>(0,t.str)`must NOT have duplicate items (items ## ${a} and ${o} are identical)`,params:({params:{i:o,j:a}})=>(0,t._)`{i: ${o}, j: ${a}}`},code(o){const{gen:a,data:u,$data:l,schema:c,parentSchema:f,schemaCode:d,it:h}=o;if(!l&&!c)return;const p=a.let("valid"),m=f.items?(0,e.getSchemaTypes)(f.items):[];o.block$data(p,y,(0,t._)`${d} === false`),o.ok(p);function y(){const E=a.let("i",(0,t._)`${u}.length`),T=a.let("j");o.setParams({i:E,j:T}),a.assign(p,!0),a.if((0,t._)`${E} > 1`,()=>(v()?b:w)(E,T))}function v(){return m.length>0&&!m.some(E=>E==="object"||E==="array")}function b(E,T){const A=a.name("item"),I=(0,e.checkDataTypes)(m,A,h.opts.strictNumbers,e.DataType.Wrong),R=a.const("indices",(0,t._)`{}`);a.for((0,t._)`;${E}--;`,()=>{a.let(A,(0,t._)`${u}[${E}]`),a.if(I,(0,t._)`continue`),m.length>1&&a.if((0,t._)`typeof ${A} == "string"`,(0,t._)`${A} += "_"`),a.if((0,t._)`typeof ${R}[${A}] == "number"`,()=>{a.assign(T,(0,t._)`${R}[${A}]`),o.error(),a.assign(p,!1).break()}).code((0,t._)`${R}[${A}] = ${E}`)})}function w(E,T){const A=(0,n.useFunc)(a,r.default),I=a.name("outer");a.label(I).for((0,t._)`;${E}--;`,()=>a.for((0,t._)`${T} = ${E}; ${T}--;`,()=>a.if((0,t._)`${A}(${u}[${E}], ${u}[${T}])`,()=>{o.error(),a.assign(p,!1).break(I)})))}}};return mM.default=s,mM}var yM={},nxe;function Jsn(){if(nxe)return yM;nxe=1,Object.defineProperty(yM,"__esModule",{value:!0});const e=Dr(),t=xi(),n=Hae(),i={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:s})=>(0,e._)`{allowedValue: ${s}}`},code(s){const{gen:o,data:a,$data:u,schemaCode:l,schema:c}=s;u||c&&typeof c=="object"?s.fail$data((0,e._)`!${(0,t.useFunc)(o,n.default)}(${a}, ${l})`):s.fail((0,e._)`${c} !== ${a}`)}};return yM.default=i,yM}var vM={},rxe;function Zsn(){if(rxe)return vM;rxe=1,Object.defineProperty(vM,"__esModule",{value:!0});const e=Dr(),t=xi(),n=Hae(),i={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:s})=>(0,e._)`{allowedValues: ${s}}`},code(s){const{gen:o,data:a,$data:u,schema:l,schemaCode:c,it:f}=s;if(!u&&l.length===0)throw new Error("enum must have non-empty array");const d=l.length>=f.opts.loopEnum;let h;const p=()=>h??(h=(0,t.useFunc)(o,n.default));let m;if(d||u)m=o.let("valid"),s.block$data(m,y);else{if(!Array.isArray(l))throw new Error("ajv implementation error");const b=o.const("vSchema",c);m=(0,e.or)(...l.map((w,E)=>v(b,E)))}s.pass(m);function y(){o.assign(m,!1),o.forOf("v",c,b=>o.if((0,e._)`${p()}(${a}, ${b})`,()=>o.assign(m,!0).break()))}function v(b,w){const E=l[w];return typeof E=="object"&&E!==null?(0,e._)`${p()}(${a}, ${b}[${w}])`:(0,e._)`${a} === ${E}`}}};return vM.default=i,vM}var ixe;function eon(){if(ixe)return oM;ixe=1,Object.defineProperty(oM,"__esModule",{value:!0});const e=Vsn(),t=Hsn(),n=Wsn(),r=Gsn(),i=Ysn(),s=Ksn(),o=Xsn(),a=Qsn(),u=Jsn(),l=Zsn(),c=[e.default,t.default,n.default,r.default,i.default,s.default,o.default,a.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},u.default,l.default];return oM.default=c,oM}var bM={},YS={},sxe;function o9e(){if(sxe)return YS;sxe=1,Object.defineProperty(YS,"__esModule",{value:!0}),YS.validateAdditionalItems=void 0;const e=Dr(),t=xi(),r={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:s}})=>(0,e.str)`must NOT have more than ${s} items`,params:({params:{len:s}})=>(0,e._)`{limit: ${s}}`},code(s){const{parentSchema:o,it:a}=s,{items:u}=o;if(!Array.isArray(u)){(0,t.checkStrictMode)(a,'"additionalItems" is ignored when "items" is not an array of schemas');return}i(s,u)}};function i(s,o){const{gen:a,schema:u,data:l,keyword:c,it:f}=s;f.items=!0;const d=a.const("len",(0,e._)`${l}.length`);if(u===!1)s.setParams({len:o.length}),s.pass((0,e._)`${d} <= ${o.length}`);else if(typeof u=="object"&&!(0,t.alwaysValidSchema)(f,u)){const p=a.var("valid",(0,e._)`${d} <= ${o.length}`);a.if((0,e.not)(p),()=>h(p)),s.ok(p)}function h(p){a.forRange("i",o.length,d,m=>{s.subschema({keyword:c,dataProp:m,dataPropType:t.Type.Num},p),f.allErrors||a.if((0,e.not)(p),()=>a.break())})}}return YS.validateAdditionalItems=i,YS.default=r,YS}var xM={},KS={},oxe;function a9e(){if(oxe)return KS;oxe=1,Object.defineProperty(KS,"__esModule",{value:!0}),KS.validateTuple=void 0;const e=Dr(),t=xi(),n=cm(),r={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(s){const{schema:o,it:a}=s;if(Array.isArray(o))return i(s,"additionalItems",o);a.items=!0,!(0,t.alwaysValidSchema)(a,o)&&s.ok((0,n.validateArray)(s))}};function i(s,o,a=s.schema){const{gen:u,parentSchema:l,data:c,keyword:f,it:d}=s;m(l),d.opts.unevaluated&&a.length&&d.items!==!0&&(d.items=t.mergeEvaluated.items(u,a.length,d.items));const h=u.name("valid"),p=u.const("len",(0,e._)`${c}.length`);a.forEach((y,v)=>{(0,t.alwaysValidSchema)(d,y)||(u.if((0,e._)`${p} > ${v}`,()=>s.subschema({keyword:f,schemaProp:v,dataProp:v},h)),s.ok(h))});function m(y){const{opts:v,errSchemaPath:b}=d,w=a.length,E=w===y.minItems&&(w===y.maxItems||y[o]===!1);if(v.strictTuples&&!E){const T=`"${f}" is ${w}-tuple, but minItems or maxItems/${o} are not specified or different at path "${b}"`;(0,t.checkStrictMode)(d,T,v.strictTuples)}}}return KS.validateTuple=i,KS.default=r,KS}var axe;function ton(){if(axe)return xM;axe=1,Object.defineProperty(xM,"__esModule",{value:!0});const e=a9e(),t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:n=>(0,e.validateTuple)(n,"items")};return xM.default=t,xM}var _M={},uxe;function non(){if(uxe)return _M;uxe=1,Object.defineProperty(_M,"__esModule",{value:!0});const e=Dr(),t=xi(),n=cm(),r=o9e(),s={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:o}})=>(0,e.str)`must NOT have more than ${o} items`,params:({params:{len:o}})=>(0,e._)`{limit: ${o}}`},code(o){const{schema:a,parentSchema:u,it:l}=o,{prefixItems:c}=u;l.items=!0,!(0,t.alwaysValidSchema)(l,a)&&(c?(0,r.validateAdditionalItems)(o,c):o.ok((0,n.validateArray)(o)))}};return _M.default=s,_M}var wM={},lxe;function ron(){if(lxe)return wM;lxe=1,Object.defineProperty(wM,"__esModule",{value:!0});const e=Dr(),t=xi(),r={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:i,max:s}})=>s===void 0?(0,e.str)`must contain at least ${i} valid item(s)`:(0,e.str)`must contain at least ${i} and no more than ${s} valid item(s)`,params:({params:{min:i,max:s}})=>s===void 0?(0,e._)`{minContains: ${i}}`:(0,e._)`{minContains: ${i}, maxContains: ${s}}`},code(i){const{gen:s,schema:o,parentSchema:a,data:u,it:l}=i;let c,f;const{minContains:d,maxContains:h}=a;l.opts.next?(c=d===void 0?1:d,f=h):c=1;const p=s.const("len",(0,e._)`${u}.length`);if(i.setParams({min:c,max:f}),f===void 0&&c===0){(0,t.checkStrictMode)(l,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(f!==void 0&&c>f){(0,t.checkStrictMode)(l,'"minContains" > "maxContains" is always invalid'),i.fail();return}if((0,t.alwaysValidSchema)(l,o)){let w=(0,e._)`${p} >= ${c}`;f!==void 0&&(w=(0,e._)`${w} && ${p} <= ${f}`),i.pass(w);return}l.items=!0;const m=s.name("valid");f===void 0&&c===1?v(m,()=>s.if(m,()=>s.break())):c===0?(s.let(m,!0),f!==void 0&&s.if((0,e._)`${u}.length > 0`,y)):(s.let(m,!1),y()),i.result(m,()=>i.reset());function y(){const w=s.name("_valid"),E=s.let("count",0);v(w,()=>s.if(w,()=>b(E)))}function v(w,E){s.forRange("i",0,p,T=>{i.subschema({keyword:"contains",dataProp:T,dataPropType:t.Type.Num,compositeRule:!0},w),E()})}function b(w){s.code((0,e._)`${w}++`),f===void 0?s.if((0,e._)`${w} >= ${c}`,()=>s.assign(m,!0).break()):(s.if((0,e._)`${w} > ${f}`,()=>s.assign(m,!1).break()),c===1?s.assign(m,!0):s.if((0,e._)`${w} >= ${c}`,()=>s.assign(m,!0)))}}};return wM.default=r,wM}var Pq={},cxe;function ion(){return cxe||(cxe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Dr(),n=xi(),r=cm();e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const y=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(y,()=>{for(const v of m)(0,r.checkReportMissingProp)(u,v)}):(c.if((0,t._)`${y} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const y=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(y,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i}(Pq)),Pq}var EM={},fxe;function son(){if(fxe)return EM;fxe=1,Object.defineProperty(EM,"__esModule",{value:!0});const e=Dr(),t=xi(),r={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:i})=>(0,e._)`{propertyName: ${i.propertyName}}`},code(i){const{gen:s,schema:o,data:a,it:u}=i;if((0,t.alwaysValidSchema)(u,o))return;const l=s.name("valid");s.forIn("key",a,c=>{i.setParams({propertyName:c}),i.subschema({keyword:"propertyNames",data:c,dataTypes:["string"],propertyName:c,compositeRule:!0},l),s.if((0,e.not)(l),()=>{i.error(!0),u.allErrors||s.break()})}),i.ok(l)}};return EM.default=r,EM}var TM={},dxe;function u9e(){if(dxe)return TM;dxe=1,Object.defineProperty(TM,"__esModule",{value:!0});const e=cm(),t=Dr(),n=Bx(),r=xi(),s={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:o})=>(0,t._)`{additionalProperty: ${o.additionalProperty}}`},code(o){const{gen:a,schema:u,parentSchema:l,data:c,errsCount:f,it:d}=o;if(!f)throw new Error("ajv implementation error");const{allErrors:h,opts:p}=d;if(d.props=!0,p.removeAdditional!=="all"&&(0,r.alwaysValidSchema)(d,u))return;const m=(0,e.allSchemaProperties)(l.properties),y=(0,e.allSchemaProperties)(l.patternProperties);v(),o.ok((0,t._)`${f} === ${n.default.errors}`);function v(){a.forIn("key",c,A=>{!m.length&&!y.length?E(A):a.if(b(A),()=>E(A))})}function b(A){let I;if(m.length>8){const R=(0,r.schemaRefOrVal)(d,l.properties,"properties");I=(0,e.isOwnProperty)(a,R,A)}else m.length?I=(0,t.or)(...m.map(R=>(0,t._)`${A} === ${R}`)):I=t.nil;return y.length&&(I=(0,t.or)(I,...y.map(R=>(0,t._)`${(0,e.usePattern)(o,R)}.test(${A})`))),(0,t.not)(I)}function w(A){a.code((0,t._)`delete ${c}[${A}]`)}function E(A){if(p.removeAdditional==="all"||p.removeAdditional&&u===!1){w(A);return}if(u===!1){o.setParams({additionalProperty:A}),o.error(),h||a.break();return}if(typeof u=="object"&&!(0,r.alwaysValidSchema)(d,u)){const I=a.name("valid");p.removeAdditional==="failing"?(T(A,I,!1),a.if((0,t.not)(I),()=>{o.reset(),w(A)})):(T(A,I),h||a.if((0,t.not)(I),()=>a.break()))}}function T(A,I,R){const D={keyword:"additionalProperties",dataProp:A,dataPropType:r.Type.Str};R===!1&&Object.assign(D,{compositeRule:!0,createErrors:!1,allErrors:!1}),o.subschema(D,I)}}};return TM.default=s,TM}var SM={},hxe;function oon(){if(hxe)return SM;hxe=1,Object.defineProperty(SM,"__esModule",{value:!0});const e=q7(),t=cm(),n=xi(),r=u9e(),i={keyword:"properties",type:"object",schemaType:"object",code(s){const{gen:o,schema:a,parentSchema:u,data:l,it:c}=s;c.opts.removeAdditional==="all"&&u.additionalProperties===void 0&&r.default.code(new e.KeywordCxt(c,r.default,"additionalProperties"));const f=(0,t.allSchemaProperties)(a);for(const y of f)c.definedProperties.add(y);c.opts.unevaluated&&f.length&&c.props!==!0&&(c.props=n.mergeEvaluated.props(o,(0,n.toHash)(f),c.props));const d=f.filter(y=>!(0,n.alwaysValidSchema)(c,a[y]));if(d.length===0)return;const h=o.name("valid");for(const y of d)p(y)?m(y):(o.if((0,t.propertyInData)(o,l,y,c.opts.ownProperties)),m(y),c.allErrors||o.else().var(h,!0),o.endIf()),s.it.definedProperties.add(y),s.ok(h);function p(y){return c.opts.useDefaults&&!c.compositeRule&&a[y].default!==void 0}function m(y){s.subschema({keyword:"properties",schemaProp:y,dataProp:y},h)}}};return SM.default=i,SM}var CM={},pxe;function aon(){if(pxe)return CM;pxe=1,Object.defineProperty(CM,"__esModule",{value:!0});const e=cm(),t=Dr(),n=xi(),r=xi(),i={keyword:"patternProperties",type:"object",schemaType:"object",code(s){const{gen:o,schema:a,data:u,parentSchema:l,it:c}=s,{opts:f}=c,d=(0,e.allSchemaProperties)(a),h=d.filter(E=>(0,n.alwaysValidSchema)(c,a[E]));if(d.length===0||h.length===d.length&&(!c.opts.unevaluated||c.props===!0))return;const p=f.strictSchema&&!f.allowMatchingProperties&&l.properties,m=o.name("valid");c.props!==!0&&!(c.props instanceof t.Name)&&(c.props=(0,r.evaluatedPropsToName)(o,c.props));const{props:y}=c;v();function v(){for(const E of d)p&&b(E),c.allErrors?w(E):(o.var(m,!0),w(E),o.if(m))}function b(E){for(const T in p)new RegExp(E).test(T)&&(0,n.checkStrictMode)(c,`property ${T} matches pattern ${E} (use allowMatchingProperties)`)}function w(E){o.forIn("key",u,T=>{o.if((0,t._)`${(0,e.usePattern)(s,E)}.test(${T})`,()=>{const A=h.includes(E);A||s.subschema({keyword:"patternProperties",schemaProp:E,dataProp:T,dataPropType:r.Type.Str},m),c.opts.unevaluated&&y!==!0?o.assign((0,t._)`${y}[${T}]`,!0):!A&&!c.allErrors&&o.if((0,t.not)(m),()=>o.break())})})}}};return CM.default=i,CM}var AM={},mxe;function uon(){if(mxe)return AM;mxe=1,Object.defineProperty(AM,"__esModule",{value:!0});const e=xi(),t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(n){const{gen:r,schema:i,it:s}=n;if((0,e.alwaysValidSchema)(s,i)){n.fail();return}const o=r.name("valid");n.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),n.failResult(o,()=>n.reset(),()=>n.error())},error:{message:"must NOT be valid"}};return AM.default=t,AM}var IM={},gxe;function lon(){if(gxe)return IM;gxe=1,Object.defineProperty(IM,"__esModule",{value:!0});const t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:cm().validateUnion,error:{message:"must match a schema in anyOf"}};return IM.default=t,IM}var kM={},yxe;function con(){if(yxe)return kM;yxe=1,Object.defineProperty(kM,"__esModule",{value:!0});const e=Dr(),t=xi(),r={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:i})=>(0,e._)`{passingSchemas: ${i.passing}}`},code(i){const{gen:s,schema:o,parentSchema:a,it:u}=i;if(!Array.isArray(o))throw new Error("ajv implementation error");if(u.opts.discriminator&&a.discriminator)return;const l=o,c=s.let("valid",!1),f=s.let("passing",null),d=s.name("_valid");i.setParams({passing:f}),s.block(h),i.result(c,()=>i.reset(),()=>i.error(!0));function h(){l.forEach((p,m)=>{let y;(0,t.alwaysValidSchema)(u,p)?s.var(d,!0):y=i.subschema({keyword:"oneOf",schemaProp:m,compositeRule:!0},d),m>0&&s.if((0,e._)`${d} && ${c}`).assign(c,!1).assign(f,(0,e._)`[${f}, ${m}]`).else(),s.if(d,()=>{s.assign(c,!0),s.assign(f,m),y&&i.mergeEvaluated(y,e.Name)})})}}};return kM.default=r,kM}var RM={},vxe;function fon(){if(vxe)return RM;vxe=1,Object.defineProperty(RM,"__esModule",{value:!0});const e=xi(),t={keyword:"allOf",schemaType:"array",code(n){const{gen:r,schema:i,it:s}=n;if(!Array.isArray(i))throw new Error("ajv implementation error");const o=r.name("valid");i.forEach((a,u)=>{if((0,e.alwaysValidSchema)(s,a))return;const l=n.subschema({keyword:"allOf",schemaProp:u},o);n.ok(o),n.mergeEvaluated(l)})}};return RM.default=t,RM}var NM={},bxe;function don(){if(bxe)return NM;bxe=1,Object.defineProperty(NM,"__esModule",{value:!0});const e=Dr(),t=xi(),r={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:s})=>(0,e.str)`must match "${s.ifClause}" schema`,params:({params:s})=>(0,e._)`{failingKeyword: ${s.ifClause}}`},code(s){const{gen:o,parentSchema:a,it:u}=s;a.then===void 0&&a.else===void 0&&(0,t.checkStrictMode)(u,'"if" without "then" and "else" is ignored');const l=i(u,"then"),c=i(u,"else");if(!l&&!c)return;const f=o.let("valid",!0),d=o.name("_valid");if(h(),s.reset(),l&&c){const m=o.let("ifClause");s.setParams({ifClause:m}),o.if(d,p("then",m),p("else",m))}else l?o.if(d,p("then")):o.if((0,e.not)(d),p("else"));s.pass(f,()=>s.error(!0));function h(){const m=s.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},d);s.mergeEvaluated(m)}function p(m,y){return()=>{const v=s.subschema({keyword:m},d);o.assign(f,d),s.mergeValidEvaluated(v,f),y?o.assign(y,(0,e._)`${m}`):s.setParams({ifClause:m})}}}};function i(s,o){const a=s.schema[o];return a!==void 0&&!(0,t.alwaysValidSchema)(s,a)}return NM.default=r,NM}var DM={},xxe;function hon(){if(xxe)return DM;xxe=1,Object.defineProperty(DM,"__esModule",{value:!0});const e=xi(),t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:n,parentSchema:r,it:i}){r.if===void 0&&(0,e.checkStrictMode)(i,`"${n}" without "if" is ignored`)}};return DM.default=t,DM}var _xe;function pon(){if(_xe)return bM;_xe=1,Object.defineProperty(bM,"__esModule",{value:!0});const e=o9e(),t=ton(),n=a9e(),r=non(),i=ron(),s=ion(),o=son(),a=u9e(),u=oon(),l=aon(),c=uon(),f=lon(),d=con(),h=fon(),p=don(),m=hon();function y(v=!1){const b=[c.default,f.default,d.default,h.default,p.default,m.default,o.default,a.default,s.default,u.default,l.default];return v?b.push(t.default,r.default):b.push(e.default,n.default),b.push(i.default),b}return bM.default=y,bM}var PM={},OM={},wxe;function mon(){if(wxe)return OM;wxe=1,Object.defineProperty(OM,"__esModule",{value:!0});const e=Dr(),n={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must match format "${r}"`,params:({schemaCode:r})=>(0,e._)`{format: ${r}}`},code(r,i){const{gen:s,data:o,$data:a,schema:u,schemaCode:l,it:c}=r,{opts:f,errSchemaPath:d,schemaEnv:h,self:p}=c;if(!f.validateFormats)return;a?m():y();function m(){const v=s.scopeValue("formats",{ref:p.formats,code:f.code.formats}),b=s.const("fDef",(0,e._)`${v}[${l}]`),w=s.let("fType"),E=s.let("format");s.if((0,e._)`typeof ${b} == "object" && !(${b} instanceof RegExp)`,()=>s.assign(w,(0,e._)`${b}.type || "string"`).assign(E,(0,e._)`${b}.validate`),()=>s.assign(w,(0,e._)`"string"`).assign(E,b)),r.fail$data((0,e.or)(T(),A()));function T(){return f.strictSchema===!1?e.nil:(0,e._)`${l} && !${E}`}function A(){const I=h.$async?(0,e._)`(${b}.async ? await ${E}(${o}) : ${E}(${o}))`:(0,e._)`${E}(${o})`,R=(0,e._)`(typeof ${E} == "function" ? ${I} : ${E}.test(${o}))`;return(0,e._)`${E} && ${E} !== true && ${w} === ${i} && !${R}`}}function y(){const v=p.formats[u];if(!v){T();return}if(v===!0)return;const[b,w,E]=A(v);b===i&&r.pass(I());function T(){if(f.strictSchema===!1){p.logger.warn(R());return}throw new Error(R());function R(){return`unknown format "${u}" ignored in schema at path "${d}"`}}function A(R){const D=R instanceof RegExp?(0,e.regexpCode)(R):f.code.formats?(0,e._)`${f.code.formats}${(0,e.getProperty)(u)}`:void 0,M=s.scopeValue("formats",{key:u,ref:R,code:D});return typeof R=="object"&&!(R instanceof RegExp)?[R.type||"string",R.validate,(0,e._)`${M}.validate`]:["string",R,M]}function I(){if(typeof v=="object"&&!(v instanceof RegExp)&&v.async){if(!h.$async)throw new Error("async format in sync schema");return(0,e._)`await ${E}(${o})`}return typeof w=="function"?(0,e._)`${E}(${o})`:(0,e._)`${E}.test(${o})`}}}};return OM.default=n,OM}var Exe;function gon(){if(Exe)return PM;Exe=1,Object.defineProperty(PM,"__esModule",{value:!0});const t=[mon().default];return PM.default=t,PM}var B_={},Txe;function yon(){return Txe||(Txe=1,Object.defineProperty(B_,"__esModule",{value:!0}),B_.contentVocabulary=B_.metadataVocabulary=void 0,B_.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],B_.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),B_}var Sxe;function von(){if(Sxe)return rM;Sxe=1,Object.defineProperty(rM,"__esModule",{value:!0});const e=zsn(),t=eon(),n=pon(),r=gon(),i=yon(),s=[e.default,t.default,(0,n.default)(),r.default,i.metadataVocabulary,i.contentVocabulary];return rM.default=s,rM}var MM={},NR={},Cxe;function bon(){if(Cxe)return NR;Cxe=1,Object.defineProperty(NR,"__esModule",{value:!0}),NR.DiscrError=void 0;var e;return function(t){t.Tag="tag",t.Mapping="mapping"}(e||(NR.DiscrError=e={})),NR}var Axe;function xon(){if(Axe)return MM;Axe=1,Object.defineProperty(MM,"__esModule",{value:!0});const e=Dr(),t=bon(),n=Vae(),r=W7(),i=xi(),o={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:a,tagName:u}})=>a===t.DiscrError.Tag?`tag "${u}" must be string`:`value of tag "${u}" must be in oneOf`,params:({params:{discrError:a,tag:u,tagName:l}})=>(0,e._)`{error: ${a}, tag: ${l}, tagValue: ${u}}`},code(a){const{gen:u,data:l,schema:c,parentSchema:f,it:d}=a,{oneOf:h}=f;if(!d.opts.discriminator)throw new Error("discriminator: requires discriminator option");const p=c.propertyName;if(typeof p!="string")throw new Error("discriminator: requires propertyName");if(c.mapping)throw new Error("discriminator: mapping is not supported");if(!h)throw new Error("discriminator: requires oneOf keyword");const m=u.let("valid",!1),y=u.const("tag",(0,e._)`${l}${(0,e.getProperty)(p)}`);u.if((0,e._)`typeof ${y} == "string"`,()=>v(),()=>a.error(!1,{discrError:t.DiscrError.Tag,tag:y,tagName:p})),a.ok(m);function v(){const E=w();u.if(!1);for(const T in E)u.elseIf((0,e._)`${y} === ${T}`),u.assign(m,b(E[T]));u.else(),a.error(!1,{discrError:t.DiscrError.Mapping,tag:y,tagName:p}),u.endIf()}function b(E){const T=u.name("valid"),A=a.subschema({keyword:"oneOf",schemaProp:E},T);return a.mergeEvaluated(A,e.Name),T}function w(){var E;const T={},A=R(f);let I=!0;for(let $=0;$<h.length;$++){let U=h[$];if(U!=null&&U.$ref&&!(0,i.schemaHasRulesButRef)(U,d.self.RULES)){const H=U.$ref;if(U=n.resolveRef.call(d.self,d.schemaEnv.root,d.baseId,H),U instanceof n.SchemaEnv&&(U=U.schema),U===void 0)throw new r.default(d.opts.uriResolver,d.baseId,H)}const F=(E=U==null?void 0:U.properties)===null||E===void 0?void 0:E[p];if(typeof F!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${p}"`);I=I&&(A||R(U)),D(F,$)}if(!I)throw new Error(`discriminator: "${p}" must be required`);return T;function R({required:$}){return Array.isArray($)&&$.includes(p)}function D($,U){if($.const)M($.const,U);else if($.enum)for(const F of $.enum)M(F,U);else throw new Error(`discriminator: "properties/${p}" must have "const" or "enum"`)}function M($,U){if(typeof $!="string"||$ in T)throw new Error(`discriminator: "${p}" values must be unique strings`);T[$]=U}}}};return MM.default=o,MM}const _on="http://json-schema.org/draft-07/schema#",won="http://json-schema.org/draft-07/schema#",Eon="Core schema meta-schema",Ton={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Son=["object","boolean"],Con={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Aon={$schema:_on,$id:won,title:Eon,definitions:Ton,type:Son,properties:Con,default:!0};var Ixe;function Ion(){return Ixe||(Ixe=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=Bsn(),r=von(),i=xon(),s=Aon,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=q7();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=Dr();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=zae();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=W7();Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})}(J6,J6.exports)),J6.exports}var kon=Ion();const qae=hh(kon),Ron="#/definitions/StudyConfig",Non="http://json-schema.org/draft-07/schema#",Don=JSON.parse('{"Answer":{"additionalProperties":false,"description":"The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.\\n\\nAnswers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.\\n\\nHere\'s an example of how to use the Answer interface to define the correct answer to a question:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/question.md\\", \\"response\\": [  {    \\"id\\": \\"response1\\",    \\"prompt\\": \\"What is 2 + 2?\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"numerical\\"  } ] \\"correctAnswer\\": [{  \\"id\\": \\"response1\\",  \\"answer\\": 4 }] } ```\\n\\nIn this example, the correct answer to the question \\"What is 2 + 2?\\" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.","properties":{"acceptableHigh":{"description":"The acceptable high value for the answer. This is used to define a range of acceptable answers.","type":"number"},"acceptableLow":{"description":"The acceptable low value for the answer. This is used to define a range of acceptable answers.","type":"number"},"answer":{"description":"The correct answer to the question."},"id":{"description":"The id of the answer. This is used to identify the answer in the data file.","type":"string"}},"required":["id","answer"],"type":"object"},"BaseComponents":{"additionalProperties":{"additionalProperties":false,"properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega"],"type":"string"}},"type":"object"},"description":"The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\\n\\n Using baseComponents:\\n\\n```js \\"baseComponents\\": { \\"my-image-component\\": { \\"instructionLocation\\": \\"sidebar\\", \\"nextButtonLocation\\": \\"sidebar\\", \\"path\\": \\"<study-name>/assets/my-image.jpg\\", \\"response\\": [   {     \\"id\\": \\"my-image-id\\",     \\"options\\": [\\"Europe\\", \\"Japan\\", \\"USA\\"],     \\"prompt\\": \\"Your Selected Answer:\\",     \\"type\\": \\"dropdown\\"   } ], \\"type\\": \\"image\\" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `\\"baseComponent\\":\\"my-image-component\\"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js \\"components\\": { \\"q1\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with largest GDP\\", \\"instruction\\": \\"Which region has the largest GDP?\\" }, \\"q2\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with lowest GDP\\", \\"instruction\\": \\"Which region has the lowest GDP?\\" }, \\"q3\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with highest exports of Wheat\\", \\"instruction\\": \\"Which region had the most Wheat exported in 2022?\\" } } ```","type":"object"},"CheckboxResponse":{"additionalProperties":false,"description":"The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\\n\\n```js { \\"id\\": \\"q7\\", \\"prompt\\": \\"Checkbox example (not required)\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"checkbox\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\", \\"Option 3\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the checkboxes horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"maxSelections":{"description":"The maximum number of selections that are required.","type":"number"},"minSelections":{"description":"The minimum number of selections that are required.","type":"number"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"checkbox","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the checkboxes with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ComponentBlock":{"additionalProperties":false,"description":"The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\\n\\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\\n\\nHere\'s a snippet that shows how to use the random order:\\n\\n```js { \\"order\\": \\"random\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\\n\\n```js [ [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component1\\", \\"component3\\", \\"component2\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], ... ] ```\\n\\nIn addition to the order property, the ComponentBlock interface also includes the `\\"numSamples\\"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `\\"numSamples\\"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ], \\"numSamples\\": 2 } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\"], [\\"component2\\", \\"component3\\"], [\\"component3\\", \\"component1\\"], ... ] ```\\n\\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\\n\\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.","properties":{"components":{"description":"The components that are included in the order.","items":{"anyOf":[{"type":"string"},{"$ref":"#/definitions/ComponentBlock"}]},"type":"array"},"id":{"description":"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.","type":"string"},"interruptions":{"description":"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.","items":{"$ref":"#/definitions/InterruptionBlock"},"type":"array"},"numSamples":{"description":"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.","type":"number"},"order":{"description":"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.","enum":["random","latinSquare","fixed"],"type":"string"},"skip":{"$ref":"#/definitions/SkipConditions","description":"The skip conditions for the block."}},"required":["order","components"],"type":"object"},"ComponentBlockCondition":{"additionalProperties":false,"description":"The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.\\n\\nAnswers are checked against the correct answers defined in the IndividualComponent\'s [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.\\n\\nYou might use this if a participant answers two questions in a block incorrectly. Here\'s an example of how to use the ComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"check\\": \\"block\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.\\n\\nWhen the condition is met, the participant will immediately be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"block","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["check","condition","value","to"],"type":"object"},"DeterministicInterruption":{"additionalProperties":false,"description":"The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.\\n\\nFor example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.\\n\\nThe components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the DeterministicInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"firstLocation\\": 2,   \\"spacing\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"firstLocation":{"description":"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).","type":"number"},"spacing":{"description":"The number of components between breaks.","type":"number"}},"required":["firstLocation","spacing","components"],"type":"object"},"DropdownResponse":{"additionalProperties":false,"description":"The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\\n\\nExample: ```js { \\"id\\": \\"q-color\\", \\"prompt\\": \\"What is your favorite color?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"dropdown\\", \\"placeholder\\": \\"Please choose your favorite color\\", \\"options\\": [\\"Red\\", \\"Blue\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed in the dropdown.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"dropdown","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ImageComponent":{"additionalProperties":false,"description":"The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\\n\\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { \\"type\\": \\"image\\", \\"path\\": \\"<study-name>/assets/image.jpg\\", \\"style\\": { \\"maxWidth\\": \\"50%\\" } } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"image","type":"string"}},"required":["path","response","type"],"type":"object"},"IndividualComponent":{"anyOf":[{"$ref":"#/definitions/MarkdownComponent"},{"$ref":"#/definitions/ReactComponent"},{"$ref":"#/definitions/ImageComponent"},{"$ref":"#/definitions/WebsiteComponent"},{"$ref":"#/definitions/QuestionnaireComponent"},{"$ref":"#/definitions/VegaComponent"}]},"IndividualComponentAllResponsesCondition":{"additionalProperties":false,"description":"The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\n\\nHere\'s an example of how to use the IndividualComponentAllResponsesCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"responses\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, if all responses to the component with the ID \\"attentionCheck\\" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"responses","description":"The check we\'ll perform.","type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"}},"required":["name","check","to"],"type":"object"},"IndividualComponentSingleResponseCondition":{"additionalProperties":false,"description":"The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\nFor example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here\'s an example of how to use the IndividualComponentSingleResponseCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"response\\",   \\"responseId\\": \\"attentionCheckResponse\\",   \\"value\\": \\"the right answer\\",   \\"comparison\\": \\"equal\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, we assign our skip logic to the component whose ID is \\"attentionCheck\\". If the answer given to the response \\"attentionCheckResponse\\" is equal to \\"the right answer\\", then the user will be redirected to the end of the study. If the response is _not_ equal to \\"the right answer\\", then the participant will continue to the next component in the sequence.","properties":{"check":{"const":"response","description":"The check we\'ll perform.","type":"string"},"comparison":{"description":"The comparison to use.","enum":["equal","notEqual"],"type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"responseId":{"description":"The response id to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The value to check.","type":["string","number"]}},"required":["name","check","responseId","value","comparison","to"],"type":"object"},"InheritedComponent":{"additionalProperties":false,"description":"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"baseComponent":{"type":"string"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega"],"type":"string"}},"required":["baseComponent"],"type":"object"},"InterruptionBlock":{"anyOf":[{"$ref":"#/definitions/DeterministicInterruption"},{"$ref":"#/definitions/RandomInterruption"}],"description":"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},"LikertResponse":{"additionalProperties":false,"description":"The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as \'Strongly Disagree\' and \'Strongly Agree\'.\\n\\nExample for a five-point Likert Scale:\\n\\n```js { \\"id\\": \\"q-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"likert\\", \\"leftLabel\\": \\"Not Enjoyable\\", \\"rightLabel\\": \\"Very Enjoyable\\", \\"numItems\\": 5 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the likert scale. E.g Strongly Disagree","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"numItems":{"description":"The number of options to render.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the likert scale. E.g Strongly Agree","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"likert","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","numItems","prompt","type"],"type":"object"},"LongTextResponse":{"additionalProperties":false,"description":"The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { \\"id\\": \\"q-name\\", \\"prompt\\": \\"What is your first name?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"longText\\", \\"placeholder\\": \\"Please enter your first name\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"longText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"MarkdownComponent":{"additionalProperties":false,"description":"The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/help.md\\", \\"response\\": [] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"markdown","type":"string"}},"required":["path","response","type"],"type":"object"},"MatrixResponse":{"additionalProperties":false,"description":"The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, `answerOptions` can be set to one of the following custom strings: \'satisfaction5\',\'satisfaction7\', \'likely5\', \'likely7\'. This will automatically generate the appropriate headers for the matrix.\\n\\nExample for a 5-scale satisfaction matrix with three questions:\\n\\n```js { \\"id\\": \\"multi-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-radio\\", \\"answerOptions\\": \\"satisfaction5\\", \\"questionOptions\\": [  \\"The tool we created\\",  \\"The technique we developed\\",  \\"The authors of the tools\\" ] } ```\\n\\nHere\'s an example using custom columns (answerOptions):\\n\\n```js { \\"id\\": \\"multi-custom\\", \\"prompt\\": \\"Which categories do the following items belong to?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-checkbox\\", \\"answerOptions\\": [  \\"Has Legs\\",  \\"Has Wings\\",  \\"Can Swim\\" ], \\"questionOptions\\": [  \\"Dog\\",  \\"Snake\\",  \\"Eagle\\",  \\"Salmon\\",  \\"Platypus\\" ]\\n\\n} ```","properties":{"answerOptions":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"const":"likely5","type":"string"},{"const":"likely7","type":"string"},{"const":"satisfaction5","type":"string"},{"const":"satisfaction7","type":"string"}],"description":"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"questionOptions":{"description":"The question options (rows) are the prompts for each response you\'d like to record.","items":{"type":"string"},"type":"array"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"enum":["matrix-radio","matrix-checkbox"],"type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["answerOptions","id","prompt","questionOptions","type"],"type":"object"},"NumberOption":{"additionalProperties":false,"description":"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"number"}},"required":["label","value"],"type":"object"},"NumericalResponse":{"additionalProperties":false,"description":"The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\\n\\nExample: ```js { \\"id\\": \\"q-numerical\\", \\"prompt\\": \\"Numerical example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"numerical\\", \\"placeholder\\": \\"Enter your age, range from 0 - 120\\", \\"max\\": 120, \\"min\\": 0 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"max":{"description":"The maximum value that is accepted in the input.","type":"number"},"min":{"description":"The minimum value that is accepted in the input.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"numerical","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"QuestionnaireComponent":{"additionalProperties":false,"description":"A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\\n\\n```js { \\"type\\": \\"questionnaire\\", \\"response\\": [  {    \\"id\\": \\"gender\\",    \\"prompt\\": \\"Gender:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"checkbox\\",    \\"options\\": [\\"Man\\", \\"Woman\\", \\"Genderqueer\\", \\"Third-gender\\", ...]  } ] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"questionnaire","type":"string"}},"required":["response","type"],"type":"object"},"RadioResponse":{"additionalProperties":false,"description":"The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\\n\\nExample: ```js { \\"id\\": \\"q-radio\\", \\"prompt\\": \\"Radio button example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"radio\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the radio buttons horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the radio group. Used in Likert scales for example","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the radio group. Used in Likert scales for example","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"radio","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the radios with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"RandomInterruption":{"additionalProperties":false,"description":"The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\\n\\nFor example, if you want to show a single interruption randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 1. If you want to show 3 interruptions randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 3.\\n\\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the RandomInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"spacing\\": \\"random\\",   \\"numInterruptions\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"interruption1\\", \\"interruption2\\", \\"component5\\", \\"component6], [\\"component1\\", \\"component2\\" \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"interruption1\\", \\"interruption2\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"numInterruptions":{"description":"The number of times the interruption will be randomly added","type":"number"},"spacing":{"const":"random","description":"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.","type":"string"}},"required":["spacing","numInterruptions","components"],"type":"object"},"ReactComponent":{"additionalProperties":false,"description":"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\\n\\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\\n\\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\\n\\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\\n\\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don\'t use the default answer interface, and instead have something more unique.\\n\\nSo, for example, if I had the following ReactComponent in my config ```js { type: \'react-component\'; path: \'my_study/CoolComponent.tsx\'; parameters: {  name: \'Zach\';  age: 26; } } ```\\n\\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\\n\\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\\n\\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/2.0.0-rc7/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/example-brush-interactions (https://github.com/revisit-studies/study/tree/2.0.0-rc7/src/public/example-brush-interactions/assets)","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},"path":{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"react-component","type":"string"}},"required":["path","response","type"],"type":"object"},"ReactiveResponse":{"additionalProperties":false,"description":"The ReactiveResponse interface is used to define the properties of a reactive response. ReactiveResponses render as a list, that is connected to a WebsiteComponent, VegaComponent, or ReactComponent. When data is sent from the components, it is displayed in the list.\\n\\n```js { \\"id\\": \\"reactiveResponse\\", \\"prompt\\": \\"Answer clicked in the stimulus\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"reactive\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"reactive","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"RepeatedComponentBlockCondition":{"additionalProperties":false,"description":"The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.\\n\\nHere\'s an example of how to use the RepeatedComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"repeatedComponent\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of incorrect responses to the repeated component with the name \\"attentionCheck\\" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"repeatedComponent","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"name":{"description":"The name of the repeated component to check (e.g. attentionCheck).","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["name","check","condition","value","to"],"type":"object"},"Response":{"anyOf":[{"$ref":"#/definitions/NumericalResponse"},{"$ref":"#/definitions/ShortTextResponse"},{"$ref":"#/definitions/LongTextResponse"},{"$ref":"#/definitions/LikertResponse"},{"$ref":"#/definitions/DropdownResponse"},{"$ref":"#/definitions/SliderResponse"},{"$ref":"#/definitions/RadioResponse"},{"$ref":"#/definitions/CheckboxResponse"},{"$ref":"#/definitions/ReactiveResponse"},{"$ref":"#/definitions/MatrixResponse"}]},"ResponseBlockLocation":{"enum":["sidebar","aboveStimulus","belowStimulus"],"type":"string"},"ShortTextResponse":{"additionalProperties":false,"description":"The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\\n\\n```js { \\"id\\": \\"q-short-text\\", \\"prompt\\": \\"Short text example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"shortText\\", \\"placeholder\\": \\"Enter your answer here\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"shortText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"SkipConditions":{"description":"The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks\' skip conditions will be considered when computing the skip logic.\\n\\nSkip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.\\n\\nSkip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.\\n\\nPlease see the interface definitions for more specific information on the different types of skip conditions.","items":{"anyOf":[{"$ref":"#/definitions/IndividualComponentSingleResponseCondition"},{"$ref":"#/definitions/IndividualComponentAllResponsesCondition"},{"$ref":"#/definitions/ComponentBlockCondition"},{"$ref":"#/definitions/RepeatedComponentBlockCondition"}]},"type":"array"},"SliderResponse":{"additionalProperties":false,"description":"The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\\n\\nExample: ```js { \\"id\\": \\"q-slider\\", \\"prompt\\": \\"How are you feeling?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"slider\\", \\"options\\": [  {    \\"label\\": \\"Bad\\",    \\"value\\": 0  },  {    \\"label\\": \\"OK\\",    \\"value\\": 50  },  {    \\"label\\": \\"Good\\",    \\"value\\": 100  } ] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.","items":{"$ref":"#/definitions/NumberOption"},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"snap":{"description":"Whether the slider should snap between values. Defaults to false. Slider snapping disables the label above the handle.","type":"boolean"},"startingValue":{"description":"The starting value of the slider. Defaults to the minimum value.","type":"number"},"type":{"const":"slider","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"StringOption":{"additionalProperties":false,"description":"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"string"}},"required":["label","value"],"type":"object"},"StudyConfig":{"additionalProperties":false,"description":"The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\\n\\n```js { \\"$schema\\": \\"https://raw.githubusercontent.com/revisit-studies/study/v2.0.2/src/parser/StudyConfigSchema.json\\", \\"studyMetadata\\": {  ... }, \\"uiConfig\\": {  ... }, \\"components\\": {  ... }, \\"sequence\\": {  ... } } ```\\n\\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\\n\\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.","properties":{"$schema":{"description":"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information","type":"string"},"baseComponents":{"$ref":"#/definitions/BaseComponents","description":"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},"components":{"additionalProperties":{"anyOf":[{"$ref":"#/definitions/IndividualComponent"},{"$ref":"#/definitions/InheritedComponent"}]},"description":"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.","type":"object"},"importedLibraries":{"description":"A list of libraries that are used in the study. This is used to import external libraries into the study. Library names are valid namespaces to be used later.","items":{"type":"string"},"type":"array"},"sequence":{"$ref":"#/definitions/ComponentBlock","description":"The order of the components in the study. This might include some randomness."},"studyMetadata":{"$ref":"#/definitions/StudyMetadata","description":"The metadata for the study. This is used to identify the study and version in the data file."},"uiConfig":{"$ref":"#/definitions/UIConfig","description":"The UI configuration for the study. This is used to configure the UI of the app."}},"required":["$schema","studyMetadata","uiConfig","components","sequence"],"type":"object"},"StudyMetadata":{"additionalProperties":false,"description":"The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\\n\\n```js \\"studyMetadata\\" : { \\"title\\": \\"My New Study\\", \\"version\\": \\"pilot\\", \\"authors\\": [  \\"Jane Doe\\",  \\"John Doe\\" ], \\"date\\": \\"2024-04-01\\", \\"description\\": \\"This study is meant to test your ability.\\", \\"organizations\\": [  \\"The reVISit Team\\",  \\"The Other Team\\" ] } ```","properties":{"authors":{"description":"The authors of your study.","items":{"type":"string"},"type":"array"},"date":{"description":"The date of your study, may be useful for the researcher.","type":"string"},"description":{"description":"The description of your study, shown on the landing page.","type":"string"},"organizations":{"description":"The organizations that are associated with your study.","items":{"type":"string"},"type":"array"},"title":{"description":"The title of your study, shown on the landing page.","type":"string"},"version":{"description":"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.","type":"string"}},"required":["title","version","authors","date","description","organizations"],"type":"object"},"UIConfig":{"additionalProperties":false,"description":"The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ \\"contactEmail\\": \\"contact@revisit.dev\\", \\"helpTextPath\\": \\"<study-name>/assets/help.md\\", \\"logoPath\\": \\"<study-name>/assets/logo.jpg\\", \\"withProgressBar\\": true, \\"autoDownloadStudy\\": true \\"autoDownloadTime\\": 5000, \\"studyEndMsg\\": \\"Thank you for completing this study. You\'re the best!\\", \\"sidebar\\": true, \\"windowEventDebounceTime\\": 500, \\"urlParticipantIdParam\\": \\"PROLIFIC_ID\\", \\"numSequences\\": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)","properties":{"autoDownloadStudy":{"description":"Controls whether the study data is automatically downloaded at the end of the study.","type":"boolean"},"autoDownloadTime":{"description":"The time in milliseconds to wait before automatically downloading the study data.","type":"number"},"contactEmail":{"description":"The email address that used during the study if a participant clicks contact.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.","type":"string"},"logoPath":{"description":"The path to the logo image. This is displayed on the landing page and the header.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. Defaults to false.","type":"boolean"},"numSequences":{"description":"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.","type":"number"},"participantNameField":{"description":"The default name field for a participant. Directs revisit to use the task and response id as a name in UI elements. For example, if you wanted the response \'prolificId\' from the task \'introduction\' to be the name, this field would be \'introduction.prolificId\'","type":"string"},"recordStudyAudio":{"description":"Whether or not we want to utilize think-aloud features. If true, will record audio on all components unless deactivated on individual components. Defaults to false.","type":"boolean"},"sidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. Defaults to 300.","type":"number"},"studyEndMsg":{"description":"The message to display when the study ends.","type":"string"},"timeoutReject":{"description":"Whether to redirect a timed out participant to a rejection page. This only works for components where the `nextButtonDisableTime` field is set.","type":"boolean"},"urlParticipantIdParam":{"description":"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered in the study.","type":"boolean"}},"required":["contactEmail","logoPath","withProgressBar","sidebar"],"type":"object"},"VegaComponent":{"anyOf":[{"$ref":"#/definitions/VegaComponentPath"},{"$ref":"#/definitions/VegaComponentConfig"}]},"VegaComponentConfig":{"additionalProperties":false,"description":"The VegaComponentConfig interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component by adding Vega/Vega-Lite specs within the reVISit config itself.\\n\\nTo do this, would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"config\\": { ... vega specs here ...}, }\\n\\nIIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["config","response","type"],"type":"object"},"VegaComponentPath":{"additionalProperties":false,"description":"The VegaComponentPath interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component with path pointing to your Vega/Vega-Lite specs file.\\n\\nFor example, to render a vega based stimuli with a path of `<study-name>/assets/vega.spec.json`, you would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"path\\": \\"<study-name>/assets/vega.spec.json\\", } ```\\n\\nIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec file\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. This signal is then passed to reVISit as the participant\'s response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["path","response","type"],"type":"object"},"WebsiteComponent":{"additionalProperties":false,"description":"The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/assets/website.html\\", } ```\\n\\nTo pass a data from the config to the website, you can use the `parameters` field as below:\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/website.html\\", \\"parameters\\": {  \\"barData\\": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } \\"response\\": [  {    \\"id\\": \\"barChart\\",    \\"prompt\\": \\"Your selected answer:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"reactive\\"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\\n\\n```html <script src=\\"../../revisitUtilities/revisit-communicate.js\\"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\\n\\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\\n\\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\\n\\n```js const trrack = initializeTrrack({ initialState, registry });\\n\\n... Revisit.postProvenance(trrack.graph.backend); ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"},"path":{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"website","type":"string"}},"required":["path","response","type"],"type":"object"}}'),Pon={$ref:Ron,$schema:Non,definitions:Don},Oon="#/definitions/GlobalConfig",Mon="http://json-schema.org/draft-07/schema#",Lon={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},$on={$ref:Oon,$schema:Mon,definitions:Lon};var _N={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var Fon=_N.exports,kxe;function Bon(){return kxe||(kxe=1,function(e,t){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",l=500,c="__lodash_placeholder__",f=1,d=2,h=4,p=1,m=2,y=1,v=2,b=4,w=8,E=16,T=32,A=64,I=128,R=256,D=512,M=30,$="...",U=800,F=16,H=1,Q=2,J=3,ne=1/0,Z=9007199254740991,ie=17976931348623157e292,q=NaN,j=4294967295,G=j-1,V=j>>>1,Y=[["ary",I],["bind",y],["bindKey",v],["curry",w],["curryRight",E],["flip",D],["partial",T],["partialRight",A],["rearg",R]],ee="[object Arguments]",ae="[object Array]",_e="[object AsyncFunction]",pe="[object Boolean]",Te="[object Date]",Le="[object DOMException]",ye="[object Error]",he="[object Function]",$e="[object GeneratorFunction]",Ne="[object Map]",tt="[object Number]",it="[object Null]",Me="[object Object]",Ge="[object Promise]",at="[object Proxy]",yt="[object RegExp]",Tt="[object Set]",Ot="[object String]",qe="[object Symbol]",ft="[object Undefined]",wt="[object WeakMap]",ke="[object WeakSet]",Oe="[object ArrayBuffer]",dt="[object DataView]",Lt="[object Float32Array]",Ft="[object Float64Array]",dn="[object Int8Array]",Dn="[object Int16Array]",Tr="[object Int32Array]",Ri="[object Uint8Array]",Un="[object Uint8ClampedArray]",tr="[object Uint16Array]",Si="[object Uint32Array]",Sr=/\b__p \+= '';/g,Po=/\b(__p \+=) '' \+/g,Qi=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ni=/&(?:amp|lt|gt|quot|#39);/g,Ji=/[&<>"']/g,Xr=RegExp(Ni.source),Oo=RegExp(Ji.source),ic=/<%-([\s\S]+?)%>/g,ga=/<%([\s\S]+?)%>/g,Iu=/<%=([\s\S]+?)%>/g,Qr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Bi=/^\w*$/,si=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Hs=/[\\^$.*+?()[\]{}|]/g,Fr=RegExp(Hs.source),Zi=/^\s+/,Mo=/\s/,co=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ko=/\{\n\/\* \[wrapped with (.+)\] \*/,vl=/,? & /,kh=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Pr=/[()=,{}\[\]\/\s]/,sc=/\\(\\)?/g,ps=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Wa=/\w*$/,Xo=/^[-+]0x[0-9a-f]+$/i,fm=/^0b[01]+$/i,Rh=/^\[object .+?Constructor\]$/,yd=/^0o[0-7]+$/i,vd=/^(?:0|[1-9]\d*)$/,df=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,hf=/($^)/,pf=/['\n\r\u2028\u2029\\]/g,fr="\\ud800-\\udfff",Nh="\\u0300-\\u036f",fo="\\ufe20-\\ufe2f",bl="\\u20d0-\\u20ff",qs=Nh+fo+bl,oc="\\u2700-\\u27bf",Dh="a-z\\xdf-\\xf6\\xf8-\\xff",ac="\\xac\\xb1\\xd7\\xf7",ho="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",dm="\\u2000-\\u206f",po=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ue="A-Z\\xc0-\\xd6\\xd8-\\xde",Se="\\ufe0e\\ufe0f",ge=ac+ho+dm+po,De="[']",Be="["+fr+"]",Re="["+ge+"]",rt="["+qs+"]",bt="\\d+",Et="["+oc+"]",xt="["+Dh+"]",Nt="[^"+fr+ge+bt+oc+Dh+ue+"]",qt="\\ud83c[\\udffb-\\udfff]",In="(?:"+rt+"|"+qt+")",un="[^"+fr+"]",nr="(?:\\ud83c[\\udde6-\\uddff]){2}",ln="[\\ud800-\\udbff][\\udc00-\\udfff]",br="["+ue+"]",Ws="\\u200d",Ga="(?:"+xt+"|"+Nt+")",uc="(?:"+br+"|"+Nt+")",Ph="(?:"+De+"(?:d|ll|m|re|s|t|ve))?",mf="(?:"+De+"(?:D|LL|M|RE|S|T|VE))?",Oh=In+"?",Lo="["+Se+"]?",ms="(?:"+Ws+"(?:"+[un,nr,ln].join("|")+")"+Lo+Oh+")*",$o="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ya="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",gf=Lo+Oh+ms,Ka="(?:"+[Et,nr,ln].join("|")+")"+gf,ku="(?:"+[un+rt+"?",rt,nr,ln,Be].join("|")+")",j1=RegExp(De,"g"),lc=RegExp(rt,"g"),Es=RegExp(qt+"(?="+qt+")|"+ku+gf,"g"),jx=RegExp([br+"?"+xt+"+"+Ph+"(?="+[Re,br,"$"].join("|")+")",uc+"+"+mf+"(?="+[Re,br+Ga,"$"].join("|")+")",br+"?"+Ga+"+"+Ph,br+"+"+mf,Ya,$o,bt,Ka].join("|"),"g"),xg=RegExp("["+Ws+fr+qs+Se+"]"),yf=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,bd=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],U1=-1,xr={};xr[Lt]=xr[Ft]=xr[dn]=xr[Dn]=xr[Tr]=xr[Ri]=xr[Un]=xr[tr]=xr[Si]=!0,xr[ee]=xr[ae]=xr[Oe]=xr[pe]=xr[dt]=xr[Te]=xr[ye]=xr[he]=xr[Ne]=xr[tt]=xr[Me]=xr[yt]=xr[Tt]=xr[Ot]=xr[wt]=!1;var dr={};dr[ee]=dr[ae]=dr[Oe]=dr[dt]=dr[pe]=dr[Te]=dr[Lt]=dr[Ft]=dr[dn]=dr[Dn]=dr[Tr]=dr[Ne]=dr[tt]=dr[Me]=dr[yt]=dr[Tt]=dr[Ot]=dr[qe]=dr[Ri]=dr[Un]=dr[tr]=dr[Si]=!0,dr[ye]=dr[he]=dr[wt]=!1;var vf={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},ve={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ae={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Qe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},tn=parseFloat,rr=parseInt,kr=typeof aa=="object"&&aa&&aa.Object===Object&&aa,ci=typeof self=="object"&&self&&self.Object===Object&&self,cn=kr||ci||Function("return this")(),Br=t&&!t.nodeType&&t,Jr=Br&&!0&&e&&!e.nodeType&&e,Gs=Jr&&Jr.exports===Br,Ru=Gs&&kr.process,es=function(){try{var Fe=Jr&&Jr.require&&Jr.require("util").types;return Fe||Ru&&Ru.binding&&Ru.binding("util")}catch{}}(),xd=es&&es.isArrayBuffer,Ls=es&&es.isDate,cc=es&&es.isMap,_g=es&&es.isRegExp,bf=es&&es.isSet,uT=es&&es.isTypedArray;function Fo(Fe,st,Ye){switch(Ye.length){case 0:return Fe.call(st);case 1:return Fe.call(st,Ye[0]);case 2:return Fe.call(st,Ye[0],Ye[1]);case 3:return Fe.call(st,Ye[0],Ye[1],Ye[2])}return Fe.apply(st,Ye)}function Mh(Fe,st,Ye,Kt){for(var zn=-1,Zr=Fe==null?0:Fe.length;++zn<Zr;){var Ys=Fe[zn];st(Kt,Ys,Ye(Ys),Fe)}return Kt}function mo(Fe,st){for(var Ye=-1,Kt=Fe==null?0:Fe.length;++Ye<Kt&&st(Fe[Ye],Ye,Fe)!==!1;);return Fe}function wg(Fe,st){for(var Ye=Fe==null?0:Fe.length;Ye--&&st(Fe[Ye],Ye,Fe)!==!1;);return Fe}function Eg(Fe,st){for(var Ye=-1,Kt=Fe==null?0:Fe.length;++Ye<Kt;)if(!st(Fe[Ye],Ye,Fe))return!1;return!0}function fc(Fe,st){for(var Ye=-1,Kt=Fe==null?0:Fe.length,zn=0,Zr=[];++Ye<Kt;){var Ys=Fe[Ye];st(Ys,Ye,Fe)&&(Zr[zn++]=Ys)}return Zr}function Tg(Fe,st){var Ye=Fe==null?0:Fe.length;return!!Ye&&Lh(Fe,st,0)>-1}function hm(Fe,st,Ye){for(var Kt=-1,zn=Fe==null?0:Fe.length;++Kt<zn;)if(Ye(st,Fe[Kt]))return!0;return!1}function _i(Fe,st){for(var Ye=-1,Kt=Fe==null?0:Fe.length,zn=Array(Kt);++Ye<Kt;)zn[Ye]=st(Fe[Ye],Ye,Fe);return zn}function xf(Fe,st){for(var Ye=-1,Kt=st.length,zn=Fe.length;++Ye<Kt;)Fe[zn+Ye]=st[Ye];return Fe}function _f(Fe,st,Ye,Kt){var zn=-1,Zr=Fe==null?0:Fe.length;for(Kt&&Zr&&(Ye=Fe[++zn]);++zn<Zr;)Ye=st(Ye,Fe[zn],zn,Fe);return Ye}function lT(Fe,st,Ye,Kt){var zn=Fe==null?0:Fe.length;for(Kt&&zn&&(Ye=Fe[--zn]);zn--;)Ye=st(Ye,Fe[zn],zn,Fe);return Ye}function z1(Fe,st){for(var Ye=-1,Kt=Fe==null?0:Fe.length;++Ye<Kt;)if(st(Fe[Ye],Ye,Fe))return!0;return!1}var cT=te("length");function Ux(Fe){return Fe.split("")}function V1(Fe){return Fe.match(kh)||[]}function ya(Fe,st,Ye){var Kt;return Ye(Fe,function(zn,Zr,Ys){if(st(zn,Zr,Ys))return Kt=Zr,!1}),Kt}function Sg(Fe,st,Ye,Kt){for(var zn=Fe.length,Zr=Ye+(Kt?1:-1);Kt?Zr--:++Zr<zn;)if(st(Fe[Zr],Zr,Fe))return Zr;return-1}function Lh(Fe,st,Ye){return st===st?dT(Fe,st,Ye):Sg(Fe,N,Ye)}function _d(Fe,st,Ye,Kt){for(var zn=Ye-1,Zr=Fe.length;++zn<Zr;)if(Kt(Fe[zn],st))return zn;return-1}function N(Fe){return Fe!==Fe}function W(Fe,st){var Ye=Fe==null?0:Fe.length;return Ye?Ut(Fe,st)/Ye:q}function te(Fe){return function(st){return st==null?n:st[Fe]}}function ce(Fe){return function(st){return Fe==null?n:Fe[st]}}function ze(Fe,st,Ye,Kt,zn){return zn(Fe,function(Zr,Ys,Ci){Ye=Kt?(Kt=!1,Zr):st(Ye,Zr,Ys,Ci)}),Ye}function Ze(Fe,st){var Ye=Fe.length;for(Fe.sort(st);Ye--;)Fe[Ye]=Fe[Ye].value;return Fe}function Ut(Fe,st){for(var Ye,Kt=-1,zn=Fe.length;++Kt<zn;){var Zr=st(Fe[Kt]);Zr!==n&&(Ye=Ye===n?Zr:Ye+Zr)}return Ye}function oi(Fe,st){for(var Ye=-1,Kt=Array(Fe);++Ye<Fe;)Kt[Ye]=st(Ye);return Kt}function go(Fe,st){return _i(st,function(Ye){return[Ye,Fe[Ye]]})}function Rr(Fe){return Fe&&Fe.slice(0,hT(Fe)+1).replace(Zi,"")}function fi(Fe){return function(st){return Fe(st)}}function Ts(Fe,st){return _i(st,function(Ye){return Fe[Ye]})}function va(Fe,st){return Fe.has(st)}function Nu(Fe,st){for(var Ye=-1,Kt=Fe.length;++Ye<Kt&&Lh(st,Fe[Ye],0)>-1;);return Ye}function pm(Fe,st){for(var Ye=Fe.length;Ye--&&Lh(st,Fe[Ye],0)>-1;);return Ye}function H1(Fe,st){for(var Ye=Fe.length,Kt=0;Ye--;)Fe[Ye]===st&&++Kt;return Kt}var wO=ce(vf),EO=ce(ve);function TO(Fe){return"\\"+Qe[Fe]}function q1(Fe,st){return Fe==null?n:Fe[st]}function W1(Fe){return xg.test(Fe)}function G7(Fe){return yf.test(Fe)}function Y7(Fe){for(var st,Ye=[];!(st=Fe.next()).done;)Ye.push(st.value);return Ye}function fT(Fe){var st=-1,Ye=Array(Fe.size);return Fe.forEach(function(Kt,zn){Ye[++st]=[zn,Kt]}),Ye}function OI(Fe,st){return function(Ye){return Fe(st(Ye))}}function dc(Fe,st){for(var Ye=-1,Kt=Fe.length,zn=0,Zr=[];++Ye<Kt;){var Ys=Fe[Ye];(Ys===st||Ys===c)&&(Fe[Ye]=c,Zr[zn++]=Ye)}return Zr}function mm(Fe){var st=-1,Ye=Array(Fe.size);return Fe.forEach(function(Kt){Ye[++st]=Kt}),Ye}function K7(Fe){var st=-1,Ye=Array(Fe.size);return Fe.forEach(function(Kt){Ye[++st]=[Kt,Kt]}),Ye}function dT(Fe,st,Ye){for(var Kt=Ye-1,zn=Fe.length;++Kt<zn;)if(Fe[Kt]===st)return Kt;return-1}function X7(Fe,st,Ye){for(var Kt=Ye+1;Kt--;)if(Fe[Kt]===st)return Kt;return Kt}function Cg(Fe){return W1(Fe)?CO(Fe):cT(Fe)}function xl(Fe){return W1(Fe)?AO(Fe):Ux(Fe)}function hT(Fe){for(var st=Fe.length;st--&&Mo.test(Fe.charAt(st)););return st}var SO=ce(Ae);function CO(Fe){for(var st=Es.lastIndex=0;Es.test(Fe);)++st;return st}function AO(Fe){return Fe.match(Es)||[]}function Q7(Fe){return Fe.match(jx)||[]}var J7=function Fe(st){st=st==null?cn:G1.defaults(cn.Object(),st,G1.pick(cn,bd));var Ye=st.Array,Kt=st.Date,zn=st.Error,Zr=st.Function,Ys=st.Math,Ci=st.Object,zx=st.RegExp,Z7=st.String,hc=st.TypeError,$h=Ye.prototype,MI=Zr.prototype,wd=Ci.prototype,Y1=st["__core-js_shared__"],Vx=MI.toString,ei=wd.hasOwnProperty,K1=0,pT=function(){var _=/[^.]+$/.exec(Y1&&Y1.keys&&Y1.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""}(),Hx=wd.toString,mT=Vx.call(Ci),IO=cn._,kO=zx("^"+Vx.call(ei).replace(Hs,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qx=Gs?st.Buffer:n,Fh=st.Symbol,Wx=st.Uint8Array,LI=qx?qx.allocUnsafe:n,wf=OI(Ci.getPrototypeOf,Ci),gT=Ci.create,yT=wd.propertyIsEnumerable,vT=$h.splice,RO=Fh?Fh.isConcatSpreadable:n,Bh=Fh?Fh.iterator:n,Ag=Fh?Fh.toStringTag:n,Gx=function(){try{var _=Cm(Ci,"defineProperty");return _({},"",{}),_}catch{}}(),NO=st.clearTimeout!==cn.clearTimeout&&st.clearTimeout,ts=Kt&&Kt.now!==cn.Date.now&&Kt.now,$I=st.setTimeout!==cn.setTimeout&&st.setTimeout,Ig=Ys.ceil,gm=Ys.floor,bT=Ci.getOwnPropertySymbols,FI=qx?qx.isBuffer:n,X1=st.isFinite,xT=$h.join,Q1=OI(Ci.keys,Ci),Ks=Ys.max,ba=Ys.min,eU=Kt.now,DO=st.parseInt,Yx=Ys.random,_T=$h.reverse,Kx=Cm(st,"DataView"),kg=Cm(st,"Map"),Xx=Cm(st,"Promise"),ym=Cm(st,"Set"),Qx=Cm(st,"WeakMap"),J1=Cm(Ci,"create"),wT=Qx&&new Qx,Z1={},BI=Am(Kx),vm=Am(kg),PO=Am(Xx),ev=Am(ym),Ed=Am(Qx),bm=Fh?Fh.prototype:n,_l=bm?bm.valueOf:n,ET=bm?bm.toString:n;function oe(_){if(Qs(_)&&!sr(_)&&!(_ instanceof ir)){if(_ instanceof xa)return _;if(ei.call(_,"__wrapped__"))return a4(_)}return new xa(_)}var tv=function(){function _(){}return function(C){if(!Fs(C))return{};if(gT)return gT(C);_.prototype=C;var L=new _;return _.prototype=n,L}}();function Td(){}function xa(_,C){this.__wrapped__=_,this.__actions__=[],this.__chain__=!!C,this.__index__=0,this.__values__=n}oe.templateSettings={escape:ic,evaluate:ga,interpolate:Iu,variable:"",imports:{_:oe}},oe.prototype=Td.prototype,oe.prototype.constructor=oe,xa.prototype=tv(Td.prototype),xa.prototype.constructor=xa;function ir(_){this.__wrapped__=_,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=j,this.__views__=[]}function TT(){var _=new ir(this.__wrapped__);return _.__actions__=Qa(this.__actions__),_.__dir__=this.__dir__,_.__filtered__=this.__filtered__,_.__iteratees__=Qa(this.__iteratees__),_.__takeCount__=this.__takeCount__,_.__views__=Qa(this.__views__),_}function jI(){if(this.__filtered__){var _=new ir(this);_.__dir__=-1,_.__filtered__=!0}else _=this.clone(),_.__dir__*=-1;return _}function nv(){var _=this.__wrapped__.value(),C=this.__dir__,L=sr(_),X=C<0,re=L?_.length:0,fe=pk(0,re,this.__views__),xe=fe.start,Ie=fe.end,Ue=Ie-xe,ht=X?Ie:xe-1,mt=this.__iteratees__,Ct=mt.length,Yt=0,mn=ba(Ue,this.__takeCount__);if(!L||!X&&re==Ue&&mn==Ue)return cv(_,this.__actions__);var Rn=[];e:for(;Ue--&&Yt<mn;){ht+=C;for(var yr=-1,Nn=_[ht];++yr<Ct;){var Nr=mt[yr],Ur=Nr.iteratee,Df=Nr.type,Cl=Ur(Nn);if(Df==Q)Nn=Cl;else if(!Cl){if(Df==H)continue e;break e}}Rn[Yt++]=Nn}return Rn}ir.prototype=tv(Td.prototype),ir.prototype.constructor=ir;function Du(_){var C=-1,L=_==null?0:_.length;for(this.clear();++C<L;){var X=_[C];this.set(X[0],X[1])}}function ns(){this.__data__=J1?J1(null):{},this.size=0}function ji(_){var C=this.has(_)&&delete this.__data__[_];return this.size-=C?1:0,C}function xm(_){var C=this.__data__;if(J1){var L=C[_];return L===u?n:L}return ei.call(C,_)?C[_]:n}function _a(_){var C=this.__data__;return J1?C[_]!==n:ei.call(C,_)}function Pu(_,C){var L=this.__data__;return this.size+=this.has(_)?0:1,L[_]=J1&&C===n?u:C,this}Du.prototype.clear=ns,Du.prototype.delete=ji,Du.prototype.get=xm,Du.prototype.has=_a,Du.prototype.set=Pu;function Xa(_){var C=-1,L=_==null?0:_.length;for(this.clear();++C<L;){var X=_[C];this.set(X[0],X[1])}}function rv(){this.__data__=[],this.size=0}function Ou(_){var C=this.__data__,L=Ea(C,_);if(L<0)return!1;var X=C.length-1;return L==X?C.pop():vT.call(C,L,1),--this.size,!0}function ST(_){var C=this.__data__,L=Ea(C,_);return L<0?n:C[L][1]}function OO(_){return Ea(this.__data__,_)>-1}function MO(_,C){var L=this.__data__,X=Ea(L,_);return X<0?(++this.size,L.push([_,C])):L[X][1]=C,this}Xa.prototype.clear=rv,Xa.prototype.delete=Ou,Xa.prototype.get=ST,Xa.prototype.has=OO,Xa.prototype.set=MO;function pc(_){var C=-1,L=_==null?0:_.length;for(this.clear();++C<L;){var X=_[C];this.set(X[0],X[1])}}function LO(){this.size=0,this.__data__={hash:new Du,map:new(kg||Xa),string:new Du}}function jh(_){var C=h_(this,_).delete(_);return this.size-=C?1:0,C}function CT(_){return h_(this,_).get(_)}function UI(_){return h_(this,_).has(_)}function $O(_,C){var L=h_(this,_),X=L.size;return L.set(_,C),this.size+=L.size==X?0:1,this}pc.prototype.clear=LO,pc.prototype.delete=jh,pc.prototype.get=CT,pc.prototype.has=UI,pc.prototype.set=$O;function Rg(_){var C=-1,L=_==null?0:_.length;for(this.__data__=new pc;++C<L;)this.add(_[C])}function _m(_){return this.__data__.set(_,u),this}function iv(_){return this.__data__.has(_)}Rg.prototype.add=Rg.prototype.push=_m,Rg.prototype.has=iv;function wa(_){var C=this.__data__=new Xa(_);this.size=C.size}function AT(){this.__data__=new Xa,this.size=0}function IT(_){var C=this.__data__,L=C.delete(_);return this.size=C.size,L}function mc(_){return this.__data__.get(_)}function gc(_){return this.__data__.has(_)}function Ng(_,C){var L=this.__data__;if(L instanceof Xa){var X=L.__data__;if(!kg||X.length<i-1)return X.push([_,C]),this.size=++L.size,this;L=this.__data__=new pc(X)}return L.set(_,C),this.size=L.size,this}wa.prototype.clear=AT,wa.prototype.delete=IT,wa.prototype.get=mc,wa.prototype.has=gc,wa.prototype.set=Ng;function Sd(_,C){var L=sr(_),X=!L&&S_(_),re=!L&&!X&&xv(_),fe=!L&&!X&&!re&&bS(_),xe=L||X||re||fe,Ie=xe?oi(_.length,Z7):[],Ue=Ie.length;for(var ht in _)(C||ei.call(_,ht))&&!(xe&&(ht=="length"||re&&(ht=="offset"||ht=="parent")||fe&&(ht=="buffer"||ht=="byteLength"||ht=="byteOffset")||as(ht,Ue)))&&Ie.push(ht);return Ie}function Cd(_){var C=_.length;return C?_[uv(0,C-1)]:n}function Dg(_,C){return eS(Qa(_),Uh(C,0,_.length))}function FO(_){return eS(Qa(_))}function Jx(_,C,L){(L!==n&&!Qh(_[C],L)||L===n&&!(C in _))&&Ad(_,C,L)}function Pg(_,C,L){var X=_[C];(!(ei.call(_,C)&&Qh(X,L))||L===n&&!(C in _))&&Ad(_,C,L)}function Ea(_,C){for(var L=_.length;L--;)if(Qh(_[L][0],C))return L;return-1}function wl(_,C,L,X){return kd(_,function(re,fe,xe){C(X,re,L(re),xe)}),X}function rs(_,C){return _&&Tf(C,Ca(C),_)}function Ef(_,C){return _&&Tf(C,Sc(C),_)}function Ad(_,C,L){C=="__proto__"&&Gx?Gx(_,C,{configurable:!0,enumerable:!0,value:L,writable:!0}):_[C]=L}function kT(_,C){for(var L=-1,X=C.length,re=Ye(X),fe=_==null;++L<X;)re[L]=fe?n:wU(_,C[L]);return re}function Uh(_,C,L){return _===_&&(L!==n&&(_=_<=L?_:L),C!==n&&(_=_>=C?_:C)),_}function Mu(_,C,L,X,re,fe){var xe,Ie=C&f,Ue=C&d,ht=C&h;if(L&&(xe=re?L(_,X,re,fe):L(_)),xe!==n)return xe;if(!Fs(_))return _;var mt=sr(_);if(mt){if(xe=m_(_),!Ie)return Qa(_,xe)}else{var Ct=Zo(_),Yt=Ct==he||Ct==$e;if(xv(_))return nk(_,Ie);if(Ct==Me||Ct==ee||Yt&&!re){if(xe=Ue||Yt?{}:ea(_),!Ie)return Ue?nU(_,Ef(xe,_)):zT(_,rs(xe,_))}else{if(!dr[Ct])return re?_:{};xe=rU(_,Ct,Ie)}}fe||(fe=new wa);var mn=fe.get(_);if(mn)return mn;fe.set(_,xe),Qae(_)?_.forEach(function(Nn){xe.add(Mu(Nn,C,L,Nn,_,fe))}):Kae(_)&&_.forEach(function(Nn,Nr){xe.set(Nr,Mu(Nn,C,L,Nr,_,fe))});var Rn=ht?Ue?d_:f_:Ue?Sc:Ca,yr=mt?n:Rn(_);return mo(yr||_,function(Nn,Nr){yr&&(Nr=Nn,Nn=_[Nr]),Pg(xe,Nr,Mu(Nn,C,L,Nr,_,fe))}),xe}function BO(_){var C=Ca(_);return function(L){return Zx(L,_,C)}}function Zx(_,C,L){var X=L.length;if(_==null)return!X;for(_=Ci(_);X--;){var re=L[X],fe=C[re],xe=_[re];if(xe===n&&!(re in _)||!fe(xe))return!1}return!0}function zI(_,C,L){if(typeof _!="function")throw new hc(o);return yv(function(){_.apply(n,L)},C)}function Id(_,C,L,X){var re=-1,fe=Tg,xe=!0,Ie=_.length,Ue=[],ht=C.length;if(!Ie)return Ue;L&&(C=_i(C,fi(L))),X?(fe=hm,xe=!1):C.length>=i&&(fe=va,xe=!1,C=new Rg(C));e:for(;++re<Ie;){var mt=_[re],Ct=L==null?mt:L(mt);if(mt=X||mt!==0?mt:0,xe&&Ct===Ct){for(var Yt=ht;Yt--;)if(C[Yt]===Ct)continue e;Ue.push(mt)}else fe(C,Ct,X)||Ue.push(mt)}return Ue}var kd=_c(El),jO=_c(wm,!0);function e_(_,C){var L=!0;return kd(_,function(X,re,fe){return L=!!C(X,re,fe),L}),L}function Og(_,C,L){for(var X=-1,re=_.length;++X<re;){var fe=_[X],xe=C(fe);if(xe!=null&&(Ie===n?xe===xe&&!Nf(xe):L(xe,Ie)))var Ie=xe,Ue=fe}return Ue}function UO(_,C,L,X){var re=_.length;for(L=pr(L),L<0&&(L=-L>re?0:re+L),X=X===n||X>re?re:pr(X),X<0&&(X+=re),X=L>X?0:Zae(X);L<X;)_[L++]=C;return _}function VI(_,C){var L=[];return kd(_,function(X,re,fe){C(X,re,fe)&&L.push(X)}),L}function Ss(_,C,L,X,re){var fe=-1,xe=_.length;for(L||(L=QT),re||(re=[]);++fe<xe;){var Ie=_[fe];C>0&&L(Ie)?C>1?Ss(Ie,C-1,L,X,re):xf(re,Ie):X||(re[re.length]=Ie)}return re}var RT=HT(),t_=HT(!0);function El(_,C){return _&&RT(_,C,Ca)}function wm(_,C){return _&&t_(_,C,Ca)}function sv(_,C){return fc(C,function(L){return Wg(_[L])})}function zh(_,C){C=Dd(C,_);for(var L=0,X=C.length;_!=null&&L<X;)_=_[If(C[L++])];return L&&L==X?_:n}function NT(_,C,L){var X=C(_);return sr(_)?X:xf(X,L(_))}function Qo(_){return _==null?_===n?ft:it:Ag&&Ag in Ci(_)?XT(_):gk(_)}function Em(_,C){return _>C}function yc(_,C){return _!=null&&ei.call(_,C)}function Mg(_,C){return _!=null&&C in Ci(_)}function HI(_,C,L){return _>=ba(C,L)&&_<Ks(C,L)}function DT(_,C,L){for(var X=L?hm:Tg,re=_[0].length,fe=_.length,xe=fe,Ie=Ye(fe),Ue=1/0,ht=[];xe--;){var mt=_[xe];xe&&C&&(mt=_i(mt,fi(C))),Ue=ba(mt.length,Ue),Ie[xe]=!L&&(C||re>=120&&mt.length>=120)?new Rg(xe&&mt):n}mt=_[0];var Ct=-1,Yt=Ie[0];e:for(;++Ct<re&&ht.length<Ue;){var mn=mt[Ct],Rn=C?C(mn):mn;if(mn=L||mn!==0?mn:0,!(Yt?va(Yt,Rn):X(ht,Rn,L))){for(xe=fe;--xe;){var yr=Ie[xe];if(!(yr?va(yr,Rn):X(_[xe],Rn,L)))continue e}Yt&&Yt.push(Rn),ht.push(mn)}}return ht}function Vh(_,C,L,X){return El(_,function(re,fe,xe){C(X,L(re),fe,xe)}),X}function vc(_,C,L){C=Dd(C,_),_=Bo(_,C);var X=_==null?_:_[If(eu(C))];return X==null?n:Fo(X,_,L)}function PT(_){return Qs(_)&&Qo(_)==ee}function zO(_){return Qs(_)&&Qo(_)==Oe}function Hh(_){return Qs(_)&&Qo(_)==Te}function bc(_,C,L,X,re){return _===C?!0:_==null||C==null||!Qs(_)&&!Qs(C)?_!==_&&C!==C:OT(_,C,L,X,bc,re)}function OT(_,C,L,X,re,fe){var xe=sr(_),Ie=sr(C),Ue=xe?ae:Zo(_),ht=Ie?ae:Zo(C);Ue=Ue==ee?Me:Ue,ht=ht==ee?Me:ht;var mt=Ue==Me,Ct=ht==Me,Yt=Ue==ht;if(Yt&&xv(_)){if(!xv(C))return!1;xe=!0,mt=!1}if(Yt&&!mt)return fe||(fe=new wa),xe||bS(_)?dk(_,C,L,X,re,fe):hk(_,C,Ue,L,X,re,fe);if(!(L&p)){var mn=mt&&ei.call(_,"__wrapped__"),Rn=Ct&&ei.call(C,"__wrapped__");if(mn||Rn){var yr=mn?_.value():_,Nn=Rn?C.value():C;return fe||(fe=new wa),re(yr,Nn,L,X,fe)}}return Yt?(fe||(fe=new wa),ZO(_,C,L,X,re,fe)):!1}function VO(_){return Qs(_)&&Zo(_)==Ne}function ov(_,C,L,X){var re=L.length,fe=re,xe=!X;if(_==null)return!fe;for(_=Ci(_);re--;){var Ie=L[re];if(xe&&Ie[2]?Ie[1]!==_[Ie[0]]:!(Ie[0]in _))return!1}for(;++re<fe;){Ie=L[re];var Ue=Ie[0],ht=_[Ue],mt=Ie[1];if(xe&&Ie[2]){if(ht===n&&!(Ue in _))return!1}else{var Ct=new wa;if(X)var Yt=X(ht,mt,Ue,_,C,Ct);if(!(Yt===n?bc(mt,ht,p|m,X,Ct):Yt))return!1}}return!0}function qI(_){if(!Fs(_)||n4(_))return!1;var C=Wg(_)?kO:Rh;return C.test(Am(_))}function n_(_){return Qs(_)&&Qo(_)==yt}function Rd(_){return Qs(_)&&Zo(_)==Tt}function r_(_){return Qs(_)&&_4(_.length)&&!!xr[Qo(_)]}function av(_){return typeof _=="function"?_:_==null?Cc:typeof _=="object"?sr(_)?os(_[0],_[1]):MT(_):cue(_)}function qh(_){if(!Kh(_))return Q1(_);var C=[];for(var L in Ci(_))ei.call(_,L)&&L!="constructor"&&C.push(L);return C}function WI(_){if(!Fs(_))return s4(_);var C=Kh(_),L=[];for(var X in _)X=="constructor"&&(C||!ei.call(_,X))||L.push(X);return L}function Tm(_,C){return _<C}function GI(_,C){var L=-1,X=Tc(_)?Ye(_.length):[];return kd(_,function(re,fe,xe){X[++L]=C(re,fe,xe)}),X}function MT(_){var C=p_(_);return C.length==1&&C[0][2]?JT(C[0][0],C[0][1]):function(L){return L===_||ov(L,_,C)}}function os(_,C){return en(_)&&y_(C)?JT(If(_),C):function(L){var X=wU(L,_);return X===n&&X===C?EU(L,_):bc(C,X,p|m)}}function Lg(_,C,L,X,re){_!==C&&RT(C,function(fe,xe){if(re||(re=new wa),Fs(fe))YI(_,C,xe,L,Lg,X,re);else{var Ie=X?X(Md(_,xe),fe,xe+"",_,C,re):n;Ie===n&&(Ie=fe),Jx(_,xe,Ie)}},Sc)}function YI(_,C,L,X,re,fe,xe){var Ie=Md(_,L),Ue=Md(C,L),ht=xe.get(Ue);if(ht){Jx(_,L,ht);return}var mt=fe?fe(Ie,Ue,L+"",_,C,xe):n,Ct=mt===n;if(Ct){var Yt=sr(Ue),mn=!Yt&&xv(Ue),Rn=!Yt&&!mn&&bS(Ue);mt=Ue,Yt||mn||Rn?sr(Ie)?mt=Ie:xo(Ie)?mt=Qa(Ie):mn?(Ct=!1,mt=nk(Ue,!0)):Rn?(Ct=!1,mt=YO(Ue,!0)):mt=[]:Ok(Ue)||S_(Ue)?(mt=Ie,S_(Ie)?mt=eue(Ie):(!Fs(Ie)||Wg(Ie))&&(mt=ea(Ue))):Ct=!1}Ct&&(xe.set(Ue,mt),re(mt,Ue,X,fe,xe),xe.delete(Ue)),Jx(_,L,mt)}function LT(_,C){var L=_.length;if(L)return C+=C<0?L:0,as(C,L)?_[C]:n}function i_(_,C,L){C.length?C=_i(C,function(fe){return sr(fe)?function(xe){return zh(xe,fe.length===1?fe[0]:fe)}:fe}):C=[Cc];var X=-1;C=_i(C,fi(Sn()));var re=GI(_,function(fe,xe,Ie){var Ue=_i(C,function(ht){return ht(fe)});return{criteria:Ue,index:++X,value:fe}});return Ze(re,function(fe,xe){return tU(fe,xe,L)})}function KI(_,C){return Sm(_,C,function(L,X){return EU(_,X)})}function Sm(_,C,L){for(var X=-1,re=C.length,fe={};++X<re;){var xe=C[X],Ie=zh(_,xe);L(Ie,xe)&&Fg(fe,Dd(xe,_),Ie)}return fe}function gs(_){return function(C){return zh(C,_)}}function $s(_,C,L,X){var re=X?_d:Lh,fe=-1,xe=C.length,Ie=_;for(_===C&&(C=Qa(C)),L&&(Ie=_i(_,fi(L)));++fe<xe;)for(var Ue=0,ht=C[fe],mt=L?L(ht):ht;(Ue=re(Ie,mt,Ue,X))>-1;)Ie!==_&&vT.call(Ie,Ue,1),vT.call(_,Ue,1);return _}function yo(_,C){for(var L=_?C.length:0,X=L-1;L--;){var re=C[L];if(L==X||re!==fe){var fe=re;as(re)?vT.call(_,re,1):BT(_,re)}}return _}function uv(_,C){return _+gm(Yx()*(C-_+1))}function s_(_,C,L,X){for(var re=-1,fe=Ks(Ig((C-_)/(L||1)),0),xe=Ye(fe);fe--;)xe[X?fe:++re]=_,_+=L;return xe}function $g(_,C){var L="";if(!_||C<1||C>Z)return L;do C%2&&(L+=_),C=gm(C/2),C&&(_+=_);while(C);return L}function hr(_,C){return Tl(ZT(_,C,Cc),_+"")}function Ta(_){return Cd(xS(_))}function XI(_,C){var L=xS(_);return eS(L,Uh(C,0,L.length))}function Fg(_,C,L,X){if(!Fs(_))return _;C=Dd(C,_);for(var re=-1,fe=C.length,xe=fe-1,Ie=_;Ie!=null&&++re<fe;){var Ue=If(C[re]),ht=L;if(Ue==="__proto__"||Ue==="constructor"||Ue==="prototype")return _;if(re!=xe){var mt=Ie[Ue];ht=X?X(mt,Ue,Ie):n,ht===n&&(ht=Fs(mt)?mt:as(C[re+1])?[]:{})}Pg(Ie,Ue,ht),Ie=Ie[Ue]}return _}var $T=wT?function(_,C){return wT.set(_,C),_}:Cc,Nd=Gx?function(_,C){return Gx(_,"toString",{configurable:!0,enumerable:!1,value:SU(C),writable:!0})}:Cc;function xc(_){return eS(xS(_))}function Sa(_,C,L){var X=-1,re=_.length;C<0&&(C=-C>re?0:re+C),L=L>re?re:L,L<0&&(L+=re),re=C>L?0:L-C>>>0,C>>>=0;for(var fe=Ye(re);++X<re;)fe[X]=_[X+C];return fe}function QI(_,C){var L;return kd(_,function(X,re,fe){return L=C(X,re,fe),!L}),!!L}function lv(_,C,L){var X=0,re=_==null?X:_.length;if(typeof C=="number"&&C===C&&re<=V){for(;X<re;){var fe=X+re>>>1,xe=_[fe];xe!==null&&!Nf(xe)&&(L?xe<=C:xe<C)?X=fe+1:re=fe}return re}return FT(_,C,Cc,L)}function FT(_,C,L,X){var re=0,fe=_==null?0:_.length;if(fe===0)return 0;C=L(C);for(var xe=C!==C,Ie=C===null,Ue=Nf(C),ht=C===n;re<fe;){var mt=gm((re+fe)/2),Ct=L(_[mt]),Yt=Ct!==n,mn=Ct===null,Rn=Ct===Ct,yr=Nf(Ct);if(xe)var Nn=X||Rn;else ht?Nn=Rn&&(X||Yt):Ie?Nn=Rn&&Yt&&(X||!mn):Ue?Nn=Rn&&Yt&&!mn&&(X||!yr):mn||yr?Nn=!1:Nn=X?Ct<=C:Ct<C;Nn?re=mt+1:fe=mt}return ba(fe,G)}function JI(_,C){for(var L=-1,X=_.length,re=0,fe=[];++L<X;){var xe=_[L],Ie=C?C(xe):xe;if(!L||!Qh(Ie,Ue)){var Ue=Ie;fe[re++]=xe===0?0:xe}}return fe}function ZI(_){return typeof _=="number"?_:Nf(_)?q:+_}function Lu(_){if(typeof _=="string")return _;if(sr(_))return _i(_,Lu)+"";if(Nf(_))return ET?ET.call(_):"";var C=_+"";return C=="0"&&1/_==-1/0?"-0":C}function Wh(_,C,L){var X=-1,re=Tg,fe=_.length,xe=!0,Ie=[],Ue=Ie;if(L)xe=!1,re=hm;else if(fe>=i){var ht=C?null:JO(_);if(ht)return mm(ht);xe=!1,re=va,Ue=new Rg}else Ue=C?[]:Ie;e:for(;++X<fe;){var mt=_[X],Ct=C?C(mt):mt;if(mt=L||mt!==0?mt:0,xe&&Ct===Ct){for(var Yt=Ue.length;Yt--;)if(Ue[Yt]===Ct)continue e;C&&Ue.push(Ct),Ie.push(mt)}else re(Ue,Ct,L)||(Ue!==Ie&&Ue.push(Ct),Ie.push(mt))}return Ie}function BT(_,C){return C=Dd(C,_),_=Bo(_,C),_==null||delete _[If(eu(C))]}function ek(_,C,L,X){return Fg(_,C,L(zh(_,C)),X)}function o_(_,C,L,X){for(var re=_.length,fe=X?re:-1;(X?fe--:++fe<re)&&C(_[fe],fe,_););return L?Sa(_,X?0:fe,X?fe+1:re):Sa(_,X?fe+1:0,X?re:fe)}function cv(_,C){var L=_;return L instanceof ir&&(L=L.value()),_f(C,function(X,re){return re.func.apply(re.thisArg,xf([X],re.args))},L)}function jT(_,C,L){var X=_.length;if(X<2)return X?Wh(_[0]):[];for(var re=-1,fe=Ye(X);++re<X;)for(var xe=_[re],Ie=-1;++Ie<X;)Ie!=re&&(fe[re]=Id(fe[re]||xe,_[Ie],C,L));return Wh(Ss(fe,1),C,L)}function a_(_,C,L){for(var X=-1,re=_.length,fe=C.length,xe={};++X<re;){var Ie=X<fe?C[X]:n;L(xe,_[X],Ie)}return xe}function fv(_){return xo(_)?_:[]}function UT(_){return typeof _=="function"?_:Cc}function Dd(_,C){return sr(_)?_:en(_,C)?[_]:bk(Ai(_))}var HO=hr;function Gh(_,C,L){var X=_.length;return L=L===n?X:L,!C&&L>=X?_:Sa(_,C,L)}var tk=NO||function(_){return cn.clearTimeout(_)};function nk(_,C){if(C)return _.slice();var L=_.length,X=LI?LI(L):new _.constructor(L);return _.copy(X),X}function u_(_){var C=new _.constructor(_.byteLength);return new Wx(C).set(new Wx(_)),C}function qO(_,C){var L=C?u_(_.buffer):_.buffer;return new _.constructor(L,_.byteOffset,_.byteLength)}function WO(_){var C=new _.constructor(_.source,Wa.exec(_));return C.lastIndex=_.lastIndex,C}function GO(_){return _l?Ci(_l.call(_)):{}}function YO(_,C){var L=C?u_(_.buffer):_.buffer;return new _.constructor(L,_.byteOffset,_.length)}function rk(_,C){if(_!==C){var L=_!==n,X=_===null,re=_===_,fe=Nf(_),xe=C!==n,Ie=C===null,Ue=C===C,ht=Nf(C);if(!Ie&&!ht&&!fe&&_>C||fe&&xe&&Ue&&!Ie&&!ht||X&&xe&&Ue||!L&&Ue||!re)return 1;if(!X&&!fe&&!ht&&_<C||ht&&L&&re&&!X&&!fe||Ie&&L&&re||!xe&&re||!Ue)return-1}return 0}function tU(_,C,L){for(var X=-1,re=_.criteria,fe=C.criteria,xe=re.length,Ie=L.length;++X<xe;){var Ue=rk(re[X],fe[X]);if(Ue){if(X>=Ie)return Ue;var ht=L[X];return Ue*(ht=="desc"?-1:1)}}return _.index-C.index}function KO(_,C,L,X){for(var re=-1,fe=_.length,xe=L.length,Ie=-1,Ue=C.length,ht=Ks(fe-xe,0),mt=Ye(Ue+ht),Ct=!X;++Ie<Ue;)mt[Ie]=C[Ie];for(;++re<xe;)(Ct||re<fe)&&(mt[L[re]]=_[re]);for(;ht--;)mt[Ie++]=_[re++];return mt}function ik(_,C,L,X){for(var re=-1,fe=_.length,xe=-1,Ie=L.length,Ue=-1,ht=C.length,mt=Ks(fe-Ie,0),Ct=Ye(mt+ht),Yt=!X;++re<mt;)Ct[re]=_[re];for(var mn=re;++Ue<ht;)Ct[mn+Ue]=C[Ue];for(;++xe<Ie;)(Yt||re<fe)&&(Ct[mn+L[xe]]=_[re++]);return Ct}function Qa(_,C){var L=-1,X=_.length;for(C||(C=Ye(X));++L<X;)C[L]=_[L];return C}function Tf(_,C,L,X){var re=!L;L||(L={});for(var fe=-1,xe=C.length;++fe<xe;){var Ie=C[fe],Ue=X?X(L[Ie],_[Ie],Ie,L,_):n;Ue===n&&(Ue=_[Ie]),re?Ad(L,Ie,Ue):Pg(L,Ie,Ue)}return L}function zT(_,C){return Tf(_,Sf(_),C)}function nU(_,C){return Tf(_,e4(_),C)}function VT(_,C){return function(L,X){var re=sr(L)?Mh:wl,fe=C?C():{};return re(L,_,Sn(X,2),fe)}}function dv(_){return hr(function(C,L){var X=-1,re=L.length,fe=re>1?L[re-1]:n,xe=re>2?L[2]:n;for(fe=_.length>3&&typeof fe=="function"?(re--,fe):n,xe&&Za(L[0],L[1],xe)&&(fe=re<3?n:fe,re=1),C=Ci(C);++X<re;){var Ie=L[X];Ie&&_(C,Ie,X,fe)}return C})}function _c(_,C){return function(L,X){if(L==null)return L;if(!Tc(L))return _(L,X);for(var re=L.length,fe=C?re:-1,xe=Ci(L);(C?fe--:++fe<re)&&X(xe[fe],fe,xe)!==!1;);return L}}function HT(_){return function(C,L,X){for(var re=-1,fe=Ci(C),xe=X(C),Ie=xe.length;Ie--;){var Ue=xe[_?Ie:++re];if(L(fe[Ue],Ue,fe)===!1)break}return C}}function qT(_,C,L){var X=C&y,re=hv(_);function fe(){var xe=this&&this!==cn&&this instanceof fe?re:_;return xe.apply(X?L:this,arguments)}return fe}function sk(_){return function(C){C=Ai(C);var L=W1(C)?xl(C):n,X=L?L[0]:C.charAt(0),re=L?Gh(L,1).join(""):C.slice(1);return X[_]()+re}}function Bg(_){return function(C){return _f(uue(aue(C).replace(j1,"")),_,"")}}function hv(_){return function(){var C=arguments;switch(C.length){case 0:return new _;case 1:return new _(C[0]);case 2:return new _(C[0],C[1]);case 3:return new _(C[0],C[1],C[2]);case 4:return new _(C[0],C[1],C[2],C[3]);case 5:return new _(C[0],C[1],C[2],C[3],C[4]);case 6:return new _(C[0],C[1],C[2],C[3],C[4],C[5]);case 7:return new _(C[0],C[1],C[2],C[3],C[4],C[5],C[6])}var L=tv(_.prototype),X=_.apply(L,C);return Fs(X)?X:L}}function ok(_,C,L){var X=hv(_);function re(){for(var fe=arguments.length,xe=Ye(fe),Ie=fe,Ue=Yh(re);Ie--;)xe[Ie]=arguments[Ie];var ht=fe<3&&xe[0]!==Ue&&xe[fe-1]!==Ue?[]:dc(xe,Ue);if(fe-=ht.length,fe<L)return Ja(_,C,pv,re.placeholder,n,xe,ht,n,n,L-fe);var mt=this&&this!==cn&&this instanceof re?X:_;return Fo(mt,this,xe)}return re}function jg(_){return function(C,L,X){var re=Ci(C);if(!Tc(C)){var fe=Sn(L,3);C=Ca(C),L=function(Ie){return fe(re[Ie],Ie,re)}}var xe=_(C,L,X);return xe>-1?re[fe?C[xe]:xe]:n}}function WT(_){return Od(function(C){var L=C.length,X=L,re=xa.prototype.thru;for(_&&C.reverse();X--;){var fe=C[X];if(typeof fe!="function")throw new hc(o);if(re&&!xe&&mv(fe)=="wrapper")var xe=new xa([],!0)}for(X=xe?X:L;++X<L;){fe=C[X];var Ie=mv(fe),Ue=Ie=="wrapper"?KT(fe):n;Ue&&g_(Ue[0])&&Ue[1]==(I|w|T|R)&&!Ue[4].length&&Ue[9]==1?xe=xe[mv(Ue[0])].apply(xe,Ue[3]):xe=fe.length==1&&g_(fe)?xe[Ie]():xe.thru(fe)}return function(){var ht=arguments,mt=ht[0];if(xe&&ht.length==1&&sr(mt))return xe.plant(mt).value();for(var Ct=0,Yt=L?C[Ct].apply(this,ht):mt;++Ct<L;)Yt=C[Ct].call(this,Yt);return Yt}})}function pv(_,C,L,X,re,fe,xe,Ie,Ue,ht){var mt=C&I,Ct=C&y,Yt=C&v,mn=C&(w|E),Rn=C&D,yr=Yt?n:hv(_);function Nn(){for(var Nr=arguments.length,Ur=Ye(Nr),Df=Nr;Df--;)Ur[Df]=arguments[Df];if(mn)var Cl=Yh(Nn),Pf=H1(Ur,Cl);if(X&&(Ur=KO(Ur,X,re,mn)),fe&&(Ur=ik(Ur,fe,xe,mn)),Nr-=Pf,mn&&Nr<ht){var _o=dc(Ur,Cl);return Ja(_,C,pv,Nn.placeholder,L,Ur,_o,Ie,Ue,ht-Nr)}var Jh=Ct?L:this,Yg=Yt?Jh[_]:_;return Nr=Ur.length,Ie?Ur=Cf(Ur,Ie):Rn&&Nr>1&&Ur.reverse(),mt&&Ue<Nr&&(Ur.length=Ue),this&&this!==cn&&this instanceof Nn&&(Yg=yr||hv(Yg)),Yg.apply(Jh,Ur)}return Nn}function XO(_,C){return function(L,X){return Vh(L,_,C(X),{})}}function l_(_,C){return function(L,X){var re;if(L===n&&X===n)return C;if(L!==n&&(re=L),X!==n){if(re===n)return X;typeof L=="string"||typeof X=="string"?(L=Lu(L),X=Lu(X)):(L=ZI(L),X=ZI(X)),re=_(L,X)}return re}}function GT(_){return Od(function(C){return C=_i(C,fi(Sn())),hr(function(L){var X=this;return _(C,function(re){return Fo(re,X,L)})})})}function c_(_,C){C=C===n?" ":Lu(C);var L=C.length;if(L<2)return L?$g(C,_):C;var X=$g(C,Ig(_/Cg(C)));return W1(C)?Gh(xl(X),0,_).join(""):X.slice(0,_)}function QO(_,C,L,X){var re=C&y,fe=hv(_);function xe(){for(var Ie=-1,Ue=arguments.length,ht=-1,mt=X.length,Ct=Ye(mt+Ue),Yt=this&&this!==cn&&this instanceof xe?fe:_;++ht<mt;)Ct[ht]=X[ht];for(;Ue--;)Ct[ht++]=arguments[++Ie];return Fo(Yt,re?L:this,Ct)}return xe}function ak(_){return function(C,L,X){return X&&typeof X!="number"&&Za(C,L,X)&&(L=X=n),C=Gg(C),L===n?(L=C,C=0):L=Gg(L),X=X===n?C<L?1:-1:Gg(X),s_(C,L,X,_)}}function YT(_){return function(C,L){return typeof C=="string"&&typeof L=="string"||(C=Ld(C),L=Ld(L)),_(C,L)}}function Ja(_,C,L,X,re,fe,xe,Ie,Ue,ht){var mt=C&w,Ct=mt?xe:n,Yt=mt?n:xe,mn=mt?fe:n,Rn=mt?n:fe;C|=mt?T:A,C&=~(mt?A:T),C&b||(C&=-4);var yr=[_,C,re,mn,Ct,Rn,Yt,Ie,Ue,ht],Nn=L.apply(n,yr);return g_(_)&&yk(Nn,yr),Nn.placeholder=X,vk(Nn,_,C)}function Jo(_){var C=Ys[_];return function(L,X){if(L=Ld(L),X=X==null?0:ba(pr(X),292),X&&X1(L)){var re=(Ai(L)+"e").split("e"),fe=C(re[0]+"e"+(+re[1]+X));return re=(Ai(fe)+"e").split("e"),+(re[0]+"e"+(+re[1]-X))}return C(L)}}var JO=ym&&1/mm(new ym([,-0]))[1]==ne?function(_){return new ym(_)}:IU;function uk(_){return function(C){var L=Zo(C);return L==Ne?fT(C):L==Tt?K7(C):go(C,_(C))}}function Pd(_,C,L,X,re,fe,xe,Ie){var Ue=C&v;if(!Ue&&typeof _!="function")throw new hc(o);var ht=X?X.length:0;if(ht||(C&=-97,X=re=n),xe=xe===n?xe:Ks(pr(xe),0),Ie=Ie===n?Ie:pr(Ie),ht-=re?re.length:0,C&A){var mt=X,Ct=re;X=re=n}var Yt=Ue?n:KT(_),mn=[_,C,L,X,re,mt,Ct,fe,xe,Ie];if(Yt&&i4(mn,Yt),_=mn[0],C=mn[1],L=mn[2],X=mn[3],re=mn[4],Ie=mn[9]=mn[9]===n?Ue?0:_.length:Ks(mn[9]-ht,0),!Ie&&C&(w|E)&&(C&=-25),!C||C==y)var Rn=qT(_,C,L);else C==w||C==E?Rn=ok(_,C,Ie):(C==T||C==(y|T))&&!re.length?Rn=QO(_,C,L,X):Rn=pv.apply(n,mn);var yr=Yt?$T:yk;return vk(yr(Rn,mn),_,C)}function lk(_,C,L,X){return _===n||Qh(_,wd[L])&&!ei.call(X,L)?C:_}function ck(_,C,L,X,re,fe){return Fs(_)&&Fs(C)&&(fe.set(C,_),Lg(_,C,n,ck,fe),fe.delete(C)),_}function fk(_){return Ok(_)?n:_}function dk(_,C,L,X,re,fe){var xe=L&p,Ie=_.length,Ue=C.length;if(Ie!=Ue&&!(xe&&Ue>Ie))return!1;var ht=fe.get(_),mt=fe.get(C);if(ht&&mt)return ht==C&&mt==_;var Ct=-1,Yt=!0,mn=L&m?new Rg:n;for(fe.set(_,C),fe.set(C,_);++Ct<Ie;){var Rn=_[Ct],yr=C[Ct];if(X)var Nn=xe?X(yr,Rn,Ct,C,_,fe):X(Rn,yr,Ct,_,C,fe);if(Nn!==n){if(Nn)continue;Yt=!1;break}if(mn){if(!z1(C,function(Nr,Ur){if(!va(mn,Ur)&&(Rn===Nr||re(Rn,Nr,L,X,fe)))return mn.push(Ur)})){Yt=!1;break}}else if(!(Rn===yr||re(Rn,yr,L,X,fe))){Yt=!1;break}}return fe.delete(_),fe.delete(C),Yt}function hk(_,C,L,X,re,fe,xe){switch(L){case dt:if(_.byteLength!=C.byteLength||_.byteOffset!=C.byteOffset)return!1;_=_.buffer,C=C.buffer;case Oe:return!(_.byteLength!=C.byteLength||!fe(new Wx(_),new Wx(C)));case pe:case Te:case tt:return Qh(+_,+C);case ye:return _.name==C.name&&_.message==C.message;case yt:case Ot:return _==C+"";case Ne:var Ie=fT;case Tt:var Ue=X&p;if(Ie||(Ie=mm),_.size!=C.size&&!Ue)return!1;var ht=xe.get(_);if(ht)return ht==C;X|=m,xe.set(_,C);var mt=dk(Ie(_),Ie(C),X,re,fe,xe);return xe.delete(_),mt;case qe:if(_l)return _l.call(_)==_l.call(C)}return!1}function ZO(_,C,L,X,re,fe){var xe=L&p,Ie=f_(_),Ue=Ie.length,ht=f_(C),mt=ht.length;if(Ue!=mt&&!xe)return!1;for(var Ct=Ue;Ct--;){var Yt=Ie[Ct];if(!(xe?Yt in C:ei.call(C,Yt)))return!1}var mn=fe.get(_),Rn=fe.get(C);if(mn&&Rn)return mn==C&&Rn==_;var yr=!0;fe.set(_,C),fe.set(C,_);for(var Nn=xe;++Ct<Ue;){Yt=Ie[Ct];var Nr=_[Yt],Ur=C[Yt];if(X)var Df=xe?X(Ur,Nr,Yt,C,_,fe):X(Nr,Ur,Yt,_,C,fe);if(!(Df===n?Nr===Ur||re(Nr,Ur,L,X,fe):Df)){yr=!1;break}Nn||(Nn=Yt=="constructor")}if(yr&&!Nn){var Cl=_.constructor,Pf=C.constructor;Cl!=Pf&&"constructor"in _&&"constructor"in C&&!(typeof Cl=="function"&&Cl instanceof Cl&&typeof Pf=="function"&&Pf instanceof Pf)&&(yr=!1)}return fe.delete(_),fe.delete(C),yr}function Od(_){return Tl(ZT(_,n,nS),_+"")}function f_(_){return NT(_,Ca,Sf)}function d_(_){return NT(_,Sc,e4)}var KT=wT?function(_){return wT.get(_)}:IU;function mv(_){for(var C=_.name+"",L=Z1[C],X=ei.call(Z1,C)?L.length:0;X--;){var re=L[X],fe=re.func;if(fe==null||fe==_)return re.name}return C}function Yh(_){var C=ei.call(oe,"placeholder")?oe:_;return C.placeholder}function Sn(){var _=oe.iteratee||CU;return _=_===CU?av:_,arguments.length?_(arguments[0],arguments[1]):_}function h_(_,C){var L=_.__data__;return gv(C)?L[typeof C=="string"?"string":"hash"]:L.map}function p_(_){for(var C=Ca(_),L=C.length;L--;){var X=C[L],re=_[X];C[L]=[X,re,y_(re)]}return C}function Cm(_,C){var L=q1(_,C);return qI(L)?L:n}function XT(_){var C=ei.call(_,Ag),L=_[Ag];try{_[Ag]=n;var X=!0}catch{}var re=Hx.call(_);return X&&(C?_[Ag]=L:delete _[Ag]),re}var Sf=bT?function(_){return _==null?[]:(_=Ci(_),fc(bT(_),function(C){return yT.call(_,C)}))}:kU,e4=bT?function(_){for(var C=[];_;)xf(C,Sf(_)),_=wf(_);return C}:kU,Zo=Qo;(Kx&&Zo(new Kx(new ArrayBuffer(1)))!=dt||kg&&Zo(new kg)!=Ne||Xx&&Zo(Xx.resolve())!=Ge||ym&&Zo(new ym)!=Tt||Qx&&Zo(new Qx)!=wt)&&(Zo=function(_){var C=Qo(_),L=C==Me?_.constructor:n,X=L?Am(L):"";if(X)switch(X){case BI:return dt;case vm:return Ne;case PO:return Ge;case ev:return Tt;case Ed:return wt}return C});function pk(_,C,L){for(var X=-1,re=L.length;++X<re;){var fe=L[X],xe=fe.size;switch(fe.type){case"drop":_+=xe;break;case"dropRight":C-=xe;break;case"take":C=ba(C,_+xe);break;case"takeRight":_=Ks(_,C-xe);break}}return{start:_,end:C}}function t4(_){var C=_.match(Ko);return C?C[1].split(vl):[]}function mk(_,C,L){C=Dd(C,_);for(var X=-1,re=C.length,fe=!1;++X<re;){var xe=If(C[X]);if(!(fe=_!=null&&L(_,xe)))break;_=_[xe]}return fe||++X!=re?fe:(re=_==null?0:_.length,!!re&&_4(re)&&as(xe,re)&&(sr(_)||S_(_)))}function m_(_){var C=_.length,L=new _.constructor(C);return C&&typeof _[0]=="string"&&ei.call(_,"index")&&(L.index=_.index,L.input=_.input),L}function ea(_){return typeof _.constructor=="function"&&!Kh(_)?tv(wf(_)):{}}function rU(_,C,L){var X=_.constructor;switch(C){case Oe:return u_(_);case pe:case Te:return new X(+_);case dt:return qO(_,L);case Lt:case Ft:case dn:case Dn:case Tr:case Ri:case Un:case tr:case Si:return YO(_,L);case Ne:return new X;case tt:case Ot:return new X(_);case yt:return WO(_);case Tt:return new X;case qe:return GO(_)}}function iU(_,C){var L=C.length;if(!L)return _;var X=L-1;return C[X]=(L>1?"& ":"")+C[X],C=C.join(L>2?", ":" "),_.replace(co,`{
/* [wrapped with `+C+`] */
`)}function QT(_){return sr(_)||S_(_)||!!(RO&&_&&_[RO])}function as(_,C){var L=typeof _;return C=C??Z,!!C&&(L=="number"||L!="symbol"&&vd.test(_))&&_>-1&&_%1==0&&_<C}function Za(_,C,L){if(!Fs(L))return!1;var X=typeof C;return(X=="number"?Tc(L)&&as(C,L.length):X=="string"&&C in L)?Qh(L[C],_):!1}function en(_,C){if(sr(_))return!1;var L=typeof _;return L=="number"||L=="symbol"||L=="boolean"||_==null||Nf(_)?!0:Bi.test(_)||!Qr.test(_)||C!=null&&_ in Ci(C)}function gv(_){var C=typeof _;return C=="string"||C=="number"||C=="symbol"||C=="boolean"?_!=="__proto__":_===null}function g_(_){var C=mv(_),L=oe[C];if(typeof L!="function"||!(C in ir.prototype))return!1;if(_===L)return!0;var X=KT(L);return!!X&&_===X[0]}function n4(_){return!!pT&&pT in _}var sU=Y1?Wg:RU;function Kh(_){var C=_&&_.constructor,L=typeof C=="function"&&C.prototype||wd;return _===L}function y_(_){return _===_&&!Fs(_)}function JT(_,C){return function(L){return L==null?!1:L[_]===C&&(C!==n||_ in Ci(L))}}function r4(_){var C=Mt(_,function(X){return L.size===l&&L.clear(),X}),L=C.cache;return C}function i4(_,C){var L=_[1],X=C[1],re=L|X,fe=re<(y|v|I),xe=X==I&&L==w||X==I&&L==R&&_[7].length<=C[8]||X==(I|R)&&C[7].length<=C[8]&&L==w;if(!(fe||xe))return _;X&y&&(_[2]=C[2],re|=L&y?0:b);var Ie=C[3];if(Ie){var Ue=_[3];_[3]=Ue?KO(Ue,Ie,C[4]):Ie,_[4]=Ue?dc(_[3],c):C[4]}return Ie=C[5],Ie&&(Ue=_[5],_[5]=Ue?ik(Ue,Ie,C[6]):Ie,_[6]=Ue?dc(_[5],c):C[6]),Ie=C[7],Ie&&(_[7]=Ie),X&I&&(_[8]=_[8]==null?C[8]:ba(_[8],C[8])),_[9]==null&&(_[9]=C[9]),_[0]=C[0],_[1]=re,_}function s4(_){var C=[];if(_!=null)for(var L in Ci(_))C.push(L);return C}function gk(_){return Hx.call(_)}function ZT(_,C,L){return C=Ks(C===n?_.length-1:C,0),function(){for(var X=arguments,re=-1,fe=Ks(X.length-C,0),xe=Ye(fe);++re<fe;)xe[re]=X[C+re];re=-1;for(var Ie=Ye(C+1);++re<C;)Ie[re]=X[re];return Ie[C]=L(xe),Fo(_,this,Ie)}}function Bo(_,C){return C.length<2?_:zh(_,Sa(C,0,-1))}function Cf(_,C){for(var L=_.length,X=ba(C.length,L),re=Qa(_);X--;){var fe=C[X];_[X]=as(fe,L)?re[fe]:n}return _}function Md(_,C){if(!(C==="constructor"&&typeof _[C]=="function")&&C!="__proto__")return _[C]}var yk=Af($T),yv=$I||function(_,C){return cn.setTimeout(_,C)},Tl=Af(Nd);function vk(_,C,L){var X=C+"";return Tl(_,iU(X,o4(t4(X),L)))}function Af(_){var C=0,L=0;return function(){var X=eU(),re=F-(X-L);if(L=X,re>0){if(++C>=U)return arguments[0]}else C=0;return _.apply(n,arguments)}}function eS(_,C){var L=-1,X=_.length,re=X-1;for(C=C===n?X:C;++L<C;){var fe=uv(L,re),xe=_[fe];_[fe]=_[L],_[L]=xe}return _.length=C,_}var bk=r4(function(_){var C=[];return _.charCodeAt(0)===46&&C.push(""),_.replace(si,function(L,X,re,fe){C.push(re?fe.replace(sc,"$1"):X||L)}),C});function If(_){if(typeof _=="string"||Nf(_))return _;var C=_+"";return C=="0"&&1/_==-1/0?"-0":C}function Am(_){if(_!=null){try{return Vx.call(_)}catch{}try{return _+""}catch{}}return""}function o4(_,C){return mo(Y,function(L){var X="_."+L[0];C&L[1]&&!Tg(_,X)&&_.push(X)}),_.sort()}function a4(_){if(_ instanceof ir)return _.clone();var C=new xa(_.__wrapped__,_.__chain__);return C.__actions__=Qa(_.__actions__),C.__index__=_.__index__,C.__values__=_.__values__,C}function tS(_,C,L){(L?Za(_,C,L):C===n)?C=1:C=Ks(pr(C),0);var X=_==null?0:_.length;if(!X||C<1)return[];for(var re=0,fe=0,xe=Ye(Ig(X/C));re<X;)xe[fe++]=Sa(_,re,re+=C);return xe}function xk(_){for(var C=-1,L=_==null?0:_.length,X=0,re=[];++C<L;){var fe=_[C];fe&&(re[X++]=fe)}return re}function wc(){var _=arguments.length;if(!_)return[];for(var C=Ye(_-1),L=arguments[0],X=_;X--;)C[X-1]=arguments[X];return xf(sr(L)?Qa(L):[L],Ss(C,1))}var jr=hr(function(_,C){return xo(_)?Id(_,Ss(C,1,xo,!0)):[]}),jo=hr(function(_,C){var L=eu(C);return xo(L)&&(L=n),xo(_)?Id(_,Ss(C,1,xo,!0),Sn(L,2)):[]}),Xs=hr(function(_,C){var L=eu(C);return xo(L)&&(L=n),xo(_)?Id(_,Ss(C,1,xo,!0),n,L):[]});function ta(_,C,L){var X=_==null?0:_.length;return X?(C=L||C===n?1:pr(C),Sa(_,C<0?0:C,X)):[]}function Sl(_,C,L){var X=_==null?0:_.length;return X?(C=L||C===n?1:pr(C),C=X-C,Sa(_,0,C<0?0:C)):[]}function vv(_,C){return _&&_.length?o_(_,Sn(C,3),!0,!0):[]}function vo(_,C){return _&&_.length?o_(_,Sn(C,3),!0):[]}function v_(_,C,L,X){var re=_==null?0:_.length;return re?(L&&typeof L!="number"&&Za(_,C,L)&&(L=0,X=re),UO(_,C,L,X)):[]}function Im(_,C,L){var X=_==null?0:_.length;if(!X)return-1;var re=L==null?0:pr(L);return re<0&&(re=Ks(X+re,0)),Sg(_,Sn(C,3),re)}function b_(_,C,L){var X=_==null?0:_.length;if(!X)return-1;var re=X-1;return L!==n&&(re=pr(L),re=L<0?Ks(X+re,0):ba(re,X-1)),Sg(_,Sn(C,3),re,!0)}function nS(_){var C=_==null?0:_.length;return C?Ss(_,1):[]}function x_(_){var C=_==null?0:_.length;return C?Ss(_,ne):[]}function $u(_,C){var L=_==null?0:_.length;return L?(C=C===n?1:pr(C),Ss(_,C)):[]}function _k(_){for(var C=-1,L=_==null?0:_.length,X={};++C<L;){var re=_[C];X[re[0]]=re[1]}return X}function Ug(_){return _&&_.length?_[0]:n}function Xh(_,C,L){var X=_==null?0:_.length;if(!X)return-1;var re=L==null?0:pr(L);return re<0&&(re=Ks(X+re,0)),Lh(_,C,re)}function rS(_){var C=_==null?0:_.length;return C?Sa(_,0,-1):[]}var wk=hr(function(_){var C=_i(_,fv);return C.length&&C[0]===_[0]?DT(C):[]}),km=hr(function(_){var C=eu(_),L=_i(_,fv);return C===eu(L)?C=n:L.pop(),L.length&&L[0]===_[0]?DT(L,Sn(C,2)):[]}),iS=hr(function(_){var C=eu(_),L=_i(_,fv);return C=typeof C=="function"?C:n,C&&L.pop(),L.length&&L[0]===_[0]?DT(L,n,C):[]});function Rm(_,C){return _==null?"":xT.call(_,C)}function eu(_){var C=_==null?0:_.length;return C?_[C-1]:n}function __(_,C,L){var X=_==null?0:_.length;if(!X)return-1;var re=X;return L!==n&&(re=pr(L),re=re<0?Ks(X+re,0):ba(re,X-1)),C===C?X7(_,C,re):Sg(_,N,re,!0)}function Ek(_,C){return _&&_.length?LT(_,pr(C)):n}var sS=hr(w_);function w_(_,C){return _&&_.length&&C&&C.length?$s(_,C):_}function tu(_,C,L){return _&&_.length&&C&&C.length?$s(_,C,Sn(L,2)):_}function Nm(_,C,L){return _&&_.length&&C&&C.length?$s(_,C,n,L):_}var kf=Od(function(_,C){var L=_==null?0:_.length,X=kT(_,C);return yo(_,_i(C,function(re){return as(re,L)?+re:re}).sort(rk)),X});function Fu(_,C){var L=[];if(!(_&&_.length))return L;var X=-1,re=[],fe=_.length;for(C=Sn(C,3);++X<fe;){var xe=_[X];C(xe,X,_)&&(L.push(xe),re.push(X))}return yo(_,re),L}function oS(_){return _==null?_:_T.call(_)}function Tk(_,C,L){var X=_==null?0:_.length;return X?(L&&typeof L!="number"&&Za(_,C,L)?(C=0,L=X):(C=C==null?0:pr(C),L=L===n?X:pr(L)),Sa(_,C,L)):[]}function Sk(_,C){return lv(_,C)}function oU(_,C,L){return FT(_,C,Sn(L,2))}function Dm(_,C){var L=_==null?0:_.length;if(L){var X=lv(_,C);if(X<L&&Qh(_[X],C))return X}return-1}function u4(_,C){return lv(_,C,!0)}function Ck(_,C,L){return FT(_,C,Sn(L,2),!0)}function zg(_,C){var L=_==null?0:_.length;if(L){var X=lv(_,C,!0)-1;if(Qh(_[X],C))return X}return-1}function Ak(_){return _&&_.length?JI(_):[]}function Vg(_,C){return _&&_.length?JI(_,Sn(C,2)):[]}function l4(_){var C=_==null?0:_.length;return C?Sa(_,1,C):[]}function c4(_,C,L){return _&&_.length?(C=L||C===n?1:pr(C),Sa(_,0,C<0?0:C)):[]}function Ik(_,C,L){var X=_==null?0:_.length;return X?(C=L||C===n?1:pr(C),C=X-C,Sa(_,C<0?0:C,X)):[]}function aS(_,C){return _&&_.length?o_(_,Sn(C,3),!1,!0):[]}function aU(_,C){return _&&_.length?o_(_,Sn(C,3)):[]}var uU=hr(function(_){return Wh(Ss(_,1,xo,!0))}),f4=hr(function(_){var C=eu(_);return xo(C)&&(C=n),Wh(Ss(_,1,xo,!0),Sn(C,2))}),d4=hr(function(_){var C=eu(_);return C=typeof C=="function"?C:n,Wh(Ss(_,1,xo,!0),n,C)});function Hg(_){return _&&_.length?Wh(_):[]}function lU(_,C){return _&&_.length?Wh(_,Sn(C,2)):[]}function bv(_,C){return C=typeof C=="function"?C:n,_&&_.length?Wh(_,n,C):[]}function uS(_){if(!(_&&_.length))return[];var C=0;return _=fc(_,function(L){if(xo(L))return C=Ks(L.length,C),!0}),oi(C,function(L){return _i(_,te(L))})}function ys(_,C){if(!(_&&_.length))return[];var L=uS(_);return C==null?L:_i(L,function(X){return Fo(C,n,X)})}var cU=hr(function(_,C){return xo(_)?Id(_,C):[]}),h4=hr(function(_){return jT(fc(_,xo))}),fU=hr(function(_){var C=eu(_);return xo(C)&&(C=n),jT(fc(_,xo),Sn(C,2))}),dU=hr(function(_){var C=eu(_);return C=typeof C=="function"?C:n,jT(fc(_,xo),n,C)}),p4=hr(uS);function m4(_,C){return a_(_||[],C||[],Pg)}function hU(_,C){return a_(_||[],C||[],Fg)}var Ec=hr(function(_){var C=_.length,L=C>1?_[C-1]:n;return L=typeof L=="function"?(_.pop(),L):n,ys(_,L)});function lS(_){var C=oe(_);return C.__chain__=!0,C}function pU(_,C){return C(_),_}function Rf(_,C){return C(_)}var cS=Od(function(_){var C=_.length,L=C?_[0]:0,X=this.__wrapped__,re=function(fe){return kT(fe,_)};return C>1||this.__actions__.length||!(X instanceof ir)||!as(L)?this.thru(re):(X=X.slice(L,+L+(C?1:0)),X.__actions__.push({func:Rf,args:[re],thisArg:n}),new xa(X,this.__chain__).thru(function(fe){return C&&!fe.length&&fe.push(n),fe}))});function qg(){return lS(this)}function fS(){return new xa(this.value(),this.__chain__)}function kk(){this.__values__===n&&(this.__values__=Jae(this.value()));var _=this.__index__>=this.__values__.length,C=_?n:this.__values__[this.__index__++];return{done:_,value:C}}function Rk(){return this}function mU(_){for(var C,L=this;L instanceof Td;){var X=a4(L);X.__index__=0,X.__values__=n,C?re.__wrapped__=X:C=X;var re=X;L=L.__wrapped__}return re.__wrapped__=_,C}function Nk(){var _=this.__wrapped__;if(_ instanceof ir){var C=_;return this.__actions__.length&&(C=new ir(this)),C=C.reverse(),C.__actions__.push({func:Rf,args:[oS],thisArg:n}),new xa(C,this.__chain__)}return this.thru(oS)}function gU(){return cv(this.__wrapped__,this.__actions__)}var g4=VT(function(_,C,L){ei.call(_,L)?++_[L]:Ad(_,L,1)});function y4(_,C,L){var X=sr(_)?Eg:e_;return L&&Za(_,C,L)&&(C=n),X(_,Sn(C,3))}function dS(_,C){var L=sr(_)?fc:VI;return L(_,Sn(C,3))}var hS=jg(Im),v4=jg(b_);function Dk(_,C){return Ss(yS(_,C),1)}function b4(_,C){return Ss(yS(_,C),ne)}function Pk(_,C,L){return L=L===n?1:pr(L),Ss(yS(_,C),L)}function E_(_,C){var L=sr(_)?mo:kd;return L(_,Sn(C,3))}function pS(_,C){var L=sr(_)?wg:jO;return L(_,Sn(C,3))}var mS=VT(function(_,C,L){ei.call(_,L)?_[L].push(C):Ad(_,L,[C])});function x4(_,C,L,X){_=Tc(_)?_:xS(_),L=L&&!X?pr(L):0;var re=_.length;return L<0&&(L=Ks(re+L,0)),w4(_)?L<=re&&_.indexOf(C,L)>-1:!!re&&Lh(_,C,L)>-1}var yU=hr(function(_,C,L){var X=-1,re=typeof C=="function",fe=Tc(_)?Ye(_.length):[];return kd(_,function(xe){fe[++X]=re?Fo(C,xe,L):vc(xe,C,L)}),fe}),gS=VT(function(_,C,L){Ad(_,L,C)});function yS(_,C){var L=sr(_)?_i:GI;return L(_,Sn(C,3))}function T_(_,C,L,X){return _==null?[]:(sr(C)||(C=C==null?[]:[C]),L=X?n:L,sr(L)||(L=L==null?[]:[L]),i_(_,C,L))}var vU=VT(function(_,C,L){_[L?0:1].push(C)},function(){return[[],[]]});function vS(_,C,L){var X=sr(_)?_f:ze,re=arguments.length<3;return X(_,Sn(C,4),L,re,kd)}function g(_,C,L){var X=sr(_)?lT:ze,re=arguments.length<3;return X(_,Sn(C,4),L,re,jO)}function x(_,C){var L=sr(_)?fc:VI;return L(_,on(Sn(C,3)))}function k(_){var C=sr(_)?Cd:Ta;return C(_)}function P(_,C,L){(L?Za(_,C,L):C===n)?C=1:C=pr(C);var X=sr(_)?Dg:XI;return X(_,C)}function z(_){var C=sr(_)?FO:xc;return C(_)}function K(_){if(_==null)return 0;if(Tc(_))return w4(_)?Cg(_):_.length;var C=Zo(_);return C==Ne||C==Tt?_.size:qh(_).length}function se(_,C,L){var X=sr(_)?z1:QI;return L&&Za(_,C,L)&&(C=n),X(_,Sn(C,3))}var be=hr(function(_,C){if(_==null)return[];var L=C.length;return L>1&&Za(_,C[0],C[1])?C=[]:L>2&&Za(C[0],C[1],C[2])&&(C=[C[0]]),i_(_,Ss(C,1),[])}),Ce=ts||function(){return cn.Date.now()};function Xe(_,C){if(typeof C!="function")throw new hc(o);return _=pr(_),function(){if(--_<1)return C.apply(this,arguments)}}function St(_,C,L){return C=L?n:C,C=_&&C==null?_.length:C,Pd(_,I,n,n,n,n,C)}function kt(_,C){var L;if(typeof C!="function")throw new hc(o);return _=pr(_),function(){return--_>0&&(L=C.apply(this,arguments)),_<=1&&(C=n),L}}var _t=hr(function(_,C,L){var X=y;if(L.length){var re=dc(L,Yh(_t));X|=T}return Pd(_,X,C,L,re)}),Xt=hr(function(_,C,L){var X=y|v;if(L.length){var re=dc(L,Yh(Xt));X|=T}return Pd(C,X,_,L,re)});function rn(_,C,L){C=L?n:C;var X=Pd(_,w,n,n,n,n,n,C);return X.placeholder=rn.placeholder,X}function sn(_,C,L){C=L?n:C;var X=Pd(_,E,n,n,n,n,n,C);return X.placeholder=sn.placeholder,X}function Cs(_,C,L){var X,re,fe,xe,Ie,Ue,ht=0,mt=!1,Ct=!1,Yt=!0;if(typeof _!="function")throw new hc(o);C=Ld(C)||0,Fs(L)&&(mt=!!L.leading,Ct="maxWait"in L,fe=Ct?Ks(Ld(L.maxWait)||0,C):fe,Yt="trailing"in L?!!L.trailing:Yt);function mn(_o){var Jh=X,Yg=re;return X=re=n,ht=_o,xe=_.apply(Yg,Jh),xe}function Rn(_o){return ht=_o,Ie=yv(Nr,C),mt?mn(_o):xe}function yr(_o){var Jh=_o-Ue,Yg=_o-ht,fue=C-Jh;return Ct?ba(fue,fe-Yg):fue}function Nn(_o){var Jh=_o-Ue,Yg=_o-ht;return Ue===n||Jh>=C||Jh<0||Ct&&Yg>=fe}function Nr(){var _o=Ce();if(Nn(_o))return Ur(_o);Ie=yv(Nr,yr(_o))}function Ur(_o){return Ie=n,Yt&&X?mn(_o):(X=re=n,xe)}function Df(){Ie!==n&&tk(Ie),ht=0,X=Ue=re=Ie=n}function Cl(){return Ie===n?xe:Ur(Ce())}function Pf(){var _o=Ce(),Jh=Nn(_o);if(X=arguments,re=this,Ue=_o,Jh){if(Ie===n)return Rn(Ue);if(Ct)return tk(Ie),Ie=yv(Nr,C),mn(Ue)}return Ie===n&&(Ie=yv(Nr,C)),xe}return Pf.cancel=Df,Pf.flush=Cl,Pf}var Ve=hr(function(_,C){return zI(_,1,C)}),Pe=hr(function(_,C,L){return zI(_,Ld(C)||0,L)});function We(_){return Pd(_,D)}function Mt(_,C){if(typeof _!="function"||C!=null&&typeof C!="function")throw new hc(o);var L=function(){var X=arguments,re=C?C.apply(this,X):X[0],fe=L.cache;if(fe.has(re))return fe.get(re);var xe=_.apply(this,X);return L.cache=fe.set(re,xe)||fe,xe};return L.cache=new(Mt.Cache||pc),L}Mt.Cache=pc;function on(_){if(typeof _!="function")throw new hc(o);return function(){var C=arguments;switch(C.length){case 0:return!_.call(this);case 1:return!_.call(this,C[0]);case 2:return!_.call(this,C[0],C[1]);case 3:return!_.call(this,C[0],C[1],C[2])}return!_.apply(this,C)}}function _n(_){return kt(2,_)}var wn=HO(function(_,C){C=C.length==1&&sr(C[0])?_i(C[0],fi(Sn())):_i(Ss(C,1),fi(Sn()));var L=C.length;return hr(function(X){for(var re=-1,fe=ba(X.length,L);++re<fe;)X[re]=C[re].call(this,X[re]);return Fo(_,this,X)})}),kn=hr(function(_,C){var L=dc(C,Yh(kn));return Pd(_,T,n,C,L)}),bo=hr(function(_,C){var L=dc(C,Yh(bo));return Pd(_,A,n,C,L)}),ti=Od(function(_,C){return Pd(_,R,n,n,n,C)});function Pm(_,C){if(typeof _!="function")throw new hc(o);return C=C===n?C:pr(C),hr(_,C)}function bU(_,C){if(typeof _!="function")throw new hc(o);return C=C==null?0:Ks(pr(C),0),hr(function(L){var X=L[C],re=Gh(L,0,C);return X&&xf(re,X),Fo(_,this,re)})}function y9e(_,C,L){var X=!0,re=!0;if(typeof _!="function")throw new hc(o);return Fs(L)&&(X="leading"in L?!!L.leading:X,re="trailing"in L?!!L.trailing:re),Cs(_,C,{leading:X,maxWait:C,trailing:re})}function v9e(_){return St(_,1)}function b9e(_,C){return kn(UT(C),_)}function x9e(){if(!arguments.length)return[];var _=arguments[0];return sr(_)?_:[_]}function _9e(_){return Mu(_,h)}function w9e(_,C){return C=typeof C=="function"?C:n,Mu(_,h,C)}function E9e(_){return Mu(_,f|h)}function T9e(_,C){return C=typeof C=="function"?C:n,Mu(_,f|h,C)}function S9e(_,C){return C==null||Zx(_,C,Ca(C))}function Qh(_,C){return _===C||_!==_&&C!==C}var C9e=YT(Em),A9e=YT(function(_,C){return _>=C}),S_=PT(function(){return arguments}())?PT:function(_){return Qs(_)&&ei.call(_,"callee")&&!yT.call(_,"callee")},sr=Ye.isArray,I9e=xd?fi(xd):zO;function Tc(_){return _!=null&&_4(_.length)&&!Wg(_)}function xo(_){return Qs(_)&&Tc(_)}function k9e(_){return _===!0||_===!1||Qs(_)&&Qo(_)==pe}var xv=FI||RU,R9e=Ls?fi(Ls):Hh;function N9e(_){return Qs(_)&&_.nodeType===1&&!Ok(_)}function D9e(_){if(_==null)return!0;if(Tc(_)&&(sr(_)||typeof _=="string"||typeof _.splice=="function"||xv(_)||bS(_)||S_(_)))return!_.length;var C=Zo(_);if(C==Ne||C==Tt)return!_.size;if(Kh(_))return!qh(_).length;for(var L in _)if(ei.call(_,L))return!1;return!0}function P9e(_,C){return bc(_,C)}function O9e(_,C,L){L=typeof L=="function"?L:n;var X=L?L(_,C):n;return X===n?bc(_,C,n,L):!!X}function xU(_){if(!Qs(_))return!1;var C=Qo(_);return C==ye||C==Le||typeof _.message=="string"&&typeof _.name=="string"&&!Ok(_)}function M9e(_){return typeof _=="number"&&X1(_)}function Wg(_){if(!Fs(_))return!1;var C=Qo(_);return C==he||C==$e||C==_e||C==at}function Yae(_){return typeof _=="number"&&_==pr(_)}function _4(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=Z}function Fs(_){var C=typeof _;return _!=null&&(C=="object"||C=="function")}function Qs(_){return _!=null&&typeof _=="object"}var Kae=cc?fi(cc):VO;function L9e(_,C){return _===C||ov(_,C,p_(C))}function $9e(_,C,L){return L=typeof L=="function"?L:n,ov(_,C,p_(C),L)}function F9e(_){return Xae(_)&&_!=+_}function B9e(_){if(sU(_))throw new zn(s);return qI(_)}function j9e(_){return _===null}function U9e(_){return _==null}function Xae(_){return typeof _=="number"||Qs(_)&&Qo(_)==tt}function Ok(_){if(!Qs(_)||Qo(_)!=Me)return!1;var C=wf(_);if(C===null)return!0;var L=ei.call(C,"constructor")&&C.constructor;return typeof L=="function"&&L instanceof L&&Vx.call(L)==mT}var _U=_g?fi(_g):n_;function z9e(_){return Yae(_)&&_>=-9007199254740991&&_<=Z}var Qae=bf?fi(bf):Rd;function w4(_){return typeof _=="string"||!sr(_)&&Qs(_)&&Qo(_)==Ot}function Nf(_){return typeof _=="symbol"||Qs(_)&&Qo(_)==qe}var bS=uT?fi(uT):r_;function V9e(_){return _===n}function H9e(_){return Qs(_)&&Zo(_)==wt}function q9e(_){return Qs(_)&&Qo(_)==ke}var W9e=YT(Tm),G9e=YT(function(_,C){return _<=C});function Jae(_){if(!_)return[];if(Tc(_))return w4(_)?xl(_):Qa(_);if(Bh&&_[Bh])return Y7(_[Bh]());var C=Zo(_),L=C==Ne?fT:C==Tt?mm:xS;return L(_)}function Gg(_){if(!_)return _===0?_:0;if(_=Ld(_),_===ne||_===-1/0){var C=_<0?-1:1;return C*ie}return _===_?_:0}function pr(_){var C=Gg(_),L=C%1;return C===C?L?C-L:C:0}function Zae(_){return _?Uh(pr(_),0,j):0}function Ld(_){if(typeof _=="number")return _;if(Nf(_))return q;if(Fs(_)){var C=typeof _.valueOf=="function"?_.valueOf():_;_=Fs(C)?C+"":C}if(typeof _!="string")return _===0?_:+_;_=Rr(_);var L=fm.test(_);return L||yd.test(_)?rr(_.slice(2),L?2:8):Xo.test(_)?q:+_}function eue(_){return Tf(_,Sc(_))}function Y9e(_){return _?Uh(pr(_),-9007199254740991,Z):_===0?_:0}function Ai(_){return _==null?"":Lu(_)}var K9e=dv(function(_,C){if(Kh(C)||Tc(C)){Tf(C,Ca(C),_);return}for(var L in C)ei.call(C,L)&&Pg(_,L,C[L])}),tue=dv(function(_,C){Tf(C,Sc(C),_)}),E4=dv(function(_,C,L,X){Tf(C,Sc(C),_,X)}),X9e=dv(function(_,C,L,X){Tf(C,Ca(C),_,X)}),Q9e=Od(kT);function J9e(_,C){var L=tv(_);return C==null?L:rs(L,C)}var Z9e=hr(function(_,C){_=Ci(_);var L=-1,X=C.length,re=X>2?C[2]:n;for(re&&Za(C[0],C[1],re)&&(X=1);++L<X;)for(var fe=C[L],xe=Sc(fe),Ie=-1,Ue=xe.length;++Ie<Ue;){var ht=xe[Ie],mt=_[ht];(mt===n||Qh(mt,wd[ht])&&!ei.call(_,ht))&&(_[ht]=fe[ht])}return _}),eje=hr(function(_){return _.push(n,ck),Fo(nue,n,_)});function tje(_,C){return ya(_,Sn(C,3),El)}function nje(_,C){return ya(_,Sn(C,3),wm)}function rje(_,C){return _==null?_:RT(_,Sn(C,3),Sc)}function ije(_,C){return _==null?_:t_(_,Sn(C,3),Sc)}function sje(_,C){return _&&El(_,Sn(C,3))}function oje(_,C){return _&&wm(_,Sn(C,3))}function aje(_){return _==null?[]:sv(_,Ca(_))}function uje(_){return _==null?[]:sv(_,Sc(_))}function wU(_,C,L){var X=_==null?n:zh(_,C);return X===n?L:X}function lje(_,C){return _!=null&&mk(_,C,yc)}function EU(_,C){return _!=null&&mk(_,C,Mg)}var cje=XO(function(_,C,L){C!=null&&typeof C.toString!="function"&&(C=Hx.call(C)),_[C]=L},SU(Cc)),fje=XO(function(_,C,L){C!=null&&typeof C.toString!="function"&&(C=Hx.call(C)),ei.call(_,C)?_[C].push(L):_[C]=[L]},Sn),dje=hr(vc);function Ca(_){return Tc(_)?Sd(_):qh(_)}function Sc(_){return Tc(_)?Sd(_,!0):WI(_)}function hje(_,C){var L={};return C=Sn(C,3),El(_,function(X,re,fe){Ad(L,C(X,re,fe),X)}),L}function pje(_,C){var L={};return C=Sn(C,3),El(_,function(X,re,fe){Ad(L,re,C(X,re,fe))}),L}var mje=dv(function(_,C,L){Lg(_,C,L)}),nue=dv(function(_,C,L,X){Lg(_,C,L,X)}),gje=Od(function(_,C){var L={};if(_==null)return L;var X=!1;C=_i(C,function(fe){return fe=Dd(fe,_),X||(X=fe.length>1),fe}),Tf(_,d_(_),L),X&&(L=Mu(L,f|d|h,fk));for(var re=C.length;re--;)BT(L,C[re]);return L});function yje(_,C){return rue(_,on(Sn(C)))}var vje=Od(function(_,C){return _==null?{}:KI(_,C)});function rue(_,C){if(_==null)return{};var L=_i(d_(_),function(X){return[X]});return C=Sn(C),Sm(_,L,function(X,re){return C(X,re[0])})}function bje(_,C,L){C=Dd(C,_);var X=-1,re=C.length;for(re||(re=1,_=n);++X<re;){var fe=_==null?n:_[If(C[X])];fe===n&&(X=re,fe=L),_=Wg(fe)?fe.call(_):fe}return _}function xje(_,C,L){return _==null?_:Fg(_,C,L)}function _je(_,C,L,X){return X=typeof X=="function"?X:n,_==null?_:Fg(_,C,L,X)}var iue=uk(Ca),sue=uk(Sc);function wje(_,C,L){var X=sr(_),re=X||xv(_)||bS(_);if(C=Sn(C,4),L==null){var fe=_&&_.constructor;re?L=X?new fe:[]:Fs(_)?L=Wg(fe)?tv(wf(_)):{}:L={}}return(re?mo:El)(_,function(xe,Ie,Ue){return C(L,xe,Ie,Ue)}),L}function Eje(_,C){return _==null?!0:BT(_,C)}function Tje(_,C,L){return _==null?_:ek(_,C,UT(L))}function Sje(_,C,L,X){return X=typeof X=="function"?X:n,_==null?_:ek(_,C,UT(L),X)}function xS(_){return _==null?[]:Ts(_,Ca(_))}function Cje(_){return _==null?[]:Ts(_,Sc(_))}function Aje(_,C,L){return L===n&&(L=C,C=n),L!==n&&(L=Ld(L),L=L===L?L:0),C!==n&&(C=Ld(C),C=C===C?C:0),Uh(Ld(_),C,L)}function Ije(_,C,L){return C=Gg(C),L===n?(L=C,C=0):L=Gg(L),_=Ld(_),HI(_,C,L)}function kje(_,C,L){if(L&&typeof L!="boolean"&&Za(_,C,L)&&(C=L=n),L===n&&(typeof C=="boolean"?(L=C,C=n):typeof _=="boolean"&&(L=_,_=n)),_===n&&C===n?(_=0,C=1):(_=Gg(_),C===n?(C=_,_=0):C=Gg(C)),_>C){var X=_;_=C,C=X}if(L||_%1||C%1){var re=Yx();return ba(_+re*(C-_+tn("1e-"+((re+"").length-1))),C)}return uv(_,C)}var Rje=Bg(function(_,C,L){return C=C.toLowerCase(),_+(L?oue(C):C)});function oue(_){return TU(Ai(_).toLowerCase())}function aue(_){return _=Ai(_),_&&_.replace(df,wO).replace(lc,"")}function Nje(_,C,L){_=Ai(_),C=Lu(C);var X=_.length;L=L===n?X:Uh(pr(L),0,X);var re=L;return L-=C.length,L>=0&&_.slice(L,re)==C}function Dje(_){return _=Ai(_),_&&Oo.test(_)?_.replace(Ji,EO):_}function Pje(_){return _=Ai(_),_&&Fr.test(_)?_.replace(Hs,"\\$&"):_}var Oje=Bg(function(_,C,L){return _+(L?"-":"")+C.toLowerCase()}),Mje=Bg(function(_,C,L){return _+(L?" ":"")+C.toLowerCase()}),Lje=sk("toLowerCase");function $je(_,C,L){_=Ai(_),C=pr(C);var X=C?Cg(_):0;if(!C||X>=C)return _;var re=(C-X)/2;return c_(gm(re),L)+_+c_(Ig(re),L)}function Fje(_,C,L){_=Ai(_),C=pr(C);var X=C?Cg(_):0;return C&&X<C?_+c_(C-X,L):_}function Bje(_,C,L){_=Ai(_),C=pr(C);var X=C?Cg(_):0;return C&&X<C?c_(C-X,L)+_:_}function jje(_,C,L){return L||C==null?C=0:C&&(C=+C),DO(Ai(_).replace(Zi,""),C||0)}function Uje(_,C,L){return(L?Za(_,C,L):C===n)?C=1:C=pr(C),$g(Ai(_),C)}function zje(){var _=arguments,C=Ai(_[0]);return _.length<3?C:C.replace(_[1],_[2])}var Vje=Bg(function(_,C,L){return _+(L?"_":"")+C.toLowerCase()});function Hje(_,C,L){return L&&typeof L!="number"&&Za(_,C,L)&&(C=L=n),L=L===n?j:L>>>0,L?(_=Ai(_),_&&(typeof C=="string"||C!=null&&!_U(C))&&(C=Lu(C),!C&&W1(_))?Gh(xl(_),0,L):_.split(C,L)):[]}var qje=Bg(function(_,C,L){return _+(L?" ":"")+TU(C)});function Wje(_,C,L){return _=Ai(_),L=L==null?0:Uh(pr(L),0,_.length),C=Lu(C),_.slice(L,L+C.length)==C}function Gje(_,C,L){var X=oe.templateSettings;L&&Za(_,C,L)&&(C=n),_=Ai(_),C=E4({},C,X,lk);var re=E4({},C.imports,X.imports,lk),fe=Ca(re),xe=Ts(re,fe),Ie,Ue,ht=0,mt=C.interpolate||hf,Ct="__p += '",Yt=zx((C.escape||hf).source+"|"+mt.source+"|"+(mt===Iu?ps:hf).source+"|"+(C.evaluate||hf).source+"|$","g"),mn="//# sourceURL="+(ei.call(C,"sourceURL")?(C.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++U1+"]")+`
`;_.replace(Yt,function(Nn,Nr,Ur,Df,Cl,Pf){return Ur||(Ur=Df),Ct+=_.slice(ht,Pf).replace(pf,TO),Nr&&(Ie=!0,Ct+=`' +
__e(`+Nr+`) +
'`),Cl&&(Ue=!0,Ct+=`';
`+Cl+`;
__p += '`),Ur&&(Ct+=`' +
((__t = (`+Ur+`)) == null ? '' : __t) +
'`),ht=Pf+Nn.length,Nn}),Ct+=`';
`;var Rn=ei.call(C,"variable")&&C.variable;if(!Rn)Ct=`with (obj) {
`+Ct+`
}
`;else if(Pr.test(Rn))throw new zn(a);Ct=(Ue?Ct.replace(Sr,""):Ct).replace(Po,"$1").replace(Qi,"$1;"),Ct="function("+(Rn||"obj")+`) {
`+(Rn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Ie?", __e = _.escape":"")+(Ue?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ct+`return __p
}`;var yr=lue(function(){return Zr(fe,mn+"return "+Ct).apply(n,xe)});if(yr.source=Ct,xU(yr))throw yr;return yr}function Yje(_){return Ai(_).toLowerCase()}function Kje(_){return Ai(_).toUpperCase()}function Xje(_,C,L){if(_=Ai(_),_&&(L||C===n))return Rr(_);if(!_||!(C=Lu(C)))return _;var X=xl(_),re=xl(C),fe=Nu(X,re),xe=pm(X,re)+1;return Gh(X,fe,xe).join("")}function Qje(_,C,L){if(_=Ai(_),_&&(L||C===n))return _.slice(0,hT(_)+1);if(!_||!(C=Lu(C)))return _;var X=xl(_),re=pm(X,xl(C))+1;return Gh(X,0,re).join("")}function Jje(_,C,L){if(_=Ai(_),_&&(L||C===n))return _.replace(Zi,"");if(!_||!(C=Lu(C)))return _;var X=xl(_),re=Nu(X,xl(C));return Gh(X,re).join("")}function Zje(_,C){var L=M,X=$;if(Fs(C)){var re="separator"in C?C.separator:re;L="length"in C?pr(C.length):L,X="omission"in C?Lu(C.omission):X}_=Ai(_);var fe=_.length;if(W1(_)){var xe=xl(_);fe=xe.length}if(L>=fe)return _;var Ie=L-Cg(X);if(Ie<1)return X;var Ue=xe?Gh(xe,0,Ie).join(""):_.slice(0,Ie);if(re===n)return Ue+X;if(xe&&(Ie+=Ue.length-Ie),_U(re)){if(_.slice(Ie).search(re)){var ht,mt=Ue;for(re.global||(re=zx(re.source,Ai(Wa.exec(re))+"g")),re.lastIndex=0;ht=re.exec(mt);)var Ct=ht.index;Ue=Ue.slice(0,Ct===n?Ie:Ct)}}else if(_.indexOf(Lu(re),Ie)!=Ie){var Yt=Ue.lastIndexOf(re);Yt>-1&&(Ue=Ue.slice(0,Yt))}return Ue+X}function e7e(_){return _=Ai(_),_&&Xr.test(_)?_.replace(Ni,SO):_}var t7e=Bg(function(_,C,L){return _+(L?" ":"")+C.toUpperCase()}),TU=sk("toUpperCase");function uue(_,C,L){return _=Ai(_),C=L?n:C,C===n?G7(_)?Q7(_):V1(_):_.match(C)||[]}var lue=hr(function(_,C){try{return Fo(_,n,C)}catch(L){return xU(L)?L:new zn(L)}}),n7e=Od(function(_,C){return mo(C,function(L){L=If(L),Ad(_,L,_t(_[L],_))}),_});function r7e(_){var C=_==null?0:_.length,L=Sn();return _=C?_i(_,function(X){if(typeof X[1]!="function")throw new hc(o);return[L(X[0]),X[1]]}):[],hr(function(X){for(var re=-1;++re<C;){var fe=_[re];if(Fo(fe[0],this,X))return Fo(fe[1],this,X)}})}function i7e(_){return BO(Mu(_,f))}function SU(_){return function(){return _}}function s7e(_,C){return _==null||_!==_?C:_}var o7e=WT(),a7e=WT(!0);function Cc(_){return _}function CU(_){return av(typeof _=="function"?_:Mu(_,f))}function u7e(_){return MT(Mu(_,f))}function l7e(_,C){return os(_,Mu(C,f))}var c7e=hr(function(_,C){return function(L){return vc(L,_,C)}}),f7e=hr(function(_,C){return function(L){return vc(_,L,C)}});function AU(_,C,L){var X=Ca(C),re=sv(C,X);L==null&&!(Fs(C)&&(re.length||!X.length))&&(L=C,C=_,_=this,re=sv(C,Ca(C)));var fe=!(Fs(L)&&"chain"in L)||!!L.chain,xe=Wg(_);return mo(re,function(Ie){var Ue=C[Ie];_[Ie]=Ue,xe&&(_.prototype[Ie]=function(){var ht=this.__chain__;if(fe||ht){var mt=_(this.__wrapped__),Ct=mt.__actions__=Qa(this.__actions__);return Ct.push({func:Ue,args:arguments,thisArg:_}),mt.__chain__=ht,mt}return Ue.apply(_,xf([this.value()],arguments))})}),_}function d7e(){return cn._===this&&(cn._=IO),this}function IU(){}function h7e(_){return _=pr(_),hr(function(C){return LT(C,_)})}var p7e=GT(_i),m7e=GT(Eg),g7e=GT(z1);function cue(_){return en(_)?te(If(_)):gs(_)}function y7e(_){return function(C){return _==null?n:zh(_,C)}}var v7e=ak(),b7e=ak(!0);function kU(){return[]}function RU(){return!1}function x7e(){return{}}function _7e(){return""}function w7e(){return!0}function E7e(_,C){if(_=pr(_),_<1||_>Z)return[];var L=j,X=ba(_,j);C=Sn(C),_-=j;for(var re=oi(X,C);++L<_;)C(L);return re}function T7e(_){return sr(_)?_i(_,If):Nf(_)?[_]:Qa(bk(Ai(_)))}function S7e(_){var C=++K1;return Ai(_)+C}var C7e=l_(function(_,C){return _+C},0),A7e=Jo("ceil"),I7e=l_(function(_,C){return _/C},1),k7e=Jo("floor");function R7e(_){return _&&_.length?Og(_,Cc,Em):n}function N7e(_,C){return _&&_.length?Og(_,Sn(C,2),Em):n}function D7e(_){return W(_,Cc)}function P7e(_,C){return W(_,Sn(C,2))}function O7e(_){return _&&_.length?Og(_,Cc,Tm):n}function M7e(_,C){return _&&_.length?Og(_,Sn(C,2),Tm):n}var L7e=l_(function(_,C){return _*C},1),$7e=Jo("round"),F7e=l_(function(_,C){return _-C},0);function B7e(_){return _&&_.length?Ut(_,Cc):0}function j7e(_,C){return _&&_.length?Ut(_,Sn(C,2)):0}return oe.after=Xe,oe.ary=St,oe.assign=K9e,oe.assignIn=tue,oe.assignInWith=E4,oe.assignWith=X9e,oe.at=Q9e,oe.before=kt,oe.bind=_t,oe.bindAll=n7e,oe.bindKey=Xt,oe.castArray=x9e,oe.chain=lS,oe.chunk=tS,oe.compact=xk,oe.concat=wc,oe.cond=r7e,oe.conforms=i7e,oe.constant=SU,oe.countBy=g4,oe.create=J9e,oe.curry=rn,oe.curryRight=sn,oe.debounce=Cs,oe.defaults=Z9e,oe.defaultsDeep=eje,oe.defer=Ve,oe.delay=Pe,oe.difference=jr,oe.differenceBy=jo,oe.differenceWith=Xs,oe.drop=ta,oe.dropRight=Sl,oe.dropRightWhile=vv,oe.dropWhile=vo,oe.fill=v_,oe.filter=dS,oe.flatMap=Dk,oe.flatMapDeep=b4,oe.flatMapDepth=Pk,oe.flatten=nS,oe.flattenDeep=x_,oe.flattenDepth=$u,oe.flip=We,oe.flow=o7e,oe.flowRight=a7e,oe.fromPairs=_k,oe.functions=aje,oe.functionsIn=uje,oe.groupBy=mS,oe.initial=rS,oe.intersection=wk,oe.intersectionBy=km,oe.intersectionWith=iS,oe.invert=cje,oe.invertBy=fje,oe.invokeMap=yU,oe.iteratee=CU,oe.keyBy=gS,oe.keys=Ca,oe.keysIn=Sc,oe.map=yS,oe.mapKeys=hje,oe.mapValues=pje,oe.matches=u7e,oe.matchesProperty=l7e,oe.memoize=Mt,oe.merge=mje,oe.mergeWith=nue,oe.method=c7e,oe.methodOf=f7e,oe.mixin=AU,oe.negate=on,oe.nthArg=h7e,oe.omit=gje,oe.omitBy=yje,oe.once=_n,oe.orderBy=T_,oe.over=p7e,oe.overArgs=wn,oe.overEvery=m7e,oe.overSome=g7e,oe.partial=kn,oe.partialRight=bo,oe.partition=vU,oe.pick=vje,oe.pickBy=rue,oe.property=cue,oe.propertyOf=y7e,oe.pull=sS,oe.pullAll=w_,oe.pullAllBy=tu,oe.pullAllWith=Nm,oe.pullAt=kf,oe.range=v7e,oe.rangeRight=b7e,oe.rearg=ti,oe.reject=x,oe.remove=Fu,oe.rest=Pm,oe.reverse=oS,oe.sampleSize=P,oe.set=xje,oe.setWith=_je,oe.shuffle=z,oe.slice=Tk,oe.sortBy=be,oe.sortedUniq=Ak,oe.sortedUniqBy=Vg,oe.split=Hje,oe.spread=bU,oe.tail=l4,oe.take=c4,oe.takeRight=Ik,oe.takeRightWhile=aS,oe.takeWhile=aU,oe.tap=pU,oe.throttle=y9e,oe.thru=Rf,oe.toArray=Jae,oe.toPairs=iue,oe.toPairsIn=sue,oe.toPath=T7e,oe.toPlainObject=eue,oe.transform=wje,oe.unary=v9e,oe.union=uU,oe.unionBy=f4,oe.unionWith=d4,oe.uniq=Hg,oe.uniqBy=lU,oe.uniqWith=bv,oe.unset=Eje,oe.unzip=uS,oe.unzipWith=ys,oe.update=Tje,oe.updateWith=Sje,oe.values=xS,oe.valuesIn=Cje,oe.without=cU,oe.words=uue,oe.wrap=b9e,oe.xor=h4,oe.xorBy=fU,oe.xorWith=dU,oe.zip=p4,oe.zipObject=m4,oe.zipObjectDeep=hU,oe.zipWith=Ec,oe.entries=iue,oe.entriesIn=sue,oe.extend=tue,oe.extendWith=E4,AU(oe,oe),oe.add=C7e,oe.attempt=lue,oe.camelCase=Rje,oe.capitalize=oue,oe.ceil=A7e,oe.clamp=Aje,oe.clone=_9e,oe.cloneDeep=E9e,oe.cloneDeepWith=T9e,oe.cloneWith=w9e,oe.conformsTo=S9e,oe.deburr=aue,oe.defaultTo=s7e,oe.divide=I7e,oe.endsWith=Nje,oe.eq=Qh,oe.escape=Dje,oe.escapeRegExp=Pje,oe.every=y4,oe.find=hS,oe.findIndex=Im,oe.findKey=tje,oe.findLast=v4,oe.findLastIndex=b_,oe.findLastKey=nje,oe.floor=k7e,oe.forEach=E_,oe.forEachRight=pS,oe.forIn=rje,oe.forInRight=ije,oe.forOwn=sje,oe.forOwnRight=oje,oe.get=wU,oe.gt=C9e,oe.gte=A9e,oe.has=lje,oe.hasIn=EU,oe.head=Ug,oe.identity=Cc,oe.includes=x4,oe.indexOf=Xh,oe.inRange=Ije,oe.invoke=dje,oe.isArguments=S_,oe.isArray=sr,oe.isArrayBuffer=I9e,oe.isArrayLike=Tc,oe.isArrayLikeObject=xo,oe.isBoolean=k9e,oe.isBuffer=xv,oe.isDate=R9e,oe.isElement=N9e,oe.isEmpty=D9e,oe.isEqual=P9e,oe.isEqualWith=O9e,oe.isError=xU,oe.isFinite=M9e,oe.isFunction=Wg,oe.isInteger=Yae,oe.isLength=_4,oe.isMap=Kae,oe.isMatch=L9e,oe.isMatchWith=$9e,oe.isNaN=F9e,oe.isNative=B9e,oe.isNil=U9e,oe.isNull=j9e,oe.isNumber=Xae,oe.isObject=Fs,oe.isObjectLike=Qs,oe.isPlainObject=Ok,oe.isRegExp=_U,oe.isSafeInteger=z9e,oe.isSet=Qae,oe.isString=w4,oe.isSymbol=Nf,oe.isTypedArray=bS,oe.isUndefined=V9e,oe.isWeakMap=H9e,oe.isWeakSet=q9e,oe.join=Rm,oe.kebabCase=Oje,oe.last=eu,oe.lastIndexOf=__,oe.lowerCase=Mje,oe.lowerFirst=Lje,oe.lt=W9e,oe.lte=G9e,oe.max=R7e,oe.maxBy=N7e,oe.mean=D7e,oe.meanBy=P7e,oe.min=O7e,oe.minBy=M7e,oe.stubArray=kU,oe.stubFalse=RU,oe.stubObject=x7e,oe.stubString=_7e,oe.stubTrue=w7e,oe.multiply=L7e,oe.nth=Ek,oe.noConflict=d7e,oe.noop=IU,oe.now=Ce,oe.pad=$je,oe.padEnd=Fje,oe.padStart=Bje,oe.parseInt=jje,oe.random=kje,oe.reduce=vS,oe.reduceRight=g,oe.repeat=Uje,oe.replace=zje,oe.result=bje,oe.round=$7e,oe.runInContext=Fe,oe.sample=k,oe.size=K,oe.snakeCase=Vje,oe.some=se,oe.sortedIndex=Sk,oe.sortedIndexBy=oU,oe.sortedIndexOf=Dm,oe.sortedLastIndex=u4,oe.sortedLastIndexBy=Ck,oe.sortedLastIndexOf=zg,oe.startCase=qje,oe.startsWith=Wje,oe.subtract=F7e,oe.sum=B7e,oe.sumBy=j7e,oe.template=Gje,oe.times=E7e,oe.toFinite=Gg,oe.toInteger=pr,oe.toLength=Zae,oe.toLower=Yje,oe.toNumber=Ld,oe.toSafeInteger=Y9e,oe.toString=Ai,oe.toUpper=Kje,oe.trim=Xje,oe.trimEnd=Qje,oe.trimStart=Jje,oe.truncate=Zje,oe.unescape=e7e,oe.uniqueId=S7e,oe.upperCase=t7e,oe.upperFirst=TU,oe.each=E_,oe.eachRight=pS,oe.first=Ug,AU(oe,function(){var _={};return El(oe,function(C,L){ei.call(oe.prototype,L)||(_[L]=C)}),_}(),{chain:!1}),oe.VERSION=r,mo(["bind","bindKey","curry","curryRight","partial","partialRight"],function(_){oe[_].placeholder=oe}),mo(["drop","take"],function(_,C){ir.prototype[_]=function(L){L=L===n?1:Ks(pr(L),0);var X=this.__filtered__&&!C?new ir(this):this.clone();return X.__filtered__?X.__takeCount__=ba(L,X.__takeCount__):X.__views__.push({size:ba(L,j),type:_+(X.__dir__<0?"Right":"")}),X},ir.prototype[_+"Right"]=function(L){return this.reverse()[_](L).reverse()}}),mo(["filter","map","takeWhile"],function(_,C){var L=C+1,X=L==H||L==J;ir.prototype[_]=function(re){var fe=this.clone();return fe.__iteratees__.push({iteratee:Sn(re,3),type:L}),fe.__filtered__=fe.__filtered__||X,fe}}),mo(["head","last"],function(_,C){var L="take"+(C?"Right":"");ir.prototype[_]=function(){return this[L](1).value()[0]}}),mo(["initial","tail"],function(_,C){var L="drop"+(C?"":"Right");ir.prototype[_]=function(){return this.__filtered__?new ir(this):this[L](1)}}),ir.prototype.compact=function(){return this.filter(Cc)},ir.prototype.find=function(_){return this.filter(_).head()},ir.prototype.findLast=function(_){return this.reverse().find(_)},ir.prototype.invokeMap=hr(function(_,C){return typeof _=="function"?new ir(this):this.map(function(L){return vc(L,_,C)})}),ir.prototype.reject=function(_){return this.filter(on(Sn(_)))},ir.prototype.slice=function(_,C){_=pr(_);var L=this;return L.__filtered__&&(_>0||C<0)?new ir(L):(_<0?L=L.takeRight(-_):_&&(L=L.drop(_)),C!==n&&(C=pr(C),L=C<0?L.dropRight(-C):L.take(C-_)),L)},ir.prototype.takeRightWhile=function(_){return this.reverse().takeWhile(_).reverse()},ir.prototype.toArray=function(){return this.take(j)},El(ir.prototype,function(_,C){var L=/^(?:filter|find|map|reject)|While$/.test(C),X=/^(?:head|last)$/.test(C),re=oe[X?"take"+(C=="last"?"Right":""):C],fe=X||/^find/.test(C);re&&(oe.prototype[C]=function(){var xe=this.__wrapped__,Ie=X?[1]:arguments,Ue=xe instanceof ir,ht=Ie[0],mt=Ue||sr(xe),Ct=function(Nr){var Ur=re.apply(oe,xf([Nr],Ie));return X&&Yt?Ur[0]:Ur};mt&&L&&typeof ht=="function"&&ht.length!=1&&(Ue=mt=!1);var Yt=this.__chain__,mn=!!this.__actions__.length,Rn=fe&&!Yt,yr=Ue&&!mn;if(!fe&&mt){xe=yr?xe:new ir(this);var Nn=_.apply(xe,Ie);return Nn.__actions__.push({func:Rf,args:[Ct],thisArg:n}),new xa(Nn,Yt)}return Rn&&yr?_.apply(this,Ie):(Nn=this.thru(Ct),Rn?X?Nn.value()[0]:Nn.value():Nn)})}),mo(["pop","push","shift","sort","splice","unshift"],function(_){var C=$h[_],L=/^(?:push|sort|unshift)$/.test(_)?"tap":"thru",X=/^(?:pop|shift)$/.test(_);oe.prototype[_]=function(){var re=arguments;if(X&&!this.__chain__){var fe=this.value();return C.apply(sr(fe)?fe:[],re)}return this[L](function(xe){return C.apply(sr(xe)?xe:[],re)})}}),El(ir.prototype,function(_,C){var L=oe[C];if(L){var X=L.name+"";ei.call(Z1,X)||(Z1[X]=[]),Z1[X].push({name:C,func:L})}}),Z1[pv(n,v).name]=[{name:"wrapper",func:n}],ir.prototype.clone=TT,ir.prototype.reverse=jI,ir.prototype.value=nv,oe.prototype.at=cS,oe.prototype.chain=qg,oe.prototype.commit=fS,oe.prototype.next=kk,oe.prototype.plant=mU,oe.prototype.reverse=Nk,oe.prototype.toJSON=oe.prototype.valueOf=oe.prototype.value=gU,oe.prototype.first=oe.prototype.head,Bh&&(oe.prototype[Bh]=Rk),oe},G1=J7();Jr?((Jr.exports=G1)._=G1,Br._=G1):cn._=G1}).call(Fon)}(_N,_N.exports)),_N.exports}var jon=Bon();const Uon="#/definitions/LibraryConfig",zon="http://json-schema.org/draft-07/schema#",Von=JSON.parse('{"Answer":{"additionalProperties":false,"description":"The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.\\n\\nAnswers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.\\n\\nHere\'s an example of how to use the Answer interface to define the correct answer to a question:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/question.md\\", \\"response\\": [  {    \\"id\\": \\"response1\\",    \\"prompt\\": \\"What is 2 + 2?\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"numerical\\"  } ] \\"correctAnswer\\": [{  \\"id\\": \\"response1\\",  \\"answer\\": 4 }] } ```\\n\\nIn this example, the correct answer to the question \\"What is 2 + 2?\\" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.","properties":{"acceptableHigh":{"description":"The acceptable high value for the answer. This is used to define a range of acceptable answers.","type":"number"},"acceptableLow":{"description":"The acceptable low value for the answer. This is used to define a range of acceptable answers.","type":"number"},"answer":{"description":"The correct answer to the question."},"id":{"description":"The id of the answer. This is used to identify the answer in the data file.","type":"string"}},"required":["id","answer"],"type":"object"},"BaseComponents":{"additionalProperties":{"additionalProperties":false,"properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega"],"type":"string"}},"type":"object"},"description":"The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\\n\\n Using baseComponents:\\n\\n```js \\"baseComponents\\": { \\"my-image-component\\": { \\"instructionLocation\\": \\"sidebar\\", \\"nextButtonLocation\\": \\"sidebar\\", \\"path\\": \\"<study-name>/assets/my-image.jpg\\", \\"response\\": [   {     \\"id\\": \\"my-image-id\\",     \\"options\\": [\\"Europe\\", \\"Japan\\", \\"USA\\"],     \\"prompt\\": \\"Your Selected Answer:\\",     \\"type\\": \\"dropdown\\"   } ], \\"type\\": \\"image\\" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `\\"baseComponent\\":\\"my-image-component\\"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js \\"components\\": { \\"q1\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with largest GDP\\", \\"instruction\\": \\"Which region has the largest GDP?\\" }, \\"q2\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with lowest GDP\\", \\"instruction\\": \\"Which region has the lowest GDP?\\" }, \\"q3\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with highest exports of Wheat\\", \\"instruction\\": \\"Which region had the most Wheat exported in 2022?\\" } } ```","type":"object"},"CheckboxResponse":{"additionalProperties":false,"description":"The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\\n\\n```js { \\"id\\": \\"q7\\", \\"prompt\\": \\"Checkbox example (not required)\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"checkbox\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\", \\"Option 3\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the checkboxes horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"maxSelections":{"description":"The maximum number of selections that are required.","type":"number"},"minSelections":{"description":"The minimum number of selections that are required.","type":"number"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"checkbox","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the checkboxes with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ComponentBlock":{"additionalProperties":false,"description":"The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\\n\\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\\n\\nHere\'s a snippet that shows how to use the random order:\\n\\n```js { \\"order\\": \\"random\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\\n\\n```js [ [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component1\\", \\"component3\\", \\"component2\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], ... ] ```\\n\\nIn addition to the order property, the ComponentBlock interface also includes the `\\"numSamples\\"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `\\"numSamples\\"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ], \\"numSamples\\": 2 } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\"], [\\"component2\\", \\"component3\\"], [\\"component3\\", \\"component1\\"], ... ] ```\\n\\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\\n\\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.","properties":{"components":{"description":"The components that are included in the order.","items":{"anyOf":[{"type":"string"},{"$ref":"#/definitions/ComponentBlock"}]},"type":"array"},"id":{"description":"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.","type":"string"},"interruptions":{"description":"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.","items":{"$ref":"#/definitions/InterruptionBlock"},"type":"array"},"numSamples":{"description":"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.","type":"number"},"order":{"description":"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.","enum":["random","latinSquare","fixed"],"type":"string"},"skip":{"$ref":"#/definitions/SkipConditions","description":"The skip conditions for the block."}},"required":["order","components"],"type":"object"},"ComponentBlockCondition":{"additionalProperties":false,"description":"The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.\\n\\nAnswers are checked against the correct answers defined in the IndividualComponent\'s [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.\\n\\nYou might use this if a participant answers two questions in a block incorrectly. Here\'s an example of how to use the ComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"check\\": \\"block\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.\\n\\nWhen the condition is met, the participant will immediately be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"block","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["check","condition","value","to"],"type":"object"},"DeterministicInterruption":{"additionalProperties":false,"description":"The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.\\n\\nFor example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.\\n\\nThe components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the DeterministicInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"firstLocation\\": 2,   \\"spacing\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"firstLocation":{"description":"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).","type":"number"},"spacing":{"description":"The number of components between breaks.","type":"number"}},"required":["firstLocation","spacing","components"],"type":"object"},"DropdownResponse":{"additionalProperties":false,"description":"The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\\n\\nExample: ```js { \\"id\\": \\"q-color\\", \\"prompt\\": \\"What is your favorite color?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"dropdown\\", \\"placeholder\\": \\"Please choose your favorite color\\", \\"options\\": [\\"Red\\", \\"Blue\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed in the dropdown.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"dropdown","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ImageComponent":{"additionalProperties":false,"description":"The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\\n\\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { \\"type\\": \\"image\\", \\"path\\": \\"<study-name>/assets/image.jpg\\", \\"style\\": { \\"maxWidth\\": \\"50%\\" } } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"image","type":"string"}},"required":["path","response","type"],"type":"object"},"IndividualComponent":{"anyOf":[{"$ref":"#/definitions/MarkdownComponent"},{"$ref":"#/definitions/ReactComponent"},{"$ref":"#/definitions/ImageComponent"},{"$ref":"#/definitions/WebsiteComponent"},{"$ref":"#/definitions/QuestionnaireComponent"},{"$ref":"#/definitions/VegaComponent"}]},"IndividualComponentAllResponsesCondition":{"additionalProperties":false,"description":"The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\n\\nHere\'s an example of how to use the IndividualComponentAllResponsesCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"responses\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, if all responses to the component with the ID \\"attentionCheck\\" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"responses","description":"The check we\'ll perform.","type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"}},"required":["name","check","to"],"type":"object"},"IndividualComponentSingleResponseCondition":{"additionalProperties":false,"description":"The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\nFor example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here\'s an example of how to use the IndividualComponentSingleResponseCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"response\\",   \\"responseId\\": \\"attentionCheckResponse\\",   \\"value\\": \\"the right answer\\",   \\"comparison\\": \\"equal\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, we assign our skip logic to the component whose ID is \\"attentionCheck\\". If the answer given to the response \\"attentionCheckResponse\\" is equal to \\"the right answer\\", then the user will be redirected to the end of the study. If the response is _not_ equal to \\"the right answer\\", then the participant will continue to the next component in the sequence.","properties":{"check":{"const":"response","description":"The check we\'ll perform.","type":"string"},"comparison":{"description":"The comparison to use.","enum":["equal","notEqual"],"type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"responseId":{"description":"The response id to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The value to check.","type":["string","number"]}},"required":["name","check","responseId","value","comparison","to"],"type":"object"},"InheritedComponent":{"additionalProperties":false,"description":"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"baseComponent":{"type":"string"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega"],"type":"string"}},"required":["baseComponent"],"type":"object"},"InterruptionBlock":{"anyOf":[{"$ref":"#/definitions/DeterministicInterruption"},{"$ref":"#/definitions/RandomInterruption"}],"description":"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},"LibraryConfig":{"additionalProperties":false,"description":"LibraryConfig is used to define the properties of a library configuration. This is a JSON object with three main components: baseComponents, components, and the sequences. Libraries are useful for defining components and sequences of these components that are to be reused across multiple studies. We (the reVISit team) provide several libraries that can be used in your study configurations. Check the public/libraries folder in the reVISit-studies repository for available libraries. We also plan to accept community contributions for libraries. If you have a library that you think would be useful for others, please reach out to us. We would love to include it in our repository.\\n\\nBelow is the general template that should be followed when constructing a Library configuration file.\\n\\n```js {  \\"$schema\\": \\"https://raw.githubusercontent.com/revisit-studies/study/v2.0.2/src/parser/LibraryConfigSchema.json\\",  \\"baseComponents\\": {    // BaseComponents here are defined exactly as is in the StudyConfig  },  \\"components\\": {    // Components here are defined exactly as is in the StudyConfig  },  \\"sequences\\": {   // Sequences here are defined as \\"key\\": \\"value\\" pairs where the key is the name of the sequence and the value is a ComponentBlock, just like in the StudyConfig  } } ```","properties":{"$schema":{"description":"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information","type":"string"},"baseComponents":{"$ref":"#/definitions/BaseComponents","description":"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},"components":{"additionalProperties":{"anyOf":[{"$ref":"#/definitions/IndividualComponent"},{"$ref":"#/definitions/InheritedComponent"}]},"description":"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.","type":"object"},"description":{"description":"A description of the library.","type":"string"},"doi":{"description":"The DOI of the paper where the content of the library is based on.","type":"string"},"externalLink":{"description":"The external link to the paper/website where the content of the library is based on.","type":"string"},"reference":{"description":"The reference to the paper where the content of the library is based on.","type":"string"},"sequences":{"additionalProperties":{"$ref":"#/definitions/ComponentBlock"},"description":"The order of the components in the study. This might include some randomness.","type":"object"}},"required":["$schema","description","components","sequences"],"type":"object"},"LikertResponse":{"additionalProperties":false,"description":"The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as \'Strongly Disagree\' and \'Strongly Agree\'.\\n\\nExample for a five-point Likert Scale:\\n\\n```js { \\"id\\": \\"q-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"likert\\", \\"leftLabel\\": \\"Not Enjoyable\\", \\"rightLabel\\": \\"Very Enjoyable\\", \\"numItems\\": 5 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the likert scale. E.g Strongly Disagree","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"numItems":{"description":"The number of options to render.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the likert scale. E.g Strongly Agree","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"likert","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","numItems","prompt","type"],"type":"object"},"LongTextResponse":{"additionalProperties":false,"description":"The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { \\"id\\": \\"q-name\\", \\"prompt\\": \\"What is your first name?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"longText\\", \\"placeholder\\": \\"Please enter your first name\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"longText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"MarkdownComponent":{"additionalProperties":false,"description":"The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/help.md\\", \\"response\\": [] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"markdown","type":"string"}},"required":["path","response","type"],"type":"object"},"MatrixResponse":{"additionalProperties":false,"description":"The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, `answerOptions` can be set to one of the following custom strings: \'satisfaction5\',\'satisfaction7\', \'likely5\', \'likely7\'. This will automatically generate the appropriate headers for the matrix.\\n\\nExample for a 5-scale satisfaction matrix with three questions:\\n\\n```js { \\"id\\": \\"multi-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-radio\\", \\"answerOptions\\": \\"satisfaction5\\", \\"questionOptions\\": [  \\"The tool we created\\",  \\"The technique we developed\\",  \\"The authors of the tools\\" ] } ```\\n\\nHere\'s an example using custom columns (answerOptions):\\n\\n```js { \\"id\\": \\"multi-custom\\", \\"prompt\\": \\"Which categories do the following items belong to?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-checkbox\\", \\"answerOptions\\": [  \\"Has Legs\\",  \\"Has Wings\\",  \\"Can Swim\\" ], \\"questionOptions\\": [  \\"Dog\\",  \\"Snake\\",  \\"Eagle\\",  \\"Salmon\\",  \\"Platypus\\" ]\\n\\n} ```","properties":{"answerOptions":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"const":"likely5","type":"string"},{"const":"likely7","type":"string"},{"const":"satisfaction5","type":"string"},{"const":"satisfaction7","type":"string"}],"description":"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"questionOptions":{"description":"The question options (rows) are the prompts for each response you\'d like to record.","items":{"type":"string"},"type":"array"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"enum":["matrix-radio","matrix-checkbox"],"type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["answerOptions","id","prompt","questionOptions","type"],"type":"object"},"NumberOption":{"additionalProperties":false,"description":"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"number"}},"required":["label","value"],"type":"object"},"NumericalResponse":{"additionalProperties":false,"description":"The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\\n\\nExample: ```js { \\"id\\": \\"q-numerical\\", \\"prompt\\": \\"Numerical example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"numerical\\", \\"placeholder\\": \\"Enter your age, range from 0 - 120\\", \\"max\\": 120, \\"min\\": 0 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"max":{"description":"The maximum value that is accepted in the input.","type":"number"},"min":{"description":"The minimum value that is accepted in the input.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"numerical","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"QuestionnaireComponent":{"additionalProperties":false,"description":"A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\\n\\n```js { \\"type\\": \\"questionnaire\\", \\"response\\": [  {    \\"id\\": \\"gender\\",    \\"prompt\\": \\"Gender:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"checkbox\\",    \\"options\\": [\\"Man\\", \\"Woman\\", \\"Genderqueer\\", \\"Third-gender\\", ...]  } ] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"questionnaire","type":"string"}},"required":["response","type"],"type":"object"},"RadioResponse":{"additionalProperties":false,"description":"The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\\n\\nExample: ```js { \\"id\\": \\"q-radio\\", \\"prompt\\": \\"Radio button example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"radio\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the radio buttons horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the radio group. Used in Likert scales for example","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the radio group. Used in Likert scales for example","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"radio","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the radios with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"RandomInterruption":{"additionalProperties":false,"description":"The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\\n\\nFor example, if you want to show a single interruption randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 1. If you want to show 3 interruptions randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 3.\\n\\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the RandomInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"spacing\\": \\"random\\",   \\"numInterruptions\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"interruption1\\", \\"interruption2\\", \\"component5\\", \\"component6], [\\"component1\\", \\"component2\\" \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"interruption1\\", \\"interruption2\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"numInterruptions":{"description":"The number of times the interruption will be randomly added","type":"number"},"spacing":{"const":"random","description":"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.","type":"string"}},"required":["spacing","numInterruptions","components"],"type":"object"},"ReactComponent":{"additionalProperties":false,"description":"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\\n\\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\\n\\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\\n\\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\\n\\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don\'t use the default answer interface, and instead have something more unique.\\n\\nSo, for example, if I had the following ReactComponent in my config ```js { type: \'react-component\'; path: \'my_study/CoolComponent.tsx\'; parameters: {  name: \'Zach\';  age: 26; } } ```\\n\\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\\n\\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\\n\\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/2.0.0-rc7/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/example-brush-interactions (https://github.com/revisit-studies/study/tree/2.0.0-rc7/src/public/example-brush-interactions/assets)","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},"path":{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"react-component","type":"string"}},"required":["path","response","type"],"type":"object"},"ReactiveResponse":{"additionalProperties":false,"description":"The ReactiveResponse interface is used to define the properties of a reactive response. ReactiveResponses render as a list, that is connected to a WebsiteComponent, VegaComponent, or ReactComponent. When data is sent from the components, it is displayed in the list.\\n\\n```js { \\"id\\": \\"reactiveResponse\\", \\"prompt\\": \\"Answer clicked in the stimulus\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"reactive\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"reactive","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"RepeatedComponentBlockCondition":{"additionalProperties":false,"description":"The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.\\n\\nHere\'s an example of how to use the RepeatedComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"repeatedComponent\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of incorrect responses to the repeated component with the name \\"attentionCheck\\" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"repeatedComponent","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"name":{"description":"The name of the repeated component to check (e.g. attentionCheck).","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["name","check","condition","value","to"],"type":"object"},"Response":{"anyOf":[{"$ref":"#/definitions/NumericalResponse"},{"$ref":"#/definitions/ShortTextResponse"},{"$ref":"#/definitions/LongTextResponse"},{"$ref":"#/definitions/LikertResponse"},{"$ref":"#/definitions/DropdownResponse"},{"$ref":"#/definitions/SliderResponse"},{"$ref":"#/definitions/RadioResponse"},{"$ref":"#/definitions/CheckboxResponse"},{"$ref":"#/definitions/ReactiveResponse"},{"$ref":"#/definitions/MatrixResponse"}]},"ResponseBlockLocation":{"enum":["sidebar","aboveStimulus","belowStimulus"],"type":"string"},"ShortTextResponse":{"additionalProperties":false,"description":"The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\\n\\n```js { \\"id\\": \\"q-short-text\\", \\"prompt\\": \\"Short text example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"shortText\\", \\"placeholder\\": \\"Enter your answer here\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"shortText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"SkipConditions":{"description":"The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks\' skip conditions will be considered when computing the skip logic.\\n\\nSkip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.\\n\\nSkip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.\\n\\nPlease see the interface definitions for more specific information on the different types of skip conditions.","items":{"anyOf":[{"$ref":"#/definitions/IndividualComponentSingleResponseCondition"},{"$ref":"#/definitions/IndividualComponentAllResponsesCondition"},{"$ref":"#/definitions/ComponentBlockCondition"},{"$ref":"#/definitions/RepeatedComponentBlockCondition"}]},"type":"array"},"SliderResponse":{"additionalProperties":false,"description":"The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\\n\\nExample: ```js { \\"id\\": \\"q-slider\\", \\"prompt\\": \\"How are you feeling?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"slider\\", \\"options\\": [  {    \\"label\\": \\"Bad\\",    \\"value\\": 0  },  {    \\"label\\": \\"OK\\",    \\"value\\": 50  },  {    \\"label\\": \\"Good\\",    \\"value\\": 100  } ] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.","items":{"$ref":"#/definitions/NumberOption"},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"snap":{"description":"Whether the slider should snap between values. Defaults to false. Slider snapping disables the label above the handle.","type":"boolean"},"startingValue":{"description":"The starting value of the slider. Defaults to the minimum value.","type":"number"},"type":{"const":"slider","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"StringOption":{"additionalProperties":false,"description":"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"string"}},"required":["label","value"],"type":"object"},"VegaComponent":{"anyOf":[{"$ref":"#/definitions/VegaComponentPath"},{"$ref":"#/definitions/VegaComponentConfig"}]},"VegaComponentConfig":{"additionalProperties":false,"description":"The VegaComponentConfig interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component by adding Vega/Vega-Lite specs within the reVISit config itself.\\n\\nTo do this, would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"config\\": { ... vega specs here ...}, }\\n\\nIIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["config","response","type"],"type":"object"},"VegaComponentPath":{"additionalProperties":false,"description":"The VegaComponentPath interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component with path pointing to your Vega/Vega-Lite specs file.\\n\\nFor example, to render a vega based stimuli with a path of `<study-name>/assets/vega.spec.json`, you would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"path\\": \\"<study-name>/assets/vega.spec.json\\", } ```\\n\\nIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec file\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. This signal is then passed to reVISit as the participant\'s response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["path","response","type"],"type":"object"},"WebsiteComponent":{"additionalProperties":false,"description":"The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/assets/website.html\\", } ```\\n\\nTo pass a data from the config to the website, you can use the `parameters` field as below:\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/website.html\\", \\"parameters\\": {  \\"barData\\": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } \\"response\\": [  {    \\"id\\": \\"barChart\\",    \\"prompt\\": \\"Your selected answer:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"reactive\\"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\\n\\n```html <script src=\\"../../revisitUtilities/revisit-communicate.js\\"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\\n\\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\\n\\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\\n\\n```js const trrack = initializeTrrack({ initialState, registry });\\n\\n... Revisit.postProvenance(trrack.graph.backend); ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"},"path":{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"website","type":"string"}},"required":["path","response","type"],"type":"object"}}'),Hon={$ref:Uon,$schema:zon,definitions:Von},l9e=new qae;l9e.addSchema(Hon);const qon=l9e.getSchema("#/definitions/LibraryConfig");function c9e(e,t){return{...e,components:e.components.map(n=>typeof n=="object"?c9e(n,t):`$${t}.components.${n}`)}}function f9e(e,t,n=[]){return{...e,components:e.components.map(r=>{if(typeof r=="object")return f9e(r,t);const i=r.includes(".se.")?".se.":r.includes(".sequences.")?".sequences.":!1;if(typeof r=="string"&&r.startsWith("$")&&i){const[s,o]=r.split(i),a=s.slice(1);if(!t[a]){const c={message:`Library ${a} not found in imported libraries`,instancePath:"",params:{action:"check the library name"}};return n.push(c),r}let l=t[a].sequences[o];if(!l){const c={message:`Sequence ${o} not found in library ${s}`,instancePath:"",params:{action:"check the sequence name"}};return n.push(c),r}return l=c9e(l,a),l}return r})}}function Won(e,t,n){Object.entries(n).forEach(([r,i])=>{Object.entries(i.components).forEach(([s,o])=>{var a;dI(o)&&!((a=i.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object in library \`${r}\``,instancePath:`/importedLibraries/${r}/components/${s}`,params:{action:"add the base component to the baseComponents object"}})})})}function Gon(e,t){let n=!1,r;try{r=JSON.parse(e),n=qon(r)}catch{n=!1}const i=[],s=[];return r?n||i.push({message:"Library config is not valid",instancePath:"",params:{action:"fix the errors in the library config"}}):i.push({message:`Could not find library \`${t}\``,instancePath:"/importedLibraries/",params:{action:"make sure the library is in the correct location"}}),{...r,errors:i,warnings:s}}async function Yon(e){const t=await(await fetch(`${Ua}libraries/${e}/config.json`)).text();return Gon(t,e)}async function Kon(e,t,n){const r=e.map(async s=>{const o=await Yon(s);return o.errors&&t.push(...o.errors),o.warnings&&n.push(...o.warnings),[s,o]}),i=Object.fromEntries(await Promise.all(r));return Object.entries(i).forEach(([s,o])=>{o.components||delete i[s]}),e.forEach(s=>{i[s]&&(i[s].components=Object.fromEntries(Object.entries(i[s].components).map(([o,a])=>{if(dI(a)){const u=jon.merge({},i[s].baseComponents[a.baseComponent],a);return delete u.baseComponent,[[`$${s}.components.${o}`,u],[`$${s}.co.${o}`,u]]}return[[`$${s}.components.${o}`,a],[`$${s}.co.${o}`,a]]}).reduce((o,[a,u])=>(o.push(a,u),o),[])))}),i}const d9e=new qae;d9e.addSchema($on);const Rxe=d9e.getSchema("#/definitions/GlobalConfig"),h9e=new qae;h9e.addSchema(Pon);const Nxe=h9e.getSchema("#/definitions/StudyConfig");function Xon(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function Qon(e){const t=JSON.parse(e),n=Rxe(t),r=Xon(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...Rxe.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function p9e(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):p9e(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function Jon(e,t){const n=[],r=[];Won(e,n,t),Object.entries(e.components).forEach(([o,a])=>{var u;dI(a)&&!((u=e.baseComponents)!=null&&u[a.baseComponent])&&n.push({message:`Base component \`${a.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${o}`,params:{action:"add the base component to the baseComponents object"}})});const i=FAe(e.sequence);i.forEach(o=>{var a;e.components[o]||n.push({message:(a=e.baseComponents)!=null&&a[o]?`Component \`${o}\` is a base component and cannot be used in the sequence`:`Component \`${o}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(o=>!i.includes(o)&&!o.includes(".se.")&&!o.includes(".sequences.")&&!o.includes(".co.")&&!o.includes(".components.")).forEach(o=>{r.push({message:`Component \`${o}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const s=[];return p9e(e.sequence,s),s.forEach(o=>{n.push({message:`Skip target \`${o}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:n,warnings:r}}async function Wae(e){let t=!1,n;try{n=JSON.parse(e),t=Nxe(n)}catch{t=!1}let r=Nxe.errors||[],i=[];if(t&&n){const s=n.importedLibraries||[],o=await Kon(s,r,i);Object.values(o).forEach(l=>{n.components={...n.components,...l.components},n.baseComponents={...n.baseComponents,...l.components}}),n.sequence=f9e(n.sequence,o,r);const{errors:a,warnings:u}=Jon(n,o);r=[...r,...a],i=[...i,...u]}else r=[...r,{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}async function Zon(e){const t=await(await fetch(`${Ua}${e}`)).text();return await Wae(t)}async function Gae(e,t){const n=t.configsList.find(r=>aTe(r)===e);if(n){const r=t.configs[n];return await Zon(`${r.path}`)}return null}async function ean(e){const t={},n=e.configsList.map(async i=>Gae(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function tan({globalConfig:e}){const t=jE(),[n,r]=O.useState(null),i=e.configsList.includes(t)||t==="__revisit-widget";O.useEffect(()=>{if(t!=="__revisit-widget")return Gae(t,e).then(p=>{r(p)}),()=>{};if(e&&t){const p=m=>{m.data.type==="revisitWidget/CONFIG"&&Wae(m.data.payload).then(async y=>{r(y);const v=await mbe(y);window.parent.postMessage({type:"revisitWidget/SEQUENCE_ARRAY",payload:v},"*")})};return window.addEventListener("message",p),window.parent.postMessage({type:"revisitWidget/READY"},"*"),()=>{window.removeEventListener("message",p)}}return()=>{}},[e,t]);const[s,o]=O.useState([]),[a,u]=O.useState(null),{storageEngine:l}=uo(),[c]=E1(),f=O.useMemo(()=>c.get("participantId"),[c]);O.useEffect(()=>{async function p(){if(!l||!n||!t)return;await l.initializeStudyDb(t,n),await l.getSequenceArray()||await l.setSequenceArray(await mbe(n));const y=n.uiConfig.urlParticipantIdParam&&c.get(n.uiConfig.urlParticipantIdParam)||void 0,v=Object.fromEntries(c.entries()),b=await fetch("https://api.ipify.org?format=json").catch(R=>""),w=b instanceof Response?await b.json():{ip:""},E={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:w.ip},T=await l.initializeParticipantSession(t,v,n,E,f||y),A=await l.getModes(t),I=await Hgt(t,n,T.sequence,E,T.answers,A,T.participantId);u(I),o([{element:S.jsx(vsn,{}),children:[{path:"/",element:S.jsx(QBe,{to:pp(0),replace:!0})},{path:"/:index",element:n.errors.length>0?S.jsxs(S.Fragment,{children:[S.jsx(io,{order:2,mb:8,children:"Error loading config"}),S.jsx(KM,{issues:n.errors,type:"error"})]}):S.jsx(tsn,{})}]}])}p()},[l,n,t,c,f]);const d=WEe(s);let h=null;return i?s.length===0?h=S.jsx(sd,{visible:!0}):h=d&&a?S.jsx(zAe.Provider,{value:a,children:S.jsx(H0t,{store:a.store,children:d})}):S.jsx(Nb,{}):h=S.jsx(Nb,{}),h}function I$({studyIds:e}){const t=Xp(),{studyId:n}=M0(),r=xh(),i=e.map(o=>({value:o,label:o})).sort((o,a)=>o.label.localeCompare(a.label)),s=r.pathname.includes("analysis");return S.jsx(zi.Header,{p:"md",children:S.jsxs(Gf,{mt:-7,align:"center",children:[S.jsx(Gf.Col,{span:6,children:S.jsxs(an,{align:"center",onClick:()=>t("/"),style:{cursor:"pointer"},children:[S.jsx(mx,{w:40,src:`${Ua}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),S.jsx(Zf,{w:"md"}),S.jsx(io,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:s?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),S.jsx(Gf.Col,{span:6,children:S.jsxs(an,{justify:"flex-end",direction:"row",children:[s&&S.jsxs(S.Fragment,{children:[S.jsx(CA,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:o=>t(`/analysis/stats/${o}`),mr:16}),S.jsx(yn,{component:"a",href:`${Ua}${n}`,target:"_blank",leftSection:S.jsx(nTe,{}),mr:"sm",children:"Go to Study"})]}),S.jsx(iTe,{onClick:()=>t("/settings"),style:{cursor:"pointer",marginTop:s?6:void 0}})]})})]})})}function m9e({visibleParticipants:e,studyId:t,gap:n,fileName:r}){const[i,{open:s,close:o}]=OX(!1),[a,u]=O.useState([]),l=async()=>typeof e=="function"?await e():e,c=async()=>{const d=await l(),h=r?`${r}.json`:`${t}_all.json`;Zne(JSON.stringify(d,null,2),h)},f=async()=>{const d=await l();u(d),s()};return S.jsxs(S.Fragment,{children:[S.jsxs($i,{style:{gap:n},children:[S.jsx(cs,{label:"Download all participants data as JSON",children:S.jsx(yn,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:c,px:4,children:S.jsx(TZe,{})})}),S.jsx(cs,{label:"Download all participants data as a tidy CSV",children:S.jsx(yn,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:f,px:4,children:S.jsx(sTe,{})})})]}),i&&a.length>0&&S.jsx(eMt,{opened:i,close:o,filename:r?`${r}_tidy.csv`:`${t}_all_tidy.csv`,data:a,studyId:t})]})}function nan({cellData:e}){return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?S.jsx(En.Td,{children:S.jsx(mu,{miw:100,children:e.timedOut?S.jsx(gt,{children:"Timed out"}):Object.entries(e.answer).map(([t,n])=>S.jsxs(je,{children:[S.jsxs(gt,{fw:700,span:!0,children:[" ",`${t}: `]}),typeof n=="object"?S.jsx(gt,{size:"xs",component:"pre",span:!0,children:`${JSON.stringify(n,null,2)}`}):S.jsx(gt,{span:!0,children:n})]},`cell-${t}`))})}):S.jsx(En.Td,{children:"N/A"})}function Dxe({cellData:e}){const t=(e.endTime-e.startTime)/1e3,n=kOe(e);return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?S.jsxs(En.Td,{children:[t.toFixed(1)," ","s",n&&S.jsxs(S.Fragment,{children:[S.jsx("br",{})," ","(",(n/1e3).toFixed(1)," ","s)"]})]}):S.jsx(En.Td,{children:"N/A"})}function ran(e){const{metaData:t}=e;return S.jsx(En.Td,{children:S.jsx(gJ,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:S.jsxs(mu,{gap:"xs",children:[S.jsxs(je,{children:["IP:"," ",t.ip]}),S.jsxs(je,{children:["Language:"," ",t.language]}),S.jsxs(je,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),S.jsxs(je,{children:["User Agent:"," ",t.userAgent]})]})})})}function ian({visibleParticipants:e,studyConfig:t,refresh:n}){const{storageEngine:r}=uo(),{studyId:i}=M0(),{user:s}=HA(),o=async(E,T)=>{if(r&&i)if(s.isAdmin){const A=T===""?"Rejected by admin":T;await r.rejectParticipant(i,E,A),await n()}else console.warn("You are not authorized to perform this action.")},[a,u]=O.useState([]),[l,c]=O.useState(!1),[f,d]=O.useState(!1),[h,p]=O.useState(""),m=async()=>{c(!0),d(!1);const E=a.map(async T=>await o(T,h));await Promise.all(E),u([]),await n(),c(!1)};function y(E){E==="all"?a.length===e.length?u([]):u(e.map(T=>T.participantId)):a.includes(E)?u(a.filter(T=>T!==E)):u([...a,E])}const v=UAe(t.sequence),b=[S.jsx(En.Th,{children:S.jsx(an,{justify:"center",children:S.jsx(nl,{mb:-4,checked:a.length===e.length,onChange:()=>y("all")})})},"action"),S.jsx(En.Th,{children:"ID"},"ID"),S.jsx(En.Th,{children:"Status"},"status"),S.jsx(En.Th,{children:"Tags"},"tags"),S.jsx(En.Th,{children:"Meta"},"meta"),...v.flatMap(E=>[S.jsx(En.Th,{children:E.componentName},`header-${E.componentName}-${E.timesSeenInBlock}`),S.jsxs(En.Th,{children:[S.jsx("span",{style:{whiteSpace:"nowrap"},children:E.componentName})," ","Duration (clean)"]},`header-${E.componentName}-${E.timesSeenInBlock}-duration`)]),S.jsx(En.Th,{children:"Total Duration (clean)"},"total-duration")],w=e.map(E=>S.jsxs(En.Tr,{children:[S.jsx(En.Td,{children:S.jsx(an,{justify:"center",children:S.jsx(nl,{mb:-4,checked:a.includes(E.participantId),onChange:()=>y(E.participantId)})})}),S.jsx(En.Td,{style:{whiteSpace:"nowrap"},children:E.participantId}),S.jsx(En.Td,{children:S.jsxs(an,{direction:"column",miw:100,children:[S.jsxs(an,{direction:"row",align:"center",children:[E.rejected?S.jsx(cs,{label:"Rejected",children:S.jsx(VP,{size:16,color:"red",style:{marginBottom:-3}})}):E.completed?S.jsx(cs,{label:"Completed",children:S.jsx(xB,{size:16,color:"teal",style:{marginBottom:-3}})}):S.jsx(cs,{label:"In Progress",children:S.jsx(rTe,{size:16,color:"orange",style:{marginBottom:-3}})}),!E.completed&&S.jsxs(gt,{size:"sm",mb:-1,ml:4,children:[(Object.entries(E.answers).filter(([T,A])=>A.endTime!==-1&&A.endTime!==void 0).length/($p(E.sequence).length-1)*100).toFixed(2),"%"]})]}),E.rejected&&S.jsx(gt,{mt:5,fz:10,children:E.rejected.reason})]})}),S.jsx(En.Td,{children:S.jsx(an,{direction:"column",miw:100,children:(E.participantTags||[]).map(T=>S.jsxs(gt,{fz:10,children:["-"," ",T]},`tag-${T}`))})}),E.metadata?S.jsx(ran,{metaData:E.metadata}):S.jsx(En.Td,{children:"N/A"}),v.map(T=>{const A=hee(E.sequence,T.orderPath),I=A&&Object.entries(E.answers).sort((R,D)=>{const M=parseInt(R[0].slice(R[0].lastIndexOf("_")+1),10),$=parseInt(D[0].slice(D[0].lastIndexOf("_")+1),10);return M-$}).filter(([R])=>{const D=R.slice(0,R.lastIndexOf("_")),M=parseInt(R.slice(R.lastIndexOf("_")+1),10);return D===T.componentName&&M<=A[0].lastIndex&&M>=A[0].firstIndex});return I!==null&&I.length>=T.timesSeenInBlock+1&&I[T.timesSeenInBlock][1].endTime!==-1?S.jsxs(li.Fragment,{children:[S.jsx(nan,{cellData:I[T.timesSeenInBlock][1]}),S.jsx(Dxe,{cellData:I[T.timesSeenInBlock][1]})]},`cellgroup-${E.participantId}-${T.componentName}-${T.timesSeenInBlock}`):S.jsxs(li.Fragment,{children:[S.jsx(En.Td,{children:"N/A"}),S.jsx(En.Td,{children:"N/A"})]},`cellgroup-${E.participantId}-${T.componentName}-${T.timesSeenInBlock}`)}),S.jsx(Dxe,{cellData:{startTime:Math.min(...Object.values(E.answers).filter(T=>T.endTime!==-1&&T.endTime!==void 0).map(T=>T.startTime)),endTime:Math.max(...Object.values(E.answers).filter(T=>T.endTime!==-1&&T.endTime!==void 0).map(T=>T.endTime)),answer:{},helpButtonClickedCount:0,incorrectAnswers:{},windowEvents:Object.values(E.answers).flatMap(T=>T.windowEvents),timedOut:!1}},`cell-${E.participantId}-total-duration`)]},E.participantId));return e.length>0?S.jsxs(S.Fragment,{children:[S.jsx(sd,{visible:l,overlayProps:{blur:2}}),S.jsxs(an,{justify:"space-between",mb:8,p:8,children:[S.jsx($i,{children:S.jsx(CA,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:[...new Set(e.map(E=>E.participantId))],searchable:!0,value:null,leftSection:S.jsx(FZe,{size:14}),onChange:E=>E&&y(E)})}),S.jsxs($i,{children:[S.jsx(m9e,{visibleParticipants:e,studyId:i||""}),S.jsxs(yn,{disabled:a.length===0||!s.isAdmin,onClick:()=>d(!0),color:"red",children:["Reject Participants (",a.length,")"]})]})]}),S.jsx(an,{direction:"column",style:{width:"100%",overflow:"auto"},children:S.jsxs(En,{striped:!0,withTableBorder:!0,children:[S.jsx(En.Thead,{children:S.jsx(En.Tr,{children:b})}),S.jsx(En.Tbody,{children:w})]})}),S.jsxs(Us,{opened:f,onClose:()=>d(!1),title:S.jsxs(gt,{children:["Reject Participants (",a.length,")"]}),children:[S.jsx(_y,{label:"Please enter the reason for rejection.",onChange:E=>p(E.target.value)}),S.jsxs(an,{mt:"sm",justify:"right",children:[S.jsx(yn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{d(!1),p("")},children:"Cancel"}),S.jsx(yn,{color:"red",onClick:()=>m(),children:"Reject Participants"})]})]})]}):S.jsxs(S.Fragment,{children:[S.jsx(Zf,{h:"xl"}),S.jsx(an,{justify:"center",align:"center",children:S.jsx(gt,{children:"No data available"})})]})}function san({studyId:e,refresh:t}){const[n,r]=O.useState(!1),[i,s]=O.useState(!1),[o,a]=O.useState(!1),[u,l]=O.useState(!1),[c,f]=O.useState(""),[d,h]=O.useState([]),[p,m]=O.useState(""),[y,v]=O.useState(""),[b,w]=O.useState(!1),[E,T]=O.useState(!1),{storageEngine:A}=uo(),I=A,R=O.useCallback(async()=>{T(!0);const q=await I.getSnapshots(e);h(q),T(!1)},[I,e]);O.useEffect(()=>{R()},[R]);const D=async(q,...j)=>{w(!0);const G=await q(...j);G.status==="SUCCESS"?(R(),w(!1),await t(),G.notifications&&G.notifications.forEach(V=>{aP(V)})):(w(!1),aP({title:G.error.title,message:G.error.message,color:"red"}))},M=async()=>{await D(I.createSnapshot.bind(I),e,!1)},$=async()=>{m(""),r(!1),await D(I.createSnapshot.bind(I),e,!0)},U=async()=>{a(!1),await D(I.renameSnapshot.bind(I),c,y)},F=async q=>{await D(I.restoreSnapshot.bind(I),e,q)},H=async()=>{m(""),s(!1),await D(I.removeSnapshotOrLive.bind(I),c,!0)},Q=async()=>{m(""),l(!1),await D(I.removeSnapshotOrLive.bind(I),e,!0)},J=()=>Ule({title:"Create a Snapshot",children:S.jsx(gt,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>M()}),ne=q=>Ule({title:"Restore Snapshot",children:S.jsx(gt,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>F(q)}),Z=q=>{const j=/-snapshot-(.+)$/,G=q.match(j);return G&&G[1]?G[1].replace("T"," "):null},ie=async q=>{const j=q.slice(q.indexOf("-")+1);return await I.getAllParticipantsDataByStudy(j)};return S.jsxs(S.Fragment,{children:[S.jsx(sd,{visible:b}),S.jsxs(an,{justify:"space-between",align:"center",children:[S.jsxs(je,{style:{width:"70%"},children:[S.jsx(io,{order:5,children:"Create a Snapshot"}),S.jsxs(gt,{children:["This will create a snapshot of the live"," ",S.jsx(gt,{span:!0,fw:700,children:e})," ","database. It will"," ",S.jsx(gt,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),S.jsx(cs,{label:"Create a snapshot",children:S.jsx(yn,{onClick:J,children:"Snapshot"})})]}),S.jsx(Zf,{h:"lg"}),S.jsxs(an,{justify:"space-between",align:"center",children:[S.jsxs(je,{style:{width:"70%"},children:[S.jsx(io,{order:5,children:"Archive Data"}),S.jsxs(gt,{children:["This will create a snapshot of the live"," ",S.jsx(gt,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),S.jsx(cs,{label:"Snapshot and Delete Data",children:S.jsx(yn,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),S.jsx(Zf,{h:"lg"}),S.jsxs(an,{justify:"space-between",align:"center",children:[S.jsxs(je,{style:{width:"70%"},children:[S.jsx(io,{order:5,children:"Delete Data"}),S.jsxs(gt,{children:["This will delete the live"," ",S.jsx(gt,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),S.jsx(cs,{label:"Delete Data",children:S.jsx(yn,{color:"red",onClick:()=>l(!0),children:"Delete"})})]}),S.jsx(Zf,{h:"xl"}),S.jsxs(an,{direction:"column",children:[S.jsx(an,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:S.jsx(io,{order:5,children:"Snapshots"})}),S.jsxs(je,{style:{position:"relative"},children:[S.jsx(sd,{visible:E}),d.length>0?S.jsxs(En,{children:[S.jsx(En.Thead,{children:S.jsxs(En.Tr,{children:[S.jsx(En.Th,{children:"Snapshot Name"}),S.jsx(En.Th,{children:"Date Created"}),S.jsx(En.Th,{children:"Actions"})]})}),S.jsx(En.Tbody,{children:d.map(q=>S.jsxs(En.Tr,{children:[S.jsx(En.Td,{children:q.alternateName}),S.jsx(En.Td,{children:Z(q.originalName)}),S.jsx(En.Td,{children:S.jsxs(an,{children:[S.jsx(cs,{label:"Rename",children:S.jsx(yn,{color:"green",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{a(!0),f(q.originalName)},children:S.jsx(PZe,{})})}),S.jsx(cs,{label:"Restore Snapshot",children:S.jsx(yn,{color:"blue",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{ne(q.originalName)},children:S.jsx(LZe,{})})}),S.jsx(cs,{label:"Delete Snapshot",children:S.jsx(yn,{color:"red",px:4,variant:"light",style:{margin:"0px 10px 0px 5px"},onClick:()=>{s(!0),f(q.originalName)},children:S.jsx(oTe,{})})}),S.jsx(m9e,{visibleParticipants:()=>ie(q.originalName),studyId:e,gap:"10px",fileName:q.alternateName})]})})]},q.originalName))})]}):S.jsx(gt,{children:"No snapshots."})]})]}),S.jsxs(Us,{opened:n,onClose:()=>{r(!1),m("")},title:S.jsx(gt,{children:"Archive Data"}),children:[S.jsx(gt,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),S.jsx(_y,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:q=>m(q.target.value)}),S.jsxs(an,{mt:"sm",justify:"right",children:[S.jsx(yn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),m("")},children:"Cancel"}),S.jsx(yn,{color:"red",onClick:$,disabled:p!==e,children:"Archive"})]})]}),S.jsxs(Us,{opened:i,onClose:()=>{s(!1),m("")},title:S.jsx(gt,{children:"Delete Snapshot"}),children:[S.jsxs(gt,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",S.jsx(gt,{span:!0,fw:700,children:"irreversible"}),"."]}),S.jsx(_y,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:q=>m(q.target.value)}),S.jsxs(an,{mt:"sm",justify:"right",children:[S.jsx(yn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),m("")},children:"Cancel"}),S.jsx(yn,{color:"red",onClick:H,disabled:p!==e,children:"Delete"})]})]}),S.jsxs(Us,{opened:o,onClose:()=>{a(!1),v("")},title:S.jsx(gt,{children:"Rename Snapshot"}),children:[S.jsx(_y,{label:"Enter the new name of the snapshot.",placeholder:c,onChange:q=>v(q.target.value)}),S.jsxs(an,{mt:"sm",justify:"right",children:[S.jsx(yn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),v("")},children:"Cancel"}),S.jsx(yn,{color:"green",onClick:U,disabled:!y||y.length===0,children:"Rename"})]})]}),S.jsxs(Us,{opened:u,onClose:()=>{l(!1),m("")},title:S.jsx(gt,{children:"Delete Live Data"}),children:[S.jsxs(gt,{mb:"sm",children:["This will permanently delete the live"," ",S.jsx(gt,{span:!0,fw:700,children:e})," ","data. This action is"," ",S.jsx(gt,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),S.jsx(_y,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:q=>m(q.target.value)}),S.jsxs(an,{mt:"sm",justify:"right",children:[S.jsx(yn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{l(!1),m("")},children:"Cancel"}),S.jsx(yn,{color:"red",onClick:Q,disabled:p!==e,children:"Delete"})]})]})]})}function oan({studyId:e}){const{storageEngine:t}=uo(),[n,r]=O.useState(!1),[i,s]=O.useState(!1),[o,a]=O.useState(!1),[u,l]=O.useState(!1);O.useEffect(()=>{(async()=>{if(t){const d=await t.getModes(e);s(d.dataCollectionEnabled),a(d.studyNavigatorEnabled),l(d.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(f,d)=>{t&&(await t.setMode(e,f,d),f==="dataCollectionEnabled"?s(d):f==="studyNavigatorEnabled"?a(d):f==="analyticsInterfacePubliclyAccessible"&&l(d))};return n&&S.jsxs(mu,{children:[S.jsx(Rw,{label:"Data Collection Enabled",checked:i,onChange:f=>c("dataCollectionEnabled",f.currentTarget.checked)}),S.jsx(Rw,{label:"Study Navigator Enabled",checked:o,onChange:f=>c("studyNavigatorEnabled",f.currentTarget.checked)}),S.jsx(Rw,{label:"Analytics Interface Publicly Accessible",checked:u,onChange:f=>c("analyticsInterfacePubliclyAccessible",f.currentTarget.checked)})]})}function aan({studyId:e,refresh:t}){const{storageEngine:n}=uo();return S.jsx(Yy,{children:S.jsxs(Ku,{multiple:!0,variant:"contained",children:[S.jsxs(Ku.Item,{value:"ReVISit Modes",children:[S.jsx(Ku.Control,{children:S.jsx(io,{order:5,children:"ReVISit Modes"})}),S.jsx(Ku.Panel,{children:S.jsx(oan,{studyId:e})})]},"modes"),S.jsxs(Ku.Item,{value:"Data Management",children:[S.jsx(Ku.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:S.jsx(io,{order:5,children:"Data Management"})}),S.jsx(Ku.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&S.jsx(san,{studyId:e,refresh:t})})]},"dataManagement")]})})}function uan({response:e,participantData:t,trialId:n,trialConfig:r}){const[i,{toggle:s}]=OX(!0),[o,a]=Ny(),u=O.useMemo(()=>e.type==="metadata"?[]:t.map(d=>Object.entries(d.answers).filter(([h])=>h.slice(0,h.lastIndexOf("_"))===n)).map(d=>d.map(([,h])=>h.answer)).flat(),[t,e.type,n]),l=O.useMemo(()=>{var d;return e.type==="metadata"||(d=r.correctAnswer)==null?void 0:d.find(h=>h.id===e.id)},[e.id,e.type,r.correctAnswer]),c=O.useMemo(()=>{const f={height:"container",width:"container"};if(e.type==="shortText"||e.type==="longText")return{};if(e.type==="metadata"){const h=t.map(m=>Object.entries(m.answers).filter(([y])=>y.slice(0,y.lastIndexOf("_"))===n)).map(m=>m.filter(([y,v])=>v.endTime!==-1).map(([y,v])=>(v.endTime-v.startTime)/1e3)).flat();return{...f,data:{values:h},mark:"bar",encoding:{x:{field:"data",bin:!0,type:"quantitative",title:"Time (s)"},y:{aggregate:"count",type:"quantitative",title:"Count"}}}}const d={params:[{name:"correctAnswer",value:l==null?void 0:l.answer},{name:"variable",value:e.id}],transform:[{calculate:"datum[variable] === correctAnswer ? 'correct' : 'incorrect'",as:"result"},{calculate:"if(datum.result === 'correct', 0, if(datum.result === 'incorrect', 1, 2))",as:"order"}],color:{field:"result",type:"nominal",scale:{domain:["correct","incorrect"],range:["#69DB7C","#ADB5BD"]}},order:{field:"order"}};if(e.type==="numerical"||e.type==="slider"||e.type==="likert"){let h,p;return e.type==="numerical"&&(h=e.min,p=e.max),e.type==="slider"&&(h=Math.min(...e.options.map(y=>y.value)),p=Math.max(...e.options.map(y=>y.value))),e.type==="likert"&&(h=1,p=e.numItems),{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:[{bin:e.type==="likert"?{step:1}:{maxbins:10},field:e.id,as:"bins"},...l!==void 0?d.transform:[]],encoding:{x:{field:"bins",scale:h!==void 0&&p!==void 0?{domain:[h,p]}:void 0,type:"quantitative",title:"Answer"},x2:{field:"bins_end"},y:{aggregate:"count",type:"quantitative",title:"Count",stack:!0},color:l!==void 0?d.color:void 0,order:l!==void 0?d.order:void 0}}}if(e.type==="radio"||e.type==="dropdown"||e.type==="checkbox")return{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:l!==void 0?d.transform:void 0,encoding:{x:{field:e.id,type:"ordinal",title:"Answer"},y:{aggregate:"count",type:"quantitative",title:"Count"},color:l!==void 0?d.color:void 0}}},[t,u,e.id,e.max,e.min,e.numItems,e.options,e.type,n,l]);return S.jsxs(pA,{p:"lg",withBorder:!0,ref:o,children:[S.jsxs(an,{direction:"row",justify:"space-between",onClick:s,children:[S.jsxs(an,{align:"center",children:[e.type==="metadata"&&S.jsx(EZe,{size:20}),e.type==="numerical"&&S.jsx(NZe,{size:20}),(e.type==="shortText"||e.type==="longText")&&S.jsx(xZe,{size:20}),e.type==="likert"&&S.jsx(CZe,{size:20}),e.type==="dropdown"&&S.jsx(BZe,{size:20}),e.type==="slider"&&S.jsx(pZe,{size:20}),e.type==="radio"&&S.jsx(MZe,{size:20}),e.type==="checkbox"&&S.jsx(jZe,{size:20}),e.type==="reactive"&&S.jsx(IZe,{size:20}),S.jsx(io,{order:5,ml:4,children:e.id})]}),S.jsx(wZe,{style:{rotate:i?"180deg":"none",transition:"rotate 200ms"}})]}),S.jsxs(H8,{in:i,mah:400,children:[S.jsx(je,{style:{top:0,position:"sticky",backgroundColor:"white",zIndex:2},py:"md",children:S.jsx(IE,{})}),S.jsxs(hJ,{cols:2,h:360,children:[S.jsx(Wy,{mih:200,children:e.type!=="metadata"&&e.type!=="shortText"&&e.type!=="longText"&&e.type!=="reactive"?S.jsx(ube,{spec:c,actions:!1,height:270,width:a.width/2-60-(l===void 0?0:60),padding:0,style:{justifySelf:"center"},renderer:"svg"}):S.jsxs(an,{direction:"column",gap:"xs",style:{overflowX:"clip"},children:[e.type==="metadata"&&S.jsx(TN,{block:!0,children:`${JSON.stringify(r,null,2)}`}),e.type!=="metadata"&&S.jsxs(S.Fragment,{children:[S.jsx(gt,{fw:700,children:"Response Values: "}),u.map((f,d)=>S.jsx(an,{align:"center",gap:"xs",children:S.jsx(gt,{children:f[e.id]})},d))]})]})}),S.jsx(Wy,{mih:200,children:e.type==="metadata"?S.jsx(ube,{spec:c,actions:!1,width:a.width/2-60,height:270,padding:0,style:{justifySelf:"center"}}):S.jsxs(S.Fragment,{children:[S.jsx(gt,{fw:700,children:"Response Specification: "}),S.jsx(TN,{block:!0,children:JSON.stringify(e,null,2)}),S.jsx("br",{}),l&&S.jsxs(S.Fragment,{children:[S.jsx(gt,{fw:700,children:"Correct Answer: "}),S.jsx(TN,{block:!0,children:JSON.stringify(l,null,2)})]})]})})]})]})]})}function lan({participantData:e,studyConfig:t,trialId:n}){const r=n&&n!=="end"&&t9e(t.components[n],t),i=O.useMemo(()=>[{id:"Config and Timing",type:"metadata"},...r?r.response:[]],[r]);return r?S.jsx(an,{w:"100%",direction:"column",gap:"xs",children:i.map(s=>S.jsx(uan,{response:s,participantData:e,trialId:n,trialConfig:r},s.id))}):S.jsx(an,{justify:"center",align:"center",pt:"lg",pb:"md",w:"100%",children:S.jsx(gt,{children:n!=="end"?"No trial selected":"The end component has no data."})})}function can({studyConfig:e,visibleParticipants:t}){const n=O.useMemo(()=>{let i=$y(e.sequence);return i=pee(i,"root"),i.components.push("end"),i},[e.sequence]),{trialId:r}=M0();return S.jsx(pA,{shadow:"sm",p:"md",withBorder:!0,children:t.length===0?S.jsx(an,{justify:"center",align:"center",pt:"lg",pb:"md",children:S.jsx(gt,{children:"No data available."})}):S.jsxs(an,{direction:"row",children:[S.jsx(je,{w:340,children:S.jsx(O8,{configSequence:n,participantSequence:n,fullSequence:n,participantView:!1,studyConfig:e,analysisNavigation:!0})}),S.jsx(IE,{orientation:"vertical",mx:"md"}),S.jsx(lan,{participantData:t,studyConfig:e,trialId:r})]})})}function fan({xScale:e,answer:t,height:n,labelHeight:r=0}){return S.jsx("g",{children:S.jsx("line",{stroke:"gray",strokeWidth:1,x1:e(t.startTime)+2,x2:e(t.startTime)+2,y1:n-45-r,y2:n-25})})}const LM=3,XS=25,$M=25,FM=20,Pxe=1,Oq=15;function dan({xScale:e,answer:t,name:n,height:r,setSelectedTask:i,isSelected:s,labelHeight:o=0,isCorrect:a,hasCorrect:u}){const[l,c]=O.useState(!1),[f,{width:d}]=Ny();return S.jsxs("g",{onClick:()=>i(n),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),style:{cursor:"pointer"},children:[S.jsx("rect",{opacity:1,fill:l||s?"cornflowerblue":"lightgray",x:e(t.startTime)+Pxe,width:e(t.endTime)-e(t.startTime)-Pxe*2,y:r-XS,height:XS}),S.jsx("rect",{rx:3,opacity:1,x:e(t.startTime)-LM,width:d+LM*2+(u?Oq:0),y:r-XS-$M-o,height:FM,fill:"whitesmoke"}),S.jsx("line",{stroke:"black",strokeWidth:1,x1:e(t.startTime)-LM,x2:d+e(t.startTime)+LM+(u?Oq:0),y1:r-XS-$M+FM-o,y2:r-XS-$M+FM-o}),S.jsx("foreignObject",{x:e(t.startTime),width:d+(u?Oq:0),y:r-XS-$M-o,height:FM,children:S.jsx(Gl,{style:{width:"fit-content"},children:S.jsxs($i,{wrap:"nowrap",gap:2,children:[S.jsx(gt,{lineClamp:1,ref:f,mx:0,style:{width:"fit-content",fontWeight:600},size:"12px",children:n}),u?a?S.jsx(xB,{color:"var(--mantine-color-green-6)",style:{marginTop:2,strokeWidth:4},size:"14"}):S.jsx(VP,{color:"var(--mantine-color-red-6)",style:{marginTop:2,strokeWidth:4},size:14}):""]})})})]})}const Oxe=25,han=8,Mq={left:20,top:0,right:20,bottom:0};function pan({participantData:e,width:t,height:n,selectedTask:r,studyId:i,studyConfig:s,maxLength:o}){const a=O.useCallback(y=>{const v=y.split("_"),b=+v[v.length-1];window.open(`${Ua}${i}/${pp(b)}?participantId=${e.participantId}`,"_blank")},[e.participantId,i]),u=O.useMemo(()=>{const y=Object.values(e.answers||{}).filter(w=>w.startTime).map(w=>[w.startTime,w.endTime]).flat(),v=lG(y);return Fp([Mq.left,t-Mq.left-Mq.right]).domain([v[0],o?v[0]+o:v[1]]).clamp(!0)},[o,e.answers,t]),[l,c,f]=O.useMemo(()=>{let y=0;const v=Object.entries(e.answers||{}).filter(T=>!!T[1].startTime).sort((T,A)=>T[1].startTime-A[1].startTime);let b=0,w=0;const E=v.map((T,A)=>{const[I,R]=T,D=A>0?v[A-y-1]:null;D&&D[0].length*(han+1)+u(D[1].startTime)>u(R.startTime)?y+=1:y=0;const M=I.split("_"),$=M.slice(0,M.length-1).join("_"),U=s==null?void 0:s.components[$];let F=!0,H=!1;return U&&U.correctAnswer?(U.correctAnswer.forEach(Q=>{const{id:J,answer:ne}=Q;(!U||!U.correctAnswer||R.answer[J]!==ne)&&(F=!1)}),H=!0):H=!1,H&&(w+=1,F&&(b+=1)),{line:S.jsx(fan,{labelHeight:y*Oxe,answer:R,height:n,xScale:u},I),label:S.jsx(cs,{withinPortal:!0,position:"bottom-start",px:4,py:0,withArrow:!0,label:S.jsx(mu,{gap:0,children:Object.entries(R.answer).map(Q=>{var ie,q;const[J,ne]=Q,Z=(q=(ie=U==null?void 0:U.correctAnswer)==null?void 0:ie.find(j=>j.id===J))==null?void 0:q.answer;return S.jsx(gt,{children:`${J}: ${ne} ${Z?`[${Z}]`:""}`},J)})}),children:S.jsx("g",{children:S.jsx(dan,{isCorrect:F,hasCorrect:H,labelHeight:y*Oxe,isSelected:r===I,setSelectedTask:a,answer:R,height:n,name:I,xScale:u},I)})})}});return[b,w,E]},[e.answers,u,s==null?void 0:s.components,n,r,a]),d=O.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return 0;const y=Object.values(e.answers).filter(v=>v.startTime).sort((v,b)=>v.startTime-b.startTime);return new Date(y[y.length-1].endTime-(y[0]?y[0].startTime:0)).getTime()},[e]),h=O.useMemo(()=>Object.entries(e.answers||{}).sort((v,b)=>v[1].startTime-b[1].startTime).map(v=>{const[b,w]=v,E=[];let T=[-1,-1],A="visible";if(w.windowEvents)for(let I=0;I<w.windowEvents.length;I+=1)w.windowEvents[I][1]==="visibility"&&(w.windowEvents[I][2]==="hidden"&&A==="visible"?(T=[w.windowEvents[I][0],-1],A="hidden"):w.windowEvents[I][2]==="visible"&&A==="hidden"&&(T[1]=w.windowEvents[I][0],E.push(T),T=[-1,-1],A="visible"));return E.map((I,R)=>S.jsx(cs,{withinPortal:!0,label:"Browsed away",children:S.jsx("rect",{x:u(I[0]),width:u(I[1])-u(I[0]),y:n-5,height:10})},R))}),[u,n,e.answers]),p=O.useMemo(()=>{if(s!=null&&s.uiConfig&&s.uiConfig.participantNameField){const[y,v]=s.uiConfig.participantNameField.split("."),b=Object.keys(e.answers).find(w=>w.startsWith(y));if(b)return`${e.answers[b].answer[v]}`}return null},[e.answers,s]),m=O.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return"";const y=Object.values(e.answers).filter(b=>b.startTime).sort((b,w)=>b.startTime-w.startTime),v=new Date(y[y.length-1].endTime);return e.completed?`${v.toLocaleDateString()} ${v.toLocaleTimeString()}`:""},[e]);return S.jsx(Gl,{children:S.jsxs(mu,{gap:15,style:{width:"100%"},children:[S.jsx(IE,{size:"md"}),S.jsxs($i,{justify:"space-between",children:[S.jsxs($i,{justify:"center",children:[e.participantIndex?S.jsx(gt,{children:`P-${e.participantIndex<10?"0":"none"}${e.participantIndex}`}):null,S.jsx(gt,{size:"md",fw:700,children:p||e.participantId}),S.jsx(gt,{size:"md",children:m}),e.completed?null:S.jsx(gt,{size:"xl",c:"red",children:"Not completed"}),S.jsxs($i,{gap:10,children:[S.jsx(Cp,{variant:"light",size:"lg",color:"green",leftSection:S.jsx(xB,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:l}),S.jsx(Cp,{variant:"light",size:"lg",color:"red",leftSection:S.jsx(VP,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:c-l}),S.jsx(Cp,{variant:"light",size:"lg",color:"gray",leftSection:S.jsx(AZe,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:kX(d)})]})]}),S.jsx(yn,{rightSection:S.jsx(tTe,{size:14}),component:"a",href:`${Ua}${i}/${pp(0)}?participantId=${e.participantId}`,target:"_blank",children:"Go to replay"})]}),e.completed?S.jsxs("svg",{style:{width:t,height:n,overflow:"visible"},children:[f.map(y=>y.line),f.map(y=>y.label),h]}):null]})})}function man({visibleParticipants:e,studyConfig:t}){const{studyId:n}=M0(),[r,{width:i}]=Ny(),[s,o]=O.useState(!1),a=O.useMemo(()=>s?Math.max(...e.map(l=>{const c=Math.min(...Object.values(l.answers).map(d=>d.startTime||0)),f=Math.max(...Object.values(l.answers).map(d=>d.endTime||0));return f&&c?f-c:0})):void 0,[s,e]);return S.jsxs(mu,{ref:r,style:{width:"100%"},children:[S.jsx($i,{children:S.jsx(Rw,{checked:s,label:"Scale by time",onChange:u=>o(u.currentTarget.checked)})}),e.map(u=>S.jsx(pan,{maxLength:a,studyConfig:t,studyId:n||"",height:200,participantData:u,width:i},u.participantId))]})}function gan({globalConfig:e}){const{studyId:t}=M0(),[n,r]=O.useState([]),[i,s]=O.useState(void 0),[o,a]=O.useState(!1),{storageEngine:u}=uo(),l=Xp(),{tab:c}=M0(),{user:f}=HA();O.useEffect(()=>{if(!t)return()=>{};if(t==="__revisit-widget"){const w=async E=>{if(E.data.type==="revisitWidget/CONFIG"&&u){const T=await Wae(E.data.payload);s(T)}};return window.addEventListener("message",w),window.parent.postMessage({type:"revisitWidget/READY"},"*"),()=>{window.removeEventListener("message",w)}}return Gae(t,e).then(w=>{w&&s(w)}),()=>{}},[t,e,u]);const d=O.useCallback(async()=>{if(a(!0),t){if(!i||!u)return;await u.initializeStudyDb(t,i);const w=await u.getAllParticipantsData();r(w),a(!1)}},[u,t,i]);O.useEffect(()=>{d()},[e,u,t,d]);const[h,p]=O.useState([]),[m,y,v]=O.useMemo(()=>{const w=n.filter(A=>!A.rejected&&A.completed),E=n.filter(A=>!A.rejected&&!A.completed),T=n.filter(A=>A.rejected);return p([...w,...E,...T]),[w,E,T]},[n]),b=O.useCallback(w=>{const E=[];w.includes("completed")&&E.push(...m),w.includes("inprogress")&&E.push(...y),w.includes("rejected")&&E.push(...v),p(E)},[m,y,v]);return S.jsxs(S.Fragment,{children:[S.jsx(I$,{studyIds:e.configsList}),S.jsx(zi.Main,{children:S.jsxs(Yy,{fluid:!0,style:{height:"100%",position:"relative"},children:[S.jsx(sd,{visible:o}),S.jsxs(an,{direction:"row",align:"center",justify:"space-between",children:[S.jsx(io,{order:5,children:t}),S.jsxs(an,{direction:"row",align:"center",children:[S.jsx(gt,{mt:-2,size:"sm",children:"Participants: "}),S.jsx(nl.Group,{defaultValue:["completed","inprogress","rejected"],onChange:b,mb:"xs",mt:8,ml:"xs",children:S.jsxs($i,{children:[S.jsx(nl,{value:"completed",label:"Completed"}),S.jsx(nl,{value:"inprogress",label:"In Progress"}),S.jsx(nl,{value:"rejected",label:"Rejected"})]})})]})]}),S.jsx(Zf,{h:"xs"}),S.jsxs(Vr,{variant:"outline",value:c,onChange:w=>l(`/analysis/stats/${t}/${w}`),style:{height:"100%"},children:[S.jsxs(Vr.List,{children:[S.jsx(Vr.Tab,{value:"table",leftSection:S.jsx(UZe,{size:16}),children:"Table View"}),S.jsx(Vr.Tab,{value:"stats",leftSection:S.jsx(_Ze,{size:16}),children:"Trial Stats"}),S.jsx(Vr.Tab,{value:"replay",leftSection:S.jsx(OZe,{size:16}),children:"Participant Replay"}),S.jsx(Vr.Tab,{value:"manage",leftSection:S.jsx(iTe,{size:16}),disabled:!f.isAdmin,children:"Manage"})]}),S.jsx(Vr.Panel,{value:"table",pt:"xs",children:i&&S.jsx(ian,{visibleParticipants:h,studyConfig:i,refresh:d})}),S.jsx(Vr.Panel,{value:"stats",pt:"xs",children:i&&S.jsx(can,{studyConfig:i,visibleParticipants:h})}),S.jsx(Vr.Panel,{value:"replay",pt:"xs",children:S.jsx(man,{visibleParticipants:h,studyConfig:i})}),S.jsx(Vr.Panel,{value:"manage",pt:"xs",children:t&&f.isAdmin?S.jsx(aan,{studyId:t,refresh:d}):S.jsx(Yy,{mt:20,children:S.jsx(Py,{title:"Unauthorized Access",variant:"light",color:"red",icon:S.jsx(LJ,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function Mxe({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=HA(),{storageEngine:o}=uo(),[a,u]=O.useState(!1),l=M0();return O.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&l[t]){const f=await n(l[t]);f&&u(f)}else u(!0);if(a)try{r&&await i(r)||s()}catch(f){s(),console.warn(f)}})()},[r.isAdmin,a]),r.determiningStatus||!o?S.jsx(sd,{visible:r.determiningStatus||!(o!=null&&o.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?S.jsx(NJ,{to:"/login"}):S.jsx(S.Fragment,{children:e})}async function g9e(e,t){if(e instanceof fp){t(!0);const n=new my,r=lF();try{await Amt(r,n,xAe)}catch(i){aP({title:"Error",message:i.message,color:"red"})}finally{t(!1)}return r.currentUser}return null}function yan(){const{user:e}=HA(),[t,n]=O.useState(!1),{storageEngine:r}=uo();return O.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&aP({title:"Unauthorized",message:"You are not authorized to use this application.",color:"red"})},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?S.jsx(NJ,{to:"/"}):S.jsx(Yy,{children:S.jsx(wA,{padding:"lg",children:S.jsxs(an,{align:"center",direction:"column",justify:"center",children:[S.jsx(mx,{maw:200,mt:50,mb:100,src:`${Ua}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),S.jsxs(S.Fragment,{children:[S.jsx(gt,{mb:20,children:"To access admin settings, please sign in using your Google account."}),S.jsx(yn,{onClick:()=>g9e(r,n),leftSection:S.jsx(zZe,{}),variant:"filled",children:"Sign In With Google"})]}),S.jsx(sd,{visible:t})]})})})}function van(){const{user:e,triggerAuth:t,logout:n}=HA(),{storageEngine:r}=uo(),[i,s]=O.useState(!1),[o,a]=O.useState([]),[u,l]=O.useState(!1),[c,f]=O.useState(!1),[d,h]=O.useState(!1),[p,m]=O.useState(!1),[y,v]=O.useState(!1),[b,w]=O.useState(""),[E,T]=O.useState(null),A=YAe({initialValues:{email:""},validate:{email:E1t("Invalid email")}});O.useEffect(()=>{(async()=>{if(l(!0),r instanceof fp){const H=await(r==null?void 0:r.getUserManagementData("authentication"));s((H==null?void 0:H.isEnabled)||!1);const Q=await(r==null?void 0:r.getUserManagementData("adminUsers"));Q&&Q.adminUsersList&&a(Q==null?void 0:Q.adminUsersList.map(J=>J.email))}else s(!1);l(!1)})()},[r]);const I=async()=>{if(l(!0),r instanceof fp){const F=await g9e(r,l);F&&F.email?(T({email:F.email,uid:F.uid}),m(!0)):v(!0)}l(!1)},R=async F=>{l(!0),r instanceof fp&&F&&(await r.changeAuth(!0),await r.addAdminUser(F),a([F.email]),s(!0),t()),m(!1),l(!1)},D=async()=>{if(l(!0),r instanceof fp){await r.addAdminUser({email:A.values.email,uid:null});const F=await r.getUserManagementData("adminUsers");a((F==null?void 0:F.adminUsersList.map(H=>H.email))||[])}l(!1),f(!1),A.setValues({email:""})},M=F=>{h(!0),w(F)},$=async()=>{if(l(!0),r instanceof fp){await r.removeAdminUser(b);const F=await r.getUserManagementData("adminUsers");a((F==null?void 0:F.adminUsersList.map(H=>H.email))||[])}h(!1),l(!1)},U=O.useMemo(()=>r instanceof fp,[r]);return S.jsxs(S.Fragment,{children:[S.jsx(Yy,{children:S.jsxs(wA,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[S.jsx(io,{mb:20,order:3,children:"Authentication"}),i?S.jsx(an,{children:S.jsx(gt,{children:"Authentication is enabled."})}):S.jsxs(an,{justify:"space-between",children:[S.jsx(je,{children:S.jsx(gt,{children:"Authentication is currently disabled."})}),S.jsx(cs,{label:"You can only enable auth when using Firebase",disabled:U,children:S.jsx(yn,{onClick:F=>U?I():F.preventDefault(),color:"green","data-disabled":U?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),i?S.jsxs(an,{mt:40,direction:"column",children:[S.jsxs(an,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[S.jsx(io,{order:6,children:"Enabled Users"}),S.jsx($J,{style:{cursor:"pointer"},onClick:()=>f(!0)})]}),o.length>0?o.map(F=>{var H;return S.jsxs(an,{justify:"space-between",mb:10,children:[S.jsx(gt,{children:F}),F===((H=e.user)==null?void 0:H.email)?S.jsx(gt,{color:"blue",size:"xs",children:"You"}):S.jsx(dx,{variant:"subtle",onClick:()=>M(F),children:S.jsx(oTe,{color:"red"})})]},F)}):null,S.jsx(an,{direction:"row",justify:"left",children:S.jsx(yn,{onClick:()=>n(),mt:20,children:"Log out"})})]}):null]})}),S.jsx(Us,{opened:c,onClose:()=>f(!1),title:"Add Admin User",children:S.jsxs(je,{component:"form",onSubmit:A.onSubmit(()=>D()),children:[S.jsx(_y,{leftSection:S.jsx(yZe,{}),placeholder:"User Gmail Account",...A.getInputProps("email")}),S.jsxs(an,{mt:30,justify:"right",children:[S.jsx(yn,{mr:5,variant:"subtle",color:"red",onClick:()=>f(!1),children:"Cancel"}),S.jsx(yn,{type:"submit",children:"Save"})]})]})}),S.jsxs(Us,{opened:d,size:"large",onClose:()=>h(!1),title:S.jsxs(gt,{fw:700,children:["Remove",b,"?"]}),children:[S.jsxs(gt,{mt:40,children:["Are you sure you want to remove",S.jsx("b",{children:b})," ","as an administrator?"]}),S.jsxs(an,{mt:40,justify:"right",children:[S.jsx(yn,{mr:5,variant:"subtle",color:"red",onClick:()=>h(!1),children:"Cancel"}),S.jsx(yn,{onClick:()=>$(),children:"Yes, I'm sure."})]})]}),S.jsxs(Us,{opened:p,size:"md",onClose:()=>m(!1),title:S.jsx(gt,{fw:700,children:"Enable Authentication?"}),children:[S.jsxs(gt,{mt:40,children:["User"," ",S.jsx("b",{children:E==null?void 0:E.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),S.jsxs(an,{mt:40,justify:"right",children:[S.jsx(yn,{mr:5,variant:"subtle",color:"red",onClick:()=>m(!1),children:"Cancel"}),S.jsx(yn,{onClick:()=>R(E),children:"Yes, I'm sure."})]})]}),S.jsxs(Us,{opened:y,size:"md",onClose:()=>v(!1),title:S.jsx(gt,{fw:700,children:"An Error Occurred."}),children:[S.jsxs(gt,{mt:40,children:["An error has occurred when trying to enable authentication. Please consult the"," ",S.jsx("a",{href:"https://revisit.dev/docs/data-and-deployment/authentication-authorization/adding-removing-ui/",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information."]}),S.jsx(an,{mt:40,justify:"right",children:S.jsx(yn,{mr:5,onClick:()=>v(!1),children:"Okay"})})]}),S.jsx(sd,{visible:u})]})}async function ban(){return void 0}function DR({title:e}){const t=xh();return O.useEffect(()=>{document.title=e},[t,e]),null}async function xan(){const t=await(await fetch(`${Ua}global.json`)).text();return Qon(t)}function _an(){const[e,t]=O.useState(null),[n,r]=O.useState({});O.useEffect(()=>{async function a(){e&&r(await ean(e))}a()},[e]),O.useEffect(()=>{e||xan().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=uo();O.useEffect(()=>{if(i!==void 0)return;async function a(){const u=await ban();s(u)}a()},[s,i]);const o=async a=>i instanceof fp?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?S.jsx(QJe,{basename:Ua,children:S.jsx(C0t,{children:S.jsx(dZe,{children:S.jsxs(CJe,{children:[S.jsx(z_,{path:"/",element:S.jsxs(S.Fragment,{children:[S.jsx(DR,{title:"ReVISit | Home"}),S.jsxs(zi,{padding:"md",header:{height:70},children:[S.jsx(I$,{studyIds:e.configsList}),S.jsx(k0t,{globalConfig:e,studyConfigs:n})]})]})}),S.jsx(z_,{path:"/:studyId/*",element:S.jsxs(S.Fragment,{children:[S.jsx(DR,{title:"ReVISit | Study"}),S.jsx(tan,{globalConfig:e})]})}),S.jsx(z_,{path:"/analysis/stats/:studyId/:tab/:trialId?",element:S.jsxs(S.Fragment,{children:[S.jsx(DR,{title:"ReVISit | Analysis"}),S.jsx(Mxe,{paramToCheck:"studyId",paramCallback:o,children:S.jsx(zi,{padding:"md",header:{height:70},children:S.jsx(gan,{globalConfig:e})})})]})}),S.jsx(z_,{path:"/analysis/stats/:studyId",element:S.jsx(QBe,{to:"./table",replace:!0})}),S.jsx(z_,{path:"/settings",element:S.jsxs(Mxe,{children:[S.jsx(DR,{title:"ReVISit | Settings"}),S.jsxs(zi,{padding:"md",header:{height:70},children:[S.jsx(I$,{studyIds:e.configsList}),S.jsx(zi.Main,{children:S.jsx(van,{})})]})]})}),S.jsx(z_,{path:"/login",element:S.jsxs(S.Fragment,{children:[S.jsx(DR,{title:"ReVISit | Login"}),S.jsxs(zi,{padding:"md",header:{height:70},children:[S.jsx(I$,{studyIds:e.configsList}),S.jsx(zi.Main,{children:S.jsx(yan,{})})]})]})})]})})})}):null}tUe.createRoot(document.getElementById("root")).render(S.jsx(li.StrictMode,{children:S.jsx(MQe,{children:S.jsxs(o_e,{children:[S.jsx(w1,{}),S.jsx(_an,{})]})})}))});export default wan();
